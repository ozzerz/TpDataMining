{
  "comments": [
    "When logging InvocationTargetExceptions, the nested exception, which contains \nthe real cause of the problem, is often omitted.\n\nOne approach is to always log the innermost exception (even with multiple \nlevels of nesting). Another is to ensure that every frame for every exception \nin the chain is printed.",
    "One example is: bug 44735.",
    "Does this mean that we should be changing code in the platform logger when\nlogging invocation target exceptions?",
    "We already do something like that for BundleExceptions (see\nDefaultLog#getStackTrace). We could easily do the same for\nInvocationTargetExceptions.\n\nThe (minor) problem with doing this is that nested exceptions may appear twice\nin the log entry (once as generated by Throwable.printStackTrace, as in the bug\nmentioned above, and again, written by us).\n\nThe other approach mentioned in the original report does not work with Java\n1.3/eeminimum (programmatic access to stack trace frames was added in 1.4).\n\nI guess this should be moved to Equinox.",
    "The resolution of this depends on bug 60267.",
    "Fixed. Released to HEAD. We will ensure the deepest exception is always logged\n(will skip BundleExceptions/InvocationTargetExceptions). Example:\n\n!ENTRY reference:file:d:/target/releasing/plugins/org.eclipse.core.runtime/ 0 0\nApr 28, 2004 12:23:39.40\n!MESSAGE FrameworkEvent.ERROR\n!STACK 0\norg.osgi.framework.BundleException: Exception in\norg.eclipse.core.internal.runtime.PlatformActivator.start() of bundle\norg.eclipse.core.runtime.\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:990)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:952)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:408)\n\tat\norg.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:373)\n\tat\norg.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:999)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:571)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:482)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:272)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:442)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:153)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventThread$Queued.dispatchEvent(EventThread.java:56)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)\nCaused by: org.osgi.framework.BundleException: nested 1\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator.start(PlatformActivator.java:55)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:973)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:969)\n\t... 11 more\nCaused by: java.lang.reflect.InvocationTargetException: nested 2\n\t... 15 more\nCaused by: java.lang.RuntimeException: nested 3\n\t... 15 more\nRoot exception:\njava.lang.RuntimeException: nested 3\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator.start(PlatformActivator.java:55)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:973)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:969)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:952)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:408)\n\tat\norg.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:373)\n\tat\norg.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:999)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:571)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:482)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:272)\n\tat\norg.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:442)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:153)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventThread$Queued.dispatchEvent(EventThread.java:56)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)\n\nThe \"Caused by\" stacks are written by Throwable#printStackTrace on Sun/IBM JDK\n1.4.*. We write the \"Root exception\" after that, which is usually the most\nimportant one."
  ],
  "commentCreationDates": [
    "2003-10-17T02:24:02+02:00",
    "2003-10-17T02:24:44+02:00",
    "2004-04-28T16:32:33+02:00",
    "2004-04-28T16:56:25+02:00",
    "2004-04-28T18:05:09+02:00",
    "2004-04-28T18:35:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Exception in org.eclipse.core.internal.runtime.PlatformActivator.start() of bundle org.eclipse.core.runtime.",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:990"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:952"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:408"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.resume",
          "source": "AbstractBundle.java:373"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.resumeBundle",
          "source": "Framework.java:999"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles",
          "source": "StartLevelManager.java:571"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL",
          "source": "StartLevelManager.java:482"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
          "source": "StartLevelManager.java:272"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent",
          "source": "StartLevelManager.java:442"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:153"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventThread$Queued.dispatchEvent",
          "source": "EventThread.java:56"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventThread.run",
          "source": "EventThread.java:107"
        }
      ],
      "causedBy": {
        "exceptionType": "org.osgi.framework.BundleException",
        "message": "nested 1",
        "elements": [
          {
            "method": "org.eclipse.core.internal.runtime.PlatformActivator.start",
            "source": "PlatformActivator.java:55"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run",
            "source": "BundleContextImpl.java:973"
          },
          {
            "method": "java.security.AccessController.doPrivileged",
            "source": "Native Method"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
            "source": "BundleContextImpl.java:969"
          }
        ],
        "causedBy": {
          "exceptionType": "java.lang.RuntimeException",
          "message": "nested 3",
          "elements": [
            {
              "method": "org.eclipse.core.internal.runtime.PlatformActivator.start",
              "source": "PlatformActivator.java:55"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run",
              "source": "BundleContextImpl.java:973"
            },
            {
              "method": "java.security.AccessController.doPrivileged",
              "source": "Native Method"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
              "source": "BundleContextImpl.java:969"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
              "source": "BundleContextImpl.java:952"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
              "source": "BundleHost.java:408"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.resume",
              "source": "AbstractBundle.java:373"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.Framework.resumeBundle",
              "source": "Framework.java:999"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles",
              "source": "StartLevelManager.java:571"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL",
              "source": "StartLevelManager.java:482"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
              "source": "StartLevelManager.java:272"
            },
            {
              "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent",
              "source": "StartLevelManager.java:442"
            },
            {
              "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
              "source": "EventManager.java:153"
            },
            {
              "method": "org.eclipse.osgi.framework.eventmgr.EventThread$Queued.dispatchEvent",
              "source": "EventThread.java:56"
            },
            {
              "method": "org.eclipse.osgi.framework.eventmgr.EventThread.run",
              "source": "EventThread.java:107"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 5,
      "bugId": "45067",
      "date": "2004-04-28T18:35:30+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "45067",
  "bugId": "45067",
  "date": "2003-10-17T02:24:02+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}