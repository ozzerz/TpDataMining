{
  "comments": [
    "Build: I20070522-0010\n\n1) Open the drop-down menu in the package explorer\u0027s tool bar (the little triangle).\n2) Hit Esc to close the menu.\n\n-\u003e One image is leaked each time. This is the image for the \"Window Working Set\" item in the menu. The same leak occurs in the menu for the Projects/Packages/Types views in the Java Browsing perspective. While the leak occurs in the JDT UI class WorkingSetMenuContributionItem, I\u0027m logging in platform UI because it looks like the image is correctly disposed in the contribution item\u0027s dispose method.  Here is a sample stack trace from Sleak:\n\njava.lang.Error\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java:56)\n\tat org.eclipse.swt.graphics.Device.new_Object(Device.java:787)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:491)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:289)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:227)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:205)\n\tat org.eclipse.jdt.internal.ui.workingsets.WorkingSetMenuContributionItem.fill(WorkingSetMenuContributionItem.java:69)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:665)\n\tat org.eclipse.ui.internal.ViewPane$PaneMenuManager.update(ViewPane.java:97)\n\tat org.eclipse.jface.action.MenuManager.handleAboutToShow(MenuManager.java:395)\n\tat org.eclipse.jface.action.MenuManager.access$1(MenuManager.java:390)\n\tat org.eclipse.jface.action.MenuManager$2.menuShown(MenuManager.java:416)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:234)",
    "Created an attachment (id\u003d68233)\nPotential Fix v01\n\nThese items are being removed by a JDT WorkingSetFilterActionGroup and not being disposed ... when you close eclipse or one of the views, we dispose the last one available.\nPW\n",
    "Created an attachment (id\u003d68379)\npatch\n\npatch fixes all missing dispose calls after removing an contribution item from a menu manager (all other items are disposed by menumanager.dispose)",
    "Dani and Markus, can you review?",
    "The patch is good and I verified that it works using the Process Explorer. Filed bug 188909 against Platform UI to clarify whether it\u0027s OK not to dispose the images on dispose() and bug 188911 to confirm that the Javadoc of not calling IContributionItem.dispose() is outdated.",
    "Verified with Sleak and released.",
    "verified with sleak in I20070527-0010",
    "*** Bug 184856 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2007-05-22T23:51:30+02:00",
    "2007-05-23T00:54:21+02:00",
    "2007-05-23T18:25:40+02:00",
    "2007-05-23T18:26:38+02:00",
    "2007-05-24T15:53:33+02:00",
    "2007-05-24T17:58:56+02:00",
    "2007-05-29T11:21:28+02:00",
    "2007-06-05T19:08:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Error",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java:56"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.new_Object",
          "source": "Device.java:787"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.\u003cinit\u003e",
          "source": "Image.java:491"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:289"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:227"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:205"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.workingsets.WorkingSetMenuContributionItem.fill",
          "source": "WorkingSetMenuContributionItem.java:69"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:665"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane$PaneMenuManager.update",
          "source": "ViewPane.java:97"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.handleAboutToShow",
          "source": "MenuManager.java:395"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.access$1",
          "source": "MenuManager.java:390"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager$2.menuShown",
          "source": "MenuManager.java:416"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:234"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "188485",
      "date": "2007-05-22T23:51:30+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "188485",
  "bugId": "188485",
  "date": "2007-05-22T23:51:30+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "major"
}