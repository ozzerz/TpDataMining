{
  "comments": [
    "Build ID: I20070625-1500\n\nSteps To Reproduce:\nI\u0027ve created a mapping that contains 2 different link representations for the same domain element. Each time I try to create the second one (in the mapping hierarchy) the following exception will be thrown.\n\n\nMore information:\norg.eclipse.core.commands.ExecutionException: While executing the operation, an exception occurred\n\tat org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:519)\n\tat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:205)\n\tat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:168)\n\tat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:155)\n\tat org.eclipse.gef.tools.AbstractTool.executeCommand(AbstractTool.java:388)\n\tat org.eclipse.gef.tools.AbstractTool.executeCurrentCommand(AbstractTool.java:400)\n\tat org.eclipse.gmf.runtime.diagram.ui.tools.ConnectionCreationTool.handleCreateConnection(ConnectionCreationTool.java:346)\n\tat org.eclipse.gmf.runtime.diagram.ui.tools.ConnectionCreationTool.handleButtonUp(ConnectionCreationTool.java:183)\n\tat org.eclipse.gef.tools.AbstractTool.mouseUp(AbstractTool.java:1053)\n\tat org.eclipse.gef.EditDomain.mouseUp(EditDomain.java:259)\n\tat org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased(DomainEventDispatcher.java:374)\n\tat org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp(LightweightSystem.java:538)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:206)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1144)\nCaused by: org.eclipse.jface.util.Assert$AssertionFailedException: null argument;failed to create a view\n\tat org.eclipse.jface.util.Assert.isNotNull(Assert.java:153)\n\tat org.eclipse.gmf.runtime.diagram.ui.commands.CreateCommand.doExecuteWithResult(CreateCommand.java:99)\n\tat org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand.doExecute(AbstractTransactionalCommand.java:246)\n\tat org.eclipse.emf.workspace.AbstractEMFOperation.execute(AbstractEMFOperation.java:137)\n\tat org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)\n\tat org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)\n\tat org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)\n\tat org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)\n\tat org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:511)\n\t... 37 more",
    "I spottet the problem in ???VisualIDRegistry.getNodeVisualID(View containerView, EObject domainElement): this method always returns the visual node id of the first node mapping (compare the if statements in the switch body which are equal):\n\n    switch (EcOrganizationModelVisualIDRegistry.getVisualID(containerView)) {\n        case EcOrganizationModelEditPart.VISUAL_ID:\n            if (EcOrganizationModelPackage.eINSTANCE.getEcOrganizationUnit().isSuperTypeOf(\n                            domainElement.eClass())) {\n                return EcOrganizationUnitEditPart.VISUAL_ID;\n            }\n            if (EcOrganizationModelPackage.eINSTANCE.getEcOrganizationUnit().isSuperTypeOf(\n                            domainElement.eClass())) {\n                return EcOrganizationUnit2EditPart.VISUAL_ID;\n            }\n            break;\n      }",
    "(In reply to comment #1)\nnote: looks like VisualIdRegistry should check containment feature in addition?\n\n",
    "I think we are discussing 2 different problems located in the same class and its also related to https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d195272.\n\nIn my case the problem is located in ???VisualIdRegistry#getLinkWithClassVisualID().\n\n   public static int getLinkWithClassVisualID(EObject domainElement) {\n        if (domainElement \u003d\u003d null) {\n            return -1;\n        }\n        if (ModelPackage.eINSTANCE.getProperty().isSuperTypeOf(domainElement.eClass()) \u0026\u0026\n                evaluate(Property_3001_Constraint, domainElement)) {\n            return Property4EditPart.VISUAL_ID;\n        }\n        if (ModelPackage.eINSTANCE.getProperty().isSuperTypeOf(domainElement.eClass()) \u0026\u0026\n                evaluate(Property_3002_Constraint, domainElement)) {\n            return Property5EditPart.VISUAL_ID;\n        }\n        if (ModelPackage.eINSTANCE.getProperty().isSuperTypeOf(domainElement.eClass()) \u0026\u0026\n                evaluate(Property_3004_Constraint, domainElement)) {\n            return Property6EditPart.VISUAL_ID;\n        }\n        return -1;\n    }\n\nIn my case there is simply no criteria to difference the link elements. If they are based on the same model element and also the constraints are the same. At least there has to be a difference between each other.\nSo, I think its not a real bug.\n\n\n",
    "See http://dev.eclipse.org/newslists/news.eclipse.modeling.gmf/msg07566.html\nrelated newsgroup thread.\n"
  ],
  "commentCreationDates": [
    "2007-08-10T11:30:33+02:00",
    "2007-08-13T10:46:16+02:00",
    "2007-08-13T10:53:08+02:00",
    "2007-08-13T11:07:54+02:00",
    "2007-08-13T11:12:38+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.commands.ExecutionException",
      "message": "While executing the operation, an exception occurred",
      "elements": [
        {
          "method": "org.eclipse.core.commands.operations.DefaultOperationHistory.execute",
          "source": "DefaultOperationHistory.java:519"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute",
          "source": "DiagramCommandStack.java:205"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute",
          "source": "DiagramCommandStack.java:168"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute",
          "source": "DiagramCommandStack.java:155"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.executeCommand",
          "source": "AbstractTool.java:388"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.executeCurrentCommand",
          "source": "AbstractTool.java:400"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.tools.ConnectionCreationTool.handleCreateConnection",
          "source": "ConnectionCreationTool.java:346"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.tools.ConnectionCreationTool.handleButtonUp",
          "source": "ConnectionCreationTool.java:183"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.mouseUp",
          "source": "AbstractTool.java:1053"
        },
        {
          "method": "org.eclipse.gef.EditDomain.mouseUp",
          "source": "EditDomain.java:259"
        },
        {
          "method": "org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased",
          "source": "DomainEventDispatcher.java:374"
        },
        {
          "method": "org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp",
          "source": "LightweightSystem.java:538"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:206"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3682"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3293"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.jface.util.Assert$AssertionFailedException",
        "message": "null argument;failed to create a view",
        "elements": [
          {
            "method": "org.eclipse.jface.util.Assert.isNotNull",
            "source": "Assert.java:153"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.commands.CreateCommand.doExecuteWithResult",
            "source": "CreateCommand.java:99"
          },
          {
            "method": "org.eclipse.gmf.runtime.emf.commands.core.command.AbstractTransactionalCommand.doExecute",
            "source": "AbstractTransactionalCommand.java:246"
          },
          {
            "method": "org.eclipse.emf.workspace.AbstractEMFOperation.execute",
            "source": "AbstractEMFOperation.java:137"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult",
            "source": "CompositeCommand.java:406"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute",
            "source": "AbstractCommand.java:134"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult",
            "source": "CompositeCommand.java:406"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute",
            "source": "AbstractCommand.java:134"
          },
          {
            "method": "org.eclipse.core.commands.operations.DefaultOperationHistory.execute",
            "source": "DefaultOperationHistory.java:511"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "199535",
      "date": "2007-08-10T11:30:33+02:00",
      "product": "GMF",
      "component": "Generation",
      "severity": "major"
    }
  ],
  "groupId": "199535",
  "bugId": "199535",
  "date": "2007-08-10T11:30:33+02:00",
  "product": "GMF",
  "component": "Generation",
  "severity": "major"
}