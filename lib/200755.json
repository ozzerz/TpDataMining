{
  "comments": [
    "Description:\nFail to preview Crosstab after deploy BIRT in application servers.\nBuild number:2.2.1.v200708220927\n\nSteps to reproduce:\n1. Deploy BIRT in Tomcat.\n2. Preview a report containing Crosstab.\n\nExpected result:\nDisplay report.\n\nActual result:\nNOClassDefFoundException.\n\nError log:\norg.eclipse.birt.report.service.api.ReportServiceException: Error happened while running the report; nested exception is:\njava.lang.NoClassDefFoundError: org/eclipse/birt/data/engine/aggregation/BuiltInAggregationFactory\n\nAxisFault\n faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException\n faultSubcode: \n faultString: org.eclipse.birt.report.service.api.ReportServiceException: Error happened while running the report; nested exception is: \n\tjava.lang.NoClassDefFoundError: org/eclipse/birt/data/engine/aggregation/BuiltInAggregationFactory\n faultActor: \n faultNode: \n faultDetail: \n\t{http://xml.apache.org/axis/}stackTrace:org.eclipse.birt.report.service.api.ReportServiceException: Error happened while running the report; nested exception is: \n\tjava.lang.NoClassDefFoundError: org/eclipse/birt/data/engine/aggregation/BuiltInAggregationFactory\n\tat org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute(Unknown Source)\n\tat org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(Unknown Source)\n\tat org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source)\n\tat org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(Unknown Source)\n\tat org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet(Unknown Source)\n\tat org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tat org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\n\tat java.lang.Thread.run(Thread.java:595)\nCaused by: java.lang.NoClassDefFoundError: org/eclipse/birt/data/engine/aggregation/BuiltInAggregationFactory\n\tat org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.populateBuiltInAggregations(AggregationFactory.java:410)\n\tat org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.populateAggregations(AggregationFactory.java:153)\n\tat org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.\u003cinit\u003e(AggregationFactory.java:140)\n\tat org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.getInstance(AggregationFactory.java:118)\n\tat org.eclipse.birt.data.engine.impl.ServiceForQueryResults$EventHandler.populateOneAggrDefinition(ServiceForQueryResults.java:483)\n\tat org.eclipse.birt.data.engine.impl.ServiceForQueryResults$EventHandler.populateAggrDefinitions(ServiceForQueryResults.java:450)\n\tat org.eclipse.birt.data.engine.impl.ServiceForQueryResults$EventHandler.getAggrDefinitions(ServiceForQueryResults.java:421)\n\tat org.eclipse.birt.data.engine.executor.transform.pass.ResultSetProcessUtil.populateResultSet(ResultSetProcessUtil.java:106)\n\tat org.eclipse.birt.data.engine.executor.transform.pass.ResultSetProcessUtil.doPopulate(ResultSetProcessUtil.java:84)\n\tat org.eclipse.birt.data.engine.executor.transform.pass.PassManager.doPopulation(PassManager.java:289)\n\tat org.eclipse.birt.data.engine.executor.transform.pass.PassManager.doMultiPass(PassManager.java:230)\n\tat org.eclipse.birt.data.engine.executor.transform.pass.PassManager.pass(PassManager.java:94)\n\tat org.eclipse.birt.data.engine.executor.transform.pass.PassManager.populateResultSet(PassManager.java:72)\n\tat org.eclipse.birt.data.engine.executor.transform.ResultSetPopulator.populateResultSet(ResultSetPopulator.java:208)\n\tat org.eclipse.birt.data.engine.executor.transform.CachedResultSet.\u003cinit\u003e(CachedResultSet.java:77)\n\tat org.eclipse.birt.data.engine.executor.DataSourceQuery.execute(DataSourceQuery.java:510)\n\tat org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery$OdaDSQueryExecutor.executeOdiQuery(PreparedOdaDSQuery.java:338)\n\tat org.eclipse.birt.data.engine.impl.QueryExecutor.execute(QueryExecutor.java:761)\n\tat org.eclipse.birt.data.engine.impl.ServiceForQueryResults.executeQuery(ServiceForQueryResults.java:216)\n\tat org.eclipse.birt.data.engine.impl.QueryResults.getResultIterator(QueryResults.java:157)\n\tat org.eclipse.birt.report.data.adapter.impl.DataSetIterator.executeQuery(DataSetIterator.java:140)\n\tat org.eclipse.birt.report.data.adapter.impl.DataSetIterator.\u003cinit\u003e(DataSetIterator.java:237)\n\tat org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.createCube(DataRequestSessionImpl.java:649)\n\tat org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.materializeCube(DataRequestSessionImpl.java:506)\n\tat org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.prepare(DataRequestSessionImpl.java:845)\n\tat org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.prepare(DataRequestSessionImpl.java:464)\n\tat org.eclipse.birt.report.engine.data.dte.DteDataEngine.doPrepareQuery(DteDataEngine.java:100)\n\tat org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.prepare(AbstractDataEngine.java:138)\n\tat org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:94)\n\tat org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportExecutor.execute(WrappedReportExecutor.java:59)\n\tat org.eclipse.birt.report.engine.internal.executor.dup.SuppressDuplciateReportExecutor.execute(SuppressDuplciateReportExecutor.java:50)\n\tat org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportExecutor.execute(WrappedReportExecutor.java:59)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:138)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:68)\n\tat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n\t... 34 more",
    "This bug is caused by including reference to a non-api class in api package. This leads to ClassNotFound exception when BIRT is deployed.\n\nFixed in source.\n",
    "Verify in build 2.2.1.v20070824"
  ],
  "commentCreationDates": [
    "2007-08-22T06:01:53+02:00",
    "2007-08-22T09:16:08+02:00",
    "2007-08-24T04:50:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/birt/data/engine/aggregation/BuiltInAggregationFactory",
      "elements": [
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:689"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:802"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:237"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:157"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:214"
        },
        {
          "method": "org.apache.catalina.core.StandardValveContext.invokeNext",
          "source": "StandardValveContext.java:104"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:520"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invokeInternal",
          "source": "StandardContextValve.java:198"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:152"
        },
        {
          "method": "org.apache.catalina.core.StandardValveContext.invokeNext",
          "source": "StandardValveContext.java:104"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:520"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:137"
        },
        {
          "method": "org.apache.catalina.core.StandardValveContext.invokeNext",
          "source": "StandardValveContext.java:104"
        },
        {
          "method": "org.apache.catalina.valves.ErrorReportValve.invoke",
          "source": "ErrorReportValve.java:118"
        },
        {
          "method": "org.apache.catalina.core.StandardValveContext.invokeNext",
          "source": "StandardValveContext.java:102"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:520"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:109"
        },
        {
          "method": "org.apache.catalina.core.StandardValveContext.invokeNext",
          "source": "StandardValveContext.java:104"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:520"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:929"
        },
        {
          "method": "org.apache.coyote.tomcat5.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:160"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:799"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:705"
        },
        {
          "method": "org.apache.tomcat.util.net.TcpWorkerThread.runIt",
          "source": "PoolTcpEndpoint.java:577"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:683"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NoClassDefFoundError",
        "message": "org/eclipse/birt/data/engine/aggregation/BuiltInAggregationFactory",
        "elements": [
          {
            "method": "org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.populateBuiltInAggregations",
            "source": "AggregationFactory.java:410"
          },
          {
            "method": "org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.populateAggregations",
            "source": "AggregationFactory.java:153"
          },
          {
            "method": "org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.\u003cinit\u003e",
            "source": "AggregationFactory.java:140"
          },
          {
            "method": "org.eclipse.birt.data.engine.api.aggregation.AggregationFactory.getInstance",
            "source": "AggregationFactory.java:118"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.ServiceForQueryResults$EventHandler.populateOneAggrDefinition",
            "source": "ServiceForQueryResults.java:483"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.ServiceForQueryResults$EventHandler.populateAggrDefinitions",
            "source": "ServiceForQueryResults.java:450"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.ServiceForQueryResults$EventHandler.getAggrDefinitions",
            "source": "ServiceForQueryResults.java:421"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.pass.ResultSetProcessUtil.populateResultSet",
            "source": "ResultSetProcessUtil.java:106"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.pass.ResultSetProcessUtil.doPopulate",
            "source": "ResultSetProcessUtil.java:84"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.pass.PassManager.doPopulation",
            "source": "PassManager.java:289"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.pass.PassManager.doMultiPass",
            "source": "PassManager.java:230"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.pass.PassManager.pass",
            "source": "PassManager.java:94"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.pass.PassManager.populateResultSet",
            "source": "PassManager.java:72"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.ResultSetPopulator.populateResultSet",
            "source": "ResultSetPopulator.java:208"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.transform.CachedResultSet.\u003cinit\u003e",
            "source": "CachedResultSet.java:77"
          },
          {
            "method": "org.eclipse.birt.data.engine.executor.DataSourceQuery.execute",
            "source": "DataSourceQuery.java:510"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery$OdaDSQueryExecutor.executeOdiQuery",
            "source": "PreparedOdaDSQuery.java:338"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.QueryExecutor.execute",
            "source": "QueryExecutor.java:761"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.ServiceForQueryResults.executeQuery",
            "source": "ServiceForQueryResults.java:216"
          },
          {
            "method": "org.eclipse.birt.data.engine.impl.QueryResults.getResultIterator",
            "source": "QueryResults.java:157"
          },
          {
            "method": "org.eclipse.birt.report.data.adapter.impl.DataSetIterator.executeQuery",
            "source": "DataSetIterator.java:140"
          },
          {
            "method": "org.eclipse.birt.report.data.adapter.impl.DataSetIterator.\u003cinit\u003e",
            "source": "DataSetIterator.java:237"
          },
          {
            "method": "org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.createCube",
            "source": "DataRequestSessionImpl.java:649"
          },
          {
            "method": "org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.materializeCube",
            "source": "DataRequestSessionImpl.java:506"
          },
          {
            "method": "org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.prepare",
            "source": "DataRequestSessionImpl.java:845"
          },
          {
            "method": "org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.prepare",
            "source": "DataRequestSessionImpl.java:464"
          },
          {
            "method": "org.eclipse.birt.report.engine.data.dte.DteDataEngine.doPrepareQuery",
            "source": "DteDataEngine.java:100"
          },
          {
            "method": "org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.prepare",
            "source": "AbstractDataEngine.java:138"
          },
          {
            "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.execute",
            "source": "ReportExecutor.java:94"
          },
          {
            "method": "org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportExecutor.execute",
            "source": "WrappedReportExecutor.java:59"
          },
          {
            "method": "org.eclipse.birt.report.engine.internal.executor.dup.SuppressDuplciateReportExecutor.execute",
            "source": "SuppressDuplciateReportExecutor.java:50"
          },
          {
            "method": "org.eclipse.birt.report.engine.internal.executor.wrap.WrappedReportExecutor.execute",
            "source": "WrappedReportExecutor.java:59"
          },
          {
            "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
            "source": "RunAndRenderTask.java:138"
          },
          {
            "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
            "source": "RunAndRenderTask.java:68"
          },
          {
            "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
            "source": "Unknown Source"
          },
          {
            "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
            "source": "Unknown Source"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "200755",
      "date": "2007-08-22T06:01:53+02:00",
      "product": "BIRT",
      "component": "Data",
      "severity": "critical"
    }
  ],
  "groupId": "200755",
  "bugId": "200755",
  "date": "2007-08-22T06:01:53+02:00",
  "product": "BIRT",
  "component": "Data",
  "severity": "critical"
}