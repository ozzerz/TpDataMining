{
  "comments": [
    "We are building an RCP application based on 3.0 Eclipse.  In general, things\nwork extremely well.  We have an intermittent problem during application\nshutdown where we get the above NoClassDefFoundError.  It appears that this is\nprobably a race condition that causes the associated classloader to be shut down\nbefore the decorators thread has been stopped.  Because this happens during\nshutdown, it does not have a detrimental effect on the running of the\napplication, although it may induce some concern amongst users of the\napplication if it occurs.\n\nThe full stack trace that is written to the console follows:\n\njava.lang.NoClassDefFoundError: org/eclipse/ui/internal/progress/TaskInfo\n\tat org.eclipse.ui.internal.progress.JobInfo.beginTask(JobInfo.java:150)\n\tat\norg.eclipse.ui.internal.progress.ProgressManager$JobMonitor.beginTask(ProgressManager.java:167)\n\tat\norg.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:220)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)",
    "\n\n*** This bug has been marked as a duplicate of 47255 ***",
    "Tod, \n\nWhy is this marked as a duplicate with no resolution?  I understand the\nclassloader issue here, but it appears that the decorator job is started by the\nworkbench and not directly by our code.  Therefore, I would assume it is the\nworkbench\u0027s responsibility to shut the job back down again.\n\nI see in the workbench code that\norg.eclipse.ui.internal.decorators.DecorationScheduler is created and managed by\norg.eclipse.ui.internal.decorators.DecoratorManager.  DecoratorManager has a\npublic shutdown method that calls shutdown on the DecorationScheduler, but I can\nfind no references to that method. Because both of these classes reside in an\ninternal package, and the IDecoratorManager interface does not surface the\nshutdown method the control rests firmly in the workbench.  It seems that the\nworkbench plugin/bundle should be calling shutdown on the DecorationManager\nduring bundle shutdown.\n\nSo, although I understand the classloader issue that is being referenced, this\nlooks like something that the workbench is going to have to take care of if my\nreading of 47255 is correct. \nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d58172 is an example of what I\u0027m\ntalking about.  The bug states that it is JDT that needs to handle the problem\nand not the underlying framework.\n\nLooking forward to your thoughts.  Thanks.",
    "Thanks for that Craig - I moved too fast there. Sure enough we are doing a \nbeginTask before we check if we were shutdown. I\u0027ll add the check.",
    "Good to hear.  Any chance we will be able to see this in either the 3.0.1 or\n3.0.2 maintenance release?",
    "Not for 3.0.1 (it is about to go out the door) but we could consider it for \n3.0.2. However as this does not hurt anything I don\u0027t think it is something we \nshould add for 3.0.2.\n\nReleased for 3.1 build 20040916",
    "What is the current target for 3.1 final?  If it is early 2005 (first quarter?),\nwe should be ok.",
    "March 31, 2005.",
    "Verified in build 200409210800"
  ],
  "commentCreationDates": [
    "2004-09-14T22:41:42+02:00",
    "2004-09-15T15:09:08+02:00",
    "2004-09-15T15:28:10+02:00",
    "2004-09-15T17:04:09+02:00",
    "2004-09-15T17:08:14+02:00",
    "2004-09-15T17:16:55+02:00",
    "2004-09-15T17:21:02+02:00",
    "2004-09-15T17:58:11+02:00",
    "2004-09-21T17:07:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/ui/internal/progress/TaskInfo",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.progress.JobInfo.beginTask",
          "source": "JobInfo.java:150"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressManager$JobMonitor.beginTask",
          "source": "ProgressManager.java:167"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.DecorationScheduler$1.run",
          "source": "DecorationScheduler.java:220"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "73926",
      "date": "2004-09-14T22:41:42+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "73926",
  "bugId": "73926",
  "date": "2004-09-14T22:41:42+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}