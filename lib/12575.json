{
  "comments": [
    "I crashed eclipse and I couldn\u0027t restart the workspace afterwards.\n\nThe walkback I got follows below.\nThe only fix was to remove the .snap file.\n\nThe project was an older eclipse project that didn\u0027t have a .project file when \nI\u0027ve checked it out. \n\nAs a general observation, the recovery code should be fully exception save, \ni.e., I\u0027m willing to accept loosing some of my changes, but is inacceptable to \nfully loose my workspace. The .snap file should be ignored in the case of \nproblems.\n\nHere is the walkback that blocked Eclipse from starting up:\n\n2 org.eclipse.core.runtime 2 Problems occurred when invoking code from plug-in: \norg.eclipse.core.runtime.\norg.eclipse.core.internal.dtree.ObjectNotFoundException: Tree \nelement /junit/.project not found.\n\tat org.eclipse.core.internal.dtree.AbstractDataTree.handleNotFound\n(AbstractDataTree.java:238)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.getData\n(DeltaDataTree.java:606)\n\tat org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta\n(DataDeltaNode.java:49)\n\tat org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta\n(DataDeltaNode.java:46)\n\tat org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta\n(DataDeltaNode.java:46)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.asBackwardDelta\n(DeltaDataTree.java:91)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.reroot\n(DeltaDataTree.java:813)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.reroot\n(DeltaDataTree.java:812)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.reroot\n(DeltaDataTree.java:812)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.reroot\n(DeltaDataTree.java:812)\n\tat org.eclipse.core.internal.dtree.DeltaDataTree.reroot\n(DeltaDataTree.java:788)\n\tat org.eclipse.core.internal.watson.ElementTree.immutable\n(ElementTree.java:687)\n\tat org.eclipse.core.internal.resources.SaveManager.restore\n(SaveManager.java:450)\n\tat org.eclipse.core.internal.resources.SaveManager.startup\n(SaveManager.java:887)\n\tat org.eclipse.core.internal.resources.Workspace.startup\n(Workspace.java:1460)\n\tat org.eclipse.core.internal.resources.Workspace.open\n(Workspace.java:1258)\n\tat org.eclipse.core.resources.ResourcesPlugin.startup\n(ResourcesPlugin.java:155)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor$1.run\n(PluginDescriptor.java:701)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:817)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation\n(PluginDescriptor.java:713)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation\n(PluginDescriptor.java:184)\n\tat org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin\n(PluginClassLoader.java:52)\n\tat \norg.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf\n(PluginClassLoader.java:130)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:771)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.access$0\n(DelegatingURLClassLoader.java:765)\n\tat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader$DelegateLoader.loadClass\n(DelegatingURLClassLoader.java:65)\n\tat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassPrerequisites\n(DelegatingURLClassLoader.java:425)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:779)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:751)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:257)\n\tat java.lang.Class.newInstance0(Native Method)\n\tat java.lang.Class.newInstance(Class.java:254)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:136)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:165)\n\tat \norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension\n(ConfigurationElement.java:96)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.loaderGetRunnable\n(InternalPlatform.java:469)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.getRunnable\n(InternalBootLoader.java:448)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:773)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:319)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:196)\n\tat org.eclipse.core.launcher.Main.run(Main.java:555)\n\tat org.eclipse.core.launcher.UIMain.main(UIMain.java:52)\nLog: Sat Mar 30 11:53:16 GMT+01:00 2002\n4 org.eclipse.core.runtime 2 Plugin org.eclipse.ui was unable to instantiate \nclass org.eclipse.ui.internal.Workbench.\norg.eclipse.core.internal.boot.DelegatingLoaderException: \norg.eclipse.core.runtime.CoreException: Problems encountered starting up plug-\nin: org.eclipse.core.resources.\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation\n(PluginDescriptor.java:719)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation\n(PluginDescriptor.java:184)\n\tat org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin\n(PluginClassLoader.java:52)\n\tat \norg.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf\n(PluginClassLoader.java:130)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:771)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.access$0\n(DelegatingURLClassLoader.java:765)\n\tat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader$DelegateLoader.loadClass\n(DelegatingURLClassLoader.java:65)\n\tat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassPrerequisites\n(DelegatingURLClassLoader.java:425)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:779)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:751)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:257)\n\tat java.lang.Class.newInstance0(Native Method)\n\tat java.lang.Class.newInstance(Class.java:254)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:136)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:165)\n\tat \norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension\n(ConfigurationElement.java:96)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.loaderGetRunnable\n(InternalPlatform.java:469)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.getRunnable\n(InternalBootLoader.java:448)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:773)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:319)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:196)\n\tat org.eclipse.core.launcher.Main.run(Main.java:555)\n\tat org.eclipse.core.launcher.UIMain.main(UIMain.java:52)",
    "Was there any more information in the log file?  What was happening when the \ncrash occurred?\n\nThe restore code is resilient to physical corruption of the .snap file (such as \na failure while writing the snapshot or mangling of the file).  In this case, \nthe snapshot that was in the file seems to be physically intact but semantically \nincorrect.  This caused a failure after the snapshot restore had finished, which \nmakes it difficult to figure out how to recover.\n\nI will try to come up with a reproducible case...",
    "Unable to re-produce. Re-investigate post 2.0.\n\nIf you see this again and have the workspace please attach.\nHaving the corrupt workspace in these cases is essential to tracking down the \nproblem.\nThanks.",
    "Reopening for investigation/closure.",
    "Currently work is being done on a tool which will help re-construct a \nworkspace.",
    "Jeem experience this again today.  In his case the missing resource was the\n.project file for org.eclipse.ui.win32.  Here\u0027s what happened:\n\n- Had an old workspace\n- Upgraded to new build, and tried to import new binary plugin projects on top\nof old ones.\n- Import failed because org.eclipse.ui.win32 could not be deleted (see bug 16114).\n- Tried to delete all projects in the workspace, but four of them could not be\ndeleted (all win32 fragments).  These projects were left in a broken state -\ntheir .project files had been deleted but the project deletion had failed.\n- Tried to delete the projects in the file system, but it still failed to delete\n- Shutdown Eclipse normally\n- (may have deleted the four projects in the file system while the workspace was\nclosed)\n- Restarted without any problems\n- Deleted the four remaining projects from the workspace\n- Import all plugins as binary plugin projects\n- Import resources plugins as source on top (using PDE import, not CVS)\n- Had an unrelated GP\n- startup failed after the GP with same stach trace as Erich\u0027s case\n",
    "After Jeem\u0027s description of events I was able to come up with a reproducible case!\n\n1) In a new workspace, create a simple project\n2) Delete the .project file\n3) Shutdown cleanly\n4) Restart\n5) Modify the .project file in some way (add a project reference, for example)\n6) Wait for a snapshot\n7) Crash the workbench\n8) It will fail to restart\n\nOn step 3, we recognice the .project file is missing, and we write it silently\nto the file system\n\nOn step 4, we create a tree node for the .project file, and it is greased into\nthe SAME TREE that was restored during startup.  This is the error.  This is in\nFileSystemResourceManager.read(IProject).\n\nOn step 6, we compute the delta for the snapshot, and record it as a CHANGED\n.project node (because we have greased in the node that didn\u0027t exist on disk).\n\nOn step 8, we read the real tree (which did not have a node for .project), and\nthen apply the delta which indicates a CHANGED .project.  This is an illegal\ntree state: a delta that records a change against a node that did not exist in\nthe parent.\n\nI will apply a fix when I return (will be away for a week).",
    "*** Bug 12483 has been marked as a duplicate of this bug. ***",
    "Finally fixed!  Of course, after nearly eight months of investigation on and\noff, it was a three line fix ;)  The tree is now made immutable immediately\nafter reading snapshots, so that subsequent delta calculations are guaranteed to\nbe made against the identical tree that was read from disk.  Any sneaky changes\nlater in the restore code will be recorded in the first snapshot delta correctly.\n\nAdded new session test (TestBug12575).",
    "*** Bug 31424 has been marked as a duplicate of this bug. ***",
    "*** Bug 34197 has been marked as a duplicate of this bug. ***",
    "*** Bug 62125 has been marked as a duplicate of this bug. ***",
    "*** Bug 45321 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2002-04-01T23:49:08+02:00",
    "2002-04-02T18:04:51+02:00",
    "2002-05-23T18:04:11+02:00",
    "2002-09-10T18:39:55+02:00",
    "2002-09-27T17:48:51+02:00",
    "2002-11-01T17:19:47+01:00",
    "2002-11-01T21:36:51+01:00",
    "2002-12-13T14:57:40+01:00",
    "2002-12-13T20:17:01+01:00",
    "2003-02-10T19:10:20+01:00",
    "2003-03-11T21:38:09+01:00",
    "2004-05-18T18:18:31+02:00",
    "2004-05-18T18:33:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.dtree.ObjectNotFoundException",
      "message": "Tree  element /junit/.project not found.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.dtree.AbstractDataTree.handleNotFound",
          "source": "AbstractDataTree.java:238"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.getData",
          "source": "DeltaDataTree.java:606"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta",
          "source": "DataDeltaNode.java:49"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta",
          "source": "DataDeltaNode.java:46"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta",
          "source": "DataDeltaNode.java:46"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.asBackwardDelta",
          "source": "DeltaDataTree.java:91"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.reroot",
          "source": "DeltaDataTree.java:813"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.reroot",
          "source": "DeltaDataTree.java:812"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.reroot",
          "source": "DeltaDataTree.java:812"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.reroot",
          "source": "DeltaDataTree.java:812"
        },
        {
          "method": "org.eclipse.core.internal.dtree.DeltaDataTree.reroot",
          "source": "DeltaDataTree.java:788"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTree.immutable",
          "source": "ElementTree.java:687"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.restore",
          "source": "SaveManager.java:450"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.startup",
          "source": "SaveManager.java:887"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.startup",
          "source": "Workspace.java:1460"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.open",
          "source": "Workspace.java:1258"
        },
        {
          "method": "org.eclipse.core.resources.ResourcesPlugin.startup",
          "source": "ResourcesPlugin.java:155"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor$1.run",
          "source": "PluginDescriptor.java:701"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:817"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:713"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:184"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:52"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf",
          "source": "PluginClassLoader.java:130"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:771"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.access$0",
          "source": "DelegatingURLClassLoader.java:765"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader$DelegateLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:65"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassPrerequisites",
          "source": "DelegatingURLClassLoader.java:425"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:779"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:751"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:257"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:254"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:136"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:165"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.loaderGetRunnable",
          "source": "InternalPlatform.java:469"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.getRunnable",
          "source": "InternalBootLoader.java:448"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:773"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:319"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:196"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:555"
        },
        {
          "method": "org.eclipse.core.launcher.UIMain.main",
          "source": "UIMain.java:52"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "12575",
      "date": "2002-04-01T23:49:08+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "critical"
    },
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Problems encountered starting up plug- in: org.eclipse.core.resources.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:719"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:184"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:52"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf",
          "source": "PluginClassLoader.java:130"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:771"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.access$0",
          "source": "DelegatingURLClassLoader.java:765"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader$DelegateLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:65"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassPrerequisites",
          "source": "DelegatingURLClassLoader.java:425"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:779"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:751"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:257"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:254"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:136"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:165"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.loaderGetRunnable",
          "source": "InternalPlatform.java:469"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.getRunnable",
          "source": "InternalBootLoader.java:448"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:773"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:319"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:196"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:555"
        },
        {
          "method": "org.eclipse.core.launcher.UIMain.main",
          "source": "UIMain.java:52"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "12575",
      "date": "2002-04-01T23:49:08+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "critical"
    }
  ],
  "groupId": "12575",
  "bugId": "12575",
  "date": "2002-04-01T23:49:08+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "critical"
}