{
  "comments": [
    "in recents WTP I builds (including today\u0027s 22-04 M4 candidate) I always keep\ngetting NPE errors during a build which includes web modules and during a server\nstartup.\n\nThis happens on a workspace with webmodules and utility modules, working in\nprevious wtp m3 build and migrated to the new build (fixed .wtpmodules)\n\nI know the bug report is pretty useless without more information but at the\nmoment everything I have is the following in the stacktrace:\n\nerror 1 - during build\n\n!ENTRY org.eclipse.core.resources 4 2 2005-04-22 17:16:07.976\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.resources\".\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.jst.j2ee.internal.web.operations.LibDirBuilder.visit(LibDirBuilder.java:331)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:68)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)\n\tat\norg.eclipse.jst.j2ee.internal.web.operations.LibDirBuilder.build(LibDirBuilder.java:67)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:581)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1021)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:160)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:198)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:227)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1021)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:230)\n\tat\norg.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:249)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:278)\n\tat org.eclipse.core.internal.resources.Workspace.build(Workspace.java:211)\n\tat org.eclipse.ui.actions.GlobalBuildAction$1.run(GlobalBuildAction.java:183)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n\n\n\nerror 2 - at server startup (a dialog box is displayed with: \"an internal error\nhas occurred\")\n\n!ENTRY org.eclipse.core.runtime 4 2 2005-04-22 17:25:52.456\n!MESSAGE An internal error occurred during: \"Publishing to Tomcat\nfaber-magnolia...\".\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.wst.server.core.internal.ServerPublishInfo.addRemovedModules(ServerPublishInfo.java:115)\n\tat org.eclipse.wst.server.core.internal.Server.doPublish(Server.java:756)\n\tat org.eclipse.wst.server.core.internal.Server.publish(Server.java:726)\n\tat\norg.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:65)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n\n\nWhat else can I post to help you reproduce the error? the whole workspace is\npretty big, do you think .wtpmodules files can be helpful? Is the stacktrace at\nleast enough in order to add some null-checking code and a better error message?",
    "ServerPublishInfo has been fixed for M4 via another bug. Moving to J2EE team to\nhandle the LibDirBuilder problem.",
    "(In reply to comment #1)\n\u003e ServerPublishInfo has been fixed for M4 via another bug. Moving to J2EE team to\n\u003e handle the LibDirBuilder problem.\n\nHi Tim, I am still getting the ServerPublishInfo exception in current M4\ncandidate build (I20050422), can you idicate the bug # and the revision in which\nit has been fixed?",
    "Hi,\n\nI accidentally mistagged the file, so it went in as part of bug 92401. The\nI20050422 build was already done building by the time I made the comment below;\nthe fix will be in the next I/M build which may not be for a couple days since\nthey have shut down the builds for a bit to get some testing on I20050422.",
    "After more investigations I found that the NPE in LirDirBuilder occurs if the\nproject is marked as a web project but .classpath is missing the\norg.eclipse.jst.j2ee.internal.web.container entry\n\nThe NPE is thrown in LibDirBuilder, line 331:\n\nIPath lib_path \u003d lib_path \u003d\nproject.getFullPath().append(WebPropertiesUtil.getWebLibFolder(project).getProjectRelativePath());\n\n\nWebPropertiesUtil.getWebLibFolder(project) returns null in this situation, so\nthe NPE is thrown. I recommend handling this situation by replacing the\nstatement above with:\n\nIFolder weblibfolder \u003d WebPropertiesUtil.getWebLibFolder(project);\nif (weblibfolder \u003d\u003d null) {\n  // can happen if the project is a web module but .classpath \n  // doesn\u0027t contain the org.eclipse.jst.j2ee.internal.web.container entry\n  // @todo log the error about the missing entry in .classpath or fix it?\n  return true;\n}\nIPath lib_path \u003d lib_path \u003d\nproject.getFullPath().append(weblibfolder.getProjectRelativePath());\n\n\n\u003d\u003d\u003d\n\nAfter this patch projects without the web container entry can be build without\nerrors.\n\n",
    "the bug is still present in the latest (28-04) M4 candidate.\nWhy did you mark this to be resolved for M5? It is a simple null check which\nIMHO should anyway be added and it can\u0027t cause any problem...\n\nany way to get this in the M4 respin (if there will be one?)",
    "Closing this as per our discussion.  THe LibCopyBuilder is no longer added to\nweb projects and therefore should be removed from existing pre-m4 projects.",
    "Changed Version field given new release numbering.\n",
    "Closing - Already verified"
  ],
  "commentCreationDates": [
    "2005-04-22T17:33:00+02:00",
    "2005-04-22T22:02:00+02:00",
    "2005-04-23T09:28:23+02:00",
    "2005-04-23T19:40:15+02:00",
    "2005-04-24T20:50:18+02:00",
    "2005-04-29T10:47:36+02:00",
    "2005-04-29T16:48:27+02:00",
    "2005-06-15T07:32:37+02:00",
    "2005-07-26T19:58:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.LibDirBuilder.visit",
          "source": "LibDirBuilder.java:331"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:68"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:49"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.LibDirBuilder.build",
          "source": "LibDirBuilder.java:67"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:581"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1021"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:160"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:198"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:227"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1021"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:230"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:249"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:278"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.build",
          "source": "Workspace.java:211"
        },
        {
          "method": "org.eclipse.ui.actions.GlobalBuildAction$1.run",
          "source": "GlobalBuildAction.java:183"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "92397",
      "date": "2005-04-22T17:33:00+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.wst.server.core.internal.ServerPublishInfo.addRemovedModules",
          "source": "ServerPublishInfo.java:115"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:756"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:726"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:65"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "92397",
      "date": "2005-04-22T17:33:00+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    }
  ],
  "groupId": "92397",
  "bugId": "92397",
  "date": "2005-04-22T17:33:00+02:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "major"
}