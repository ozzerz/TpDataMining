{
  "comments": [
    "Using Eclipse 3.2 RC1\n\nSince I have the need to export projects as deployable plugins I used PDE\u0027s handy capability to create an Ant script that allows me to easily re-export my plugins at the push of a button.\n\nSo I have 3 Ant scripts, all of which work great on their own.  But, I decided to write a master Ant script that simply calls each of the Ant scripts generated by the PDE\u0027s export wizard.  Take a look:\n\n  \u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n  \u003cproject name\u003d\"build\" default\u003d\"plugin_export\"\u003e\n    \u003ctarget name\u003d\"plugin_export\"\u003e\n      \u003cant antfile\u003d\"cfa.xml\"/\u003e\n      \u003cant antfile\u003d\"mbaf.xml\"/\u003e\n      \u003cant antfile\u003d\"oaf.xml\"/\u003e\n      \u003cant antfile\u003d\"oaf-demo.xml\"/\u003e\n    \u003c/target\u003e\n  \u003c/project\u003e\n\n\nAnd here\u0027s an example of one of the Ant scripts generated by the PDE\u0027s export wizard, but reformatted to satisfy Bugzilla\u0027s narrow margins:\n\n  \u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n  \u003cproject name\u003d\"build\" default\u003d\"plugin_export\"\u003e\n    \u003ctarget name\u003d\"plugin_export\"\u003e\n      \u003cpde.exportPlugins\n        plugins\u003d\"com.ibm.esc.oaf.base\"\n        destination\u003d\"C:\\export\\eclipse32-rt-bundles\"\n        filename\u003d\"oaf.zip\"\n        exportType\u003d\"zip\"\n        useJARFormat\u003d\"true\"\n        exportSource\u003d\"false\"/\u003e\n    \u003c/target\u003e\n  \u003c/project\u003e\n\nNothing too surprising here.  But, when I run my master Ant script it complete in 230 milliseconds, leading me to think that the PDE task \u003cpde.exportPlugins\u003e is executing asynchronously.  A little later I get an error dialog stating that multiple errors have occurred.  One of the errors is a ConcurrentModificationException and the others are NullPointerExceptions.  Here\u0027s what I found in the .log file:\n\n!ENTRY org.eclipse.core.jobs 4 2 2006-04-27 21:34:07.063\n!MESSAGE An internal error occurred during: \"PDE Export\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.getUnpackClause(AssembleConfigScriptGenerator.java:405)\n\tat org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.getFinalShape(AssembleConfigScriptGenerator.java:410)\n\tat org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.generatePostProcessingSteps(AssembleConfigScriptGenerator.java:330)\n\tat org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.generate(AssembleConfigScriptGenerator.java:133)\n\tat org.eclipse.pde.internal.build.packager.PackageScriptGenerator.basicGenerateAssembleConfigFileTargetCall(PackageScriptGenerator.java:54)\n\tat org.eclipse.pde.internal.build.AssembleScriptGenerator.generateMainTarget(AssembleScriptGenerator.java:76)\n\tat org.eclipse.pde.internal.build.AssembleScriptGenerator.generate(AssembleScriptGenerator.java:44)\n\tat org.eclipse.pde.internal.build.BuildScriptGenerator.generatePackageScripts(BuildScriptGenerator.java:292)\n\tat org.eclipse.pde.internal.build.BuildScriptGenerator.generateFeatures(BuildScriptGenerator.java:190)\n\tat org.eclipse.pde.internal.build.BuildScriptGenerator.generate(BuildScriptGenerator.java:85)\n\tat org.eclipse.pde.internal.core.exports.FeatureExportOperation.doExport(FeatureExportOperation.java:192)\n\tat org.eclipse.pde.internal.core.exports.FeatureBasedExportOperation.run(FeatureBasedExportOperation.java:46)\n\tat org.eclipse.pde.internal.core.ant.BaseExportTask$1.run(BaseExportTask.java:48)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n\nUnfortunately I cleared my .log before I could get the stack trace for the ConcurrentModificationException, but I shall update this bug report if I see it again.  It seems that the timing has to be just right for this one to be thrown.\n\nThe bottom line seems to be that since \u003cpde.exportPlugins\u003e is asynchronous, returning before it is complete, it is not possible to write an Ant script that calls multiple \u003cpde.exportPlugins\u003e without exceptions being thrown.",
    "\n\n*** This bug has been marked as a duplicate of 58413 ***"
  ],
  "commentCreationDates": [
    "2006-04-28T03:39:17+02:00",
    "2006-04-28T03:53:33+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.getUnpackClause",
          "source": "AssembleConfigScriptGenerator.java:405"
        },
        {
          "method": "org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.getFinalShape",
          "source": "AssembleConfigScriptGenerator.java:410"
        },
        {
          "method": "org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.generatePostProcessingSteps",
          "source": "AssembleConfigScriptGenerator.java:330"
        },
        {
          "method": "org.eclipse.pde.internal.build.AssembleConfigScriptGenerator.generate",
          "source": "AssembleConfigScriptGenerator.java:133"
        },
        {
          "method": "org.eclipse.pde.internal.build.packager.PackageScriptGenerator.basicGenerateAssembleConfigFileTargetCall",
          "source": "PackageScriptGenerator.java:54"
        },
        {
          "method": "org.eclipse.pde.internal.build.AssembleScriptGenerator.generateMainTarget",
          "source": "AssembleScriptGenerator.java:76"
        },
        {
          "method": "org.eclipse.pde.internal.build.AssembleScriptGenerator.generate",
          "source": "AssembleScriptGenerator.java:44"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generatePackageScripts",
          "source": "BuildScriptGenerator.java:292"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generateFeatures",
          "source": "BuildScriptGenerator.java:190"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generate",
          "source": "BuildScriptGenerator.java:85"
        },
        {
          "method": "org.eclipse.pde.internal.core.exports.FeatureExportOperation.doExport",
          "source": "FeatureExportOperation.java:192"
        },
        {
          "method": "org.eclipse.pde.internal.core.exports.FeatureBasedExportOperation.run",
          "source": "FeatureBasedExportOperation.java:46"
        },
        {
          "method": "org.eclipse.pde.internal.core.ant.BaseExportTask$1.run",
          "source": "BaseExportTask.java:48"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "139108",
      "duplicateId": "58413",
      "date": "2006-04-28T03:39:17+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "58413",
  "bugId": "139108",
  "duplicateId": "58413",
  "date": "2006-04-28T03:39:17+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}