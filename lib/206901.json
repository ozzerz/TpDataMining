{
  "comments": [
    "I have some code that calls SystemRegistry.getLocalHost when my plugin is loaded. When eclipse starts up with this code, I get the following exception in the log:\n\njava.lang.ArrayStoreException\nat java.lang.System.arraycopy(Native Method)\nat java.util.ArrayList.toArray(ArrayList.java:330)\nat org.eclipse.rse.internal.core.filters.SystemFilter.getPersistableChildren(SystemFilter.java:1391)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.cleanTree(RSEPersistenceManager.java:447)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.cleanTree(RSEPersistenceManager.java:450)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.cleanTree(RSEPersistenceManager.java:450)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.load(RSEPersistenceManager.java:399)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.loadProfiles(RSEPersistenceManager.java:374)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.restoreProfiles(RSEPersistenceManager.java:233)\nat org.eclipse.rse.internal.persistence.RSEPersistenceManager.restoreProfiles(RSEPersistenceManager.java:219)\nat org.eclipse.rse.internal.core.model.SystemProfileManager.getDefault(SystemProfileManager.java:58)\nat org.eclipse.rse.ui.internal.model.SystemRegistry.getSystemProfileManager(SystemRegistry.java:464)\nat org.eclipse.rse.ui.internal.model.SystemRegistry.getHostPools(SystemRegistry.java:1357)\nat org.eclipse.rse.ui.internal.model.SystemRegistry.getHosts(SystemRegistry.java:1398)\nat org.eclipse.rse.ui.internal.model.SystemRegistry.getHostsBySystemType(SystemRegistry.java:1492)\nat org.eclipse.rse.ui.internal.model.SystemRegistry.getLocalHost(SystemRegistry.java:1388)",
    "I believe this is happening because the profiles have not yet finished loading. See the reply to Bug 202040 and see if that helps.",
    "I took a look at the RSE code. In getPersistableChildren() it does:\n\nif (filterStringVector !\u003d null) {\n    children.addAll(filterStringVector);\n}\nchildren.addAll(Arrays.asList(getPropertySets()));\nIRSEPersistableContainer[] result \u003d new IRSEPersistableContainer[children.size()];\nchildren.toArray(result);\nreturn result;\n\nThe \"children\" list is filled with the filterStringVector elements. These elements are strings. However, the children list is expected to contain elements of type IRSEPersistableContainer. I think that is the source of the problem. Please let me know if I am missing something.",
    "I was wondering if there is any progress on this problem?",
    "This is probably the direct cause of the exception. I\u0027m having a hard time writing a test case to confirm a fix. Can you give some hints as to what sort of filter is causing this problem?",
    "This bug was probably also caused by the SystemHostPool not being thread-safe. My fix in bug 206742 might thus also fix this issue -- the traceback in that bug was also rooted on SystemRegistry.getLocalHost().\n\nWas this problem ever reproducable?\nIs it still reproducable with the latest TM I-build?"
  ],
  "commentCreationDates": [
    "2007-10-19T16:55:51+02:00",
    "2007-10-20T14:21:19+02:00",
    "2007-10-23T02:04:52+02:00",
    "2007-11-11T01:30:43+01:00",
    "2007-12-13T21:51:21+01:00",
    "2007-12-14T18:42:59+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayStoreException",
      "elements": [
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "java.util.ArrayList.toArray",
          "source": "ArrayList.java:330"
        },
        {
          "method": "org.eclipse.rse.internal.core.filters.SystemFilter.getPersistableChildren",
          "source": "SystemFilter.java:1391"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.cleanTree",
          "source": "RSEPersistenceManager.java:447"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.cleanTree",
          "source": "RSEPersistenceManager.java:450"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.cleanTree",
          "source": "RSEPersistenceManager.java:450"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.load",
          "source": "RSEPersistenceManager.java:399"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.loadProfiles",
          "source": "RSEPersistenceManager.java:374"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.restoreProfiles",
          "source": "RSEPersistenceManager.java:233"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.restoreProfiles",
          "source": "RSEPersistenceManager.java:219"
        },
        {
          "method": "org.eclipse.rse.internal.core.model.SystemProfileManager.getDefault",
          "source": "SystemProfileManager.java:58"
        },
        {
          "method": "org.eclipse.rse.ui.internal.model.SystemRegistry.getSystemProfileManager",
          "source": "SystemRegistry.java:464"
        },
        {
          "method": "org.eclipse.rse.ui.internal.model.SystemRegistry.getHostPools",
          "source": "SystemRegistry.java:1357"
        },
        {
          "method": "org.eclipse.rse.ui.internal.model.SystemRegistry.getHosts",
          "source": "SystemRegistry.java:1398"
        },
        {
          "method": "org.eclipse.rse.ui.internal.model.SystemRegistry.getHostsBySystemType",
          "source": "SystemRegistry.java:1492"
        },
        {
          "method": "org.eclipse.rse.ui.internal.model.SystemRegistry.getLocalHost",
          "source": "SystemRegistry.java:1388"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "206901",
      "date": "2007-10-19T16:55:51+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "206901",
  "bugId": "206901",
  "date": "2007-10-19T16:55:51+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}