{
  "comments": [
    "This problem occurs using the F1 driver.\n\nWhen calling actionsBars.updateActionBars() from within the init method of an \nActionBarContributor we\u0027re running into code that throws an exception (and \nhence causes an dialog message).  It seems like a sime array length test could \nbe added to avoid this scenario.\n\njava.lang.ArrayIndexOutOfBoundsException: 0\n\tat org.eclipse.ui.internal.CoolBarManager.createCoolItem\n(CoolBarManager.java:133)\n\tat org.eclipse.ui.internal.CoolBarManager.update\n(CoolBarManager.java:657)\n\tat org.eclipse.ui.internal.WorkbenchWindow.updateActionBars\n(WorkbenchWindow.java:1343)\n\tat org.eclipse.ui.internal.WWinActionBars.updateActionBars\n(WWinActionBars.java:82)\n\tat org.eclipse.ui.internal.SubActionBars.updateActionBars\n(SubActionBars.java:261)",
    "Unable to recreate.  Craig, I assume this is occurring when attempting to set \nthe minimumSize for the coolitem, which access the first toolitem of the \ntoolbar.  Is that correct?  If so, I can bypass creating the coolitem if its \nassociated toobar is empty.",
    "Lynnem\n\nThanks for your response... the problem is that I\u0027m not dealing with cool items \ndirectly.  I\u0027m creating actions and adding them to an IActionBars object within \nthe init() method of an IEditorActionBarContributor.  As subsequent call to \nactionBars.updateActionBars() ends up invoking the cool item code and triggers \nthis problem.\n\nI would think this problem could be fixed with a simple array bounds test, \nbefore referencing the first element of the array.\n\nBTW... In previous drivers we have needed to call actionBars.updateActionBars() \nin order to refresh the menus.  Now it seems that calling this method results \nin the exception described below.  By removing the call to this method we are \nable to avoid this problem and in the F1 driver it seems that the menus appear \nto be correct.  Is the updateActionBars() neccessary?",
    "In an IEditorActionBarContributor, you should not have to call updateActionBars\n() yourself.  The workbench does this for you after calling init.\nHowever, it should not generate an exception if you do this.\n",
    "Here\u0027s another code path that illustrates this problem. We can\u0027t work around \nthis one by removing calls to updateActionBars().\n\njava.lang.ArrayIndexOutOfBoundsException: 0\n\tat org.eclipse.ui.internal.CoolBarManager.createCoolItem\n(CoolBarManager.java:133)\n\tat org.eclipse.ui.internal.CoolBarManager.update\n(CoolBarManager.java:657)\n\tat org.eclipse.ui.internal.WorkbenchWindow.updateActionBars\n(WorkbenchWindow.java:1343)\n\tat org.eclipse.ui.internal.WorkbenchPage.updateActionBars\n(WorkbenchPage.java:2319)\n\tat org.eclipse.ui.internal.WorkbenchPage$ActionSwitcher.updateActivePart\n(WorkbenchPage.java:152)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart\n(WorkbenchPage.java:2064)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate\n(WorkbenchPage.java:364)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1718)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1614)\n\tat org.eclipse.ui.actions.OpenFileAction.openFile\n(OpenFileAction.java:91)\n\tat org.eclipse.ui.actions.OpenSystemEditorAction.run\n(OpenSystemEditorAction.java:91)\n\tat org.eclipse.ui.views.navigator.OpenActionGroup.runDefaultAction\n(OpenActionGroup.java:110)\n\tat org.eclipse.ui.views.navigator.MainActionGroup.runDefaultAction\n(MainActionGroup.java:177)\n\tat org.eclipse.ui.views.navigator.ResourceNavigator.handleOpen\n(ResourceNavigator.java:531)\n\tat org.eclipse.ui.views.navigator.ResourceNavigator$6.open\n(ResourceNavigator.java:303)\n\tat org.eclipse.jface.viewers.StructuredViewer.fireOpen\n(StructuredViewer.java:320)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleOpen\n(StructuredViewer.java:494)\n\tat org.eclipse.jface.viewers.StructuredViewer$3.handleOpen\n(StructuredViewer.java:581)\n\tat org.eclipse.jface.util.OpenStrategy.fireOpenEvent\n(OpenStrategy.java:198)\n\tat org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:195)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent\n(OpenStrategy.java:222)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:825)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1068)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:739)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:200)\n\tat org.eclipse.core.launcher.Main.run(Main.java:643)\n\tat org.eclipse.core.launcher.Main.main(Main.java:476)",
    "Put in check for empty toolbar.  If toolbar has no items, CoolItem will not be \ncreated.  It doesn\u0027t make sense to create the CoolItem until the toolbar has \nitems.",
    "Can you please email me this change?  That way I can make a change to my local \ncopy to see if some other strangene behaviour I\u0027m experiencing is solved by \nthis fix... or is a separate problem. ",
    "Created an attachment (id\u003d1098)\njar file with code change\n",
    "Attached jar file with code change.  To install, create a bin directory under \neclipse/plugins/org.eclipse.ui.  Unzip the jar file into the bin directory.  \nRun eclipse with the -dev bin option.",
    "I\u0027ve confirmed that this fix seems to stop the problems with exceptions.  I\u0027m \nstill seeing strange toolbar button layout behaviour (I was hoping these \nproblems were somehow related). I\u0027ve opened Bug 18248  to track this layout \nproblem.",
    "*** Bug 19617 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2002-05-28T16:47:16+02:00",
    "2002-05-28T20:40:16+02:00",
    "2002-05-28T21:23:40+02:00",
    "2002-05-28T21:49:33+02:00",
    "2002-05-28T23:03:19+02:00",
    "2002-05-29T04:06:23+02:00",
    "2002-05-29T06:01:29+02:00",
    "2002-05-29T15:10:07+02:00",
    "2002-05-29T15:11:48+02:00",
    "2002-05-29T23:44:30+02:00",
    "2002-06-07T19:09:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.CoolBarManager.createCoolItem",
          "source": "CoolBarManager.java:133"
        },
        {
          "method": "org.eclipse.ui.internal.CoolBarManager.update",
          "source": "CoolBarManager.java:657"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.updateActionBars",
          "source": "WorkbenchWindow.java:1343"
        },
        {
          "method": "org.eclipse.ui.internal.WWinActionBars.updateActionBars",
          "source": "WWinActionBars.java:82"
        },
        {
          "method": "org.eclipse.ui.internal.SubActionBars.updateActionBars",
          "source": "SubActionBars.java:261"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "18050",
      "date": "2002-05-28T16:47:16+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.CoolBarManager.createCoolItem",
          "source": "CoolBarManager.java:133"
        },
        {
          "method": "org.eclipse.ui.internal.CoolBarManager.update",
          "source": "CoolBarManager.java:657"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.updateActionBars",
          "source": "WorkbenchWindow.java:1343"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.updateActionBars",
          "source": "WorkbenchPage.java:2319"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$ActionSwitcher.updateActivePart",
          "source": "WorkbenchPage.java:152"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:2064"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:364"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1718"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1614"
        },
        {
          "method": "org.eclipse.ui.actions.OpenFileAction.openFile",
          "source": "OpenFileAction.java:91"
        },
        {
          "method": "org.eclipse.ui.actions.OpenSystemEditorAction.run",
          "source": "OpenSystemEditorAction.java:91"
        },
        {
          "method": "org.eclipse.ui.views.navigator.OpenActionGroup.runDefaultAction",
          "source": "OpenActionGroup.java:110"
        },
        {
          "method": "org.eclipse.ui.views.navigator.MainActionGroup.runDefaultAction",
          "source": "MainActionGroup.java:177"
        },
        {
          "method": "org.eclipse.ui.views.navigator.ResourceNavigator.handleOpen",
          "source": "ResourceNavigator.java:531"
        },
        {
          "method": "org.eclipse.ui.views.navigator.ResourceNavigator$6.open",
          "source": "ResourceNavigator.java:303"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.fireOpen",
          "source": "StructuredViewer.java:320"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleOpen",
          "source": "StructuredViewer.java:494"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$3.handleOpen",
          "source": "StructuredViewer.java:581"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireOpenEvent",
          "source": "OpenStrategy.java:198"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$2",
          "source": "OpenStrategy.java:195"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:222"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:825"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1068"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:739"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:200"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:643"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:476"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "18050",
      "date": "2002-05-28T23:03:19+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "18050",
  "bugId": "18050",
  "date": "2002-05-28T16:47:16+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "critical"
}