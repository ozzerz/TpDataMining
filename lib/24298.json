{
  "comments": [
    "We\u0027re trying to setup an extssh connection to a Solaris box running sshd\n1.5.1.2.27 without \nsuccess. When using the latest stable release\n(containing the SSH_MSG_DEBUG fixes) we get a \nNegativeArraySizeException\n(see stacktrace)\n\nAny hint is welcome.\n\n    Regards\n    \nHendrik\n\n\nThese are the values of the variables in Misc.readMpInt(...)\n\n  is\u003d \norg.eclipse.team.internal.ccvs.ssh.ServerPacket$PacketInputStream\n(id\u003d105)\n  a\u003d -\n127\n  b\u003d -124\n  bits\u003d -32636\n  bytes\u003d -4078\n\nThe method was called from\n        byte[] \nhost_key_public_exponent \u003d Misc.readMpInt(pis);\n\n\n\nTop of stack:\n\nThread [main] \n(Suspended (exception \njava.lang.NegativeArraySizeException))\norg.eclipse.team.internal.ccvs.ssh.Misc.readMpInt(java.io.InputStream)\nline: \n314\norg.eclipse.team.internal.ccvs.ssh.Client.receive_SSH_SMSG_PUBLIC_KEY(org.eclipse.team.internal.ccvs.ssh.ServerPacket)\nline: \n550\norg.eclipse.team.internal.ccvs.ssh.Client.login() line: \n481\norg.eclipse.team.internal.ccvs.ssh.Client.connect(org.eclipse.core.runtime.IProgressMonitor)\nline: \n399314\n\n\nThis is what putty has to say about the machine:\n\n2002-10-01 15:35:28Looking up \nhost xxxxxxxxxxxx\n2002-10-01 15:35:28Connecting to xxxxxxxxx port 22\n2002-10-01 \n15:35:29Server version: SSH-1.5-1.2.27\n2002-10-01 15:35:29We claim version: SSH-1.5-PuTTY-\nRelease-0.52\n2002-10-01 15:35:29Using SSH protocol version 1\n2002-10-01 15:35:29Received \npublic keys\n2002-10-01 15:35:29Host key fingerprint is:\n2002-10-01 15:35:29      \n1024\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n2002-10-01 15:35:30Encrypted session key\n2002-10-\n01 15:35:30AES not supported in SSH1, skipping\n2002-10-01 15:35:30Using Blowfish \nencryption\n2002-10-01 15:35:30Trying to enable encryption...\n2002-10-01 \n15:35:30Initialised Blowfish encryption\n2002-10-01 15:35:31Installing CRC compensation \nattack detector\n2002-10-01 15:35:31Successfully started encryption\n2002-10-01 \n15:35:34Sent username \"xxxxx\"\n2002-10-01 15:35:37Sending password with camouflage \npackets\n2002-10-01 15:35:37Sent password\n2002-10-01 15:35:37Authentication \nsuccessful\n2002-10-01 15:35:37Allocated pty\n2002-10-01 15:35:37Started session",
    "It is strange that this problem occurs for this configuration. There haven\u0027t \nbeen any other similar problems reported for EXTSSH. Perhaps the problem is \nrelated to the debug messages patch that was applied to the ssh plugin.\n\nA workaround is to use the ext connection method and an external ssh tool.",
    "Without the debug message patch we get a different error in the same method. The problem is, that \nthe number of byte the method wants to read is too big. I do not have the environment available, \ntherefore I don\u0027t know the exact error message. If there is anything I can do to further debug the \nproblem, let me know.\n\nRegards\nHendrik",
    "This could be due to the size of the server\u0027s public key. I seem to recall an \nold bug that mentioned a problem with keys bigger than 768 bits. How big is \nyour server\u0027s key?",
    "I believe that I have found and fixed the bug. The fix will be in tomorrow\u0027s \n(Oct 8) integration build. Would you mind testing that build to see if the \nproblem is indeed fixed?",
    "I will try it today and let you know. The server key is  768 Bits.\n\n",
    "I couldn\u0027t download N20021008 because of some build problems. I took whatever is available from \nhttp://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.team.cvs.ssh/src/org/eclipse/team/internal/ccvs/ssh/?diff_format\u003dH \nand rebuilt the jar. I looks like we\u0027re getting further. Please see the stacktrace below. \n\n\nThanks for your help\nHendrik\n\nLine 456 reads\n\n\t     Misc.random(block, offset, \nblock.length - data.length - 3, false);\n\t\t      offset +\u003d block.length - data.length - 3;\n\u003d\u003d\u003eLine \n456\t\tblock[offset++] \u003d 0;\n\njava.lang.ArrayIndexOutOfBoundsException\n     \nat\norg.eclipse.team.internal.ccvs.ssh.Misc.encryptRSAPkcs1(Misc.java:456)\n     \nat\norg.eclipse.team.internal.ccvs.ssh.Client.send_SSH_CMSG_SESSION_KEY(Client.java:761)\n \n    \nat\norg.eclipse.team.internal.ccvs.ssh.Client.receive_SSH_SMSG_PUBLIC_KEY(Client.java:617)\n \n    at org.eclipse.team.internal.ccvs.ssh.Client.login(Client.java:533)\n     at \norg.eclipse.team.internal.ccvs.ssh.Client.connect(Client.java:449)\n     \nat\norg.eclipse.team.internal.ccvs.ssh.SSHServerConnection.open(SSHServerConnection.java:76)\n \n    \nat\norg.eclipse.team.internal.ccvs.core.connection.Connection.open(Connection.java:123)\n \n    \nat\norg.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.createConnection(CVSRepositoryLocation.java:139)\n \n    \nat\norg.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.openConnection(CVSRepositoryLocation.java:322)\n \n    at\norg.eclipse.team.internal.ccvs.core.client.Session.open(Session.java:294)\n     \nat\norg.eclipse.team.internal.ccvs.core.client.Session.run(Session.java:187)\n     \nat\norg.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.validateConnection(CVSRepositoryLocation.java:443)\n \n    at",
    "The problem is not the server key length. 768 is the standard length and it \nworks fine on several of our test servers. There must be some other variable in \nthe ssh configuration that is surfcing the bug. \n\nAs for the above traceback, the line number of the exception does not match up \nto the source code I have. Could you rerun the test on the latest integration \nbuild I20021008?",
    "sorry for beeing a bit late. This is the stack we got with build 200210081304\n - \nHendrik\n\njava.lang.ArrayIndexOutOfBoundsException\n     \nat\norg.eclipse.team.internal.ccvs.ssh.Misc.encryptRSAPkcs1(Misc.java:437)\n     \nat\norg.eclipse.team.internal.ccvs.ssh.Client.send_SSH_CMSG_SESSION_KEY(Client.java:655)\n \n    \nat\norg.eclipse.team.internal.ccvs.ssh.Client.receive_SSH_SMSG_PUBLIC_KEY(Client.java:569)\n \n    at org.eclipse.team.internal.ccvs.ssh.Client.login(Client.java:486)\n     at \norg.eclipse.team.internal.ccvs.ssh.Client.connect(Client.java:404)\n     \nat\norg.eclipse.team.internal.ccvs.ssh.SSHServerConnection.open(SSHServerConnection.java:76)\n \n    \nat\norg.eclipse.team.internal.ccvs.core.connection.Connection.open(Connection.java:123)\n \n    \nat\norg.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.createConnection(CVSRepositoryLocation.java:150)\n \n    \nat\norg.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.openConnection(CVSRepositoryLocation.java:333)\n \n    at\norg.eclipse.team.internal.ccvs.core.client.Session.open(Session.java:295)",
    "\n\n*** This bug has been marked as a duplicate of 21979 ***"
  ],
  "commentCreationDates": [
    "2002-10-02T08:58:53+02:00",
    "2002-10-03T13:59:26+02:00",
    "2002-10-07T13:23:30+02:00",
    "2002-10-07T14:17:31+02:00",
    "2002-10-07T15:48:01+02:00",
    "2002-10-08T09:31:34+02:00",
    "2002-10-08T14:56:55+02:00",
    "2002-10-08T20:54:04+02:00",
    "2002-10-14T10:56:04+02:00",
    "2002-11-01T17:22:24+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Misc.encryptRSAPkcs1",
          "source": "Misc.java:456"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.send_SSH_CMSG_SESSION_KEY",
          "source": "Client.java:761"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.receive_SSH_SMSG_PUBLIC_KEY",
          "source": "Client.java:617"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.login",
          "source": "Client.java:533"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.connect",
          "source": "Client.java:449"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.SSHServerConnection.open",
          "source": "SSHServerConnection.java:76"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.Connection.open",
          "source": "Connection.java:123"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.createConnection",
          "source": "CVSRepositoryLocation.java:139"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.openConnection",
          "source": "CVSRepositoryLocation.java:322"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.client.Session.open",
          "source": "Session.java:294"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.client.Session.run",
          "source": "Session.java:187"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.validateConnection",
          "source": "CVSRepositoryLocation.java:443"
        }
      ],
      "number": 0,
      "commentIndex": 6,
      "bugId": "24298",
      "duplicateId": "21979",
      "date": "2002-10-08T14:56:55+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Misc.encryptRSAPkcs1",
          "source": "Misc.java:437"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.send_SSH_CMSG_SESSION_KEY",
          "source": "Client.java:655"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.receive_SSH_SMSG_PUBLIC_KEY",
          "source": "Client.java:569"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.login",
          "source": "Client.java:486"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.Client.connect",
          "source": "Client.java:404"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ssh.SSHServerConnection.open",
          "source": "SSHServerConnection.java:76"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.Connection.open",
          "source": "Connection.java:123"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.createConnection",
          "source": "CVSRepositoryLocation.java:150"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.connection.CVSRepositoryLocation.openConnection",
          "source": "CVSRepositoryLocation.java:333"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.client.Session.open",
          "source": "Session.java:295"
        }
      ],
      "number": 1,
      "commentIndex": 8,
      "bugId": "24298",
      "duplicateId": "21979",
      "date": "2002-10-14T10:56:04+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "normal"
    }
  ],
  "groupId": "21979",
  "bugId": "24298",
  "duplicateId": "21979",
  "date": "2002-10-02T08:58:53+02:00",
  "product": "Platform",
  "component": "Team",
  "severity": "normal"
}