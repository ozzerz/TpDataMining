{
  "comments": [
    "Version: 3.2.0\nBuild id: I20060223-1656\n\nI found several of the attached exceptions in my log.  No error dialog was displayed and i do not have any steps to reproduce\n\njava.lang.ClassCastException: org.eclipse.jdt.internal.compiler.ast.TypeDeclaration cannot be cast to org.eclipse.jdt.internal.compiler.ast.Block\n    at org.eclipse.jdt.internal.compiler.parser.Parser.consumeStatementTry(Parser.java:6825)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.consumeRule(Parser.java:5410)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:8852)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.parseStatements(Parser.java:9322)\n    at org.eclipse.jdt.internal.compiler.parser.Parser$1$MethodVisitor.endVisitMethod(Parser.java:9589)\n    at org.eclipse.jdt.internal.compiler.parser.Parser$1$MethodVisitor.endVisit(Parser.java:9575)\n    at org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:216)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.recoverStatements(Parser.java:9680)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:8896)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:9165)\n    at org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.parseStatements(MethodDeclaration.java:117)\n    at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.parseMethod(TypeDeclaration.java:854)\n    at org.eclipse.jdt.internal.compiler.parser.Parser.getMethodBodies(Parser.java:8111)\n    at org.eclipse.jdt.internal.compiler.SourceElementParser.parseCompilationUnit(SourceElementParser.java:1416)\n    at org.eclipse.jdt.internal.core.CompilationUnit.buildStructure(CompilationUnit.java:132)\n    at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:229)\n    at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:503)\n    at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:975)\n    at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:131)\n    at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:71)\n    at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:720)\n    at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:779)\n    at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1102)\n    at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:97)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n    at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:82)\n    at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:145)\n    at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)\n    at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:94)\n    at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:75)\n    at org.eclipse.jdt.internal.ui.text.JavaReconciler.process(JavaReconciler.java:339)\n    at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:204)",
    "Many changes have been done in compiler since your build (post 3.2 M5).\nMay you retry with a more recent one, 3.2 RC3 and let us know if this problem still occurs?\nThanks",
    "I can reproduce the problem with build N20060510-0010 and this test case:\npublic class X {\n  void foo() {\n    #\n    try {\n      System.out.println(); \n    } catch (Exception e) {\n    }\n    class Z {}\n  }\n}\n\n\nThe problem seems to be in statements recovery",
    "+1 for 3.2RC4, since regression over 3.1 (where was no statement recovery)",
    "If fix is too involving, might be better to address in 3.2.1/3.3... and only do the minimum here to address ClassCastException...",
    "Another test case:\npublic class X {\n  void foo() {\n    #\n    try {\n      System.out.println(); \n    } catch (Exception e) {\n      class Z {}\n    }\n  }\n}",
    "Deferring, as early investigation is proving to be too risk for a RC4 fix.",
    "*** Bug 145459 has been marked as a duplicate of this bug. ***",
    "This PR was tentatively tagged for 3.2.1, but the problem is tricky and more general than this very testcase, and a real fix should be investigated during 3.3.\n\nPossibly, we will backport a fix to a 3.2 maintenance stream (either official or unofficial - patch).\nRemoving 3.2.1 tag for current time being.",
    "*** Bug 158029 has been marked as a duplicate of this bug. ***",
    "Created an attachment (id\u003d53736)\nProposed fix\n\n",
    "Released for 3.3 M4.\n\nTests added\n  DietRecoveryTest#test117_2()\n  DietRecoveryTest#test120() -\u003e test123()",
    "Created an attachment (id\u003d53737)\nPossible fix fo 3.2\n\n",
    "Reopen for 3.2.2 investigation.",
    "Removing 3.2.2 commitment, fix is not trivial, and released late for 3.3M4 inclusion. Need more exercizing.",
    "Verified for 3.3 M4 using build I20061214-1445.\n"
  ],
  "commentCreationDates": [
    "2006-05-10T07:28:51+02:00",
    "2006-05-10T08:49:07+02:00",
    "2006-05-10T15:21:06+02:00",
    "2006-05-10T15:37:25+02:00",
    "2006-05-10T15:43:33+02:00",
    "2006-05-11T10:37:20+02:00",
    "2006-05-11T12:30:34+02:00",
    "2006-06-06T10:46:18+02:00",
    "2006-08-30T11:05:38+02:00",
    "2006-09-21T16:49:19+02:00",
    "2006-11-13T10:43:32+01:00",
    "2006-11-13T10:47:11+01:00",
    "2006-11-13T10:48:13+01:00",
    "2006-11-13T11:47:25+01:00",
    "2007-01-09T09:48:01+01:00",
    "2007-01-09T14:30:08+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration cannot be cast to org.eclipse.jdt.internal.compiler.ast.Block",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.consumeStatementTry",
          "source": "Parser.java:6825"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.consumeRule",
          "source": "Parser.java:5410"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.parse",
          "source": "Parser.java:8852"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.parseStatements",
          "source": "Parser.java:9322"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser$1$MethodVisitor.endVisitMethod",
          "source": "Parser.java:9589"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser$1$MethodVisitor.endVisit",
          "source": "Parser.java:9575"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse",
          "source": "MethodDeclaration.java:216"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.recoverStatements",
          "source": "Parser.java:9680"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.parse",
          "source": "Parser.java:8896"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.parse",
          "source": "Parser.java:9165"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.parseStatements",
          "source": "MethodDeclaration.java:117"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.parseMethod",
          "source": "TypeDeclaration.java:854"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.getMethodBodies",
          "source": "Parser.java:8111"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.SourceElementParser.parseCompilationUnit",
          "source": "SourceElementParser.java:1416"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.buildStructure",
          "source": "CompilationUnit.java:132"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.generateInfos",
          "source": "Openable.java:229"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.openWhenClosed",
          "source": "JavaElement.java:503"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent",
          "source": "CompilationUnit.java:975"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent",
          "source": "ReconcileWorkingCopyOperation.java:131"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:71"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:779"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1102"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run",
          "source": "JavaReconcilingStrategy.java:97"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:145"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile",
          "source": "CompositeReconcilingStrategy.java:86"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile",
          "source": "JavaCompositeReconcilingStrategy.java:94"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.process",
          "source": "MonoReconciler.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaReconciler.process",
          "source": "JavaReconciler.java:339"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:204"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "140980",
      "date": "2006-05-10T07:28:51+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "140980",
  "bugId": "140980",
  "date": "2006-05-10T07:28:51+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}