{
  "comments": [
    "This is caused by a java.security.AccessControlException when initializing Tracing. I noticed this when trying to reproduce Bug 158205 \"NullPointerException when weaving with bootstrap agent\". The System properties I introduced to control tracing need to by protected by try/catch blocks. This problem makes it difficult to configure trace unless using external Java Util Logging properties. Perhaps AspectJ LTW also needs a configuration file loaded from classpath or another section or option in aop.xml.\n\n     [java] java.lang.ExceptionInInitializerError\n     [java] \tat org.aspectj.weaver.loadtime.Aj.\u003cclinit\u003e(Aj.java:31)\n     [java] \tat org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.\u003cclinit\u003e(ClassPreProcessorAgentAdapter.java:35)\n     [java] \tat org.aspectj.weaver.loadtime.Agent.\u003cclinit\u003e(Agent.java:33)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat java.lang.reflect.Method.invoke(Method.java:585)\n     [java] \tat sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:141)\n     [java] Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission org.aspectj.tracing.debug read)\n     [java] \tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:264)\n     [java] \tat java.security.AccessController.checkPermission(AccessController.java:427)\n     [java] \tat java.lang.SecurityManager.checkPermission(SecurityManager.java:532)\n     [java] FATAL ERROR in native method: processing of -javaagent failed\n     [java] \tat java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)\n     [java] \tat java.lang.System.getProperty(System.java:661)\n     [java] \tat org.aspectj.weaver.tools.TraceFactory.getBoolean(TraceFactory.java:34)\n     [java] \tat org.aspectj.weaver.tools.TraceFactory.\u003cclinit\u003e(TraceFactory.java:21)\n     [java] \t... 8 more\n     [java] Exception in thread \"main\"",
    "The AccessControlExceptions caused by System.getProperty() and Boolean.getBoolean() are the tip of the iceberg. I can\u0027t get ClassLoader.getResources() in ClassLoaderWeavingAdaptor.parseDefinitions() to return anything without granting \"permission java.io.FilePermission \"\u003c\u003cALL FILES\u003e\u003e\", \"read\";\" and I can\u0027t find any documentation on the issue. Also now we use LTWWorld there is a problem with getDeclaredMethod(). So basically LTW can\u0027t work without a security policy. There is also the question of whether we need doPrivileged() blocks. It\u0027s a lot of work.\n\n*** This bug has been marked as a duplicate of 74246 ***"
  ],
  "commentCreationDates": [
    "2006-10-05T12:29:12+02:00",
    "2006-10-18T15:49:13+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.security.AccessControlException",
      "message": "access denied (java.util.PropertyPermission org.aspectj.tracing.debug read)      [java]",
      "elements": [
        {
          "method": "java.security.AccessControlContext.checkPermission",
          "source": "AccessControlContext.java:264"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "159856",
      "duplicateId": "74246",
      "date": "2006-10-05T12:29:12+02:00",
      "product": "AspectJ",
      "component": "LTWeaving",
      "severity": "normal"
    }
  ],
  "groupId": "74246",
  "bugId": "159856",
  "duplicateId": "74246",
  "date": "2006-10-05T12:29:12+02:00",
  "product": "AspectJ",
  "component": "LTWeaving",
  "severity": "normal"
}