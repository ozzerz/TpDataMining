{
  "comments": [
    "Driver: tptp.runtime-TPTP-4.4.0-200705310943 (4.4 RC2)\nO/S: Linux Red Hat EL 3 Update 4 (kernel 2.4.21-37.EL #1 SMP) on Intel EM64T\nJVM: BEA JRockit(R) (build R27.1.0-109-73164-1.5.0_08-20061129-1415-linux-x86_64, compiled mode)\nEclipse: eclipse-SDK-3.3RC2-linux-gtk-x86_64\n\nSteps to reproduce:\n1. Run the JVMTI Thread Profiler and open the Thread Analysis view. \n2. Close the Thread Analysis view\n3. Open it again. This will cause an error (see below).\n\nAfter this error occurs, you cannot open any other Eclipse view (Java editors, Project Wizards, etc), as it produces a similar exception. Eclipse must be killed and restarted in order to resume normal work.\n\nThreadAnalysis view error details:\n\neclipse.buildId\u003dI20070525-1350\njava.version\u003d1.5.0_08\njava.vendor\u003dBEA Systems, Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86_64, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86_64\n\nError\nWed Jun 06 10:54:57 IDT 2007\nUnable to create view ID org.eclipse.tptp.trace.jvmti.internal.client.views.ThreadAnalysisViewer: Graphic is disposed\n\norg.eclipse.swt.SWTException: Graphic is disposed\nat org.eclipse.swt.SWT.error(SWT.java:3547)\nat org.eclipse.swt.SWT.error(SWT.java:3465)\nat org.eclipse.swt.SWT.error(SWT.java:3436)\nat org.eclipse.swt.graphics.Color.getRGB(Color.java:217)\nat org.eclipse.ui.forms.FormColors.getSystemColor(FormColors.java:197)\nat org.eclipse.ui.forms.FormColors.initializeColorTable(FormColors.java:149)\nat org.eclipse.ui.forms.FormColors.initialize(FormColors.java:138)\nat org.eclipse.ui.forms.FormColors.\u003cinit\u003e(FormColors.java:116)\nat org.eclipse.ui.forms.widgets.FormToolkit.\u003cinit\u003e(FormToolkit.java:220)\nat org.eclipse.hyades.ui.util.HyadesFormToolkit.\u003cinit\u003e(HyadesFormToolkit.java:33)\nat org.eclipse.tptp.trace.jvmti.internal.client.views.BaseProfilerView.createControl(BaseProfilerView.java:61)\nat org.eclipse.tptp.trace.jvmti.internal.client.views.BaseProfilerView.\u003cinit\u003e(BaseProfilerView.java:49)\nat org.eclipse.tptp.trace.jvmti.internal.client.views.BaseStatisticView.\u003cinit\u003e(BaseStatisticView.java:334)\nat org.eclipse.tptp.trace.jvmti.internal.client.views.ThreadStatisticView.\u003cinit\u003e(ThreadStatisticView.java:76)\nat org.eclipse.tptp.trace.jvmti.internal.client.views.ThreadAnalysisPage.createControl(ThreadAnalysisPage.java:83)\nat org.eclipse.hyades.trace.ui.TraceViewer.addViewPage(TraceViewer.java:208)\nat org.eclipse.hyades.trace.ui.TraceViewer.addViewPage(TraceViewer.java:230)\nat org.eclipse.hyades.trace.ui.TraceViewer.createPartControl(TraceViewer.java:274)\nat org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:370)\nat org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:227)\nat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:592)\nat org.eclipse.ui.internal.Perspective.showView(Perspective.java:2064)\nat org.eclipse.ui.internal.WorkbenchPage.busyShowView(WorkbenchPage.java:1018)\nat org.eclipse.ui.internal.WorkbenchPage.access$18(WorkbenchPage.java:999)\nat org.eclipse.ui.internal.WorkbenchPage$19.run(WorkbenchPage.java:3635)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\nAnother exception, when trying to open a Java editor:\n\neclipse.buildId\u003dI20070525-1350\njava.version\u003d1.5.0_08\njava.vendor\u003dBEA Systems, Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86_64, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86_64\n\nError\nWed Jun 06 10:58:16 IDT 2007\nUnable to create editor ID org.eclipse.jdt.ui.ClassFileEditor: Graphic is disposed\n\norg.eclipse.swt.SWTException: Graphic is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:3547)\n\tat org.eclipse.swt.SWT.error(SWT.java:3465)\n\tat org.eclipse.swt.SWT.error(SWT.java:3436)\n\tat org.eclipse.swt.graphics.Color.getRGB(Color.java:217)\n\tat org.eclipse.jface.text.source.projection.ProjectionSupport.getColor(ProjectionSupport.java:371)\n\tat org.eclipse.jface.text.source.projection.ProjectionSupport.doEnableProjection(ProjectionSupport.java:301)\n\tat org.eclipse.jface.text.source.projection.ProjectionSupport$ProjectionListener.projectionEnabled(ProjectionSupport.java:142)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.fireProjectionEnabled(ProjectionViewer.java:481)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.enableProjection(ProjectionViewer.java:529)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.setVisibleDocument(JavaSourceViewer.java:609)\n\tat org.eclipse.jface.text.TextViewer.setDocument(TextViewer.java:2729)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument(SourceViewer.java:518)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.setDocument(ProjectionViewer.java:370)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument(SourceViewer.java:473)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.initializeSourceViewer(AbstractTextEditor.java:3787)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl(AbstractTextEditor.java:3333)\n\tat org.eclipse.ui.texteditor.StatusTextEditor.createPartControl(StatusTextEditor.java:53)\n\tat org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl(AbstractDecoratedTextEditor.java:377)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.createPartControl(JavaEditor.java:2612)\n\tat org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor.createPartControl(ClassFileEditor.java:706)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:661)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:426)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:592)\n\tat org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:263)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2690)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2602)",
    "I failed to reproduce this bug on Windows multi-core machines (IA-32 and EM64T). This bug seems like a Linux-specific bug.\n",
    "Lowering the priority on this since this is not a common use case and on multi processor machines and uni-processor machines I am seeing it occur pretty much the same way. Its not accelerated on multi-proc.",
    "This has been retargetted to 4.4.1.\nPlease triage this to the right version",
    "Created an attachment (id\u003d73747)\nfix\n\nDefect is caused by difference in SWT implementation at Linux and Windows.\nAt Windows org.eclipse.swt.graphics.Device.getSystemColor(int id) returns new Color object while at Linux it returns reference to already created object. \nSo disposing of local color table at TraceColorScheme cause disposing object of system color from display, and at the second attempt to get this system color display returns already disposed object. \n\nPatch adds cloning of every system color object.\n\nPlease, review and validate this patch. ",
    "Difference in implementation may be seen at\norg.eclipse.swt.graphics.Device.getSystemColor",
    "*** Bug 197775 has been marked as a duplicate of this bug. ***",
    "Looks good. Pls submit request for approval and get it in the 4.4.0.2",
    "Check in patch."
  ],
  "commentCreationDates": [
    "2007-06-06T10:40:36+02:00",
    "2007-06-10T12:08:12+02:00",
    "2007-06-14T15:48:32+02:00",
    "2007-06-26T01:00:46+02:00",
    "2007-07-13T17:17:56+02:00",
    "2007-07-13T17:29:35+02:00",
    "2007-07-26T13:54:55+02:00",
    "2007-07-26T16:50:01+02:00",
    "2007-08-23T23:24:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Graphic is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3547"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3465"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3436"
        },
        {
          "method": "org.eclipse.swt.graphics.Color.getRGB",
          "source": "Color.java:217"
        },
        {
          "method": "org.eclipse.ui.forms.FormColors.getSystemColor",
          "source": "FormColors.java:197"
        },
        {
          "method": "org.eclipse.ui.forms.FormColors.initializeColorTable",
          "source": "FormColors.java:149"
        },
        {
          "method": "org.eclipse.ui.forms.FormColors.initialize",
          "source": "FormColors.java:138"
        },
        {
          "method": "org.eclipse.ui.forms.FormColors.\u003cinit\u003e",
          "source": "FormColors.java:116"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.FormToolkit.\u003cinit\u003e",
          "source": "FormToolkit.java:220"
        },
        {
          "method": "org.eclipse.hyades.ui.util.HyadesFormToolkit.\u003cinit\u003e",
          "source": "HyadesFormToolkit.java:33"
        },
        {
          "method": "org.eclipse.tptp.trace.jvmti.internal.client.views.BaseProfilerView.createControl",
          "source": "BaseProfilerView.java:61"
        },
        {
          "method": "org.eclipse.tptp.trace.jvmti.internal.client.views.BaseProfilerView.\u003cinit\u003e",
          "source": "BaseProfilerView.java:49"
        },
        {
          "method": "org.eclipse.tptp.trace.jvmti.internal.client.views.BaseStatisticView.\u003cinit\u003e",
          "source": "BaseStatisticView.java:334"
        },
        {
          "method": "org.eclipse.tptp.trace.jvmti.internal.client.views.ThreadStatisticView.\u003cinit\u003e",
          "source": "ThreadStatisticView.java:76"
        },
        {
          "method": "org.eclipse.tptp.trace.jvmti.internal.client.views.ThreadAnalysisPage.createControl",
          "source": "ThreadAnalysisPage.java:83"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.TraceViewer.addViewPage",
          "source": "TraceViewer.java:208"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.TraceViewer.addViewPage",
          "source": "TraceViewer.java:230"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.TraceViewer.createPartControl",
          "source": "TraceViewer.java:274"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPartHelper",
          "source": "ViewReference.java:370"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPart",
          "source": "ViewReference.java:227"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:592"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.showView",
          "source": "Perspective.java:2064"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyShowView",
          "source": "WorkbenchPage.java:1018"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$18",
          "source": "WorkbenchPage.java:999"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$19.run",
          "source": "WorkbenchPage.java:3635"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191191",
      "date": "2007-06-06T10:40:36+02:00",
      "product": "TPTP Profiling",
      "component": "Trace.UI",
      "severity": "major"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Graphic is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3547"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3465"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3436"
        },
        {
          "method": "org.eclipse.swt.graphics.Color.getRGB",
          "source": "Color.java:217"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSupport.getColor",
          "source": "ProjectionSupport.java:371"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSupport.doEnableProjection",
          "source": "ProjectionSupport.java:301"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSupport$ProjectionListener.projectionEnabled",
          "source": "ProjectionSupport.java:142"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.fireProjectionEnabled",
          "source": "ProjectionViewer.java:481"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.enableProjection",
          "source": "ProjectionViewer.java:529"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.setVisibleDocument",
          "source": "JavaSourceViewer.java:609"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.setDocument",
          "source": "TextViewer.java:2729"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
          "source": "SourceViewer.java:518"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.setDocument",
          "source": "ProjectionViewer.java:370"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
          "source": "SourceViewer.java:473"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.initializeSourceViewer",
          "source": "AbstractTextEditor.java:3787"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl",
          "source": "AbstractTextEditor.java:3333"
        },
        {
          "method": "org.eclipse.ui.texteditor.StatusTextEditor.createPartControl",
          "source": "StatusTextEditor.java:53"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl",
          "source": "AbstractDecoratedTextEditor.java:377"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.createPartControl",
          "source": "JavaEditor.java:2612"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor.createPartControl",
          "source": "ClassFileEditor.java:706"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:661"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:426"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:592"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.getEditor",
          "source": "EditorReference.java:263"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2690"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2602"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "191191",
      "date": "2007-06-06T10:40:36+02:00",
      "product": "TPTP Profiling",
      "component": "Trace.UI",
      "severity": "major"
    }
  ],
  "groupId": "191191",
  "bugId": "191191",
  "date": "2007-06-06T10:40:36+02:00",
  "product": "TPTP Profiling",
  "component": "Trace.UI",
  "severity": "major"
}