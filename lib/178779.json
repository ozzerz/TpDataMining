{
  "comments": [
    "3.3M5\n\nWhile the projection viewer is handling widget disposal:\n\njava.lang.IllegalArgumentException: Index out of bounds\n\tat org.eclipse.swt.SWT.error(SWT.java:3462)\n\tat org.eclipse.swt.SWT.error(SWT.java:3401)\n\tat org.eclipse.swt.SWT.error(SWT.java:3372)\n\tat org.eclipse.swt.custom.StyledText.getOffsetAtLine(StyledText.java:3711)\n\tat org.eclipse.jface.text.JFaceTextUtil.getPartialTopIndex(JFaceTextUtil.java:94)\n\tat org.eclipse.jface.text.JFaceTextUtil.getPartialTopIndex(JFaceTextUtil.java:142)\n\tat org.eclipse.jface.text.source.AnnotationPainter.getInclusiveTopIndexStartOffset(AnnotationPainter.java:1222)\n\tat org.eclipse.jface.text.source.AnnotationPainter.computeClippingRegion(AnnotationPainter.java:1374)\n\tat org.eclipse.jface.text.source.AnnotationPainter.catchupWithModel(AnnotationPainter.java:439)\n\tat org.eclipse.jface.text.source.AnnotationPainter.deactivate(AnnotationPainter.java:1533)\n\tat org.eclipse.jface.text.PaintManager.inputDocumentAboutToBeChanged(PaintManager.java:365)\n\tat org.eclipse.jface.text.TextViewer.fireInputDocumentAboutToBeChanged(TextViewer.java:2644)\n\tat org.eclipse.jface.text.TextViewer.setDocument(TextViewer.java:2699)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument(SourceViewer.java:518)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.setDocument(ProjectionViewer.java:370)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument(SourceViewer.java:459)\n\tat org.eclipse.jface.text.TextViewer.handleDispose(TextViewer.java:1777)\n\tat org.eclipse.jface.text.source.SourceViewer.handleDispose(SourceViewer.java:640)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.handleDispose(ProjectionViewer.java:1341)\n\tat org.eclipse.jface.text.TextViewer$2.widgetDisposed(TextViewer.java:1685)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:116)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:947)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:706)\n\tat org.eclipse.swt.custom.StyledText.handleDispose(StyledText.java:4948)\n\tat org.eclipse.swt.custom.StyledText$7.handleEvent(StyledText.java:4815)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:740)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Canvas.releaseChildren(Canvas.java:117)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Canvas.releaseChildren(Canvas.java:117)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:743)\n\tat org.eclipse.swt.widgets.Widget.dispose(Widget.java:410)\n\tat org.eclipse.ui.part.MultiPageEditorPart.removePage(MultiPageEditorPart.java:673)\n\tat org.eclipse.ui.forms.editor.FormEditor.removePage(FormEditor.java:381)\n[...]",
    "Is this reproducible? Steps?",
    "No, it rarely occurs.",
    "Is it the Java editor or your own?",
    "The ProjectionViewer is embedded in a FormEditor.",
    "So - are you sure that everything is correctly deregistered? I cannot reproduce this with the Java editor.\n\nPlease provide a snippet or more details.",
    "Not sure what the problem is, but I can occasionally reproduce in one of our editors. Note that AnnotationPainter.computeClippingRegion(PaintEvent, boolean) protects against this case. Reopening.",
    "StyledText\u0027s top index is not updated correctly.",
    "Created an attachment (id\u003d65385)\nSnippet to reproduce\n\nThe snippet shows how the line count goes down while the top index stays the same and at some point exceeds the line count.",
    "Thanks Christof to reproduce!",
    "Can this happen in eclipse? (i.e. should we try to fix for M7?)",
    "So far not seen in Eclipse SDK but happens in a Jazz editor.",
    "We are working around it by scrolling by one pixel to let the top index update. Please fix for 3.3.",
    "Steve this problem was introduced when we fixed Bug 158746.\n\nI have a fix for it (one liner), please come verify the fix so we we can release it.\n",
    "Does your fix influence bug 158746?",
    "+1",
    "fixed in 20070503 \u003e HEAD\nnot included M7\n",
    "(In reply to comment #14)\n\u003e Does your fix influence bug 158746?\n\nNo, it [the fix for this problem] only updates StyledText internal variables that we forgot to do when we fixed bug 158746."
  ],
  "commentCreationDates": [
    "2007-03-22T14:15:39+01:00",
    "2007-03-22T14:53:58+01:00",
    "2007-03-22T16:53:30+01:00",
    "2007-03-22T16:54:46+01:00",
    "2007-03-22T18:00:14+01:00",
    "2007-03-22T18:02:42+01:00",
    "2007-04-27T18:25:49+02:00",
    "2007-04-30T15:13:15+02:00",
    "2007-04-30T15:15:36+02:00",
    "2007-04-30T15:32:40+02:00",
    "2007-05-02T22:54:42+02:00",
    "2007-05-03T08:06:01+02:00",
    "2007-05-03T09:02:21+02:00",
    "2007-05-03T20:38:16+02:00",
    "2007-05-03T21:40:07+02:00",
    "2007-05-03T21:50:44+02:00",
    "2007-05-03T22:07:48+02:00",
    "2007-05-03T22:24:22+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3462"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3401"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3372"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getOffsetAtLine",
          "source": "StyledText.java:3711"
        },
        {
          "method": "org.eclipse.jface.text.JFaceTextUtil.getPartialTopIndex",
          "source": "JFaceTextUtil.java:94"
        },
        {
          "method": "org.eclipse.jface.text.JFaceTextUtil.getPartialTopIndex",
          "source": "JFaceTextUtil.java:142"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationPainter.getInclusiveTopIndexStartOffset",
          "source": "AnnotationPainter.java:1222"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationPainter.computeClippingRegion",
          "source": "AnnotationPainter.java:1374"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationPainter.catchupWithModel",
          "source": "AnnotationPainter.java:439"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationPainter.deactivate",
          "source": "AnnotationPainter.java:1533"
        },
        {
          "method": "org.eclipse.jface.text.PaintManager.inputDocumentAboutToBeChanged",
          "source": "PaintManager.java:365"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.fireInputDocumentAboutToBeChanged",
          "source": "TextViewer.java:2644"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.setDocument",
          "source": "TextViewer.java:2699"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
          "source": "SourceViewer.java:518"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.setDocument",
          "source": "ProjectionViewer.java:370"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
          "source": "SourceViewer.java:459"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.handleDispose",
          "source": "TextViewer.java:1777"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.handleDispose",
          "source": "SourceViewer.java:640"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.handleDispose",
          "source": "ProjectionViewer.java:1341"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$2.widgetDisposed",
          "source": "TextViewer.java:1685"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:116"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:962"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:947"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:706"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleDispose",
          "source": "StyledText.java:4948"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$7.handleEvent",
          "source": "StyledText.java:4815"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:962"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:943"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:740"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Canvas.releaseChildren",
          "source": "Canvas.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Canvas.releaseChildren",
          "source": "Canvas.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.dispose",
          "source": "Widget.java:410"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.removePage",
          "source": "MultiPageEditorPart.java:673"
        },
        {
          "method": "org.eclipse.ui.forms.editor.FormEditor.removePage",
          "source": "FormEditor.java:381"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "178779",
      "date": "2007-03-22T14:15:39+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "178779",
  "bugId": "178779",
  "date": "2007-03-22T14:15:39+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "major"
}