{
  "comments": [
    "build I20040310\n\nMichael, you know that stack trace I was looking at when you came in just now...\nIt\u0027s coming from SynchronizeModelProvider$LabelUpdateJob.\nWhat\u0027s strange is that the view is still open, and I\u0027m only using a single \nwindow.\nAfter this happened, the sync view has a tree, but is not showing any labels.\n\nDoes the sync view ever recreate its tree control, e.g. when switching to the \nform notification mode and back?  I did switch mode to incoming just after the \nsync refresh was started, and I previously had outgoing changes but no incoming \nchanges.\n\n\norg.eclipse.swt.SWTException: Widget is disposed\nat org.eclipse.swt.SWT.error(SWT.java:2625)\nat org.eclipse.swt.SWT.error(SWT.java:2555)\nat org.eclipse.swt.widgets.Widget.error(Widget.java:377)\nat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:306)\nat org.eclipse.swt.widgets.TreeItem.setText(TreeItem.java:711)\nat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:98)\nat org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run\n(AbstractTreeViewer.java:87)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:646)\nat org.eclipse.core.runtime.Platform.run(Platform.java:497)\nat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:469)\nat org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run\n(StructuredViewer.java:119)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:646)\nat org.eclipse.core.runtime.Platform.run(Platform.java:497)\nat org.eclipse.jface.viewers.StructuredViewer.updateItem\n(StructuredViewer.java:1285)\nat org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:1266)\nat org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:1200)\nat \norg.eclipse.team.ui.synchronize.viewers.SynchronizeModelProvider$LabelUpdateJob.\nrunInUIThread(SynchronizeModelProvider.java:86)\nat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:90)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:106)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2344)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2051)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1451)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1422)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:258)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:48)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:260)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:173)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:106)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:305)\nat org.eclipse.core.launcher.Main.run(Main.java:745)\nat org.eclipse.core.launcher.Main.main(Main.java:713)",
    "Switching modes recreates the tree being displayed. If a label refresh was \noccurring at the same time as a mode switch, it is possible that the label \nupdate is trying to update the label of an item that is disposed.",
    "I haven\u0027t been able to reproduce this but it appears to be a bug in the \nTreeViewer implementation. The sync model is asking for a label update of a \nmodel object and the tree view is mapping that to a widget that is disposed. I \nnoticed that the StructuredViewer class keeps a map of objects to widgets. Is \nit possible that this map was not properly cleaned up after a refresh? Perhaps \nupdates of objects whose widgets are disposed should just be ignored so that \nthe other updates would still occur. ",
    "*** Bug 54846 has been marked as a duplicate of this bug. ***",
    "You are using a UIJob that can run even after the workbench closes. As a \nresult you are sending the update to a closed viewer.\n\nSwitch to using a WorkbenchJob for any of your updates.",
    "Tod, thanks for the tip. I have chanhged our code. However, Nick didn\u0027t say \nanything about closing the workbench. Reassigning to UI to consider this.",
    "There is not much for us to do if you are updating a closed tree. Your \nlabelUpdateJob might want to consider implementing shouldRun() in case you \nhave pending updates that you want to run.\n\nPlease reopen if you have a case where the workbench is not handling its \nupdates correctly",
    "I was not shutting down, nor had I closed the view.\nHowever, I did switch between modes which may have disposed the tree.\n\nThe SynchronizeModelProvider$UpdateJob should probably check if the viewer\u0027s\ntree has been disposed.\n"
  ],
  "commentCreationDates": [
    "2004-03-15T18:23:36+01:00",
    "2004-03-15T18:35:00+01:00",
    "2004-03-15T19:50:24+01:00",
    "2004-03-15T22:34:43+01:00",
    "2004-03-17T19:08:15+01:00",
    "2004-03-17T19:22:15+01:00",
    "2004-03-17T19:35:20+01:00",
    "2004-03-17T20:04:35+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2625"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2555"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:377"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:306"
        },
        {
          "method": "org.eclipse.swt.widgets.TreeItem.setText",
          "source": "TreeItem.java:711"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:98"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:87"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:646"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:497"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:469"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:119"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:646"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:497"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1285"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.update",
          "source": "StructuredViewer.java:1266"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.update",
          "source": "StructuredViewer.java:1200"
        },
        {
          "method": "org.eclipse.team.ui.synchronize.viewers.SynchronizeModelProvider$LabelUpdateJob.runInUIThread",
          "source": "SynchronizeModelProvider.java:86"
        },
        {
          "method": "org.eclipse.ui.progress.UIJob$1.run",
          "source": "UIJob.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2344"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2051"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1451"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1422"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:258"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:48"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:260"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:173"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:106"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:305"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:745"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:713"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "54860",
      "date": "2004-03-15T18:23:36+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "54860",
  "bugId": "54860",
  "date": "2004-03-15T18:23:36+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}