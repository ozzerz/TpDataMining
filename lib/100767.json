{
  "comments": [
    "My environnement: Eclipse 3.1, build I20050513-1415, on  Win2k\n\nTo reproduce the bug: In my plugin, I have a TreeViewer which displays IProject,\nIFile and IMarker objects. I use a WorkbenchLabelProvider objet as a label\nprovider for the tree viewer.\n\nThe problem: The icons for the IMarker objects can\u0027t be found, and the tree\nviewer displays red squares instead.\n\nWhat I saw while debugging: in the getImagePath(IMarker) method of\nProblemImageProvider, the string returned is something like\n\"$nl$/icons/full/obj16/warn_tsk.gif\". The \"$nl$\" thing is not resolved so it is\nimpossible to create the image for the tree viewer.",
    "Paths with $nl$ need to be looked up using the API in Platform\n(Platform.getBundle(bundleId), path). Your  IWorkbenchAdapter for your element\nwill need to use this.\n\nI have noticed that the MarkerImageProviderRegistry is getting it\u0027s\nimageDescriptors using \n\n/**\n     * Returns the image descriptor with the given relative path.\n     */\n    ImageDescriptor getImageDescriptor(Descriptor desc) {\n        try {\n            URL installURL \u003d desc.pluginBundle.getEntry(\"/\"); //$NON-NLS-1$\n            URL url \u003d new URL(installURL, desc.imagePath);\n            return ImageDescriptor.createFromURL(url);\n        } catch (MalformedURLException e) {\n            return null;\n        }\n    }\n\nWhen it should look them up using (Platform.getBundle(bundleId), path).",
    "Created an attachment (id\u003d23545)\nExample plug-in\n\nHere is a zip file of a plug-in that demonstrates this issue. It shows projects\nwith thier markers as children in a tree viewer using the\nWorkbenchLabelProvider",
    "Created an attachment (id\u003d23547)\nPatch to fix this\n\nAs expected we were not using the correct API to look this up. Fabrice let me\nknow if this fixes your issue - thanks for your input.",
    "Adding Jeff and Mike as the two most appropriate component leads to add approval\nas we would like to fix this for RC4.\n\nAdding Kim as second committer to review patch.\n\nThe new code now reads:\n\n  URL url \u003d Platform.find(desc.pluginBundle, new Path(desc.imagePath));\n  return ImageDescriptor.createFromURL(url);\n\nThe issue is this. If we still use the old code any image specified as nl\nenabled (starting with $nl$) will not be found and will be replaced by a red\nbox. This will occur even if there are no fragments installed as the $nl$ will\nnot be treated as a special path entry.\n\nBy using the the Platform.find() API the $nl$ will be treated correctly.",
    "Fixed approved by Kim and released. Bug to stay open pending PMC approval.",
    "I got the following email from GIR (our test bot):\n\nThere was 1 failure.\n\nThe following people might have been involved:\nTod Creasey (tod_creasey@ca.ibm.com)\nsdimitro\n\nThe following failures occurred:\nFAILURE: testDynamic(org.eclipse.ui.tests.adaptable.MarkerImageProviderTest) (472)\njunit.framework.AssertionFailedError\n        at junit.framework.Assert.fail(Assert.java:47)\n        at junit.framework.Assert.assertTrue(Assert.java:20)\n        at junit.framework.Assert.assertTrue(Assert.java:27)\n        at\norg.eclipse.ui.tests.adaptable.MarkerImageProviderTest.testDynamic(MarkerImageProviderTest.java:65)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at junit.framework.TestCase.runTest(TestCase.java:154)\n        at junit.framework.TestCase.runBare(TestCase.java:127)\n        at junit.framework.TestResult$1.protect(TestResult.java:106)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.framework.TestResult.run(TestResult.java:109)\n        at junit.framework.TestCase.run(TestCase.java:118)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:478)\n        at\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:344)\n        at\norg.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:57)\n        at\norg.eclipse.pde.internal.junit.runtime.UITestApplication$1.run(UITestApplication.java:99)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n        at\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2828)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2559)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n        at\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n        at\norg.eclipse.pde.internal.junit.runtime.UITestApplication.run(UITestApplication.java:39)\n        at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n        at org.eclipse.core.launcher.Main.run(Main.java:973)\n        at org.eclipse.core.launcher.Main.main(Main.java:948)\n",
    "Created an attachment (id\u003d23554)\nPatch to the test suites\n\nAs we are now looking up these descriptors properly the previous test (which\nwas looking up a gif that was deleted some time ago) is now failing. Here is a\npatch to the test suites to correct the reference",
    "Created an attachment (id\u003d23560)\nPatch that removes nl support from ProblemImageProvider\n\nThis alternate patch just removes the nl support from problem image provider.\nThis is much lower risk although it is not (obviously) the best solution.\n\nAs we do not think we will be nling these particular icons in the near future\nthis fix will be acceptable to fix this problem. However if anyone using 3.1\nwants nl\u0027ed marker images they will run in to this as well.",
    "I have rolled back my change so that it is now the RC3 code in HEAD. I will wait\nto release whatever the PMC decides tomorrow.",
    "Talking to MVM it is his opinion that we should do the low risk change for 3.1\nand the proper one for 3.1.1",
    "to be reviewed June 21",
    "tod please fix with the low risk fix from comment #8",
    "Fixed in build \u003e20050621",
    "Verified with 20050622 and the example plug-in"
  ],
  "commentCreationDates": [
    "2005-06-20T11:03:31+02:00",
    "2005-06-20T15:04:48+02:00",
    "2005-06-20T16:40:57+02:00",
    "2005-06-20T16:52:02+02:00",
    "2005-06-20T17:00:06+02:00",
    "2005-06-20T17:39:53+02:00",
    "2005-06-20T19:04:25+02:00",
    "2005-06-20T19:17:47+02:00",
    "2005-06-20T19:51:34+02:00",
    "2005-06-20T19:58:46+02:00",
    "2005-06-20T20:18:57+02:00",
    "2005-06-21T14:31:32+02:00",
    "2005-06-21T17:01:32+02:00",
    "2005-06-21T17:29:57+02:00",
    "2005-06-22T15:41:51+02:00"
  ],
  "traces": [
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:20"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:27"
        },
        {
          "method": "org.eclipse.ui.tests.adaptable.MarkerImageProviderTest.testDynamic",
          "source": "MarkerImageProviderTest.java:65"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:478"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:344"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:57"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.UITestApplication$1.run",
          "source": "UITestApplication.java:99"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:118"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2828"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2559"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.UITestApplication.run",
          "source": "UITestApplication.java:39"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 6,
      "bugId": "100767",
      "date": "2005-06-20T19:04:25+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "100767",
  "bugId": "100767",
  "date": "2005-06-20T11:03:31+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}