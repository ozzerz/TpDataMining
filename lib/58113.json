{
  "comments": [
    "I\u0027ve been trying to get a single plugin/feature running in an\nRCP configuration WITHOUT putting the class files into a JAR.\nAccording to the docs, this should be possible. From the Platform\nPlug-in Developers Guide docs on the plug-in manifest file:\n  \"The \u003clibrary\u003e elements collectively define the plug-in\n   runtime. At least one \u003clibrary\u003e must be specified. Each\n   \u003clibrary\u003e element has the following attributes:\n\n     name - string reference to a library file or directory\n     containing classes (relative to the plug-in install\n     directory). Directory references must contain trailing\n     file separator.\"\n\nI started with a working plugin / RCP configuration and tried\nun-jarring the classes into a directory structure. For example:\n\n- plugin folder\n  - plugin.jar\nbecame\n- plugin folder\n  - classes\n    - com\n      - widgetcorp\n        - etc\n\nI have tried a number different entries in the plug-in manifest\nfile, including:\n\n      \u003clibrary name\u003d\"classes/\"\u003e\n      \u003clibrary name\u003d\"classes\\\"\u003e\n      \u003clibrary name\u003d\"./classes/\"\u003e\n      \u003clibrary name\u003d\".\\classes\\\"\u003e\n      \u003clibrary name\u003d\"classes\\\\\"\u003e\n\nThe resulting error log in the /configuration folder looks like:\n\n!SESSION Apr 11, 2004 10:05:14.615 ---------------------------------------------\njava.version\u003d1.5.0-beta\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -application com.widgetcorp.etc.MyApp\n!ENTRY org.eclipse.core.runtime 4 1 Apr 11, 2004 10:05:14.615\n!MESSAGE Plug-in com.widgetcorp.etc was unable to load class\ncom.widgetcorp.etc.MyApplication.\n!STACK 0\njava.lang.ClassNotFoundException: com.widgetcorp.etc.MyApplication\n    at\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:348)\n    at\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:116)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at\norg.eclipse.osgi.framework.internal.core.BundleLoader.loadClass(BundleLoader.java:251)\n    at\norg.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:332)\n    at org.eclipse.osgi.framework.internal.core.Bundle.loadClass(Bundle.java:1294)\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:132)\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:125)\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:114)\n    at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:269)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:239)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.core.launcher.Main.basicRun(Main.java:267)\n    at org.eclipse.core.launcher.Main.run(Main.java:692)\n    at org.eclipse.core.launcher.Main.main(Main.java:676)\n!ENTRY org.eclipse.osgi Apr 11, 2004 10:05:14.625\n!MESSAGE Application error\n!STACK 1\njava.lang.RuntimeException: Error running application\n    at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:271)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:239)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.core.launcher.Main.basicRun(Main.java:267)\n    at org.eclipse.core.launcher.Main.run(Main.java:692)\n    at org.eclipse.core.launcher.Main.main(Main.java:676)\nCaused by: org.eclipse.core.runtime.CoreException: Plug-in com.widgetcorp.etc\nwas unable to load class com.widgetcorp.etc.MyApplication.\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.throwException(ConfigurationElement.java:165)\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:134)\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:125)\n    at\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:114)\n    at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:269)\n    ... 9 more\n\n\nThe RCP app runs fine both within the Eclipse plugin development environment\nand standalone (if the classes are JAR\u0027d).",
    "Created an attachment (id\u003d9373)\nsample of plugin.xml file that does not load a library from a path\n\nI was asked to submit this file for analysis",
    "Created an attachment (id\u003d9374)\nsample of .MF file that does not load a library from a path\n\nI was asked to submit this example file",
    "Does the value of provide-package list all the package you have in the classes \nfolder?",
    "No, I do not have any \u003cprovides-package\u003e specified in the plugin.xml.\nIn the plug-in dev docs, I only see reference to a \u003cpackages\u003e tag - so \nI tried something like this:\n  \u003cpackages prefixes\u003d\"my.packages\"/\u003e\nand it had no effect.  Would this be different between classes in\na folder and classes in a JAR?\n\np.s. I should have mentioned earlier I am running 3.0 M8.",
    "provide-package is one of the header that appears in the manifest file.\n",
    "Yes.  There is only one package in the app and it is listed in the\nconfiguration/org.eclipse.osgi/manifests/\u003cplugin\u003e.MF file.\n\nThe package also correctly matches the name of the class that appears in the\nerror log in the ClassNotFound exception.",
    "Well, it looks like this bug should have a different description.  Loading\nclasses from folders does work.  However, it will not work once the plugin has\nbeen loaded from a JAR file.  Deleting the\n/configuration/org.eclipse.osgi/manifests/\u003cplugin\u003e.MF does not help.  Deleting\nthe entire configuration folder, however, does work.  So once a plug-in has been\nloaded, the plugin.xml is never read again.  If this is the way it is intended\nto work, then this is not a bug and can be closed. If this is documented\nsomewhere...please point me there!  There is probably a lot of other good stuff\nthere that I should know  :)",
    "so can you update the initial scenario?  I\u0027m a little confused as to exactly \nwhat you mean when you say \"However, it will not work once the plugin has\nbeen loaded from a JAR file.\"\n\nDoes that mean the whole plugin in a jar or just the code in a jar?\n\nIf the former, where is the jar and what is the \u003clibrary\u003e entry in the \nplugin.xml?\n\nIf the latter, where is the code in the plugin jar and what is the \u003clibrary\u003e \nentry.\n\nWe greatly appreciate your patience here.  I cannot really think of a scenario \nhere that should not work.  That is, the runtime should be able to handle just \nabout anything you can throw at it as long as it is correctly specified in the \nplugin.xml or manifest.mf.\n",
    "Sorry...I was a little blurry-eyed after 3 hours of messing with this last night\nwhen I submitted that last comment (and somewhat embarassed, since I found a way\nto make it work _after_ submitting the bug).  For background, I am working with\na slightly modified version of the Eclipse RCP tutorial (from\neclipsepowered.org) that has been deployed (as per the instructions) to run as a\nstandalone RCP application.\n\n\nHere a more thorough description of the scenario that does not appear to work:\n1) Install the sample plugin into the RCP framework right as it comes\nout the the tutorial and the Eclipse plugin development environment.\nThe code will all be in a JAR file (e.g. sampleplugin.jar) and the plugin.xml\nwill have this entry:\n      \u003clibrary name\u003d\"sampleplugin.jar\"\u003e\n         \u003cexport name\u003d\"*\"/\u003e\n      \u003c/library\u003e\n\nRun the application and everything works great!\n\n2) UnJAR the classes into a new folder (classes) under the plugin folder.\nChange the above-mentioned part of the plugin.xml file to:\n      \u003clibrary name\u003d\"classes/\"\u003e\n         \u003cexport name\u003d\"*\"/\u003e\n      \u003c/library\u003e\nThe delete/rename the JAR file.\n\nRun the application and it will fail.\n\nNote that deleting the JAR file is a critical step to reproducing the problem. \nIf you leave the sampleplugin.jar file, the app will run because it does not\nappear to re-read the plugin.xml file (or, at least, it does not absorb the\nclasspath changes).\n\n3) Delete the configuration folder (at the top eclipse level) and run the\napplication - it will now work.\n\nI tried only deleting the manifest file for my plugin\n(/configuration/org.eclipse.osgi/manifests/sampleplugin.MF), but that did not\nfix the problem...so the classpath information must be cached elsewhere, AFAICT.\n\nHopefully, this description is a little easier to follow.",
    "that\u0027s great.  Thanks.\n\nOne further question, what build of Eclipse are you using for all of this?\n",
    "Eclipse 3.0 M8\nBuild id: 200403261517",
    "Pascal just pointed out that -Dosgi.checkConfiguration has not been mentioned \nhere.  By default Eclipse no longer checks to see if someone has gone and \nmessed with the files that someone has installed into it.  That is just to \ncostly for us to do all the time.\n\nTo turn this on either\n- put -Dosgi.checkConfiguration\u003dtrue on the command line as a VM arg\n- put osgi.checkConfiguration\u003dtrue in config.ini\n- put -dev as a program command line arg\n\nLet us know if this fixes your problem.\n",
    "Assuming this fixed it."
  ],
  "commentCreationDates": [
    "2004-04-12T02:51:21+02:00",
    "2004-04-12T02:54:11+02:00",
    "2004-04-12T02:55:57+02:00",
    "2004-04-12T15:46:22+02:00",
    "2004-04-12T16:08:32+02:00",
    "2004-04-12T16:28:00+02:00",
    "2004-04-12T22:06:34+02:00",
    "2004-04-14T03:55:39+02:00",
    "2004-04-14T16:39:03+02:00",
    "2004-04-14T17:06:07+02:00",
    "2004-04-14T18:33:07+02:00",
    "2004-04-14T18:43:04+02:00",
    "2004-04-14T19:55:02+02:00",
    "2004-04-23T04:33:10+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassNotFoundException",
      "message": "com.widgetcorp.etc.MyApplication",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:348"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:116"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.loadClass",
          "source": "BundleLoader.java:251"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.loadClass",
          "source": "BundleHost.java:332"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.loadClass",
          "source": "Bundle.java:1294"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:132"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:125"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:114"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:269"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:239"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:117"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:267"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:692"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:676"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "58113",
      "date": "2004-04-12T02:51:21+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Error running application",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:271"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:239"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:117"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:267"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:692"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:676"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.core.runtime.CoreException",
        "message": "Plug-in com.widgetcorp.etc was unable to load class com.widgetcorp.etc.MyApplication.",
        "elements": [
          {
            "method": "org.eclipse.core.internal.registry.ConfigurationElement.throwException",
            "source": "ConfigurationElement.java:165"
          },
          {
            "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
            "source": "ConfigurationElement.java:134"
          },
          {
            "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
            "source": "ConfigurationElement.java:125"
          },
          {
            "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
            "source": "ConfigurationElement.java:114"
          },
          {
            "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
            "source": "PlatformActivator.java:269"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 0,
      "bugId": "58113",
      "date": "2004-04-12T02:51:21+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "58113",
  "bugId": "58113",
  "date": "2004-04-12T02:51:21+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}