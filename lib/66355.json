{
  "comments": [
    "i200406082000\n\nI am getting this once in a while during startup, when running automated tests.\norg.eclipse.ui.workbench.compatibility requires org.eclipse.core.resources, but\nI can only guess it is the \"faulty\" bundle, since the message does not tell us\nwhich one is the culprit.\n\nAnybody has a clue of what is going on?\n\n!ENTRY update@/d:/target/releasing/plugins/org.eclipse.ui.workbench/ 0 0 Jun 09,\n2004 13:18:51.229\n!MESSAGE FrameworkEvent.ERROR\n!STACK 0\norg.osgi.framework.BundleException: A fragment bundle attempted to require\nadditional bundle \"org.eclipse.core.resources\".  Try refreshing the host bundle\n\"update@/d:/target/releasing/plugins/org.eclipse.ui.workbench/\".\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.initializeFragment(BundleLoader.java:236)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.attachFragment(BundleLoader.java:1146)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.attachFragment(BundleHost.java:622)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleFragment.setHost(BundleFragment.java:392)\n\tat\norg.eclipse.osgi.framework.internal.core.PackageAdminImpl.processDelta(PackageAdminImpl.java:470)\n\tat\norg.eclipse.osgi.framework.internal.core.PackageAdminImpl.refreshPackages(PackageAdminImpl.java:352)\n\tat\norg.eclipse.osgi.framework.internal.core.PackageAdminImpl$1.run(PackageAdminImpl.java:321)\n\tat java.lang.Thread.run(Thread.java:534)",
    "If a fragment requires an additional bundle that the host does not require then \nthe fragment will not be allowed to attach to a RESOLVED host without \nrefreshing the host.  This is to prevent interjecting additional classpath \nelements into the host after its classloader has been defined.\n\nThis could happen if the ui.workbench was installed and resolved and then later \nthe ui.workbench.compatibility was installed and resolved.  Is this possible \nwhen running the automated tests?",
    "Running the tests should not be very different than self-hosting (except if you\nare using the simulated startup option).\n\nThe tests do install/uninstall plugins dynamically and make additional calls to\nPackageAdmin#refreshPackages, but they should not affect any bundles already\ninstalled (since the bundles being added/uninstalled are not required by any\nexisting bundles).",
    "It seems the problem was caused to a corrupted framework metadata. Some bundles\nwere in the installed state, while others were resolved. During startup, the\nconfigurator would refresh only the unresolved bundles (which included the\nworkbench.compatibility fragment, but not the workbench bundle). As Thomas\ndescribed, this would cause thae exception to happen.\n\nI cannot reproduce after having my config area deleted. I will leave this open\nso at least the problem with the message gets addressed.",
    "is the message fix easy?  I can be talked into RC2 for this if it improves \nerror reporting to users who are struggling to get things working...\n",
    "Fixed the message issue. Closing as works for me, since I cannot reproduce the\noriginal issue anymore."
  ],
  "commentCreationDates": [
    "2004-06-09T19:27:35+02:00",
    "2004-06-09T21:00:09+02:00",
    "2004-06-09T21:25:32+02:00",
    "2004-06-09T23:13:20+02:00",
    "2004-06-10T02:37:19+02:00",
    "2004-06-10T16:45:37+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "A fragment bundle attempted to require additional bundle \"org.eclipse.core.resources\".  Try refreshing the host bundle \"update@/d:/target/releasing/plugins/org.eclipse.ui.workbench/\".",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.initializeFragment",
          "source": "BundleLoader.java:236"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.attachFragment",
          "source": "BundleLoader.java:1146"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.attachFragment",
          "source": "BundleHost.java:622"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleFragment.setHost",
          "source": "BundleFragment.java:392"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl.processDelta",
          "source": "PackageAdminImpl.java:470"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl.refreshPackages",
          "source": "PackageAdminImpl.java:352"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl$1.run",
          "source": "PackageAdminImpl.java:321"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "66355",
      "date": "2004-06-09T19:27:35+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "66355",
  "bugId": "66355",
  "date": "2004-06-09T19:27:35+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}