{
  "comments": [
    "The Type Hierarchy view has problems with a quadruple generic. The hierarchical\ndisplay is correct and useable except that the type name is empty.\n\nThe accompanying stack trace is:\n\njava.lang.IllegalArgumentException\nat org.eclipse.jdt.core.Signature.getTypeParameters(Signature.java:1453)\nat org.eclipse.jdt.core.Signature.getTypeParameters(Signature.java:1467)\nat org.eclipse.jdt.ui.JavaElementLabels.getTypeLabel(JavaElementLabels.java:837\n)\nat\norg.eclipse.jdt.ui.JavaElementLabels.getElementLabel(JavaElementLabels.java:\n398)\nat\norg.eclipse.jdt.ui.JavaElementLabels.getElementLabel(JavaElementLabels.java:\n363)\nat org.eclipse.jdt.ui.JavaElementLabels.getTextLabel(JavaElementLabels.java:345\n)\nat org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getText(JavaUILa\nbelProvider.java:161)\nat org.eclipse.jdt.internal.ui.typehierarchy.HierarchyLabelProvider.getText(Hie\nrarchyLabelProvider.java:127)\nat org.eclipse.jface.viewers.DecoratingLabelProvider.getText(DecoratingLabelPro\nvider.java:118)\nat org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel(DecoratingLabe\nlProvider.java:208)\nat\norg.eclipse.jface.viewers.StructuredViewer.buildLabel(StructuredViewer.java:\n1855)\nat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:228)\nat org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(Abst\nractTreeViewer.java:85)\nat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java\n:1044)\nat org.eclipse.core.runtime.Platform.run(Platform.java:783)\nat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\nat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\nat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer\n.java:621)\nat org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(Struct\nuredViewer.java:434)\nat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java\n:1044)\nat org.eclipse.core.runtime.Platform.run(Platform.java:783)\nat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\nat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\nat\norg.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:\n1763)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeView\ner.java:535)\nat org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:5\n14)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeView\ner.java:494)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractT\nreeViewer.java:1122)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractT\nreeViewer.java:1131)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractT\nreeViewer.java:1131)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractT\nreeViewer.java:1131)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractT\nreeViewer.java:1131)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractT\nreeViewer.java:1131)\nat org.eclipse.jface.viewers.AbstractTreeViewer.expandToLevel(AbstractTreeViewe\nr.java:658)\nat org.eclipse.jface.viewers.AbstractTreeViewer.expandToLevel(AbstractTreeViewe\nr.java:641)\nat org.eclipse.jdt.internal.ui.typehierarchy.TraditionalHierarchyViewer.updateC\nontent(TraditionalHierarchyViewer.java:61)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart$11.run(TypeH\nierarchyViewPart.java:1092)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.updateHierar\nchyViewer(TypeHierarchyViewPart.java:1095)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.updateInput(\nTypeHierarchyViewPart.java:542)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.setInputElem\nent(TypeHierarchyViewPart.java:487)\nat org.eclipse.jdt.internal.ui.util.OpenTypeHierarchyUtil.openInViewPart(OpenTy\npeHierarchyUtil.java:98)\nat org.eclipse.jdt.internal.ui.util.OpenTypeHierarchyUtil.open(OpenTypeHierarch\nyUtil.java:75)\nat org.eclipse.jdt.ui.actions.OpenTypeHierarchyAction.run(OpenTypeHierarchyActi\non.java:181)\nat org.eclipse.jdt.ui.actions.OpenTypeHierarchyAction.run(OpenTypeHierarchyActi\non.java:143)\nat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDisp\natchAction.java:226)\nat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchActi\non.java:198)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(Action\nContributionItem.java:538)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionI\ntem.java:488)\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContribu\ntionItem.java:400)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\nat\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.\njava:226)\nat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\nat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39\n)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl\n.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\nat org.eclipse.core.launcher.Main.run(Main.java:973)\nat org.eclipse.core.launcher.Main.main(Main.java:948)\n\nThe provocative declaration was\n\npublic abstract class CreateLinkElementCommand\u003cSM extends GNodeElement, LM\nextends GLinkElement, TM extends GNodeElement, CLM extends EModelElement\u003e\n\textends CreateModelElementCommand\u003cLM,CLM,GLinkParent\u003e",
    "Martin, can you please investigate.",
    "The resolved key of the type is:\n   Lp/CreateLinkElementCommand\u003cTSM;TLM;TTM;TCLM;\u003e;\nkey.internalToSignature() returns\n   \u003cSM:LM:TM:CLM:\u003eLp.CreateLinkElementCommand;\n\nIt seems to me that the bug is that Signature.getTypeParameters thinks that \u0027LM\u0027\nis a bound of \u0027SM\u0027.\n\nMoving to jdt.core\n\nThis is major the type hierarchy can not be opened. Suggest to add this to the\n3.1.1 candidate list.\n\n\n",
    "A simpler example is:\n\npublic abstract class CreateLinkElementCommand\u003cSM, LM\u003e {\n}",
    "Reproduced. Problem comes from the fact that conversion doesn\u0027t associate type\nparameters with any bounds, and thus ends up constructing ill-formed type\nparameter signatures.\n\nFor later case, the binding key is: LX\u003cTSM;TLM;\u003e\nand it gets incorrectly converted as signature: \u003cTSM:TLM:\u003eLX;",
    "Ideally the bindingKey should record the type parameter bounds, which it doesn\u0027t\ncurrently as only recording the genericTypeSignature (and not using the\ngenericSignature). \n\nAlso, the conversion should avoid recreating ill-formed signature in the event\nno bound is provided.",
    "Will release workaround (consider Object as bound), but real answer would be to\npersist the information inside the binding key.\n\nCorner case:  X\u003cT extends Runnable\u003e --\u003e \u003cT::Ljava/lang/Runnable;\u003eLX;\n  observe double colon, since first bound is an interface",
    "The Javadoc of \u0027org.eclipse.jdt.core.Signature\u0027 specs:\n * FormalTypeParameterSignature ::\u003d\n *     TypeVariableName + OptionalClassBound + InterfaceBound*\n * TypeVariableName ::\u003d Identifier\n * OptionalClassBound ::\u003d\n *     \":\"\n *   | \":\" + TypeSignature\n * InterfaceBound ::\u003d \n *     \":\" + TypeSignature\n\nSo according to this, \u0027TypeVariableName:\u0027 should be valid (not ill-formed).\nWhat I don\u0027t understand (and the reason why I filed bug 102720) is that it isn\u0027t\nspecified how such FormalTypeParameterSignatures are separated from each other,\nif you have more than one. You can\u0027t use \u0027:\u0027 to do that. \n\nAlso note that the example converts to\n  \u003cSM:LM:\u003eLX;\nwhen you use type.getKey().internalToSignature()\n(not \u003cTSM:TLM:\u003eLX;)\n",
    "No, according to the spec there must at least one bound.\n\nAnd yes, the generated signature was \u003cSM:LM:\u003eLX; ",
    "Actually, the spec is indeed causing some confusion. Compiler is not producing\nempty bounds, as these would cause ambiguities.\n\nWill ping spec lead to get confirmation, and once addressed, our documentation\nshould be clarified to.",
    "Not for 3.1.1, as didn\u0027t get spec confirmation. For 3.1.1, we should stick with\nwhat we have.\n\nWe should align our doc with our implementation, and hope to have the spec\nclarified for 3.2 time frame",
    "Philippe, the workaround mentioned in comment #6 is that in 3.1.1.",
    "Yes the workaround is in KeyToSignature#consumeType() and it is present in\nR3_1_maintenance branch.",
    "Spec needs to be clarified before taking any action on this one. Since the workaround got released, deffering this bug."
  ],
  "commentCreationDates": [
    "2005-07-05T07:46:58+02:00",
    "2005-07-05T10:53:22+02:00",
    "2005-07-05T11:14:58+02:00",
    "2005-07-05T11:21:33+02:00",
    "2005-07-05T13:36:39+02:00",
    "2005-07-05T13:42:43+02:00",
    "2005-07-05T14:01:01+02:00",
    "2005-07-05T14:26:07+02:00",
    "2005-07-05T14:41:28+02:00",
    "2005-07-05T15:07:48+02:00",
    "2005-09-07T15:37:16+02:00",
    "2005-09-07T18:03:06+02:00",
    "2005-09-08T13:16:49+02:00",
    "2006-03-30T17:54:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.Signature.getTypeParameters",
          "source": "Signature.java:1453"
        },
        {
          "method": "org.eclipse.jdt.core.Signature.getTypeParameters",
          "source": "Signature.java:1467"
        },
        {
          "method": "org.eclipse.jdt.ui.JavaElementLabels.getTypeLabel",
          "source": "JavaElementLabels.java:837 "
        },
        {
          "method": "org.eclipse.jdt.ui.JavaElementLabels.getElementLabel",
          "source": "JavaElementLabels.java: 398"
        },
        {
          "method": "org.eclipse.jdt.ui.JavaElementLabels.getElementLabel",
          "source": "JavaElementLabels.java: 363"
        },
        {
          "method": "org.eclipse.jdt.ui.JavaElementLabels.getTextLabel",
          "source": "JavaElementLabels.java:345 "
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getText",
          "source": "JavaUILa belProvider.java:161"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.HierarchyLabelProvider.getText",
          "source": "Hie rarchyLabelProvider.java:127"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.getText",
          "source": "DecoratingLabelPro vider.java:118"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel",
          "source": "DecoratingLabe lProvider.java:208"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.buildLabel",
          "source": "StructuredViewer.java: 1855"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:228"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "Abst ractTreeViewer.java:85"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java :1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer .java:621"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "Struct uredViewer.java:434"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java :1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java: 1763"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeView er.java:535"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:5 14"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeView er.java:494"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractT reeViewer.java:1122"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractT reeViewer.java:1131"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractT reeViewer.java:1131"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractT reeViewer.java:1131"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractT reeViewer.java:1131"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractT reeViewer.java:1131"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.expandToLevel",
          "source": "AbstractTreeViewe r.java:658"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.expandToLevel",
          "source": "AbstractTreeViewe r.java:641"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TraditionalHierarchyViewer.updateContent",
          "source": "TraditionalHierarchyViewer.java:61"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart$11.run",
          "source": "TypeH ierarchyViewPart.java:1092"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.updateHierarchyViewer",
          "source": "TypeHierarchyViewPart.java:1095"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.updateInput",
          "source": " TypeHierarchyViewPart.java:542"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.setInputElement",
          "source": "TypeHierarchyViewPart.java:487"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.util.OpenTypeHierarchyUtil.openInViewPart",
          "source": "OpenTy peHierarchyUtil.java:98"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.util.OpenTypeHierarchyUtil.open",
          "source": "OpenTypeHierarch yUtil.java:75"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.OpenTypeHierarchyAction.run",
          "source": "OpenTypeHierarchyActi on.java:181"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.OpenTypeHierarchyAction.run",
          "source": "OpenTypeHierarchyActi on.java:143"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDisp atchAction.java:226"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchActi on.java:198"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:996"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "Action ContributionItem.java:538"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionI tem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContribu tionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3080"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2713"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator. java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39 "
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl .java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "102710",
      "date": "2005-07-05T07:46:58+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "102710",
  "bugId": "102710",
  "date": "2005-07-05T07:46:58+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}