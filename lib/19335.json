{
  "comments": [
    "While trying to extract the code shown in code.txt attachment to a method:\n\n\n!ENTRY org.eclipse.ui 4 0 Jun 05, 2002 16:41:53.336\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.corext.util.Strings.computeIndent\n(Strings.java:128)\n\tat org.eclipse.jdt.internal.corext.util.CodeFormatterUtil.computeIndent\n(CodeFormatterUtil.java:43)\n\tat \norg.eclipse.jdt.internal.corext.util.CodeFormatterUtil.createIndentString\n(CodeFormatterUtil.java:66)\n\tat org.eclipse.jdt.internal.corext.codemanipulation.MethodBlock.fill\n(MethodBlock.java:52)\n\tat \norg.eclipse.jdt.internal.corext.codemanipulation.CodeBlockEdit.createText\n(CodeBlockEdit.java:123)\n\tat \norg.eclipse.jdt.internal.corext.codemanipulation.CodeBlockEdit.perform\n(CodeBlockEdit.java:94)\n\tat \norg.eclipse.jdt.internal.corext.textmanipulation.TextEditNode.performDo\n(TextEditNode.java:444)\n\tat \norg.eclipse.jdt.internal.corext.textmanipulation.TextEditNode.performDo\n(TextEditNode.java:438)\n\tat \norg.eclipse.jdt.internal.corext.textmanipulation.TextEditNode$RootNode.performDo\n(TextEditNode.java:49)\n\tat \norg.eclipse.jdt.internal.corext.textmanipulation.TextBufferEditor.performEdits\n(TextBufferEditor.java:173)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.changes.TextChange.getPreviewTextBuf\nfer(TextChange.java:187)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.changes.TextChange.getPreviewContent\n(TextChange.java:177)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.getCompareInput\n(PreviewWizardPage.java:236)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.getPreviewer\n(PreviewWizardPage.java:298)\n\tat org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.showPreview\n(PreviewWizardPage.java:429)\n\tat org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.access$2\n(PreviewWizardPage.java:427)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage$2.selectionChanged\n(PreviewWizardPage.java:418)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged\n(Viewer.java:147)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateSelection\n(StructuredViewer.java:1153)\n\tat org.eclipse.jface.viewers.StructuredViewer.setSelection\n(StructuredViewer.java:903)\n\tat org.eclipse.jface.viewers.Viewer.setSelection(Viewer.java:342)\n\tat org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.setVisible\n(PreviewWizardPage.java:383)\n\tat org.eclipse.jface.wizard.WizardDialog.showPage(WizardDialog.java:888)\n\tat org.eclipse.jface.wizard.WizardDialog.nextPressed\n(WizardDialog.java:653)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed\n(WizardDialog.java:308)\n\tat org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:398)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:85)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:825)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1527)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1289)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:558)\n\tat org.eclipse.jface.window.Window.open(Window.java:538)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate\n(RefactoringStarter.java:79)\n\tat org.eclipse.jdt.ui.actions.ExtractMethodAction.run\n(ExtractMethodAction.java:47)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:180)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:156)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:749)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:361)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:352)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:47)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:825)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1527)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1289)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1177)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1160)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:739)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:244)\n\tat org.eclipse.core.launcher.Main.run(Main.java:693)\n\tat org.eclipse.core.launcher.Main.main(Main.java:526)",
    "Created an attachment (id\u003d1263)\ncode.txt\n",
    "Till, what is the original context (file, project) for the code snippet",
    "This should normally not happen. The problem is that the position returned from \ncode formatter doesn\u0027t map to a valid position in the string anymore.",
    "i saw the file too - positions were really out of synch (judging by what \nstructured selection said)\nTill, you still have the file around?",
    "sent the file to Dirk",
    "This is a formatter problem. Here is the scenario I use:\n\ncode to format:\n\nprivate void eee(String string, TextBufferEditor tbe, String lineDelimiter, \nIMember member, String source, IScanner scanner) throws JavaModelException, \nCoreException{ x(); }\n\nFormatter call:\n\nString formattedCode\u003d formatter.format(codeToFormat, 0, positions, \nlineSeparator);\n\npositions is [165, 168]\nlineSeparator is ascii 10\n\nThe result is a string of length 183 put the returned positions are [184, 187]. \nSo they lay outside the string which causes the NPE since I don\u0027t handle this \ncase.\n\n",
    "Note that codeToFormat is one string with line delimiters.",
    "Added guard code and fixup code if the positions seem to be bogus.",
    "Moving to JDT/Core since it is a formatter bug.",
    "We did not change this code recently, it should have never work since day one.\n",
    "The problem only occurs if there is a double split of the string. In your example, there is a split on \nthe throws keyword and on the commas in the parameters list.",
    "Dirk Baeumer says, over at bug 18997, that that bug is related to this one.",
    "\n\n*** This bug has been marked as a duplicate of 18997 ***"
  ],
  "commentCreationDates": [
    "2002-06-05T16:55:51+02:00",
    "2002-06-05T16:56:15+02:00",
    "2002-06-05T18:03:10+02:00",
    "2002-06-05T18:03:59+02:00",
    "2002-06-06T10:34:27+02:00",
    "2002-06-06T10:40:45+02:00",
    "2002-06-06T10:50:59+02:00",
    "2002-06-06T10:51:55+02:00",
    "2002-06-06T11:16:26+02:00",
    "2002-06-06T14:17:36+02:00",
    "2002-06-06T15:36:33+02:00",
    "2002-06-06T22:04:40+02:00",
    "2002-06-07T12:18:24+02:00",
    "2002-06-07T21:31:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.corext.util.Strings.computeIndent",
          "source": "Strings.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.CodeFormatterUtil.computeIndent",
          "source": "CodeFormatterUtil.java:43"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.CodeFormatterUtil.createIndentString",
          "source": "CodeFormatterUtil.java:66"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.codemanipulation.MethodBlock.fill",
          "source": "MethodBlock.java:52"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.codemanipulation.CodeBlockEdit.createText",
          "source": "CodeBlockEdit.java:123"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.codemanipulation.CodeBlockEdit.perform",
          "source": "CodeBlockEdit.java:94"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.textmanipulation.TextEditNode.performDo",
          "source": "TextEditNode.java:444"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.textmanipulation.TextEditNode.performDo",
          "source": "TextEditNode.java:438"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.textmanipulation.TextEditNode$RootNode.performDo",
          "source": "TextEditNode.java:49"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.textmanipulation.TextBufferEditor.performEdits",
          "source": "TextBufferEditor.java:173"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.changes.TextChange.getPreviewTextBuffer",
          "source": "TextChange.java:187"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.changes.TextChange.getPreviewContent",
          "source": "TextChange.java:177"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.getCompareInput",
          "source": "PreviewWizardPage.java:236"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.getPreviewer",
          "source": "PreviewWizardPage.java:298"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.showPreview",
          "source": "PreviewWizardPage.java:429"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.access$2",
          "source": "PreviewWizardPage.java:427"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage$2.selectionChanged",
          "source": "PreviewWizardPage.java:418"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:147"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1153"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:903"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.setSelection",
          "source": "Viewer.java:342"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.setVisible",
          "source": "PreviewWizardPage.java:383"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.showPage",
          "source": "WizardDialog.java:888"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.nextPressed",
          "source": "WizardDialog.java:653"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:308"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:398"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:85"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:825"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1527"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1289"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:558"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:538"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:79"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.ExtractMethodAction.run",
          "source": "ExtractMethodAction.java:47"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:180"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:156"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:749"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:825"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1527"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1177"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1160"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:739"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:244"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:693"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:526"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "19335",
      "duplicateId": "18997",
      "date": "2002-06-05T16:55:51+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "18997",
  "bugId": "19335",
  "duplicateId": "18997",
  "date": "2002-06-05T16:55:51+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}