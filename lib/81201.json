{
  "comments": [
    "200412142000\n\nI\u0027ve been playing around with the dynamic plugin support while the PDE Runtime\nview is open.  New/removed plugins are detected immediately and are reflected in\nthe tree.  This is cool.  However at some point (I dont know when) I noticed the\ntree was \"empty\".  There were still nodes, but they have no labels.  When I\nclicked on one I got the following NPE.  Screen cap forthcoming. \nClosing/reopening the PDE Runtime view corrected the problem.\n\n!ENTRY org.eclipse.core.runtime 4 2 2004-12-15 11:11:16.375\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.core.internal.plugins.PluginDescriptor.getPluginPrerequisites(PluginDescriptor.java:214)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getFolderChildren(RegistryBrowserContentProvider.java:202)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.access$0(RegistryBrowserContentProvider.java:192)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider$PluginFolder.getChildren(RegistryBrowserContentProvider.java:42)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getChildren(RegistryBrowserContentProvider.java:129)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.hasChildren(RegistryBrowserContentProvider.java:228)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:1208)\n\tat org.eclipse.ui.part.DrillDownAdapter.canExpand(DrillDownAdapter.java:107)\n\tat org.eclipse.ui.part.DrillDownAdapter.canGoInto(DrillDownAdapter.java:142)\n\tat\norg.eclipse.ui.part.DrillDownAdapter.updateNavigationButtons(DrillDownAdapter.java:338)\n\tat org.eclipse.ui.part.DrillDownAdapter.selectionChanged(DrillDownAdapter.java:328)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:163)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:161)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1667)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:935)\n\tat\norg.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:961)\n\tat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:209)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:204)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:364)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2803)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1569)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1540)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:285)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:220)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:710)\n\tat org.eclipse.core.launcher.Main.main(Main.java:694)",
    "Created an attachment (id\u003d16651)\nThe bad view state\n",
    "Short story is that the plug-in registry will not work properly if clients hold\non to its objects (such as IPluginDescriptors) and dynamic changes occur. I\nopened bug 81322 to handle the issue in PDE/UI land. In our side, maybe we\nshould not be failing with a NPE, but other than failing with something else (an\nassertion failed exception) or just giving an wrong answer, I don\u0027t think we can\ndo any better.\n\nAny comments?",
    "not sure I understand why this bug report is in the PDE bucket if the npe is \ncoming from the runtime...",
    "My mistake. I changed my mind and opened a separate PR for PDE, but forgot to\nset the product/component accordingly.",
    "Marking as wontfix. We are making minimal changes in the compatibility layer and are encouraging users to move off the compatibility code.",
    "not even an NPE?",
    "Nope, its an NPE resulting from malformed user code calling methods on unsupported and stale classes.\n\nWe\u0027re happy to accept patches though if PDE feels strongly about supporting the compatibility layer forever and ever and ever and ever... :)",
    "The PDE team is pretty tied up right now doing ridiculous enhancement requests (bug 177773) for the core team ;)"
  ],
  "commentCreationDates": [
    "2004-12-15T16:15:39+01:00",
    "2004-12-15T16:16:34+01:00",
    "2004-12-15T21:26:00+01:00",
    "2004-12-15T21:32:33+01:00",
    "2004-12-15T21:53:08+01:00",
    "2007-03-29T21:52:06+02:00",
    "2007-03-29T21:58:57+02:00",
    "2007-03-29T22:24:52+02:00",
    "2007-03-29T22:28:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.getPluginPrerequisites",
          "source": "PluginDescriptor.java:214"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getFolderChildren",
          "source": "RegistryBrowserContentProvider.java:202"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.access$0",
          "source": "RegistryBrowserContentProvider.java:192"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider$PluginFolder.getChildren",
          "source": "RegistryBrowserContentProvider.java:42"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getChildren",
          "source": "RegistryBrowserContentProvider.java:129"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.hasChildren",
          "source": "RegistryBrowserContentProvider.java:228"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable",
          "source": "AbstractTreeViewer.java:1208"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.canExpand",
          "source": "DrillDownAdapter.java:107"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.canGoInto",
          "source": "DrillDownAdapter.java:142"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.updateNavigationButtons",
          "source": "DrillDownAdapter.java:338"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.selectionChanged",
          "source": "DrillDownAdapter.java:328"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:163"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:161"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1667"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:935"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:961"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:209"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:204"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:364"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2803"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2448"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1569"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1540"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:285"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:220"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:710"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:694"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "81201",
      "date": "2004-12-15T16:15:39+01:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    }
  ],
  "groupId": "81201",
  "bugId": "81201",
  "date": "2004-12-15T16:15:39+01:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "normal"
}