{
  "comments": [
    "Received java.lang.ArrayIndexOutOfBoundsException:\nwhen doing table.getColumn(0).dispose();\nNOTE:  This used to work.\n\nI have a table view that can be toggled\nbetween two formats, basic and extra.\nExtra has more columns than the basic  \nThe exception happened when switching from one format to other\nin the process of disposing old TableColumns.   \n\nHere is the stack trace.\n\n  java.lang.ArrayIndexOutOfBoundsException: -1\n\tat org.eclipse.swt.widgets.ImageList.get(ImageList.java:176)\n\tat org.eclipse.swt.widgets.Table.destroyItem(Table.java:523)\n\tat \norg.eclipse.swt.widgets.TableColumn.releaseChild(TableColumn.java:305)\n\tat org.eclipse.swt.widgets.Widget.dispose(Widget.java:371)\n\tat bug.views.SampleView.setFormatToExtra(SampleView.java:242)\n\tat bug.views.SampleView.access$2(SampleView.java:237)\n\tat bug.views.SampleView$1.run(SampleView.java:171)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionCont\nributionItem.java:456)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetEvent(ActionContribu\ntionItem.java:403)\n\tat \norg.eclipse.jface.action.ActionContributionItem.access$0(ActionContributionItem.\njava:397)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent(Actio\nnContributionItem.java:72)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1838)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1545)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\tat \norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:85\n8)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)\n\n\nFrom debugging, I found that value lvItem.iImage inside \nthe Table.destroyItem() became -1 \nafter the line marked by (1) was executed. This caused\nthe execption inside the ImageList.get() method (2).\nIn debug if I manually changed the value of lvItem.Image to\nlvItem.iItem or itemCount, then it worked.\n\n\nfor (int i\u003d0; i\u003citemCount; i++) {\n       lvItem.iItem \u003d i;\n       lvItem.iSubItem \u003d 1;\n(1)\u003d\u003d\u003e     OS.SendMessage (handle, OS.LVM_GETITEM, 0, lvItem);\n       lvItem.iSubItem \u003d 0;\n       OS.SendMessage (handle, OS.LVM_SETITEM, 0, lvItem);\n       TCHAR buffer \u003d new TCHAR (getCodePage (), cchTextMax);\n       OS.MoveMemory (buffer, pszText, byteCount);\n       items [i].text \u003d buffer.toString (0, buffer.strlen ());\n       if (imageList !\u003d null) {\n(2)\u003d\u003d\u003e     items [i].image \u003d imageList.get (lvItem.iImage);\n       }\n}\n\nI created a sample plugin that can be used to reproduce the problem. \nLet me know where I should send it to.",
    "Created an attachment (id\u003d5836)\nPlugin to reproduce the problem\n\nbug.jar contains a plugin and the source that can be used to produce the\nproblem. \nTo produce the problem:\n1). Unzip or unjar bug.jar into the eclipse folder. \n2). Restart Eclipse to load the plugin. \n3). Open the view by Window-\u003eShow view-\u003eOthers-\u003eSample Category-\u003eSample View.\n4). From the view, click the i icon at the top of right corner.      ",
    "\n\n*** This bug has been marked as a duplicate of 41420 ***"
  ],
  "commentCreationDates": [
    "2003-08-22T22:39:03+02:00",
    "2003-08-22T22:50:39+02:00",
    "2003-08-26T20:30:26+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-1",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.ImageList.get",
          "source": "ImageList.java:176"
        },
        {
          "method": "org.eclipse.swt.widgets.Table.destroyItem",
          "source": "Table.java:523"
        },
        {
          "method": "org.eclipse.swt.widgets.TableColumn.releaseChild",
          "source": "TableColumn.java:305"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.dispose",
          "source": "Widget.java:371"
        },
        {
          "method": "bug.views.SampleView.setFormatToExtra",
          "source": "SampleView.java:242"
        },
        {
          "method": "bug.views.SampleView.access$2",
          "source": "SampleView.java:237"
        },
        {
          "method": "bug.views.SampleView$1.run",
          "source": "SampleView.java:171"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionCont ributionItem.java:456"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContribu tionItem.java:403"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem. java:397"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "Actio nContributionItem.java:72"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1838"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1545"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:85 8"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "41886",
      "duplicateId": "41420",
      "date": "2003-08-22T22:39:03+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "critical"
    }
  ],
  "groupId": "41420",
  "bugId": "41886",
  "duplicateId": "41420",
  "date": "2003-08-22T22:39:03+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "critical"
}