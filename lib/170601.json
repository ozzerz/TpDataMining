{
  "comments": [
    "Build ID: M20060921-0945\n\nSteps To Reproduce:\n1. Create an RCP app with a PlatformRunnable\n2. Use PlatformUI.getWorkbench().restart() within the PlatformRunnable, before the event dispatcher is started\n\n\n\n\nMore information:\nThe workbench should check its state and throw an IllegalArgumentException or alike, not NPE.\n\n!ENTRY org.eclipse.ui.workbench 4 2 2007-01-16 10:30:14.632\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NullPointerException\nat org.eclipse.ui.internal.Workbench.getWorkbenchWindows(Workbench.java:1009)\nat org.eclipse.ui.internal.Workbench$13.run(Workbench.java:740)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.ui.internal.Workbench.saveAllEditors(Workbench.java:735)\nat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:655)\nat org.eclipse.ui.internal.Workbench.access$8(Workbench.java:639)\nat org.eclipse.ui.internal.Workbench$14.run(Workbench.java:839)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\nat org.eclipse.ui.internal.Workbench.close(Workbench.java:837)\nat org.eclipse.ui.internal.Workbench.restart(Workbench.java:1644)",
    "Can you give more details please?\n\nWhere did you call the restart? Is it in your activator code somewhere?\n\nWhich event dispatcher are you referring to?",
    "/* (non-Javadoc)\n\t * @see org.eclipse.core.runtime.IPlatformRunnable#run(java.lang.Object)\n\t */\n\tpublic Object run(Object args) throws Exception {\n\t\tDisplay display \u003d PlatformUI.createDisplay();\n\t\t\n\t\t// Bug 170601: Leads to NPE\n\t\tJob job \u003d new Job(\"Foo\") {\n\t\t\t@Override\n\t\t\tprotected IStatus run(IProgressMonitor monitor) {\n\t\t\t\tDisplay.getDefault().asyncExec(new Runnable(){\n\t\t\t\t\tpublic void run() {\n\t\t\t\t\t\tPlatformUI.getWorkbench().restart();\n\t\t\t\t\t}});\n\t\t\t\treturn Status.OK_STATUS;\n\t\t\t}\n\t\t};\n\t\tjob.schedule();\n\t\t\n\t\ttry {\n\t\t\tint returnCode \u003d PlatformUI.createAndRunWorkbench(display, new ApplicationWorkbenchAdvisor());\n\t\t\tif (returnCode \u003d\u003d PlatformUI.RETURN_RESTART) {\n\t\t\t\treturn IPlatformRunnable.EXIT_RESTART;\n\t\t\t}\n\t\t\treturn IPlatformRunnable.EXIT_OK;\n\t\t} finally {\n\t\t\tdisplay.dispose();\n\t\t}\n\t}"
  ],
  "commentCreationDates": [
    "2007-01-16T10:30:19+01:00",
    "2007-04-13T16:57:15+02:00",
    "2007-04-14T10:41:19+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.Workbench.getWorkbenchWindows",
          "source": "Workbench.java:1009"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$13.run",
          "source": "Workbench.java:740"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.saveAllEditors",
          "source": "Workbench.java:735"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:655"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$8",
          "source": "Workbench.java:639"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$14.run",
          "source": "Workbench.java:839"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:837"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.restart",
          "source": "Workbench.java:1644"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "170601",
      "date": "2007-01-16T10:30:19+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "170601",
  "bugId": "170601",
  "date": "2007-01-16T10:30:19+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}