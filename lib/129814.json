{
  "comments": [
    "We ran into the following NPE from SourceTypeConverter calling CharOperation.subarray:\n\njava.lang.NullPointerException\n    at org.eclipse.jdt.core.compiler.CharOperation.subarray(CharOperation.java:2675)\n    at org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.convertAnnotations(SourceTypeConverter.java:562)\n    at org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.convert(SourceTypeConverter.java:432)\n    at org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.convert(SourceTypeConverter.java:150)\n    at org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.buildCompilationUnit(SourceTypeConverter.java:89)\n    at org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve(HierarchyResolver.java:511)\n    at org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve(HierarchyResolver.java:486)\n    at org.eclipse.jdt.internal.core.hierarchy.HierarchyBuilder.buildSupertypes(HierarchyBuilder.java:119)\n    at org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build(IndexBasedHierarchyBuilder.java:134)\n    at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute(TypeHierarchy.java:320)\n    at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh(TypeHierarchy.java:1255)\n    at com.bea.wlw.netui.core.pageflow.model.PageFlowProject$2.run(PageFlowProject.java:281)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\nIt seems to have been caused by the getSource() call returning null, which I believe can happen if the underlying file is deleted at just the wrong time. \n\nI\u0027m afraid I don\u0027t have a repro for this -- it\u0027s only happened a couple times.\n\nI attempted a fix by checking the results of getSource(), but Frederic reported the following via email: \"SourceTypeConverter.getSource() should never return null. There\u0027s surely a real problem here and we must find the origin of it...\"",
    "+1 for 3.2RC2",
    "Indeed the only path that can lead to null being returned is if the compilation unit\u0027s buffer is closed while getContents() runs.",
    "Added null check in CompilationUnit#getContents() in the case of #IBuffer#getCharacters() returning null. In this case, returns an empty char array.\n\nCannot add a test case since this is a timing issue.",
    "Verified with I20060427-1600 for 3.2RC2"
  ],
  "commentCreationDates": [
    "2006-02-28T17:58:35+01:00",
    "2006-04-27T11:10:06+02:00",
    "2006-04-27T11:13:51+02:00",
    "2006-04-27T12:27:56+02:00",
    "2006-04-28T18:06:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.compiler.CharOperation.subarray",
          "source": "CharOperation.java:2675"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.convertAnnotations",
          "source": "SourceTypeConverter.java:562"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.convert",
          "source": "SourceTypeConverter.java:432"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.convert",
          "source": "SourceTypeConverter.java:150"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.SourceTypeConverter.buildCompilationUnit",
          "source": "SourceTypeConverter.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve",
          "source": "HierarchyResolver.java:511"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve",
          "source": "HierarchyResolver.java:486"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.HierarchyBuilder.buildSupertypes",
          "source": "HierarchyBuilder.java:119"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build",
          "source": "IndexBasedHierarchyBuilder.java:134"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute",
          "source": "TypeHierarchy.java:320"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh",
          "source": "TypeHierarchy.java:1255"
        },
        {
          "method": "com.bea.wlw.netui.core.pageflow.model.PageFlowProject$2.run",
          "source": "PageFlowProject.java:281"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "129814",
      "date": "2006-02-28T17:58:35+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "129814",
  "bugId": "129814",
  "date": "2006-02-28T17:58:35+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}