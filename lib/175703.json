{
  "comments": [
    "There are some memory leaks during execution of an ATL model transformation.\nHere is the report of Markus Herrmannsd?rfer:\n--------------------------------------------------------------\nI am trying to use ATL for model migration between two different versions of a metamodel.[...]\n\nMy first step was to generate a complete identity transformation and to run it on a big model (roughly 100.000 instances or 10 MB of XML data). Later the generated transformation should be edited in order to adjust it to the new metamodel version. The transformation takes 1:30 min which is not a problem, but about 100 MB of memory used during transformation will never be freed again (even after manually executing garbage collection). That means that I can only execute a small amount of transformation in a chain, before my eclipse instance runs out of memory.\n[...]\n--------------------------------------------------------------",
    "Created an attachment (id\u003d59875)\nSample project to test Memory Leak\n\nSample project provided by Markus Herrmannsd?rfer to test Memory Leak problems ",
    "The problem seems to solve itself when running the transformation through AM3 ant tasks: about 30 seconds after executing the build.xml file, you get your memory back ;-). That may be because Eclipse cleans up the mess after Ant runs :-/.",
    "Bug resolved:\n\n- OclType.subtypes was keeping a reference on each model element\n- Each metamodel was having a reference to every model conforming to him (ASMModel.submodels)",
    "Bug closed",
    "Thanks guys!  Is the fix in head?\n\n- ian",
    "Yes, it is in head ;)\n\n\n(In reply to comment #5)\n\u003e Thanks guys!  Is the fix in head?\n\u003e \n\u003e - ian\n\u003e \n\n",
    "After updating from cvs, I see a problem when executing the Families2Persons example. Sometimes it works, but more often it throws an exception (~80% of cases). The problem disappears if I replace org.atl.engine.repositories.emf4atl.ASMEMFModel.java (1.22) with the previous version (1.21) from cvs. Now the transformation always runs without error. The change in the dispose method seems to break something.\n\norg.eclipse.emf.ecore.resource.Resource$IOWrappedException: Class \u0027Family\u0027 not found. (platform:/resource/Families2Persons/sample-Families.ecore, 3, 28)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.handleErrors(XMLLoadImpl.java:80)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:189)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:179)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1094)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:900)\n\tat org.atl.engine.repositories.emf4atl.ASMEMFModel.loadASMEMFModel(ASMEMFModel.java:332)\n\tat org.atl.eclipse.engine.AtlEMFModelHandler.loadModel(AtlEMFModelHandler.java:122)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.loadModel(AtlLaunchConfigurationDelegate.java:275)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.getSourceModels(AtlLaunchConfigurationDelegate.java:333)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:205)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:168)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:145)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:121)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.launch(AtlLaunchConfigurationDelegate.java:97)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:639)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:565)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:754)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:944)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\nCaused by: org.eclipse.emf.ecore.xmi.ClassNotFoundException: Class \u0027Family\u0027 not found. (platform:/resource/Families2Persons/sample-Families.ecore, 3, 28)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.validateCreateObjectFromFactory(XMLHandler.java:1993)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectByType(XMLHandler.java:1170)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.createTopObject(XMLHandler.java:1239)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement(XMLHandler.java:877)\n\tat org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement(XMIHandler.java:82)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:860)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:627)\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat javax.xml.parsers.SAXParser.parse(Unknown Source)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:179)\n\t... 17 more\njava.lang.NullPointerException\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.getSourceModels(AtlLaunchConfigurationDelegate.java:335)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:205)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:168)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:145)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher(AtlLaunchConfigurationDelegate.java:121)\n\tat org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.launch(AtlLaunchConfigurationDelegate.java:97)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:639)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:565)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:754)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:944)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "I reopen the bug and look at this problem.",
    "I found that the problem is not in the dispose() method but in adaptMetamodel in line 371. It should be nsURI \u003d p.getName(); instead of nsURI \u003d model.getName();\n\nWith this change the Families2Persons transformation works as expected without throwing exceptions.",
    "Yes. I found it too. I commited the corrected version of ASMEMFModel.adaptMetamodel().\n\nThe model.getName() was a previous test for myself, and i forgot to replace it with the original version. Sorry.\n\nThanks for your help.\n\nI am waiting for your reply to change this from re-open to fixed.\n\nBest regards,\nMikael\n\n(In reply to comment #9)\n\u003e I found that the problem is not in the dispose() method but in adaptMetamodel\n\u003e in line 371. It should be nsURI \u003d p.getName(); instead of nsURI \u003d\n\u003e model.getName();\n\u003e \n\u003e With this change the Families2Persons transformation works as expected without\n\u003e throwing exceptions.\n\u003e \n\n",
    "It works for me now.\n\n(In reply to comment #10)\n\u003e Yes. I found it too. I commited the corrected version of\n\u003e ASMEMFModel.adaptMetamodel().\n\u003e \n\u003e The model.getName() was a previous test for myself, and i forgot to replace it\n\u003e with the original version. Sorry.\n\u003e \n\u003e Thanks for your help.\n\u003e \n\u003e I am waiting for your reply to change this from re-open to fixed.\n\u003e \n\u003e Best regards,\n\u003e Mikael\n",
    "Thanks ;)\n\n(In reply to comment #11)\n\u003e It works for me now.\n\u003e "
  ],
  "commentCreationDates": [
    "2007-02-27T14:24:19+01:00",
    "2007-02-27T14:26:50+01:00",
    "2007-03-01T13:05:18+01:00",
    "2007-03-01T16:49:06+01:00",
    "2007-03-01T16:50:45+01:00",
    "2007-03-01T17:00:52+01:00",
    "2007-03-01T17:02:13+01:00",
    "2007-03-02T01:12:29+01:00",
    "2007-03-02T12:08:41+01:00",
    "2007-03-02T13:11:35+01:00",
    "2007-03-02T13:32:47+01:00",
    "2007-03-02T14:21:04+01:00",
    "2007-03-02T14:22:15+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.emf.ecore.resource.Resource$IOWrappedException",
      "message": "Class \u0027Family\u0027 not found. (platform:/resource/Families2Persons/sample-Families.ecore, 3, 28)",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.handleErrors",
          "source": "XMLLoadImpl.java:80"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load",
          "source": "XMLLoadImpl.java:189"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad",
          "source": "XMLResourceImpl.java:179"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1094"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:900"
        },
        {
          "method": "org.atl.engine.repositories.emf4atl.ASMEMFModel.loadASMEMFModel",
          "source": "ASMEMFModel.java:332"
        },
        {
          "method": "org.atl.eclipse.engine.AtlEMFModelHandler.loadModel",
          "source": "AtlEMFModelHandler.java:122"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.loadModel",
          "source": "AtlLaunchConfigurationDelegate.java:275"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.getSourceModels",
          "source": "AtlLaunchConfigurationDelegate.java:333"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:205"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:168"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:145"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:121"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.launch",
          "source": "AtlLaunchConfigurationDelegate.java:97"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:639"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:565"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:754"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin$6.run",
          "source": "DebugUIPlugin.java:944"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.emf.ecore.xmi.ClassNotFoundException",
        "message": "Class \u0027Family\u0027 not found. (platform:/resource/Families2Persons/sample-Families.ecore, 3, 28)",
        "elements": [
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.validateCreateObjectFromFactory",
            "source": "XMLHandler.java:1993"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectByType",
            "source": "XMLHandler.java:1170"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.createTopObject",
            "source": "XMLHandler.java:1239"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement",
            "source": "XMLHandler.java:877"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement",
            "source": "XMIHandler.java:82"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement",
            "source": "XMLHandler.java:860"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement",
            "source": "XMLHandler.java:627"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.parsers.XMLParser.parse",
            "source": "Unknown Source"
          },
          {
            "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse",
            "source": "Unknown Source"
          },
          {
            "method": "javax.xml.parsers.SAXParser.parse",
            "source": "Unknown Source"
          },
          {
            "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load",
            "source": "XMLLoadImpl.java:179"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 7,
      "bugId": "175703",
      "date": "2007-03-02T01:12:29+01:00",
      "product": "GMT",
      "component": "ATL",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.getSourceModels",
          "source": "AtlLaunchConfigurationDelegate.java:335"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:205"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:168"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:145"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.runAtlLauncher",
          "source": "AtlLaunchConfigurationDelegate.java:121"
        },
        {
          "method": "org.atl.eclipse.adt.launching.AtlLaunchConfigurationDelegate.launch",
          "source": "AtlLaunchConfigurationDelegate.java:97"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:639"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:565"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:754"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin$6.run",
          "source": "DebugUIPlugin.java:944"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 7,
      "bugId": "175703",
      "date": "2007-03-02T01:12:29+01:00",
      "product": "GMT",
      "component": "ATL",
      "severity": "normal"
    }
  ],
  "groupId": "175703",
  "bugId": "175703",
  "date": "2007-02-27T14:24:19+01:00",
  "product": "GMT",
  "component": "ATL",
  "severity": "normal"
}