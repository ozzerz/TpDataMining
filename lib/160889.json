{
  "comments": [
    "Using BIRT 2.1.1, am unable to reference and use IReportContext from IChartScriptContext in beforeGeneration() event in my Java custom chart event handlers when using the BIRT designer preview.  Attempts to access the context results in NoClassDefFoundError for IReportContext.  I have no problem accessing IReportContext from custom event handlers for datasets.\n\nIs there any workaround for this issue?  Switching to a Javascript-based event handler is not a suitable option for us because of the lack of debugging options, and the complexity of the logic involved in the custom handler (my concrete Java chart event handlers are extending an abstract chart event handler class which extends ChartEventHandlerAdapter).  I tried manually adding scriptapi.jar to {viewer plugin dir}/birt/WEB-INF/lib, but then I get display errors indicating that my dataset event handlers don\u0027t implement the event handler interfaces (which they do).  I\u0027ve also tried using the Scriptable directly, but don\u0027t see a way to invoke the underlying methods from Java without the Mozilla Rhino Context object.\n\nHere\u0027s the stacktrace when I log the error being thrown:\n\n$NO-RB$ java.lang.NoClassDefFoundError: org/eclipse/birt/report/engine/api/script/IReportContext \njava.lang.NoClassDefFoundError: org/eclipse/birt/report/engine/api/script/IReportContext ( 1 time(s) )\ndetail : org.eclipse.birt.chart.exception.ChartException: $NO-RB$ java.lang.NoClassDefFoundError: org/eclipse/birt/report/engine/api/script/IReportContext at org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:537) at org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.processExtendedContent(LocalizedContentVisitor.java:651) at org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.visitForeign(LocalizedContentVisitor.java:359) at org.eclipse.birt.report.engine.content.impl.ForeignContent.accept(ForeignContent.java:58) at org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.localize(LocalizedContentVisitor.java:111) at org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute(LocalizedReportItemExecutor.java:38) at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:123) at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81) at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:80) at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:194) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute(Unknown Source) at org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(Unknown Source) at org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet(Unknown Source) at org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown Source) at javax.servlet.http.HttpServlet.service(HttpServlet.java:740) at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2422) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke(EclipseErrorReportValve.java:153) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:700) at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:584) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683) at java.lang.Thread.run(Unknown Source)Caused by: java.lang.RuntimeException: java.lang.NoClassDefFoundError: org/eclipse/birt/report/engine/api/script/IReportContext at MyChartEventHandler.beforeGeneration(MyChartEventHandler.java:36) at org.eclipse.birt.chart.script.ScriptHandler.callJavaFunction(ScriptHandler.java:811) at org.eclipse.birt.chart.script.ScriptHandler.callFunction(ScriptHandler.java:1033) at org.eclipse.birt.chart.factory.Generator.build(Generator.java:880) at org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:453) ... 52 moreCaused by: java.lang.NoClassDefFoundError: org/eclipse/birt/report/engine/api/script/IReportContext at MyChartEventHandler.beforeGeneration(MyChartEventHandler.java:29) ... 56 more",
    "Created an attachment (id\u003d51949)\nchart event handler Java class illustrating classpath issue\n\n",
    "Created an attachment (id\u003d51950)\nsample report design with chart that uses Java chart event handler\n\n",
    "Classloader issue?",
    "This requires a new API to access the application class loader from \nIReportItemPresentation and IReportItemGeneration interfaces. Reassigning to \nengine team to provide new methods to access this classloader. Please re-assign \nback to me when done, so I can complete the fix.",
    "the chart can get the application class loader from ReportItemPresentationBase \u0026 ReportItemGenerationBase.",
    "Please set this classloader to RuntimeContext.setScriptClassLoader()",
    "Fixed by replacing chart script classLoader with report engine?s application classLoader."
  ],
  "commentCreationDates": [
    "2006-10-13T18:04:45+02:00",
    "2006-10-13T18:08:20+02:00",
    "2006-10-13T18:09:15+02:00",
    "2006-10-13T18:52:03+02:00",
    "2006-11-13T13:01:08+01:00",
    "2006-11-14T19:22:34+01:00",
    "2006-11-15T09:14:24+01:00",
    "2006-11-16T09:12:16+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/birt/report/engine/api/script/IReportContext",
      "elements": [
        {
          "method": "org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets",
          "source": "ChartReportItemPresentationImpl.java:537"
        },
        {
          "method": "org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.processExtendedContent",
          "source": "LocalizedContentVisitor.java:651"
        },
        {
          "method": "org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.visitForeign",
          "source": "LocalizedContentVisitor.java:359"
        },
        {
          "method": "org.eclipse.birt.report.engine.content.impl.ForeignContent.accept",
          "source": "ForeignContent.java:58"
        },
        {
          "method": "org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.localize",
          "source": "LocalizedContentVisitor.java:111"
        },
        {
          "method": "org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute",
          "source": "LocalizedReportItemExecutor.java:38"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren",
          "source": "HTMLPageLM.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout",
          "source": "HTMLPageLM.java:81"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:80"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:194"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:740"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:853"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:247"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:193"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:256"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:191"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.CertificatesValve.invoke",
          "source": "CertificatesValve.java:246"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContext.invoke",
          "source": "StandardContext.java:2422"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:180"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.ErrorDispatcherValve.invoke",
          "source": "ErrorDispatcherValve.java:171"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke",
          "source": "EclipseErrorReportValve.java:153"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:174"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.coyote.tomcat4.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:199"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:828"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:700"
        },
        {
          "method": "org.apache.tomcat.util.net.TcpWorkerThread.runIt",
          "source": "PoolTcpEndpoint.java:584"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:683"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "160889",
      "date": "2006-10-13T18:04:45+02:00",
      "product": "BIRT",
      "component": "Chart",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/birt/report/engine/api/script/IReportContext",
      "elements": [
        {
          "method": "MyChartEventHandler.beforeGeneration",
          "source": "MyChartEventHandler.java:36"
        },
        {
          "method": "org.eclipse.birt.chart.script.ScriptHandler.callJavaFunction",
          "source": "ScriptHandler.java:811"
        },
        {
          "method": "org.eclipse.birt.chart.script.ScriptHandler.callFunction",
          "source": "ScriptHandler.java:1033"
        },
        {
          "method": "org.eclipse.birt.chart.factory.Generator.build",
          "source": "Generator.java:880"
        },
        {
          "method": "org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets",
          "source": "ChartReportItemPresentationImpl.java:453"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "160889",
      "date": "2006-10-13T18:04:45+02:00",
      "product": "BIRT",
      "component": "Chart",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/birt/report/engine/api/script/IReportContext",
      "elements": [
        {
          "method": "MyChartEventHandler.beforeGeneration",
          "source": "MyChartEventHandler.java:29"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "160889",
      "date": "2006-10-13T18:04:45+02:00",
      "product": "BIRT",
      "component": "Chart",
      "severity": "normal"
    }
  ],
  "groupId": "160889",
  "bugId": "160889",
  "date": "2006-10-13T18:04:45+02:00",
  "product": "BIRT",
  "component": "Chart",
  "severity": "normal"
}