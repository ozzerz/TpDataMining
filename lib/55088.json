{
  "comments": [
    "I200403161300 + new code to use AST on reconcile\n\nI saw this in .log but have no steps to reproduce:\n\njava.lang.IllegalArgumentException\n\tat org.eclipse.jdt.core.dom.NumberLiteral.setToken(NumberLiteral.java:184)\n\tat org.eclipse.jdt.core.dom.AST.newNumberLiteral(AST.java:2603)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1369)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:873)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2028)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1794)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:758)\n\tat\norg.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:330)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:268)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:146)\n\tat org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:233)\n\tat\norg.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:77)\n\tat\norg.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)\n\tat\norg.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)\n\tat\norg.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1043)\n\tat\norg.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:75)\n\tat\norg.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:129)\n\tat\norg.eclipse.jface.text.reconciler.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:111)\n\tat\norg.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:123)\n\tat\norg.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)\n\tat\norg.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)",
    "We need a test case for this one.\nIt looks like the DOM/AST is created on a compilation unit that has a number\nliteral that starts with - followed by something else than\nTerminalTokens.TokenNameDoubleLiteral, TerminalTokens.TokenNameIntegerLiteral,\nTerminalTokens.TokenNameFloatingPointLiteral, or\nTerminalTokens.TokenNameLongLiteral.\n\nThis is not legal and this is why it is failing. I need a test case to find out\nwhy we do end up creating the DOM/AST in this case.",
    "As stated in my initial comment I have no steps. I assume that as soon as we\nrelease our code to use reconcile(true, ...) we will see more of those.\n",
    "*** Bug 56228 has been marked as a duplicate of this bug. ***",
    "I added extra logging in HEAD to track this one down.\nCould it be possible that the working copy contents changes during the conversion?",
    "I think the problem is coming from the ReconcileWorkingCopyOperation.\nLine 73 a compilation unit is built using the source of the working copy.\nThe source is retrieved again line 77. The problem is that between these two\nlines the source might have changed. And this could lead to such errors while\nconverting the compilation unit.\nThe same source has to be used for the creation of the compilation unit AND the\nconversion of the same compilation unit.\n\nJerome, what do you think?",
    "*** Bug 56906 has been marked as a duplicate of this bug. ***",
    "Thanks Olivier.\nChanged ReconcileWorkingCopyOperation.executeOperation() and \nCompilation.buildStructure(...) to pass in the same contents to the problem \nfinder and to the AST converter.",
    "Verified for 3.0 M9 with build I200405180816.\n\nNote that comment 7 should read: CompilationUnit.buildStructure(...) - in\norg.eclipse.jdt.internal.core package - instead of Compilation.buildStructure(...)\n"
  ],
  "commentCreationDates": [
    "2004-03-17T13:06:38+01:00",
    "2004-03-18T18:55:46+01:00",
    "2004-03-19T08:31:25+01:00",
    "2004-03-25T20:21:03+01:00",
    "2004-03-31T19:47:43+02:00",
    "2004-03-31T19:56:44+02:00",
    "2004-03-31T23:56:28+02:00",
    "2004-04-01T12:57:22+02:00",
    "2004-05-18T17:18:05+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.NumberLiteral.setToken",
          "source": "NumberLiteral.java:184"
        },
        {
          "method": "org.eclipse.jdt.core.dom.AST.newNumberLiteral",
          "source": "AST.java:2603"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1369"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:873"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2028"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1794"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:758"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations",
          "source": "ASTConverter.java:330"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:268"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:146"
        },
        {
          "method": "org.eclipse.jdt.core.dom.AST.convertCompilationUnit",
          "source": "AST.java:233"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:77"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:700"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:739"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1043"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile",
          "source": "JavaReconcilingStrategy.java:129"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.CompositeReconcilingStrategy.initialReconcile",
          "source": "CompositeReconcilingStrategy.java:111"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile",
          "source": "JavaCompositeReconcilingStrategy.java:123"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess",
          "source": "MonoReconciler.java:104"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:155"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "55088",
      "date": "2004-03-17T13:06:38+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "55088",
  "bugId": "55088",
  "date": "2004-03-17T13:06:38+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}