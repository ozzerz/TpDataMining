{
  "comments": [
    "I20070724-0800\n\nGiven:\nP01 (normal project)\n folder\n\nP02 (java project)\n src (source folder)\n\n1. Select folder\n2. Refactor\u003eMove...\n3. Select \u0027src\u0027\n4. Ok\nIs:\n!ENTRY org.eclipse.ui 4 0 2007-07-31 16:03:38.810\n!MESSAGE Unhandled event loop exception\n!STACK 0\njava.lang.IllegalArgumentException: The map does not contain the attribute \u0027target\u0027\n\tat org.eclipse.jdt.internal.core.refactoring.descriptors.JavaRefactoringDescriptorUtil.getString(JavaRefactoringDescriptorUtil.java:149)\n\tat org.eclipse.jdt.internal.core.refactoring.descriptors.JavaRefactoringDescriptorUtil.getString(JavaRefactoringDescriptorUtil.java:168)\n\tat org.eclipse.jdt.internal.core.refactoring.descriptors.JavaRefactoringDescriptorUtil.getResource(JavaRefactoringDescriptorUtil.java:316)\n\tat org.eclipse.jdt.core.refactoring.descriptors.MoveDescriptor.\u003cinit\u003e(MoveDescriptor.java:164)\n\tat org.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$MoveFilesFoldersAndCusPolicy.createRefactoringDescriptor(ReorgPolicyFactory.java:1229)\n\tat org.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$FilesFoldersAndCusReorgPolicy.getDescriptor(ReorgPolicyFactory.java:821)\n\tat org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.getDescriptor(JavaMoveProcessor.java:124)\n\tat org.eclipse.ltk.core.refactoring.CompositeChange.getDescriptor(CompositeChange.java:483)\n\tat org.eclipse.ltk.core.refactoring.CreateChangeOperation.getChange(CreateChangeOperation.java:148)\n\tat org.eclipse.ltk.ui.refactoring.UserInputWizardPage.performFinish(UserInputWizardPage.java:155)\n\tat org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveWizard$MoveInputPage.performFinish(ReorgMoveWizard.java:109)\n\tat org.eclipse.ltk.ui.refactoring.RefactoringWizard.performFinish(RefactoringWizard.java:619)\n\tat org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.okPressed(RefactoringWizardDialog2.java:439)\n\tat org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:469)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:621)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3688)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3299)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:825)\n\tat org.eclipse.jface.window.Window.open(Window.java:801)\n\tat org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:142)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:154)\n\tat org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:49)\n\tat org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startMoveRefactoring(RefactoringExecutionStarter.java:394)\n\tat org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveAction.run(ReorgMoveAction.java:107)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:268)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:244)\n\tat org.eclipse.jdt.ui.actions.MoveAction.run(MoveAction.java:127)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:268)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:244)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:498)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3688)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3299)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:169)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:508)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:447)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1173)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1148)\n\n\nReason seams to be that the java element destination is retrieved from project P01 instead from P02 in org.eclipse.jdt.core.refactoring.descriptors.MoveDescriptor.MoveDescriptor(String, String, String, Map, int)\n\nI didn\u0027t change the ChangeDesriptor creation.",
    "This is a blocker for me.",
    "Markus, If I revert your changes in MoveDescriptor it works again. ",
    "Must be due to bug 194979",
    "The problem is that the target is a java project and thus the destination is a IJavaElement. But the IJavaElement can not be resolved because the project stored in the descriptor is the source project which does not have src folder. The destination should contain the target project if it differs from the src project.",
    "Reverting the changes from bug 194979 does result in a invalid descriptor which will just popup when you try to re-use it from the refactoring history. I will see what I can do, but it definitely will be a temporarily fix because the main problem lies in the architecture of serializing the descriptor.",
    "The Move refactoring must be usable in M1. The refactoring script functionality is less important.",
    "Created an attachment (id\u003d75436)\nTEMPORARILY Patch\n\nThis patch is quite inefficient and should only be used until Markus gets the final patch out.",
    "\n\n*** This bug has been marked as a duplicate of bug 196307 ***"
  ],
  "commentCreationDates": [
    "2007-07-31T16:08:51+02:00",
    "2007-08-06T16:02:48+02:00",
    "2007-08-06T16:17:37+02:00",
    "2007-08-06T16:18:34+02:00",
    "2007-08-06T16:53:09+02:00",
    "2007-08-06T16:57:16+02:00",
    "2007-08-06T17:12:05+02:00",
    "2007-08-06T17:16:42+02:00",
    "2007-08-06T21:00:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "The map does not contain the attribute \u0027target\u0027",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.refactoring.descriptors.JavaRefactoringDescriptorUtil.getString",
          "source": "JavaRefactoringDescriptorUtil.java:149"
        },
        {
          "method": "org.eclipse.jdt.internal.core.refactoring.descriptors.JavaRefactoringDescriptorUtil.getString",
          "source": "JavaRefactoringDescriptorUtil.java:168"
        },
        {
          "method": "org.eclipse.jdt.internal.core.refactoring.descriptors.JavaRefactoringDescriptorUtil.getResource",
          "source": "JavaRefactoringDescriptorUtil.java:316"
        },
        {
          "method": "org.eclipse.jdt.core.refactoring.descriptors.MoveDescriptor.\u003cinit\u003e",
          "source": "MoveDescriptor.java:164"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$MoveFilesFoldersAndCusPolicy.createRefactoringDescriptor",
          "source": "ReorgPolicyFactory.java:1229"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$FilesFoldersAndCusReorgPolicy.getDescriptor",
          "source": "ReorgPolicyFactory.java:821"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.getDescriptor",
          "source": "JavaMoveProcessor.java:124"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.CompositeChange.getDescriptor",
          "source": "CompositeChange.java:483"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.CreateChangeOperation.getChange",
          "source": "CreateChangeOperation.java:148"
        },
        {
          "method": "org.eclipse.ltk.ui.refactoring.UserInputWizardPage.performFinish",
          "source": "UserInputWizardPage.java:155"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveWizard$MoveInputPage.performFinish",
          "source": "ReorgMoveWizard.java:109"
        },
        {
          "method": "org.eclipse.ltk.ui.refactoring.RefactoringWizard.performFinish",
          "source": "RefactoringWizard.java:619"
        },
        {
          "method": "org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.okPressed",
          "source": "RefactoringWizardDialog2.java:439"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.buttonPressed",
          "source": "Dialog.java:469"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:621"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:227"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3688"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3299"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:825"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:801"
        },
        {
          "method": "org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run",
          "source": "RefactoringWizardOpenOperation.java:142"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run",
          "source": "RefactoringWizardOpenOperation.java:154"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:49"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startMoveRefactoring",
          "source": "RefactoringExecutionStarter.java:394"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveAction.run",
          "source": "ReorgMoveAction.java:107"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:268"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:244"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.MoveAction.run",
          "source": "MoveAction.java:127"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:268"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:244"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:498"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3688"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3299"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:169"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:508"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:447"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1173"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1148"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "198399",
      "duplicateId": "196307",
      "date": "2007-07-31T16:08:51+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "blocker"
    }
  ],
  "groupId": "196307",
  "bugId": "198399",
  "duplicateId": "196307",
  "date": "2007-07-31T16:08:51+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "blocker"
}