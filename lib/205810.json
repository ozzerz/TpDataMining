{
  "comments": [
    "trying to edit (or view) MYSQL  tables that contain foreign keys, throw a stack overflow exception (see below)\nThe problem is that in \"MySqlCatalogTable\" class there is an infinite calls loop between loadForeignKey, getPrimaryKey and loadConstraints.\n\nthe following change seems to solve the problem (since it avoids the call to the local getConstraints() and it calls the \"super\" one)\n\nREPLACE :\npublic PrimaryKey getPrimaryKey() {\n\tif (!this.pkLoaded)\n\t\tthis.loadPrimaryKey();\n\treturn super.getPrimaryKey();\n}\n\nWITH:\n\npublic PrimaryKey getPrimaryKey() {\n\tif (!this.pkLoaded)\n\t\tthis.loadPrimaryKey();\n\treturn doGetPrimaryKey();\n}\n\nprivate PrimaryKey doGetPrimaryKey() {\n\tIterator allConstraints \u003d super.getConstraints().iterator();\n\twhile( allConstraints.hasNext() ) {\n   \t     Constraint currentConstraint \u003d (Constraint)allConstraints.next();\n\t     if (currentConstraint instanceof PrimaryKey) {\n\t\treturn (PrimaryKey)currentConstraint;\n  \t     }\n\t}\n\treturn null;\n}\n\nTHE EXCEPTION:\n\njava.lang.StackOverflowError\n\tat com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:188)\n\tat com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1994)\n\tat com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:885)\n\tat com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1360)\n\tat com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2358)\n\tat com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:451)\n\tat com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2076)\n\tat com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1451)\n\tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1787)\n\tat com.mysql.jdbc.Connection.execSQL(Connection.java:3250)\n\tat com.mysql.jdbc.Connection.execSQL(Connection.java:3179)\n\tat com.mysql.jdbc.Statement.executeQuery(Statement.java:1207)\n\tat com.mysql.jdbc.DatabaseMetaData.extractForeignKeyFromCreateTable(DatabaseMetaData.java:1141)\n\tat com.mysql.jdbc.DatabaseMetaData$5.forEach(DatabaseMetaData.java:3231)\n\tat com.mysql.jdbc.DatabaseMetaData$IterateBlock.doForAll(DatabaseMetaData.java:76)\n\tat com.mysql.jdbc.DatabaseMetaData.getImportedKeys(DatabaseMetaData.java:3219)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:338)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints(MySqlCatalogTable.java:110)\n\tat org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey(BaseTableImpl.java:163)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey(MySqlCatalogTable.java:88)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey(MySqlCatalogTable.java:360)\n\tat org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints(MySqlCatalogTable.java:281)..........",
    "I this this is a duplicate of bug 204368.",
    "Created an attachment (id\u003d85178)\nthis patch is the same on described in the bug (with diff)\n\n"
  ],
  "commentCreationDates": [
    "2007-10-09T14:46:51+02:00",
    "2007-11-06T09:48:20+01:00",
    "2007-12-13T14:33:53+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StackOverflowError",
      "elements": [
        {
          "method": "com.mysql.jdbc.util.ReadAheadInputStream.read",
          "source": "ReadAheadInputStream.java:188"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.readFully",
          "source": "MysqlIO.java:1994"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.reuseAndReadPacket",
          "source": "MysqlIO.java:2411"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.checkErrorPacket",
          "source": "MysqlIO.java:2916"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.checkErrorPacket",
          "source": "MysqlIO.java:885"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.nextRow",
          "source": "MysqlIO.java:1360"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.readSingleRowSet",
          "source": "MysqlIO.java:2358"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.getResultSet",
          "source": "MysqlIO.java:451"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate",
          "source": "MysqlIO.java:2076"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.readAllResults",
          "source": "MysqlIO.java:1451"
        },
        {
          "method": "com.mysql.jdbc.MysqlIO.sqlQueryDirect",
          "source": "MysqlIO.java:1787"
        },
        {
          "method": "com.mysql.jdbc.Connection.execSQL",
          "source": "Connection.java:3250"
        },
        {
          "method": "com.mysql.jdbc.Connection.execSQL",
          "source": "Connection.java:3179"
        },
        {
          "method": "com.mysql.jdbc.Statement.executeQuery",
          "source": "Statement.java:1207"
        },
        {
          "method": "com.mysql.jdbc.DatabaseMetaData.extractForeignKeyFromCreateTable",
          "source": "DatabaseMetaData.java:1141"
        },
        {
          "method": "com.mysql.jdbc.DatabaseMetaData$5.forEach",
          "source": "DatabaseMetaData.java:3231"
        },
        {
          "method": "com.mysql.jdbc.DatabaseMetaData$IterateBlock.doForAll",
          "source": "DatabaseMetaData.java:76"
        },
        {
          "method": "com.mysql.jdbc.DatabaseMetaData.getImportedKeys",
          "source": "DatabaseMetaData.java:3219"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:338"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getConstraints",
          "source": "MySqlCatalogTable.java:110"
        },
        {
          "method": "org.eclipse.datatools.modelbase.sql.tables.impl.BaseTableImpl.getPrimaryKey",
          "source": "BaseTableImpl.java:163"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.getPrimaryKey",
          "source": "MySqlCatalogTable.java:88"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadForeignKey",
          "source": "MySqlCatalogTable.java:360"
        },
        {
          "method": "org.eclipse.datatools.enablement.mysql.catalog.MySqlCatalogTable.loadConstraints",
          "source": "MySqlCatalogTable.java:281"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "205810",
      "date": "2007-10-09T14:46:51+02:00",
      "product": "Data Tools",
      "component": "Enablement",
      "severity": "normal"
    }
  ],
  "groupId": "205810",
  "bugId": "205810",
  "date": "2007-10-09T14:46:51+02:00",
  "product": "Data Tools",
  "component": "Enablement",
  "severity": "normal"
}