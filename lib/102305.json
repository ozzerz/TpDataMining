{
  "comments": [
    "I have seen this worrying message in the Eclipse log file:\n\nError in JDT Core during reconcile\n\njava.lang.NullPointerException\nat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1127)\nat org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:261)\nat\norg.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:84)\nat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:718)\nat\norg.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:777)\nat\norg.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1081)\nat\norg.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:98)\nat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\nat org.eclipse.core.runtime.Platform.run(Platform.java:783)\nat\norg.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:82)\nat\norg.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:147)\nat\norg.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)\nat\norg.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:94)\nat org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:75)\nat org.eclipse.jdt.internal.ui.text.JavaReconciler.process(JavaReconciler.java:339)\nat\norg.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:204)",
    "Would you have steps to reproduce?\nThis can only happen if the working copy has no source.",
    "I think the problem comes from the getContents() method on ICompilationUnit.\nRight now we have:\npublic char[] getContents() {\n\ttry {\n\t\tIBuffer buffer \u003d this.getBuffer();\n\t\treturn buffer \u003d\u003d null ? null : buffer.getCharacters();\n\t} catch (JavaModelException e) {\n\t\treturn CharOperation.NO_CHAR;\n\t}\n}\ninstead of:\npublic char[] getContents() {\n\ttry {\n\t\tIBuffer buffer \u003d this.getBuffer();\n\t\treturn buffer \u003d\u003d null ? CharOperation.NO_CHAR : buffer.getCharacters();\n\t} catch (JavaModelException e) {\n\t\treturn CharOperation.NO_CHAR;\n\t}\n}\n",
    "Philippe, this might be a good candidate for 3.1.1.\nI believe getContents() should never return null, but an empty array. Right now\nthe implementation is clearly inconsistent.",
    "Ok, though I wonder how this got introduced.\nWe may want to check with Jerome.",
    "Probable cause: using Jadclipse plugin not prepared for Eclipse 3.1",
    "Fixed and released in 3.1. maintenance stream.\nNo regression test added as this is a case where no buffer is available.\n\nJ?r?me, please comment if this is not desired, but there is no null check for\nthe result of getContents(). So I am tempted to believe that null should not be\nreturned.",
    "The fix is correct. The bug was introduced with revision 1.70 when changing\ngetBuffer() to possibly return null.",
    "Verified with 3.2 M1",
    "Verified for 3.1.1 using build M20050923-1430.\n\nSee bug 110771 for fup on related concerns."
  ],
  "commentCreationDates": [
    "2005-06-30T14:18:37+02:00",
    "2005-06-30T15:30:11+02:00",
    "2005-06-30T16:45:13+02:00",
    "2005-06-30T23:12:27+02:00",
    "2005-06-30T23:50:39+02:00",
    "2005-07-01T07:59:12+02:00",
    "2005-07-01T18:15:38+02:00",
    "2005-08-09T14:52:21+02:00",
    "2005-08-09T14:52:44+02:00",
    "2005-09-27T11:43:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1127"
        },
        {
          "method": "org.eclipse.jdt.core.dom.AST.convertCompilationUnit",
          "source": "AST.java:261"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:84"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:718"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:777"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1081"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run",
          "source": "JavaReconcilingStrategy.java:98"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:147"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile",
          "source": "CompositeReconcilingStrategy.java:86"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile",
          "source": "JavaCompositeReconcilingStrategy.java:94"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.process",
          "source": "MonoReconciler.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaReconciler.process",
          "source": "JavaReconciler.java:339"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:204"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "102305",
      "date": "2005-06-30T14:18:37+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "102305",
  "bugId": "102305",
  "date": "2005-06-30T14:18:37+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}