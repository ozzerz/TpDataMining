{
  "comments": [
    "I have a feature that includes a linux, win32, nl1, and nl2 child features \n(listed in that order). When installing the feature on a win32 platform, an \nArrayStoreException (see trace below) is thrown which causes the feature to be \ndisabled.\n\njava.lang.ArrayStoreException\n\tat java.util.ArrayList.toArray(ArrayList.java:337)\n\tat org.eclipse.update.core.Feature.getRawIncludedFeatureReferences\n(Feature.java:631)\n\tat org.eclipse.update.core.Feature.getIncludedFeatureReferences\n(Feature.java:1039)\n\tat org.eclipse.update.internal.core.ConfiguredSite.configure\n(ConfiguredSite.java:247)\n\tat org.eclipse.update.internal.core.ConfiguredSite.install\n(ConfiguredSite.java:157)\n\tat org.eclipse.update.internal.core.ConfiguredSite.install\n(ConfiguredSite.java:86)\n\tat org.eclipse.update.internal.operations.InstallOperation.execute\n(InstallOperation.java:72)\n\tat com.ibm.rcp.update.UpdateChecker.doInstallOperation\n(UpdateChecker.java:1155)\n\tat com.ibm.rcp.update.UpdateChecker.doDiscreteInstallOperations\n(UpdateChecker.java:1094)\n\tat com.ibm.rcp.update.UpdateChecker.updateSilently\n(UpdateChecker.java:1045)\n\tat com.ibm.rcp.update.UpdateChecker.doCheck(UpdateChecker.java:785)\n\tat com.ibm.rcp.update.UpdateManager.doUpdate(UpdateManager.java:251)\n\tat \ncom.ibm.rcp.update.UpdateManagerProvider$UpdateProvisioningOperation.launchUpda\nteManager(UpdateManagerProvider.java:107)\n\tat \ncom.ibm.rcp.update.UpdateManagerProvider$UpdateProvisioningOperation.run\n(UpdateManagerProvider.java:60)\n\tat com.ibm.rcp.pagebuilder.requirements.DefaultFeatureHandler.run\n(DefaultFeatureHandler.java:231)\n\tat \ncom.ibm.rcp.pagebuilder.requirements.PageRequirementsManager$RequirementsOperat\nion.run(PageRequirementsManager.java:315)\n\tat \ncom.ibm.rcp.install.personality.InstallProvisioningPage$CDInstallTask.run\n(InstallProvisioningPage.java:329)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:113)\n\nThis is caused by the following:\nThe TargetFeature\u0027s included feature refs list contains the following: \nUpdateSiteIncludedFeatureReference (linux feature), IncludedFeatureReference \n(win32 feature), UpdateSiteIncludedFeatureReference (nl1 feature), \nUpdateSiteIncludedFeatureReference (nl2 feature) (in that order). When \nFeature.getRawIncludedFeatureReferences is called, it tries to create an array \nof type UpdateSiteIncludedFeatureReference (first listed feature reference) \nand fails because the second listed feature reference is an \nIncludedFeatureReference.\n\nNote that if the win32 child feature was listed first and you installed on \nwin32, then the array would be an IncludedFeatureReference array and we would \nnot have any problems.\n\nI\u0027ll attach a screen shot of my debug env.",
    "Created an attachment (id\u003d29451)\ndebug screen shot\n",
    "Created an attachment (id\u003d29456)\npatch for Feature\n\nDoug,\nI created this patch that I believe will solve your problem. To try it out get\nupdate core source from eclipse CVS and apply this patch to\nsrc/org/eclipse/update/core/Feature.java. If you don\u0027t have time for this it\nshould be in the next nightly build.\n",
    "Can we backport this fix to the 3.1.x stream?",
    "Seems simple enough - I think we can.",
    "Fixed in HEAD and backported to 3.1.2. ",
    "*** Bug 129372 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2005-11-07T18:11:02+01:00",
    "2005-11-07T18:17:57+01:00",
    "2005-11-07T18:51:18+01:00",
    "2005-12-07T16:20:23+01:00",
    "2005-12-15T16:12:17+01:00",
    "2005-12-15T20:29:34+01:00",
    "2006-04-25T05:40:26+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayStoreException",
      "elements": [
        {
          "method": "java.util.ArrayList.toArray",
          "source": "ArrayList.java:337"
        },
        {
          "method": "org.eclipse.update.core.Feature.getRawIncludedFeatureReferences",
          "source": "Feature.java:631"
        },
        {
          "method": "org.eclipse.update.core.Feature.getIncludedFeatureReferences",
          "source": "Feature.java:1039"
        },
        {
          "method": "org.eclipse.update.internal.core.ConfiguredSite.configure",
          "source": "ConfiguredSite.java:247"
        },
        {
          "method": "org.eclipse.update.internal.core.ConfiguredSite.install",
          "source": "ConfiguredSite.java:157"
        },
        {
          "method": "org.eclipse.update.internal.core.ConfiguredSite.install",
          "source": "ConfiguredSite.java:86"
        },
        {
          "method": "org.eclipse.update.internal.operations.InstallOperation.execute",
          "source": "InstallOperation.java:72"
        },
        {
          "method": "com.ibm.rcp.update.UpdateChecker.doInstallOperation",
          "source": "UpdateChecker.java:1155"
        },
        {
          "method": "com.ibm.rcp.update.UpdateChecker.doDiscreteInstallOperations",
          "source": "UpdateChecker.java:1094"
        },
        {
          "method": "com.ibm.rcp.update.UpdateChecker.updateSilently",
          "source": "UpdateChecker.java:1045"
        },
        {
          "method": "com.ibm.rcp.update.UpdateChecker.doCheck",
          "source": "UpdateChecker.java:785"
        },
        {
          "method": "com.ibm.rcp.update.UpdateManager.doUpdate",
          "source": "UpdateManager.java:251"
        },
        {
          "method": "com.ibm.rcp.update.UpdateManagerProvider$UpdateProvisioningOperation.launchUpdateManager",
          "source": "UpdateManagerProvider.java:107"
        },
        {
          "method": "com.ibm.rcp.update.UpdateManagerProvider$UpdateProvisioningOperation.run",
          "source": "UpdateManagerProvider.java:60"
        },
        {
          "method": "com.ibm.rcp.pagebuilder.requirements.DefaultFeatureHandler.run",
          "source": "DefaultFeatureHandler.java:231"
        },
        {
          "method": "com.ibm.rcp.pagebuilder.requirements.PageRequirementsManager$RequirementsOperation.run",
          "source": "PageRequirementsManager.java:315"
        },
        {
          "method": "com.ibm.rcp.install.personality.InstallProvisioningPage$CDInstallTask.run",
          "source": "InstallProvisioningPage.java:329"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "115359",
      "date": "2005-11-07T18:11:02+01:00",
      "product": "Platform",
      "component": "Update",
      "severity": "blocker"
    }
  ],
  "groupId": "115359",
  "bugId": "115359",
  "date": "2005-11-07T18:11:02+01:00",
  "product": "Platform",
  "component": "Update",
  "severity": "blocker"
}