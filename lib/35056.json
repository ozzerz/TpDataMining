{
  "comments": [
    "Version: 2.1.0\nBuild id: 200303120800\n\nI have this type, with a breakpoint on the fMessage\u003d \"blah\" line.\n\n\npackage com.example;\n\npublic class LucsTest {\n\tprotected String fMessage;\n\t\n\tpublic static void main(String[] args) {\n\t\tnew LucsTest().run();\n\t}\n\t\n\tpublic void run() {\n\t\tint helpSelectionInVariablesView\u003d 5;\n\t\tfMessage\u003d \"blah\";\n\t\tSystem.out.println(fMessage);\n\t}\n}\n\nI created a detail formatter for com.example.LucsTest which looks like this:\n\nStringBuffer buffer\u003d new StringBuffer();\nif (fMessage !\u003d null) {\n\tbuffer.append(fMessage);\n} else {\n\tbuffer.append(\"empty: \" + super.toString());\n}\nreturn buffer;\n\nI get the following message in the detail pane when I select the \"this\" object\nin the variables view after the breakpoint is hit, but if I do a step over I see\n\"blah\" in the detail pane.\n\nDetail formatter error: \n\t\tRuntime exception occurred during evaluation. See log for details\n\nIn the .log file I get these messages:\n\n!ENTRY org.eclipse.jdt.debug 4 120 Mar 14, 2003 14:19:57.894\n!MESSAGE Internal error logged from JDI Debug: \n!STACK 0\njava.util.EmptyStackException\n\tat java.util.Stack.peek(Stack.java:77)\n\tat java.util.Stack.pop(Stack.java:59)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.pop(Interpreter.java:89)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.instructions.Instruction.pop(Instruction.java:112)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.instructions.SendMessage.execute(SendMessage.java:49)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute(Interpreter.java:50)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run(ASTEvaluationEngine.java:298)\n\tat\norg.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation(JDIThread.java:630)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run(ASTEvaluationEngine.java:324)\n\tat\norg.eclipse.jdt.internal.debug.core.model.JDIThread$AsyncThread.run(JDIThread.java:2492)\n\tat java.lang.Thread.run(Thread.java:479)\n!ENTRY org.eclipse.jdt.debug 4 120 Mar 14, 2003 14:23:07.706\n!MESSAGE Internal error logged from JDI Debug: \n!STACK 0\njava.util.EmptyStackException\n\tat java.util.Stack.peek(Stack.java:77)\n\tat java.util.Stack.pop(Stack.java:59)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.pop(Interpreter.java:89)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.instructions.Instruction.pop(Instruction.java:112)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.instructions.SendMessage.execute(SendMessage.java:49)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute(Interpreter.java:50)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run(ASTEvaluationEngine.java:298)\n\tat\norg.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation(JDIThread.java:630)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run(ASTEvaluationEngine.java:324)\n\tat\norg.eclipse.jdt.internal.debug.core.model.JDIThread$AsyncThread.run(JDIThread.java:2492)\n\tat java.lang.Thread.run(Thread.java:479)",
    "Note: If I change the DetailFormatter to the following it works fine, so it\nlooks like the super keyword is throwing things off.\n\nStringBuffer buffer\u003d new StringBuffer();\nif (fMessage !\u003d null) {\n\tbuffer.append(fMessage);\n} else {\n\tbuffer.append(\"empty: \" + toString());\n}\nreturn buffer;",
    "A smaller test case:\n\npublic class Bug_35056_1 {\n  public static void main(String[] args) {\n    new Bug_35056_1().run();\n  }\n  public void run() {\n    System.out.println(\"test\");  // \u003c-- breakpoint here\n  }\n  public int foo(String s) {\n    return 0;\n  }\n}\n\nwhen the breakpoint is hit, evaluate \"foo(super.toString())\".",
    "This test case worked for me:\n\nthis.foo(super.toString())\n\t (int) 0",
    "adding Luc,for previous comment.",
    "The problem is on method calls with the \u0027super\u0027 keyword.\n\nThe internal instruction sequence generated to performed an evaluation which\ncontains a \u0027super\u0027 method call can be wrong. In some case, the instruction which\nrepresent the \u0027super\u0027 method call may be in a wrong position in this sequence.\n\nThe fix is to replace ASTInstructionCompiler#endVisit(SuperMethodInvocation) by:\n\npublic void endVisit(SuperMethodInvocation node) {\n  if (!isActive() || hasErrors())\n    return;\n  storeInstruction();\n}\n",
    "The expression to evaluate is \"foo(super.toString);\"\n\nI forgot the \u0027;\u0027.",
    "Released the fix.",
    "Please verify (DarinW).",
    "Verified."
  ],
  "commentCreationDates": [
    "2003-03-14T20:30:14+01:00",
    "2003-03-14T20:31:19+01:00",
    "2003-03-19T15:52:56+01:00",
    "2003-03-19T16:00:50+01:00",
    "2003-03-19T16:01:19+01:00",
    "2003-03-19T16:16:32+01:00",
    "2003-03-19T16:24:54+01:00",
    "2003-03-19T18:09:22+01:00",
    "2003-03-19T18:09:41+01:00",
    "2003-03-19T18:10:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.EmptyStackException",
      "elements": [
        {
          "method": "java.util.Stack.peek",
          "source": "Stack.java:77"
        },
        {
          "method": "java.util.Stack.pop",
          "source": "Stack.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.pop",
          "source": "Interpreter.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.instructions.Instruction.pop",
          "source": "Instruction.java:112"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.instructions.SendMessage.execute",
          "source": "SendMessage.java:49"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute",
          "source": "Interpreter.java:50"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run",
          "source": "ASTEvaluationEngine.java:298"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation",
          "source": "JDIThread.java:630"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run",
          "source": "ASTEvaluationEngine.java:324"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread$AsyncThread.run",
          "source": "JDIThread.java:2492"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:479"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "35056",
      "date": "2003-03-14T20:30:14+01:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    },
    {
      "exceptionType": "java.util.EmptyStackException",
      "elements": [
        {
          "method": "java.util.Stack.peek",
          "source": "Stack.java:77"
        },
        {
          "method": "java.util.Stack.pop",
          "source": "Stack.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.pop",
          "source": "Interpreter.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.instructions.Instruction.pop",
          "source": "Instruction.java:112"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.instructions.SendMessage.execute",
          "source": "SendMessage.java:49"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute",
          "source": "Interpreter.java:50"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run",
          "source": "ASTEvaluationEngine.java:298"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation",
          "source": "JDIThread.java:630"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run",
          "source": "ASTEvaluationEngine.java:324"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread$AsyncThread.run",
          "source": "JDIThread.java:2492"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:479"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "35056",
      "date": "2003-03-14T20:30:14+01:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "35056",
  "bugId": "35056",
  "date": "2003-03-14T20:30:14+01:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}