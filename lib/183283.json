{
  "comments": [
    "ENV:\neclipse.buildId\u003dI20070418-1012\njava.version\u003d1.5.0_11\n\nWhen trying to export a product one get\u0027s this stacktrace:\njava.lang.IllegalArgumentException\nat java.net.URI.create(Unknown Source)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.apache.tools.ant.launch.Locator.fromURI(Locator.java:162)\nat org.apache.tools.ant.launch.Locator.getResourceSource(Locator.java:119)\nat org.apache.tools.ant.launch.Locator.getClassSource(Locator.java:90)\nat org.apache.tools.ant.Project.setAntLib(Project.java:313)\nat org.apache.tools.ant.Project.initProperties(Project.java:309)\nat org.apache.tools.ant.Project.init(Project.java:295)\nat org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:520)\nat org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:456)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.ant.core.AntRunner.run(AntRunner.java:377)\nat org.eclipse.pde.internal.core.exports.FeatureExportOperation.cleanup(FeatureExportOperation.java:576)\nat org.eclipse.pde.internal.core.exports.ProductExportOperation.run(ProductExportOperation.java:112)\nat org.eclipse.pde.internal.ui.build.FeatureExportJob.run(FeatureExportJob.java:55)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\nCaused by: java.net.URISyntaxException: Illegal character in path at index 18: file:/C:/Dokumente und Einstellungen/tom/Desktop/eclipse/eclipse/plugins/org.apache.ant_1.7.0/lib/ant.jar\nat java.net.URI$Parser.fail(Unknown Source)\nat java.net.URI$Parser.checkChars(Unknown Source)\nat java.net.URI$Parser.parseHierarchical(Unknown Source)\nat java.net.URI$Parser.parse(Unknown Source)\nat java.net.URI.\u003cinit\u003e(Unknown Source)\n... 22 more",
    "Thank you for the bug report.\n\nIs this a new problem for I20070418-1012...that is did this work before?\n\nHave you tried installing in a location that did not include spaces in the path as that appears to be what is causing the problem?",
    "Ok. I\u0027ve tracked this down. The problem is that if you have installed eclipse\ninto a location whose path contains whitespaces you\u0027ll get this Exception :-)\ne.g. on my german system I had installed eclipse in C:/Dokument und\nEinstellung/Tom Schindl/. When moving my eclipse to C:/TEMP everything works as\nexpected.\n\nDarin I don\u0027t know normally I\u0027m working on MacOSX where I don\u0027t have paths with whitespaces.",
    "Ok...thanks for reporting back. I will investigate if this is a regression.",
    "I think I can remember that this worked in M6 but I could be wrong",
    "This is a problem in Ant 1.7.0 and not properly encoding URI with spaces.\nWill likely need to be an entry in the known issues section for 3.3",
    "Wow. That\u0027s a bad thing and I think that this can\u0027t stand for a product like Eclipse when getting released and we have 2 months from now. I now know this and can work around it but I guess many many other people will run into this problem and will quite using RCP because of this missfeature. \n\nIs switching back to ant 1.6 not possible anymore?",
    "Logged as http://issues.apache.org/bugzilla/show_bug.cgi?id\u003d42222 and the bug has been fixed in the Ant codebase.\n\nCurrently do not plan to move back to Ant 1.6.5.",
    "*** Bug 184988 has been marked as a duplicate of this bug. ***",
    "Naive non-Ant user question: Is it possible to encode the path before passing it to Ant? C:\\Program Files\\ is a very likely place where Eclipse and Eclipse-based products will be installed.",
    "Can we somehow rethink this? I can\u0027t help but this one really makes me nevervous having an Eclipse for one year not able to create RCP-Applications when installed in a standard path on operating systems?",
    "I will look into John\u0027s suggestion",
    "Can we please consider fixing this for Eclipse 3.3?\n\nWe have an RCP app that is installed by default to C:/Program Files/... After upgrading to Eclipse 3.3M7, our automated nightly tests now fail on Windows. Linux and Mac are still working fine (since there are no spaces).\n\nAs a workaround we could install on our test machine to somewhere like C:/Temp/, but it sure would be nice if we could run our nightly tests against a typical user\u0027s installation location.\n\nThanks!",
    "*** Bug 186374 has been marked as a duplicate of this bug. ***",
    "I have requested a patch from Ant via http://issues.apache.org/bugzilla/show_bug.cgi?id\u003d42222\nPlease include your support if you see this as a priority.",
    "(In reply to comment #14)\n\u003e I have requested a patch from Ant via\n\u003e http://issues.apache.org/bugzilla/show_bug.cgi?id\u003d42222\n\u003e Please include your support if you see this as a priority.\n\u003e \nAs in, vote for it? That I did -- other ways to show support? (This really is an awful bug.) ",
    "*** Bug 186604 has been marked as a duplicate of this bug. ***",
    "If the ant team cannot or will not provide a fix in time, then this must be fixed in Eclipse. I think this bug is critical since it makes plug-in deployment on Eclipse difficult (is it even possible? Of course changing the directory to not include a bad URI character will fix it, other than that though?). We need to sign our jars for deployment so we need a working Export Wizard.\n\nI second John\u0027s request to just resolve this by encoding the path portion of the URL since the space character isn\u0027t the only funky character that will cause URI parsing to fail. In the future, when the ant fix is available, the hack can be ripped out.",
    "Speaking as a member of the Ant team, I\u0027d encourage you to come up with a workaround while waiting for Ant1.7.1. We may be able to do a bugfix only release in a couple of months, but I\u0027m reluctant to cut a new release without doing at least one beta cycle, and that always takes time.",
    "Thanks Steve for your help.\n\nI will investigate if we can properly encode away the problem before hitting the Ant code.\n\nIt would be great if someone on the Ant team could itemize the entry points into the Ant code that would need to be encoded / decoded and then also check out our potential workaround for completeness?",
    "great to see this is now seen as a serious problem and you are working on. I hope there is a work-around for this problem in 3.3 timeframe.",
    "I believe I have a workaround for most cases and most importantly for the exporting case.\n\nThe incorrect code in Locator is only hit if the URL starts with \"file:/\"\nThe default ant home JARs from Eclipse all had a URL of this type so we blew up.\n\nPrevious code that resulted in the problem:\nURL url \u003d FileLocator.toFileURL(bundle.getEntry(library));\nif (new File(url.getPath()).exists()) {\n...\n}\n\nChanged to:\nURL url \u003d FileLocator.toFileURL(bundle.getEntry(library));\nFile urlFile \u003d new File(url.getPath());\nif (urlFile.exists()) {\n   url \u003d new URL(\"file:\" +  urlFile.getAbsolutePath()); //$NON-NLS-1$\n...\n}\n\nI have released the code and will be included in the builds.\nExtra verification of the correct behavior is appreciated.\n\nCode change we localized to AntCorePreferences.",
    "Note the technique recommended in the Java class libraries to convert from java.io.File-\u003ejava.net.URL is: file.toURI().toURL().  Converting to URI takes care of proper character escaping.  (See javadoc of java.io.File#toURL()). I don\u0027t know any cases off-hand where this will obtain a different result from what you have done, but I thought it worth pointing out.",
    "*** Bug 186793 has been marked as a duplicate of this bug. ***",
    "Hey Darin,\n\nI\u0027ll definitely verify this when I see it in a build.  It is critical for our product and we are releasing a first alpha based on 3.3 this Friday.  This fix should be available in this week\u0027s integration build, correct?\n",
    "Thanks Mark.\nYes, it is in the I builds starting with I20070512-0010.",
    " file.toURI().toURL() is the cause of Ant\u0027s other Locator related problems; if you pass a file path that is a network share of the //host/path or \\\\host\\path form, then the JVM throws a fault:\n\n    [junit] Testcase: testUnixNetworkPath(org.apache.tools.ant.launch.LocatorTest):\tCaused an ERROR\n    [junit] Bad URI file://cluster/home/ant/lib:URI has an authority component\n    [junit] java.lang.IllegalArgumentException: Bad URI file://cluster/home/ant/lib:URI has an authority component\n    [junit] \tat org.apache.tools.ant.launch.Locator.fromURI(Locator.java:179)\n    [junit] \tat org.apache.tools.ant.launch.LocatorTest.resolve(LocatorTest.java:41)\n    [junit] \tat org.apache.tools.ant.launch.LocatorTest.resolveTo(LocatorTest.java:48)\n    [junit] \tat org.apache.tools.ant.launch.LocatorTest.testUnixNetworkPath(LocatorTest.java:69)\n\nIf you search for \"URI has an authority component\", you can see that NetBeans has been bitten by this, and ant1.7.0 when run off a file share. Don\u0027t let eclipse follow.\n\nAnt has special code for the Java1.3 and below JVM; we are thinking of switching to this always, rather than use the file.toURI() logic. It is a shame we are duplicating JVM code, but at least we get consistent behavior that we can test for.\n\nThis is the issue that is causing me to consider the current SVN head Locator class to be unstable...I recommend you add some tests for handling these cases too.",
    "Steve: I couldn\u0027t reproduce an exception using java.io.File().toURI().toURL() with a Windows UNC path. The exception stack you provide seems to come from Ant code. What do you think is the safest way to convert from java.io.File to java.net.URL that will make Ant happy for both UNC paths and paths containing spaces?\n\nDarin: I tested a PDE export on a plugin stored at a UNC path, and that failed as well (extra UNC slash gets lost along the way). Do you want me to enter a separate bug for that, or is there a known problem there?",
    "john: its a unix path that appears to cause problem, on windows, as you note, backslashes get lost.\n\nIf we go back to the code that pushed the change into Ant, you can see some of the previous problems:\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id\u003d8031\n\nwe should both write tests that test with a # in the path, high unicode chars, percentage char, umlauts and such like. I\u0027ll let you work out the inputs and expected outputs and make sure ant is in sync -and yes, I think I will have to cut File.toURI() out of the loop.",
    "John, please enter a separate bug for the UNC path problem.",
    "Entered bug 186838 for the UNC path problem (it looks like a PDE build problem).",
    "*** Bug 187079 has been marked as a duplicate of this bug. ***",
    "Has anyone had the chance to independently verify?",
    "I\u0027ve confirmed that I can\u0027t reproduce my original bug outlined in bug 186793 and I have not seen any other failures yet.  I am currently using build I20070514-0010.",
    "+1",
    "Verified.",
    "*** Bug 194487 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2007-04-19T22:55:22+02:00",
    "2007-04-20T01:02:57+02:00",
    "2007-04-20T01:08:10+02:00",
    "2007-04-20T01:09:04+02:00",
    "2007-04-20T01:10:40+02:00",
    "2007-04-23T18:26:53+02:00",
    "2007-04-23T18:38:29+02:00",
    "2007-04-24T17:18:00+02:00",
    "2007-05-02T17:38:14+02:00",
    "2007-05-02T17:54:46+02:00",
    "2007-05-09T18:02:08+02:00",
    "2007-05-09T18:10:45+02:00",
    "2007-05-10T23:36:14+02:00",
    "2007-05-11T17:19:09+02:00",
    "2007-05-11T17:21:38+02:00",
    "2007-05-11T18:03:54+02:00",
    "2007-05-11T19:29:28+02:00",
    "2007-05-11T20:55:43+02:00",
    "2007-05-11T23:23:37+02:00",
    "2007-05-11T23:42:54+02:00",
    "2007-05-11T23:49:47+02:00",
    "2007-05-12T01:56:44+02:00",
    "2007-05-14T15:57:18+02:00",
    "2007-05-14T16:18:53+02:00",
    "2007-05-14T16:24:38+02:00",
    "2007-05-14T16:31:33+02:00",
    "2007-05-14T16:48:09+02:00",
    "2007-05-14T18:10:43+02:00",
    "2007-05-14T18:28:17+02:00",
    "2007-05-14T18:44:50+02:00",
    "2007-05-14T19:19:38+02:00",
    "2007-05-16T02:52:53+02:00",
    "2007-05-16T18:47:05+02:00",
    "2007-05-16T19:11:10+02:00",
    "2007-05-16T23:17:03+02:00",
    "2007-05-16T23:17:22+02:00",
    "2007-06-26T23:27:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "elements": [
        {
          "method": "java.net.URI.create",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.tools.ant.launch.Locator.fromURI",
          "source": "Locator.java:162"
        },
        {
          "method": "org.apache.tools.ant.launch.Locator.getResourceSource",
          "source": "Locator.java:119"
        },
        {
          "method": "org.apache.tools.ant.launch.Locator.getClassSource",
          "source": "Locator.java:90"
        },
        {
          "method": "org.apache.tools.ant.Project.setAntLib",
          "source": "Project.java:313"
        },
        {
          "method": "org.apache.tools.ant.Project.initProperties",
          "source": "Project.java:309"
        },
        {
          "method": "org.apache.tools.ant.Project.init",
          "source": "Project.java:295"
        },
        {
          "method": "org.eclipse.ant.internal.core.ant.InternalAntRunner.run",
          "source": "InternalAntRunner.java:520"
        },
        {
          "method": "org.eclipse.ant.internal.core.ant.InternalAntRunner.run",
          "source": "InternalAntRunner.java:456"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ant.core.AntRunner.run",
          "source": "AntRunner.java:377"
        },
        {
          "method": "org.eclipse.pde.internal.core.exports.FeatureExportOperation.cleanup",
          "source": "FeatureExportOperation.java:576"
        },
        {
          "method": "org.eclipse.pde.internal.core.exports.ProductExportOperation.run",
          "source": "ProductExportOperation.java:112"
        },
        {
          "method": "org.eclipse.pde.internal.ui.build.FeatureExportJob.run",
          "source": "FeatureExportJob.java:55"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "causedBy": {
        "exceptionType": "java.net.URISyntaxException",
        "message": "Illegal character in path at index 18: file:/C:/Dokumente und Einstellungen/tom/Desktop/eclipse/eclipse/plugins/org.apache.ant_1.7.0/lib/ant.jar",
        "elements": [
          {
            "method": "java.net.URI$Parser.fail",
            "source": "Unknown Source"
          },
          {
            "method": "java.net.URI$Parser.checkChars",
            "source": "Unknown Source"
          },
          {
            "method": "java.net.URI$Parser.parseHierarchical",
            "source": "Unknown Source"
          },
          {
            "method": "java.net.URI$Parser.parse",
            "source": "Unknown Source"
          },
          {
            "method": "java.net.URI.\u003cinit\u003e",
            "source": "Unknown Source"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "183283",
      "date": "2007-04-19T22:55:22+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Bad URI file://cluster/home/ant/lib:URI has an authority component     [junit]",
      "elements": [
        {
          "method": "org.apache.tools.ant.launch.Locator.fromURI",
          "source": "Locator.java:179"
        }
      ],
      "number": 1,
      "commentIndex": 26,
      "bugId": "183283",
      "date": "2007-05-14T16:48:09+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "major"
    }
  ],
  "groupId": "183283",
  "bugId": "183283",
  "date": "2007-04-19T22:55:22+02:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "major"
}