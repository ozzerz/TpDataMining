{
  "comments": [
    "I20040901 J9 JXE enabled\n\nHappened after clicking Open Type. The UI is deadlocked (see attached dump).\n\njava.lang.IllegalMonitorStateException\n        at java.lang.Object.notifyAll(Native Method)\n        at\norg.eclipse.jdt.internal.core.search.indexing.ReadWriteMonitor.exitRead(Unknown\nSource)\n        at org.eclipse.jdt.internal.core.search.PatternSearchJob.search(Unknown\nSource)\n        at org.eclipse.jdt.internal.core.search.PatternSearchJob.execute(Unknown\nSource)\n        at\norg.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(Unknown\nSource)\n        at org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(Unknown\nSource)\n        at org.eclipse.jdt.internal.corext.util.AllTypesCache.search(Unknown Source)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearchTypes(Unknown\nSource)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run(Unknown Source)",
    "Created an attachment (id\u003d14391)\nJ9 VM dump\n",
    "Not deadlocked: I can click \"Cancel\". However, when I click Open Type again I\nget the progress dialog (Searching...) and it blocks again.\n\nNothing in .log (the IllegalMonitorStateException was in the console)",
    "*** Bug 73375 has been marked as a duplicate of this bug. ***",
    "Olivier, which VM are you using?",
    "The current suspicion is a J9 issue.\n\nPlease check your log frequently to see how often you encounter this problem \u0026 \nupdate your VM daily.",
    "I just run into this bug with\n\"IBM J9SE VM (build 2.2, J2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040914\",\n(without JXE). I experience this about every second day.\n\nBug 73254 is a dup of this one. Bug 73603 looks also similar (-\u003eJ9 bug?).",
    "*** Bug 73982 has been marked as a duplicate of this bug. ***",
    "By adding this:\n\n-Xdump:heap+java:events\u003dthrow,filter\u003djava/lang/IllegalMonitorStateException\n\nto the command line will have J9 do a complete dump on an \nIllegalMonitorStateException. \n\nBTW, can someone provide a bit more info about this bug? When did it first \nstart showing up? The first seems to be Sep 1. Is that really the earliest VM? \nDo you guys grab a new 2.2 VM daily? Do you grab a new Eclipse daily? i.e. what \nchanged between everything\u0027s good, to now we see it?\n\nDoes it happen 2 mins into a run.. or if you have Eclipse up for 5 days then it \nhappens.. I\u0027m assuming it\u0027s seen on a uniprocessor box?\n\nStuff like that.\n ",
    "I got it only once when I used the J9 VM I got around September 1st. It never\nshowed up again. I got it doing a Ctrl + Shift + T.\nI ugrade the J9 VM when I see an update. I didn\u0027t see any update for the last\nfew days.\nI upgrade Eclipse after each integration build and I use the jxe support.\n\nI am using a uniprocessor machine.\n\nI will add your command line argument in case it is happening again.",
    "FYI: J9 + JXE is a relatively new combination for most eclipse developers... \nas in less than 1 month.\n\nPrior to that most were not using J9, so we cannot really say when it first \nappeared. It may have been there since day 1.",
    "\u003eDoes it happen 2 mins into a run.. or if you have Eclipse up for 5 days then it \nhappens..\nI exit Eclipse in the evening i.e. it\u0027s running less than 1 day. When I had it\n(also happened with newer J9 than Sept.1) I was after \u003e 1 hour of working. I can\nno longer work and have to exit (see comment 2).\n\n\u003eI\u0027m assuming it\u0027s seen on a uniprocessor box?\nYes.\n\n\n",
    "Created an attachment (id\u003d14651)\nconsole output\n\nI just got the IllegalMonitorStateException again with Eclipse I200409200800 on\na J2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040914 (JIT enabled)\nJ9VM - 20040913_1629_lHdSMR\nJIT  - r7_level20040912_1800\n... with a patched j9thr22.dll from Michael Brown.\n\nEclipse\u0027s process ID was 3292. After the exception, the eclipse process took\n100% CPU.",
    "Created an attachment (id\u003d14652)\nstackdump\n",
    "Created an attachment (id\u003d14653)\nSystem events captured by DebugView\n",
    "Created an attachment (id\u003d14655)\nstackdump just before exception is thrown\n\nAutomatically created stackdump (I started with\n-Xdump:heap+java:events\u003dthrow,filter\u003djava/lang/IllegalMonitorStateException\n). This came about an hour after launching the VM. That\u0027s the second one I got\nwith I200409200800 in a few hours. Working with the 3.0.1 Maintenance build did\nnot trigger one in two days. I\u0027ll try with an older vm and latest Eclipse\nnow...",
    "got it again with this setup:\njava version \"1.4.2\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 2.2)\nIBM J9SE VM (build 2.2, J2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040915\n(JIT enabled)\nJ9VM - 20040914_1123_lHdSMR\nJIT  - r7_level20040912_1800)\n\nJ9 JXE support is now enabled.\n\njava.lang.IllegalMonitorStateException\n        at java.lang.Object.notifyAll(Native Method)\n        at\norg.eclipse.jdt.internal.core.search.indexing.ReadWriteMonitor.exitRead(ReadWriteMonitor.java:58)\n        at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:119)\n        at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:64)\n        at\norg.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:260)\n        at\norg.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:870)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.search(AllTypesCache.java:532)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearchTypes(AllTypesCache.java:197)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run(AllTypesCache.java:166)\n",
    "Just got it again in I20040921-0010 with an old J9 VM from July, no JXE:\nIBM J9SE VM (build 2.2, J2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 build\n20040720_2050_lHdSMR (JIT enabled - r7_level20040720_1800))\n\nBTW: the 100% CPU from comment 12 is most probably unrelated.",
    "Another instance of a potential VM problem with IllegalMonitorStateExceptions \nis in bug 73603.",
    "I just hit the case in bug 73603 after upgrading to the latest 3.1 build.\nI\u0027m using build I200409210800 + JXE support on the 20040917 VM.\n",
    "I\u0027ve created an internal PR for this: https://bugs.ottawa.ibm.com/show_bug.cgi?\nid\u003d107454",
    "I can reproduce this pretty consistently (2 for 2), just by doing a synchronize\nall on a fairly typical self-hosting workspace.\n\n",
    "I backed out of using the JXE support (going back to the startup.jar from the\nbuild as well), and it still happens.\n\nIf I turn off the JIT, all seems well (albeit -very- slow).\n\nMichael, note that the stack in bug 73603 (which is what I\u0027m seeing) is similar\nbut not identical to the one here.\n\nIs there an option for enabling the JIT overall, but disabling the optimization\nthat you think may be the problem here?  The option mentioned in the internal PR\ndisables the JIT for the specific case above, but not the case in bug 73603.\n",
    "Just got another case, after re-enabling the JIT:\n\njava.lang.IllegalMonitorStateException\n        at java.lang.Object.notifyAll(Native Method)\n        at\norg.eclipse.jdt.internal.core.search.indexing.ReadWriteMonitor.exitRead(ReadWriteMonitor.java:58)\n        at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:119)\n        at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:64)\n        at\norg.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:260)\n        at\norg.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:870)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.search(AllTypesCache.java:532)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearchTypes(AllTypesCache.java:197)\n        at\norg.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run(AllTypesCache.java:166)\n",
    "Never mind, that\u0027s the same case as above.\n",
    "Created an attachment (id\u003d14732)\ndumps20040923-1011\n\nEclipse I20040921-2000, with second patched j9thr22.dll from Michael.\nNo vm options set besides -Xj9. Note that the thread doesn\u0027t die any more,\nsince the workaround from bug 73254 catches the exception.",
    "*** Bug 74794 has been marked as a duplicate of this bug. ***",
    "Created an attachment (id\u003d14760)\ndumps20040924-0920\n\nThis time, I ran I20040923-1635 with\n-Xjit:exclude\u003d{org/eclipse/jdt/internal/core/search/indexing/ReadWriteMonitor.*}\n\n\nEither it\u0027s not (only?) a jit bug, or that exclusion pattern doesn\u0027t work.",
    "Just saw this too (the original stack above), on M2.\nAs others have mentioned, the thread no longer dies.  I just noticed it in the\nerror log.\nI\u0027m running with the instrumented j9thr22.dll, but I saw no output of interest\nin the DebugView app.",
    "I didn\u0027t get the IMSE again when running with -Xjit:limitFile\u003dC:\\e\\jit-limit.txt\nwhere jit-limit.txt is (without quotes):\n\"- org/eclipse/jdt/internal/core/search/indexing/ReadWriteMonitor.*;\n\"",
    "Chatting with Michael, he\u0027s wondering what other threads could be contending\nwith locks held by the thread that updates the AllTypesCache.\n\nWhat is the best way to flush the AllTypesCache?\nI can delete all the .index files from the JDT core metadata area, but that\nseems a little heavy-handed.\n",
    "The AllTypeCache is just an in-memory cache. To flush it, you can either\nexit/enter Eclipse. Or even simpler, you can add a new type in a test project.",
    "Just a ping/poll to see what the latest on this is. I was chatting with Markus\non Friday, and he said that he\u0027s running:\n\nEclipse version I20041005 with ibm-java2-ws-sdk-pj9n142-20040928a\n\njava.fullversion\u003dJ2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040917 (JIT\nenabled)\n\nJ9VM - 20040916_0908_lHdSMR\n\nJIT  - r7_level20040915_1801\n\nwhich is -- I believe -- the latest, and he hasn\u0027t encountered any problems in\nsome time. If I\u0027m wrong on the verions, please let me know. \n\nThe question is: are other people still seeing the problem(s) reported, and if\nso, what versions (Eclipse, vm, jit etc) are you using? Has anyone been running\nwith the dumping options on the command line so that it\u0027ll generate a .dmp upon\nan IMSE being thrown? ",
    "I got this exception (again, see bug 75321) today:\n!SESSION Oct 12, 2004 18:43:42.108 ---------------------------------------------\neclipse.buildId\u003dI200410050800\njava.fullversion\u003dJ2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040917 (JIT\nenabled)\nJ9VM - 20040916_0908_lHdSMR\nJIT  - r7_level20040915_1801\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -showlocation -showversion -verify\n\n!ENTRY org.eclipse.core.runtime 4 2 Oct 12, 2004 18:43:42.118\n!MESSAGE An internal error occurred during: \"Comparing tags v_510 and HEAD of\norg.eclipse.jdt.core\".\n!STACK 0\njava.lang.IllegalMonitorStateException\n\tat java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1249)\n\tat java.text.DateFormat.parse(DateFormat.java:345)\n\t...\n\nIs \"-Xrunjdwp:onthrow\u003dIllegalMonitorStateException\" the correct dumping option\nto get .dmp file when IMSE is thrown?\n",
    "The right option is:\n-Xdump:heap+java:events\u003dthrow,filter\u003djava/lang/IllegalMonitorStateException",
    "I got it again this morning using build I200410190941:\n!ENTRY org.eclipse.ui 4 4 2004-10-22 17:05:48.217\n!MESSAGE null is not a valid charset.\n!SESSION 2004-10-23 10:10:24.928 -----------------------------------------------\neclipse.buildId\u003dI200410190941\njava.fullversion\u003dJ2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040917 (JIT\nenabled)\nJ9VM - 20040916_0908_lHdSMR\nJIT  - r7_level20040915_1801\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -showlocation -showversion -verify\n\n!ENTRY org.eclipse.ui 4 4 2004-10-23 10:10:24.938\n!MESSAGE null is not a valid charset.\n\n!ENTRY org.eclipse.core.runtime 4 2 2004-10-23 10:21:55.871\n!MESSAGE An internal error occurred during: \"Synchronizing CVS\n(/org.eclipse.jdt.core, /org.eclipse.jdt.core.tests.builder,\n/org.eclipse.jdt.core.tests.compiler, /org.eclipse.jdt.core.tests.model,\n/org.eclipse.jdt.core.tests.performance)\".\n!STACK 0\njava.lang.IllegalMonitorStateException\n\tat java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1249)\n\tat java.text.DateFormat.parse(DateFormat.java:345)\n\tat\norg.eclipse.team.internal.ccvs.core.util.CVSDateFormatter.entryLineToDate(DateFormat.java)\n\nAs I had option -Xdump activated, it created lot of files (33 exactly) before I\ncan see this exception in the console. All these files takes around 3Go of my\ndisk and 810MB compressed.\n\nI do not want to attach them to the bug. So, do I have to send all these files\nor only last heapdump....dmp and javacore....txt?",
    "Michael,\nAs i said in previous comment 35, I succeeded to catch this exception and have\nmany dump files written while it happened.\nIf you\u0027re interested, I can send them directly to you for investigation...",
    "*** Bug 76137 has been marked as a duplicate of this bug. ***",
    "One suggestion: if you\u0027re getting this regularly (Fr?d?ric, je vous regarde) is \nto try running this with -Xjit:noopt to reduce the work the jit does to see if \nit makes any difference. ",
    "just wanted to confirm that this (bug 73603 with the SimpleDateFormat case,\nactually) also happens on linux-gtk (fedora core 2, LD_ASSUME_KERNEL\u003d2.4) with\nthis VM:\n\nJ9VM - 20040916_0910_lHdSMR\nJIT  - r7_level20040915_1801\n\nchanging OS to \u0027All\u0027.\n",
    "This has been confirmed as a problem in the J9 VM and is being addressed. See\nthe internal PR for more info. \n\nI\u0027ll mark this bug as \"invalid\" \u0027cause it\u0027s not a problem with Eclipse proper.\n\nMany thanks to all for the help getting information together to track this down. ",
    "*** Bug 82283 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2004-09-03T11:33:13+02:00",
    "2004-09-03T11:34:23+02:00",
    "2004-09-03T11:36:10+02:00",
    "2004-09-07T20:44:39+02:00",
    "2004-09-08T10:41:40+02:00",
    "2004-09-08T16:51:26+02:00",
    "2004-09-15T12:34:21+02:00",
    "2004-09-15T16:08:12+02:00",
    "2004-09-16T19:55:22+02:00",
    "2004-09-16T20:03:16+02:00",
    "2004-09-16T21:04:47+02:00",
    "2004-09-17T09:43:56+02:00",
    "2004-09-20T17:54:44+02:00",
    "2004-09-20T17:56:04+02:00",
    "2004-09-20T17:56:54+02:00",
    "2004-09-20T19:43:26+02:00",
    "2004-09-21T10:31:10+02:00",
    "2004-09-21T14:53:06+02:00",
    "2004-09-21T17:26:19+02:00",
    "2004-09-21T19:40:23+02:00",
    "2004-09-21T19:57:53+02:00",
    "2004-09-21T20:34:45+02:00",
    "2004-09-21T22:20:57+02:00",
    "2004-09-21T23:05:48+02:00",
    "2004-09-21T23:06:15+02:00",
    "2004-09-23T10:27:53+02:00",
    "2004-09-23T19:42:00+02:00",
    "2004-09-24T09:42:28+02:00",
    "2004-09-28T19:24:25+02:00",
    "2004-09-28T19:52:00+02:00",
    "2004-10-05T22:01:04+02:00",
    "2004-10-06T12:34:05+02:00",
    "2004-10-12T16:35:36+02:00",
    "2004-10-12T19:27:46+02:00",
    "2004-10-12T22:43:28+02:00",
    "2004-10-23T10:51:48+02:00",
    "2004-10-26T18:07:16+02:00",
    "2004-10-27T16:26:12+02:00",
    "2004-10-28T23:59:04+02:00",
    "2004-11-01T11:45:39+01:00",
    "2004-11-03T21:33:51+01:00",
    "2005-01-06T15:10:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalMonitorStateException",
      "elements": [
        {
          "method": "java.lang.Object.notifyAll",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.ReadWriteMonitor.exitRead",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.search",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearchTypes",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "73226",
      "date": "2004-09-03T11:33:13+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.IllegalMonitorStateException",
      "elements": [
        {
          "method": "java.lang.Object.notifyAll",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.ReadWriteMonitor.exitRead",
          "source": "ReadWriteMonitor.java:58"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "PatternSearchJob.java:119"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:64"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:260"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "SearchEngine.java:870"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.search",
          "source": "AllTypesCache.java:532"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearchTypes",
          "source": "AllTypesCache.java:197"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run",
          "source": "AllTypesCache.java:166"
        }
      ],
      "number": 1,
      "commentIndex": 16,
      "bugId": "73226",
      "date": "2004-09-21T10:31:10+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.IllegalMonitorStateException",
      "elements": [
        {
          "method": "java.lang.Object.notifyAll",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.ReadWriteMonitor.exitRead",
          "source": "ReadWriteMonitor.java:58"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "PatternSearchJob.java:119"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:64"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:260"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "SearchEngine.java:870"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.search",
          "source": "AllTypesCache.java:532"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearchTypes",
          "source": "AllTypesCache.java:197"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run",
          "source": "AllTypesCache.java:166"
        }
      ],
      "number": 2,
      "commentIndex": 23,
      "bugId": "73226",
      "date": "2004-09-21T23:05:48+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.IllegalMonitorStateException",
      "elements": [
        {
          "method": "java.text.SimpleDateFormat.parse",
          "source": "SimpleDateFormat.java:1249"
        },
        {
          "method": "java.text.DateFormat.parse",
          "source": "DateFormat.java:345"
        }
      ],
      "number": 3,
      "commentIndex": 33,
      "bugId": "73226",
      "date": "2004-10-12T19:27:46+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.IllegalMonitorStateException",
      "elements": [
        {
          "method": "java.text.SimpleDateFormat.parse",
          "source": "SimpleDateFormat.java:1249"
        },
        {
          "method": "java.text.DateFormat.parse",
          "source": "DateFormat.java:345"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.util.CVSDateFormatter.entryLineToDate",
          "source": "DateFormat.java"
        }
      ],
      "number": 4,
      "commentIndex": 35,
      "bugId": "73226",
      "date": "2004-10-23T10:51:48+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "73226",
  "bugId": "73226",
  "date": "2004-09-03T11:33:13+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}