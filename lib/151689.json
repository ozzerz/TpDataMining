{
  "comments": [
    "I\u0027m using a \"Dynamic Web Project\" that includes java classes and JSP pages.\nWhen using \"references in workspace\" it finds references only in the java code and not in the JSP pages.\nThis used to work with Eclipse 3.1 and since I upgraded to Eclipse 3.2 including WST 1.5 it stopped working.",
    "Nitin, is the cause of this bug the same as bug 149446 and bug 149330?",
    "I have the same problem.  My .log file contains many occurrences of this:\n\n!ENTRY org.eclipse.jst.jsp.ui 4 4 2006-08-04 20:14:42.439\n!MESSAGE null\n!STACK 0\norg.eclipse.jface.text.BadLocationException\n\tat org.eclipse.jface.text.ListLineTracker.getLineNumberOfOffset(ListLineTracker.java:140)\n\tat org.eclipse.jface.text.AbstractLineTracker.getLineNumberOfOffset(AbstractLineTracker.java:161)\n\tat org.eclipse.jface.text.AbstractDocument.getLineOfOffset(AbstractDocument.java:841)\n\tat org.eclipse.jst.jsp.ui.internal.java.search.JSPSearchRequestor.addSearchMatch(JSPSearchRequestor.java:50)\n\tat org.eclipse.jst.jsp.ui.internal.java.search.BasicJSPSearchRequestor.acceptSearchMatch(BasicJSPSearchRequestor.java:67)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.report(MatchLocator.java:1658)\n\tat org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference(TypeReferenceLocator.java:531)\n\tat org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference(TypeReferenceLocator.java:425)\n\tat org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference(TypeReferenceLocator.java:299)\n\tat org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference(TypeReferenceLocator.java:279)\n\tat org.eclipse.jdt.internal.core.search.matching.OrLocator.matchReportReference(OrLocator.java:229)\n\tat org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchReportReference(PatternLocator.java:398)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2034)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2440)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2187)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.process(MatchLocator.java:1548)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1033)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1074)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1195)\n\tat org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:94)\n\tat org.eclipse.jst.jsp.core.internal.java.search.JSPSearchParticipant.locateMatches(JSPSearchParticipant.java:96)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:212)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:503)\n\tat org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:538)\n\tat org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport$SearchJob.run(JSPSearchSupport.java:142)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Yes, looks like the same thing.\n\n*** This bug has been marked as a duplicate of 149330 ***",
    "I\u0027ve installed the latest maintenance build (http://www.eclipse.org/downloads/download.php?file\u003d/webtools/downloads/drops/R1.5/M-1.5.1-200608032139/wtp-M-1.5.1-200608032139.zip) and I\u0027m still having the same problem.  One or 2 searches worked after updating, but then another failed and the .log file contains the same stack traces I reported previously:\n\n!ENTRY org.eclipse.jst.jsp.ui 4 4 2006-08-07 08:06:32.146\n!MESSAGE null\n!STACK 0\norg.eclipse.jface.text.BadLocationException\n\tat org.eclipse.jface.text.ListLineTracker.getLineNumberOfOffset(ListLineTracker.java:140)\n\tat org.eclipse.jface.text.AbstractLineTracker.getLineNumberOfOffset(AbstractLineTracker.java:161)\n\tat org.eclipse.jface.text.AbstractDocument.getLineOfOffset(AbstractDocument.java:841)\n\tat org.eclipse.jst.jsp.ui.internal.java.search.JSPSearchRequestor.addSearchMatch(JSPSearchRequestor.java:50)\n\tat org.eclipse.jst.jsp.ui.internal.java.search.BasicJSPSearchRequestor.acceptSearchMatch(BasicJSPSearchRequestor.java:67)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.report(MatchLocator.java:1658)\n\tat org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference(MethodLocator.java:423)\n\tat org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference(MethodLocator.java:336)\n\tat org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchReportReference(PatternLocator.java:398)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2034)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2440)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2187)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.process(MatchLocator.java:1548)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1033)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1074)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1195)\n\tat org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:94)\n\tat org.eclipse.jst.jsp.core.internal.java.search.JSPSearchParticipant.locateMatches(JSPSearchParticipant.java:96)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:212)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:503)\n\tat org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:538)\n\tat org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport$SearchJob.run(JSPSearchSupport.java:142)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n\nAlso, I should note that this is not a Dynamic Web Project, just a simple Java project.\n",
    "I\u0027ve installed the latest maintenance build too and the problem was not solved.\nMy log file doesn\u0027t contain any errors.\n\nWhen using the \"references in workspace\" for the first time it starts searching the JSPs too (according to the search progress) but stops immediately. Additional searches don\u0027t even try the JSPs.\n\nIn my opinion, it looks like some kind of an indexing problem on the JSP files.\n",
    "I too am having the same problem.  Being able to do a reference search in jsp\u0027s is a showstopper for many of us.  Any help would be greatly appreciated.",
    "Reopening, but I haven\u0027t managed to reproduce it, yet.",
    "(In reply to comment #7)\n\u003e Reopening, but I haven\u0027t managed to reproduce it, yet.\n\nI volunteer to help if I can.  I haven\u0027t done any development or debugging of Eclipse, but I\u0027d love to start.  Perhaps you could provide a patch which prints diagnostic info (like which JSP file it fails on) so I can start to narrow it down.\n\n\n",
    "This is definitely a regression.  I switched back to Eclipse 3.1.2/WTP 1.0 with the same project and it works fine.  But the log error I reported may have been a red herring, since I still see the error frequently with WTP 1.0, but the search still works.",
    "(In reply to comment #5)\n\u003e I\u0027ve installed the latest maintenance build too and the problem was not solved.\n\u003e My log file doesn\u0027t contain any errors.\n\u003e \n\u003e When using the \"references in workspace\" for the first time it starts searching\n\u003e the JSPs too (according to the search progress) but stops immediately.\n\u003e Additional searches don\u0027t even try the JSPs.\n\u003e \n\u003e In my opinion, it looks like some kind of an indexing problem on the JSP files.\n\u003e \n\nSame here. The stacktrace given above, does not show up in my log. There simply aren\u0027t JSP search results (for references that are certainly there). The problem is also manifest with refactoring (but the same codebase is used, I guess).",
    "When displaying the search results it shows \"(no JRE)\" in search status line. This happens for the case where Java references are found, as for the case where no JSP are found. What does this mean?\n\nMaybe the the references search code thinks that there is no JRE, and doesn\u0027t attempt to compile the JSPs? (Tested with JDK 1.5, (Sun and JRockit))",
    "I was using the new Execution Environment feature of Eclipse 3.2 as the JRE for my project.  Could that be the problem?  Has anyone reproduced this when using the old style JRE configuration?",
    "Removing target until we (I) can reliably reproduce the problem case.  Bruno (or anyone), is there a sample project that\u0027s having problems that you can attach to this bug?",
    "Created an attachment (id\u003d50244)\nSample project files\n\nI don\u0027t know if this will help much, but here are the config files for my project that has this problem.  As you can probably see, the project is quite large and it would take a long time to determine the cause by whittling it down.",
    "Could this be somehow related to bug 146146 and/or bug 131701?  I have errors in my .log that indicate timeouts when loading core plugins:\n\n!MESSAGE While loading class \"org.eclipse.pde.internal.core.WorkspaceModelManager\", thread \"main\" timed out waiting (5000ms) for thread \"Framework Event Dispatcher\" to finish starting bundle \"org.eclipse.pde.core\". To avoid deadlock, thread \"main\" is proceeding but \"org.eclipse.pde.internal.core.WorkspaceModelManager\" may not be fully initialized.\n!STACK 0\njava.lang.Exception: Generated exception.\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass(EclipseLazyStarter.java:75)\n\tat org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:409)",
    "Created an attachment (id\u003d50251)\nStartup log errors\n\nThis is all the startup errors I have.",
    "This problem still occurs with wst/jst 1.5.2 on Eclipse 3.2.1.  But I did have one new observation.  In a different project that I started working on, the search locates occurrences in JSP files which are in the deployed WebLogic domain but not in the original source locations.  We are not using JST at all for the actual deployment (all home-grown scripts).  But the generated domain directory is located within the project directory.\n",
    "I re-created my worksapce using Eclipse 3.2.1 and the problem is now gone.\nMaybe it is related to workspace migration from previous Eclipse versions. ",
    "Even I use WTP2.0M3 and Eclipse 3.3M3, the problem still exist.",
    "I re-created my workspace and the problem was gone.\nMaybe the problem is related to workspaces migrated from older version of Eclipse.",
    "I do have the same problem: I have a recently created (with WTP 1.5.3) Dynamic Web Project with Java source files and JSPs: if I edit a JSP, click \"F3\" on a Java class to go to its declaration in Java source file and then I do \"References | Project\" (or \"References | Workspace\"), the mentioned JSP does not show up in the search view.\n\nI thought this feature was not implemented in WTP, because I never got it to work (although I always wondered why, before searching, Eclipse indexed all JSP files too...), at least in WTP 1.5.x... Then I found this bug report, so I hope it could be fixed soon, because this function would be very precious.\n\nUnfortunately, the project I\u0027m working on is very huge and I cannot submit it... I may try to set up a small project to see if I can reproduce the problem."
  ],
  "commentCreationDates": [
    "2006-07-25T15:05:18+02:00",
    "2006-07-25T21:58:24+02:00",
    "2006-08-05T02:53:16+02:00",
    "2006-08-06T15:20:47+02:00",
    "2006-08-07T14:13:33+02:00",
    "2006-08-07T17:00:46+02:00",
    "2006-08-07T19:19:57+02:00",
    "2006-08-08T20:11:52+02:00",
    "2006-08-08T20:16:59+02:00",
    "2006-08-11T17:38:15+02:00",
    "2006-08-31T09:15:43+02:00",
    "2006-08-31T09:36:30+02:00",
    "2006-09-01T15:23:06+02:00",
    "2006-09-14T19:48:06+02:00",
    "2006-09-15T13:30:03+02:00",
    "2006-09-15T15:11:18+02:00",
    "2006-09-15T15:12:28+02:00",
    "2006-12-13T19:10:02+01:00",
    "2006-12-17T07:11:03+01:00",
    "2006-12-26T09:09:56+01:00",
    "2006-12-27T13:08:58+01:00",
    "2007-05-24T10:04:38+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jface.text.BadLocationException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.ListLineTracker.getLineNumberOfOffset",
          "source": "ListLineTracker.java:140"
        },
        {
          "method": "org.eclipse.jface.text.AbstractLineTracker.getLineNumberOfOffset",
          "source": "AbstractLineTracker.java:161"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.getLineOfOffset",
          "source": "AbstractDocument.java:841"
        },
        {
          "method": "org.eclipse.jst.jsp.ui.internal.java.search.JSPSearchRequestor.addSearchMatch",
          "source": "JSPSearchRequestor.java:50"
        },
        {
          "method": "org.eclipse.jst.jsp.ui.internal.java.search.BasicJSPSearchRequestor.acceptSearchMatch",
          "source": "BasicJSPSearchRequestor.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.report",
          "source": "MatchLocator.java:1658"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference",
          "source": "TypeReferenceLocator.java:531"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference",
          "source": "TypeReferenceLocator.java:425"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference",
          "source": "TypeReferenceLocator.java:299"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference",
          "source": "TypeReferenceLocator.java:279"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.OrLocator.matchReportReference",
          "source": "OrLocator.java:229"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchReportReference",
          "source": "PatternLocator.java:398"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2034"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2440"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2187"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.process",
          "source": "MatchLocator.java:1548"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1033"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1074"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1195"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches",
          "source": "JavaSearchParticipant.java:94"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchParticipant.locateMatches",
          "source": "JSPSearchParticipant.java:96"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches",
          "source": "BasicSearchEngine.java:212"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.search",
          "source": "BasicSearchEngine.java:503"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.search",
          "source": "SearchEngine.java:538"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport$SearchJob.run",
          "source": "JSPSearchSupport.java:142"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "151689",
      "date": "2006-08-05T02:53:16+02:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    },
    {
      "exceptionType": "org.eclipse.jface.text.BadLocationException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.ListLineTracker.getLineNumberOfOffset",
          "source": "ListLineTracker.java:140"
        },
        {
          "method": "org.eclipse.jface.text.AbstractLineTracker.getLineNumberOfOffset",
          "source": "AbstractLineTracker.java:161"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.getLineOfOffset",
          "source": "AbstractDocument.java:841"
        },
        {
          "method": "org.eclipse.jst.jsp.ui.internal.java.search.JSPSearchRequestor.addSearchMatch",
          "source": "JSPSearchRequestor.java:50"
        },
        {
          "method": "org.eclipse.jst.jsp.ui.internal.java.search.BasicJSPSearchRequestor.acceptSearchMatch",
          "source": "BasicJSPSearchRequestor.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.report",
          "source": "MatchLocator.java:1658"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference",
          "source": "MethodLocator.java:423"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference",
          "source": "MethodLocator.java:336"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchReportReference",
          "source": "PatternLocator.java:398"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2034"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2440"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2187"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.process",
          "source": "MatchLocator.java:1548"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1033"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1074"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1195"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches",
          "source": "JavaSearchParticipant.java:94"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchParticipant.locateMatches",
          "source": "JSPSearchParticipant.java:96"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches",
          "source": "BasicSearchEngine.java:212"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.search",
          "source": "BasicSearchEngine.java:503"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.search",
          "source": "SearchEngine.java:538"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport$SearchJob.run",
          "source": "JSPSearchSupport.java:142"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "151689",
      "date": "2006-08-07T14:13:33+02:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.Exception",
      "message": "Generated exception.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass",
          "source": "EclipseLazyStarter.java:75"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass",
          "source": "ClasspathManager.java:409"
        }
      ],
      "number": 2,
      "commentIndex": 15,
      "bugId": "151689",
      "date": "2006-09-15T15:11:18+02:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    }
  ],
  "groupId": "151689",
  "bugId": "151689",
  "date": "2006-07-25T15:05:18+02:00",
  "product": "Web Tools",
  "component": "jst.jsp",
  "severity": "major"
}