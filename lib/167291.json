{
  "comments": [
    "build i1129.\n\nIn Orbit, we are using the naming convention of \"the bundle name is the most dominant package name\". The Ant bundle is one that is being considered being put into Orbit but when reviewing the bundle, it was discovered that the dominant package name is org.apache.tools.ant.\n\nWhat we would like to do is:\n- create a new bundle called org.apache.tools.ant\n- populate it with the contents of the current org.apache.ant bundle\n- have org.apache.ant import org.apache.tools.ant and re-export it\n\n(the Ant bundle and wrapper can be found on bug 165356 attachment 55335)\n\nOne of the problems that I am experiencing, is I am unable to open an XML editor with this new setup. When I try, I get an NPE. (stack trace to follow at end of this report)\n\nSpecifically, it looks like AntCorePreferences#getDefaultAntHomeEntries is making assumptions about the name of the bundle. So in this case I presume that it finds the wrapper bundle, looks for its libraries in the classpath header in the manifest, and comes up empty.\n\nWe need to determine if there is another way to figure out exactly who is contributing the Ant code and how to get their libraries.\n\njava.lang.NullPointerException\n\tat java.util.Hashtable.put(Hashtable.java:396)\n\tat java.util.Properties.setProperty(Properties.java:128)\n\tat java.lang.System.setProperty(System.java:700)\n\tat org.eclipse.ant.internal.ui.model.AntModel.processAntHome(AntModel.java:475)\n\tat org.eclipse.ant.internal.ui.model.AntModel.initializeProject(AntModel.java:366)\n\tat org.eclipse.ant.internal.ui.model.AntModel.prepareForFullParse(AntModel.java:341)\n\tat org.eclipse.ant.internal.ui.model.AntModel.parseDocument(AntModel.java:305)\n\tat org.eclipse.ant.internal.ui.model.AntModel.reconcile(AntModel.java:263)\n\tat org.eclipse.ant.internal.ui.model.AntModel.getProjectNode(AntModel.java:1383)\n\tat org.eclipse.ant.internal.ui.model.AntModel.getProjectNode(AntModel.java:1393)\n\tat org.eclipse.ant.internal.ui.editor.text.AntFoldingStructureProvider.updateFoldingRegions(AntFoldingStructureProvider.java:88)\n\tat org.eclipse.ant.internal.ui.editor.AntEditor.projectionEnabled(AntEditor.java:1370)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.fireProjectionEnabled(ProjectionViewer.java:481)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.enableProjection(ProjectionViewer.java:529)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.doOperation(ProjectionViewer.java:1419)\n\tat org.eclipse.ant.internal.ui.editor.AntEditor$StatusLineSourceViewer.doOperation(AntEditor.java:302)\n\tat org.eclipse.ant.internal.ui.editor.AntEditor.createPartControl(AntEditor.java:1103)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:607)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:378)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:566)\n\tat org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:218)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2571)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2504)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$10(WorkbenchPage.java:2496)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2481)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2476)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2461)\n\tat org.eclipse.ui.ide.IDE.openEditor(IDE.java:515)\n\tat org.eclipse.ui.ide.IDE.openEditor(IDE.java:474)\n\tat org.eclipse.ui.internal.ide.EditorAreaDropAdapter.openNonExternalEditor(EditorAreaDropAdapter.java:144)\n\tat org.eclipse.ui.internal.ide.EditorAreaDropAdapter.asyncDrop(EditorAreaDropAdapter.java:117)\n\tat org.eclipse.ui.internal.ide.EditorAreaDropAdapter.access$0(EditorAreaDropAdapter.java:83)\n\tat org.eclipse.ui.internal.ide.EditorAreaDropAdapter$1.run(EditorAreaDropAdapter.java:77)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3440)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3080)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1945)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1909)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:425)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:348)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:341)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:285)\n\tat org.eclipse.core.launcher.Main.run(Main.java:987)\n\tat org.eclipse.core.launcher.Main.main(Main.java:962)",
    "Darin, I have code for this but need to test it a bit more before attaching.",
    "Created an attachment (id\u003d57471)\npatch for AntCorePreferences\n\nThe old code called Platform#getBundle(\"org.apache.ant\"). The new code says \"get me the bundle which exports the \u0027org.apache.tools.ant\u0027 package\".\n",
    "Note that the above patch solves one of the problems of using wrapped bundles, but I haven\u0027t tested it further so we should keep this report open for now.",
    "Thanks... I will plan to include this in 3.3 M5",
    "Released patch. All tests run. Thanks!\n\nMy only worry is the remote possibility that someother plugin will export the \u0027org.apache.tools.ant\u0027 package.",
    "Verified."
  ],
  "commentCreationDates": [
    "2006-12-08T20:52:06+01:00",
    "2007-01-17T19:37:09+01:00",
    "2007-01-24T20:52:01+01:00",
    "2007-01-24T20:53:11+01:00",
    "2007-01-24T21:02:31+01:00",
    "2007-01-27T17:45:05+01:00",
    "2007-01-27T17:46:19+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.util.Hashtable.put",
          "source": "Hashtable.java:396"
        },
        {
          "method": "java.util.Properties.setProperty",
          "source": "Properties.java:128"
        },
        {
          "method": "java.lang.System.setProperty",
          "source": "System.java:700"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.processAntHome",
          "source": "AntModel.java:475"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.initializeProject",
          "source": "AntModel.java:366"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.prepareForFullParse",
          "source": "AntModel.java:341"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.parseDocument",
          "source": "AntModel.java:305"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.reconcile",
          "source": "AntModel.java:263"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.getProjectNode",
          "source": "AntModel.java:1383"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.getProjectNode",
          "source": "AntModel.java:1393"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.text.AntFoldingStructureProvider.updateFoldingRegions",
          "source": "AntFoldingStructureProvider.java:88"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditor.projectionEnabled",
          "source": "AntEditor.java:1370"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.fireProjectionEnabled",
          "source": "ProjectionViewer.java:481"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.enableProjection",
          "source": "ProjectionViewer.java:529"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.doOperation",
          "source": "ProjectionViewer.java:1419"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditor$StatusLineSourceViewer.doOperation",
          "source": "AntEditor.java:302"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditor.createPartControl",
          "source": "AntEditor.java:1103"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:607"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:378"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.getEditor",
          "source": "EditorReference.java:218"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2571"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2504"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$10",
          "source": "WorkbenchPage.java:2496"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:2481"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2476"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2461"
        },
        {
          "method": "org.eclipse.ui.ide.IDE.openEditor",
          "source": "IDE.java:515"
        },
        {
          "method": "org.eclipse.ui.ide.IDE.openEditor",
          "source": "IDE.java:474"
        },
        {
          "method": "org.eclipse.ui.internal.ide.EditorAreaDropAdapter.openNonExternalEditor",
          "source": "EditorAreaDropAdapter.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.EditorAreaDropAdapter.asyncDrop",
          "source": "EditorAreaDropAdapter.java:117"
        },
        {
          "method": "org.eclipse.ui.internal.ide.EditorAreaDropAdapter.access$0",
          "source": "EditorAreaDropAdapter.java:83"
        },
        {
          "method": "org.eclipse.ui.internal.ide.EditorAreaDropAdapter$1.run",
          "source": "EditorAreaDropAdapter.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3440"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3080"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1945"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1909"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:425"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:348"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:341"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:285"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:987"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:962"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "167291",
      "date": "2006-12-08T20:52:06+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "167291",
  "bugId": "167291",
  "date": "2006-12-08T20:52:06+01:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}