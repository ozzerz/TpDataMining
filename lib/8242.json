{
  "comments": [
    "Build: 20020123\n\nDescription: Press F1 to get the help dialog to pop up. Then if you choose one \nof the options given to you or if you click outside of the dialog, everything \nis fine. However, there is an empty area in the dialog, through which you can \nsee the view behind it. If you click in the area of the dialog that is empty, \nyou get an internal error, string index out of range.\n\nLog: Wed Jan 23 14:34:29 EST 2002\n1 org.eclipse.core.resources 4 Unhandled exception caught in event loop.\nLog: Wed Jan 23 14:34:29 EST 2002\n4 org.eclipse.ui 0 String index out of range: -28\njava.lang.StringIndexOutOfBoundsException: String index out of range: -28\n\tat java.lang.String.substring(String.java(Compiled Code))\n\tat org.eclipse.help.internal.ui.StyledLineWrapper.getTextRange\n(StyledLineWrapper.java:100)\n\tat org.eclipse.swt.custom.WrappedContent.getLine(WrappedContent.java:91)\n\tat org.eclipse.swt.custom.StyledText.getOffsetAtMouseLocation\n(StyledText.java:3802)\n\tat org.eclipse.swt.custom.StyledText.doMouseLocationChange\n(StyledText.java:2341)\n\tat org.eclipse.swt.custom.StyledText.handleMouseDown\n(StyledText.java:4989)\n\tat org.eclipse.swt.custom.StyledText$9.handleEvent(StyledText.java:4810)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:827)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:878)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:321)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:151)\n\tat org.eclipse.core.launcher.Main.run(Main.java:502)\n\tat org.eclipse.core.launcher.Main.main(Main.java:362)",
    "This bug only appeared in the latest driver , as it works fine with the latest \nintegration build. Will investigate...\n",
    "This seems to be caused by SWT changes made to the StyledText or related \nclasses in the past few days. \n\nThe F1 infopop uses a StyledText with a StyledTextContent. \nWe did not make any change to this code so the SWT changes broke the F1 help.\nThe help code can be found in the org.eclipse.help.internal.ui in the following \nclasses:\n\nStyledLineWrapper (an implementation of StyleTextContent)\nContextHelpDialog.createInfoAread(...)  \n  - this creates the StyledText and sets the StyledLineWrapper object.\n\nIf we need to make any changes to be compatible with the latest StyledText \nplease let us know what those changes should be and re-route the bug back to \nhelp.\n\nThanks!\n",
    "Please investigate.",
    "Sent the mail below to Dorian last night as part of investigating bug 8190. \nIt\u0027s possible that StyledText is asking the StyledLineWrapper for a bogus line \nwhen word wrap is on. The empty area in the context help dialog quoted in the \nbug is where the StyledText widget is.\nWill investigate.\n\n------\nLast week we released a version of StyledText with word wrap support. I just \ndid a search for users of the WRAP style and noticed that the ContextHelpDialog \ncreates a StyledText widget with the WRAP style bit and also does its own \nwrapping. \nWhile this should work, it currently does not. I will look into why not later \nthis week. There is another user (AntConsole) of StyledText that uses the WRAP \nstyle which may cause the bug quoted above. I\u0027d like to look into that problem \nfirst. In the meantime, please remove the WRAP style bit in \nContextHelpDialog.createInfoArea to make sure that the context help works in \nthis week\u0027s milestone build. You can add yourself to the CC list of the bug to \nstay current on that part of the problem.\nIs there any other place in the help system where you use the WRAP style for \nthe StyledText widget or a TextViewer that I missed?\n",
    "I removed the SWT_WRAP style when constructing the StyledText with my own line \nwrapper, as per Knut\u0027s suggestion, and things work fine now.",
    "Dup of 8190. Fixed this morning.\n\n*** This bug has been marked as a duplicate of 8190 ***"
  ],
  "commentCreationDates": [
    "2002-01-23T19:31:12+01:00",
    "2002-01-23T20:00:32+01:00",
    "2002-01-23T23:22:39+01:00",
    "2002-01-24T14:25:36+01:00",
    "2002-01-24T14:50:10+01:00",
    "2002-01-24T14:55:29+01:00",
    "2002-01-24T14:59:22+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StringIndexOutOfBoundsException",
      "message": "String index out of range: -28",
      "elements": [
        {
          "method": "java.lang.String.substring",
          "source": "String.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.help.internal.ui.StyledLineWrapper.getTextRange",
          "source": "StyledLineWrapper.java:100"
        },
        {
          "method": "org.eclipse.swt.custom.WrappedContent.getLine",
          "source": "WrappedContent.java:91"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getOffsetAtMouseLocation",
          "source": "StyledText.java:3802"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.doMouseLocationChange",
          "source": "StyledText.java:2341"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleMouseDown",
          "source": "StyledText.java:4989"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$9.handleEvent",
          "source": "StyledText.java:4810"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:827"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:878"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:321"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:151"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:502"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:362"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "8242",
      "duplicateId": "8190",
      "date": "2002-01-23T19:31:12+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "9191",
  "bugId": "8242",
  "duplicateId": "8190",
  "date": "2002-01-23T19:31:12+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "major"
}