{
  "comments": [
    "3.0 RC2\n\nThe same message will be shown by UI when locking fails, regardless the nature\nof the failure.\n\ncase 1) Location#lock returns false - the \"Current workspace is already in use\"\nis shown\ncase 2) Location#lock throws an IOException - something like \"An error happened\ntrying to lock the workspace\" should be shown to the user, and the IOException\nshould be logged. \n\nThe same message (case 1) is being shown in both cases. \n\nFollows the code I am talking about:\n\npublic final class IDEApplication ... {\n  ...\n  private boolean checkInstanceLocation(Shell shell) {\n    ...\n    try {\n      if (instanceLoc.lock()) {\n        writeWorkspaceVersion();\n        return true;\n      }\n    } catch (IOException e) {\n      // do nothing\n    }\n    MessageDialog.openError(\n      shell,\n      IDEWorkbenchMessages\n        .getString(\"IDEApplication.workspaceCannotLockTitle\"), //$NON-NLS-1$\n      IDEWorkbenchMessages\n        .getString(\"IDEApplication.workspaceCannotLockMessage\")); //$NON-NLS-1$\n    return false;\n    ...\n  }\n  ...\n}",
    "(the summary above was extracted from bug 61061 comment 2)",
    "See also bug 63373.",
    "*** Bug 67459 has been marked as a duplicate of this bug. ***",
    "See also bug 59780 comment #5.\n\nRafael, since Andrew is no longer with the team and neither Michael nor I are up\nto speed on the desired behaviour here, would you be able to provide a UI patch?\n",
    "Ok. I believe the message coming from Core should be presented as details and\nnot as the main message. ",
    "Created an attachment (id\u003d15675)\npatches for o.e.ui.ide and o.e.osgi\n\nContains a patch with proposed fix for o.e.ui.ide, and a patch for o.e.osgi\nthat causes the error to happen everytime (will not be released\u003cg\u003e), for\ntesting purposes.",
    "Created an attachment (id\u003d15676)\nscreenshot of the resulting error dialog\n\nBesides showing this error dialog, a similar message is logged (twice?):\n\n!SESSION 2004-11-04 13:44:33.553\n-----------------------------------------------\neclipse.buildId\u003dunknown\njava.fullversion\u003dJ2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040917 (JIT\nenabled)\nJ9VM - 20040916_0908_lHdSMR\nJIT  - r7_level20040915_1801\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_CA\nCommand-line arguments: -application org.eclipse.ui.ide.workbench -pdelaunch\n\n!ENTRY org.eclipse.ui.ide 4 4 2004-11-04 13:44:33.553\n!MESSAGE Could not obtain lock for workspace location\n\n!ENTRY org.eclipse.ui.ide 4 4 2004-11-04 13:44:33.584\n!MESSAGE Could not obtain lock for workspace location\n!STACK 0\njava.io.IOException: An error occurred while locking file\n\"d:\\dev\\runtime-workspace\\.metadata\\.lock\": \"Fake error\". A probable reason is\nthat the file system or Runtime Environment does not support file locking for\nthat location. Please choose a different location, or disable file locking\n(using the osgi.locking property).\n\tat\norg.eclipse.core.runtime.adaptor.Locker_JavaNio.lock(Locker_JavaNio.java:43)\n\tat\norg.eclipse.core.runtime.adaptor.BasicLocation.lock(BasicLocation.java:160)\n\tat\norg.eclipse.core.runtime.adaptor.BasicLocation.lock(BasicLocation.java:143)\n\tat\norg.eclipse.ui.internal.ide.IDEApplication.checkInstanceLocation(IDEApplication.java:203)\n\n\tat\norg.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\n\tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n\tat\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)",
    "Thanks Rafael, the patch looks good.\n",
    "I\u0027ve released the IDE patch.\n",
    "Rafael, would you be able to verify this in M4?\n",
    "Verified fixed in 200412142000."
  ],
  "commentCreationDates": [
    "2004-06-14T19:51:58+02:00",
    "2004-06-14T19:53:37+02:00",
    "2004-06-14T19:55:03+02:00",
    "2004-06-16T16:51:15+02:00",
    "2004-11-04T16:54:36+01:00",
    "2004-11-04T17:16:04+01:00",
    "2004-11-04T19:04:45+01:00",
    "2004-11-04T19:07:42+01:00",
    "2004-11-05T16:10:42+01:00",
    "2004-11-05T16:11:00+01:00",
    "2004-12-15T19:30:41+01:00",
    "2004-12-15T19:54:59+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.io.IOException",
      "message": "An error occurred while locking file \"d:\\dev\\runtime-workspace\\.metadata\\.lock\": \"Fake error\". A probable reason is that the file system or Runtime Environment does not support file locking for that location. Please choose a different location, or disable file locking (using the osgi.locking property).",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.Locker_JavaNio.lock",
          "source": "Locker_JavaNio.java:43"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.BasicLocation.lock",
          "source": "BasicLocation.java:160"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.BasicLocation.lock",
          "source": "BasicLocation.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.checkInstanceLocation",
          "source": "IDEApplication.java:203"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:90"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 0,
      "commentIndex": 7,
      "bugId": "67053",
      "date": "2004-11-04T19:07:42+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "67053",
  "bugId": "67053",
  "date": "2004-06-14T19:51:58+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}