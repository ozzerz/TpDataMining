{
  "comments": [
    "N20070316-0010\n\nI synchronized, tried to view the first file that had changes. The compare part opens ok, but I get an error dialog, and after this I can no longer compare this file. Seems to affect only the first file.\n\nDon\u0027t know if it\u0027s a team, compare, or jface problem, figured I\u0027d start at the top.\n\n!ENTRY org.eclipse.core.jobs 4 2 2007-03-16 15:00:22.705\n!MESSAGE An internal error occurred during: \"Update comparison HelpWebappPlugin.java\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.jface.text.rules.FastPartitioner.initialize(FastPartitioner.java:163)\n\tat org.eclipse.jface.text.rules.FastPartitioner.checkInitialization(FastPartitioner.java:151)\n\tat org.eclipse.jface.text.rules.FastPartitioner.computePartitioning(FastPartitioner.java:613)\n\tat org.eclipse.jface.text.AbstractDocument.computePartitioning(AbstractDocument.java:1302)\n\tat org.eclipse.jface.text.TextUtilities.computePartitioning(TextUtilities.java:428)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler.createPresentation(PresentationReconciler.java:448)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler.processDamage(PresentationReconciler.java:565)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler.access$3(PresentationReconciler.java:563)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler$InternalListener.documentPartitioningChanged(PresentationReconciler.java:139)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler$InternalListener.documentPartitioningChanged(PresentationReconciler.java:153)\n\tat org.eclipse.jface.text.AbstractDocument.fireDocumentPartitioningChanged(AbstractDocument.java:565)\n\tat org.eclipse.jface.text.AbstractDocument.setDocumentPartitioner(AbstractDocument.java:1407)\n\tat org.eclipse.compare.structuremergeviewer.StructureCreator.setupDocument(StructureCreator.java:158)\n\tat org.eclipse.compare.structuremergeviewer.StructureCreator.createStructure(StructureCreator.java:92)\n\tat org.eclipse.compare.structuremergeviewer.StructureDiffViewer$StructureInfo.createStructure(StructureDiffViewer.java:156)\n\tat org.eclipse.compare.structuremergeviewer.StructureDiffViewer$StructureInfo.refresh(StructureDiffViewer.java:134)\n\tat org.eclipse.compare.structuremergeviewer.StructureDiffViewer$StructureInfo.setInput(StructureDiffViewer.java:105)\n\tat org.eclipse.compare.structuremergeviewer.StructureDiffViewer.compareInputChanged(StructureDiffViewer.java:332)\n\tat org.eclipse.compare.structuremergeviewer.StructureDiffViewer$2.run(StructureDiffViewer.java:72)\n\tat org.eclipse.compare.internal.Worker.performNextTask(Worker.java:116)\n\tat org.eclipse.compare.internal.Worker.run(Worker.java:63)\n\tat org.eclipse.compare.internal.WorkerJob.run(WorkerJob.java:30)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n!ENTRY org.eclipse.ui 4 0 2007-03-16 15:00:56.633\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)\n\tat org.eclipse.swt.SWT.error(SWT.java:3478)\n\tat org.eclipse.swt.SWT.error(SWT.java(Inlined Compiled Code))\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java(Inlined Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2157)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:461)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:456)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:355)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:170)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1122)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1097)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.jface.text.rules.FastPartitioner.getPositions(FastPartitioner.java:797)\n\tat org.eclipse.jface.text.rules.FastPartitioner.computePartitioning(FastPartitioner.java:620)\n\tat org.eclipse.jface.text.AbstractDocument.computePartitioning(AbstractDocument.java:1302)\n\tat org.eclipse.jface.text.TextUtilities.computePartitioning(TextUtilities.java:428)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler.createPresentation(PresentationReconciler.java:448)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler.processDamage(PresentationReconciler.java:565)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler.access$3(PresentationReconciler.java:563)\n\tat org.eclipse.jface.text.presentation.PresentationReconciler$InternalListener.inputDocumentChanged(PresentationReconciler.java:119)\n\tat org.eclipse.jface.text.TextViewer.fireInputDocumentChanged(TextViewer.java:2659)\n\tat org.eclipse.jface.text.TextViewer.setDocument(TextViewer.java:2708)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument(SourceViewer.java:518)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument(SourceViewer.java:459)\n\tat org.eclipse.compare.contentmergeviewer.TextMergeViewer$ContributorInfo.updateViewerDocument(TextMergeViewer.java:468)\n\tat org.eclipse.compare.contentmergeviewer.TextMergeViewer$ContributorInfo.internalSetDocument(TextMergeViewer.java:419)\n\tat org.eclipse.compare.contentmergeviewer.TextMergeViewer$ContributorInfo.setDocument(TextMergeViewer.java:342)\n\tat org.eclipse.compare.contentmergeviewer.TextMergeViewer.updateContent(TextMergeViewer.java:2476)\n\tat org.eclipse.compare.contentmergeviewer.ContentMergeViewer.internalRefresh(ContentMergeViewer.java:718)\n\tat org.eclipse.compare.contentmergeviewer.ContentMergeViewer.inputChanged(ContentMergeViewer.java:618)\n\tat org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:251)\n\tat org.eclipse.jdt.internal.ui.compare.JavaMergeViewer.setInput(JavaMergeViewer.java:134)\n\tat org.eclipse.compare.CompareViewerSwitchingPane.setInput(CompareViewerSwitchingPane.java:254)\n\tat org.eclipse.compare.CompareEditorInput$13.run(CompareEditorInput.java:632)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.compare.CompareEditorInput.feed1(CompareEditorInput.java:626)\n\tat org.eclipse.compare.CompareEditorInput.feedInput(CompareEditorInput.java:617)\n\tat org.eclipse.compare.CompareEditorInput.createContents(CompareEditorInput.java:454)\n\tat org.eclipse.compare.internal.CompareEditor.createCompareControl(CompareEditor.java:375)\n\tat org.eclipse.compare.internal.CompareEditor.access$2(CompareEditor.java:345)\n\tat org.eclipse.compare.internal.CompareEditor$3.run(CompareEditor.java:304)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java(Inlined Compiled Code))\n\t... 25 more",
    "Is he file in question publicly available. I would like to be able to try and reproduce the problem but I would need to know where to find the file. If it\u0027s in an Eclipse repository, that would make it easy. If not, we\u0027ll need to try and come up with another way to reproduce the failure.",
    "Here are some steps.\n\n- Check out org.eclipse.help.webapp from the eclipse cvs\n- Right click \u003e Compare with \u003e Another branch of version...\n- Create date Mar 15, 2007 and sync with it\n- Expand src/org.eclipse.help.internal.webapp and double click on HelpWebappPlugin.java\n",
    "Those steps work for me and I have Compare from HEAD and I\u0027m pretty sure I have all the Text framework from HEAD as well. I also tried it on I20070313-1051 and it worked and he haven\u0027t made any Compare changes since then so if there is a problem it could be in Text. Dani, do you have any insight on this?",
    "The NPE happens in a non-UI job and is calling computePartitioning before the document is even connected to the partitioner. This is illegal. Please keep in mind that almost all jface.text code has to run in the UI thread, hence calling StructureDiffViewer.compareInputChanged in a non-UI job might be causing the problem we see here. Interesting would be to know the code path that misses to call connect(...) completely. I was not able to reproduce such a scenario.",
    "*** Bug 179419 has been marked as a duplicate of this bug. ***",
    "Fixed by moving the structure computation into the UI thread (while still providing progress and cancellation)."
  ],
  "commentCreationDates": [
    "2007-03-16T21:08:13+01:00",
    "2007-03-16T21:24:03+01:00",
    "2007-03-16T21:43:04+01:00",
    "2007-03-16T22:11:54+01:00",
    "2007-03-17T09:33:43+01:00",
    "2007-03-27T08:05:34+02:00",
    "2007-04-27T21:00:05+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.rules.FastPartitioner.initialize",
          "source": "FastPartitioner.java:163"
        },
        {
          "method": "org.eclipse.jface.text.rules.FastPartitioner.checkInitialization",
          "source": "FastPartitioner.java:151"
        },
        {
          "method": "org.eclipse.jface.text.rules.FastPartitioner.computePartitioning",
          "source": "FastPartitioner.java:613"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.computePartitioning",
          "source": "AbstractDocument.java:1302"
        },
        {
          "method": "org.eclipse.jface.text.TextUtilities.computePartitioning",
          "source": "TextUtilities.java:428"
        },
        {
          "method": "org.eclipse.jface.text.presentation.PresentationReconciler.createPresentation",
          "source": "PresentationReconciler.java:448"
        },
        {
          "method": "org.eclipse.jface.text.presentation.PresentationReconciler.processDamage",
          "source": "PresentationReconciler.java:565"
        },
        {
          "method": "org.eclipse.jface.text.presentation.PresentationReconciler.access$3",
          "source": "PresentationReconciler.java:563"
        },
        {
          "method": "org.eclipse.jface.text.presentation.PresentationReconciler$InternalListener.documentPartitioningChanged",
          "source": "PresentationReconciler.java:139"
        },
        {
          "method": "org.eclipse.jface.text.presentation.PresentationReconciler$InternalListener.documentPartitioningChanged",
          "source": "PresentationReconciler.java:153"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentPartitioningChanged",
          "source": "AbstractDocument.java:565"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.setDocumentPartitioner",
          "source": "AbstractDocument.java:1407"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureCreator.setupDocument",
          "source": "StructureCreator.java:158"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureCreator.createStructure",
          "source": "StructureCreator.java:92"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureDiffViewer$StructureInfo.createStructure",
          "source": "StructureDiffViewer.java:156"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureDiffViewer$StructureInfo.refresh",
          "source": "StructureDiffViewer.java:134"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureDiffViewer$StructureInfo.setInput",
          "source": "StructureDiffViewer.java:105"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureDiffViewer.compareInputChanged",
          "source": "StructureDiffViewer.java:332"
        },
        {
          "method": "org.eclipse.compare.structuremergeviewer.StructureDiffViewer$2.run",
          "source": "StructureDiffViewer.java:72"
        },
        {
          "method": "org.eclipse.compare.internal.Worker.performNextTask",
          "source": "Worker.java:116"
        },
        {
          "method": "org.eclipse.compare.internal.Worker.run",
          "source": "Worker.java:63"
        },
        {
          "method": "org.eclipse.compare.internal.WorkerJob.run",
          "source": "WorkerJob.java:30"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "177831",
      "date": "2007-03-16T21:08:13+01:00",
      "product": "Platform",
      "component": "Team",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3478"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2157"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:456"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:355"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:170"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1122"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1097"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.jface.text.rules.FastPartitioner.getPositions",
            "source": "FastPartitioner.java:797"
          },
          {
            "method": "org.eclipse.jface.text.rules.FastPartitioner.computePartitioning",
            "source": "FastPartitioner.java:620"
          },
          {
            "method": "org.eclipse.jface.text.AbstractDocument.computePartitioning",
            "source": "AbstractDocument.java:1302"
          },
          {
            "method": "org.eclipse.jface.text.TextUtilities.computePartitioning",
            "source": "TextUtilities.java:428"
          },
          {
            "method": "org.eclipse.jface.text.presentation.PresentationReconciler.createPresentation",
            "source": "PresentationReconciler.java:448"
          },
          {
            "method": "org.eclipse.jface.text.presentation.PresentationReconciler.processDamage",
            "source": "PresentationReconciler.java:565"
          },
          {
            "method": "org.eclipse.jface.text.presentation.PresentationReconciler.access$3",
            "source": "PresentationReconciler.java:563"
          },
          {
            "method": "org.eclipse.jface.text.presentation.PresentationReconciler$InternalListener.inputDocumentChanged",
            "source": "PresentationReconciler.java:119"
          },
          {
            "method": "org.eclipse.jface.text.TextViewer.fireInputDocumentChanged",
            "source": "TextViewer.java:2659"
          },
          {
            "method": "org.eclipse.jface.text.TextViewer.setDocument",
            "source": "TextViewer.java:2708"
          },
          {
            "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
            "source": "SourceViewer.java:518"
          },
          {
            "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
            "source": "SourceViewer.java:459"
          },
          {
            "method": "org.eclipse.compare.contentmergeviewer.TextMergeViewer$ContributorInfo.updateViewerDocument",
            "source": "TextMergeViewer.java:468"
          },
          {
            "method": "org.eclipse.compare.contentmergeviewer.TextMergeViewer$ContributorInfo.internalSetDocument",
            "source": "TextMergeViewer.java:419"
          },
          {
            "method": "org.eclipse.compare.contentmergeviewer.TextMergeViewer$ContributorInfo.setDocument",
            "source": "TextMergeViewer.java:342"
          },
          {
            "method": "org.eclipse.compare.contentmergeviewer.TextMergeViewer.updateContent",
            "source": "TextMergeViewer.java:2476"
          },
          {
            "method": "org.eclipse.compare.contentmergeviewer.ContentMergeViewer.internalRefresh",
            "source": "ContentMergeViewer.java:718"
          },
          {
            "method": "org.eclipse.compare.contentmergeviewer.ContentMergeViewer.inputChanged",
            "source": "ContentMergeViewer.java:618"
          },
          {
            "method": "org.eclipse.jface.viewers.ContentViewer.setInput",
            "source": "ContentViewer.java:251"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.compare.JavaMergeViewer.setInput",
            "source": "JavaMergeViewer.java:134"
          },
          {
            "method": "org.eclipse.compare.CompareViewerSwitchingPane.setInput",
            "source": "CompareViewerSwitchingPane.java:254"
          },
          {
            "method": "org.eclipse.compare.CompareEditorInput$13.run",
            "source": "CompareEditorInput.java:632"
          },
          {
            "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
            "source": "BusyIndicator.java:67"
          },
          {
            "method": "org.eclipse.compare.CompareEditorInput.feed1",
            "source": "CompareEditorInput.java:626"
          },
          {
            "method": "org.eclipse.compare.CompareEditorInput.feedInput",
            "source": "CompareEditorInput.java:617"
          },
          {
            "method": "org.eclipse.compare.CompareEditorInput.createContents",
            "source": "CompareEditorInput.java:454"
          },
          {
            "method": "org.eclipse.compare.internal.CompareEditor.createCompareControl",
            "source": "CompareEditor.java:375"
          },
          {
            "method": "org.eclipse.compare.internal.CompareEditor.access$2",
            "source": "CompareEditor.java:345"
          },
          {
            "method": "org.eclipse.compare.internal.CompareEditor$3.run",
            "source": "CompareEditor.java:304"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java(Inlined Compiled Code)"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 0,
      "bugId": "177831",
      "date": "2007-03-16T21:08:13+01:00",
      "product": "Platform",
      "component": "Team",
      "severity": "normal"
    }
  ],
  "groupId": "177831",
  "bugId": "177831",
  "date": "2007-03-16T21:08:13+01:00",
  "product": "Platform",
  "component": "Team",
  "severity": "normal"
}