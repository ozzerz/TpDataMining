{
  "comments": [
    "Build ID: I20070323-1616\n\nSteps To Reproduce:\nThis bug appears to be unreproducable.  It belongs to a class of increasingly rare bugs related to JDT builds.  They commonly manifest themselves as exceptions (see below) on line 0 of a recently modified java file, or a file imported by another file which has beeen recently modified.\n\nI submit this in the general hope of helping someone track down these issues, as I cannot, in general, reproduce any of them.\n\n\nMore information:\nInternal compiler error\n\tjava.lang.ArrayIndexOutOfBoundsException: 2\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound(Scope.java:2942)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound(Scope.java:2876)\n\tat org.eclipse.jdt.internal.compiler.ast.ConditionalExpression.resolveType(ConditionalExpression.java:454)\n\tat org.eclipse.jdt.internal.compiler.ast.Assignment.resolveType(Assignment.java:184)\n\tat org.eclipse.jdt.internal.compiler.ast.Expression.resolve(Expression.java:883)\n\tat org.eclipse.jdt.internal.compiler.ast.Block.resolve(Block.java:101)\n\tat org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:233)\n\tat org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:432)\n\tat org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:195)\n\tat org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:403)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1086)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1164)\n\tat org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:359)\n\tat org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:618)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:391)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:356)\n\tat org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.compile(IncrementalImageBuilder.java:302)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:293)\n\tat org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:130)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:265)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:192)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:629)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:163)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:248)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:251)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:307)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:339)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:137)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:235)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Can you provide the source code for the offending compilation unit ?\nThe offending unit is the one carrying the internal error marker on line 0.\n",
    "I suspect that it wont help you much, but I have attached the source to a private e-mail.  Below you can find the steps which produced the original exception.  Repeating them does NOT cause the exception again.  Performing a clean before a build is what resovled the exception initially.\n\n1) Modified line 732 of AbstractRADService.java to reference \"UnboundedCollection.defaultAttributes\" rather than \"HashSet.defaultAttributes\".\n2) Imported UnboundedCollection using ctrl+shift+M.\n3) Changed line 84 of UnboundedCollection.java to give \"defaultAttributes\" type \"CollectionAttributes\" instead of \"ImmutableCollectionAttributes\".\n3a) This was to fix a compiler error on line 732 of AbstractRADService.java\n\nIf you really want, I can give you a gigantic tarball of code including everything.  It\u0027s big and quite complex, but if it\u0027ll help you...",
    "I should have mentioned that the files I sent you appear as they do AFTER the changes I listed, just to be clear.",
    "This may very well be related to Bug 180030, which is now fixed.",
    "Excuse me, I meant Bug 180109 in my previous comment.",
    "The stacktrace is different, this isn\u0027t the same problem.",
    "Olivier - pls try to work with Greg on providing reproducable steps. I think you will need the entire tarball.\n\nThe problem would be located in Scope#lowerUpperBound, in this loop:\n\n  TypeBinding[] otherBounds \u003d new TypeBinding[count - 1];\n  int rank \u003d 0;\n  for (int i \u003d 0; i \u003c count; i++) {\n\tTypeBinding mec \u003d commonDim \u003d\u003d 0 ? mecs[i] : mecs[i].leafComponentType();\n\tif (mec.isInterface()) {\n\t\totherBounds[rank++] \u003d mec; // AAIOOBE\n\t}\n  }\n\nBut the situation would have to be that \u0027mecs\u0027 only contains interfaces, which cannot occur in theory (first is always a class).",
    "Greg,\n\nCan we find a way to get the tarball? I\u0027ll investigate as soon as I get it.",
    "I just about have a zipfile, but it\u0027ll be about 4MB and I\u0027d really rather not post it to bugzilla since the licenses in the code are not finalized.  Can I just e-mail it to you?",
    "Sure.",
    "I might need the Temp project as well in order to reproduce.\nI played a bit with the project you sent, but so far I cannot reproduce the failure.\nWould it be possible to send me the Temp project as well?\nThanks.",
    "I\u0027ll e-mail you the \"Temp\" project very shortly. (Maybe 30min)\n\nHowever, it is quite unlikely that you will actually be able to reproduce this bug through any set of modifications you make.  Like the vast majority of incremental build bugs, it was highly transient.  For example, undoing and redoing the steps which caused it in the first place, did not cause it again.\n\nI suspect you\u0027ll have to examine the JDT code by hand to figure this out, since I\u0027ve never seen this bug before or since.   I tried for a good half an hour to nail down a set of steps to reproduce before giving up.\n\nOf course the combination of the infrequency of the bug, the difficulty to reproduce and the simple work-around (full build) is why I marked it as \"minor\".",
    "I could not reproduce this failure.\nIf you ever get a chance to find a more \"reproducable\" test case, let us know.",
    "I have not seen this bug in a long time, and I was never able to reproduce it.  I\u0027m currently using I20070503-1400 (3.3M7) and I suspect it\u0027s been fixed, though I have no proof.",
    "Closing as WORKSFORME then for now.\nReopen if you get it again.\nThanks."
  ],
  "commentCreationDates": [
    "2007-03-29T18:29:41+02:00",
    "2007-03-29T18:55:34+02:00",
    "2007-03-29T19:09:32+02:00",
    "2007-03-29T19:10:40+02:00",
    "2007-04-13T19:07:48+02:00",
    "2007-04-13T19:08:31+02:00",
    "2007-04-24T16:58:23+02:00",
    "2007-04-24T18:55:37+02:00",
    "2007-04-24T19:28:02+02:00",
    "2007-04-24T20:33:12+02:00",
    "2007-04-24T20:37:11+02:00",
    "2007-04-26T15:03:22+02:00",
    "2007-04-26T17:46:14+02:00",
    "2007-06-21T20:17:59+02:00",
    "2007-06-21T20:30:40+02:00",
    "2007-06-21T20:43:49+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "2",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound",
          "source": "Scope.java:2942"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound",
          "source": "Scope.java:2876"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ConditionalExpression.resolveType",
          "source": "ConditionalExpression.java:454"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.Assignment.resolveType",
          "source": "Assignment.java:184"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.Expression.resolve",
          "source": "Expression.java:883"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.Block.resolve",
          "source": "Block.java:101"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve",
          "source": "IfStatement.java:233"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements",
          "source": "AbstractMethodDeclaration.java:432"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements",
          "source": "MethodDeclaration.java:195"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:403"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1086"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1164"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:359"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:618"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:391"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:356"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.compile",
          "source": "IncrementalImageBuilder.java:302"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:293"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build",
          "source": "IncrementalImageBuilder.java:130"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas",
          "source": "JavaBuilder.java:265"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.build",
          "source": "JavaBuilder.java:192"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:629"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:163"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:199"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:248"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:251"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:307"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:339"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:137"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:235"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "180030",
      "date": "2007-03-29T18:29:41+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "minor"
    }
  ],
  "groupId": "180030",
  "bugId": "180030",
  "date": "2007-03-29T18:29:41+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "minor"
}