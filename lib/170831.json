{
  "comments": [
    "More information:\n\nhttp://www.eclipse.org/swt/launcher.html, \nhttp://wiki.eclipse.org/index.php/FAQ_How_do_I_run_Eclipse%3F, \nhttp://wiki.eclipse.org/index.php/Equinox_Launcher",
    "Solved for MDT OCL. \n\nBefore and after for two changed files:\n\nhttp://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.mdt/org.eclipse.ocl.releng/builder/tests/configs/local/relengbuildgtk.sh?root\u003dModeling_Project\u0026view\u003ddiff\u0026r1\u003dtext\u0026tr1\u003d1.5\u0026r2\u003dtext\u0026tr2\u003d1.3\u0026diff_format\u003dh\nhttp://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.mdt/org.eclipse.ocl.releng/builder/tests/scripts/runtests?root\u003dModeling_Project\u0026view\u003ddiff\u0026r1\u003dtext\u0026tr1\u003d1.8\u0026r2\u003dtext\u0026tr2\u003d1.2\u0026diff_format\u003dh\n\nImportant changes are the following.\n\nrelengbuildgtk.sh:\n\n1. don\u0027t pass -cp into runtests script to override value set there\nruntests -os linux -ws gtk -arch x86 -cp eclipse/startup.jar  -\u003e runtests -os linux -ws gtk -arch x86\n\nruntests:\n\n2. switch from startup.jar to launcher.jar\ncp\u003d\"eclipse/startup.jar\" -\u003e cp\u003d`find eclipse/ -name \"org.eclipse.equinox.launcher_*.jar\" | sort | head -1`\n\n3. remove -noupdate flag (not suppotred anymore)\norg.eclipse.core.launcher.Main -noupdate -\u003e org.eclipse.equinox.launcher.Main\n\n---\n\nNeed to still verify for EMFT and EMF builds.",
    "Fixed for EMF and old tests, too, though that took a little more hacking. ;-)",
    "Okay, I was wrong. This isn\u0027t working.\n\nI keep getting, since org.eclipse.test/library.xml still uses startup.jar and org.eclipse.core.launcher.Main\n\n[java] Exception in thread \"main\" java.lang.NoClassDefFoundError: org/eclipse/core/launcher/Main\n\nSo, after a bit of hacking, I now get:\n\neclipse-test:\n     [echo] Running org.eclipse.emf.ocl.tests.AllTests\n     [java] java.lang.NullPointerException\n     [java] \tat org.eclipse.equinox.launcher.Main.takeDownSplash(Main.java:1734)\n     [java] \tat org.eclipse.equinox.launcher.Main.run(Main.java:1150)\n     [java] \tat org.eclipse.equinox.launcher.Main.main(Main.java:1099)\n\nwhich is why I\u0027ve opened bug 171756 for help.\n\nYour builds will run, but your tests will fail silently. The downloads page currently implies that 0 tests run \u003d 0 failures \u003d good build. I\u0027ll try to come up with a better way to represent status, like \"DNR\", for reporting this scenario.",
    "Upgrading to blocker.",
    "Fixed. Detailed solution will be posted to wiki, http://wiki.eclipse.org/index.php/PDE_JUnit_Testing",
    "Added visual indication in both downloads page and testResults.php to identify when tests don\u0027t run. New code is \"DNR\" for \"Did Not Run\".",
    "Downgrading to normal. The following projects have been converted to use equinox, and hacked to use a patched version of org.eclipse.test/library.xml, per details in the wiki. \n\nEMFT: OCL, Query, Validation, Transaction, JET\nMDT: OCL, UML2 Tools\nEMF: EMF\n\nIf you don\u0027t have access to your EMFT releng to make these changes, just bug me and I\u0027ll fix them for the remaining 5 projects (EODM, Teneo, CDO, Net4J, JET Editor). \n",
    "(In reply to comment #7)\n\u003e If you don\u0027t have access to your EMFT releng to make these changes, just bug me\n\u003e and I\u0027ll fix them for the remaining 5 projects (EODM, Teneo, CDO, Net4J, JET\n\u003e Editor). \n\u003e \nNick, please help me make the changes to EODM releng code.\n\n",
    "Created an attachment (id\u003d59024)\nPatch for EODM releng code for the bug\n\n",
    "Fixes and equinox hack applied for EODM. Spun a 0.8.0M5 Stable build to verify. If you\u0027re happy with that build, please feel free to promote it.\n",
    "Also applied fixes for Teneo and JET Editor. CDO and Net4j are still using\nEMF2.2 in their HEAD, so have not been migrated.",
    "Nick, I haven\u0027t read the whole story here. Since I\u0027m working on completely new code in HEAD for Net4j and CDO I didn\u0027t try to do automatic builds so far. But what you say is not correct. Net4j in HEAD does not use EMF at all and CDO in HEAD does use newest EMF 2.3 integration builds. Only in case it matters ;-)\n",
    "(In reply to comment #12)\n\u003e Nick, I haven\u0027t read the whole story here. Since I\u0027m working on completely new\n\u003e code in HEAD for Net4j and CDO I didn\u0027t try to do automatic builds so far. But\n\u003e what you say is not correct. Net4j in HEAD does not use EMF at all and CDO in\n\u003e HEAD does use newest EMF 2.3 integration builds. Only in case it matters ;-)\n\nIn a nutshell, if you plan to build using Eclipse 3.3M5 or later, you need to apply this fix. The hack is required until bug 171756 is resolved.\n\nIf your HEAD contains code that will use Eclipse 3.3M5 (and/or EMF 2.3), then I can apply this for you. If not, then I\u0027ll wait until you\u0027re ready.\n\nDid you ever figure out what wrong with your CDO builds? ",
    "You can wait until I\u0027m ready to run automatic builds for the new Net4j and CDO versions. I\u0027ll come back when time comes ;-)\n\nNo, I was not able to figure out why the CDO maintenance build is broken. After hours and weeks I\u0027m annoyed by that fact and spend every free minute to develop the new streams, hoping that they can be build automatically.",
    "(In reply to comment #14)\n\u003e No, I was not able to figure out why the CDO maintenance build is broken. After\n\u003e hours and weeks I\u0027m annoyed by that fact and spend every free minute to develop\n\u003e the new streams, hoping that they can be build automatically.\n\nI\u0027m sorry I couldn\u0027t point you in the right direction. Here\u0027s hoping your new stuff will co-operate better w/ the black magic that is PDE. ;-) \n\n",
    "(In reply to comment #11)\n\u003e Also applied fixes for Teneo.\n\nLooks like the latest EMF 2.3M5 + Eclipse 3.3M5 causes your tests to throw NPEs and die:\n\nhttp://emft.eclipse.org/emft/downloads/?project\u003dteneo\u0026sortBy\u003ddate\u0026hlbuild\u003d0#latest\nhttp://emft.eclipse.org/technology/emft/teneo/downloads/drops/0.8.0/S200702161130/testresults/consolelogs/linux.gtk_consolelog.txt\n\nNot sure what caused this; in addition to the changes required for this bug, I also updated your scripts to match the latest template:\n\nhttp://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.emft/releng/teneo/builder/tests/scripts/runtests?root\u003dTechnology_Project\u0026view\u003ddiff\u0026r1\u003dtext\u0026tr1\u003d1.3\u0026r2\u003dtext\u0026tr2\u003d1.2\u0026diff_format\u003dh\n\nSee lines 121/126 onward. Could the extra JDK5.0 stuff or -enableassertions have caused any problems? Or could this be because of a new change in EMF since M4?\n",
    "Looks like the only components not yet upgraded and tested are CDO/Net4J, which appear to still be using Eclipse 3.2 / EMF 2.2 (and thus this bug does not apply).\n\nClosing."
  ],
  "commentCreationDates": [
    "2007-01-17T21:11:23+01:00",
    "2007-01-19T02:01:39+01:00",
    "2007-01-20T16:29:49+01:00",
    "2007-01-26T15:25:26+01:00",
    "2007-01-29T18:22:37+01:00",
    "2007-01-31T20:03:25+01:00",
    "2007-01-31T22:16:33+01:00",
    "2007-02-02T20:12:51+01:00",
    "2007-02-15T04:12:09+01:00",
    "2007-02-15T07:10:26+01:00",
    "2007-02-16T16:02:13+01:00",
    "2007-02-16T16:26:56+01:00",
    "2007-02-16T16:46:20+01:00",
    "2007-02-16T18:16:28+01:00",
    "2007-02-16T18:41:37+01:00",
    "2007-02-16T19:33:29+01:00",
    "2007-02-16T22:45:17+01:00",
    "2007-04-04T21:52:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/core/launcher/Main  So, after a bit of hacking, I now get:  eclipse-test:      [echo] Running org.eclipse.emf.ocl.tests.AllTests      [java] java.lang.NullPointerException      [java]",
      "elements": [
        {
          "method": "org.eclipse.equinox.launcher.Main.takeDownSplash",
          "source": "Main.java:1734"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "170831",
      "date": "2007-01-26T15:25:26+01:00",
      "product": "Modeling",
      "component": "Releng",
      "severity": "normal"
    }
  ],
  "groupId": "170831",
  "bugId": "170831",
  "date": "2007-01-17T21:11:23+01:00",
  "product": "Modeling",
  "component": "Releng",
  "severity": "normal"
}