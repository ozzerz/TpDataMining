{
  "comments": [
    "We have a model that is generated using EMF 2.2, but runs on EMF 2.3. \nThese problems appeared in 2.3 I200704121441, and was fine in 2.3.0M6.\n\nThe change is due to a change in the implementation of XMLTypeFactoryImpl.convertQNameToString() which used to allow virtually any Object type (and still does in the signature) and then promply gets rude if you\u0027re not a QName. \n\nFrom CVS:\n\nXMLTypeFactoryImpl, v1.25, 12/9/06:\n  /**\n   * \u003c!-- begin-user-doc --\u003e\n   * \u003c!-- end-user-doc --\u003e\n   * @generated NOT\n   */\n  public String convertTimeToString(EDataType eDataType, Object instanceValue)\n  {\n    return instanceValue \u003d\u003d null ? null : instanceValue.toString();\n  }\n\nAnd now:\n\nXMLTypeFactoryImpl, v1.26, 04/04/07:\n  /**\n   * \u003c!-- begin-user-doc --\u003e\n   * \u003c!-- end-user-doc --\u003e\n   * @generated NOT\n   */\n  public String convertQNameToString(EDataType eDataType, Object instanceValue)\n  {\n    return convertQName((QName)instanceValue);\n  }\n\nPlease change it back! ;)\n\nSeamingly, convertQName() suffered a similarly rude change ;). \n\nWe are willing to test patches. \n\nThe actual exception is:\n\njava.lang.ClassCastException: java.lang.String incompatible with javax.xml.namespace.QName\n\tat org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.convertQNameToString(XMLTypeFactoryImpl.java:2791)\n\tat org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.convertToString(XMLTypeFactoryImpl.java:1898)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.updateQNamePrefix(XMLHelperImpl.java:1606)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.convertToString(XMLHelperImpl.java:1509)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.getDatatypeValue(XMLSaveImpl.java:2875)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveDataTypeSingle(XMLSaveImpl.java:1569)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures(XMLSaveImpl.java:1156)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementID(XMLSaveImpl.java:2578)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement(XMLSaveImpl.java:1070)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement(XMLSaveImpl.java:951)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap(XMLSaveImpl.java:2328)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures(XMLSaveImpl.java:1389)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementID(XMLSaveImpl.java:2578)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement(XMLSaveImpl.java:1070)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement(XMLSaveImpl.java:951)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap(XMLSaveImpl.java:2328)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures(XMLSaveImpl.java:1389)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementID(XMLSaveImpl.java:2578)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement(XMLSaveImpl.java:1070)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement(XMLSaveImpl.java:951)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap(XMLSaveImpl.java:2328)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures(XMLSaveImpl.java:1389)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.writeTopObject(XMLSaveImpl.java:638)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.traverse(XMLSaveImpl.java:562)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.save(XMLSaveImpl.java:237)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doSave(XMLResourceImpl.java:205)\n\tat com.ibm.ccl.soa.deploy.core.util.CoreResourceImpl.doSave(CoreResourceImpl.java:121)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.save(ResourceImpl.java:1253)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.save(ResourceImpl.java:964)\n..",
    "Michael,\n\nAs we discussed, the value really needs to be an instance of QName.  The older code was just very forgiving because it simply did a toString without checking the type..."
  ],
  "commentCreationDates": [
    "2007-04-23T22:22:46+02:00",
    "2007-04-23T23:34:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "java.lang.String incompatible with javax.xml.namespace.QName",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.convertQNameToString",
          "source": "XMLTypeFactoryImpl.java:2791"
        },
        {
          "method": "org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.convertToString",
          "source": "XMLTypeFactoryImpl.java:1898"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.updateQNamePrefix",
          "source": "XMLHelperImpl.java:1606"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.convertToString",
          "source": "XMLHelperImpl.java:1509"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.getDatatypeValue",
          "source": "XMLSaveImpl.java:2875"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveDataTypeSingle",
          "source": "XMLSaveImpl.java:1569"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures",
          "source": "XMLSaveImpl.java:1156"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementID",
          "source": "XMLSaveImpl.java:2578"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement",
          "source": "XMLSaveImpl.java:1070"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement",
          "source": "XMLSaveImpl.java:951"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap",
          "source": "XMLSaveImpl.java:2328"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures",
          "source": "XMLSaveImpl.java:1389"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementID",
          "source": "XMLSaveImpl.java:2578"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement",
          "source": "XMLSaveImpl.java:1070"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement",
          "source": "XMLSaveImpl.java:951"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap",
          "source": "XMLSaveImpl.java:2328"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures",
          "source": "XMLSaveImpl.java:1389"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementID",
          "source": "XMLSaveImpl.java:2578"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement",
          "source": "XMLSaveImpl.java:1070"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElement",
          "source": "XMLSaveImpl.java:951"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap",
          "source": "XMLSaveImpl.java:2328"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures",
          "source": "XMLSaveImpl.java:1389"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.writeTopObject",
          "source": "XMLSaveImpl.java:638"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.traverse",
          "source": "XMLSaveImpl.java:562"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.save",
          "source": "XMLSaveImpl.java:237"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doSave",
          "source": "XMLResourceImpl.java:205"
        },
        {
          "method": "com.ibm.ccl.soa.deploy.core.util.CoreResourceImpl.doSave",
          "source": "CoreResourceImpl.java:121"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.save",
          "source": "ResourceImpl.java:1253"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.save",
          "source": "ResourceImpl.java:964"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "183664",
      "date": "2007-04-23T22:22:46+02:00",
      "product": "EMF",
      "component": "Core",
      "severity": "critical"
    }
  ],
  "groupId": "183664",
  "bugId": "183664",
  "date": "2007-04-23T22:22:46+02:00",
  "product": "EMF",
  "component": "Core",
  "severity": "critical"
}