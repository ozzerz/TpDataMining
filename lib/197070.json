{
  "comments": [
    "Build ID: I20070621-1340\n\nSteps To Reproduce:\nWhen experiencing bug 190859, eclipse exits with result code 0, so writing a wrapper script that can act on the result code is ineffective.\n\nMore information:\nEclipse dies with NoClassDefFoundError caused by bug 190859, we get a stack trace to stderr, but $? is 0. We expect it to be non-zero. I have a patch which I will attach. \n\nHere\u0027s the stack trace for reference. \n\n\nException in thread \"Thread-1\" java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.jface.preference.PreferenceConverter\n        at org.eclipse.ui.internal.themes.ThemeElementHelper.installFont(ThemeElementHelper.java:101)\n        at org.eclipse.ui.internal.themes.ThemeElementHelper.populateRegistry(ThemeElementHelper.java:57)\n        at org.eclipse.ui.internal.Workbench$28.runWithException(Workbench.java:1426)\n        at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3296)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2974)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2311)\n        at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n        at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:108)\n        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n        at org.eclipse.equinox.launcher.Main.run(Main.java:1169)",
    "Created an attachment (id\u003d74111)\nPatches the result return from IDEApplication.start() and callback handling which caused jvm crashes during exit\n\nProposed patch which returns the actual result code instead of just EXIT_OK and handles bad callbacks which crashed the jvm.",
    "Andrew, I saw that you worked on my other patch where eclipse launcher core dumped. This patch includes a fix for core dumps from callback.c. Since this was JNI related code, I used a fastdebug build of jdk 1.6 which enables assertions in the jvm. \n\nWe would like to get this fix included in the 3.3.1 release if possible as it has affected some of our users, especially those experiencing the other bug I mentioned (190859), though we\u0027ve found a decent workaround to make that thirdparty plugin do the right thing now.\n\nBtw, gdb couldn\u0027t handle these cores very well due to the non-compiled binary code it uses if USE_ASSEMBLER is turned on. The stack backtrace was gibberish.",
    "The native code in the patch belongs to SWT, though I will be looking at the changes in equinox.launcher/Main"
  ],
  "commentCreationDates": [
    "2007-07-19T05:55:42+02:00",
    "2007-07-19T06:01:42+02:00",
    "2007-07-27T05:54:36+02:00",
    "2007-07-30T16:43:33+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "Could not initialize class org.eclipse.jface.preference.PreferenceConverter",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.themes.ThemeElementHelper.installFont",
          "source": "ThemeElementHelper.java:101"
        },
        {
          "method": "org.eclipse.ui.internal.themes.ThemeElementHelper.populateRegistry",
          "source": "ThemeElementHelper.java:57"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$28.runWithException",
          "source": "Workbench.java:1426"
        },
        {
          "method": "org.eclipse.ui.internal.StartupThreading$StartupRunnable.run",
          "source": "StartupThreading.java:31"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3296"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2974"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2311"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:108"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "197070",
      "date": "2007-07-19T05:55:42+02:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "197070",
  "bugId": "197070",
  "date": "2007-07-19T05:55:42+02:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}