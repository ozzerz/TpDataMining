{
  "comments": [
    "I\u0027m seeing this when I start up Eclipse - doesn\u0027t happen all the time, just\n\"most\" of the time :) - the following message appears in my Error Log:\n\nWhile loading class\n\"org.eclipse.jdt.internal.corext.util.AllTypesCache$1$RequestorAbort\", thread\n\"main\" timed out waiting (5000ms) for thread \"Worker-0\" to finish starting\nbundle \"org.eclipse.jdt.ui\". To avoid deadlock, thread \"main\" is proceeding but\n\"org.eclipse.jdt.internal.corext.util.AllTypesCache$1$RequestorAbort\" may not be\nfully initialized.\n\nI used to think this had to do with switching workspaces, but I have seen cases\nwhere this happened to me and multiple-workspaces didn\u0027t come into play.  So, I\nno longer think this has much if anything to do with multiple workspaces.\n\nHere\u0027s the stack for more info:\n\njava.lang.Exception: Generated exception.\nat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:102)\nat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\nat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\nat\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\nat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\nat\norg.eclipse.jdt.internal.corext.util.AllTypesCache.startBackgroundMode(AllTypesCache.java:627)\nat\norg.eclipse.jdt.internal.corext.util.AllTypesCache.access$3(AllTypesCache.java:595)\nat org.eclipse.jdt.internal.corext.util.AllTypesCache$4.run(AllTypesCache.java:589)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2780)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2451)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1569)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1540)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:285)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:220)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\nat org.eclipse.core.launcher.Main.run(Main.java:710)\nat org.eclipse.core.launcher.Main.main(Main.java:694)\n\nMy particulars... running on WinXP, JDK 1.4.2, Eclipse 3.1M4 but I\u0027ve seen this\nbehavior on 3.1M2 and 3.0.1. The plugins that I have installed: JBoss IDE 1.4,\njadClipse, Jalopy.\n\nI originally added this to bug #68129 but was told that my issue was due to a\ndifferent component and I should write it up against the JDT UI.  Hence, this\nbug report.",
    "*** Bug 68895 has been marked as a duplicate of this bug. ***",
    "John, does Eclipse really hang at startup. And what perspective are you in when\nyou shutdown and restart Eclipse ?",
    "Pascal, \n\ncan you please shed some light on this. Since I don\u0027t know what trigger the\nworker-0 thread there is little I can do. Is there any way to find out what job\nis actually running in worker thread ?",
    "Dirk - sorry if I wasn\u0027t clear.  When I say \"hang at startup\", I mean the GUI is\nnon-responsive for the first X seconds when it starts up (about 5 or 10).  It\n\"hangs\" from the user point of view.  I can\u0027t select any menu items, list items\nor any GUI components.  The perspectives that it starts up in is either Resource\nor Java (I have seen it happen in both).  Once that initial \"hang\" period, the\nGUI becomes responsive again.\n\nSo, \"hang\" was probably a bad word, since the problem isn\u0027t permanent.  Its a\ntemporary condition that only occurs during the first few seconds during startup.",
    "OK will adjust title than.",
    "Pascal, can you please comment !",
    "I\u0027m back from vacation!\nThere is no way to know what is triggering the thread \"worker-0\" nor what it is \ndoing except that it is starting the jdt.ui plugin.\nThe only thing I can say from that is that jdt.ui is taking a long time to \nstart.\n\n",
    "Now that I\u0027m fully awake, you can know who and why jdt ui is being activated by\nusing the core tools.",
    "John,\n\nis it possible that you create a VM dump the next time you are seeing the hang.\nThis would allow to understand what is going on in the worker thread. \n\nI am not seeing the hand on my machine.\n\n",
    "Unfortunately, I cannot replicate this so easily anymore (I just tried 5 or 6\ntimes right now, going to different workspaces, and didn\u0027t see it).\n\nAfter I reported this, I removed some plugins that I didn\u0027t use much, and now I\ndon\u0027t see this as often (I did see it a few days ago, but its now a rare occurence).\n\nWhen I see it again, I\u0027ll be sure to take a dump and post it here.",
    "Thanks John.",
    "If this can help, I\u0027ve got the same symptoms with:\n- JDK 1.4.2_05\n- eclipse-SDK-N20050120-0010-macosx-carbon\n- PHPEclipse1.1.2-2004-12-04\n\nSometimes (about one in three startups, with no particular pattern), when firing up Eclipse, each one of \n400 classes of PHPEclipse timeouts with 5?s (I let it do that entirely once, and, yes, I then have the \nfunctionnal environment).\n\nI went into jdb, and found Worker-0 waiting for a lock. But doing a \"lock work\" got me a \"Operation is \nnot supported on the target VM\".\n\nOK, here are my threads:\n  (java.lang.Thread)0x1                                               main                         cond. waiting\n  (org.eclipse.osgi.framework.eventmgr.EventThread)0xa10              Framework Event Dispatcher   \ncond. waiting\n  (org.eclipse.osgi.framework.eventmgr.EventThread)0xa11              Start Level Event Dispatcher cond. \nwaiting\n  (org.eclipse.core.internal.jobs.Worker)0xa12                        Worker-0                     running\n  (org.eclipse.jface.resource.ImageCache$ReferenceCleanerThread)0xa13 Reference Cleaner: 1         \ncond. waiting\n\nHere\u0027s what Worker-0 is doing, well, waiting for:\n  [1] java.lang.Object.wait (native method)\n  [2] org.eclipse.ui.internal.Semaphore.acquire (Semaphore.java:41)\n  [3] org.eclipse.ui.internal.UISynchronizer.syncExec (UISynchronizer.java:45)\n  [4] org.eclipse.swt.widgets.Display.syncExec (Display.java:3?335)\n  [5] net.sourceforge.phpdt.ui.PreferenceConstants.initializeDefaultValues (PreferenceConstants.java:2?\n249)\n  [6] net.sourceforge.phpeclipse.PHPeclipsePlugin.initializeDefaultPreferences (PHPeclipsePlugin.java:\n843)\n  [7] org.eclipse.ui.plugin.AbstractUIPlugin.initializeDefaultPluginPreferences (AbstractUIPlugin.java:354)\n  [8] org.eclipse.core.runtime.Plugin.internalInitializeDefaultPluginPreferences (Plugin.java:408)\n  [9] org.eclipse.core.internal.preferences.DefaultPreferences.applyRuntimeDefaults \n(DefaultPreferences.java:204)\n  [10] org.eclipse.core.internal.preferences.DefaultPreferences.loadDefaults (DefaultPreferences.java:\n301)\n  [11] org.eclipse.core.internal.preferences.DefaultPreferences.load (DefaultPreferences.java:297)\n  [12] org.eclipse.core.internal.preferences.EclipsePreferences.create (EclipsePreferences.java:298)\n  [13] org.eclipse.core.internal.preferences.EclipsePreferences.internalNode (EclipsePreferences.java:\n531)\n  [14] org.eclipse.core.internal.preferences.EclipsePreferences.node (EclipsePreferences.java:660)\n  [15] org.eclipse.core.internal.preferences.AbstractScope.getNode (AbstractScope.java:39)\n  [16] org.eclipse.ui.preferences.ScopedPreferenceStore.getDefaultPreferences \n(ScopedPreferenceStore.java:226)\n  [17] org.eclipse.ui.preferences.ScopedPreferenceStore.getPreferenceNodes \n(ScopedPreferenceStore.java:257)\n  [18] org.eclipse.ui.preferences.ScopedPreferenceStore.contains (ScopedPreferenceStore.java:314)\n  [19] net.sourceforge.phpeclipse.PHPeclipsePlugin.installPreferenceStoreBackwardsCompatibility \n(PHPeclipsePlugin.java:1?084)\n  [20] net.sourceforge.phpeclipse.PHPeclipsePlugin.start (PHPeclipsePlugin.java:1?224)\n  [21] org.eclipse.core.internal.compatibility.PluginActivator.start (PluginActivator.java:30)\n  [22] org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run (BundleContextImpl.java:989)\n  [23] java.security.AccessController.doPrivileged (native method)\n  [24] org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator \n(BundleContextImpl.java:985)\n  [25] org.eclipse.osgi.framework.internal.core.BundleContextImpl.start (BundleContextImpl.java:968)\n  [26] org.eclipse.osgi.framework.internal.core.BundleHost.startWorker (BundleHost.java:311)\n  [27] org.eclipse.osgi.framework.internal.core.AbstractBundle.start (AbstractBundle.java:274)\n  [28] org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass (EclipseClassLoader.java:110)\n  [29] org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass (BundleLoader.java:332)\n  [30] org.eclipse.osgi.framework.internal.core.BundleLoader.findClass (BundleLoader.java:358)\n  [31] org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass \n(AbstractClassLoader.java:94)\n  [32] java.lang.ClassLoader.loadClass (ClassLoader.java:235)\n  [33] org.eclipse.osgi.framework.internal.core.BundleLoader.loadClass (BundleLoader.java:272)\n  [34] org.eclipse.osgi.framework.internal.core.BundleHost.loadClass (BundleHost.java:222)\n  [35] org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass (AbstractBundle.java:1?213)\n  [36] org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension \n(ConfigurationElement.java:161)\n  [37] org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension \n(ConfigurationElement.java:151)\n  [38] org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension \n(ConfigurationElement.java:138)\n  [39] org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension \n(ConfigurationElementHandle.java:48)\n  [40] org.eclipse.core.internal.events.BuildManager.instantiateBuilder (BuildManager.java:718)\n  [41] org.eclipse.core.internal.events.BuildManager.initializeBuilder (BuildManager.java:670)\n  [42] org.eclipse.core.internal.events.BuildManager.getBuilder (BuildManager.java:429)\n  [43] org.eclipse.core.internal.events.BuildManager.basicBuild (BuildManager.java:195)\n  [44] org.eclipse.core.internal.events.BuildManager$1.run (BuildManager.java:226)\n  [45] org.eclipse.core.internal.runtime.InternalPlatform.run (InternalPlatform.java:1?071)\n  [46] org.eclipse.core.runtime.Platform.run (Platform.java:747)\n  [47] org.eclipse.core.internal.events.BuildManager.basicBuild (BuildManager.java:229)\n  [48] org.eclipse.core.internal.events.BuildManager.basicBuildLoop (BuildManager.java:248)\n  [49] org.eclipse.core.internal.events.BuildManager.build (BuildManager.java:277)\n  [50] org.eclipse.core.internal.events.AutoBuildJob.doBuild (AutoBuildJob.java:141)\n  [51] org.eclipse.core.internal.events.AutoBuildJob.run (AutoBuildJob.java:202)\n  [52] org.eclipse.core.internal.jobs.Worker.run (Worker.java:66)\n",
    "Could this bug get changed to Platform: All, OS: All, Version: 3.1?",
    "Guillaune,\n\nyou problem isn\u0027t caused by JDT/UI. It is cause bay the PHPPlugin itself. What\nthe do in the start method of their plug-in is a sync exec into the UI thread.\nThis definitelly asks for trouble.\n\nCan you please report the bug in the corresponding Bug system of the PHP plugin.\nThere is nothing Eclipse can do here.",
    "John,\n\nI will set the PR to remind until you can reproduce the problem.",
    "Guillaume, it might be good to open a bug report against the owner of the PHP\nplugin, because what they are doing is bad practice.",
    "I just got it to happen again this morning (side note: I had killed Eclipse\nabnormally on Friday via Windows TaskManager which reset my workspace - I now\ngot it to happen again - have no idea if that is significant or not; thought i\nshould bring it up though).\n\nI will attach my thread dump.  Sorry for the formatting, had to cut-n-paste from\ncommand window - how do you get thread dumps (via Ctrl-Break) to show up in\n.log?  All I got was the exception stack trace in .log, but nothing from\nCtrl-Break).  In any event, I think it will be helpful.",
    "Created an attachment (id\u003d17390)\nthread dump during the \"hang\"\n\nThis is the thread dump of the Eclipse JVM during the startup \"hang\".  I will\nleave it up to this issue\u0027s owner to consider reopening this issue, assuming\nthis thread dump provides enough information to continue investigation.",
    "Created an attachment (id\u003d17424)\nFormatted thread dump\n",
    "Pascal,\n\ncan you please have a look at the thread dump attached under comment #19.\n\nWhat I don\u0027t understand is the fact that main is waiting on a lock in\nEclipseClassLoader.findLocalClass (some lock for bundle state changes). However,\nthe JavaPlugin must already be loaded and initialized since code prior to that\ncall in main is code from JDT/UI\n(org.eclipse.jdt.internal.corext.util.AllTypesCache).\n\nThe Worker-0 thread seems to wait on the JavaPlugin as well.\n\nWe want to get rid of the all types cache for 3.1. However, I would like to\nunderstand what\u0027s going on here to avoid such situations in the future.",
    "Pinging Pascal...",
    "I looked at the trace several times but could not reach a conclusion.\nSorry.",
    "Sorry I did not mean to close it.",
    "Pascal, any form of speculation. As said all that happens in core runtime and I\ndon\u0027t see what JDT/UI can do here.",
    "John, have you seen such hangs in the past ?",
    "I can\u0027t remember when I started seeing this - I am almost positive I started\nseeing this in the 3.0.1 version.  I\u0027ve been using 3.1 M4 and now M5 for a\nwhile, and while I do see this problem, it doesn\u0027t seem to be as prevalent as\nbefore. Either the M\u0027s are getting more stable as you go along :-) or something\nelse is happening in the way I am using the tool that circumvents the problem\n(what that is I dunno).  For me personally, this problem isn\u0027t as serious as\nwhen I first reported it.  Before, I was getting this everytime I started\nEclipse, now I rarely see it.  It may have to do with the number of projects in\nmy workspace, but then again, I thought that before and I remember seeing the\nproblem with only a single project.  So, I\u0027m baffled."
  ],
  "commentCreationDates": [
    "2004-12-22T04:28:21+01:00",
    "2004-12-22T09:17:32+01:00",
    "2004-12-22T09:22:13+01:00",
    "2004-12-22T09:24:46+01:00",
    "2004-12-22T13:20:03+01:00",
    "2004-12-22T14:54:22+01:00",
    "2005-01-04T18:14:58+01:00",
    "2005-01-04T21:28:39+01:00",
    "2005-01-04T21:44:16+01:00",
    "2005-01-05T10:33:40+01:00",
    "2005-01-05T14:37:14+01:00",
    "2005-01-05T14:55:13+01:00",
    "2005-01-22T21:00:22+01:00",
    "2005-01-22T21:06:02+01:00",
    "2005-01-23T16:58:26+01:00",
    "2005-01-23T16:59:55+01:00",
    "2005-01-24T13:46:20+01:00",
    "2005-01-24T14:42:27+01:00",
    "2005-01-24T14:44:46+01:00",
    "2005-01-25T15:02:12+01:00",
    "2005-01-25T15:06:46+01:00",
    "2005-02-10T18:47:59+01:00",
    "2005-03-11T22:06:43+01:00",
    "2005-03-11T22:07:06+01:00",
    "2005-03-14T11:36:23+01:00",
    "2005-03-14T11:36:45+01:00",
    "2005-03-14T14:20:11+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Generated exception.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass",
          "source": "EclipseClassLoader.java:102"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:371"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:402"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:93"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:235"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:302"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.startBackgroundMode",
          "source": "AllTypesCache.java:627"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.access$3",
          "source": "AllTypesCache.java:595"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache$4.run",
          "source": "AllTypesCache.java:589"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:118"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2780"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2451"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1569"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1540"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:285"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:220"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:710"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:694"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "81766",
      "date": "2004-12-22T04:28:21+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "81766",
  "bugId": "81766",
  "date": "2004-12-22T04:28:21+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}