{
  "comments": [
    "After \"upgrading\" to eclipse 3.2M5a and AJDT 20060224163227 I repeatedly get the following stack trace on a regular Java class:\n\njava.lang.ArrayIndexOutOfBoundsException\nat org.aspectj.weaver.ReferenceType.determineThoseTypesToUse(ReferenceType.java:465)\nat org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.java:411)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:1199)\nat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1047)\nat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:300)\nat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:178)\nat org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.aj:70)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:367)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:824)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:234)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:157)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nArrayIndexOutOfBoundsException thrown: -1\n\nThis happens even when the class is the only file in a fresh project (without any aspects!); existing AJ projects work fine as soon as this class is excluded from the build path. When the class is moved into a different project and referenced as dependency everything works as expected.\nThis used to work fine with previous versions of AJDT up to the last release for eclipse 3.1.",
    "Created an attachment (id\u003d35403)\neclipse project demonstrating the AIOOB\n\nsmall eclipse project with a single Java class that causes AJDT to hiccup. The class works fine otherwise.\n",
    "Reproduced on the command line:\najc -1.5 common/SkipList.java\nABORT\n\nException thrown from AspectJ DEVELOPMENT\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\n-1\n\nwhen processing type mungers\nwhen weaving\nwhen batch building BuildConfig[null] #Files\u003d1\n-1\njava.lang.ArrayIndexOutOfBoundsException: -1\n        at org.aspectj.weaver.ReferenceType.determineThoseTypesToUse(ReferenceTy\npe.java:473)\n        at org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.\njava:419)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:12\n15)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1058)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompiler\nAdapter.java:312)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(A\njCompilerAdapter.java:184)\n        at org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning\n$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.a\nj:70)\n        at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compil\ner.java:367)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilat\nion(AjBuildManager.java:843)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuild\nManager.java:243)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBu\nildManager.java:163)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)\n        at org.aspectj.tools.ajc.Main.run(Main.java:356)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:246)\n        at org.aspectj.tools.ajc.Main.main(Main.java:86)\n\n\n1 fail|abort\n\najc -version:\nAspectJ Compiler DEVELOPMENT built on Friday Feb 24, 2006 at 17:44:57 GMT",
    "I think it used to work \u0027by accident\u0027 - and improvements to generics handling are now causing the attached source code to expose a bug.  The problem is with the reference to T.\n\nWe have the generic type:\n\npublic class SkipList\u003cT extends Comparable\u003e extends Object implements Set\u003cT\u003e, Iterable\u003cT\u003e\n\nwith an inner class:\n\nprotected class SkipListIterator\u003cE\u003e implements Iterator\u003cT\u003e\n\nwe just get confused with the \u0027T\u0027 reference as it isnt a type variable in the subtype, it is from the enclosing type.\n\nfix about to be committed if it passes all the tests.",
    "fix committed.",
    "This fix is now available in the latest AJDT (both for Eclipse 3.1 and Eclipse 3.2M5a).",
    "Been running it since Friday ;-) and everything seems to work as expected; the class in question compiles fine again. Thanks!\n",
    "Closing as fixed since fix is available in latest builds."
  ],
  "commentCreationDates": [
    "2006-02-27T13:43:30+01:00",
    "2006-02-27T13:45:20+01:00",
    "2006-02-28T15:23:06+01:00",
    "2006-02-28T17:31:52+01:00",
    "2006-03-01T08:33:31+01:00",
    "2006-03-13T08:28:05+01:00",
    "2006-03-13T08:47:22+01:00",
    "2006-03-20T16:15:34+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ReferenceType.determineThoseTypesToUse",
          "source": "ReferenceType.java:465"
        },
        {
          "method": "org.aspectj.weaver.ReferenceType.getDeclaredInterfaces",
          "source": "ReferenceType.java:411"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor",
          "source": "BcelWeaver.java:1199"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1047"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:300"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:178"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0",
          "source": "CompilerAdapter.aj:70"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:367"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:824"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:234"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:157"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:122"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "129566",
      "date": "2006-02-27T13:43:30+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-1",
      "elements": [
        {
          "method": "org.aspectj.weaver.ReferenceType.determineThoseTypesToUse",
          "source": "ReferenceTy pe.java:473"
        },
        {
          "method": "org.aspectj.weaver.ReferenceType.getDeclaredInterfaces",
          "source": "ReferenceType. java:419"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor",
          "source": "BcelWeaver.java:12 15"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1058"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompiler Adapter.java:312"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "A jCompilerAdapter.java:184"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0",
          "source": "CompilerAdapter.a j:70"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compil er.java:367"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:843"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuild Manager.java:243"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:163"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:112"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:60"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:356"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:246"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:86"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "129566",
      "date": "2006-02-28T15:23:06+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "129566",
  "bugId": "129566",
  "date": "2006-02-27T13:43:30+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}