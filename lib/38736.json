{
  "comments": [
    "Not sure what triggered this state but after the exception occurred my debug \nview was pretty messed up (no labels or text for tree items).\n\njava.lang.IndexOutOfBoundsException: Invalid index of stack frames given\nat org.eclipse.jdi.internal.ThreadReferenceImpl.frames\n(ThreadReferenceImpl.java:194)\nat org.eclipse.jdi.internal.ThreadReferenceImpl.frame\n(ThreadReferenceImpl.java:140)\nat org.eclipse.jdt.internal.debug.core.model.JDIThread.getUnderlyingFrame\n(JDIThread.java:542)\nat \norg.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingStackFrame\n(JDIStackFrame.java:955)\nat org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingMethod\n(JDIStackFrame.java:221)\nat org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getDeclaringTypeName\n(JDIStackFrame.java:700)\nat org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getStackFrameText\n(JDIModelPresentation.java:1338)\nat org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getText\n(JDIModelPresentation.java:202)\nat org.eclipse.debug.internal.ui.LazyModelPresentation.getText\n(LazyModelPresentation.java:74)\nat org.eclipse.debug.internal.ui.DelegatingModelPresentation.getText\n(DelegatingModelPresentation.java:127)\nat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:95)\nat org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run\n(AbstractTreeViewer.java:87)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1006)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:406)\nat org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run\n(StructuredViewer.java:119)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1006)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.jface.viewers.StructuredViewer.updateItem\n(StructuredViewer.java:1271)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem\n(AbstractTreeViewer.java:320)\nat org.eclipse.jface.viewers.AbstractTreeViewer$1.run\n(AbstractTreeViewer.java:303)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren\n(AbstractTreeViewer.java:289)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand\n(AbstractTreeViewer.java:813)\nat org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget\n(AbstractTreeViewer.java:1256)\nat org.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget\n(StructuredViewer.java:1053)\nat org.eclipse.jface.viewers.StructuredViewer.setSelection\n(StructuredViewer.java:1018)\nat org.eclipse.debug.internal.ui.views.launch.LaunchView.autoExpand\n(LaunchView.java:973)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspen\ndThreadEvent(LaunchViewEventHandler.java:231)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspen\ndEvent(LaunchViewEventHandler.java:181)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleDebugE\nvents(LaunchViewEventHandler.java:102)\nat org.eclipse.debug.internal.ui.views.AbstractDebugEventHandler$1.run\n(AbstractDebugEventHandler.java:70)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:98)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2013)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1746)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1399)\nat org.eclipse.ui.internal.Workbench.run(Workbench.java:1382)\nat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:858)\nat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\nat org.eclipse.core.launcher.Main.run(Main.java:747)\nat org.eclipse.core.launcher.Main.main(Main.java:583)",
    "From the stack frame, it looks like we ask the VM for a stack frame at an index\nbigger than the stack size.\nThis request is created when the UI try to get the labels of the tree elements\nin the DebugView.\nA reason can be that the number of stack frame created in the Java model was\nbigger than the number of stack frame in the thread (in the VM).\n\nDarin W: Do you know if this could have been a consequence of the problems there\nwere in JDIThread#computeStackFrames(boolean) ?\n\n",
    "It\u0027s possible that the problem was there (need to see if it\u0027s still there). It \ncould be that by the time the UI updates, the stack size has gotten smaller - \nso it tries to retrieve an \"out of bounds frame\".",
    "Just happened on 20030730\nBTW We should change all the debug bugs still flagged as M2",
    "Sorry that was 20030723. I only updated at home.\nOn jdk 1.4.2",
    "*** Bug 41162 has been marked as a duplicate of this bug. ***",
    "It\u0027s happened to me on 20030730. :)",
    "Just happened to me with i20030930 + Equinox runtime. Got an internal error\ndialog. Opened the PDE error log view and found the stack trace above.\n\nIn subsequent debug sessions the error did not happen and, except for the Debug\nview that didn\u0027t show the stack frames anymore, everything worked as expected.\n\n",
    "set to M5.\nThe work on bug 16036 should solve the problem (or make it worse :) ).",
    "Could be related to bug 46961",
    "*** Bug 46961 has been marked as a duplicate of this bug. ***",
    "Fixed in JDIThread. We were allowing IndexOutOfBoundsException to fall through \nto our catch (RuntimeException) block. This block calls code that only wraps the \nexception in a debug exception if it\u0027s a \"JDI Exception\". Since JDI says that \nthe method we\u0027re calling can throw index out of bounds, we should catch it \nexplicitly and always wrap it in a debug exception. The code in the label \ncomputation correctly handles debug exceptions.\n\nPlease verify, DarinW.",
    "Reopen to reassign",
    "Marking as fixed for verification.",
    "Verified.",
    "*** Bug 46547 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2003-06-10T23:17:22+02:00",
    "2003-07-10T23:21:26+02:00",
    "2003-07-10T23:27:06+02:00",
    "2003-07-31T20:37:16+02:00",
    "2003-07-31T20:39:05+02:00",
    "2003-08-05T22:00:48+02:00",
    "2003-08-05T22:04:37+02:00",
    "2003-10-03T16:57:29+02:00",
    "2003-10-08T00:43:04+02:00",
    "2003-11-19T15:50:23+01:00",
    "2003-11-19T16:46:43+01:00",
    "2003-11-19T17:10:16+01:00",
    "2003-11-19T18:07:50+01:00",
    "2003-11-19T18:08:40+01:00",
    "2003-11-19T22:47:08+01:00",
    "2003-11-20T15:11:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IndexOutOfBoundsException",
      "message": "Invalid index of stack frames given",
      "elements": [
        {
          "method": "org.eclipse.jdi.internal.ThreadReferenceImpl.frames",
          "source": "ThreadReferenceImpl.java:194"
        },
        {
          "method": "org.eclipse.jdi.internal.ThreadReferenceImpl.frame",
          "source": "ThreadReferenceImpl.java:140"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.getUnderlyingFrame",
          "source": "JDIThread.java:542"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingStackFrame",
          "source": "JDIStackFrame.java:955"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingMethod",
          "source": "JDIStackFrame.java:221"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getDeclaringTypeName",
          "source": "JDIStackFrame.java:700"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getStackFrameText",
          "source": "JDIModelPresentation.java:1338"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getText",
          "source": "JDIModelPresentation.java:202"
        },
        {
          "method": "org.eclipse.debug.internal.ui.LazyModelPresentation.getText",
          "source": "LazyModelPresentation.java:74"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DelegatingModelPresentation.getText",
          "source": "DelegatingModelPresentation.java:127"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:95"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:87"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1006"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:406"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:119"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1006"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1271"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:320"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:303"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:289"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand",
          "source": "AbstractTreeViewer.java:813"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget",
          "source": "AbstractTreeViewer.java:1256"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget",
          "source": "StructuredViewer.java:1053"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:1018"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.autoExpand",
          "source": "LaunchView.java:973"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspendThreadEvent",
          "source": "LaunchViewEventHandler.java:231"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspendEvent",
          "source": "LaunchViewEventHandler.java:181"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleDebugEvents",
          "source": "LaunchViewEventHandler.java:102"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.AbstractDebugEventHandler$1.run",
          "source": "AbstractDebugEventHandler.java:70"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:98"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2013"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1746"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1399"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1382"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "38736",
      "date": "2003-06-10T23:17:22+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "38736",
  "bugId": "38736",
  "date": "2003-06-10T23:17:22+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}