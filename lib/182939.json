{
  "comments": [
    "Steps To Reproduce:\n1. run eworkbench demo\n2. uninstall org.eclipse.ercp.app demo\n3. install \u0026 refresh org.eclipse.ercp.app demo\n4. launch it\n\nAn error dialog will show.\n\nThe reason behind this is located in the WorkbenchPreferencesManager.registerNode() method. It is commented entirely. The problem is that this method is used to register associations between the preference extension and the WorkbenchPreferenceNode objects.\nThe removeExtension() method can\u0027t handle the extension removal properly because it relies entirely on this association to clean the stale preferences.\n\nI wonder why this method has been commented and is it safe to be uncommented again.\n\nThe scenario which triggers this bug is rather odd, but it is similar to what is happening when you try to hot-deploy applications.\n\n\n\nMore information:",
    "*** Bug 203515 has been marked as a duplicate of this bug. ***",
    "Hi....Danail\nI can\u0027t recreate your problem in eRCP 1.1 build. I was wondering if you install email via eupdate. If so, could you check if it happens in eRCP 1.1, either. Could you please provide the recreate steps in details? Thank you.",
    "The problem is reproducible with 1.1 too:\n\n1. Extract the build somewhere\n2. run j9foun-eworkbench.bat\n3. uninstall org.eclipse.ercp.app bundle:\n\nosgi\u003e uninstall 16\n\n4. install it again:\n\nosgi\u003e install reference:file:\u003cpath-to-build\u003e\\win32\\eRCP\\plugins\\org.eclipse.ercp.app_1.0.2.jar\n\n5. do refresh packages:\n\nosgi\u003e refresh\n\n6. launch the email example -\u003e error dialog will be displayed. In the .log file the following exception is logged:\n\norg.eclipse.core.runtime.InvalidRegistryObjectException: Invalid registry object\n\tat org.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject(Unknown Source)\n\tat org.eclipse.core.internal.registry.RegistryObjectManager.getObject(Unknown Source)\n\tat org.eclipse.core.internal.registry.ConfigurationElementHandle.getConfigurationElement(Unknown Source)\n\tat org.eclipse.core.internal.registry.ConfigurationElementHandle.getAttribute(Unknown Source)\n\tat org.eclipse.ercp.eworkbench.ApplicationDescriptor.getLabel(Unknown Source)\n\tat org.eclipse.ercp.eworkbench.DefaultView.launchSelection(Unknown Source)\n\tat org.eclipse.ercp.eworkbench.DefaultView.open(Unknown Source)\n\tat org.eclipse.jface.viewers.StructuredViewer$2.run(Unknown Source)\n\tat org.eclipse.core.runtime.SafeRunner.run(Unknown Source)\n\tat org.eclipse.core.runtime.Platform.run(Unknown Source)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(Unknown Source)\n\tat org.eclipse.jface.util.SafeRunnable.run(Unknown Source)\n\tat org.eclipse.jface.viewers.StructuredViewer.fireOpen(Unknown Source)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleOpen(Unknown Source)\n\tat org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(Unknown Source)\n\tat org.eclipse.jface.util.OpenStrategy.fireOpenEvent(Unknown Source)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(Unknown Source)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:611)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:633)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:618)\n\tat org.eclipse.swt.widgets.Control.pointerCallback(Control.java:2319)\n\tat com.ibm.ugl.p3ml.OS.Display_ReadAndDispatch(Native Method)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1404)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runUI(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ercp.eworkbench.eWorkbench.run(Unknown Source)\n\tat java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:203)\n\tat java.lang.reflect.Method.invoke(Method.java:248)\n\tat org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod(Unknown Source)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(Unknown Source)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Unknown Source)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Unknown Source)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)\n\tat java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:203)\n\tat java.lang.reflect.Method.invoke(Method.java:248)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Unknown Source)\n\tat org.eclipse.core.launcher.Main.run(Unknown Source)\n\tat org.eclipse.core.launcher.Main.main(Unknown Source)\n\nThe problem is in part in WorkbenchPreferencesManager.registerNode() method and should be removed, but it is not the only problem. The problem is that when an application is refreshed, its IConfigurationElement handle contains the same information, but it is stale and registry won\u0027t recognize it.\n\nIn order to fix the hot deployment of applications you need to refresh the eWorkbench viewer, so he can pickup the new ApplicationDescriptors, otherwise, the selection will contain the old ApplicationDescriptor with the old IConfigurationElement and will fail with InvalidRegistryObjectException.\n\nAfter this comes the WorkbenchPreferencesManager.registerNode(), which must be uncommented. There is a separate issue for this problem:\n\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d203515\n\nI\u0027ll mark this bug as dependent on the bug 203515.",
    "The same fix as bug 203515. thanks",
    "I don\u0027t think the patch for bug 203515 fixes this bug. I intentionally changed the name of the bug, because it requires more changes than the simple registerNode() uncommenting.\n\nThis bug requires that the DefaultView must be refreshed when application registry has changed. (I think, but don\u0027t test it, that if you switch to Application Manager and switch back, it will work, so in order to reproduce the problem, you should not do anything before you have updated the application).\n"
  ],
  "commentCreationDates": [
    "2007-04-18T14:33:40+02:00",
    "2007-10-13T10:39:40+02:00",
    "2007-10-18T04:49:46+02:00",
    "2007-10-18T09:52:58+02:00",
    "2007-10-18T11:50:01+02:00",
    "2007-10-18T16:30:39+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.InvalidRegistryObjectException",
      "message": "Invalid registry object",
      "elements": [
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.getObject",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElementHandle.getConfigurationElement",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElementHandle.getAttribute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ercp.eworkbench.ApplicationDescriptor.getLabel",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ercp.eworkbench.DefaultView.launchSelection",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ercp.eworkbench.DefaultView.open",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$2.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.fireOpen",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleOpen",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$6.handleOpen",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireOpenEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:611"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:633"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:618"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.pointerCallback",
          "source": "Control.java:2319"
        },
        {
          "method": "com.ibm.ugl.p3ml.OS.Display_ReadAndDispatch",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1404"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ercp.eworkbench.eWorkbench.run",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.AccessibleObject.invokeL",
          "source": "AccessibleObject.java:203"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:248"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.AccessibleObject.invokeL",
          "source": "AccessibleObject.java:203"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:248"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "182939",
      "date": "2007-10-18T09:52:58+02:00",
      "product": "ERCP",
      "component": "eWorkbench",
      "severity": "normal"
    }
  ],
  "groupId": "182939",
  "bugId": "182939",
  "date": "2007-04-18T14:33:40+02:00",
  "product": "ERCP",
  "component": "eWorkbench",
  "severity": "normal"
}