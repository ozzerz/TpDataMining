{
  "comments": [
    "I\u0027m trying to create a new FTP connection via code.\nConsider the following code :\n---------------------------\n\nIRSESystemType systemType \u003d RSECorePlugin.getTheCoreRegistry().getSystemTypeById\n         (IRSESystemType.SYSTEMTYPE_FTP_ONLY_ID);\nSystemRegistry sr \u003d (SystemRegistry) RSECorePlugin.getTheSystemRegistry();\n\n//In the first time I call RSECorePlugin.getTheSystemRegistry() I get a NULL  \n//value\n//so I need to initialize the SystemRegistry manually :\n//---------------------------------------------------\nif (sr \u003d\u003d null) {\nString logfilePath \u003d RSEUIPlugin.getDefault().getStateLocation().toOSString();\nsr \u003d SystemRegistry.getInstance(logfilePath);\nISubSystemConfigurationProxy[] proxies \u003d \n       RSECorePlugin.getDefault().getSubSystemConfigurationProxies();\nif (proxies !\u003d null) {\nsr.setSubSystemConfigurationProxies(proxies);\n}\n}\n\ntry {\n    IHost host \u003d sr.createHost(systemType, \"myhost\", \"myhost\", \"\");\n} catch (Exception e) {\n    e.printStackTrace();\n}\n\nSo far so good, and the code looks correct, right ?\n\nBut :\n---\nWhen I execute this code without debug breakpoints AFTER THE FIRST TIME I LAUNCH ECLIPSE I get the following exception :\njava.lang.ArrayIndexOutOfBoundsException: 0\nat org.eclipse.rse.ui.internal.model.SystemRegistry.createHost(SystemRegistry.java:2034)\n\nPlease note that if I debug it step by step it works fine, as if the registry\nis initialized correctly.\nLooks like a bug to me.\nYaron",
    "First of all, please don\u0027t case ISystemRegistry to SystemRegistry unless you absolutely need to.\n\nSecond, don\u0027t try to initialize the SystemRegistry yourself. For now, you\u0027ll need the RSEUIPlugin to properly initialize it -- it\u0027ll start the InitRSEJob to properly load persisted data. In other words, you cannot use RSE without dependency on the UI plugins right now. In the future, when the UI/Non-UI separation is improved this will work - This better UI/Non-UI separation is one of our top priorities for the next release (TM 3.0).\n\nThird, after getting the ISystemRegistry from RSEUIPlugin, you\u0027ll need to wait until it is initialized. This will also be improved with better API in the future. For now, see bug 197167 comment 1 and bug 194802 comment 12.\n\nSumming up, here is correct code:\n\nIRSESystemType systemType \u003d\n    RSECorePlugin.getTheCoreRegistry().getSystemTypeById\n    (IRSESystemType.SYSTEMTYPE_FTP_ONLY_ID);\n//Forcefully activate the RSEUIPlugin\nboolean isRegistryActive \u003d RSEUIPlugin.isTheSystemRegistryActive();\nif (isRegistryActive) {\n    Job[] jobs \u003d Job.getJobManager().find(null);\n    for(int i\u003d0; i\u003cjobs.length; i++) {\n        if (\"Initialize RSE\".equals(jobs[i].getName())) { //$NON-NLS-1$\n            //If still initializing, wait until done\n            jobs[i].join();\n            break;\n        }\n    }\n    ISystemRegistry sr \u003d RSECorePlugin.getTheSystemRegistry();\n    IHost host \u003d sr.createHost(systemType, \"myhost\", \"myhost\", \"\");\n}\n\n\n*** This bug has been marked as a duplicate of bug 194802 ***"
  ],
  "commentCreationDates": [
    "2007-09-03T09:34:01+02:00",
    "2007-09-03T16:51:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.eclipse.rse.ui.internal.model.SystemRegistry.createHost",
          "source": "SystemRegistry.java:2034"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "202040",
      "duplicateId": "194802",
      "date": "2007-09-03T09:34:01+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "194802",
  "bugId": "202040",
  "duplicateId": "194802",
  "date": "2007-09-03T09:34:01+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}