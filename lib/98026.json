{
  "comments": [
    "Driver 3.1 MS 6\nPlatform: zOS\n\nI have a product that builds upon the minimal eclipse configuration.  One of \nmy bundles includes many jars on the bunlde classpath.   \n\nEclipse is failing when I attempt to start my product in several different \nprocesses at the same time.     The error is included below.   Does OSGi keep \na file handle open for each jar on the bundle classpath?  Is there a setting\nI can run with to try to circumvent the error?   Will going to the single \narchive format of the plugin (with no explicit bundle classpath) likely to \nsolve this problem?\n\nError reading state file /eclipse/configuration/org.eclipse.osgi/.manage \nr/.fileTableLock (EDC5124I Too ma ny open files. (errno2\u003d0x050B0146)) \njava.io.FileNotFoundException: /eclipse/configuration/org.eclipse.osgi/. \nmanager/.fileTableLock (EDC5124I Too many open files. \n(errno2\u003d0x050B0146))?????????at java.io.FileOutputStream.openAppend(Native \nMethod)?????????at java.io.FileOutputStream.\u003cinit\u003e(FileOutputStream.java\n(Compiled Code))?????????at \norg.eclipse.core.runtime.adaptor.Locker_JavaNio.lock(Locker_JavaNio.java\n(Compiled Code))?????????at \norg.eclipse.osgi.service.datalocation.FileManager.lock(FileManager.java\n(Compiled Code))?????????at \norg.eclipse.osgi.service.datalocation.FileManager.add\n(FileManager.java:138)?????????at \norg.eclipse.osgi.service.datalocation.FileManager.lookup\n(FileManager.java:259)?????????at \norg.eclipse.core.runtime.adaptor.EclipseAdaptor.findStateFiles\n(EclipseAdaptor.java:193)?????????at \norg.eclipse.core.runtime.adaptor.EclipseAdaptor.createStateManager\n(EclipseAdaptor.java:208)?????????at \norg.eclipse.osgi.framework.adaptor.core.AbstractFrameworkAdaptor.frameworkStart\n(AbstractFrameworkAdaptor.java:255)?????????at \norg.eclipse.core.runtime.adaptor.EclipseAdaptor.frameworkStart\n(EclipseAdaptor.java:320)?????????at \norg.eclipse.osgi.framework.internal.core.SystemBundleActivator.start\n(SystemBundleActivator.java:55)?????????at \norg.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run\n(BundleContextImpl.java:994)?????????at \njava.security.AccessController.doPrivileged1(Native Method)?????????at \njava.security.AccessController.doPrivileged\n(AccessController.java:351)?????????at \norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator\n(BundleContextImpl.java:988)?????????at \norg.eclipse.osgi.framework.internal.core.BundleContextImpl.start\n(BundleContextImpl.java:969)?????????at \norg.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles\n(StartLevelManager.java:552)?????????at \norg.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL\n(StartLevelManager.java:487)?????????at \norg.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel\n(StartLevelManager.java:275)?????????at \norg.eclipse.osgi.framework.internal.core.StartLevelManager.launch\n(StartLevelManager.java:245)?????????at \norg.eclipse.osgi.framework.internal.core.SystemBundle.resume\n(SystemBundle.java:156)?????????at \norg.eclipse.osgi.framework.internal.core.Framework.launch\n(Framework.java:461)?????????at \norg.eclipse.osgi.framework.internal.core.OSGi.launch(OSGi.java:51)?????????at \norg.eclipse.core.runtime.adaptor.EclipseStarter.startup\n(EclipseStarter.java:268)?????????at \norg.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:152)?????????at \nsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)?????????at \nsun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)?????????at \nsun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)?????????at \nsun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)?????????at \njava.lang.reflect.Method.invoke(Method.java:391)?????????at \norg.eclipse.core.launcher.Main.invokeFramework(Main.java:315)?????????at \norg.eclipse.core.launcher.Main.basicRun(Main.java:268)",
    "For records, could you qualify \"many\" and also provide the number of plugins you\nhave in your system as well as a rough approximation of the number of plugins\nthat are required by the plugin that contains many jars (this recursively).\n\nIf you move to a single archive, things will definetly get better.\n\nNote that on linux, the same problem has been encountered, and raising the limit\nof open files in the OS has made things better. In the worst case, can\u0027t the\nsame trick be applied on zOS?",
    "We have about 25 bundles most with several jars per bundle but one has about \n250 jars.   \n\nIs there a file handle open per jar in the bundle?   Is there a switch to \ntrade off performance versus resource consumption?\n\nI\u0027ll check to see if we can raise the limit of open file handles. ",
    "We should not be opening the jars on the classpath until the classloader is \ncreated for the bundle.  From the stack trace it appears you are running into \nthis error early in the startup sequence before any classloaders are created \nfor the any bundles.\n\nI do not expect the 250+ jars are causing the problem at this point.  There \nare only a handful of files which are touched by the time we reach this point \nin the startup sequence.",
    "Please reopen if you still have the problem."
  ],
  "commentCreationDates": [
    "2005-06-02T00:11:48+02:00",
    "2005-06-02T00:21:23+02:00",
    "2005-06-02T07:00:11+02:00",
    "2005-06-02T14:37:36+02:00",
    "2006-03-23T15:24:08+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.io.FileNotFoundException",
      "message": "/eclipse/configuration/org.eclipse.osgi/.  manager/.fileTableLock (EDC5124I Too many open files.  (errno2\u003d0x050B0146))?????????",
      "elements": [
        {
          "method": "java.io.FileOutputStream.openAppend",
          "source": "Native  Method"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "98026",
      "date": "2005-06-02T00:11:48+02:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "major"
    }
  ],
  "groupId": "98026",
  "bugId": "98026",
  "date": "2005-06-02T00:11:48+02:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "major"
}