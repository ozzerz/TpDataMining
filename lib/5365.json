{
  "comments": [
    "Build 20011025\n\nI had this situation earlier today where there was a core internal error on \nshutdown.  It was a usual suspect: a NullPointerException in \nElementTree#findOldest.  This means the trees didn\u0027t form a simple ancestral \nchain, for example if the workspace tree is still mutable at save time.  \nUnfortunately I lost the stack trace.  I can\u0027t yet reproduce, but I had done \nsomething like:\n\n1) Startup the workbench\n2) Do a build that causes errors (eg, missing builder)\n3) Immediately shutdown.",
    "Exact steps to reproduce:\n\n1) Create a new workbench, containing PDE project, one java file\n2) Shutdown\n3) Turn of the org.eclipse.pde plugin (rename plugin.xml-\u003eplugin.xml.off)\n4) Restart the workbench\n5) Force a build by editing java file (error occurs)\n6) Immediately shutdown.  Error on shutdown.  Stack trace follows:\n\n\t4 org.eclipse.core.resources 568 Could not write metadata for: /.\njava.lang.NullPointerException\n\tat \norg.eclipse.core.internal.watson.ElementTree.findOldest(ElementTree.java:427)\n\tat \norg.eclipse.core.internal.watson.ElementTreeWriter.sortTrees(ElementTreeWriter.j\nava:105)\n\tat \norg.eclipse.core.internal.watson.ElementTreeWriter.writeDeltaChain(ElementTreeWr\niter.java:193)\n\tat \norg.eclipse.core.internal.resources.SaveManager.writeTree(SaveManager.java:914)\n\tat \norg.eclipse.core.internal.resources.SaveManager.saveTree(SaveManager.java:716)\n\tat \norg.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1077)\n\tat \norg.eclipse.core.internal.resources.Workspace.save(Workspace.java:1211)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:178)\n\tat \norg.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:29\n6)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:249)\n\tat \norg.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:3\n35)\n\tat \norg.eclipse.ui.internal.Workbench.disconnectFromWorkspace(Workbench.java:185)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:108)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:76)\n\tat org.eclipse.ui.internal.Workbench$3.run(Workbench.java:157)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:56)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:155)\n\tat \norg.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:256)\n\tat \norg.eclipse.ui.internal.WorkbenchWindow.access$3(WorkbenchWindow.java:251)\n\tat \norg.eclipse.ui.internal.WorkbenchWindow$1.run(WorkbenchWindow.java:291)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:56)\n\tat \norg.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:289)\n\tat \norg.eclipse.jface.window.Window.handleShellCloseEvent(Window.java:462)\n\tat org.eclipse.jface.window.Window$2.shellClosed(Window.java:389)\n\tat \norg.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:150)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Decorations.WM_CLOSE(Decorations.java:971)\n\tat org.eclipse.swt.widgets.Shell.WM_CLOSE(Shell.java:854)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:932)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled \nCode))\n\tat org.eclipse.swt.internal.win32.OS.DefWindowProc(Native Method)\n\tat \norg.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:932)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled \nCode))\n\tat org.eclipse.swt.internal.win32.OS.DefWindowProc(Native Method)\n\tat \norg.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:932)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled \nCode))\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(Native Method)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1158)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:675)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:658)\n\tat \norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:82\n0)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:151)\n\tat org.eclipse.core.launcher.Main.run(Main.java:502)\n\tat org.eclipse.core.launcher.UIMain.main(UIMain.java:52)\n\t1\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003c/children\u003e\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n",
    "Oops, I introduced this problem as a result of some builder changes.  Basically \nI was trying to \"fake out\" builders that were missing.  The problem is these \nfake builders had no tree, thus causing the NPE on shutdown.  I have fixed up \nthe builder code, and added some safety checking in the SaveManager code as \nwell.",
    "Fixed in v207"
  ],
  "commentCreationDates": [
    "2001-10-30T20:31:55+01:00",
    "2001-10-30T21:27:56+01:00",
    "2001-10-30T23:20:28+01:00",
    "2001-11-01T15:20:33+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.watson.ElementTree.findOldest",
          "source": "ElementTree.java:427"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeWriter.sortTrees",
          "source": "ElementTreeWriter.j ava:105"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeWriter.writeDeltaChain",
          "source": "ElementTreeWr iter.java:193"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.writeTree",
          "source": "SaveManager.java:914"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.saveTree",
          "source": "SaveManager.java:716"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.save",
          "source": "SaveManager.java:1077"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.save",
          "source": "Workspace.java:1211"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:178"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:29 6"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:249"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:3 35"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.disconnectFromWorkspace",
          "source": "Workbench.java:185"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:108"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:76"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$3.run",
          "source": "Workbench.java:157"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:56"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:155"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.busyClose",
          "source": "WorkbenchWindow.java:256"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.access$3",
          "source": "WorkbenchWindow.java:251"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$1.run",
          "source": "WorkbenchWindow.java:291"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:56"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.close",
          "source": "WorkbenchWindow.java:289"
        },
        {
          "method": "org.eclipse.jface.window.Window.handleShellCloseEvent",
          "source": "Window.java:462"
        },
        {
          "method": "org.eclipse.jface.window.Window$2.shellClosed",
          "source": "Window.java:389"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:150"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_CLOSE",
          "source": "Decorations.java:971"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_CLOSE",
          "source": "Shell.java:854"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:932"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DefWindowProc",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Scrollable.callWindowProc",
          "source": "Scrollable.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:932"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DefWindowProc",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Scrollable.callWindowProc",
          "source": "Scrollable.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:932"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1158"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:675"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:658"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:82 0"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:151"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:502"
        },
        {
          "method": "org.eclipse.core.launcher.UIMain.main",
          "source": "UIMain.java:52"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "5365",
      "date": "2001-10-30T21:27:56+01:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "5365",
  "bugId": "5365",
  "date": "2001-10-30T20:31:55+01:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}