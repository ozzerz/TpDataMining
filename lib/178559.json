{
  "comments": [
    "Build ID: I20070321-0010\n\nSteps To Reproduce:\n1. Select a plug-in (e.g. org.eclipse.jface.text)\n2. From the context menu, select export\n3. Choose \"As deployable plug-ins\"\n4. Click Finish on the wizard\n5. The exception below is shown on the console, no export\n\n\nMore information:\nConsole log\n\n!ENTRY org.eclipse.core.jobs 4 2 2007-03-21 15:42:06.572\n!MESSAGE An internal error occurred during: \"Export Plug-ins\".\n!STACK 0\njava.lang.IllegalArgumentException: invalid format\n        at org.osgi.framework.Version.\u003cinit\u003e(Version.java:150)\n        at org.osgi.framework.Version.parseVersion(Version.java:209)\n        at org.eclipse.pde.internal.build.site.PDEState.getResolvedBundle(PDEState.java:436)\n        at org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.computeElements(FeatureBuildScriptGenerator.java:134)\n        at org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generateChildrenScripts(FeatureBuildScriptGenerator.java:860)\n        at org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generate(FeatureBuildScriptGenerator.java:260)\n        at org.eclipse.pde.internal.build.BuildScriptGenerator.generateFeatures(BuildScriptGenerator.java:178)\n        at org.eclipse.pde.internal.build.BuildScriptGenerator.generate(BuildScriptGenerator.java:90)\n        at org.eclipse.pde.internal.core.exports.FeatureExportOperation.doExport(FeatureExportOperation.java:216)\n        at org.eclipse.pde.internal.core.exports.FeatureBasedExportOperation.run(FeatureBasedExportOperation.java:45)\n        at org.eclipse.pde.internal.ui.build.FeatureExportJob.run(FeatureExportJob.java:55)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Aha, I had replaced the Bundle-Version of my plug-in (org.eclipse.jface.text in my case), making it \"3.3.0.zqualifier\" instead of \"3.3.0.qualifier\" (note the \u0027z\u0027). \n\nSeems that this caused the problem to appear.\n\nNote that the Manifest editor does not protest against the bundle version (this would be PDE-UI, I guess), and I don\u0027t see why zqualifier should not be valid.",
    "I think this has been fixed. Moving to osgi.",
    "PDE-Build is passing an invalid version.  In this case if zqualifier is used as the qualifier then \"3.3.0.\" is passed for the version.  Notice the trailing \u0027.\u0027 on \"3.3.0.\"\n\nIn PDEState line 436 it is assuming the string \"qualifier\" is preceeded by a \u0027.\u0027.\n\nif ((qualifierIdx \u003d version.indexOf(IBuildPropertiesConstants.PROPERTY_QUALIFIER)) !\u003d -1) {\n\tBundleDescription[] bundles \u003d getState().getBundles(bundleId);\n\tVersion versionToMatch \u003d \n\u003e\u003e\u003e        Version.parseVersion(version.substring(0, qualifierIdx - 1));",
    "looks like this got introduced by the fix to bug 168079.",
    "Fixed and tagged.\nWe also fixed similar problems around finding and replacing the qualifier that all came from the support in bug 168079."
  ],
  "commentCreationDates": [
    "2007-03-21T15:49:10+01:00",
    "2007-03-21T15:52:02+01:00",
    "2007-03-21T16:57:21+01:00",
    "2007-03-21T17:28:52+01:00",
    "2007-03-21T17:30:52+01:00",
    "2007-03-21T19:38:04+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "invalid form",
      "elements": [
        {
          "method": "atorg.osgi.framework.Version.\u003cinit\u003e",
          "source": "Version.java:150"
        },
        {
          "method": "org.osgi.framework.Version.parseVersion",
          "source": "Version.java:209"
        },
        {
          "method": "org.eclipse.pde.internal.build.site.PDEState.getResolvedBundle",
          "source": "PDEState.java:436"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.computeElements",
          "source": "FeatureBuildScriptGenerator.java:134"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generateChildrenScripts",
          "source": "FeatureBuildScriptGenerator.java:860"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generate",
          "source": "FeatureBuildScriptGenerator.java:260"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generateFeatures",
          "source": "BuildScriptGenerator.java:178"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generate",
          "source": "BuildScriptGenerator.java:90"
        },
        {
          "method": "org.eclipse.pde.internal.core.exports.FeatureExportOperation.doExport",
          "source": "FeatureExportOperation.java:216"
        },
        {
          "method": "org.eclipse.pde.internal.core.exports.FeatureBasedExportOperation.run",
          "source": "FeatureBasedExportOperation.java:45"
        },
        {
          "method": "org.eclipse.pde.internal.ui.build.FeatureExportJob.run",
          "source": "FeatureExportJob.java:55"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "178559",
      "date": "2007-03-21T15:49:10+01:00",
      "product": "PDE",
      "component": "Build",
      "severity": "normal"
    }
  ],
  "groupId": "178559",
  "bugId": "178559",
  "date": "2007-03-21T15:49:10+01:00",
  "product": "PDE",
  "component": "Build",
  "severity": "normal"
}