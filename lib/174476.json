{
  "comments": [
    "build: I20070213-0907\n\nWhen activating a context in a non-UI thread I get an invalid thread access. I am developing a org.eclispe.ui.handlers extension that has an \"enabledWhen\" expression based on the context being enabled. The handler is associated with a command. The context is enabled in a non-UI thread as determining the enabled state of the context requires communication with a debugger, which is performed in a system (non-UI) job.\n\norg.eclipse.swt.SWTException: Invalid thread access\n    at org.eclipse.swt.SWT.error(SWT.java:3478)\n    at org.eclipse.swt.SWT.error(SWT.java:3401)\n    at org.eclipse.swt.SWT.error(SWT.java:3372)\n    at org.eclipse.swt.widgets.Widget.error(Widget.java:432)\n    at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:326)\n    at org.eclipse.swt.widgets.MenuItem.setAccelerator(MenuItem.java:620)\n    at org.eclipse.jface.action.ActionContributionItem.update(ActionContributionItem.java:838)\n    at org.eclipse.jface.action.ActionContributionItem$1.propertyChange(ActionContributionItem.java:105)\n    at org.eclipse.jface.action.ExternalActionManager$CommandCallback.bindingManagerChanged(ExternalActionManager.java:208)\n    at org.eclipse.jface.bindings.BindingManager.fireBindingManagerChanged(BindingManager.java:863)\n    at org.eclipse.jface.bindings.BindingManager.setActiveBindings(BindingManager.java:2197)\n    at org.eclipse.jface.bindings.BindingManager.recomputeBindings(BindingManager.java:1716)\n    at org.eclipse.jface.bindings.BindingManager.getActiveBindingsByParameterizedCommand(BindingManager.java:908)\n    at org.eclipse.jface.bindings.BindingManager.getActiveBindingsFor(BindingManager.java:1119)\n    at org.eclipse.jface.bindings.BindingManagerEvent.isActiveBindingsChangedFor(BindingManagerEvent.java:183)\n    at org.eclipse.jface.action.ExternalActionManager$CommandCallback.bindingManagerChanged(ExternalActionManager.java:205)\n    at org.eclipse.jface.bindings.BindingManager.fireBindingManagerChanged(BindingManager.java:863)\n    at org.eclipse.jface.bindings.BindingManager.setActiveBindings(BindingManager.java:2197)\n    at org.eclipse.jface.bindings.BindingManager.clearSolution(BindingManager.java:435)\n    at org.eclipse.jface.bindings.BindingManager.contextManagerChanged(BindingManager.java:652)\n    at org.eclipse.core.commands.contexts.ContextManager.fireContextManagerChanged(ContextManager.java:120)\n    at org.eclipse.core.commands.contexts.ContextManager.addActiveContext(ContextManager.java:70)\n    at org.eclipse.ui.internal.contexts.ContextAuthority.updateContext(ContextAuthority.java:744)\n    at org.eclipse.ui.internal.contexts.ContextAuthority.activateContext(ContextAuthority.java:172)\n    at org.eclipse.ui.internal.contexts.ContextService.activateContext(ContextService.java:88)\n    at org.eclipse.ui.internal.contexts.SlaveContextService.doActivateContext(SlaveContextService.java:279)\n    at org.eclipse.ui.internal.contexts.SlaveContextService.activateContext(SlaveContextService.java:122)\n    at org.eclipse.jdt.internal.debug.ui.evaluation.EvaluationContextManager2$UpdateContextJob.run(EvaluationContextManager2.java:77)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "I am able to workaround this by scheduling a UI job to perform the activation, from the system job.",
    "*** Bug 183433 has been marked as a duplicate of this bug. ***",
    "Perhaps the API needs to be spec\u0027ed to mandate that it\u0027s called from the UI thread? Or is that supposed to be implicit on the basis that it\u0027s an o.e.ui class?"
  ],
  "commentCreationDates": [
    "2007-02-16T17:43:45+01:00",
    "2007-02-16T17:59:56+01:00",
    "2007-08-29T19:41:34+02:00",
    "2007-09-18T05:36:00+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3478"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3401"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3372"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:432"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:326"
        },
        {
          "method": "org.eclipse.swt.widgets.MenuItem.setAccelerator",
          "source": "MenuItem.java:620"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.update",
          "source": "ActionContributionItem.java:838"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$1.propertyChange",
          "source": "ActionContributionItem.java:105"
        },
        {
          "method": "org.eclipse.jface.action.ExternalActionManager$CommandCallback.bindingManagerChanged",
          "source": "ExternalActionManager.java:208"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.fireBindingManagerChanged",
          "source": "BindingManager.java:863"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.setActiveBindings",
          "source": "BindingManager.java:2197"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.recomputeBindings",
          "source": "BindingManager.java:1716"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.getActiveBindingsByParameterizedCommand",
          "source": "BindingManager.java:908"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.getActiveBindingsFor",
          "source": "BindingManager.java:1119"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManagerEvent.isActiveBindingsChangedFor",
          "source": "BindingManagerEvent.java:183"
        },
        {
          "method": "org.eclipse.jface.action.ExternalActionManager$CommandCallback.bindingManagerChanged",
          "source": "ExternalActionManager.java:205"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.fireBindingManagerChanged",
          "source": "BindingManager.java:863"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.setActiveBindings",
          "source": "BindingManager.java:2197"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.clearSolution",
          "source": "BindingManager.java:435"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.contextManagerChanged",
          "source": "BindingManager.java:652"
        },
        {
          "method": "org.eclipse.core.commands.contexts.ContextManager.fireContextManagerChanged",
          "source": "ContextManager.java:120"
        },
        {
          "method": "org.eclipse.core.commands.contexts.ContextManager.addActiveContext",
          "source": "ContextManager.java:70"
        },
        {
          "method": "org.eclipse.ui.internal.contexts.ContextAuthority.updateContext",
          "source": "ContextAuthority.java:744"
        },
        {
          "method": "org.eclipse.ui.internal.contexts.ContextAuthority.activateContext",
          "source": "ContextAuthority.java:172"
        },
        {
          "method": "org.eclipse.ui.internal.contexts.ContextService.activateContext",
          "source": "ContextService.java:88"
        },
        {
          "method": "org.eclipse.ui.internal.contexts.SlaveContextService.doActivateContext",
          "source": "SlaveContextService.java:279"
        },
        {
          "method": "org.eclipse.ui.internal.contexts.SlaveContextService.activateContext",
          "source": "SlaveContextService.java:122"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.evaluation.EvaluationContextManager2$UpdateContextJob.run",
          "source": "EvaluationContextManager2.java:77"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "174476",
      "date": "2007-02-16T17:43:45+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "174476",
  "bugId": "174476",
  "date": "2007-02-16T17:43:45+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}