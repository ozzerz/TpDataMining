{
  "comments": [
    "Build: I-20040610-1600\n\n1. Create a plugin project.\n2. Create a feature project and include project from 1.\n3. Create a site project.\n4. In the Features To Build section of the site.xml, add the feature from 2.\n5. Build All.\nThe build will end with an error.\n\n\nError Jun 10, 2004 21:46:14.410 An internal error occurred during: \"PDE \nExport\".\njava.lang.IllegalArgumentException: endRule without matching beginRule: P/site\n\tat org.eclipse.core.internal.runtime.Assert.isLegal(Assert.java:58)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.end\n(ImplicitJobs.java:121)\n\tat org.eclipse.core.internal.jobs.JobManager.endRule\n(JobManager.java:438)\n\tat org.eclipse.core.internal.resources.WorkManager.checkInFailed\n(WorkManager.java:137)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation\n(Workspace.java:869)\n\tat org.eclipse.core.internal.resources.Resource.refreshLocal\n(Resource.java:1227)\n\tat org.eclipse.pde.internal.ui.build.BuildSiteJob.refresh\n(BuildSiteJob.java:41)\n\tat org.eclipse.pde.internal.ui.build.BuildSiteJob.run\n(BuildSiteJob.java:30)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)",
    "This operation did not end with an error in RC1.\nJohn, has something changed at your end since RC1?\nThe job finishes and then we refresh the project to show the JARs that were \ngenerated.  This refresh is causing the error.",
    "I am investigating...",
    "The problem is that BuildSiteJob has a scheduling rule\n(FeatureExportJob.SchedulingRule). When you try to do a refreshLocal, it then\ntries to acquire a scheduling rule on the IProject. You cannot acquire multiple\nrules in a thread unless the outer rule contains the inner rule (as specified by\nISchedulingRule.contains()). Since FeatureExportJob.SchedulingRule does not\ncontain the resource rule, the job fails.\n\nIf the job must modify resources, I suggest having a MultiRule that includes\nboth the FeatureExportJob rule and the resource rule.",
    "CVS Blame tells me you added this scheduling rule on June 6, which explains why\nit didn\u0027t fail in RC1.",
    "Now that you enlightened us with the explanation, I was going to come clean \nthat the culprit scheduling rule is new.",
    "The error message was not very helpful in this case. It should have notified you\nthat it failed to acquire a nested rule because it was not contained within the\nouter rule. I have entered bug 66707 against platform core for this.",
    "Disaster averted.  Fixed.  John, thanks for your help."
  ],
  "commentCreationDates": [
    "2004-06-11T03:57:07+02:00",
    "2004-06-11T03:58:28+02:00",
    "2004-06-11T17:12:05+02:00",
    "2004-06-11T17:26:02+02:00",
    "2004-06-11T17:29:26+02:00",
    "2004-06-11T17:31:18+02:00",
    "2004-06-11T17:37:15+02:00",
    "2004-06-11T19:14:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "endRule without matching beginRule: P/site",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Assert.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.end",
          "source": "ImplicitJobs.java:121"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.endRule",
          "source": "JobManager.java:438"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkInFailed",
          "source": "WorkManager.java:137"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:869"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.refreshLocal",
          "source": "Resource.java:1227"
        },
        {
          "method": "org.eclipse.pde.internal.ui.build.BuildSiteJob.refresh",
          "source": "BuildSiteJob.java:41"
        },
        {
          "method": "org.eclipse.pde.internal.ui.build.BuildSiteJob.run",
          "source": "BuildSiteJob.java:30"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "66620",
      "date": "2004-06-11T03:57:07+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "66620",
  "bugId": "66620",
  "date": "2004-06-11T03:57:07+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}