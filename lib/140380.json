{
  "comments": [
    "I am expecting that if an EPackage is not found while loading a resource that either a PackageNotFoundException will be thrown. In the case where the record unrecognized features option is used then no exception should be thrown.\n\nWhen the file has an nsURI of the form \"http:///...someName.ecore/...\" but the EPackage is not in the EPackage registry it looks like a URIConverterImpl attempts to actually convert the URI into a java.net.URL. From there it tries to get an input stream so that it can load the EPackage (for dynamic EMF purposes I\u0027m guessing).\n\nNormally with certain VM\u0027s this is not a problem. However, with a version of the Sun 1.5 VM, the HttpUrlConnection class actually objects to the missing hostname in the URL and throws an IllegalArgumentException, which unwinds all of the way back to the client trying to call load() on the resource.\n\nBy changing the nsURI to some other scheme, the problem doesn\u0027t seem to occur. I\u0027m trying to follow the convention used by other popular metamodels such as UML2 and the GMF notation metamodels.\n\nThe following is the stacktrace of the exception that I am getting:\n\njava.lang.IllegalArgumentException: protocol \u003d http host \u003d null\n\tat sun.net.spi.DefaultProxySelector.select(Unknown Source)\n\tat sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)\n\tat sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\n\tat org.eclipse.emf.ecore.resource.impl.URIConverterImpl.createURLInputStream(URIConverterImpl.java:557)\n\tat org.eclipse.emf.ecore.resource.impl.URIConverterImpl.createInputStream(URIConverterImpl.java:446)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.getPackageForURI(XMLHandler.java:2239)\n\tat org.foo.bar.internal.resource.Load$Handler.getPackageForURI(Load.java)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.getFactoryForPrefix(XMLHandler.java:2133)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectByType(XMLHandler.java:1124)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.createTopObject(XMLHandler.java:1226)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement(XMLHandler.java:864)\n\tat org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement(XMIHandler.java:82)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:846)\n\tat org.foo.bar.internal.resource.Load$Handler.startElement(Load.java)\n\tat org.eclipse.emf.ecore.xmi.impl.SAXWrapper.startElement(SAXWrapper.java:90)\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat javax.xml.parsers.SAXParser.parse(Unknown Source)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:164)\n\tat org.eclipse.gmf.runtime.emf.core.resources.GMFLoad.load(GMFLoad.java:51)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:179)\n\tat org.foo.bar.resource.Resource.doLoad(Resource.java:700)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1072)\n\tat org.foo.bar.ResourceTestCase.testMissingEPackageHandling(ResourceTestCase.java)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:481)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:347)\n\tat org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:57)\n\tat org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run(CoreTestApplication.java:24)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)\n\nIt looks like the URIConverterImpl will need to trap for RuntimeExceptions that could be thrown by the getInputStream() call.",
    "The changes are committed to CVS.",
    "Fixed in 2.2.0RC2a"
  ],
  "commentCreationDates": [
    "2006-05-05T17:35:27+02:00",
    "2006-05-05T19:17:22+02:00",
    "2006-05-06T02:31:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "protocol \u003d http host \u003d null",
      "elements": [
        {
          "method": "sun.net.spi.DefaultProxySelector.select",
          "source": "Unknown Source"
        },
        {
          "method": "sun.net.www.protocol.http.HttpURLConnection.plainConnect",
          "source": "Unknown Source"
        },
        {
          "method": "sun.net.www.protocol.http.HttpURLConnection.connect",
          "source": "Unknown Source"
        },
        {
          "method": "sun.net.www.protocol.http.HttpURLConnection.getInputStream",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.URIConverterImpl.createURLInputStream",
          "source": "URIConverterImpl.java:557"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.URIConverterImpl.createInputStream",
          "source": "URIConverterImpl.java:446"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.getPackageForURI",
          "source": "XMLHandler.java:2239"
        },
        {
          "method": "org.foo.bar.internal.resource.Load$Handler.getPackageForURI",
          "source": "Load.java"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.getFactoryForPrefix",
          "source": "XMLHandler.java:2133"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectByType",
          "source": "XMLHandler.java:1124"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.createTopObject",
          "source": "XMLHandler.java:1226"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement",
          "source": "XMLHandler.java:864"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement",
          "source": "XMIHandler.java:82"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement",
          "source": "XMLHandler.java:846"
        },
        {
          "method": "org.foo.bar.internal.resource.Load$Handler.startElement",
          "source": "Load.java"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.SAXWrapper.startElement",
          "source": "SAXWrapper.java:90"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "javax.xml.parsers.SAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load",
          "source": "XMLLoadImpl.java:164"
        },
        {
          "method": "org.eclipse.gmf.runtime.emf.core.resources.GMFLoad.load",
          "source": "GMFLoad.java:51"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad",
          "source": "XMLResourceImpl.java:179"
        },
        {
          "method": "org.foo.bar.resource.Resource.doLoad",
          "source": "Resource.java:700"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1072"
        },
        {
          "method": "org.foo.bar.ResourceTestCase.testMissingEPackageHandling",
          "source": "ResourceTestCase.java"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:481"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:347"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:57"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run",
          "source": "CoreTestApplication.java:24"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "140380",
      "date": "2006-05-05T17:35:27+02:00",
      "product": "EMF",
      "component": "XML/XMI",
      "severity": "major"
    }
  ],
  "groupId": "140380",
  "bugId": "140380",
  "date": "2006-05-05T17:35:27+02:00",
  "product": "EMF",
  "component": "XML/XMI",
  "severity": "major"
}