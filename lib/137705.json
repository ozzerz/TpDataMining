{
  "comments": [
    "When I open an XML file or modify it I get an internal error.\nThis happens on WinXP with JDK 1.5.0_06 with WST 1.5M6 and its dependencies. The unusual part is that now every plugin has its own extension directory but I tested it also with an \"all-in-one\" installation and had the same results.\n\nThe first error occurs when the first XML editor is started, the second on modifications.\n\n!ENTRY org.eclipse.core.jobs 4 2 2006-04-20 14:50:35.531\n!MESSAGE An internal error occurred during: \"Processing Dirty Regions\".\n!STACK 0\njava.lang.ExceptionInInitializerError\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.getProjectFacetIds(ValidationRegistryReader.java:966)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.calculateVmdsForNatureAndFacets(ValidationRegistryReader.java:929)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData(ValidationRegistryReader.java:895)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData(ValidationRegistryReader.java:837)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.isConfiguredOnProject(ValidationRegistryReader.java:1125)\n\tat org.eclipse.wst.validation.internal.ProjectConfiguration.extractProjectValidators(ProjectConfiguration.java:264)\n\tat org.eclipse.wst.validation.internal.ProjectConfiguration.\u003cinit\u003e(ProjectConfiguration.java:44)\n\tat org.eclipse.wst.validation.internal.ConfigurationManager.getProjectConfiguration(ConfigurationManager.java:148)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.getProjectConfiguration(ValidatorStrategy.java:277)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.isValidatorEnabled(ValidatorStrategy.java:255)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.reconcile(ValidatorStrategy.java:184)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.DocumentRegionProcessor.process(DocumentRegionProcessor.java:146)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor.process(StructuredRegionProcessor.java:196)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.DirtyRegionProcessor.run(DirtyRegionProcessor.java:534)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\nCaused by: java.lang.IllegalArgumentException: Project facet jst.java has not been defined.\n\tat org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.getProjectFacet(ProjectFacetsManagerImpl.java:137)\n\tat org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readConstraintHelper(ProjectFacetsManagerImpl.java:1686)\n\tat org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readConstraintHelper(ProjectFacetsManagerImpl.java:1599)\n\tat org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readConstraint(ProjectFacetsManagerImpl.java:1558)\n\tat org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readMetadata(ProjectFacetsManagerImpl.java:1065)\n\tat org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.\u003cinit\u003e(ProjectFacetsManagerImpl.java:111)\n\tat org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.\u003cclinit\u003e(ProjectFacetsManager.java:42)\n\t... 15 more\n\n!ENTRY org.eclipse.core.jobs 4 2 2006-04-20 14:50:48.781\n!MESSAGE An internal error occurred during: \"Processing Dirty Regions\".\n!STACK 0\njava.lang.NoClassDefFoundError\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.getProjectFacetIds(ValidationRegistryReader.java:966)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.calculateVmdsForNatureAndFacets(ValidationRegistryReader.java:929)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData(ValidationRegistryReader.java:895)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData(ValidationRegistryReader.java:837)\n\tat org.eclipse.wst.validation.internal.ValidationRegistryReader.isConfiguredOnProject(ValidationRegistryReader.java:1125)\n\tat org.eclipse.wst.validation.internal.ProjectConfiguration.extractProjectValidators(ProjectConfiguration.java:264)\n\tat org.eclipse.wst.validation.internal.ProjectConfiguration.\u003cinit\u003e(ProjectConfiguration.java:44)\n\tat org.eclipse.wst.validation.internal.ConfigurationManager.getProjectConfiguration(ConfigurationManager.java:148)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.getProjectConfiguration(ValidatorStrategy.java:277)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.isValidatorEnabled(ValidatorStrategy.java:255)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.reconcile(ValidatorStrategy.java:184)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.DocumentRegionProcessor.process(DocumentRegionProcessor.java:146)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor.process(StructuredRegionProcessor.java:196)\n\tat org.eclipse.wst.sse.ui.internal.reconcile.DirtyRegionProcessor.run(DirtyRegionProcessor.java:534)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "I get the exact same error. I\u0027m using Eclipse 3.2rc1 and loaded WST and its dependencies using the Callisto entry in the update manager.",
    "I get the same errors running Eclipse 3.2RC1 and wtp-wst-sdkS-1.5M6-200604140226.zip with JDK 1.4.2_09 on Mac OS X.",
    "Konstantin, CCing you for comment and hopefully quick action.\n\nI\u0027ve found this to be readily reproducable when opening an XML file in a Dynamic Web Project using the *WST* build.  The simple lack of a Java Facet in that build is triggering all of these errors.  This problem will only be magnified when we have teams of users working on shared projects with potentially very different facet settings.\n",
    "I don\u0027t think this has anything to do with sharing projects. That issue is tracked by this: https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d123477\n\nThis issue looks more like there is a facet in wst that references jst.java in it\u0027s constraint. That\u0027s bad as jst.java facet does not exist in the wst build. I will look into this.",
    "(In reply to comment #4)\n\u003e This issue looks more like there is a facet in wst that references jst.java in\n\u003e it\u0027s constraint. That\u0027s bad as jst.java facet does not exist in the wst build.\n\u003e I will look into this.\n\nIn my own scenario, it was simply creating a dynamic web project in a workspace using the full WTP build and then reopening the workspace using a WTP-WST build.  As different products introduce their own facets and those projects get shared among users that have different product configurations.  For example, a BEA user with a project containing a facet com.bea.weblogic.facet-foo sharing it with a WTP user will cause the WTP-only user to see this exception constantly, not through any mistakes in the code but simply because the installation is different.",
    "My point is that the particular exception that was reported doesn\u0027t have anything to do with what facets were installed on the project. That\u0027s not to say that what you describe is not issue, it\u0027s just not related to this.",
    "Actually it happend just after an update, meaning configuration is the same but only with newer components.",
    "*** Bug 138675 has been marked as a duplicate of this bug. ***",
    "BTW, I have plain Java project and still getting this error.",
    "I\u0027m experiencing the same bug after installing Eclipse 3.2RC1a with WST 1.5RC1a, as installed from the Callisto update URL.  I opened an old workspace with Java projects, and whenever I open an XML file I get the \"Dirty Regions\" error, with the same stacktrace as above.\n\nIs there an easy workaround available that would allow me to define jst.java?  I tried opening a few Java source files but that didn\u0027t seem to fix it.\n",
    "I have a local fix that I will release shortly. The problem was that wst.web facet indicated in it\u0027s constraint that it conflicts with jst.java facet. I changed it around so that jst.java indicates that it conflicts with wst.web. Same effect, but no problems in wst-only installs.",
    "Fix released to the 1.5 stream.",
    "Installing the J2EE Server Tools 1.5 solves the problem for me (3.2RC3, WST 1.5).\n\nI wonder about the \"jst.java conflicts with wst.web\" comment (#11), though. Isn\u0027t the solution for this bug to install JST 1.5 along with WST 1.5?",
    "(In reply to comment #13)\n\u003e Installing the J2EE Server Tools 1.5 solves the problem for me (3.2RC3, WST\n\u003e 1.5).\n\u003e \n\u003e I wonder about the \"jst.java conflicts with wst.web\" comment (#11), though.\n\u003e Isn\u0027t the solution for this bug to install JST 1.5 along with WST 1.5?\n\u003e \n\nNope. The solution would be to be able to use WST alone.\n\nIt seems to be resolved in 1.5.",
    "Closing."
  ],
  "commentCreationDates": [
    "2006-04-20T15:08:40+02:00",
    "2006-04-20T21:59:30+02:00",
    "2006-04-24T00:04:59+02:00",
    "2006-04-24T20:12:28+02:00",
    "2006-04-24T20:28:34+02:00",
    "2006-04-24T20:42:54+02:00",
    "2006-04-24T21:01:55+02:00",
    "2006-04-24T21:16:59+02:00",
    "2006-04-26T19:07:24+02:00",
    "2006-04-26T19:09:49+02:00",
    "2006-04-27T01:38:54+02:00",
    "2006-04-27T02:32:18+02:00",
    "2006-05-02T23:48:03+02:00",
    "2006-05-08T15:22:00+02:00",
    "2006-07-07T01:03:50+02:00",
    "2006-09-26T16:09:55+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ExceptionInInitializerError",
      "elements": [
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.getProjectFacetIds",
          "source": "ValidationRegistryReader.java:966"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.calculateVmdsForNatureAndFacets",
          "source": "ValidationRegistryReader.java:929"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData",
          "source": "ValidationRegistryReader.java:895"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData",
          "source": "ValidationRegistryReader.java:837"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.isConfiguredOnProject",
          "source": "ValidationRegistryReader.java:1125"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ProjectConfiguration.extractProjectValidators",
          "source": "ProjectConfiguration.java:264"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ProjectConfiguration.\u003cinit\u003e",
          "source": "ProjectConfiguration.java:44"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ConfigurationManager.getProjectConfiguration",
          "source": "ConfigurationManager.java:148"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.getProjectConfiguration",
          "source": "ValidatorStrategy.java:277"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.isValidatorEnabled",
          "source": "ValidatorStrategy.java:255"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.reconcile",
          "source": "ValidatorStrategy.java:184"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.DocumentRegionProcessor.process",
          "source": "DocumentRegionProcessor.java:146"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor.process",
          "source": "StructuredRegionProcessor.java:196"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.DirtyRegionProcessor.run",
          "source": "DirtyRegionProcessor.java:534"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.IllegalArgumentException",
        "message": "Project facet jst.java has not been defined.",
        "elements": [
          {
            "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.getProjectFacet",
            "source": "ProjectFacetsManagerImpl.java:137"
          },
          {
            "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readConstraintHelper",
            "source": "ProjectFacetsManagerImpl.java:1686"
          },
          {
            "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readConstraintHelper",
            "source": "ProjectFacetsManagerImpl.java:1599"
          },
          {
            "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readConstraint",
            "source": "ProjectFacetsManagerImpl.java:1558"
          },
          {
            "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.readMetadata",
            "source": "ProjectFacetsManagerImpl.java:1065"
          },
          {
            "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.\u003cinit\u003e",
            "source": "ProjectFacetsManagerImpl.java:111"
          },
          {
            "method": "org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.\u003cclinit\u003e",
            "source": "ProjectFacetsManager.java:42"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "137705",
      "date": "2006-04-20T15:08:40+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "elements": [
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.getProjectFacetIds",
          "source": "ValidationRegistryReader.java:966"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.calculateVmdsForNatureAndFacets",
          "source": "ValidationRegistryReader.java:929"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData",
          "source": "ValidationRegistryReader.java:895"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.getValidatorMetaData",
          "source": "ValidationRegistryReader.java:837"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ValidationRegistryReader.isConfiguredOnProject",
          "source": "ValidationRegistryReader.java:1125"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ProjectConfiguration.extractProjectValidators",
          "source": "ProjectConfiguration.java:264"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ProjectConfiguration.\u003cinit\u003e",
          "source": "ProjectConfiguration.java:44"
        },
        {
          "method": "org.eclipse.wst.validation.internal.ConfigurationManager.getProjectConfiguration",
          "source": "ConfigurationManager.java:148"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.getProjectConfiguration",
          "source": "ValidatorStrategy.java:277"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.isValidatorEnabled",
          "source": "ValidatorStrategy.java:255"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.validator.ValidatorStrategy.reconcile",
          "source": "ValidatorStrategy.java:184"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.DocumentRegionProcessor.process",
          "source": "DocumentRegionProcessor.java:146"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor.process",
          "source": "StructuredRegionProcessor.java:196"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.DirtyRegionProcessor.run",
          "source": "DirtyRegionProcessor.java:534"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "137705",
      "date": "2006-04-20T15:08:40+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "major"
    }
  ],
  "groupId": "137705",
  "bugId": "137705",
  "date": "2006-04-20T15:08:40+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "major"
}