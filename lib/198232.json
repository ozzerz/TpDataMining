{
  "comments": [
    "Hi, \nI have a report that can extract on a single page structured with an header and a section repeated N times. Each section contains (1 pie-chart, bar-chart, 3 little tables). One the header of the top I have inserted a customized toc to reference the different sections extracted. So this toc is created inserting custom HTML created before the data are extracted to render the charts-tables.\nFor creating the TOC a first query on the database is done. \nThe problem is that when the data extracted are huge (more than 2000, that is I have a report containing more than 2000 jobs ) the TOC creation consist having an big HTML String that cannot be rendered by the BIRT HTML Emitter. The traces shows that the TOC String is build correctly but BIRT is not able render (with the HMTL emitter) a so big HTML String. The following exception is got below. \n\nFrancesco\n\n\n[7/26/07 13:04:53:425 CEST] 0000001d ServletWrappe E   SRVE0068E: Uncaught exception thrown in one of the service methods of the servlet: MyServlet. Exception thrown : java.lang.OutOfMemoryError\n       at java.lang.StringCoding.trim(StringCoding.java:347)\n       at java.lang.StringCoding.encode(StringCoding.java:514)\n       at java.lang.String.getBytes(String.java:641)\n       at org.eclipse.birt.report.engine.parser.TextParser.parse(TextParser.java:110)\n       at org.eclipse.birt.report.engine.emitter.html.HTMLReportEmitter.outputHtmlText(HTMLReportEmitter.java:1993)\n       at org.eclipse.birt.report.engine.emitter.html.HTMLReportEmitter.startForeign(HTMLReportEmitter.java:1975)\n       at org.eclipse.birt.report.engine.emitter.CompositeContentEmitter.startForeign(CompositeContentEmitter.java:260)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visitForeign(ContentEmitterUtil.java:132)\n       at org.eclipse.birt.report.engine.content.impl.ForeignContent.accept(ForeignContent.java:58)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visit(ContentEmitterUtil.java:42)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:30)\n       at org.eclipse.birt.report.engine.layout.html.HTMLTableLayoutEmitter.startContent(HTMLTableLayoutEmitter.java:97)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startForeign(ContentEmitterAdapter.java:155)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visitForeign(ContentEmitterUtil.java:132)\n       at org.eclipse.birt.report.engine.content.impl.ForeignContent.accept(ForeignContent.java:58)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visit(ContentEmitterUtil.java:42)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:30)\n       at org.eclipse.birt.report.engine.layout.html.HTMLTableLayoutEmitter.startContent(HTMLTableLayoutEmitter.java:97)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startForeign(ContentEmitterAdapter.java:155)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visitForeign(ContentEmitterUtil.java:132)\n       at org.eclipse.birt.report.engine.content.impl.ForeignContent.accept(ForeignContent.java:58)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visit(ContentEmitterUtil.java:42)\n       at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:30)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.start(HTMLAbstractLM.java:102)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:158)\n       at org.eclipse.birt.report.engine.layout.html.HTMLLeafItemLM.layout(HTMLLeafItemLM.java:31)\n       at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren(HTMLBlockStackingLM.java:68)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\n       at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.resumeLayout(HTMLInlineStackingLM.java:94)\n       at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.layoutChildren(HTMLInlineStackingLM.java:138)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\n       at org.eclipse.birt.report.engine.layout.html.HTMLRowLM.layout(HTMLRowLM.java:30)\n       at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren(HTMLBlockStackingLM.java:68)\n       at org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren(HTMLTableLM.java:74)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\n       at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren(HTMLBlockStackingLM.java:68)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\n       at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.resumeLayout(HTMLInlineStackingLM.java:94)\n       at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.layoutChildren(HTMLInlineStackingLM.java:138)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\n       at org.eclipse.birt.report.engine.layout.html.HTMLRowLM.layout(HTMLRowLM.java:30)\n       at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren(HTMLBlockStackingLM.java:68)\n       at org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren(HTMLTableLM.java:74)\n       at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\n       at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:139)\n       at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81)\n       at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:85)\n       at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:205)\n       at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:142)\n       at com.ibm.tws.webui.report.manager.ReportManagementServlet.launchReport(ReportManagementServlet.java:358)\n       at com.ibm.tws.webui.report.manager.ReportManagementServlet.doGet(ReportManagementServlet.java:183)\n       at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)\n       at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n       at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:989)\n       at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:501)\n       at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:464)\n       at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3252)\n       at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:264)\n       at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:811)\n       at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1433)\n       at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:112)\n       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:454)\n       at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:383)\n       at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:102)\n       at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1815)\n       at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)\n       at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\n       at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\n       at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)\n       at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:195)\n       at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:743)\n       at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:873)\n       at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1469)",
    "Can you tell me the length of the HTML? and the max memory you used for the JVM?\n\nthanks",
    "The user should run the app in larger memory limitation, such as:\n\n-Xms40m\n-Xmx512m\n-XX:MaxPermSize\u003d128m",
    "Created an attachment (id\u003d77356)\nIt contains an HTML report with an header with a Table of Content\n\nThe Table of Content is a section that should be rendered on an the top portion of a report. In this case the TOC has a lot of links. The TOC is generated at runtime depending on the data and it should be rendered by the report engine. But it fails\nas explained above.",
    "what\u0027s the memory setting you are using?\n\nThanks.",
    "Can not reproduce this bug.\n\nThe html file, user attached, only has 160 outputted elements with the hyperlink.\nI have used the BIRT RCP and BIRT code of the 2.1.2 version. I have creat a report with thousands of TOC and hyperlinks. It work well.\n\nI haven\u0027t setted the memory specially.\n\nBy the way, my conputer has 1GB memory. And the report has 3260 rows which contian a toc and a hyperlink.\n",
    "I have tested it with BIRT 2.2.1 too. It works well.",
    "I have setted my eclipse\u0027s memory limitation to:\n-Xms40m\n-Xmx256m\n-XX:MaxPermSize\u003d128m\n\nIt works well.\nCan\u0027t reproduce this bug."
  ],
  "commentCreationDates": [
    "2007-07-30T09:56:26+02:00",
    "2007-07-31T02:58:14+02:00",
    "2007-08-13T05:02:56+02:00",
    "2007-08-30T10:29:30+02:00",
    "2007-08-31T00:59:00+02:00",
    "2007-10-28T02:41:21+01:00",
    "2007-10-28T02:42:11+01:00",
    "2007-10-29T03:30:46+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.OutOfMemoryError",
      "elements": [
        {
          "method": "java.lang.StringCoding.trim",
          "source": "StringCoding.java:347"
        },
        {
          "method": "java.lang.StringCoding.encode",
          "source": "StringCoding.java:514"
        },
        {
          "method": "java.lang.String.getBytes",
          "source": "String.java:641"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.TextParser.parse",
          "source": "TextParser.java:110"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.html.HTMLReportEmitter.outputHtmlText",
          "source": "HTMLReportEmitter.java:1993"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.html.HTMLReportEmitter.startForeign",
          "source": "HTMLReportEmitter.java:1975"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.CompositeContentEmitter.startForeign",
          "source": "CompositeContentEmitter.java:260"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visitForeign",
          "source": "ContentEmitterUtil.java:132"
        },
        {
          "method": "org.eclipse.birt.report.engine.content.impl.ForeignContent.accept",
          "source": "ForeignContent.java:58"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visit",
          "source": "ContentEmitterUtil.java:42"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent",
          "source": "ContentEmitterUtil.java:30"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLTableLayoutEmitter.startContent",
          "source": "HTMLTableLayoutEmitter.java:97"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startForeign",
          "source": "ContentEmitterAdapter.java:155"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visitForeign",
          "source": "ContentEmitterUtil.java:132"
        },
        {
          "method": "org.eclipse.birt.report.engine.content.impl.ForeignContent.accept",
          "source": "ForeignContent.java:58"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visit",
          "source": "ContentEmitterUtil.java:42"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent",
          "source": "ContentEmitterUtil.java:30"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLTableLayoutEmitter.startContent",
          "source": "HTMLTableLayoutEmitter.java:97"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startForeign",
          "source": "ContentEmitterAdapter.java:155"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visitForeign",
          "source": "ContentEmitterUtil.java:132"
        },
        {
          "method": "org.eclipse.birt.report.engine.content.impl.ForeignContent.accept",
          "source": "ForeignContent.java:58"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil$StartContentVisitor.visit",
          "source": "ContentEmitterUtil.java:42"
        },
        {
          "method": "org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent",
          "source": "ContentEmitterUtil.java:30"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.start",
          "source": "HTMLAbstractLM.java:102"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:158"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLLeafItemLM.layout",
          "source": "HTMLLeafItemLM.java:31"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren",
          "source": "HTMLBlockStackingLM.java:68"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:159"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.resumeLayout",
          "source": "HTMLInlineStackingLM.java:94"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.layoutChildren",
          "source": "HTMLInlineStackingLM.java:138"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:159"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLRowLM.layout",
          "source": "HTMLRowLM.java:30"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren",
          "source": "HTMLBlockStackingLM.java:68"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren",
          "source": "HTMLTableLM.java:74"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:159"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren",
          "source": "HTMLBlockStackingLM.java:68"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:159"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.resumeLayout",
          "source": "HTMLInlineStackingLM.java:94"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.layoutChildren",
          "source": "HTMLInlineStackingLM.java:138"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:159"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLRowLM.layout",
          "source": "HTMLRowLM.java:30"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren",
          "source": "HTMLBlockStackingLM.java:68"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren",
          "source": "HTMLTableLM.java:74"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout",
          "source": "HTMLAbstractLM.java:159"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren",
          "source": "HTMLPageLM.java:139"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout",
          "source": "HTMLPageLM.java:81"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:85"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
          "source": "RunAndRenderTask.java:205"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:142"
        },
        {
          "method": "com.ibm.tws.webui.report.manager.ReportManagementServlet.launchReport",
          "source": "ReportManagementServlet.java:358"
        },
        {
          "method": "com.ibm.tws.webui.report.manager.ReportManagementServlet.doGet",
          "source": "ReportManagementServlet.java:183"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:743"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:856"
        },
        {
          "method": "com.ibm.ws.webcontainer.servlet.ServletWrapper.service",
          "source": "ServletWrapper.java:989"
        },
        {
          "method": "com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest",
          "source": "ServletWrapper.java:501"
        },
        {
          "method": "com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest",
          "source": "ServletWrapper.java:464"
        },
        {
          "method": "com.ibm.ws.webcontainer.webapp.WebApp.handleRequest",
          "source": "WebApp.java:3252"
        },
        {
          "method": "com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest",
          "source": "WebGroup.java:264"
        },
        {
          "method": "com.ibm.ws.webcontainer.WebContainer.handleRequest",
          "source": "WebContainer.java:811"
        },
        {
          "method": "com.ibm.ws.wswebcontainer.WebContainer.handleRequest",
          "source": "WebContainer.java:1433"
        },
        {
          "method": "com.ibm.ws.webcontainer.channel.WCChannelLink.ready",
          "source": "WCChannelLink.java:112"
        },
        {
          "method": "com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination",
          "source": "HttpInboundLink.java:454"
        },
        {
          "method": "com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation",
          "source": "HttpInboundLink.java:383"
        },
        {
          "method": "com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete",
          "source": "HttpICLReadCallback.java:102"
        },
        {
          "method": "com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete",
          "source": "SSLReadServiceContext.java:1815"
        },
        {
          "method": "com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted",
          "source": "AioReadCompletionListener.java:165"
        },
        {
          "method": "com.ibm.io.async.AbstractAsyncFuture.invokeCallback",
          "source": "AbstractAsyncFuture.java:217"
        },
        {
          "method": "com.ibm.io.async.AsyncChannelFuture.fireCompletionActions",
          "source": "AsyncChannelFuture.java:161"
        },
        {
          "method": "com.ibm.io.async.AsyncFuture.completed",
          "source": "AsyncFuture.java:136"
        },
        {
          "method": "com.ibm.io.async.ResultHandler.complete",
          "source": "ResultHandler.java:195"
        },
        {
          "method": "com.ibm.io.async.ResultHandler.runEventProcessingLoop",
          "source": "ResultHandler.java:743"
        },
        {
          "method": "com.ibm.io.async.ResultHandler$2.run",
          "source": "ResultHandler.java:873"
        },
        {
          "method": "com.ibm.ws.util.ThreadPool$Worker.run",
          "source": "ThreadPool.java:1469"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "198232",
      "date": "2007-07-30T09:56:26+02:00",
      "product": "BIRT",
      "component": "Report Engine",
      "severity": "major"
    }
  ],
  "groupId": "198232",
  "bugId": "198232",
  "date": "2007-07-30T09:56:26+02:00",
  "product": "BIRT",
  "component": "Report Engine",
  "severity": "major"
}