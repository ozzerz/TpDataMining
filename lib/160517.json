{
  "comments": [
    "We have a report which includes a couple of charts.  One chart is always displayed because the data is always available.  However, two of the charts have their visibility toggled depending on whether their data series is populated.\n\nThe problem is that even when a chart is hidden, a ChartException is generated because the underlying dataset is empty.  I expect the chart to not attempt to retrieve metadata or log an error in this circumstance. To prevent the exception, I\u0027ve had to inject a \"stub value\" into the dataset within my custom Java dataset event handlers, which is messy.  I suspect the chart engine is also wasting some CPU cycles doing extra work since I really don\u0027t want the chart rendered when there is no real data.\n\nIn BIRT 2.1.0, the report engine would not even generate a PDF when this ChartException was thrown, so I was encouraged when I found that BIRT 2.1.1 generates the PDF despite the exception.  However, since the errors are in our logs, I\u0027m afraid I\u0027m going to have to continue injecting stubbed data values.\n\nI am attaching a sample report with a single hidden chart that exhibits the behavior.\n\nThe stacktrace :\nOct 11, 2006 12:05:18 PM org.eclipse.birt.chart.internal.datafeed.ResultSetWrapper initializeMeta\nWARNING: Unable to determine data types from resultset\nOct 11, 2006 12:05:18 PM org.eclipse.birt.chart.exception.ChartException logThis\nSEVERE: Exception\norg.eclipse.birt.chart.exception.ChartException: Empty dataset found\n\tat org.eclipse.birt.chart.datafeed.DataSetProcessorImpl.populate(DataSetProcessorImpl.java:248)\n\tat org.eclipse.birt.chart.internal.datafeed.DataProcessor.fillSeriesDataSet(DataProcessor.java:1516)\n\tat org.eclipse.birt.chart.internal.datafeed.DataProcessor.fillSeriesDataSet(DataProcessor.java:1485)\n\tat org.eclipse.birt.chart.internal.datafeed.DataProcessor.generateRuntimeSeries(DataProcessor.java:976)\n\tat org.eclipse.birt.chart.internal.datafeed.DataProcessor.generateRuntimeSeries(DataProcessor.java:721)\n\tat org.eclipse.birt.chart.factory.Generator.bindData(Generator.java:559)\n\tat org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:399)\n\tat org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.processExtendedContent(LocalizedContentVisitor.java:651)\n\tat org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.visitForeign(LocalizedContentVisitor.java:359)\n\tat org.eclipse.birt.report.engine.content.impl.ForeignContent.accept(ForeignContent.java:58)\n\tat org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.localize(LocalizedContentVisitor.java:111)\n\tat org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute(LocalizedReportItemExecutor.java:38)\n\tat org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:123)\n\tat org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81)\n\tat org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:80)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:194)\n\tat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute(Unknown Source)\n\tat org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(Unknown Source)\n\tat org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source)\n\tat org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(Unknown Source)\n\tat org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet(Unknown Source)\n\tat org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2422)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke(EclipseErrorReportValve.java:153)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:700)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:584)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\n\tat java.lang.Thread.run(Unknown Source)",
    "Created an attachment (id\u003d51776)\nsample report with hidden chart, empty dataset\n\nattached sample report design",
    "This requires an API change in the DataSet (see bug#162167 ). So moving this to \n2.2. The exception log level should already decreased, and the logging is not \naffecting the functionality. There will be no overhead to execute a few more \nlines of code that lead to this exception.",
    "According to new Report engine API, add empty check for IRowSet before chart rendering. When encountering empty IRowSet, engine won?t generate the chart image."
  ],
  "commentCreationDates": [
    "2006-10-11T19:22:17+02:00",
    "2006-10-11T19:24:05+02:00",
    "2006-11-03T22:43:16+01:00",
    "2007-02-25T03:35:31+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.birt.chart.exception.ChartException",
      "message": "Empty dataset found",
      "elements": [
        {
          "method": "org.eclipse.birt.chart.datafeed.DataSetProcessorImpl.populate",
          "source": "DataSetProcessorImpl.java:248"
        },
        {
          "method": "org.eclipse.birt.chart.internal.datafeed.DataProcessor.fillSeriesDataSet",
          "source": "DataProcessor.java:1516"
        },
        {
          "method": "org.eclipse.birt.chart.internal.datafeed.DataProcessor.fillSeriesDataSet",
          "source": "DataProcessor.java:1485"
        },
        {
          "method": "org.eclipse.birt.chart.internal.datafeed.DataProcessor.generateRuntimeSeries",
          "source": "DataProcessor.java:976"
        },
        {
          "method": "org.eclipse.birt.chart.internal.datafeed.DataProcessor.generateRuntimeSeries",
          "source": "DataProcessor.java:721"
        },
        {
          "method": "org.eclipse.birt.chart.factory.Generator.bindData",
          "source": "Generator.java:559"
        },
        {
          "method": "org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets",
          "source": "ChartReportItemPresentationImpl.java:399"
        },
        {
          "method": "org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.processExtendedContent",
          "source": "LocalizedContentVisitor.java:651"
        },
        {
          "method": "org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.visitForeign",
          "source": "LocalizedContentVisitor.java:359"
        },
        {
          "method": "org.eclipse.birt.report.engine.content.impl.ForeignContent.accept",
          "source": "ForeignContent.java:58"
        },
        {
          "method": "org.eclipse.birt.report.engine.presentation.LocalizedContentVisitor.localize",
          "source": "LocalizedContentVisitor.java:111"
        },
        {
          "method": "org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute",
          "source": "LocalizedReportItemExecutor.java:38"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren",
          "source": "HTMLPageLM.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout",
          "source": "HTMLPageLM.java:81"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:80"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:194"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:740"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:853"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:247"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:193"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:256"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:191"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.CertificatesValve.invoke",
          "source": "CertificatesValve.java:246"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContext.invoke",
          "source": "StandardContext.java:2422"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:180"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.ErrorDispatcherValve.invoke",
          "source": "ErrorDispatcherValve.java:171"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke",
          "source": "EclipseErrorReportValve.java:153"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:174"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.coyote.tomcat4.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:199"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:828"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:700"
        },
        {
          "method": "org.apache.tomcat.util.net.TcpWorkerThread.runIt",
          "source": "PoolTcpEndpoint.java:584"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:683"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "160517",
      "date": "2006-10-11T19:22:17+02:00",
      "product": "BIRT",
      "component": "Chart",
      "severity": "normal"
    }
  ],
  "groupId": "160517",
  "bugId": "160517",
  "date": "2006-10-11T19:22:17+02:00",
  "product": "BIRT",
  "component": "Chart",
  "severity": "normal"
}