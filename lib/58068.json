{
  "comments": [
    "If you write a plug-in that manages to activate two views at the same time in\nthe same perspective ((probably not legal, but allowed before M8) when you go\nback to another perspective, the workspace hangs.\n\nTo test:\n\nI got that behaviour because the plugin I work with (QuantumDB in sourceforge),\nactivated two views at the same time by the expedient of indirectly calling\nIWorkbenchPage.showView() with the name of a view, while inside the setFocus()\nfunction of another, and then giving the focus to a widget of its own. That\ncaused a NullPointerException in the workspace (only in M8, before was\naccepted), and the workspace would refuse to show any view from then on.\n\nI give the error log  below. I did some debug and the problem seems to lie in\nthe fact that getPresentation(), in the line\n\n        getPresentation().setActive(activeState);\n\ninside PartTabFolder.setActive(), returns null the second time it\u0027s called.\n\nTo reproduce the error, you can use any version of the Quantum plugin (a\ndatabase explorer plugin), except the one marked with M8 in the zip file. There\nthe double activation is corrected. You can for example download :\n\nhttp://prdownloads.sourceforge.net/quantum/quantum230.zip?download\n\nand then install it, decompressing the zip file into the plugin directory. Then\nstart Eclipse, open the Quantum DB perspective, click onto the \"SQL Query\nEditor\" view, and then both the \"Bookmarks View\" and the \"SQL Query View\" will\nbe active. If you now try to go back to another perspective, the workspace\ndoesn\u0027t respond.\n\nI feel that, even if it\u0027s true that two views are not allowed to be active at\nthe same time, the workspace should either forcibly forbid it (probably breaking\nsome plugins that used the \"feature\" before), or allow it like the previous\nreleases. At the very least, it should fail more graciously.\n\nThat\u0027s all. I\u0027m at your service for any question. Thanks for all.\n\n(Log file)\n----------------------------------\n\n!SESSION abr 07, 2004 14:40:22.827 ---------------------------------------------\njava.version\u003d1.4.2-beta\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003des_ES\n!ENTRY org.eclipse.ui 4 4 abr 07, 2004 14:40:22.827\n!MESSAGE Unhandled event loop exception\n!ENTRY org.eclipse.ui 4 0 abr 07, 2004 14:40:22.877\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.ui.internal.PartTabFolder.setActive(PartTabFolder.java:801)\n\tat org.eclipse.ui.internal.ViewPane.setContainer(ViewPane.java:607)\n\tat org.eclipse.ui.internal.PartTabFolder.dispose(PartTabFolder.java:431)\n\tat org.eclipse.ui.internal.PartSashContainer.dispose(PartSashContainer.java:290)\n\tat\norg.eclipse.ui.internal.PerspectivePresentation.deactivate(PerspectivePresentation.java:455)\n\tat org.eclipse.ui.internal.Perspective.onDeactivate(Perspective.java:644)\n\tat org.eclipse.ui.internal.WorkbenchPage.setPerspective(WorkbenchPage.java:2668)\n\tat org.eclipse.ui.internal.WorkbenchPage.busySetPerspective(WorkbenchPage.java:694)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$8(WorkbenchPage.java:679)\n\tat org.eclipse.ui.internal.WorkbenchPage$12.run(WorkbenchPage.java:2805)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\n\tat org.eclipse.ui.internal.WorkbenchPage.setPerspective(WorkbenchPage.java:2803)\n\tat\norg.eclipse.ui.internal.PerspectiveBarContributionItem$3.widgetSelected(PerspectiveBarContributionItem.java:109)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:769)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2578)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2256)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1562)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1536)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:257)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:277)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:239)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:267)\n\tat org.eclipse.core.launcher.Main.run(Main.java:692)\n\tat org.eclipse.core.launcher.Main.main(Main.java:676)",
    "Agreed, we should fail more gracefully.\n\nBTW, what was the \"expected\" behavior when you activate two views at once?",
    "Well, the two views are (or rather were) very much linked. So the data in one of\nthem depends from which item is selected in the other one. So when you activate\n\"View 2\", you want to check which item is selected, and, also, make the \"View 1\"\nvisible so that the user knows why the data is such and such. So activating the\nview should bring it to the foreground to be shown at the same time with the\nother view.\n\nSo the expected behaviour was the behaviour in all releases of Eclipse up to M8,\nthat is, the two views are active at the same time with no problem. A rather\nmore reasonable expected behaviour would be that the active view is one or the\nother, but not both.",
    "Understood. The plugin should not actually be activating both views... it should\nbe activating one and bringing the other one to top. However, activating two\nviews should have the same effect as bringing the first view to top and\nactivating the second. I will try to reproduce.",
    "Julen,\n\ncould you please try 3.2 M2 and confirm whether this problem does still exist?\n\nThanks!",
    "Hi.\n\nI\u0027ll try. I\u0027m out of broadband at the moment, so cannot download 3.2 M2, and\nalso need the old Quantum code, as the new versions are corrected and don\u0027t\nsuffer from that problem. But when I have broadband again I\u0027ll try to see if it\nworks. Thanks for your attention :o)\n\nJulen.",
    "I think I have done a proper test (the old code didn\u0027t quite work), and never\ngot to hang the workspace, so I guess it\u0027s fixed. Thanks for your work :)",
    "Marking as fixed. (It might have been fixed by the fix for bug 78470).",
    "[I20051101-0010]\n\nVerified on Windows XP using the steps given (opening a view (calling\nshowView()) from within setFocus() of another view)."
  ],
  "commentCreationDates": [
    "2004-04-10T10:16:11+02:00",
    "2004-09-20T17:07:02+02:00",
    "2004-09-20T17:37:15+02:00",
    "2004-09-20T18:23:28+02:00",
    "2005-09-27T16:22:24+02:00",
    "2005-09-27T19:15:12+02:00",
    "2005-10-09T11:28:17+02:00",
    "2005-10-10T02:20:42+02:00",
    "2005-11-01T20:49:03+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.PartTabFolder.setActive",
          "source": "PartTabFolder.java:801"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.setContainer",
          "source": "ViewPane.java:607"
        },
        {
          "method": "org.eclipse.ui.internal.PartTabFolder.dispose",
          "source": "PartTabFolder.java:431"
        },
        {
          "method": "org.eclipse.ui.internal.PartSashContainer.dispose",
          "source": "PartSashContainer.java:290"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectivePresentation.deactivate",
          "source": "PerspectivePresentation.java:455"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.onDeactivate",
          "source": "Perspective.java:644"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setPerspective",
          "source": "WorkbenchPage.java:2668"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busySetPerspective",
          "source": "WorkbenchPage.java:694"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$8",
          "source": "WorkbenchPage.java:679"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$12.run",
          "source": "WorkbenchPage.java:2805"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setPerspective",
          "source": "WorkbenchPage.java:2803"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectiveBarContributionItem$3.widgetSelected",
          "source": "PerspectiveBarContributionItem.java:109"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2578"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2256"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1562"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1536"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:257"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:90"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:277"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:239"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:117"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:267"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:692"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:676"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "58068",
      "date": "2004-04-10T10:16:11+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "58068",
  "bugId": "58068",
  "date": "2004-04-10T10:16:11+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}