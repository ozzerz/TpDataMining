{
  "comments": [
    "I just upgraded from Eclipse 3.1.1 to Eclipse 3.2. While refreshing the codebase, the compiler crashed with this stacktrace:\n\nInternal compiler error\njava.lang.ClassCastException: org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.findMemberType(Scope.java:961)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:2359)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:2080)\n\tat org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.internalResolveType(ParameterizedSingleTypeReference.java:99)\n\tat org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.resolveType(ParameterizedSingleTypeReference.java:209)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType(TypeReference.java:110)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype(ClassScope.java:1084)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperInterfaces(ClassScope.java:884)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy(ClassScope.java:930)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy(CompilationUnitScope.java:288)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings(LookupEnvironment.java:198)\n\tat org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:383)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:397)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:300)\n\tat org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile(BatchImageBuilder.java:217)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:237)\n\tat org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:56)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:249)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:169)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:603)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:167)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:201)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:230)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:233)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:252)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:285)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:145)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:208)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n\nTo state what\u0027s hopefully obvious, the same codebase compiles \u0026 runs fine in 3.1.1.\n\nThe error is claimed to have occurred at line 0 of the file (I\u0027ll have to ask $BOSS first if you need the source - sorry.) However, it may be useful to know that it uses generics in what may be a slightly unusual fashion: the class was of the form\n\nclass Foo extends Bar\u003cBaz\u003e\n{\n...\n}\n\nie. Foo isn\u0027t generic, but its superclass is.\n\n\nI have tried this both using the carried-over workspace config, and by renaming the workspace directory and letting Eclipse 3.2 make a fresh one; same exception.\n\nSun JDK 1.5.0_06, KDE 3.5.3, GTK version of Eclipse.\n\n[Marked as severity \"Blocker\" since I\u0027m going to have to go back to 3.1.1 until this is fixed - hope this is correct.]",
    "Please give a try to our 3.2.1 preview posted at:\nhttp://www.eclipse.org/jdt/core/r3.2/index.php#UPDATES\n\nIf unlucky, then we will need steps to reproduce so as to address it.",
    "*** Bug 152202 has been marked as a duplicate of this bug. ***",
    "(In reply to comment #1)\n\u003e Please give a try to our 3.2.1 preview posted at:\n\u003e http://www.eclipse.org/jdt/core/r3.2/index.php#UPDATES\n\nI put the org.eclipse.jdt.core_3.2.1.jar and removed my old org.eclipse.jdt.core jar, started Eclipse and did a clean and build of everything. The problem remains.\n\nI\u0027m not sure what other information I can send you. I\u0027m unable to send the source code. I can tell you that the particular file has a bunch of generics in it (I didn\u0027t write it).",
    "I\u0027ve replaced the 3.2.0 org.eclipse.jdt.core.jar with the 3.2.1 preview. Same problem, but slightly different line nos on the stack trace:\n\nInternal compiler error\njava.lang.ClassCastException: org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.findMemberType(Scope.java:959)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:2331)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:2052)\n\tat org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.internalResolveType(ParameterizedSingleTypeReference.java:99)\n\tat org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.resolveType(ParameterizedSingleTypeReference.java:209)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType(TypeReference.java:110)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype(ClassScope.java:1083)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperInterfaces(ClassScope.java:883)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy(ClassScope.java:929)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy(CompilationUnitScope.java:289)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings(LookupEnvironment.java:198)\n\tat org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:383)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:397)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:300)\n\tat org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile(BatchImageBuilder.java:213)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:237)\n\tat org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:59)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:249)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:169)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:603)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:167)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:201)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:230)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:233)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:252)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:285)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:145)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:208)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n\n\nI\u0027ll try to build an anonymised demonstration that I can upload.\n",
    "Created an attachment (id\u003d47231)\nExample code which triggers the bug\n\nThe attached project contains code which triggers this bug. The bug appears to be sensitive to package names or structure: if it won\u0027t come out to play, try refactor|rename package on the two packages. The bug seems to be a bit of a Schrodinbug so you might have to play around a little. It might be important whether or not the package containing ResultFilter is the superpackage of the one containing NameRF. ",
    "In the example code, ResultFilter contains an enum. FWIW, I managed to avoid the bug by promoting this enum to its own file and changing NameRF accordingly: the rest of the project didn\u0027t compile due to ricochets (correct compiler behaviour) but NameRF itself did. Don\u0027t know if this helps.",
    "Re comment 6: for \"... avoid the bug ...\" read \"... avoid the bug for the corresponding code in the real project...\".",
    "(In reply to comment #6)\n\u003e In the example code, ResultFilter contains an enum. FWIW, I managed to avoid\n\u003e the bug by promoting this enum to its own file and changing NameRF accordingly:\n\u003e the rest of the project didn\u0027t compile due to ricochets (correct compiler\n\u003e behaviour) but NameRF itself did. Don\u0027t know if this helps.\n\u003e \n\nThanks for the update Will. My problem class also had a bunch of inner generic classes. I refactored these to be top level classes rather than inner classes and I can build again. I really hate to do this because it\u0027s so ugly, but it does work.",
    "Reproduced with the R3_2_maintenance. Will investigate.",
    "Added ReconcilerTests#testBug151410[ac] (a and b not being active).\nThis shows that the static import somehow triggers the use of a ParameterizedTypeBinding where the hierarchy resolution would never expect one.\n\nThe following code - crafted after the example of comment #5 - passes and might be less damaging a workaround:\n\npackage ccs.jdtbug.filters;\n// import static ccs.jdtbug.ResultFilter.Action.*;\nimport ccs.jdtbug.*;\npublic class NameRF implements ResultFilter\u003cString\u003e\n{\npublic Action getAction(String in, int ntotal, int naccept)\n{\n\treturn Action.YES; // qualified\n}\n}\n",
    "I finally found that this bug was already fixed in 3.3 stream.\n\nI\u0027ve reverted changes in ReconcilerTests and add a specific one in GenericTypeTest#test1021c()\n\nI\u0027ve also updated the 3.2.1 preview posted at:\nhttp://www.eclipse.org/jdt/core/r3.2/index.php#UPDATES\n\nPlease try again with this new version and let us know if it definitely fixes your problem, thanks\n\n\n*** This bug has been marked as a duplicate of 149376 ***",
    "OK, that seems to work. Thanks, guys."
  ],
  "commentCreationDates": [
    "2006-07-21T16:31:15+02:00",
    "2006-07-21T17:03:24+02:00",
    "2006-07-28T21:41:15+02:00",
    "2006-07-31T00:13:47+02:00",
    "2006-08-02T16:09:10+02:00",
    "2006-08-02T17:24:11+02:00",
    "2006-08-02T17:29:47+02:00",
    "2006-08-02T17:33:29+02:00",
    "2006-08-02T22:53:13+02:00",
    "2006-08-03T11:44:38+02:00",
    "2006-08-03T15:35:03+02:00",
    "2006-08-03T19:40:48+02:00",
    "2006-08-09T01:25:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.findMemberType",
          "source": "Scope.java:961"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage",
          "source": "Scope.java:2359"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getType",
          "source": "Scope.java:2080"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.internalResolveType",
          "source": "ParameterizedSingleTypeReference.java:99"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.resolveType",
          "source": "ParameterizedSingleTypeReference.java:209"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType",
          "source": "TypeReference.java:110"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype",
          "source": "ClassScope.java:1084"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperInterfaces",
          "source": "ClassScope.java:884"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy",
          "source": "ClassScope.java:930"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy",
          "source": "CompilationUnitScope.java:288"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings",
          "source": "LookupEnvironment.java:198"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.java:383"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:397"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:300"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile",
          "source": "BatchImageBuilder.java:217"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:237"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build",
          "source": "BatchImageBuilder.java:56"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll",
          "source": "JavaBuilder.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.build",
          "source": "JavaBuilder.java:169"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:603"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:167"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:201"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:230"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:233"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:252"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:285"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:208"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "151410",
      "duplicateId": "149376",
      "date": "2006-07-21T16:31:15+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.findMemberType",
          "source": "Scope.java:959"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage",
          "source": "Scope.java:2331"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getType",
          "source": "Scope.java:2052"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.internalResolveType",
          "source": "ParameterizedSingleTypeReference.java:99"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.resolveType",
          "source": "ParameterizedSingleTypeReference.java:209"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType",
          "source": "TypeReference.java:110"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype",
          "source": "ClassScope.java:1083"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperInterfaces",
          "source": "ClassScope.java:883"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy",
          "source": "ClassScope.java:929"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy",
          "source": "CompilationUnitScope.java:289"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings",
          "source": "LookupEnvironment.java:198"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.java:383"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:397"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:300"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile",
          "source": "BatchImageBuilder.java:213"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:237"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build",
          "source": "BatchImageBuilder.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll",
          "source": "JavaBuilder.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.build",
          "source": "JavaBuilder.java:169"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:603"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:167"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:201"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:230"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:233"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:252"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:285"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:208"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "151410",
      "duplicateId": "149376",
      "date": "2006-08-02T16:09:10+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "blocker"
    }
  ],
  "groupId": "149376",
  "bugId": "151410",
  "duplicateId": "149376",
  "date": "2006-07-21T16:31:15+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "blocker"
}