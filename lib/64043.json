{
  "comments": [
    "I\u0027m using 3.0M9.  I just started the eclipse, projects and files are already\nopen.  I pressed CTRL-Tab to switch to the next editor, and got a dialog box for\nthis error.  The editor pane was maximized, and this error happened a few times.\n After restoring the editor pane, and maximizing again, the error does not occur.\n\n!SESSION May 25, 2004 23:56:18.985 ---------------------------------------------\neclipse.buildId\u003dI200405211200\njava.version\u003d1.4.2_01\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -showlocation\n!ENTRY org.eclipse.ui 4 4 May 25, 2004 23:56:18.985\n!MESSAGE The command for the key you pressed failed\n!ENTRY org.eclipse.ui 4 0 May 25, 2004 23:56:18.985\n!MESSAGE The command for the key you pressed failed\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.ui.internal.PerspectiveHelper.partChangeAffectsZoom(PerspectiveHelper.java:1002)\n\tat\norg.eclipse.ui.internal.WorkbenchPage.partChangeAffectsZoom(WorkbenchPage.java:2232)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:446)\n\tat org.eclipse.ui.internal.CyclePartAction.activate(CyclePartAction.java:99)\n\tat org.eclipse.ui.internal.CyclePartAction.runWithEvent(CyclePartAction.java:487)\n\tat org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:141)\n\tat org.eclipse.ui.internal.commands.Command.execute(Command.java:132)",
    "Another detail to reproduce: maximize the editor before trying ctrl-tab.\n",
    "can not recreate.  Is there an error in your editor happening as well?  Is \nthere more in the log?",
    "Ok, I was able to reproduce this bug using M9.\nHere are my steps:\n- Start eclipse with open editors\n- Go to \"Window-\u003ePreferences...\"\n- Select \"Workbench\"-\u003e\"Keys\"\n- Add \"Ctrl+Tab\" as a key binding to the \"Window\" category and \"Next Editor\"\ncommand name.\n- Maximize the editor pane (double click on an editor)\n- Press \"Ctrl+Tab\"\n\nThe \"Error Executing Command\" dialog shows up. The content of the log file is\nbelow. This is a reproducible bug.\n\n\n\n\n!ENTRY org.eclipse.ui 4 4 May 27, 2004 11:47:16.489\n!MESSAGE The command for the key you pressed failed\n!ENTRY org.eclipse.ui 4 0 May 27, 2004 11:47:16.499\n!MESSAGE The command for the key you pressed failed\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.ui.internal.PerspectiveHelper.partChangeAffectsZoom(PerspectiveHelper.java:1002)\n\tat\norg.eclipse.ui.internal.WorkbenchPage.partChangeAffectsZoom(WorkbenchPage.java:2232)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:446)\n\tat org.eclipse.ui.internal.CyclePartAction.activate(CyclePartAction.java:99)\n\tat org.eclipse.ui.internal.CyclePartAction.runWithEvent(CyclePartAction.java:487)\n\tat org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:141)\n\tat org.eclipse.ui.internal.commands.Command.execute(Command.java:132)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:469)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:887)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:928)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:546)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:494)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:259)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:712)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:795)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:805)\n\tat org.eclipse.swt.widgets.Control.traverse(Control.java:2704)\n\tat org.eclipse.swt.widgets.Control.translateTraversal(Control.java:2685)\n\tat org.eclipse.swt.widgets.Composite.translateTraversal(Composite.java:553)\n\tat org.eclipse.swt.widgets.Display.translateTraversal(Display.java:3153)\n\tat org.eclipse.swt.widgets.Display.filterMessage(Display.java:726)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2378)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:307)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:638)\n\tat org.eclipse.core.launcher.Main.main(Main.java:622)\n",
    "To avoid changing the key preferences, you can alternatively use CTRL+F6\n(default key binding for next editor). It yields to the same result as described\nin comment #3. I am using Build id 200405270800 and I can reproduce this problem.\nCurrently investigating?",
    "Created an attachment (id\u003d11229)\nPatch to solve NPE problem\n\nAfter discussing with Stefan, he pointed me to a fix that Nick applied for\nviews (turns out to be a similar problem as this one: Bug 61545 - comment #15).\n\nIt seems to fix the current problem. Please comment if the NPE still occurs or\nother problems arise.",
    "The only other issue with the patch above is the following line in the\nEditorManager:\n\"ref.getPane().createControl(page.getClientComposite());\"\n\nAfter briefly discussing with Nick, he pointed out that he is not sure if the\neditor pane\u0027s controls are parented under the same composite as views (the\nworkbench page\u0027s client composite). \n\nI tried this instead (since Stefan suggested that the editor\u0027s pane\u0027s controls\nare parented under the EditorSashContainer):\n\"EditorStack wb \u003d ((EditorPane) ref.getPane()).getWorkbook();\nEditorSashContainer ea \u003d wb.getEditorArea();\nref.getPane().createControl(ea.getParent());\"\n\nThe above alternative did not work since the composite itself \n(\"ea.getParent()\") is null when the pane\u0027s control is null. I am not sure how to\notbain a composite (that\u0027s not null) using ?EditorSashContainer? to pass to the\n\"createControl\" method.",
    "stefan, any suggestions for ines\u0027 last comment?",
    "Created an attachment (id\u003d11536)\nPatch for Ctrl+Tab NPE\n\nWith Stefan, added the following:\n- \"createControl()\" call to the \"EditorAreaHelper\" constructor.\n- \"createControl()\" call to \"EditorManager#busyRestoreEditor()\".\n- A check to ensure that the child controls are only created once in\n\"PartPane#createChildControl()\".\n- Null checks for \"root\" in \"PartSashContainer\".\n",
    "need to verify that we are not defeating the editor reference support to avoid \ninitializing unseen editors.\n\nInes can you help write a test for this?",
    "committed fix to HEAD, Ines will try to find a way to verify that \nEditorReferences are still working",
    "marking as fixed",
    "I have created Bug 66065 to track the verification of this bug.",
    "I am not sure if this bug should be re-opened or not, but I found a regression\n(comparing to M9).\n\nI wrote some tests to validate this patch (Bug 66065). One of the tests does the\nfollowing (I ran it on build id 200406090800):\n- Create 10 text files (file1.txt to file10.txt)\n- Open file1.txt through file10.txt\n- Restart the workbench\n- The test ensures that only the visible file\u0027s part should have been created. \n\nIn this case file1.txt through file file9.txt\u0027s parts should be null, and\nfile10.txt\u0027s part should be created (since it was the last active file before\nrestart). \n\nHowever, the ?asserts? show otherwise. The results show that file1.txt and\nfile10.txt\u0027s parts are created, while the rest are null. My first guess was that\nthe editors ordering on restart (there is an existing bug about this) might have\nan effect on this.\n\n\nTo verify the latter theory, I ran the tests on M9 (where the editors ordering\nworks fine) and they passed (the only failing test was ?Ctrl+Tab?, which is\nnormal). I then applied this patch to M9, which caused the tests to fail (same\nresults as for build id 200406090800).\n\nBy debugging through the code, it looks like the problem might be in\n\"EditorAreaHelper#EditorAreaHelper(WorkbenchPage page)\". To fix this bug, a\n\"this.editorArea.createControl(page.getClientComposite())\" was added to the\nconstructor. The addition of that method call is causing some disturbance in the\nlazy creation of editors on start up. I have not yet figured out what exactly is\ncausing this behavior. I know the source of the problem, but not the reasoning\nbehind it.",
    "Verified with build id I20040609800 and I200406101200 on Windows XP.",
    "Adding Kim so that she can mark this bug as verified.",
    "Marking as verified on your behalf."
  ],
  "commentCreationDates": [
    "2004-05-26T09:18:15+02:00",
    "2004-05-26T09:22:13+02:00",
    "2004-05-27T17:35:23+02:00",
    "2004-05-27T18:06:23+02:00",
    "2004-05-27T19:25:31+02:00",
    "2004-05-27T20:26:12+02:00",
    "2004-05-27T23:24:24+02:00",
    "2004-06-02T18:31:30+02:00",
    "2004-06-03T16:43:57+02:00",
    "2004-06-07T18:59:02+02:00",
    "2004-06-07T22:28:43+02:00",
    "2004-06-07T22:51:12+02:00",
    "2004-06-08T02:47:26+02:00",
    "2004-06-10T16:49:30+02:00",
    "2004-06-10T20:40:43+02:00",
    "2004-06-10T22:39:25+02:00",
    "2004-06-10T22:42:31+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.PerspectiveHelper.partChangeAffectsZoom",
          "source": "PerspectiveHelper.java:1002"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.partChangeAffectsZoom",
          "source": "WorkbenchPage.java:2232"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:446"
        },
        {
          "method": "org.eclipse.ui.internal.CyclePartAction.activate",
          "source": "CyclePartAction.java:99"
        },
        {
          "method": "org.eclipse.ui.internal.CyclePartAction.runWithEvent",
          "source": "CyclePartAction.java:487"
        },
        {
          "method": "org.eclipse.ui.commands.ActionHandler.execute",
          "source": "ActionHandler.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.commands.Command.execute",
          "source": "Command.java:132"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "64043",
      "date": "2004-05-26T09:18:15+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.PerspectiveHelper.partChangeAffectsZoom",
          "source": "PerspectiveHelper.java:1002"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.partChangeAffectsZoom",
          "source": "WorkbenchPage.java:2232"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:446"
        },
        {
          "method": "org.eclipse.ui.internal.CyclePartAction.activate",
          "source": "CyclePartAction.java:99"
        },
        {
          "method": "org.eclipse.ui.internal.CyclePartAction.runWithEvent",
          "source": "CyclePartAction.java:487"
        },
        {
          "method": "org.eclipse.ui.commands.ActionHandler.execute",
          "source": "ActionHandler.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.commands.Command.execute",
          "source": "Command.java:132"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:469"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:887"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:928"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:546"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2",
          "source": "WorkbenchKeyboard.java:494"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent",
          "source": "WorkbenchKeyboard.java:259"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:712"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:795"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:820"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:805"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.traverse",
          "source": "Control.java:2704"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.translateTraversal",
          "source": "Control.java:2685"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.translateTraversal",
          "source": "Composite.java:553"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.translateTraversal",
          "source": "Display.java:3153"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterMessage",
          "source": "Display.java:726"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2378"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1363"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:253"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:97"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:307"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:256"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:127"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:638"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:622"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "64043",
      "date": "2004-05-27T18:06:23+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "64043",
  "bugId": "64043",
  "date": "2004-05-26T09:18:15+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}