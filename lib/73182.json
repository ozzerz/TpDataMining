{
  "comments": [
    "3.0.1 RC1\n\nSteps to reproduce:\n\n* Open File -\u003e Import -\u003e External Plugins and Fragments. \n* Hit Next and click on \"Source Code Locations\". \n* Click \"Add\", observe a file dialog shows up, click \"Cancel\"\n* Click \"Cancel\" to return to the wizard\n* Click \"Source Code Locations\" again\n* Click \"Add\", observe that the dialog doesn\u0027t show up anymore\n* Check the log:\n\n!SESSION Sep 02, 2004 15:39:22.625 ---------------------------------------------\neclipse.buildId\u003dM200409010800\njava.version\u003d1.4.2_04\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\n\n!ENTRY org.eclipse.ui 4 4 Sep 02, 2004 15:39:22.625\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 Sep 02, 2004 15:39:22.640\n!MESSAGE Widget is disposed\n!STACK 0\norg.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2691)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.SWT.error(SWT.java:2587)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:381)\n\tat org.eclipse.swt.widgets.Widget.getDisplay(Widget.java:469)\n\tat org.eclipse.swt.widgets.DirectoryDialog.open(DirectoryDialog.java:182)\n\tat\norg.eclipse.pde.internal.ui.preferences.SourcePreferencePage.handleAdd(SourcePreferencePage.java:247)\n\tat\norg.eclipse.pde.internal.ui.preferences.SourcePreferencePage.access$3(SourcePreferencePage.java:246)\n\tat\norg.eclipse.pde.internal.ui.preferences.SourcePreferencePage$LocationPart.buttonSelected(SourcePreferencePage.java:84)\n\tat\norg.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.buttonSelected(SharedPartWithButtons.java:34)\n\tat\norg.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.widgetSelected(SharedPartWithButtons.java:27)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat\norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage$7.run(PluginImportWizardFirstPage.java:312)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat\norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.showPreferencePage(PluginImportWizardFirstPage.java:308)\n\tat\norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.handleSourceLocations(PluginImportWizardFirstPage.java:294)\n\tat\norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.access$9(PluginImportWizardFirstPage.java:292)\n\tat\norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage$5.widgetSelected(PluginImportWizardFirstPage.java:248)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat org.eclipse.ui.actions.ImportResourcesAction.run(ImportResourcesAction.java:145)\n\tat\norg.eclipse.ui.actions.BaseSelectionListenerAction.runWithEvent(BaseSelectionListenerAction.java:166)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:915)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:866)\n\tat\norg.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContributionItem.java:785)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)",
    "This one worked in 3.0, but not in 3.0.1 RC1.\nThe PDE code did not change.  \nMoving to SWT for comment.",
    "The error is occuring because the shell that was the parent of the \nDirectoryDialog has been disposed.  The dialog field is storing a reference to \nthe DirectoryDialog but this reference is not being cleared when the parent \nshell is disposed.  The parent shell is diposed when the PreferenceDialog is \nclosed:\n\n\n\tat org.eclipse.swt.widgets.Shell.dispose(Shell.java:488)\n\tat org.eclipse.jface.window.Window.close(Window.java:253)\n\tat org.eclipse.jface.dialogs.Dialog.close(Dialog.java:826)\n\tat org.eclipse.jface.preference.PreferenceDialog.close\n(PreferenceDialog.java:253)\n\tat org.eclipse.jface.preference.PreferenceDialog.cancelPressed\n(PreferenceDialog.java:233)\n\tat org.eclipse.jface.preference.PreferenceDialog.buttonPressed\n(PreferenceDialog.java:203)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:506)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2783)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2442)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat \norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage$7.run\n(PluginImportWizardFirstPage.java:312)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:69)\n\tat \norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.showPre\nferencePage(PluginImportWizardFirstPage.java:308)\n\tat \norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.handleS\nourceLocations(PluginImportWizardFirstPage.java:294)\n\tat \norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.access$\n9(PluginImportWizardFirstPage.java:292)\n\tat \norg.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage$5.widge\ntSelected(PluginImportWizardFirstPage.java:248)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2783)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2442)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat org.eclipse.ui.actions.ImportResourcesAction.run\n(ImportResourcesAction.java:145)\n\tat org.eclipse.ui.actions.BaseSelectionListenerAction.runWithEvent\n(BaseSelectionListenerAction.java:166)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:915)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:866)\n\tat org.eclipse.jface.action.ActionContributionItem$7.handleEvent\n(ActionContributionItem.java:785)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2783)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2442)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:96)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\nYou could do something like the following in SourcePreferencePage:\n\nprivate DirectoryDialog getDirectoryDialog(String filterPath) {\n\tif (dialog \u003d\u003d null) {\n\t\tShell shell \u003d getShell();\n\t\tshell.addDisposeListener(new \norg.eclipse.swt.events.DisposeListener() {\n\t\t\tpublic void widgetDisposed\n(org.eclipse.swt.events.DisposeEvent e) {\n\t\t\t\tdialog \u003d null;\n\t\t\t}\n\t\t});\n\t\tdialog \u003d new DirectoryDialog(shell);\n\t}\n\t\t\n\tif (dialog.getParent().isDisposed()) System.out.println(\"Shell is \ndisposed\");\n\tdialog.setMessage(PDEPlugin.getResourceString\n(\"SourcePreferencePage.dialogMessage\")); //$NON-NLS-1$\n\tif (filterPath !\u003d null)\n\t\tdialog.setFilterPath(filterPath);\n\treturn dialog;\n}",
    "Thanks Veronika.\n\nFixed.\nIncidentally, I was not able to reproduce it on 3.0.1 RC2 anymore.",
    "*** Bug 79750 has been marked as a duplicate of this bug. ***",
    "*** Bug 79978 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2004-09-02T22:05:03+02:00",
    "2004-09-03T04:55:06+02:00",
    "2004-09-07T16:54:38+02:00",
    "2004-09-14T06:33:39+02:00",
    "2004-11-30T08:22:39+01:00",
    "2004-12-02T10:18:38+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2691"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2587"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:381"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.getDisplay",
          "source": "Widget.java:469"
        },
        {
          "method": "org.eclipse.swt.widgets.DirectoryDialog.open",
          "source": "DirectoryDialog.java:182"
        },
        {
          "method": "org.eclipse.pde.internal.ui.preferences.SourcePreferencePage.handleAdd",
          "source": "SourcePreferencePage.java:247"
        },
        {
          "method": "org.eclipse.pde.internal.ui.preferences.SourcePreferencePage.access$3",
          "source": "SourcePreferencePage.java:246"
        },
        {
          "method": "org.eclipse.pde.internal.ui.preferences.SourcePreferencePage$LocationPart.buttonSelected",
          "source": "SourcePreferencePage.java:84"
        },
        {
          "method": "org.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.buttonSelected",
          "source": "SharedPartWithButtons.java:34"
        },
        {
          "method": "org.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.widgetSelected",
          "source": "SharedPartWithButtons.java:27"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2772"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2431"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage$7.run",
          "source": "PluginImportWizardFirstPage.java:312"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.showPreferencePage",
          "source": "PluginImportWizardFirstPage.java:308"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.handleSourceLocations",
          "source": "PluginImportWizardFirstPage.java:294"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage.access$9",
          "source": "PluginImportWizardFirstPage.java:292"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardFirstPage$5.widgetSelected",
          "source": "PluginImportWizardFirstPage.java:248"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2772"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2431"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.ui.actions.ImportResourcesAction.run",
          "source": "ImportResourcesAction.java:145"
        },
        {
          "method": "org.eclipse.ui.actions.BaseSelectionListenerAction.runWithEvent",
          "source": "BaseSelectionListenerAction.java:166"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:915"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:866"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionContributionItem.java:785"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2772"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2431"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "73182",
      "date": "2004-09-02T22:05:03+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "73182",
  "bugId": "73182",
  "date": "2004-09-02T22:05:03+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "major"
}