{
  "comments": [
    "When loading a EXTLibrary file with a value set for an EReference that is a member of a FeatureMap group it will fail is the ExtendedMetaData object provided returns false for isFeatureKindSpecific().\n\nI am using EMF version 2.2.\n\nI use XMIResourceImpl to load the attached file and I provide the following options:\n\nMap options \u003d new HashMap();\noptions.put(XMIResource.OPTION_EXTENDED_META_DATA, new BasicExtendedMetaData() {\n\tprotected boolean isFeatureKindSpecific() {\n\t\treturn false;\n\t}\n});\nresource.load(options);\n\nI get an exception trying to load the resource:\njava.lang.RuntimeException: Invalid entry feature \u0027Library.writers\u0027\nat org.eclipse.emf.ecore.util.BasicFeatureMap.validate(BasicFeatureMap.java:72)\nat org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:618)\nat org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:298)\nat org.eclipse.emf.ecore.util.BasicFeatureMap.addUnique(BasicFeatureMap.java:1409)\nat org.eclipse.emf.ecore.util.FeatureMapUtil$FeatureEList.addUnique(FeatureMapUtil.java:617)\nat org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.setValue(XMLHelperImpl.java:1019)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue(XMLHandler.java:2281)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue(XMLHandler.java:2271)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectFromFeatureType(XMLHandler.java:1808)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObject(XMLHandler.java:1676)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.handleFeature(XMLHandler.java:1463)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement(XMLHandler.java:793)\nat org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement(XMIHandler.java:80)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:771)\nat org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement(XMLHandler.java:558)\nat org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)\nat org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)\nat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)\nat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\nat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\nat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\nat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\nat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\nat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\nat javax.xml.parsers.SAXParser.parse(Unknown Source)\nat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:162)\nat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:172)\nat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1015)\nat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:869)\nat org.eclipse.emf.examples.extlibrary.presentation.EXTLibraryEditor.createModel(EXTLibraryEditor.java:751)\nat org.eclipse.emf.examples.extlibrary.presentation.EXTLibraryEditor.createPages(EXTLibraryEditor.java:767)\nat org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:243)\nat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:598)\nat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:374)\nat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:552)\nat org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:285)\nat org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:140)\nat org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:264)\nat org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)\nat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:394)\nat org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1140)\nat org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1093)\nat org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1312)\nat org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1278)\nat org.eclipse.ui.internal.PartStack.add(PartStack.java:453)\nat org.eclipse.ui.internal.EditorStack.add(EditorStack.java:101)\nat org.eclipse.ui.internal.PartStack.add(PartStack.java:440)\nat org.eclipse.ui.internal.EditorStack.add(EditorStack.java:110)\nat org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:60)\nat org.eclipse.ui.internal.EditorAreaHelper.addToLayout(EditorAreaHelper.java:214)\nat org.eclipse.ui.internal.EditorAreaHelper.addEditor(EditorAreaHelper.java:204)\nat org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:764)\nat org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:671)\nat org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:634)\nat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2381)\nat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2316)\nat org.eclipse.ui.internal.WorkbenchPage.access$10(WorkbenchPage.java:2308)\nat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2294)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2289)\nat org.eclipse.ui.internal.ide.model.FileOpenWithEntry.openEditor(FileOpenWithEntry.java:27)\nat org.eclipse.ui.actions.OpenWithMenu.openEditor(OpenWithMenu.java:268)\nat org.eclipse.ui.actions.OpenWithMenu.access$0(OpenWithMenu.java:265)\nat org.eclipse.ui.actions.OpenWithMenu$2.handleEvent(OpenWithMenu.java:167)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:914)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3285)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2905)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1762)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1726)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:397)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:379)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\nat java.lang.reflect.Method.invoke(Method.java:391)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)\n\nHere is a snippet from BasicExtendedMetaData that appears to be the cause of the problem:\n\n      for (int i \u003d 0, size \u003d eClass.getFeatureCount(); i \u003c size; ++i)\n      {\n        EStructuralFeature eStructuralFeature \u003d eClass.getEStructuralFeature(i);\n        switch (getFeatureKind(eStructuralFeature))\n        {\n          case UNSPECIFIED_FEATURE:\n          case ELEMENT_FEATURE:\n          // case GROUP_FEATURE:  /* This might fix the problem */\n          {\n            if (name.equals(getName(eStructuralFeature)) \u0026\u0026\n                  (namespace \u003d\u003d null ? getNamespace(eStructuralFeature) \u003d\u003d null : namespace.equals(getNamespace(eStructuralFeature))))\n            {\n              return eStructuralFeature;\n            }\n            break;\n          }\n        }\n      }\n\nThis block of code only gets executed if isFeatureKindSpecific is false. Otherwise, another block of code is executed that does not discern the structural feature\u0027s kind. The Library.writers feature is a \u0027GROUP_FEATURE\u0027 kind.",
    "Created an attachment (id\u003d33489)\nAn artifact that causes the problem\n\n",
    "Created an attachment (id\u003d33509)\nAttempt to reproduce the problem\n\nHere\u0027s my failed attempt to reproduce the problem.",
    "Chris,\n\nProbably the feature should be marked as being of kind \"element\", but since I can\u0027t reproduce the problem, I can\u0027t be sure that\u0027s a fix.  Please look at the example I\u0027ve attached and modify it so that it reproduces the problem you are seeing.",
    "I was accidentally using a pre-EMF 2.2 version of the EXTLibrary plugins. It looks like they needed to be regenerated with the EMF 2.2 generator.\n\nThe problem has completely disappeared.",
    "Cool.  I\u0027ll return it as WORKSFORME then."
  ],
  "commentCreationDates": [
    "2006-01-23T21:53:56+01:00",
    "2006-01-23T21:55:12+01:00",
    "2006-01-24T13:29:38+01:00",
    "2006-01-24T13:31:45+01:00",
    "2006-01-24T14:52:21+01:00",
    "2006-01-24T15:03:05+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Invalid entry feature \u0027Library.writers\u0027",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.util.BasicFeatureMap.validate",
          "source": "BasicFeatureMap.java:72"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList.addUnique",
          "source": "BasicEList.java:618"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique",
          "source": "NotifyingListImpl.java:298"
        },
        {
          "method": "org.eclipse.emf.ecore.util.BasicFeatureMap.addUnique",
          "source": "BasicFeatureMap.java:1409"
        },
        {
          "method": "org.eclipse.emf.ecore.util.FeatureMapUtil$FeatureEList.addUnique",
          "source": "FeatureMapUtil.java:617"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.setValue",
          "source": "XMLHelperImpl.java:1019"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue",
          "source": "XMLHandler.java:2281"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue",
          "source": "XMLHandler.java:2271"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObjectFromFeatureType",
          "source": "XMLHandler.java:1808"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.createObject",
          "source": "XMLHandler.java:1676"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.handleFeature",
          "source": "XMLHandler.java:1463"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.processElement",
          "source": "XMLHandler.java:793"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMIHandler.processElement",
          "source": "XMIHandler.java:80"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement",
          "source": "XMLHandler.java:771"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.startElement",
          "source": "XMLHandler.java:558"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.startElement",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "javax.xml.parsers.SAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load",
          "source": "XMLLoadImpl.java:162"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad",
          "source": "XMLResourceImpl.java:172"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1015"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:869"
        },
        {
          "method": "org.eclipse.emf.examples.extlibrary.presentation.EXTLibraryEditor.createModel",
          "source": "EXTLibraryEditor.java:751"
        },
        {
          "method": "org.eclipse.emf.examples.extlibrary.presentation.EXTLibraryEditor.createPages",
          "source": "EXTLibraryEditor.java:767"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.createPartControl",
          "source": "MultiPageEditorPart.java:243"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:598"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:374"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:552"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.setVisible",
          "source": "PartPane.java:285"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PresentablePart.setVisible",
          "source": "PresentablePart.java:140"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select",
          "source": "PresentablePartFolder.java:264"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select",
          "source": "LeftToRightTabOrder.java:65"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart",
          "source": "TabbedStackPresentation.java:394"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.refreshPresentationSelection",
          "source": "PartStack.java:1140"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.setSelection",
          "source": "PartStack.java:1093"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.showPart",
          "source": "PartStack.java:1312"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.showPart",
          "source": "PartStack.java:1278"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.add",
          "source": "PartStack.java:453"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.add",
          "source": "EditorStack.java:101"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.add",
          "source": "PartStack.java:440"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.add",
          "source": "EditorStack.java:110"
        },
        {
          "method": "org.eclipse.ui.internal.EditorSashContainer.addEditor",
          "source": "EditorSashContainer.java:60"
        },
        {
          "method": "org.eclipse.ui.internal.EditorAreaHelper.addToLayout",
          "source": "EditorAreaHelper.java:214"
        },
        {
          "method": "org.eclipse.ui.internal.EditorAreaHelper.addEditor",
          "source": "EditorAreaHelper.java:204"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.createEditorTab",
          "source": "EditorManager.java:764"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor",
          "source": "EditorManager.java:671"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditor",
          "source": "EditorManager.java:634"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2381"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2316"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$10",
          "source": "WorkbenchPage.java:2308"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:2294"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2289"
        },
        {
          "method": "org.eclipse.ui.internal.ide.model.FileOpenWithEntry.openEditor",
          "source": "FileOpenWithEntry.java:27"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.openEditor",
          "source": "OpenWithMenu.java:268"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.access$0",
          "source": "OpenWithMenu.java:265"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu$2.handleEvent",
          "source": "OpenWithMenu.java:167"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:914"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3285"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2905"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1762"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1726"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:397"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:109"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:379"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "124945",
      "date": "2006-01-23T21:53:56+01:00",
      "product": "EMF",
      "component": "XML/XMI",
      "severity": "normal"
    }
  ],
  "groupId": "124945",
  "bugId": "124945",
  "date": "2006-01-23T21:53:56+01:00",
  "product": "EMF",
  "component": "XML/XMI",
  "severity": "normal"
}