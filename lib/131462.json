{
  "comments": [
    "Upgrading per instructions did not result in a restart with -clean parameter.  Manually restarting with -clean cleared the problem described below.  On upgrades, the -clean option should be automatically selected since many users, myself included, may not know it exists.  Thanks to the mailing lists, I found the workaround, but the basic bug should be fixed.\n\nI have an existing 3.1.0 Eclipse setup that\nI tried to upgrade to 3.1.2 using the upgrade tool and following the\ninstructions given here:\nhttp://www.eclipse.org/eclipse/platform-releng/updatesfor3.1.1.html\n\nAll seemed to go well until the installer asked for permission to restart\nEclipse.  Upon restart, I get the splash screen, and then an error window\ndirecting me to the .log file.\n\nI believe this is the pertinent part of that log:\n\n!SESSION 2006-03-11\n21:07:48.315 -----------------------------------------------\neclipse.buildId\u003dI20050610-1757\njava.version\u003d1.5.0_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86\n\n!ENTRY org.eclipse.osgi 2006-03-11 21:07:50.190\n!MESSAGE Application error\n!STACK 1\njava.lang.IncompatibleClassChangeError\n at\norg.eclipse.ui.internal.ide.ChooseWorkspaceData.readPersistedData(ChooseWorkspaceData.java:366)\n at\norg.eclipse.ui.internal.ide.ChooseWorkspaceData.\u003cinit\u003e(ChooseWorkspaceData.java:108)\n at\norg.eclipse.ui.internal.ide.IDEApplication.checkInstanceLocation(IDEApplication.java:220)\n at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)\n at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n at org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n at org.eclipse.core.launcher.Main.run(Main.java:973)\n at org.eclipse.core.launcher.Main.main(Main.java:948)",
    "I cannot reproduce.  Can you please attach the full log.  Also, if you can reproduce again please start with \"-console -noExit\".  At the osgi prompt run the \"ss\" command to list the installed bundles, please post the results here.  Thanks.",
    "Regretably, the log has been overwritten.  Restarting with -clean cleared the problem, and I no longer have a base 3.1.0 to start from.  Therefore I can not recreate the problem.  If I was the only one reporting, it may in fact just have been an oddity with my particular set of plugins, etc.\n\nSorry I can not be of further assistance here.  Thanks for checking.",
    "I can reproduce this consistently using a \"shared install\" on linux.  I mean shared install as described in: \n\nhttp://help.eclipse.org/help31/index.jsp?topic\u003d/org.eclipse.platform.doc.isv/reference/misc/multi_user_installs.html\n\nHere\u0027s a transcript to reproduce.  The lines starting with ## are comments from me.\n\n[jlott@host244 download]$ rm -rf ~/.eclipse\n## The .eclipse directory seems to cause the problem.\n## Delete before running this scenario.\n[jlott@host244 download]$ su\nPassword: \n[root@host244 download]# exit                 \nexit\n[root@host244 download]# tar xzf eclipse-SDK-3.1-linux-gtk.tar.gz -C /opt\n## Installed as root, configuration directory is read-only to non-root users.\n## This is a \"shared install\" as described above.\n[jlott@host244 download]$ PATH\u003d/opt/jdk1.5.0_05/bin:$PATH /opt/eclipse/eclipse \n## Start eclipse once as normal user so eclipse \n## creates the ~/.eclipse directory.\n[jlott@host244 download]$ ls ~/.eclipse\norg.eclipse.platform_3.1.0\n[jlott@host244 download]$ su\nPassword: \n[root@host244 download]# PATH\u003d/opt/jdk1.5.0_05/bin:$PATH /opt/eclipse/eclipse\n## As root:  update eclipse to 3.1.2 following these instructions:\n##   http://www.eclipse.org/eclipse/platform-releng/updatesfor3.1.1.html\n[root@host244 download]# exit\nexit\n[jlott@host244 download]$ PATH\u003d/opt/jdk1.5.0_05/bin:$PATH /opt/eclipse/eclipse\n\nWhen you start it that final time (as non-root user), before the workspace chooser even comes up, you\u0027ll get a message about an error, see log.  Within the log (~/workspace/.metdata/.log) I see IncompatableClassChangeError among a bunch of other errors.  I\u0027ll attach the log.\n\nThis will be pretty embarrasing to us if we ship updates to our Eclipse 3.1.0 based commericial product.  Any suggestions on workarounds?",
    "Created an attachment (id\u003d46643)\nLog containing IncompatableClassChangeError\n\n"
  ],
  "commentCreationDates": [
    "2006-03-12T16:25:21+01:00",
    "2006-04-09T17:21:34+02:00",
    "2006-04-09T18:38:51+02:00",
    "2006-07-21T17:20:57+02:00",
    "2006-07-21T17:23:10+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IncompatibleClassChangeError",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.ide.ChooseWorkspaceData.readPersistedData",
          "source": "ChooseWorkspaceData.java:366"
        },
        {
          "method": "org.eclipse.ui.internal.ide.ChooseWorkspaceData.\u003cinit\u003e",
          "source": "ChooseWorkspaceData.java:108"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.checkInstanceLocation",
          "source": "IDEApplication.java:220"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:90"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "131462",
      "date": "2006-03-12T16:25:21+01:00",
      "product": "Equinox",
      "component": "Bundles",
      "severity": "normal"
    }
  ],
  "groupId": "131462",
  "bugId": "131462",
  "date": "2006-03-12T16:25:21+01:00",
  "product": "Equinox",
  "component": "Bundles",
  "severity": "normal"
}