{
  "comments": [
    "Build: I20070529-0010\n\nIf the debug UI plugin is stopped from outside the UI thread, it throws the exception below.  This is a rare case, but it can happen for example if someone dynamically installs a bundle that causes the debug UI bundle to become invalid. I don\u0027t think it\u0027s safe to assume what thread BundleActivator.stop occurs in.\n\nCaused by: org.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:3547)\n\tat org.eclipse.swt.SWT.error(SWT.java(Inlined Compiled Code))\n\tat org.eclipse.swt.SWT.error(SWT.java(Inlined Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java(Inlined Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Control.removeMouseTrackListener(Control.java:2198)\n\tat org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.shutdown(LaunchingResourceManager.java:379)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.stop(DebugUIPlugin.java:413)",
    "John, are there steps we can use to reproduce this?",
    "Here is a simple way to reproduce:\n\n1) Start up with a new workspace, using -console command line argument\n2) Open debug perspective, then close it (to ensure debug.ui is loaded)\n3) On the console, type \"ss\"\n4) Find the bundle number for org.eclipse.debug.ui\n5) Type \"stop \u003cnumber\u003e\", where \u003cnumber\u003e is the bundle number from 4)\n\nThis is kind of an artifical way to reproduce it, but you\u0027ll get the walkback. I\u0027m not sure if this bug is important, because I don\u0027t know of any simple, \"natural\" way to reproduce it.  In my case it was a side-effect of some other bug that caused debug UI plugin to be stopped.",
    "The same exception occurs on startup if the CDT is installed (it has\nan early startup that causes loading of debug.ui).\n\nI think the severity of this deserves to be increased as it happens consistently and it breaks features of the CDT (e.g. include path expansions involving eclipse variables like \u0027workspace_loc\u0027).\n\nThread [Worker-5] (Suspended (breakpoint at line 87 in SWTException))\n  SWTException.\u003cinit\u003e(int, String) line: 87\n  SWT.error(int, Throwable, String) line: 3547\n  SWT.error(int, Throwable) line: 3465\n  SWT.error(int) line: 3436\n  Display.error(int) line: 1137\n  Display.checkDevice() line: 666\n  Display.getSystemColor(int) line: 2129\n  DebugUIPreferenceInitializer.initializeDefaultPreferences() line: 79\n  PreferenceServiceRegistryHelper.runInitializer(IConfigurationElement) line: 276\n  PreferenceServiceRegistryHelper.applyRuntimeDefaults(String, WeakReference) line: 130\n  PreferencesService.applyRuntimeDefaults(String, WeakReference) line: 337\n  DefaultPreferences.applyRuntimeDefaults() line: 163\n  DefaultPreferences.loadDefaults() line: 236\n  DefaultPreferences.load() line: 232\n  DefaultPreferences(EclipsePreferences).create(EclipsePreferences, String, Object) line: 307\n  DefaultPreferences(EclipsePreferences).internalNode(String, boolean, Object) line: 543\n  DefaultPreferences(EclipsePreferences).node(String) line: 662\n  DefaultScope(AbstractScope).getNode(String) line: 38\n  DefaultScope.getNode(String) line: 67\n  ScopedPreferenceStore.getDefaultPreferences() line: 247\n  ScopedPreferenceStore.getPreferenceNodes(boolean) line: 281\n  ScopedPreferenceStore.internalGet(String) line: 471\n  ScopedPreferenceStore.getString(String) line: 531\n  PerspectiveManager.initPerspectives() line: 947\n  PerspectiveManager.startup() line: 252\n  DebugUIPlugin.start(BundleContext) line: 499\n  ...\n",
    "Keith - can you add steps to reproduce?",
    "Created an attachment (id\u003d71665)\nSample workspace\n\nZip file containing sample workspace configured as described.",
    "The sample workspace should trigger it for you.\n\nThe java perspective is customized so that there are no UI elements drawn from the debug.ui plugin (the toolbar is nearly empty). In this situation org.eclipse.cdt.debug.internal.ui.Startup can be the trigger that loads DebugUIPlugin in a worker thread as the workspace is launched.\n\nIn other scenarios there is a race between the main thread an the early startup worker threads to start plugins.",
    "Keith - I think you should open a new bug. This bug\u0027s original problem deals with plug-in shutdown while your problem deals with plug-in startup.",
    "I created bug 193317 to track the more serious startup issue."
  ],
  "commentCreationDates": [
    "2007-05-29T22:59:36+02:00",
    "2007-05-30T16:22:57+02:00",
    "2007-05-30T18:18:25+02:00",
    "2007-06-18T20:52:36+02:00",
    "2007-06-18T21:41:55+02:00",
    "2007-06-18T22:53:38+02:00",
    "2007-06-18T22:55:42+02:00",
    "2007-06-19T15:54:41+02:00",
    "2007-06-19T16:26:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3547"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.removeMouseTrackListener",
          "source": "Control.java:2198"
        },
        {
          "method": "org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.shutdown",
          "source": "LaunchingResourceManager.java:379"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.stop",
          "source": "DebugUIPlugin.java:413"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "189786",
      "date": "2007-05-29T22:59:36+02:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "189786",
  "bugId": "189786",
  "date": "2007-05-29T22:59:36+02:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "normal"
}