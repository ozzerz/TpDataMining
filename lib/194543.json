{
  "comments": [
    "Using the 4.4 driver, profile a simple java application using java 5\nAfter the process is terminated try to run Unload profiling data; this result in an NPE error message\n\nThis problem has been reported by a user; I\u0027ll try to attach the .log file once I get it\n\nPlease investigate this for 4.4.0.1",
    "I am getting this exception:  \njava.lang.NullPointerException\n\tat org.eclipse.hyades.trace.ui.internal.util.PerftraceUtil.hasExecutionInfo(PerftraceUtil.java:1356)\n\tat org.eclipse.hyades.trace.views.adapter.internal.ExecutionStatisticPage2.isEmpty(ExecutionStatisticPage2.java:145)\n\tat org.eclipse.hyades.trace.ui.TraceViewer.addViewPage(TraceViewer.java:218)\n\tat org.eclipse.hyades.trace.ui.TraceViewer.addViewPage(TraceViewer.java:230)\n\tat org.eclipse.hyades.trace.ui.TraceViewer.selectionChanged(TraceViewer.java:519)\n\tat org.eclipse.tptp.platform.common.ui.trace.internal.helpers.TraceUIManager.selectionChanged(TraceUIManager.java:348)\n\nand an Eclipse error dialog. I assume this is the error in question.",
    "There was no error message in the log so I am not sure\n\nI\u0027ll attach a screen cap of the UI as I received from the user",
    "Created an attachment (id\u003d72703)\nerror image\n\n",
    "So what I did, I opened the agent with the Execution stats view then I unloaded the agent and then I again clicked on it in the Profiling monitors view, while the Execution stats view was open and the Link with viewer was on. The exception below is logged and an error dialog is displayed.",
    "I have no way to check that but looking at your steps this should be the same problem as reported here",
    "I cannot reproduce the error dialog that you have attached.\nIf no view is opened the unload operation doesn\u0027t cause any errors, but the problem is it doesn\u0027t seem to unload the resource from memory, probably some action, possibly a cached selection is keeping the resource in memory. Memory is not decreasing as a result of the unload.",
    "If unloading the agent and then opening the agent in the execution view no error occurrs.",
    "The leak issue will be addressed under https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d194544",
    "Created an attachment (id\u003d72741)\nPatch for 194543\n\nThis patch is avoiding the null pointer exception is the views as well as in the the save action but doesn\u0027t solve the root cause of the problem, i.e. the fact  that the unload fails to remove the agents from memory, the agents are still in memory as proxy objects with no associated resource.",
    "Marius, can you review this fix please\nI think Eugene is on vacation until Wednesday",
    "Created an attachment (id\u003d72756)\npatch\n\nThanks Alex for your help and the patch. I review your patch and it looks safe to me. There is however a use case that still breaks. When users profile with Execution Analysis till it exits, save the resource, and then unload. View shows default page(gray page) but double clicking or right click\u003eopen view does not open the execution view anymore. Users will have to close the execution statistic view and reopen again.\n\nI am attaching a patch here with the addition to fix the mentioned problem. Marius and Alex, please review. Thanks!",
    "Strange, I cannot seem to get an exception in this case, and I\u0027m pretty sure I have tested this scenario. Can you tell me where the code is throwing the exception?",
    "I don\u0027t have more data than what I\u0027ve already attached to the defect",
    "Created an attachment (id\u003d72803)\nLatest patch for 194543.\n\nHere is a patch which solves some more problems that I found during testing.\nThe fix for the bug 194544 hopefully will resolve the root cause of these UI issues. ",
    "I may be wrong, but I believe this is supposed ot be targeted and done in 4.4.0.1",
    "I reviewed and tested the patch from Alex.",
    "Partial fix in CVS.\n\nEugene please apply the remaining two files:\n/org.eclipse.hyades.trace.views/src/org/eclipse/hyades/trace/views/adapter/internal/ExecutionStatisticPage2.java\n/org.eclipse.hyades.trace.views/src/org/eclipse/hyades/trace/views/adapter/internal/PatternPage.java",
    "(In reply to comment #17)\n\u003e Partial fix in CVS.\n\u003e \n\u003e Eugene please apply the remaining two files:\n\u003e /org.eclipse.hyades.trace.views/src/org/eclipse/hyades/trace/views/adapter/internal/ExecutionStatisticPage2.java\n\u003e /org.eclipse.hyades.trace.views/src/org/eclipse/hyades/trace/views/adapter/internal/PatternPage.java\n\u003e \n\npatch are submitted.\n"
  ],
  "commentCreationDates": [
    "2007-06-27T05:30:18+02:00",
    "2007-06-28T18:06:00+02:00",
    "2007-06-28T18:10:53+02:00",
    "2007-06-28T18:12:39+02:00",
    "2007-06-28T18:23:49+02:00",
    "2007-06-28T18:32:24+02:00",
    "2007-06-28T18:35:41+02:00",
    "2007-06-28T18:43:02+02:00",
    "2007-06-28T19:38:47+02:00",
    "2007-06-28T23:43:27+02:00",
    "2007-06-29T04:55:46+02:00",
    "2007-06-29T07:27:56+02:00",
    "2007-06-29T17:01:16+02:00",
    "2007-06-29T17:54:09+02:00",
    "2007-06-29T23:59:22+02:00",
    "2007-07-01T02:57:06+02:00",
    "2007-07-04T23:09:20+02:00",
    "2007-07-05T03:37:14+02:00",
    "2007-07-05T06:20:01+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.trace.ui.internal.util.PerftraceUtil.hasExecutionInfo",
          "source": "PerftraceUtil.java:1356"
        },
        {
          "method": "org.eclipse.hyades.trace.views.adapter.internal.ExecutionStatisticPage2.isEmpty",
          "source": "ExecutionStatisticPage2.java:145"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.TraceViewer.addViewPage",
          "source": "TraceViewer.java:218"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.TraceViewer.addViewPage",
          "source": "TraceViewer.java:230"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.TraceViewer.selectionChanged",
          "source": "TraceViewer.java:519"
        },
        {
          "method": "org.eclipse.tptp.platform.common.ui.trace.internal.helpers.TraceUIManager.selectionChanged",
          "source": "TraceUIManager.java:348"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "194543",
      "date": "2007-06-28T18:06:00+02:00",
      "product": "TPTP Profiling",
      "component": "Platform.UI.ProfilingPerspective",
      "severity": "critical"
    }
  ],
  "groupId": "194543",
  "bugId": "194543",
  "date": "2007-06-27T05:30:18+02:00",
  "product": "TPTP Profiling",
  "component": "Platform.UI.ProfilingPerspective",
  "severity": "critical"
}