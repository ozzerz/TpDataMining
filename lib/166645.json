{
  "comments": [
    "I20061129-1340 + ZRH-plugins from 20061204-0928\n\n- Open an Ant file with the Ant editor, e.g. test.xml:\n\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cproject name\u003d\"testsuite\" default\u003d\"run\" basedir\u003d\".\"\u003e\n\t\u003ctarget name\u003d\"run\"\u003e\n\t\u003c/target\u003e\n\u003c/project\u003e\n\n\u003d\u003e Error dialog and exception below. I\u0027m not sure whose fault this is. AFAICS, the problem is that AntEditorActionContributor.contributeToMenu(IMenuManager) does not call super.contributeToMenu(menu) when it is first invoked. However, I didn\u0027t find a contract that would forbid reimplementing the method (and the Ant code has not been changed in 3.3.\n\nI\u0027ll try to work around it in TextEditorActionContributor for now, but Dani will have to make the final decision.\n\n\nError\nMon Dec 04 15:24:53 CET 2006\nProblems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n\njava.lang.NullPointerException\n\tat org.eclipse.ui.editors.text.TextEditorActionContributor.doSetActiveEditor(TextEditorActionContributor.java:106)\n\tat org.eclipse.ui.editors.text.TextEditorActionContributor.setActiveEditor(TextEditorActionContributor.java:131)\n\tat org.eclipse.ant.internal.ui.editor.AntEditorActionContributor.doSetActiveEditor(AntEditorActionContributor.java:69)\n\tat org.eclipse.ant.internal.ui.editor.AntEditorActionContributor.setActiveEditor(AntEditorActionContributor.java:145)\n\tat org.eclipse.ui.internal.EditorActionBars.partChanged(EditorActionBars.java:335)\n\tat org.eclipse.ui.internal.WorkbenchPage$3.run(WorkbenchPage.java:603)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:850)\n\tat org.eclipse.ui.internal.WorkbenchPage.activatePart(WorkbenchPage.java:592)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3179)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:585)\n\tat org.eclipse.ui.internal.WorkbenchPage.makeActive(WorkbenchPage.java:1147)\n\tat org.eclipse.ui.internal.WorkbenchPage.updateActivePart(WorkbenchPage.java:1127)\n\tat org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents(WorkbenchPage.java:1303)\n\tat org.eclipse.ui.internal.WorkbenchPage.deferUpdates(WorkbenchPage.java:1292)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1266)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1321)\n\tat org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:58)\n\tat org.eclipse.ui.internal.PartStack.close(PartStack.java:502)\n\tat org.eclipse.ui.internal.EditorStack.close(EditorStack.java:205)\n\tat org.eclipse.ui.internal.PartStack$1.close(PartStack.java:109)\n\tat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)\n\tat org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)\n\tat org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)\n\tat org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)\n\tat org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)\n\tat org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:580)\n\tat org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:187)\n\tat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2107)\n\tat org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:292)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:927)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3463)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3077)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1945)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1909)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:425)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:348)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:341)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:285)\n\tat org.eclipse.core.launcher.Main.run(Main.java:987)\n\tat org.eclipse.core.launcher.Main.main(Main.java:962)",
    "Created an attachment (id\u003d54978)\nFix\n\n",
    "Released the fix to HEAD. Dani, please review.",
    "The fix a workaround. More problems might/will arise in the future due to the workflow change done in AntEditorActionContributor. The menu should be built at the time when init(...) calls contributeToMenu(...), see Javadoc of init(...) for details.\n\nIf Ant wants to stay with this hack then it must at least ensure that the menu is built before super.setActiveEditor(part) gets called. This isn\u0027t currently the case.\n\nPlatform Text will leave the workaround in place since this doesn\u0027t harm on our side.",
    "Resetting target to 3.3 as this probably won\u0027t make it into M4.",
    "I can revisit as time allows but I do not believe this Ant code has changed for almost 2 yrs.",
    "Didn\u0027t say so. It was probably bad since then and not discovered up to now ;-)"
  ],
  "commentCreationDates": [
    "2006-12-04T15:56:38+01:00",
    "2006-12-04T16:22:05+01:00",
    "2006-12-04T16:38:17+01:00",
    "2006-12-11T10:18:19+01:00",
    "2006-12-11T10:19:15+01:00",
    "2006-12-11T15:13:15+01:00",
    "2006-12-11T15:15:27+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.editors.text.TextEditorActionContributor.doSetActiveEditor",
          "source": "TextEditorActionContributor.java:106"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextEditorActionContributor.setActiveEditor",
          "source": "TextEditorActionContributor.java:131"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorActionContributor.doSetActiveEditor",
          "source": "AntEditorActionContributor.java:69"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorActionContributor.setActiveEditor",
          "source": "AntEditorActionContributor.java:145"
        },
        {
          "method": "org.eclipse.ui.internal.EditorActionBars.partChanged",
          "source": "EditorActionBars.java:335"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$3.run",
          "source": "WorkbenchPage.java:603"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:850"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activatePart",
          "source": "WorkbenchPage.java:592"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:3179"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:585"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.makeActive",
          "source": "WorkbenchPage.java:1147"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.updateActivePart",
          "source": "WorkbenchPage.java:1127"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents",
          "source": "WorkbenchPage.java:1303"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.deferUpdates",
          "source": "WorkbenchPage.java:1292"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditors",
          "source": "WorkbenchPage.java:1266"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditor",
          "source": "WorkbenchPage.java:1321"
        },
        {
          "method": "org.eclipse.ui.internal.EditorPane.doHide",
          "source": "EditorPane.java:58"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.close",
          "source": "PartStack.java:502"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.close",
          "source": "EditorStack.java:205"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack$1.close",
          "source": "PartStack.java:109"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent",
          "source": "TabbedStackPresentation.java:81"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:267"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:276"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1",
          "source": "DefaultTabFolder.java:1"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed",
          "source": "DefaultTabFolder.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners",
          "source": "PaneFolder.java:580"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder$3.close",
          "source": "PaneFolder.java:187"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder.onMouse",
          "source": "CTabFolder.java:2107"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder$1.handleEvent",
          "source": "CTabFolder.java:292"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:927"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3463"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3077"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1945"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1909"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:425"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:348"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:341"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:285"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:987"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:962"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166645",
      "date": "2006-12-04T15:56:38+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "166645",
  "bugId": "166645",
  "date": "2006-12-04T15:56:38+01:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}