{
  "comments": [
    "I\u0027m running Eclipse 3.2RC3 on the Apple JVM 1.5.0_06. On typing in a JDT editor, everytime context assist comes up, an error in a dialog window is raised, saying \"An internal error occurred while \"Computing additional info\"\".\n\nThe workbench log contains this stacktrace:\n!ENTRY org.eclipse.core.jobs 4 2 2006-05-09 09:57:25.969\n!MESSAGE An internal error occurred during: \"Computing additional info\".\n!STACK 0\njava.lang.IllegalStateException: zip file closed\n        at java.util.zip.ZipFile.ensureOpen(ZipFile.java:518)\n        at java.util.zip.ZipFile.getEntry(ZipFile.java:251)\n        at java.util.jar.JarFile.getEntry(JarFile.java:200)\n        at sun.net.www.protocol.jar.URLJarFile.getEntry(URLJarFile.java:90)\n        at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:112)\n        at sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:69)\n        at org.eclipse.jdt.internal.core.JavaElement.getURLContents(JavaElement.java:792)\n        at org.eclipse.jdt.internal.core.BinaryType.getJavadocContents(BinaryType.java:1086)\n        at org.eclipse.jdt.internal.core.BinaryMethod.getAttachedJavadoc(BinaryMethod.java:531)\n        at org.eclipse.jdt.internal.ui.text.java.ProposalInfo.getHTMLContentReader(ProposalInfo.java:112)\n        at org.eclipse.jdt.internal.ui.text.java.ProposalInfo.extractJavadoc(ProposalInfo.java:99)\n        at org.eclipse.jdt.internal.ui.text.java.ProposalInfo.computeInfo(ProposalInfo.java:76)\n        at org.eclipse.jdt.internal.ui.text.java.ProposalInfo.getInfo(ProposalInfo.java:59)\n        at org.eclipse.jdt.internal.ui.text.java.AbstractJavaCompletionProposal.getAdditionalProposalInfo(AbstractJavaCompletionProposal.java:458)\n        at org.eclipse.jface.text.contentassist.AdditionalInfoController$3.run(AdditionalInfoController.java:100)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n(END) \n\nIt happens in a reproducable fashion every time I access documentation for something in the JDK class library. I\u0027ve set the JavaDoc location for that to a zipfile on my hard drive, which is existent and readable and the corresponding dialog says it\u0027s ok when I click \"Validate\". If I unzip the files from the documentation and point Eclipse to that, the error vanishes.",
    "Should be investigated for RC4.",
    "In the worse case, we should throw a JME not an IllegalStateException.",
    "The failure occurs when trying to close the jarFile from the JarURLConnection.\nOn Windows or Linux, the file is not closed when the stream is closed.\nI could add a catch for runtime exception or IllegalStateException around this call to silently eat this exception since we simply want to be sure that the file handle is released.",
    "Created an attachment (id\u003d40781)\nProposed fix\n\n",
    "+1 to add this workaround for RC4 - the patch is of very low riks.",
    "+1 for 3.2RC4.\n\nMartin - pls cast your vote",
    "Well, I\u0027m certainly for fixing the problem, but I don\u0027t have a working Eclipse build system around (I tried, but it apparently didn\u0027t like me...) so I cannot test the patch. Fix sounds good though :-)",
    "+ 1 for 3.2 RC4. patch looks good.",
    "Fixed and released in HEAD.\nNo regression test available since this is MacOS specific.\nTo verify, simply check that the IllegalStateException are handled in the source code.",
    "Verified with I20060511-2000 for 3.2RC4",
    "(In reply to comment #10)\n\u003e Verified with I20060511-2000 for 3.2RC4\n\nThis bug appears in 3.2RC7.  It is appearing when attempting to get the JavaDoc via the JavaDoc view or hover in the Java Editor.\n\nThe related JAR file has the JavaDoc in the JAR and is configured using the JavaDoc Location specified against the JAR with a local file system path and the archive specific (doc) folder.  The location passes validation.\n\nThe JavaDoc for the related JAR appears the first time it is accessed, and the exception it throw thereafter.\n\njava.lang.IllegalStateException: zip file closed\n\tat java.util.zip.ZipFile.ensureOpen(ZipFile.java:398)\n\tat java.util.zip.ZipFile.getEntry(ZipFile.java:145)\n\tat java.util.jar.JarFile.getEntry(JarFile.java:194)\n\tat sun.net.www.protocol.jar.URLJarFile.getEntry(URLJarFile.java:89)\n\tat sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:95)\n\tat sun.net.www.protocol.jar.JarURLConnection.getInputStream(JarURLConnection.java:107)\n\tat org.eclipse.jdt.internal.core.JavaElement.getURLContents(JavaElement.java:734)\n\tat org.eclipse.jdt.internal.core.BinaryType.getJavadocContents(BinaryType.java:1086)\n\tat org.eclipse.jdt.internal.core.BinaryType.getAttachedJavadoc(BinaryType.java:998)\n\tat org.eclipse.jdt.ui.JavadocContentAccess.getHTMLContentReader(JavadocContentAccess.java:120)\n\tat org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:153)\n\tat org.eclipse.jdt.internal.ui.text.java.hover.AbstractJavaEditorTextHover.getHoverInfo(AbstractJavaEditorTextHover.java:121)\n\tat org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo(BestMatchHover.java:102)\n\tat org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo(JavaEditorTextHoverProxy.java:69)\n\tat org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:160)\n",
    "This is a different issue.",
    "I opened bug 147771.\nCould you please add yourself on the cc list and confirm that you are on MacOS?\nThanks."
  ],
  "commentCreationDates": [
    "2006-05-09T10:19:29+02:00",
    "2006-05-09T10:29:53+02:00",
    "2006-05-09T19:05:37+02:00",
    "2006-05-09T19:15:21+02:00",
    "2006-05-09T19:33:57+02:00",
    "2006-05-09T20:01:53+02:00",
    "2006-05-10T16:07:23+02:00",
    "2006-05-10T17:52:10+02:00",
    "2006-05-10T18:26:30+02:00",
    "2006-05-10T19:01:54+02:00",
    "2006-05-12T04:06:02+02:00",
    "2006-06-19T21:05:48+02:00",
    "2006-06-19T21:15:20+02:00",
    "2006-06-19T21:18:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "zip file closed",
      "elements": [
        {
          "method": "java.util.zip.ZipFile.ensureOpen",
          "source": "ZipFile.java:518"
        },
        {
          "method": "java.util.zip.ZipFile.getEntry",
          "source": "ZipFile.java:251"
        },
        {
          "method": "java.util.jar.JarFile.getEntry",
          "source": "JarFile.java:200"
        },
        {
          "method": "sun.net.www.protocol.jar.URLJarFile.getEntry",
          "source": "URLJarFile.java:90"
        },
        {
          "method": "sun.net.www.protocol.jar.JarURLConnection.connect",
          "source": "JarURLConnection.java:112"
        },
        {
          "method": "sun.net.www.protocol.jar.JarURLConnection.getJarFile",
          "source": "JarURLConnection.java:69"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getURLContents",
          "source": "JavaElement.java:792"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryType.getJavadocContents",
          "source": "BinaryType.java:1086"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryMethod.getAttachedJavadoc",
          "source": "BinaryMethod.java:531"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ProposalInfo.getHTMLContentReader",
          "source": "ProposalInfo.java:112"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ProposalInfo.extractJavadoc",
          "source": "ProposalInfo.java:99"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ProposalInfo.computeInfo",
          "source": "ProposalInfo.java:76"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ProposalInfo.getInfo",
          "source": "ProposalInfo.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.AbstractJavaCompletionProposal.getAdditionalProposalInfo",
          "source": "AbstractJavaCompletionProposal.java:458"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.AdditionalInfoController$3.run",
          "source": "AdditionalInfoController.java:100"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "140750",
      "date": "2006-05-09T10:19:29+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "zip file closed",
      "elements": [
        {
          "method": "java.util.zip.ZipFile.ensureOpen",
          "source": "ZipFile.java:398"
        },
        {
          "method": "java.util.zip.ZipFile.getEntry",
          "source": "ZipFile.java:145"
        },
        {
          "method": "java.util.jar.JarFile.getEntry",
          "source": "JarFile.java:194"
        },
        {
          "method": "sun.net.www.protocol.jar.URLJarFile.getEntry",
          "source": "URLJarFile.java:89"
        },
        {
          "method": "sun.net.www.protocol.jar.JarURLConnection.connect",
          "source": "JarURLConnection.java:95"
        },
        {
          "method": "sun.net.www.protocol.jar.JarURLConnection.getInputStream",
          "source": "JarURLConnection.java:107"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getURLContents",
          "source": "JavaElement.java:734"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryType.getJavadocContents",
          "source": "BinaryType.java:1086"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryType.getAttachedJavadoc",
          "source": "BinaryType.java:998"
        },
        {
          "method": "org.eclipse.jdt.ui.JavadocContentAccess.getHTMLContentReader",
          "source": "JavadocContentAccess.java:120"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo",
          "source": "JavadocHover.java:153"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.AbstractJavaEditorTextHover.getHoverInfo",
          "source": "AbstractJavaEditorTextHover.java:121"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo",
          "source": "BestMatchHover.java:102"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo",
          "source": "JavaEditorTextHoverProxy.java:69"
        },
        {
          "method": "org.eclipse.jface.text.TextViewerHoverManager$4.run",
          "source": "TextViewerHoverManager.java:160"
        }
      ],
      "number": 1,
      "commentIndex": 11,
      "bugId": "140750",
      "date": "2006-06-19T21:05:48+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "140750",
  "bugId": "140750",
  "date": "2006-05-09T10:19:29+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}