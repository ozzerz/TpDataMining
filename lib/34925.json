{
  "comments": [
    "These test files crash the compiler (in fact if you just compile \nConvertToUnchecked it crashes it):\n\nConvertToUnchecked.java:\n\nimport java.io.IOException;\n\n// example 3\naspect ConvertToUnchecked {\n  // make all exceptions in an application unchecked; \"soft\"\n  //declare soft: (Exception \u0026\u0026 !RuntimeException): within(com.foo.app..*);\n\n  // convert IOExceptions in a package to PersistenceException\n  pointcut module() : within(test.*); // within\n(com.foo.framework.persistence.*);\n  // convert exceptions\n  // within(test.*) would work to allow an immediate catch, except for\n  // the last statement in a try block\n  // however, I suspect that would also generate inefficient code\n  // even this might be inefficient: it needs to wrap every method body in a\n  // try ... catch block\n  after() throwing (IOException e) : within(test.*) {\n    throw new PersistenceException(e);\n  }\n  declare soft: (IOException): module();\n}\n// tested by: test.ConvertToUnchecked\n----\n\nPersistenceException.java\npublic class PersistenceException extends Exception \n{\n  public PersistenceException(Throwable cause) {\n    super(cause);\n  }\n}\n\n---\nsample run:\nC:\\ron\\devel\\articles\\errorHandling\u003eajc -1.4 ConvertToUnchecked.java \nPersistence\nException.java\njava.lang.RuntimeException: unimplemented: throw new PersistenceException(e)\n        at org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow\n(Ec\nlipseShadow.java:148)\n        at org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow\n(E\nclipseFactory.java:292)\n        at \norg.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandle\ndException(AjProblemReporter.java:67)\n        at \norg.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHand\nlers(FlowContext.java:249)\n        at org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode\n(Thro\nwStatement.java:35)\n        at \norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analy\nseCode(AbstractMethodDeclaration.java:106)\n        at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode\n(Typ\neDeclaration.java:445)\n        at \norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.anal\nyseCode(CompilationUnitDeclaration.java:76)\n        at org.eclipse.jdt.internal.compiler.Compiler.process\n(Compiler.java:539)\n\n        at org.aspectj.ajdt.internal.compiler.AjCompiler.process\n(AjCompiler.java\n:65)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile\n(Compiler.java:340)\n\n        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(Ab\nstractImageBuilder.java:232)\n        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(Ab\nstractImageBuilder.java:171)\n        at \norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.ru\nn(AjBuildManager.java:656)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBu\nildManager.java:139)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n        at org.aspectj.tools.ajc.Main.run(Main.java:216)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\nC:\\ron\\devel\\articles\\errorHandling\\ConvertToUnchecked.java:0 Internal compiler\nerror\njava.lang.RuntimeException: unimplemented: throw new PersistenceException(e)\n        at org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow\n(Ec\nlipseShadow.java:148)\n        at org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow\n(E\nclipseFactory.java:292)\n        at \norg.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandle\ndException(AjProblemReporter.java:67)\n        at \norg.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHand\nlers(FlowContext.java:249)\n        at org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode\n(Thro\nwStatement.java:35)\n        at \norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analy\nseCode(AbstractMethodDeclaration.java:106)\n        at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode\n(Typ\neDeclaration.java:445)\n        at \norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.anal\nyseCode(CompilationUnitDeclaration.java:76)\n        at org.eclipse.jdt.internal.compiler.Compiler.process\n(Compiler.java:539)\n\n        at org.aspectj.ajdt.internal.compiler.AjCompiler.process\n(AjCompiler.java\n:65)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile\n(Compiler.java:340)\n\n        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(Ab\nstractImageBuilder.java:232)\n        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(Ab\nstractImageBuilder.java:171)\n        at \norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.ru\nn(AjBuildManager.java:656)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBu\nildManager.java:139)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n        at org.aspectj.tools.ajc.Main.run(Main.java:216)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n!! no source information available !!\nABORT\nException thrown from AspectJ 1.1rc1\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nunimplemented: throw new PersistenceException(e)\nunimplemented: throw new PersistenceException(e)\njava.lang.RuntimeException: unimplemented: throw new PersistenceException(e)\n        at org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow\n(Ec\nlipseShadow.java:148)\n        at org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow\n(E\nclipseFactory.java:292)\n        at \norg.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandle\ndException(AjProblemReporter.java:67)\n        at \norg.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHand\nlers(FlowContext.java:249)\n        at org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode\n(Thro\nwStatement.java:35)\n        at \norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analy\nseCode(AbstractMethodDeclaration.java:106)\n        at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode\n(Typ\neDeclaration.java:445)\n        at \norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.anal\nyseCode(CompilationUnitDeclaration.java:76)\n        at org.eclipse.jdt.internal.compiler.Compiler.process\n(Compiler.java:539)\n\n        at org.aspectj.ajdt.internal.compiler.AjCompiler.process\n(AjCompiler.java\n:65)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile\n(Compiler.java:340)\n\n        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(Ab\nstractImageBuilder.java:232)\n        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(Ab\nstractImageBuilder.java:171)\n        at \norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.ru\nn(AjBuildManager.java:656)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBu\nildManager.java:139)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n        at org.aspectj.tools.ajc.Main.run(Main.java:216)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n1 fail|abort, 1 error",
    "I actually ran this test against the latest rc1 build (I pulled it from cvs on \nmy home machine and didn\u0027t realize there was a new build til I read my \nemail)...",
    "This bug is easily reproduced.  The bug means that declare soft can not\nbe used in a system that has explicit throw statements which throw checked \nexceptions that are not permitted except through the declare soft.\n\nThis particular example could be worked-around by making PersistenceException a\nRuntimeException.  This clearly seems to be the right choice in this minimal \ntest case.  However, the bug would still be revealed if the rest of the code \ncontains an explicit \u0027throw IOException\u0027 that was not declared by the \nenclosing method.\n\nThis bug is right on the border-line for delaying the RC1 release and we are \ncurrently evaluating that.  It will be fixed shortly in the active cvs tree.",
    "resolved in tree and for 1.1rc1 release"
  ],
  "commentCreationDates": [
    "2003-03-13T16:58:52+01:00",
    "2003-03-13T17:31:12+01:00",
    "2003-03-13T18:16:03+01:00",
    "2003-03-14T21:29:26+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "unimplemented: throw new PersistenceException(e)",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow",
          "source": "Ec lipseShadow.java:148"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow",
          "source": "E clipseFactory.java:292"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandledException",
          "source": "AjProblemReporter.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHandlers",
          "source": "FlowContext.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode",
          "source": "Thro wStatement.java:35"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode",
          "source": "AbstractMethodDeclaration.java:106"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "Typ eDeclaration.java:445"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode",
          "source": "CompilationUnitDeclaration.java:76"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:539"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompiler.process",
          "source": "AjCompiler.java :65"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:340"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "Ab stractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "Ab stractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:656"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:139"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "34925",
      "date": "2003-03-13T16:58:52+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "unimplemented: throw new PersistenceException(e)",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow",
          "source": "Ec lipseShadow.java:148"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow",
          "source": "E clipseFactory.java:292"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandledException",
          "source": "AjProblemReporter.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHandlers",
          "source": "FlowContext.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode",
          "source": "Thro wStatement.java:35"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode",
          "source": "AbstractMethodDeclaration.java:106"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "Typ eDeclaration.java:445"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode",
          "source": "CompilationUnitDeclaration.java:76"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:539"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompiler.process",
          "source": "AjCompiler.java :65"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:340"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "Ab stractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "Ab stractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:656"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:139"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "34925",
      "date": "2003-03-13T16:58:52+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "unimplemented: throw new PersistenceException(e)",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow",
          "source": "Ec lipseShadow.java:148"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow",
          "source": "E clipseFactory.java:292"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandledException",
          "source": "AjProblemReporter.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHandlers",
          "source": "FlowContext.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode",
          "source": "Thro wStatement.java:35"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode",
          "source": "AbstractMethodDeclaration.java:106"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "Typ eDeclaration.java:445"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode",
          "source": "CompilationUnitDeclaration.java:76"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:539"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompiler.process",
          "source": "AjCompiler.java :65"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:340"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "Ab stractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "Ab stractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:656"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:139"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "34925",
      "date": "2003-03-13T16:58:52+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    }
  ],
  "groupId": "34925",
  "bugId": "34925",
  "date": "2003-03-13T16:58:52+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "critical"
}