{
  "comments": [
    "Steps to reproduce:\n\n1) Go to General\u003eKeys\u003eModify\n2) Select Refactoring - Java for the category\n3) Select \"Move Member Type to New File\" for the name\n4) In the key sequence, select Tab\n5) Type Ctrl + Shift + N\n6) Change the name by selecting \"Backspace\" instead of Tab.\n7) You should get the exception\n\njava.lang.ArrayIndexOutOfBoundsException\n\tat java.lang.System.arraycopy(Native Method)\n\tat\norg.eclipse.jface.bindings.keys.KeySequenceText.insertStrokeAt(KeySequenceText.java:754)\n\tat org.eclipse.jface.bindings.keys.KeySequenceText.insert(KeySequenceText.java:719)\n\tat\norg.eclipse.ui.internal.keys.KeysPreferencePage$8.widgetSelected(KeysPreferencePage.java:778)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:844)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2929)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2562)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:809)\n\tat org.eclipse.jface.window.Window.open(Window.java:787)\n\tat org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:66)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\n\tat\norg.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:844)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2929)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2562)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1694)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1658)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:366)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:375)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:162)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Moving Dougs bugs",
    "Reproduced following the steps described in comment 0 with N0421-0010.",
    "This bug seems to be a bug in the org.eclipse.jface.bindings.keys.KeySequenceText support.\nIt fails when invoking:\ninsert(KeyStroke).\nwhere the argument is BS (Backspace)\n\nand the receiver is the following KeySequenceText:\nTAB CTRL+SHIFT+N\n\nThe steps 2) and 3) could be replaced by any keybinding definition. Trying to define a new key binding and typing first:\nTAB CTRL+SHIFT+N\n\nand then changing it for BS would cause the problem.\nThis might impact other user of this key binding sequences (RCP ?).",
    "Created an attachment (id\u003d39420)\nProposed fix\n\nThe following patch prevents the AIOOBE and seems to behave right.\nThis needs to be reviewed to be sure it does what it is supposed to do.",
    "Is this intended to be fixed for 3.2 ?",
    "I\u0027m looking at it now.\n\nPW\n",
    "Fixed in HEAD \u003e20060426\n\nIt looks like the index needs to match the keysequence.\n\nPW\n",
    "verified in RC5\n\nPW\n"
  ],
  "commentCreationDates": [
    "2005-05-31T18:21:57+02:00",
    "2006-04-21T19:14:31+02:00",
    "2006-04-21T19:44:05+02:00",
    "2006-04-25T17:35:44+02:00",
    "2006-04-25T17:41:55+02:00",
    "2006-04-26T17:24:25+02:00",
    "2006-04-26T17:33:49+02:00",
    "2006-04-26T20:54:16+02:00",
    "2006-05-19T18:58:38+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jface.bindings.keys.KeySequenceText.insertStrokeAt",
          "source": "KeySequenceText.java:754"
        },
        {
          "method": "org.eclipse.jface.bindings.keys.KeySequenceText.insert",
          "source": "KeySequenceText.java:719"
        },
        {
          "method": "org.eclipse.ui.internal.keys.KeysPreferencePage$8.widgetSelected",
          "source": "KeysPreferencePage.java:778"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:844"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2929"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2562"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:809"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:787"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:66"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:996"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:538"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:844"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2929"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2562"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1694"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1658"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:366"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:375"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:162"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "97565",
      "date": "2005-05-31T18:21:57+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "97565",
  "bugId": "97565",
  "date": "2005-05-31T18:21:57+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}