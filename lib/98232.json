{
  "comments": [
    "Hi folks\n\nI get an internal compiler error with a rather long exception, like this:\nInternal compiler error\njava.lang.NullPointerException\n\tat\norg.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.enclosingType(ParameterizedTypeBinding.java:256)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createRawType(LookupEnvironment.java:497)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.swapUnresolved(ParameterizedTypeBinding.java:873)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.setResolvedType(UnresolvedReferenceBinding.java:75)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:405)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:393)\n\tat org.eclipse.jdt.internal.compiler.Compiler.accept(Compiler.java:190)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:99)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve(UnresolvedReferenceBinding.java:43)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType(BinaryTypeBinding.java:85)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.resolve(ParameterizedTypeBinding.java:752)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType(BinaryTypeBinding.java:65)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveTypesFor(BinaryTypeBinding.java:752)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.getExactMethod(BinaryTypeBinding.java:568)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.findExactMethod(Scope.java:789)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getMethod(Scope.java:2159)\n\tat\norg.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType(MessageSend.java:314)\n\tat\norg.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType(MessageSend.java:258)\n\tat\norg.eclipse.jdt.internal.compiler.ast.CastExpression.resolveType(CastExpression.java:380)\n\tat\norg.eclipse.jdt.internal.compiler.ast.LocalDeclaration.resolve(LocalDeclaration.java:201)\n\tat\norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:415)\n\tat\norg.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:169)\n\tat\norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:393)\n\tat\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1063)\n\tat\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1112)\n\tat\norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:305)\n\tat org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:504)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\n\tat\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:240)\n\tat\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:190)\n\tat\norg.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)\n\tat\norg.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:227)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:155)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1038)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:775)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1038)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:775)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)\n\tat\norg.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n\nI hope this can tell you something, because I don\u0027t feel I can say much. It is\nonly one file this is happening on, and I have that thing already seen on 31M6\nand 31M7 while I am now using RC1. I don\u0027t really know which part of the code it\ndoesn\u0027t like, I tried to delete stuff and see what happens, but I haven\u0027t found\nthe one piece of code. For example: I delete one method, and the error goes\naway. But when I put the method in an isolated class, the error doesn\u0027t show. So\nit seems to not be related to this method, or something in it in particular, but\nrather to that method in combination with the rest of the class.\n\nOh, and the error manifests itself like this:\nState 1: no error\nAction: I change something, add a comment for example.\nState 2: changed\nAction: I save\nState 3: saved + error\nAction: I change again something, for example I add a dot and delete it\nState 4: changed\nAction: I save\nState 5: saved and no error\n\nState 5 wraps to State 1 again, so I have to save the file always twice now.\n\nI hope this helps\n\nCheers\nDaniel",
    "You should have a compilation unit with a marker that is refering to the NPE.\nCould you please provide the source code of this class and its dependants to\nhelp us to reproduce the problem?\nThanks.",
    "(In reply to comment #1)\nIt does show a red marker, but it puts it on the first line of the file. (The\nfirst line is inhabited by a comment only.) When I then visit the \"Problems\"\nview and check the entry there, it contains the shown exception stack trace.\n\nI\u0027ll try to extract the file into a blank project without dependencies. Gimme a\nminute :)",
    "The marker is on the first line because of the crash. There is no line to report\nthe problem as this is an internal error.\nThanks for attaching the test case.",
    "Created an attachment (id\u003d22324)\nA minimal project, zipped completely.\n\nThe class in question is this one: IndexedSparseMatrix",
    "I don\u0027t get the exact same NPE in latest.\nIt crashes in\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createRawType(...).\n\nOnce this is fixed, we might ask you to verify it with your test case.\n\nHere is a simpler test case:\n\npackage test;\n\npublic class A {\n\tA() {\n\t\tnew B().bar();\n\t}\n}\n\npackage test;\n\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.SortedSet;\n\npublic class B  {\n\tpublic Set\u003cMap.Entry\u003e bar() {\n\t\treturn null;\n\t}\n\tvoid foo(SortedSet\u003cMap.Entry\u003e set) {\n\t}\n}\n\nWhen both are compiled at the same time, it works. But then change A and\nrecompile, this leads to the following stack trace.\n\njava.lang.NullPointerException\n\tat\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.convertToRawType(LookupEnvironment.java:356)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.enclosingType(ParameterizedTypeBinding.java:255)\n\tat\norg.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createRawType(LookupEnvironment.java:569)\n...\n\nThis looks like a problem with binary type binding.",
    "I confirm that using M7, I get the exact same stack trace than the original test\ncase using the simpler test case in comment 5.",
    "Even simpler test case:\n\nB.java\n\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.SortedSet;\n\npublic class B  {\n\tstatic Set\u003cMap.Entry\u003e foo(SortedSet\u003cMap.Entry\u003e set) {\n\t\treturn null;\n\t}\n}\n--------------------------------------\nA.java\n\npublic class A {\n\tA() {\n\t\tB.foo(null);\n\t}\n}",
    "Added GenericTypeTest#test714",
    "Dup\n\n*** This bug has been marked as a duplicate of 97108 ***",
    "Verified for 3.1 RC2 using build N20050607-0010 + JDT/Core HEAD"
  ],
  "commentCreationDates": [
    "2005-06-03T07:04:44+02:00",
    "2005-06-03T15:41:46+02:00",
    "2005-06-03T16:17:43+02:00",
    "2005-06-03T16:41:43+02:00",
    "2005-06-03T16:53:39+02:00",
    "2005-06-03T21:19:42+02:00",
    "2005-06-03T21:27:09+02:00",
    "2005-06-03T21:33:21+02:00",
    "2005-06-05T16:59:15+02:00",
    "2005-06-05T17:01:39+02:00",
    "2005-06-07T16:19:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.enclosingType",
          "source": "ParameterizedTypeBinding.java:256"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createRawType",
          "source": "LookupEnvironment.java:497"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.swapUnresolved",
          "source": "ParameterizedTypeBinding.java:873"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.setResolvedType",
          "source": "UnresolvedReferenceBinding.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom",
          "source": "LookupEnvironment.java:405"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom",
          "source": "LookupEnvironment.java:393"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.accept",
          "source": "Compiler.java:190"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType",
          "source": "LookupEnvironment.java:99"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve",
          "source": "UnresolvedReferenceBinding.java:43"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType",
          "source": "BinaryTypeBinding.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.resolve",
          "source": "ParameterizedTypeBinding.java:752"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType",
          "source": "BinaryTypeBinding.java:65"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveTypesFor",
          "source": "BinaryTypeBinding.java:752"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.getExactMethod",
          "source": "BinaryTypeBinding.java:568"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.findExactMethod",
          "source": "Scope.java:789"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getMethod",
          "source": "Scope.java:2159"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType",
          "source": "MessageSend.java:314"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType",
          "source": "MessageSend.java:258"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CastExpression.resolveType",
          "source": "CastExpression.java:380"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.resolve",
          "source": "LocalDeclaration.java:201"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements",
          "source": "AbstractMethodDeclaration.java:415"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements",
          "source": "MethodDeclaration.java:169"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:393"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1063"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1112"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:305"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:504"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:240"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:190"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build",
          "source": "IncrementalImageBuilder.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas",
          "source": "JavaBuilder.java:227"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.build",
          "source": "JavaBuilder.java:155"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:593"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1038"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:775"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:168"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:202"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:231"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1038"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:775"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:234"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:253"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:282"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:139"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "98232",
      "duplicateId": "97108",
      "date": "2005-06-03T07:04:44+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.convertToRawType",
          "source": "LookupEnvironment.java:356"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding.enclosingType",
          "source": "ParameterizedTypeBinding.java:255"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createRawType",
          "source": "LookupEnvironment.java:569"
        }
      ],
      "number": 1,
      "commentIndex": 5,
      "bugId": "98232",
      "duplicateId": "97108",
      "date": "2005-06-03T21:19:42+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "97108",
  "bugId": "98232",
  "duplicateId": "97108",
  "date": "2005-06-03T07:04:44+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}