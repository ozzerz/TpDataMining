{
  "comments": [
    "Build ID: 3.3M5\n\nSteps To Reproduce:\n1. Create a gmfmap containing a top node. The top node should contain a compartment with child nodes. The child nodes are just labels. Set the related diagram property of such a child node to something valid wrt. your domain model\n2. Do generate gmfgen\nThe generated GenChildLabelNode is missing the OpenBehaviourPolicy. Even if you add it manually afterwards second problem is that I can\u0027t make it generate that policy.\n\n\nMore information:\nsee Newsgroupthread news://news.eclipse.org:119/et36lc$sai$1@utils.eclipse.org",
    "I\u0027ve fixed code generation, so if you add OpenBehaviourPolicy by hand, it should get generated. The policy should be preserved during subsequent transformations as well.\n\nCreating the policy during transformation needs a bit more attention, gonna address this later.",
    "Ok, I digged a bit further into this. With GMF2 M7 a DiagramHint style is needed for the open to work. This needed a change to the compartment\u0027s child nodes as they are not persited in current generated version. For this I overrided CreateViewRequest.ViewDescriptor getViewDescriptor to return a descriptor which has persit \u003d true. Second, i patched the view factory to include the sytle on creation. This made the open behaviour work and needs to be included in the code generator.\n\nHowever, it still works incompletely as from time to time I get an IllegalStateException in my parent diagram when I save my sub diagrams on resync. I\u0027m not sure whether this is a general problem/bug with the sync code or specific to the subdiagram behaviour.\n\nThe full exception is \nCaused by: java.lang.IllegalStateException: Cannot modify resource set without a write transaction\n\tat org.eclipse.emf.transaction.impl.TransactionChangeRecorder.assertWriting(TransactionChangeRecorder.java:322)\n\tat org.eclipse.emf.transaction.impl.TransactionChangeRecorder.appendNotification(TransactionChangeRecorder.java:284)\n\tat org.eclipse.emf.transaction.impl.TransactionChangeRecorder.processResourceNotification(TransactionChangeRecorder.java:254)\n\tat org.eclipse.emf.transaction.impl.TransactionChangeRecorder.notifyChanged(TransactionChangeRecorder.java:220)\n\tat org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:247)\n\tat org.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification(NotifyingListImpl.java:267)\n\tat org.eclipse.emf.common.notify.impl.NotifyingListImpl.clear(NotifyingListImpl.java:1094)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.doUnload(ResourceImpl.java:1472)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doUnload(XMLResourceImpl.java:505)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.unload(ResourceImpl.java:1494)\n\tat de.uka.ipd.sdq.pcm.gmf.repository.part.PalladioComponentModelDocumentProvider.handleElementChanged(PalladioComponentModelDocumentProvider.java:661)\n\tat de.uka.ipd.sdq.pcm.gmf.repository.part.PalladioComponentModelDocumentProvider$ResourceSetInfo$SynchronizerDelegate$1.run(PalladioComponentModelDocumentProvider.java:934)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 23 more",
    "The exception is not solely related to the OpenDiagram stuff, so I filed a separate bug for it (bug no. 189587)"
  ],
  "commentCreationDates": [
    "2007-03-13T08:23:04+01:00",
    "2007-04-16T18:55:36+02:00",
    "2007-05-29T01:04:52+02:00",
    "2007-05-29T07:37:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Cannot modify resource set without a write transaction",
      "elements": [
        {
          "method": "org.eclipse.emf.transaction.impl.TransactionChangeRecorder.assertWriting",
          "source": "TransactionChangeRecorder.java:322"
        },
        {
          "method": "org.eclipse.emf.transaction.impl.TransactionChangeRecorder.appendNotification",
          "source": "TransactionChangeRecorder.java:284"
        },
        {
          "method": "org.eclipse.emf.transaction.impl.TransactionChangeRecorder.processResourceNotification",
          "source": "TransactionChangeRecorder.java:254"
        },
        {
          "method": "org.eclipse.emf.transaction.impl.TransactionChangeRecorder.notifyChanged",
          "source": "TransactionChangeRecorder.java:220"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify",
          "source": "BasicNotifierImpl.java:247"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification",
          "source": "NotifyingListImpl.java:267"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.clear",
          "source": "NotifyingListImpl.java:1094"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.doUnload",
          "source": "ResourceImpl.java:1472"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doUnload",
          "source": "XMLResourceImpl.java:505"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.unload",
          "source": "ResourceImpl.java:1494"
        },
        {
          "method": "de.uka.ipd.sdq.pcm.gmf.repository.part.PalladioComponentModelDocumentProvider.handleElementChanged",
          "source": "PalladioComponentModelDocumentProvider.java:661"
        },
        {
          "method": "de.uka.ipd.sdq.pcm.gmf.repository.part.PalladioComponentModelDocumentProvider$ResourceSetInfo$SynchronizerDelegate$1.run",
          "source": "PalladioComponentModelDocumentProvider.java:934"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "177109",
      "date": "2007-05-29T01:04:52+02:00",
      "product": "GMF",
      "component": "Generation",
      "severity": "normal"
    }
  ],
  "groupId": "177109",
  "bugId": "177109",
  "date": "2007-03-13T08:23:04+01:00",
  "product": "GMF",
  "component": "Generation",
  "severity": "normal"
}