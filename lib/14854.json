{
  "comments": [
    "Build 20020425, Win2k SP2, Sun JDK 1.3.1\n\n!SESSION\n!ENTRY org.eclipse.jdt.ui 4 1 Mon Apr 29 11:27:02 EDT 2002\n!MESSAGE Internal Error\n!STACK java.lang.reflect.InvocationTargetException: \njava.lang.StringIndexOutOfBoundsException: String index out of range: -1\n\tat java.lang.String.substring(String.java:1525)\n\tat java.lang.String.substring(String.java:1492)\n\tat \norg.eclipse.jdt.internal.corext.util.CodeFormatterUtil.createMethodDeclaration\n(CodeFormatterUtil.java:219)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodRefactoring.create\nNewMethodEdit(ExtractMethodRefactoring.java:355)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodRefactoring.create\nChange(ExtractMethodRefactoring.java:282)\n\tat org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run\n(CreateChangeOperation.java:97)\n\tat org.eclipse.jdt.internal.ui.refactoring.PerformChangeOperation.run\n(PerformChangeOperation.java:118)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:296)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:249)\n\tat org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:720)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish\n(RefactoringWizard.java:330)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.UserInputWizardPage.performFinish\n(UserInputWizardPage.java:88)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish\n(RefactoringWizard.java:461)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed\n(WizardDialog.java:577)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed\n(WizardDialog.java:312)\n\tat org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:379)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:85)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1412)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1208)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:538)\n\tat org.eclipse.jface.window.Window.open(Window.java:525)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate\n(RefactoringStarter.java:79)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.TextSelectionRefactoringAction.r\nun(TextSelectionRefactoringAction.java:40)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:134)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:94)\n\tat org.eclipse.ui.actions.RetargetAction.run(RetargetAction.java:147)\n\tat org.eclipse.jdt.internal.ui.actions.RetargetActionDelegator.run\n(RetargetActionDelegator.java:53)\n\tat org.eclipse.ui.internal.PluginAction.runWithEvent\n(PluginAction.java:202)\n\tat org.eclipse.ui.internal.WWinPluginAction.runWithEvent\n(WWinPluginAction.java:165)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:361)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:352)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:47)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1412)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1208)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:833)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:816)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:643)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:349)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:160)\n\tat org.eclipse.core.launcher.Main.run(Main.java:548)\n\tat org.eclipse.core.launcher.Main.main(Main.java:403)",
    "Igor,\n\ndo you have a reproducable case. This whole stuff got recoded so it is hard for \nme to reproduce without a test case.",
    "Dirk,\n\nI have tried to reproduce this problem this morning and could not. I did not \nhave time to dig into it yesterday, so I just filed a bug report and did the \nextraction by hand. Sorry.\n\nOn a bright side here is another exception in method extraction that I can \nreproduce ;-) \n\n1. Start new workspace and turn automatic compilation off\n2. Create following java class\n[Test.java\npackage test;\n\npublic class Test {\n\n    public void onMessage(Message message) {\n// \u003c- selection begins\n                    try {\n                        doSomething(conn, rr);\n                    } catch (SomeException e) {\n                    }\n// \u003c- selection ends\n    }\n}]\n3. Select marked lines of the code and try to extract a method.\n4. \"Internal error\" dialog shows up and following information is recorded \nto .log\n!ENTRY org.eclipse.core.resources 1 4 Tue Apr 30 07:48:48 EDT 2002\n!MESSAGE Unhandled exception caught in event loop.\n!ENTRY org.eclipse.ui 4 0 Tue Apr 30 07:48:48 EDT 2002\n!MESSAGE java.lang.NullPointerException\n!STACK java.lang.NullPointerException\n\tat org.eclipse.jdt.internal.corext.dom.LocalVariableIndex.visit\n(LocalVariableIndex.java:23)\n\tat org.eclipse.jdt.core.dom.SingleVariableDeclaration.accept0\n(SingleVariableDeclaration.java:126)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:1383)\n\tat org.eclipse.jdt.core.dom.CatchClause.accept0(CatchClause.java:83)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:1412)\n\tat org.eclipse.jdt.core.dom.TryStatement.accept0(TryStatement.java:100)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:1412)\n\tat org.eclipse.jdt.core.dom.Block.accept0(Block.java:80)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:1383)\n\tat org.eclipse.jdt.core.dom.MethodDeclaration.accept0\n(MethodDeclaration.java:180)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1332)\n\tat org.eclipse.jdt.internal.corext.dom.LocalVariableIndex.perform\n(LocalVariableIndex.java:18)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodAnalyzer.checkActi\nvation(ExtractMethodAnalyzer.java:143)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodRefactoring.checkA\nctivation(ExtractMethodRefactoring.java:137)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate\n(RefactoringStarter.java:75)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.TextSelectionRefactoringAction.r\nun(TextSelectionRefactoringAction.java:40)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:134)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:94)\n\tat org.eclipse.ui.actions.RetargetAction.run(RetargetAction.java:147)\n\tat org.eclipse.jdt.internal.ui.actions.RetargetActionDelegator.run\n(RetargetActionDelegator.java:53)\n\tat org.eclipse.ui.internal.PluginAction.runWithEvent\n(PluginAction.java:202)\n\tat org.eclipse.ui.internal.WWinPluginAction.runWithEvent\n(WWinPluginAction.java:165)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:361)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:352)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:47)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1412)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1208)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:833)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:816)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:643)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:349)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:160)\n\tat org.eclipse.core.launcher.Main.run(Main.java:548)\n\tat org.eclipse.core.launcher.Main.main(Main.java:403)\n\n",
    "Problem is that the analyzer doesn\u0027t handle the case where the binding can\u0027t be \nresolved due to a compiler error.\n\nFixed in build \u003e I20020502"
  ],
  "commentCreationDates": [
    "2002-04-29T17:40:49+02:00",
    "2002-04-29T18:11:41+02:00",
    "2002-04-30T14:01:59+02:00",
    "2002-05-03T14:52:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StringIndexOutOfBoundsException",
      "message": "String index out of range: -1",
      "elements": [
        {
          "method": "java.lang.String.substring",
          "source": "String.java:1525"
        },
        {
          "method": "java.lang.String.substring",
          "source": "String.java:1492"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.CodeFormatterUtil.createMethodDeclaration",
          "source": "CodeFormatterUtil.java:219"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodRefactoring.createNewMethodEdit",
          "source": "ExtractMethodRefactoring.java:355"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodRefactoring.createChange",
          "source": "ExtractMethodRefactoring.java:282"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run",
          "source": "CreateChangeOperation.java:97"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PerformChangeOperation.run",
          "source": "PerformChangeOperation.java:118"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:296"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:249"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish",
          "source": "RefactoringWizard.java:330"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.UserInputWizardPage.performFinish",
          "source": "UserInputWizardPage.java:88"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish",
          "source": "RefactoringWizard.java:461"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:577"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:312"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:379"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:85"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1412"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1208"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:538"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:525"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:79"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.TextSelectionRefactoringAction.run",
          "source": "TextSelectionRefactoringAction.java:40"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:134"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:94"
        },
        {
          "method": "org.eclipse.ui.actions.RetargetAction.run",
          "source": "RetargetAction.java:147"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.actions.RetargetActionDelegator.run",
          "source": "RetargetActionDelegator.java:53"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:202"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:165"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1412"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1208"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:833"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:816"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:643"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:349"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:160"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:548"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:403"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "14854",
      "date": "2002-04-29T17:40:49+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.corext.dom.LocalVariableIndex.visit",
          "source": "LocalVariableIndex.java:23"
        },
        {
          "method": "org.eclipse.jdt.core.dom.SingleVariableDeclaration.accept0",
          "source": "SingleVariableDeclaration.java:126"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:1383"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CatchClause.accept0",
          "source": "CatchClause.java:83"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:1412"
        },
        {
          "method": "org.eclipse.jdt.core.dom.TryStatement.accept0",
          "source": "TryStatement.java:100"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:1412"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:80"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:1383"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodDeclaration.accept0",
          "source": "MethodDeclaration.java:180"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1332"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.dom.LocalVariableIndex.perform",
          "source": "LocalVariableIndex.java:18"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodAnalyzer.checkActivation",
          "source": "ExtractMethodAnalyzer.java:143"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractMethodRefactoring.checkActivation",
          "source": "ExtractMethodRefactoring.java:137"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.TextSelectionRefactoringAction.run",
          "source": "TextSelectionRefactoringAction.java:40"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:134"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:94"
        },
        {
          "method": "org.eclipse.ui.actions.RetargetAction.run",
          "source": "RetargetAction.java:147"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.actions.RetargetActionDelegator.run",
          "source": "RetargetActionDelegator.java:53"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:202"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:165"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1412"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1208"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:833"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:816"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:643"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:349"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:160"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:548"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:403"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "14854",
      "date": "2002-04-30T14:01:59+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "14854",
  "bugId": "14854",
  "date": "2002-04-29T17:40:49+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}