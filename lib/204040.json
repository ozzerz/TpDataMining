{
  "comments": [
    "The code generation for the class literal access should be extracted in a synthetic method. This would prevent a potential verification failure. The actual code generation doesn\u0027t flush properly the stack when entering in the catch block.\nThis is visible with the cldc code since it requires stack maps to be generated.",
    "Released in HEAD.\nUpdate existing regression tests.\nNo need for a synthetic method. The fix was to improve the generation of the stack map frames.",
    "I\u0027m not sure how to verify this bug: what code was changed ? what tests were updated ?",
    "Regression test added in org.eclipse.jdt.core.tests.compiler.regression.Compliance_CLDC#test002",
    "An IBM VM 1.6 is required to verify the test case since the Sun VM doesn\u0027t detect the verify error.",
    "To reproduce:\n1. Start 3.4M2 on a new workspace\n2. Create a Java project with CLDC1.1 as the Generated .class files compatibilty\n3. Add the following class:\npublic class X {\n\tpublic static void main(String[] args) {\n\t\t\tSystem.out.print(X.class !\u003d null);\n\t\t\tSystem.out.print(String.class !\u003d null);\n\t\t\tSystem.out.print(Object.class !\u003d null);\n\t\t\tSystem.out.print(X.class !\u003d null);\n\t}\n}\n4. Run this class with an IBM 1.6 VM with the following argument: -Xverify:nofallback\nObserve: You get the following exception:\nException in thread \"main\" java.lang.VerifyError: JVMVRFY012 stack shape inconsistent; class\u003dX, method\u003dmain([Ljava/lang/String;)V, pc\u003d10\n\tat java.lang.J9VMInternals.verifyImpl(Native Method)\n\tat java.lang.J9VMInternals.verify(J9VMInternals.java:66)\n\tat java.lang.J9VMInternals.initialize(J9VMInternals.java:127)\n\nThe verify error doesn\u0027t occur with 3.4M3.\n\nVerified for 3.4M3 using I20071029-0010 "
  ],
  "commentCreationDates": [
    "2007-09-19T23:23:05+02:00",
    "2007-09-20T20:07:55+02:00",
    "2007-10-30T12:06:14+01:00",
    "2007-10-30T15:30:09+01:00",
    "2007-10-30T15:54:52+01:00",
    "2007-10-30T16:08:03+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.VerifyError",
      "message": "JVMVRFY012 stack shape inconsistent; class\u003dX, method\u003dmain([Ljava/lang/String;)V, pc\u003d10",
      "elements": [
        {
          "method": "java.lang.J9VMInternals.verifyImpl",
          "source": "Native Method"
        },
        {
          "method": "java.lang.J9VMInternals.verify",
          "source": "J9VMInternals.java:66"
        },
        {
          "method": "java.lang.J9VMInternals.initialize",
          "source": "J9VMInternals.java:127"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "204040",
      "date": "2007-10-30T16:08:03+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "204040",
  "bugId": "204040",
  "date": "2007-09-19T23:23:05+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}