{
  "comments": [
    "Using my own wizard I create java projects. The class path is set to use my own \nclasspath libraries only. The problem is, that the class path gets not resolved \nand also the package explorer throws a null pointer exception. When I restart \neclipse all library entries get resolved, but before that the project cannot be \nused.\n\n\nI use \n\n\n\n\njavaProject.setRawClasspath((IClasspathEntry[]) cp.toArray(new \nClasspathEntry[cp.size()]), new SubProgressMonitor(monitor, 1));\n\n\n\n\nto set the class path in the newly created project. \n\n\n\n\nThe exception reads as following:\n\n\n\n\n!ENTRY org.eclipse.ui 4 4 Mar 24, 2003 15:01:14.65\n\n\n!MESSAGE Unhandled exception caught in event loop.\n\n\n!ENTRY org.eclipse.ui 4 0 Mar 24, 2003 15:01:14.85\n\n\n!MESSAGE java.lang.ClassCastException\n\n\n!STACK 0\n\n\njava.lang.ClassCastException\n\n\n\tat org.eclipse.jdt.ui.JavaElementSorter.compare(JavaElementSorter.java:209)\n\n\n\tat org.eclipse.jface.viewers.ViewerSorter$1.compare(ViewerSorter.java:169)\n\n\n\tat java.util.Arrays.mergeSort(Arrays.java:1237)\n\n\n\tat java.util.Arrays.mergeSort(Arrays.java:1245)\n\n\n\tat java.util.Arrays.sort(Arrays.java:1185)\n\n\n\tat org.eclipse.jface.viewers.ViewerSorter.sort(ViewerSorter.java:167)\n\n\n\tat org.eclipse.jface.viewers.StructuredViewer.\ngetSortedChildren(StructuredViewer.java:562)\n\n\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.\njava:301)\n\n\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\n\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.\ncreateChildren(AbstractTreeViewer.java:289)\n\n\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.\nhandleTreeExpand(AbstractTreeViewer.java:697)\n\n\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$4.\ntreeExpanded(AbstractTreeViewer.java:709)\n\n\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:\n177)\n\n\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\n\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\n\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:865)\n\n\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:849)\n\n\n\tat org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:1894)\n\n\n\tat org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:3814)\n\n\n\tat org.eclipse.swt.widgets.Composite.WM_NOTIFY(Composite.java:642)\n\n\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2814)\n\n\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:2365)\n\n\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n\n\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1236)\n\n\n\tat org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:156)\n\n\n\tat org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:1502)\n\n\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2797)\n\n\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:2365)\n\n\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\n\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1303)\n\n\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1547)\n\n\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\n\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\n\n\tat org.eclipse.core.internal.boot.InternalBootLoader.\nrun(InternalBootLoader.java:845)\n\n\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\n\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n\n\n\tat sun.reflect.DelegatingMethodAccessorImpl.\ninvoke(DelegatingMethodAccessorImpl.java:25)\n\n\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\n\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\n\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\n\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)",
    "Cast exception occurs in JDT/UI",
    "This can\u0027t be done (currently). The cast exceptions occurs from the fact the \nthe JavaElementSorter assumes that the objects to be sorted are of type \nIJavaElement. I guess this is not the case for your own elements.\n\nFor 2.1 there is nothing we can do here.",
    "No action planned to support non Java element sorting in the \nJavaElementSorter. You have to write your own sorter. ",
    "I\u0027m actually not sure whether the problem is really connected to the sorter. \nThe problem occures in case a classpath container cannot be resolved or does \nnot exist. In either case I do not insert anything objects into the java model \nthat I created using non public api and I would never insert my objects of my \nown classes into the java model. Because of that the problem seams to be \nlocated inside the classpath resolving mechanism and is not really a ui problem.",
    "One possibility would be that somehow an object of type ClassPathContainer \ntype gets passed to the JavaElementSorter.",
    "Erich, can you comment on this possibility.",
    "I have just observed the identical stack trace when bringing up the project \nwith unresolvable ClassPath Containers. Having debuged this I can see this \nhappening only if you have more than 1 unresolved container. The following \ncode in JavaElementSorter (193-210) is at fault:\n\n------\nif (cat1 \u003d\u003d PACKAGEFRAGMENTROOTS) {\n\tIPackageFragmentRoot root1\u003d getPackageFragmentRoot(e1);\n\tIPackageFragmentRoot root2\u003d getPackageFragmentRoot(e2);\n\tif (!root1.getPath().equals(root2.getPath())) {\n\t\tint p1\u003d getClassPathIndex(root1);\n\t\tint p2\u003d getClassPathIndex(root2);\n\t\tif (p1 !\u003d p2) {\n\t\t\treturn p1 - p2;\n\t\t}\n\t}\n}\n// non - java resources are sorted using the label from the viewers label \nprovider\nif (cat1 \u003d\u003d PROJECTS || cat1 \u003d\u003d RESOURCES || cat1 \u003d\u003d RESOURCEFOLDERS || cat1 \n\u003d\u003d STORAGE || cat1 \u003d\u003d OTHERS) {\n\treturn compareWithLabelProvider(viewer, e1, e2);\n}\n\t\t\nString name1\u003d ((IJavaElement) e1).getElementName();\nString name2\u003d ((IJavaElement) e2).getElementName();\n\n----\n\nNote that the if(cat1\u003d\u003dPACKAGEFRAGMENTROOT) has an ability to continue the \nlogic in some cases, this will invariably fail on the line that casts e1 to \nIJavaElement when e1 is ClassPathContainer. This I think should be fixed by \nmaking sure that inside that if there\u0027s alway a return statement.\n\nThe reason why that if falls through in this case is because root1.getPath() \ncompares equals to root2.getPath as both of these are dummy \"Non-Resolvable\" \nentries as created by JavaElementSorter.getPackageFragmentRoot itself.\n\n",
    "*** Bug 41210 has been marked as a duplicate of this bug. ***",
    "Still getting this exception in 2.1.2 and it could been have fixed long before \nthe 2.1.2 release.",
    "Fixed the JavaElementSorter to handle this case. Adapted the \nPackageExplorerContentProvider to filter out non resolvable containers. This \nis consistent with the way we handle class path variables. \n\n(Gunnar bug fix reminders are good - patches are even better...)",
    "Will this be in 2.1.3?",
    "it didn\u0027t make it into 2.1.3"
  ],
  "commentCreationDates": [
    "2003-03-24T14:10:28+01:00",
    "2003-03-24T14:19:58+01:00",
    "2003-03-24T15:02:42+01:00",
    "2003-05-08T12:24:31+02:00",
    "2003-05-08T13:12:23+02:00",
    "2003-05-08T14:15:18+02:00",
    "2003-05-08T14:15:51+02:00",
    "2003-08-05T22:14:18+02:00",
    "2003-08-26T10:57:46+02:00",
    "2003-12-04T07:28:30+01:00",
    "2003-12-07T20:45:00+01:00",
    "2004-03-02T13:30:16+01:00",
    "2004-03-02T14:36:51+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.jdt.ui.JavaElementSorter.compare",
          "source": "JavaElementSorter.java:209"
        },
        {
          "method": "org.eclipse.jface.viewers.ViewerSorter$1.compare",
          "source": "ViewerSorter.java:169"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1237"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1245"
        },
        {
          "method": "java.util.Arrays.sort",
          "source": "Arrays.java:1185"
        },
        {
          "method": "org.eclipse.jface.viewers.ViewerSorter.sort",
          "source": "ViewerSorter.java:167"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getSortedChildren",
          "source": "StructuredViewer.java:562"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer. java:301"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:289"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand",
          "source": "AbstractTreeViewer.java:697"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded",
          "source": "AbstractTreeViewer.java:709"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java: 177"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:865"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:849"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.wmNotifyChild",
          "source": "Tree.java:1894"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_NOTIFY",
          "source": "Control.java:3814"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_NOTIFY",
          "source": "Composite.java:642"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2814"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2365"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1236"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.callWindowProc",
          "source": "Tree.java:156"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN",
          "source": "Tree.java:1502"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2797"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2365"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1303"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1547"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "35574",
      "date": "2003-03-24T14:10:28+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "35574",
  "bugId": "35574",
  "date": "2003-03-24T14:10:28+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}