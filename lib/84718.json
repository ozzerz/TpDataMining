{
  "comments": [
    "i200502080800\njava.fullversion\u003dJ2RE 1.4.2 IBM J9 2.2 Windows XP x86-32 j9n142-20040917 (JIT\nenabled)\nJ9VM - 20040916_0908_lHdSMR\nJIT  - r7_level20040915_1801\n\nGot the following NPE during code assist. \n\n\n!ENTRY org.eclipse.ui 4 4 2005-02-08 12:35:13.389\n!MESSAGE The command for the key you pressed failed\n\n!ENTRY org.eclipse.ui 4 0 2005-02-08 12:35:13.451\n!MESSAGE The command for the key you pressed failed\n!STACK 0\njava.lang.NullPointerException\n\tat java.lang.String.valueOf(String.java:1297)\n\tat\norg.eclipse.jdt.internal.ui.text.java.ResultCollector.internalAcceptMethod(ResultCollector.java:203)\n\tat\norg.eclipse.jdt.internal.ui.text.java.ResultCollector.accept(ResultCollector.java:690)\n\tat\norg.eclipse.jdt.internal.codeassist.CompletionEngine.findFieldsAndMethods(CompletionEngine.java:1871)\n\tat\norg.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:627)\n\tat\norg.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:1205)\n\tat org.eclipse.jdt.internal.core.Openable.codeComplete(Openable.java:119)\n\tat\norg.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:287)\n\tat\norg.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:280)\n\tat\norg.eclipse.jdt.internal.ui.text.java.JavaCompletionProcessor.internalComputeCompletionProposals(JavaCompletionProcessor.java:358)\n\tat\norg.eclipse.jdt.internal.ui.text.java.JavaCompletionProcessor.computeCompletionProposals(JavaCompletionProcessor.java:332)\n\tat\norg.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1470)\n\tat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:250)\n\tat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.access$7(CompletionProposalPopup.java:247)\n\tat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup$1.run(CompletionProposalPopup.java:206)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:201)\n\tat\norg.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1319)\n\tat\norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:180)\n\tat org.eclipse.ui.texteditor.ContentAssistAction$1.run(ContentAssistAction.java:82)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.texteditor.ContentAssistAction.run(ContentAssistAction.java:80)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:1003)\n\tat org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:181)\n\tat\norg.eclipse.ui.internal.commands.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:73)\n\tat org.eclipse.core.commands.Command.execute(Command.java:260)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:418)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:698)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:741)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:510)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:453)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:229)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:782)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:841)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:866)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:851)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:879)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:875)\n\tat org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1181)\n\tat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3121)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3024)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3450)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1600)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2514)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1622)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1588)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:299)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:227)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:281)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:131)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:261)\n\tat org.eclipse.core.launcher.Main.run(Main.java:817)\n\tat org.eclipse.core.launcher.Main.main(Main.java:801)\n\n\nI was editing org.eclipse.core.internal.content.ContentTypeBuilder (rev 1.11),\nchanging the existing createContentType method to be:\n\n\tprivate ContentType createContentType(IConfigurationElement contentTypeCE) {\n\t\t//TODO: need to ensure the config. element is valid\n\t\tString simpleId \u003d contentTypeCE.getAttributeAsIs(\"id\"); //$NON-NLS-1$\n\t\tbyte priority \u003d parsePriority(contentTypeCE.getAttributeAsIs(\"priority\"));\n//$NON-NLS-1$);\n\t\tString namespace \u003d contentTypeCE.getDeclaringExtension().getNamespace();\n\t\tString name \u003d contentTypeCE.getAttribute(\"name\"); //$NON-NLS-1$\n\t\tString[] fileNames \u003d\nUtil.parseItems(contentTypeCE.getAttributeAsIs(\"file-names\")); //$NON-NLS-1$\n\t\tString[] fileExtensions \u003d\nUtil.parseItems(contentTypeCE.getAttributeAsIs(\"file-extensions\")); //$NON-NLS-1$\n\t\tString baseTypeId \u003d getUniqueId(namespace,\ncontentTypeCE.getAttributeAsIs(\"base-type\")); //$NON-NLS-1$\n\t\tString aliasTargetTypeId \u003d getUniqueId(namespace,\ncontentTypeCE.getAttributeAsIs(\"alias-for\")); //$NON-NLS-1$\t\t\n\t\tString defaultCharset \u003d contentTypeCE.getAttributeAsIs(\"default-charset\");\n//$NON-NLS-1$\n\t\tIConfigurationElement[] propertyCEs;\n\t\tMap defaultProperties \u003d null;\n\t\tif ((propertyCEs \u003d contentTypeCE.getChildren(\"property\")).length \u003e 0) {\n//$NON-NLS-1$\n\t\t\tdefaultProperties \u003d new HashMap();\n\t\t\tfor (int i \u003d 0; i \u003c propertyCEs.length; i++) {\n\t\t\t\tString defaultValue \u003d propertyCEs.\n\t\t\t}\n\t\t}\t\t\n\t\treturn ContentType.createContentType(catalog, namespace, simpleId, name,\npriority, fileExtensions, fileNames, baseTypeId, aliasTargetTypeId,\ndefaultCharset, contentTypeCE);\n\t}\n\nUsed organize imports to import some java.util types, typed the if/for block,\ntried to trigger content assist after:\n\nString defaultValue \u003d propertyCEs.\n\nBut I got an error dialog like the one mentioned in bug 84657 (IAE, here it is a\nNPE) and the log entries above in the log.\n\nI tried agan after closing the editor and reopening it, after rebuilding, after\ndeleting the Java indexes, after restarting Eclipse, after changing the VM to\nSun 1.5, and I can still reproduce the problem.",
    "Ok, this is easily reproducible. The problem is triggered by a user error:\ntrying to use code assist on an expression whose type is an array:\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\targs.\n\t}\n}\n",
    "Not a user error - an array has all the java.lang.Object methods plus a public\nclone method plus a field named \"length\"!\n\nAlready fixed today, but did not make it into the I-build, available \u003e 20050208",
    "Agreed. Not that this matters, but what I actually tried to mean is that I found\nthis by accident, I was actually trying to get the members for the array\ncomponent type instead (but forgot to type the indexing part).",
    "verified that code assist on an array works and returns all Object methods and\nthe \u0027length\u0027 field."
  ],
  "commentCreationDates": [
    "2005-02-08T17:51:49+01:00",
    "2005-02-08T17:59:28+01:00",
    "2005-02-08T18:36:02+01:00",
    "2005-02-08T18:48:16+01:00",
    "2005-02-18T09:37:49+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.lang.String.valueOf",
          "source": "String.java:1297"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ResultCollector.internalAcceptMethod",
          "source": "ResultCollector.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ResultCollector.accept",
          "source": "ResultCollector.java:690"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.findFieldsAndMethods",
          "source": "CompletionEngine.java:1871"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:627"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:1205"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.codeComplete",
          "source": "Openable.java:119"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:287"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:280"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaCompletionProcessor.internalComputeCompletionProposals",
          "source": "JavaCompletionProcessor.java:358"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaCompletionProcessor.computeCompletionProposals",
          "source": "JavaCompletionProcessor.java:332"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals",
          "source": "ContentAssistant.java:1470"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals",
          "source": "CompletionProposalPopup.java:250"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$7",
          "source": "CompletionProposalPopup.java:247"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup$1.run",
          "source": "CompletionProposalPopup.java:206"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals",
          "source": "CompletionProposalPopup.java:201"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions",
          "source": "ContentAssistant.java:1319"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation",
          "source": "CompilationUnitEditor.java:180"
        },
        {
          "method": "org.eclipse.ui.texteditor.ContentAssistAction$1.run",
          "source": "ContentAssistAction.java:82"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.texteditor.ContentAssistAction.run",
          "source": "ContentAssistAction.java:80"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:1003"
        },
        {
          "method": "org.eclipse.ui.commands.ActionHandler.execute",
          "source": "ActionHandler.java:181"
        },
        {
          "method": "org.eclipse.ui.internal.commands.LegacyHandlerWrapper.execute",
          "source": "LegacyHandlerWrapper.java:73"
        },
        {
          "method": "org.eclipse.core.commands.Command.execute",
          "source": "Command.java:260"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:418"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:698"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:741"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:510"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2",
          "source": "WorkbenchKeyboard.java:453"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent",
          "source": "WorkbenchKeyboard.java:229"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:782"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:841"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:866"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:851"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:879"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:875"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.wmChar",
          "source": "Widget.java:1181"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3121"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3024"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3450"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1600"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2514"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1622"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1588"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:299"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:227"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:281"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:131"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:261"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:817"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:801"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "84718",
      "date": "2005-02-08T17:51:49+01:00",
      "product": "JDT",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "84718",
  "bugId": "84718",
  "date": "2005-02-08T17:51:49+01:00",
  "product": "JDT",
  "component": "Text",
  "severity": "normal"
}