{
  "comments": [
    "20021218\n\nI have not been able to reproduce this but a client (cc\u0027ed here) is getting a \nNumberFormat exception whenever we try and get FontMetrics.\n\nHere are all of the stats and the exception\n\n$JAVA_HOME/bin/java -version\njava version \"1.3.1_02\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_02-b02)\nJava HotSpot(TM) Client VM (build 1.3.1_02-b02, mixed mode)\n\n!ENTRY org.eclipse.ui 4 0 Jan 09, 2003 10:20:17.181\n!MESSAGE [9.00 0.00 0.00 9.00]\n!STACK 0\njava.lang.NumberFormatException: [9.00 0.00 0.00 9.00]\n        at java.lang.Integer.parseInt(Integer.java:414)\n        at java.lang.Integer.parseInt(Integer.java:463)\n        at org.eclipse.swt.graphics.FontData.setXlfd(FontData.java:477)\n        at org.eclipse.swt.graphics.FontData.motif_new(FontData.java:337)\n        at org.eclipse.swt.graphics.GC.getFontMetrics(GC.java:1922)\n        at org.eclipse.jdt.internal.ui.preferences.ColorEditor.computeImageSize\n(\nColorEditor.java:111)\n        at org.eclipse.jdt.internal.ui.preferences.ColorEditor.\u003cinit\u003e\n(ColorEdito\nr.java:40)\n        at \norg.eclipse.jdt.internal.ui.preferences.JavaEditorPreferencePage.crea\nteAppearancePage(JavaEditorPreferencePage.java:652)\n        at \norg.eclipse.jdt.internal.ui.preferences.JavaEditorPreferencePage.crea\nteContents(JavaEditorPreferencePage.java:938)\n        at org.eclipse.jface.preference.PreferencePage.createControl\n(PreferenceP\nage.java:209)\n        at \norg.eclipse.jdt.internal.ui.preferences.JavaEditorPreferencePage.crea\nteControl(JavaEditorPreferencePage.java:322)\n        at org.eclipse.jface.preference.PreferenceDialog.showPage\n(PreferenceDial\nog.java:963)\n        at org.eclipse.jface.preference.PreferenceDialog$7.run\n(PreferenceDialog.\njava:456)\n        at org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:65)\n        at org.eclipse.jface.preference.PreferenceDialog$6.widgetSelected\n(Prefer\nenceDialog.java:449)\n        at org.eclipse.jface.util.OpenStrategy.firePostSelectionEvent\n(OpenStrate\ngy.java:192)\n        at org.eclipse.jface.util.OpenStrategy.access$4(OpenStrategy.java:187)\n        at org.eclipse.jface.util.OpenStrategy$3.run(OpenStrategy.java:327)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:31)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.ja\nva:94)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1803)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1619)\n        at org.eclipse.jface.window.Window.runEventLoop(Window.java:561)\n        at org.eclipse.jface.window.Window.open(Window.java:541)\n        at org.eclipse.ui.internal.OpenPreferencesAction.run\n(OpenPreferencesActi\non.java:47)\n        at org.eclipse.jface.action.Action.runWithEvent(Action.java:769)\n        at \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:411)\n        at org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(Act\nionContributionItem.java:365)\n        at org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContri\nbutionItem.java:356)\n        at \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handle\nEvent(ActionContributionItem.java:48)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:855)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1825)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1616)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1446)\n        at org.eclipse.ui.internal.Workbench.run(Workbench.java:1429)\n        at org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoa\nder.java:845)\n        at org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:247)\n        at org.eclipse.core.launcher.Main.run(Main.java:703)\n        at org.eclipse.core.launcher.Main.main(Main.java:539)",
    "Andrew Hobson has also found this in an SWT example. Andrew please let us know \nwhich example you found it in.",
    "Also see an example at http://bugs.eclipse.org/bugs/attachment.cgi?\nid\u003d2946\u0026action\u003dview",
    "I\u0027m having a bad morning creating coherent communication.  I didn\u0027t find the\nexact code in the sample articles, but I was able to use the sample article to\nbuild a sample application.  I then used the CVS repository to replicate the\ncode that did a getFontMetric call.\n\nI\u0027m sorry for writing such confusing comments.",
    "More info would be appreciate:\nWhich is the locale you\u0027re running ?\nWhat is the font that you are trying to get the metric ? It maybe a font name \ndoes not have  a good xlfd.\n\nGrant to investigate.\n\n\n",
    "I don\u0027t know much about this, but the test case does\n\nJFaceResources.getFontRegistry().get(JFaceResources.DEFAULT_FONT);\n\nIf it is a problem with the font, it\u0027s a problem with the default.\n",
    "Andrew I am moving our conversation to this PR so that the SWT guys get\nnotifications as well.\n\nAndrew has discovered that \n\nJFaceResources.getFontRegistry().get(JFaceResources.DEFAULT_FONT) causes this\nerror \n\nbut \n\nJFaceResources.getDefaultFont() does not.\n\nThe difference between the two calls is that the first one loads a font from a\nFontData definition and the second one asks an SWT shell for its font.\n\nAndrew could you please also try\n\n\nJFaceResources.getFontRegistry().get(JFaceResources.DIALOG_FONT)\nJFaceResources.getFontRegistry().get(JFaceResources.BANNER_FONT)\nJFaceResources.getFontRegistry().get(JFaceResources.HEADER_FONT)\nJFaceResources.getFontRegistry().get(JFaceResources.TEXT_FONT)\nJFaceResources.getFontRegistry().get(JFaceResources.DIALOG_FONT)\n\n",
    "Created an attachment (id\u003d3101)\nAndrew Hobsons font test file\n",
    "I am attaching anotehr test file. Andrew please run this and let me know if you\nget those Number format exceptions. If you could also paste the output from it\ninto the PR that would be helpful as well.\n\n",
    "Created an attachment (id\u003d3105)\nFontData test that should show the problem for Andrews machine\n\nThis test case creates all of the FontDatas JFace uses using the same API.\nRequires JFace",
    "Created an attachment (id\u003d3106)\nResults of running FontDataTest\n\nFontDataTest ran successfully.\tI\u0027ve attached the results.\n"
  ],
  "commentCreationDates": [
    "2003-01-10T13:48:30+01:00",
    "2003-01-10T14:26:48+01:00",
    "2003-01-10T14:27:28+01:00",
    "2003-01-10T15:58:34+01:00",
    "2003-01-11T00:28:53+01:00",
    "2003-01-22T19:15:43+01:00",
    "2003-01-23T15:18:46+01:00",
    "2003-01-23T15:19:36+01:00",
    "2003-01-23T16:25:37+01:00",
    "2003-01-23T16:27:02+01:00",
    "2003-01-23T16:39:18+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NumberFormatException",
      "message": "[9.00 0.00 0.00 9.00]",
      "elements": [
        {
          "method": "java.lang.Integer.parseInt",
          "source": "Integer.java:414"
        },
        {
          "method": "java.lang.Integer.parseInt",
          "source": "Integer.java:463"
        },
        {
          "method": "org.eclipse.swt.graphics.FontData.setXlfd",
          "source": "FontData.java:477"
        },
        {
          "method": "org.eclipse.swt.graphics.FontData.motif_new",
          "source": "FontData.java:337"
        },
        {
          "method": "org.eclipse.swt.graphics.GC.getFontMetrics",
          "source": "GC.java:1922"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.ColorEditor.computeImageSize",
          "source": " ColorEditor.java:111"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.ColorEditor.\u003cinit\u003e",
          "source": "ColorEdito r.java:40"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.JavaEditorPreferencePage.createAppearancePage",
          "source": "JavaEditorPreferencePage.java:652"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.JavaEditorPreferencePage.createContents",
          "source": "JavaEditorPreferencePage.java:938"
        },
        {
          "method": "org.eclipse.jface.preference.PreferencePage.createControl",
          "source": "PreferenceP age.java:209"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.JavaEditorPreferencePage.createControl",
          "source": "JavaEditorPreferencePage.java:322"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog.showPage",
          "source": "PreferenceDial og.java:963"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog$7.run",
          "source": "PreferenceDialog. java:456"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:65"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog$6.widgetSelected",
          "source": "Prefer enceDialog.java:449"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.firePostSelectionEvent",
          "source": "OpenStrate gy.java:192"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$4",
          "source": "OpenStrategy.java:187"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$3.run",
          "source": "OpenStrategy.java:327"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:31"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.ja va:94"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:1803"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1619"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:561"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:541"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesActi on.java:47"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:769"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:411"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "Act ionContributionItem.java:365"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContri butionItem.java:356"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:48"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:855"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1825"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1616"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1446"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1429"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoa der.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:247"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:703"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "29290",
      "date": "2003-01-10T13:48:30+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "29290",
  "bugId": "29290",
  "date": "2003-01-10T13:48:30+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}