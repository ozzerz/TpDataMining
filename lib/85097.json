{
  "comments": [
    "Maybe I\u0027m doing something stupid. But at least AspectJ should tell me why I am \nstupid rather than puke exceptions. :). Here is how to reproduce:\nclass Test {\n\tprivate int count \u003d0;\n\tpublic void dostuff(){\n\t\tcount++;\n\t\tSystem.out.println(\"do stuff\");\n\t}\n\tpublic static void main(String[] args) {\n\t\tTest t \u003d new Test();\n\t\tTest t2 \u003d new Test();\n\t\tt.dostuff();\n\t\tt2.dostuff();\n\t}\n}\n\ninterface Threaded {\n}\n\n\npublic abstract aspect ParentA {\n\tdeclare parents: Test implements Threaded;\n\tprivate boolean Threaded.breakit(){\n\t\treturn false;\n\t}\n\t \n\t//boolean breakit(){ return true};\n\tvoid around(Test t):execution(* Test.dostuff(..))\u0026\u0026this(t){\n\t\twhile(!t.breakit()){\n\t\t\tproceed(t);\n\t\t\ttry{\n\t\t\t\tThread.sleep(1000);\n\t\t\t}catch(Exception e){\n\t\t\t\t\n\t\t\t}\n\t\t} \n\t\tSystem.out.println(\"parent a\");\n\t}\n}\n\nprivileged aspect Son extends ParentA{\n\tafter()  returning (boolean ret):\n\t\tcall(* Threaded+.breakit())//\u0026\u0026target(t)\n\t{\n\t}\n}",
    "Sorry, forgot to attach the error message:\ntrouble in:\nABORT\n\nException thrown from AspectJ 1.5.0 M1\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n        at org.aspectj.weaver.ResolvedTypeX.isConvertableFrom\n(ResolvedTypeX.java\n:131)\n        at org.aspectj.weaver.bcel.Utility.appendConversion(Utility.java:241)\n        at org.aspectj.weaver.bcel.BcelVar.appendLoadAndConvert\n(BcelVar.java:61)\n\n        at org.aspectj.weaver.bcel.BcelAdvice.getAdviceArgSetup\n(BcelAdvice.java:\n314)\n        at org.aspectj.weaver.bcel.BcelAdvice.getAdviceInstructions\n(BcelAdvice.java:270)\n        at org.aspectj.weaver.bcel.BcelShadow.weaveAfterReturning\n(BcelShadow.java:1380)\n        at org.aspectj.weaver.bcel.BcelAdvice.implementOn(BcelAdvice.java:138)\n        at org.aspectj.weaver.Shadow.implementMungers(Shadow.java:451)\n        at org.aspectj.weaver.Shadow.implement(Shadow.java:334)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.implement\n(BcelClassWeaver.java:1157)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave\n(BcelClassWeaver.java:362)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave\n(BcelClassWeaver.java:83)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:742)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump\n(BcelWeaver.java:707)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify\n(BcelWeaver.java:634)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:565)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave\n(AjCompilerAdapter.java:243)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling\n(AjCompilerAdapter.java:118)\n        at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile\n(Compiler.java:383)\n        at \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation\n(AjBuildManager.java:682)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuild\nManager.java:168)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBu\nildManager.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:109)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)\n        at org.aspectj.tools.ajc.Main.run(Main.java:291)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:227)\n        at org.aspectj.tools.ajc.Main.main(Main.java:80)\n\n\n1 fail|abort",
    "I think it is the \u0027boolean\u0027 in the after() returning advice that is causing the\nproblem - I remember looking at a bug in this area (when primitive types are\ninvolved) that arose due to the changes for autoboxing.  However, although this\nproblem does occur in 1.5.0M1, it is already fixed in the dev release of AspectJ\n1.5.0 available from the download page.",
    "fixed as per andy\u0027s comment on 02-13",
    "*** Bug 83930 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2005-02-13T02:02:33+01:00",
    "2005-02-13T02:06:36+01:00",
    "2005-02-13T15:30:29+01:00",
    "2005-03-23T14:41:41+01:00",
    "2005-04-12T12:09:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedTypeX.isConvertableFrom",
          "source": "ResolvedTypeX.java :131"
        },
        {
          "method": "org.aspectj.weaver.bcel.Utility.appendConversion",
          "source": "Utility.java:241"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelVar.appendLoadAndConvert",
          "source": "BcelVar.java:61"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.getAdviceArgSetup",
          "source": "BcelAdvice.java: 314"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.getAdviceInstructions",
          "source": "BcelAdvice.java:270"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.weaveAfterReturning",
          "source": "BcelShadow.java:1380"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.implementOn",
          "source": "BcelAdvice.java:138"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implementMungers",
          "source": "Shadow.java:451"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implement",
          "source": "Shadow.java:334"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.implement",
          "source": "BcelClassWeaver.java:1157"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:362"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:83"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:742"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:707"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:634"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:565"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:243"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:118"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:383"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:682"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuild Manager.java:168"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:109"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:60"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:291"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:227"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:80"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "85097",
      "date": "2005-02-13T02:06:36+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    }
  ],
  "groupId": "85097",
  "bugId": "85097",
  "date": "2005-02-13T02:02:33+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "major"
}