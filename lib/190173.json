{
  "comments": [
    "Build ID: HEAD\n\nCreating a new managed project that does not allready exist causes a NPE.\n\nStacktrace:\nUnhandled event loop exception during blocked modal context.\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)\n\tat org.eclipse.swt.SWT.error(SWT.java:3547)\n\tat org.eclipse.swt.SWT.error(SWT.java:3465)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3296)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2974)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:158)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:326)\n\tat org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:934)\n\tat org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard.invokeRunnable(CDTCommonProjectWizard.java:163)\n\tat org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard.getProject(CDTCommonProjectWizard.java:141)\n\tat org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard.performFinish(CDTCommonProjectWizard.java:177)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:742)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:373)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:616)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1101)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3319)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2971)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.ui.actions.NewProjectAction.run(NewProjectAction.java:116)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:498)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1101)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3319)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2971)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1144)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.cdt.managedbuilder.templateengine.processes.NewManagedProject.process(NewManagedProject.java:73)\n\tat org.eclipse.cdt.core.templateengine.process.Process.process(Process.java:162)\n\tat org.eclipse.cdt.core.templateengine.process.ConditionalProcessGroup.process(ConditionalProcessGroup.java:229)\n\tat org.eclipse.cdt.core.templateengine.process.TemplateProcessHandler.processAll(TemplateProcessHandler.java:67)\n\tat org.eclipse.cdt.ui.templateengine.Template$1.execute(Template.java:191)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:101)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:113)\n\tat org.eclipse.cdt.ui.templateengine.Template.executeTemplateProcesses(Template.java:201)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSWizardHandler.doPostProcess(MBSWizardHandler.java:457)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSWizardHandler.createProject(MBSWizardHandler.java:442)\n\tat org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard$2.run(CDTCommonProjectWizard.java:222)\n\tat org.eclipse.ui.internal.UILockListener.doPendingWork(UILockListener.java:155)\n\tat org.eclipse.ui.internal.UISynchronizer$2.run(UISynchronizer.java:126)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 48 more",
    "Created an attachment (id\u003d69496)\nexample template.xml\n\nThe first project (the exe) exists allready when the process is executed, I guess the project was created by the wizard. The second NewManagedProject-Process (the so) causes the NPE.",
    "Hi\nI looked into the code of the method NewManagedProject.process() an found this line of code. List configs \u003d (List) template.getValueStore().get(TemplateEngineHelper.CONFIGURATIONS);\nAccording to the commented generic leftovers the Map valuestore contains Strings as keys and values so this cast would create a ClassCastException if the map would contain a value for the key TemplateEngineHelper.CONFIGURATIONS.\n",
    "I am not very sure whether the proposed template is a valid use case. It tries to create two projects from one template. \nEventhough template processes are designed to call any number of times within the same template, the behaviour is slightly changed with the integration of template engine into new project model. The main project will be created by the CDT project wizard process and it creates only one project per wizard invokation.\n\nIf there is an agreement on creating multiple projects from a single template is a legitimate use case, then the one but missing from existing implementation is sharing the configurations information for multiple projects for the same template. I have attached a proposed patch for this to work.\n",
    "Created an attachment (id\u003d69992)\nFix for the use case of creating multiple projects from a single template\n\n",
    "Patch is applied. Please check.\n\nThe minor remark for UI part of patch:\n    In method doPostProcess(IProject prj)\n    new code put below existing check:\n        if(template \u003d\u003d null)\n\t    return;\n",
    "Works now, thanks.",
    "(In reply to comment #5)\n\u003e Patch is applied. Please check.\n\u003e The minor remark for UI part of patch:\n\u003e     In method doPostProcess(IProject prj)\n\u003e     new code put below existing check:\n\u003e         if(template \u003d\u003d null)\n\u003e             return;\n\nHi Oleg. Thanks for committing this patch. Can you please aslo add a check for \"cfgs !\u003d null\" in the same function. ie. add a check around forloop as shown here.\n\t\tif (cfgs !\u003d null) {  //Check for cfgs not to be null\n\t\t\tfor(int i \u003d 0; i \u003c cfgs.length; i++){\n\t\t\t\tconfigs.add(cfgs[i].getConfiguration());\n\t\t\t}\n\t\t}\n\n\nas some template projects might not have any configurations associated with it. \nFor e.g. templates for makefile projects might not have any configurations.\n\nWithout that check the makefile projects creation from templates result in NPE.\n\nRegards,\n-Bala\n\n"
  ],
  "commentCreationDates": [
    "2007-05-31T13:16:50+02:00",
    "2007-05-31T13:22:00+02:00",
    "2007-05-31T13:51:32+02:00",
    "2007-06-04T19:23:19+02:00",
    "2007-06-04T19:30:14+02:00",
    "2007-06-05T11:13:11+02:00",
    "2007-06-06T09:22:26+02:00",
    "2007-06-06T18:32:53+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3547"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3465"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3296"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2974"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.block",
          "source": "ModalContext.java:158"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:326"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:934"
        },
        {
          "method": "org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard.invokeRunnable",
          "source": "CDTCommonProjectWizard.java:163"
        },
        {
          "method": "org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard.getProject",
          "source": "CDTCommonProjectWizard.java:141"
        },
        {
          "method": "org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard.performFinish",
          "source": "CDTCommonProjectWizard.java:177"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:742"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:373"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:616"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:227"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1101"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3319"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2971"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.actions.NewProjectAction.run",
          "source": "NewProjectAction.java:116"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:498"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1101"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3319"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2971"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.cdt.managedbuilder.templateengine.processes.NewManagedProject.process",
            "source": "NewManagedProject.java:73"
          },
          {
            "method": "org.eclipse.cdt.core.templateengine.process.Process.process",
            "source": "Process.java:162"
          },
          {
            "method": "org.eclipse.cdt.core.templateengine.process.ConditionalProcessGroup.process",
            "source": "ConditionalProcessGroup.java:229"
          },
          {
            "method": "org.eclipse.cdt.core.templateengine.process.TemplateProcessHandler.processAll",
            "source": "TemplateProcessHandler.java:67"
          },
          {
            "method": "org.eclipse.cdt.ui.templateengine.Template$1.execute",
            "source": "Template.java:191"
          },
          {
            "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
            "source": "WorkspaceModifyOperation.java:101"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1797"
          },
          {
            "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
            "source": "WorkspaceModifyOperation.java:113"
          },
          {
            "method": "org.eclipse.cdt.ui.templateengine.Template.executeTemplateProcesses",
            "source": "Template.java:201"
          },
          {
            "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSWizardHandler.doPostProcess",
            "source": "MBSWizardHandler.java:457"
          },
          {
            "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSWizardHandler.createProject",
            "source": "MBSWizardHandler.java:442"
          },
          {
            "method": "org.eclipse.cdt.ui.wizards.CDTCommonProjectWizard$2.run",
            "source": "CDTCommonProjectWizard.java:222"
          },
          {
            "method": "org.eclipse.ui.internal.UILockListener.doPendingWork",
            "source": "UILockListener.java:155"
          },
          {
            "method": "org.eclipse.ui.internal.UISynchronizer$2.run",
            "source": "UISynchronizer.java:126"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "190173",
      "date": "2007-05-31T13:16:50+02:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    }
  ],
  "groupId": "190173",
  "bugId": "190173",
  "date": "2007-05-31T13:16:50+02:00",
  "product": "CDT",
  "component": "cdt-core",
  "severity": "normal"
}