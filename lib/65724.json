{
  "comments": [
    "I found this in my log while testing RC1. Not sure what I was doing at the time\nor how to reproduce. Go ahead and close this if the stack trace isn\u0027t useful.\n\n!ENTRY org.eclipse.ui 4 0 Jun 03, 2004 17:06:15.958\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.ui.internal.UILockListener.doPendingWork(UILockListener.java(Compiled\nCode))\n\tat org.eclipse.ui.internal.UISynchronizer$1.run(UISynchronizer.java:33)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java(Inlined Compiled\nCode))\n\tat\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java(Compiled\nCode))\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java(Inlined\nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:334)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:128)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)\n\tat java.lang.reflect.Method.invoke(Method.java:386)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:638)\n\tat org.eclipse.core.launcher.Main.main(Main.java:622)",
    "work.getRunnable() can return null. I believe the fix should be to add a null check:\n\nRunnable job \u003d work.getRunnable();\nif (job !\u003d null)\n  job.run();\n\nJohn please confirm and move to UI for implementation.",
    "I agree that is the only place where an NPE seems to be possible. However, the\nonly place where Semaphore is instantiated it is impossible for the runnable to\nbe null:\n\nFrom UISynchronizer.syncExec:\n\nif ((runnable \u003d\u003d null) || lockListener.isUI() || !lockListener.isLockOwner()) {\n\tsuper.syncExec(runnable);\n\treturn;\n}\nSemaphore work \u003d new Semaphore(runnable);\nwork.setOperationThread(Thread.currentThread());\nlockListener.addPendingWork(work);\n...\n\nSo, the only thing I can think of is a JIT bug, which have been known to cause\nNPEs. However, the guard code in UILockListener.doPendingWork suggested by DJ is\nworth doing, since Semaphore allows the runnable to be null. Moving to UI for\nconsideration. I don\u0027t think this is \"critical\".",
    "Created an attachment (id\u003d12908)\nPatch with some javadoc fixes as well.\n",
    "Fix released as suggested",
    "Marking closed"
  ],
  "commentCreationDates": [
    "2004-06-04T16:55:53+02:00",
    "2004-06-11T20:23:31+02:00",
    "2004-06-11T20:37:35+02:00",
    "2004-06-30T15:55:37+02:00",
    "2004-06-30T20:39:14+02:00",
    "2005-05-10T20:56:22+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.UILockListener.doPendingWork",
          "source": "UILockListener.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.UISynchronizer$1.run",
          "source": "UISynchronizer.java:33"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:253"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:334"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:128"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:79"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:41"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:386"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:638"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:622"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "65724",
      "date": "2004-06-04T16:55:53+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "65724",
  "bugId": "65724",
  "date": "2004-06-04T16:55:53+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}