{
  "comments": [
    "We seem to be getting an exception while transfering the adapter to the remote\nmachine. This transfering uses the same code as eclipse LTA (we call the API to\nmove the adapter to the remote machine). \n\nIt would be good if we could get some inputs from the RAC folks on this.\n\nCODE that makes this call:\n\npublic static String sendAdapter(Node node, Map table, String sourceFile, String\ndestinationFile) throws Exception{\t\t\n\t\tIFileManager fileManager \u003d null;\t\t\t\t\n\t\tString targetDirectory \u003d WindowsAdapterRootDir;\n\t\tString targetFile \u003d targetDirectory+destinationFile;\n\t\tString returnValue \u003d \"\";\n\n\t\ttry{\n\t\t\ttry{\n\t\t\t\tfileManager \u003d FileManagerFactory.getInstance().create(node.getConnection());\n\t\t\t}catch(Exception e){\n\t\t\t\tthrow new FileTransferException(e);\n\t\t\t}\n\t\t\t\n\t\t\t// Throw an exception if fileManager is null.\n\t\t\tif(fileManager\u003d\u003dnull){\t\t\t\t\n\t\t\t\tthrow new FileTransferException(LogUIMessages._100);\n\t\t\t}\n\t\t\t\n\t\t\t// bugzilla 114673: If the FileManager is the extended version then use the\nfeature for\n\t\t\t// transferring a temporary file by specifying a relative path for the target\nfile.\n\t\t\tif (fileManager instanceof IFileManagerExtended) {\n\t\t\t\tIFileManagerExtended fManager \u003d (IFileManagerExtended)fileManager;\n\t\t\t\tFileIdentifierList srcList \u003d FileIdentifierList.create(sourceFile);\n\t\t\t\tFileIdentifierList tarList \u003d FileIdentifierList.create(destinationFile);\n\t\t\t\ttry {\n\t\t\t\t\tfManager.putFile(srcList, tarList);\n\t\t\t\t\treturnValue \u003d tarList.get(0);\n\t\t\t\t}\n\t\t\t\tcatch (ServerNotAvailableException e0){\n\t\t\t\t\t//throwing to be caught by the next level exception handler\n\t\t\t\t\tthrow e0;\n\t\t\t\t}\n\t\t\t\tcatch (Exception e) {\n\t\t\t\t\t// If the file transfer failed then try to transfer the pre 4.1 way.  Perhaps\n\t\t\t\t\t// a pre 4.1 RAC is running on the remote machine.  Note, if a pre 4.1 RAC\nis running, \n\t\t\t\t\t// IFileMangagerExtended.putFile() throws an IOException.\n\t\t\t\t\t\n\t\t\t\t\t// Try importing the pre 4.1 way assuming a pre 4.1 RAC\n\t\t\t\t\tfileManager.putFile(sourceFile, targetFile);\n\t\t\t\t\treturnValue \u003d targetFile;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t// Else use the legacy FileManager to transfer the file\n\t\t\telse {\n\t\t\t\tfileManager.putFile(sourceFile, targetFile);\n\t\t\t\treturnValue \u003d targetFile;\n\t\t\t}\n\t\t\t\t\t\t\n\t\t}catch(ServerNotAvailableException e0){\n\t\t\tUtilities.printStackTrace(e0);\n\t\t\tthrow new FileTransferException(e0);\n\t\t}\n\t\tcatch (FileTransferException fte) {\n\t\t\tUtilities.printStackTrace(fte);\n\t\t\tthrow fte;\n\t\t}\n\t\tcatch (Exception e1) {\n\t\t\ttargetDirectory \u003d UnixAdapterRootDir; \n\t\t\ttargetFile \u003d targetDirectory+destinationFile;\n\n\t\t\ttry{\n\t\t\t\tfileManager.putFile(sourceFile, targetFile);\n\t\t\t\treturnValue \u003d targetFile;\n\t\t\t}catch(Exception e2){\n\t\t\t\tUtilities.printStackTrace(e2);\n\t\t\t\tthrow new FileTransferException(e2);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If there is a file transfer returned value for the temporary adapter file on\n\t\t// the remote system then add the directory to the hash table so GLA can\n\t\t// find it on the remote system.\n\t\tif (returnValue !\u003d null \u0026\u0026 returnValue.length() \u003e 0 ) {\n\t\t\t// Get the index of the last path separator character in the adapter file name\n\t\t\tint lastSeparatorIndex \u003d returnValue.lastIndexOf(\u0027/\u0027);\n\t\t\t\n\t\t\tif (lastSeparatorIndex \u003d\u003d -1) {\n\t\t\t\tlastSeparatorIndex \u003d returnValue.lastIndexOf(\u0027\\\\\u0027);\n\t\t\t}\n\t\t\t\n\t\t\t// If there is a path separator character in the file name then use it to\n\t\t\t// get the directory path where the adpater file is located.  Include the\n\t\t\t// last separator character in the path.\n\t\t\tif (lastSeparatorIndex \u003e -1) {\n\t\t\t\ntable.put(LogParserConstants.CONFIG_FILE_ROOT_KEY,returnValue.substring(0,lastSeparatorIndex+1));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// This case should never happen but throw an exception if it does\n\t\t\t\tException fte \u003d new FileTransferException(LogUIMessages._101);\n\t\t\t\tUtilities.printStackTrace(fte);\n\t\t\t\tthrow fte;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t// This case should normally not happen but throw an exception if it does\n\t\t\tException fte \u003d new FileTransferException(LogUIMessages._102);\n\t\t\tUtilities.printStackTrace(fte);\n\t\t\tthrow fte;\n\t\t\t\n\t\t}\n\n\t\treturn returnValue;\n\t}\n\t\n\t\n\tstatic class FileTransferException extends Exception{\n\t\t\n\t\t/**\n\t\t * \n\t\t */\n\t\tprivate static final long serialVersionUID \u003d 3375583192773987380L;\n\n\t\tpublic FileTransferException(){\n\t\t\tsuper();\n\t\t}\n\t\t\n\t\tpublic  FileTransferException(String message) {\n\t\t\tsuper(message);\n\t\t}\n\t\t\n\t    public FileTransferException(String message, Throwable cause) {\n\t        super(message, cause);\n\t    }\n\t    \n\t    public FileTransferException(Throwable cause) {\n\t        super(cause);\n\t    }\n\t    \n\t}\n\nEXCEPTION:\norg.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException:\njava.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServerCommandFactory.java:348)\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServerCommandFactory.java:269)\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.createPutFileCommand(FileServerCommandFactory.java:535)\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:992)\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1056)\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1024)\u0026#xD;\u0026#xA;\u0026#x9;at\norg.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1009)\u0026#xD;\u0026#xA;\u0026#x9;at\ncom.ibm.ac.lt\u003c/values\u003e\n\t\n\u003cvalues\u003e.web.controller.service.util.SCGLAFilterHelper.sendAdapter(SCGLAFilterHelper.java:168)\u0026#xD;\u0026#xA;\u0026#x9;at\ncom.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.addFilterToAdapter(SCGLAFilterHelper.java:133)\u0026#xD;\u0026#xA;\u0026#x9;at\ncom.ibm.ac.lta.web.controller.service.RACManager.importFile(RACManager.java:157)\u0026#xD;\u0026#xA;\u0026#x9;at",
    "The exception is thrown on the client-side (not on the RAC).",
    "This needs to be fixed in 4.2.1.",
    "Which JRE are you using? Can you post your \"java -version\" string? I recommend using the latest since we have seen file server problems caused by Java NIO bugs.",
    "A couple of comments about this:\n\n1) This can\u0027t be fixed in 4.2.1, because 4.2.1 GA\u0027s tomorrow.\n\n2) I\u0027m trying to understand how this could be a blocker, but only found today.  Is this believed to be a regression (i.e. it worked when you tested it before, but it has stopped working?)  The code in question has not changed in two months, and has not changed in the connect code in far longer.\n\nBeyond that, we use the putFile mechanism in TPTP Test all the time, and we don\u0027t see this error.  I wonder if this is a platform or JRE issue.  At a minimum, it would help if you could tell us:\n\n1) What platform is the workbench running on?  What OS?  What JRE version\n\n2) Same questions for the agent controller\n\n3) How easy is it to reproduce this problem?  Does it happen every time, and if not, how often does it happen?\n\nCan you turn on debugging of File System Services on both workbench side and agent controller side and attach the output?  You can do this by setting the following environment variable before starting the Agent Controller and workbench:\n\nSET IBM_JAVA_OPTIONS\u003d-DSHOW_DEBUG\u003dTRUE \n\nThanks.",
    "Created an attachment (id\u003d51161)\nRac service log\n\nRac service log",
    "Hi,\n\nThis is a portal based application, which uses TPTP jars at runtime. \n\nWe tried by setting up SET IBM_JAVA_OPTIONS\u003d-DSHOW_DEBUG\u003dTRUE for both RAC and our application\n\nJava used for the application :\n   java version \"1.4.2\"\n   Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)\n   Classic VM (build 1.4.2, J2RE 1.4.2 IBM Windows 32 build cn142-20060421 (SR5)    \n   (JIT enabled: jitc))\n\nOS : WinXP\n\nJava used for RAC :\n    java version \"1.5.0\"\n    Java(TM) 2 Runtime Environment, Standard Edition (build pwi32dev-20060222a\n    (SR1))\n    IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 Windows XP x86-32     \n    j9vmwi3223-20060222a (JIT enabled)\n    J9VM - 20060220_05389_lHdSMR\n    JIT  - 20060220_2133_r8\n    GC   - 20060214_AA)\n    JCL  - 20060222a\n\nOS : WinXP\n\nThe following error was logged in our log file \n\n\u003cCommonBaseEvent creationTime\u003d\"2006-09-29T10:31:09.734Z\" msg\u003d\"com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper$FileTransferException: org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException: java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.sendAdapter(SCGLAFilterHelper.java:201)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.addFilterToAdapter(SCGLAFilterHelper.java:132)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.RACManager.importFile(RACManager.java:157)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.ServiceController.importLogHelper(ServiceController.java:2480)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.ServiceController.importLog(ServiceController.java:629)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.ui.actions.LogFileImport.execute(LogFileImport.java:325)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.rac.security.ui.ConnectMsg.commandPerformed(ConnectMsg.java:531)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.CommandHandler.handleCommand(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.form.AWInputComponent$EInputComponentCommandListener.co\" severity\u003d\"50\" version\u003d\"1.0.1\"\u003e\n\t\u003cextendedDataElements name\u003d\"Extended text\" type\u003d\"string\"\u003e\n\t\t\u003cvalues\u003ecom.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper$FileTransferException: org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException: java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.sendAdapter(SCGLAFilterHelper.java:201)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.addFilterToAdapter(SCGLAFilterHelper.java:132)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.RACManager.importFile(RACManager.java:157)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.ServiceController.importLogHelper(ServiceController.java:2480)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.ServiceController.importLog(ServiceController.java:629)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.ui.actions.LogFileImport.execute(LogFileImport.java:325)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.rac.security.ui.ConnectMsg.commandPerformed(ConnectMsg.java:531)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.CommandHandler.handleCommand(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.form.AWInputComponent$EInputCo\u003c/values\u003e\n\t\t\u003cvalues\u003eponentCommandListener.commandPerformed(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.form.WForm.callInputCommandListeners(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.form.WForm.handleCommand(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.form.WForm$EFormCallback.handleTrigger(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.trigger.Trigger.process(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.core.trigger.TriggerManager.processTrigger(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.portlet.WclPortletTriggerManager.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.portlet.WclPortletFacade.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.psw.wcl.portlet.WclPortletFacade.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.ui.WebClientPortlet.processAction(WebClientPortlet.java:557)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.ui.portlets.NavigationPortlet.processAction(NavigationPortlet.java:721)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.core.PortletServlet.doDispatch(PortletServlet.java:336)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.core.PortletServlet.doDispatch(P\u003c/values\u003e\n\t\t\u003cvalues\u003ertletServlet.java:258)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.core.PortletServlet.dispatch(PortletServlet.java:174)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.core.PortletServlet.doGet(PortletServlet.java:118)\u0026#xD;\u0026#xA;\u0026#x9;at javax.servlet.http.HttpServlet.service(HttpServlet.java:697)\u0026#xD;\u0026#xA;\u0026#x9;at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:972)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:907)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:118)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:696)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:641)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:475)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.pvc.internal.webcontainer.s\u003c/values\u003e\n\t\t\u003cvalues\u003ervlet.ServletWrapper.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.pvc.internal.webcontainer.servlet.ServletWrapper.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:115)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:606)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.invoke(PortletInvokerImpl.java:143)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.action(PortletInvokerImpl.java:55)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.PortletContainerImpl.doAction(PortletContainerImpl.java:183)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.PortletContainerImpl.processPortletAction(PortletContainerImpl.java:134)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl$1.run(PortletInvokerImpl.java:50)\u0026#xD;\u0026#xA;\u0026#x9;at java.security.AccessController.doPrivileged(AccessController.java:240)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl.invokeProce\u003c/values\u003e\n\t\t\u003cvalues\u003esAction(PortletInvokerImpl.java:48)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.isclite.runtime.action.PortletActionHandlerAction.execute(PortletActionHandlerAction.java:222)\u0026#xD;\u0026#xA;\u0026#x9;at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)\u0026#xD;\u0026#xA;\u0026#x9;at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)\u0026#xD;\u0026#xA;\u0026#x9;at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)\u0026#xD;\u0026#xA;\u0026#x9;at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)\u0026#xD;\u0026#xA;\u0026#x9;at javax.servlet.http.HttpServlet.service(HttpServlet.java:697)\u0026#xD;\u0026#xA;\u0026#x9;at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:972)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:478)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.pvc.internal.webcontainer.servlet.ServletWrapper.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.pvc.internal.webcontainer.servlet.ServletWrapper.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.servle\u003c/values\u003e\n\t\t\u003cvalues\u003e.CacheServletWrapper.handleRequest(CacheServletWrapper.java:92)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:744)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.wsspi.webcontainer.WebContainer.handleRequest(WebContainer.java:91)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.webcontainer.http.HttpConnection.handleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.http.HttpConnection.readAndHandleRequest(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.http.HttpConnection.run(Unknown Source)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:580)\u0026#xD;\u0026#xA;Caused by: org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException: java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServerCommandFactory.java:348)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServerCommandFactory.java:269)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.createPutFile\u003c/values\u003e\n\t\t\u003cvalues\u003eommand(FileServerCommandFactory.java:535)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:992)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1056)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1024)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1009)\u0026#xD;\u0026#xA;\u0026#x9;at com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.sendAdapter(SCGLAFilterHelper.java:175)\u0026#xD;\u0026#xA;\u0026#x9;... 60 more\u0026#xD;\u0026#xA;Caused by: java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.internal.execution.local.control.SecureConnectionImpl.connect(SecureConnectionImpl.java:64)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.internal.execution.local.control.SecureConnectionImpl.create(SecureConnectionImpl.java:226)\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServ\u003c/values\u003e\n\nI have attached the RAC service log\n\nThanks\n\n    ",
    "Is this a regression, or is this new functionality which has never been tested before?  Does this problem happen every time, or only sometimes?\n\nCan you confirm that the problem disappears if you use IBM Java 5 on both the application side and Agent Controller side?  (This has been asserted in offline e-mails, but I\u0027d like confirmation.)",
    "joe,\nWe had GA\u0027ed with the 3.3 tptp earlier and now we are using 4.2.1. With 3.3 we did not seem to have this problem, but with 4.2.1 we have this.\n\n we verified with 4.2 also and we still have the same issue.",
    "Hi Joe,\n\n Tested with both having Java 1.5. one with SR1 and other with SR2. Its not working.\nJava packaged with WAS :  \n \njava version \"1.5.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build pwi32dev-20060328b (SR2)\n)\nIBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 Windows XP x86-32 j9vmwi3223-2006032\n8 (JIT enabled)\nJ9VM - 20060327_05972_lHdSMR\nJIT  - 20060323_1800_r8\nGC   - 20060323_AA)\nJCL  - 20060328\n\n \nJava used for RAC : \n    java version \"1.5.0\"\n    Java(TM) 2 Runtime Environment, Standard Edition (build pwi32dev-20060222a\n    (SR1))\n    IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 Windows XP x86-32     \n    j9vmwi3223-20060222a (JIT enabled)\n    J9VM - 20060220_05389_lHdSMR\n    JIT  - 20060220_2133_r8\n    GC   - 20060214_AA)\n    JCL  - 20060222a\n\n",
    "The fact that it doesn\u0027t work for you from Java 5 to Java 5 is suspicious, since this path is tested all the time by normal TPTP use cases.  It makes me wonder if the problem could be as simple as missing jar files in the classpath of your application, but perhaps that\u0027s wishful thinking.\n\nI\u0027m looking at the code for FileServerCommandFactory, line 348 (where your exception is thrown.)  The code looks like this:\n\n\t\t} catch (Throwable t) {\n\t\t\tthrow new ServerNotAvailableException(t);\n\t\t}\n\nI don\u0027t like this code, but at least it is passing along the root exception in the \"cause\" attribute of the ServerNotAvailableException.  Can you please look at the cause attribute (getCause()) of the ServerNotAvailableException you\u0027re receiving, and print out its stack trace?  \n\nThat should give us a lot more information about why the connect method is failing.",
    "Hi\nThis is the exception we are getting \n\n\njava.lang.NullPointerException\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.internal.execution.local.control.SecureConnectionImpl.connect(SecureConnectionImpl.java:64)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.internal.execution.local.control.SecureConnectionImpl.create(SecureConnectionImpl.java:226)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServerCommandFactory.java:300)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel(FileServerCommandFactory.java:269)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.createPutFileCommand(FileServerCommandFactory.java:535)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:992)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1056)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1024)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat org.eclipse.hyades.execution.local.file.FileManagerExtendedImpl.putFile(FileManagerExtendedImpl.java:1009)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.sendAdapter(SCGLAFilterHelper.java:175)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.addFilterToAdapter(SCGLAFilterHelper.java:132)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.controller.service.RACManager.importFile(RACManager.java:157)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.controller.service.ServiceController.importLogHelper(ServiceController.java:2480)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.controller.service.ServiceController.importLog(ServiceController.java:629)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.ui.actions.LogFileImport.execute(LogFileImport.java:325)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.ac.lta.web.rac.security.ui.ConnectMsg.commandPerformed(ConnectMsg.java:531)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.CommandHandler.handleCommand(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.form.AWInputComponent$EInputComponentCommandListener.commandPerformed(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.form.WForm.callInputCommandListeners(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.form.WForm.handleCommand(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.form.WForm$EFormCallback.handleTrigger(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.trigger.Trigger.process(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.core.trigger.TriggerManager.processTrigger(Unknown Source)\n[9/29/06 20:14:42:544 IST] 00000027 SystemErr     R \tat com.ibm.psw.wcl.portlet.WclPortletTriggerManager.handleRequest(Unknown Sourc",
    "Assigning to Joe since he is investigating. CCing Samson in case something is needed from RAC.",
    "Interesting.  The null pointer exception is happening in code that is trying to\ncreate a *secure* connection to the file transfer service.\n\nIs the RAC running with security?  Since it wasn\u0027t mentioned and it\u0027s disabled by default, I had assumed not.  If so, please retest with security disabled and let me know if it works without security.\n\nThe file transfer service should work with security enabled, of course (albeit much more slowly.)  But if you\u0027re running with security, there are additional concerns.  Are you prompted with eclipse UI to authenticate when you connect to the agent controller?  I can envision problems if your client application is not a workbench, since I believe the authentication mechanism is still tightly coupled with TPTP platform UI code.\n",
    "Hi,\n\nYes , we are trying with security enabled. Tried without security enabled. It works fine.",
    "Are you prompted for authentication when you connect to the secure rac (does it ask for username \u0026 password)?",
    "Yes.. It asks... ",
    "(In reply to comment #12)\n\u003e Assigning to Joe since he is investigating. CCing Samson in case something is\n\u003e needed from RAC.\n\nKarla, why is Joe working on this component?  Does not this belong to the Platform Communications component which Joe does not have committer/developer responsibilities.  I know we (Test project) have took responsibility for this code in the past but we need to have the component owners take ownership moving forward.\n",
    "Rohit -- please pull the source code for the org.eclipse.hyades.ui plugin and set a breakpoint in the ConnectUtil.getClientParms() method.  From what your most recent stack trace shows, it appears that the above method is returning null, which it should not do.  Reasons why this would happen appear to be the absence of registered JSSE providers in your eclipse platform registry, or the inability to create an instance of the registered JSSE provider.\n\nAs an interesting test you can try yourself, try setting the same breakpoint in a full TPTP 4.2.1 driver (connecting to the same secure RAC.)  If this method behaves differently, you\u0027ll have a good clue why it is failing for you.\n",
    "Joe,\nIt does seem to be a problem with the registered JSSE provider getting reset. By setting the JSSE provider the file transfer seems to be working!!!\n\nWe do set the JSSE provider during authentication though. Will look into the authentication code to see if there is any resetting being done on that end once the authentication is done.\n\nThe authentication scheme is something that changed from 3.3 to 4.2 so i guess its something thats done there.",
    "Verified this and found node.setSecurityParams(null); in our code once the secondary node/connection is retrieved.\n\nCommenting out that fixes this issue for us.",
    "I tested all the flows after making this change. and it seems to work fine.\n\nThank you Joe!!! I really appreciate the effort you put into this one.",
    "I also verified that this particular piece of code that was causing the problem was a part of/existed in the 3.3 code base.i.e. this worked in 3.3.\n\nYou can go on and change the status of this defect.",
    "The behavior change from 3.3 to 4.2 is not entirely unexpected, as the 3.3 Hyades Agent Controller did not implement its own JSSE security provider.  Consuming products (incuding the IBM Agent Controller) plugged in their own JSSE providers.  \n\nI\u0027m not sure how it worked in 3.3 when the the securityParams were set to null after connection, but it\u0027s not entirely unexpected that the newly integrated security support in TPTP 4.x differs slightly from the consuming product supplied security support from Hyades 3.3.\n\nI\u0027m glad you got it alol working.",
    "Closing..."
  ],
  "commentCreationDates": [
    "2006-09-28T21:30:58+02:00",
    "2006-09-28T21:32:02+02:00",
    "2006-09-28T21:32:41+02:00",
    "2006-09-28T21:36:18+02:00",
    "2006-09-28T22:30:21+02:00",
    "2006-09-29T12:50:17+02:00",
    "2006-09-29T12:59:54+02:00",
    "2006-09-29T14:07:13+02:00",
    "2006-09-29T14:15:05+02:00",
    "2006-09-29T14:44:58+02:00",
    "2006-09-29T15:08:32+02:00",
    "2006-09-29T16:55:07+02:00",
    "2006-09-29T17:55:55+02:00",
    "2006-09-29T18:00:47+02:00",
    "2006-09-29T18:47:21+02:00",
    "2006-09-29T18:52:02+02:00",
    "2006-09-29T18:53:38+02:00",
    "2006-09-29T20:52:12+02:00",
    "2006-09-29T21:46:20+02:00",
    "2006-10-01T13:16:38+02:00",
    "2006-10-01T14:02:46+02:00",
    "2006-10-01T14:04:39+02:00",
    "2006-10-01T14:08:15+02:00",
    "2006-10-01T22:42:14+02:00",
    "2006-11-16T14:58:31+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException",
      "message": "java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;",
      "elements": [
        {
          "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel",
          "source": "FileServerCommandFactory.java:348"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "159183",
      "date": "2006-09-28T21:30:58+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "blocker"
    },
    {
      "exceptionType": "org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException",
      "message": "java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;",
      "elements": [
        {
          "method": "com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.sendAdapter",
          "source": "SCGLAFilterHelper.java:201"
        }
      ],
      "number": 1,
      "commentIndex": 6,
      "bugId": "159183",
      "date": "2006-09-29T12:59:54+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "blocker"
    },
    {
      "exceptionType": "org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException",
      "message": "java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;",
      "elements": [
        {
          "method": "com.ibm.ac.lta.web.controller.service.util.SCGLAFilterHelper.sendAdapter",
          "source": "SCGLAFilterHelper.java:201"
        }
      ],
      "number": 2,
      "commentIndex": 6,
      "bugId": "159183",
      "date": "2006-09-29T12:59:54+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "blocker"
    },
    {
      "exceptionType": "org.eclipse.hyades.internal.execution.core.file.ServerNotAvailableException",
      "message": "java.lang.NullPointerException\u0026#xD;\u0026#xA;\u0026#x9;",
      "elements": [
        {
          "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.connectSocketChannel",
          "source": "FileServerCommandFactory.java:348"
        }
      ],
      "number": 3,
      "commentIndex": 6,
      "bugId": "159183",
      "date": "2006-09-29T12:59:54+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "blocker"
    }
  ],
  "groupId": "159183",
  "bugId": "159183",
  "date": "2006-09-28T21:30:58+02:00",
  "product": "TPTP Agent Controller",
  "component": "Platform.Communication",
  "severity": "blocker"
}