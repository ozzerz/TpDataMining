{
  "comments": [
    "M200502161722\n\n!ENTRY org.eclipse.ui 4 0 Mar 09, 2005 16:00:44.319\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n        at org.eclipse.swt.widgets.TableItem.getText(TableItem.java:527)\n        at org.eclipse.swt.widgets.TableItem.getText(TableItem.java:502)\n        at org.eclipse.swt.widgets.Item.getNameText(Item.java:119)\n        at org.eclipse.swt.widgets.Widget.toString(Widget.java:1147)\n        at java.lang.String.valueOf(String.java:2177)\n        at java.lang.StringBuffer.append(StringBuffer.java:361)\n        at org.eclipse.swt.events.TypedEvent.toString(TypedEvent.java:96)\n        at org.eclipse.swt.examples.controlexample.Tab.log(Tab.java:738)\n        at org.eclipse.swt.examples.controlexample.Tab$21.handleEvent(Tab.java:711)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:954)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:978)\n\n\nFull log attached.",
    "Created an attachment (id\u003d18608)\nlog\n",
    "What are the steps to recreate?",
    "Billy, is this a serious problem in 3.0.1?  What did you do to make it happen?",
    "To make it happen, you can do the following:\n\n  1. Run the control example as a view\n  2. Switch to the Table tab\n  3. Turn on columns\n  4. Turn on the listeners\n  5. Close eclipse\n\nWhat is happening is that the control example is asking for the text of an item\nin the item\u0027s dispose listener.  This requires some information from the\ncolumns, but the columns have already been disposed.\n\nThis is really a case of bug 4416 (and therefore I do not think we need to fix\nfor 3.0.2), but protecting against this particular NPE is  not hard: Veronika\npoints out that we could dispose the columns after the items (which seems to\nmake more sense anyway).  SN?",
    "Veronika, is the NPE gone?  If so close the bug (I know the deeper dispose \nissue is still outstanding).",
    "Fixed for 3.1.\n\nAlso note, the ControlExample has changed so that the logging of the dispose \nevent catches exceptions - I think this is a mistake.  We should fix the \nproblem of the widgets that are badly disposed before the dispose event is \nprocessed instead.  Catching the exception just masks the problem.\n\nSee Tab.log(event):\n\ncase SWT.Dispose: {\n\ttry {\n\t\ttoString +\u003d new DisposeEvent (event).toString ();\n\t} catch (Exception e) {\n\t\tString string \u003d event.widget.getClass ().getName ();\n\t\tint index \u003d string.lastIndexOf (\u0027.\u0027);\n\t\tif (index !\u003d -1) string \u003d string.substring (index + 1, \nstring.length ());\n\t\ttoString +\u003d \"DisposeEvent{\" + string + \"}\";\n\t}\n\tbreak;\n}",
    "CAR, please change this back or at least print a warning.",
    "I added the check because when I added MenuTab, there was an exception in \nMenu.toString() when the little menu shell was closed. This is because the \nMenuItems are all disposed first (and set to null in the Menu\u0027s items array), \nand then the Menu gets a dispose event and it is asked to print itself... and \nit tries to print its items...\n\nLooking into it further, perhaps it makes more sense to change getNameText() \nin Menu to protect against this case. Currently, the code is:\n\nString getNameText () {\n\tString result \u003d \"\";\n\tMenuItem [] items \u003d getItems ();\n\tint length \u003d items.length;\n\tif (length \u003e 0) {\n\t\tfor (int i\u003d0; i\u003clength-1; i++) {\n\t\t\tresult \u003d result + items [i].getNameText() + \", \";\n\t\t}\n\t\tresult \u003d result + items [length-1].getNameText ();\n\t}\n\treturn result;\n}\n\n\nNote that items [i] are null, so there should be a null check for the lines \nwith items [i] and items [length-1]. Agree?",
    "I think the null check in Menu.getNameText makes sense.",
    "Added null checks to Menu.getNameText so that Menu does not NPE when toString \nis called in dispose.\n\nReverted Tab.log back to previous behavior, i.e. it no longer catches \nException - it just assumes that the toString is ok.\n\nMarking this bug fixed."
  ],
  "commentCreationDates": [
    "2005-03-09T20:14:32+01:00",
    "2005-03-09T20:15:01+01:00",
    "2005-03-10T17:49:56+01:00",
    "2005-03-11T15:22:49+01:00",
    "2005-03-11T15:50:54+01:00",
    "2005-04-08T03:27:25+02:00",
    "2005-04-08T15:16:24+02:00",
    "2005-04-08T17:00:54+02:00",
    "2005-04-08T20:52:33+02:00",
    "2005-04-11T16:09:51+02:00",
    "2005-04-11T20:21:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.TableItem.getText",
          "source": "TableItem.java:527"
        },
        {
          "method": "org.eclipse.swt.widgets.TableItem.getText",
          "source": "TableItem.java:502"
        },
        {
          "method": "org.eclipse.swt.widgets.Item.getNameText",
          "source": "Item.java:119"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.toString",
          "source": "Widget.java:1147"
        },
        {
          "method": "java.lang.String.valueOf",
          "source": "String.java:2177"
        },
        {
          "method": "java.lang.StringBuffer.append",
          "source": "StringBuffer.java:361"
        },
        {
          "method": "org.eclipse.swt.events.TypedEvent.toString",
          "source": "TypedEvent.java:96"
        },
        {
          "method": "org.eclipse.swt.examples.controlexample.Tab.log",
          "source": "Tab.java:738"
        },
        {
          "method": "org.eclipse.swt.examples.controlexample.Tab$21.handleEvent",
          "source": "Tab.java:711"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:954"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:978"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "87559",
      "date": "2005-03-09T20:14:32+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "87559",
  "bugId": "87559",
  "date": "2005-03-09T20:14:32+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}