{
  "comments": [
    "I used 2.1.1 build that was released on Tue, 26 Sep 2006 -- 09:59\n\n\nI get the following NPE error when I try to generate a report that has a XML datasource using the report engine in standalone mode.  I found out that the org.eclipse.birt.report.model plugin does not get loaded to initialize the ODAProviderFactory class.\n\nIf I add the following entry in config.ini I am able to generate the report.\n\norg.eclipse.birt.report.model@2:start\n\njava.lang.NullPointerException\n\tat org.eclipse.birt.report.model.elements.OdaDataSource.setIntrinsicProperty(OdaDataSource.java:201)\n\tat org.eclipse.birt.report.model.core.DesignElement.setProperty(DesignElement.java:1192)\n\tat org.eclipse.birt.report.model.core.DesignElement.setProperty(DesignElement.java:1162)\n\tat org.eclipse.birt.report.model.parser.DesignParseState.setProperty(DesignParseState.java:99)\n\tat org.eclipse.birt.report.model.parser.OdaDataSourceState.parseODADataSourceExtensionID(OdaDataSourceState.java:167)\n\tat org.eclipse.birt.report.model.parser.OdaDataSourceState.parseAttrs(OdaDataSourceState.java:82)\n\tat org.eclipse.birt.report.model.parser.ModuleParserHandler.startElement(ModuleParserHandler.java:167)\n\tat org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n\tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\n\tat org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)\n\tat org.eclipse.birt.report.model.parser.ModuleReader.readModule(ModuleReader.java:90)\n\tat org.eclipse.birt.report.model.parser.DesignReader.read(DesignReader.java:90)\n\tat org.eclipse.birt.report.model.core.DesignSession.openDesign(DesignSession.java:278)\n\tat org.eclipse.birt.report.model.api.SessionHandle.openDesign(SessionHandle.java:291)\n\tat org.eclipse.birt.report.engine.parser.ReportParser.getDesignHandle(ReportParser.java:161)\n\tat org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign(ReportEngineHelper.java:243)\n\tat org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign(ReportEngineHelper.java:191)\n\tat org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign(ReportEngineHelper.java:125)\n\tat org.eclipse.birt.report.engine.api.impl.ReportEngine.openReportDesign(ReportEngine.java:224)\n\tat org.eclipse.tptp.test.report.birt.internal.TabularTPFTestSuiteReportElement.main(TabularTPFTestSuiteReportElement.java:322)",
    "Created an attachment (id\u003d51783)\nbirt report template\n\n",
    "Created an attachment (id\u003d51784)\nxml data source\n\n",
    "I had a try using 2.1.1 build, it\u0027s alright, no NPE occured.\n\nMy steps:\n1. Downloaded your design file and xml source file, modified the design file with setting local path of datasource file.\n2. Unzipped birt-runtime-2_1_1.zip to local. \n3. Set BIRT_HOME in genReport.bat.\n4. In command line, I typed command \"genReport TabularSubReport.rptdesign\"\n\nSo, do you have any special process, that I did not do?\n",
    "I used a main method to generate the report.  Here is the code:\n\n\tpublic static final void main(String argv[]){\n    \ttry {    \t\t\n    \t\tSystem.setProperty(\"BIRT_HOME\",\"D:\\\\development\\\\birt211\\\\birt-runtime-2_1_1\\\\ReportEngine\");\n    \t\t System.setProperty(\"RUN_UNDER_ECLIPSE\",\"false\");   \n    \t\tIReportEngine engine   \u003d null;\n    \t\t\n    \t\ttry{\n    \t\t\tEngineConfig config \u003d new EngineConfig( );\n    \t\t\tconfig.setEngineHome( \"D:\\\\development\\\\birt211\\\\birt-runtime-2_1_1\\\\ReportEngine\" );\n    \t\t\t\t\t\n    \t\t\tPlatform.startup( config );\n    \t\t\tIReportEngineFactory factory \u003d (IReportEngineFactory) Platform\n    \t\t\t\t\t.createFactoryObject( IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY );\n    \t\t\tengine \u003d factory.createReportEngine( config );\n    \t\t\tengine.changeLogLevel(Level.ALL);\n    \t\t\t\t\t\n    \t\t}catch( Exception ex){\n    \t\t\tex.printStackTrace();\n    \t\t}\n//    \t\t Run reports, etc.\n    \t\t\t\t\n//    \t\tSet Render context to handle url and image locataions\n//    \t\tOpen a report design - use design to modify design, retrieve embedded images etc. \n    \t\tIReportRunnable design \u003d engine.openReportDesign(\"D:\\\\development\\\\TPTP-4.3.0-200610090100\\\\eclipse\\\\workspace\\\\org.eclipse.tptp.test.report.birt\\\\templates\\\\new_report.rptdesign\"); \n    \t\tInputStream in \u003d new FileInputStream(new File(\"d:\\\\temp\\\\subtest.xml\"));\n//    \t\tInputStream templateFile \u003d new FileInputStream(new File(\"D:\\\\development\\\\TPTP-4.3.0-200610090100\\\\eclipse\\\\workspace\\\\org.eclipse.tptp.test.report.birt\\\\templates\\\\new_report.rptdesign\"));\n    \t\t\t\t\n//    \t\tCreate task to run the report and render the report\n    \t\tIRunAndRenderTask task \u003d engine.createRunAndRenderTask(design); \n    \t\t\t\t\n//    \t\tSet Render context to handle url and image locataions\n    \t\tHTMLRenderContext renderContext \u003d new HTMLRenderContext();\n    \t\trenderContext.setImageDirectory(\"image\");\n    \t\tHashMap contextMap \u003d new HashMap();\n    \t\tcontextMap.put( EngineConstants.APPCONTEXT_HTML_RENDER_CONTEXT, renderContext );\n    \t\tcontextMap.put(Constants.APPCONTEXT_INPUTSTREAM , in);\n    \t\tcontextMap.put(Constants.APPCONTEXT_CLOSEINPUTSTREAM , \"true\");\n    \t\ttask.setAppContext( contextMap );\n    \t\t\t\t\n//    \t\tSet rendering options - such as file or stream output, \n//    \t\toutput format, whether it is embeddable, etc\n    \t\tHTMLRenderOption options \u003d new HTMLRenderOption();\n    \t\toptions.setOutputFileName(\"c:\\\\temp\\\\pfilter.html\");\n    \t\toptions.setOutputFormat(\"html\");\n    \t\ttask.setRenderOption(options);\n    \t\t\t\t\n    \t\ttask.run();\n\n\n//    \t\t Shut down the engine.\n   \t\t\tengine.shutdown();\n   \t\t\tPlatform.shutdown();    \n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t}\n",
    "Well, could you tell me where have you put this test class?\n\nThe class that contains the \"main\" method, should be in a independent java project. That is, it should not be under any of our birt plugins. Otherwise, the platform can not be loaded correctly.\n\nAnd you should add all libs under \"ReportEngin\\lib\" to the java project manually.\n\nPlease confirm it works fine following above tips. And I will cancel this bug after your confirmation.",
    "And we will add check to prevent NPE in case ModelPlugin is not loaded correctly.",
    "(In reply to comment #5)\nI ran this main method as a java application.  I don\u0027t think the Platform should be loaded when I run this main method.   My classpath references the jars directly.   I can try it again and see.\n\n",
    "It does work in a java project."
  ],
  "commentCreationDates": [
    "2006-10-11T19:56:33+02:00",
    "2006-10-11T19:57:29+02:00",
    "2006-10-11T19:58:15+02:00",
    "2006-10-13T09:25:44+02:00",
    "2006-10-13T15:03:53+02:00",
    "2006-10-16T07:58:29+02:00",
    "2006-10-16T11:41:29+02:00",
    "2006-10-16T16:11:32+02:00",
    "2006-10-17T17:16:34+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.birt.report.model.elements.OdaDataSource.setIntrinsicProperty",
          "source": "OdaDataSource.java:201"
        },
        {
          "method": "org.eclipse.birt.report.model.core.DesignElement.setProperty",
          "source": "DesignElement.java:1192"
        },
        {
          "method": "org.eclipse.birt.report.model.core.DesignElement.setProperty",
          "source": "DesignElement.java:1162"
        },
        {
          "method": "org.eclipse.birt.report.model.parser.DesignParseState.setProperty",
          "source": "DesignParseState.java:99"
        },
        {
          "method": "org.eclipse.birt.report.model.parser.OdaDataSourceState.parseODADataSourceExtensionID",
          "source": "OdaDataSourceState.java:167"
        },
        {
          "method": "org.eclipse.birt.report.model.parser.OdaDataSourceState.parseAttrs",
          "source": "OdaDataSourceState.java:82"
        },
        {
          "method": "org.eclipse.birt.report.model.parser.ModuleParserHandler.startElement",
          "source": "ModuleParserHandler.java:167"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.startElement",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.jaxp.SAXParserImpl.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.model.parser.ModuleReader.readModule",
          "source": "ModuleReader.java:90"
        },
        {
          "method": "org.eclipse.birt.report.model.parser.DesignReader.read",
          "source": "DesignReader.java:90"
        },
        {
          "method": "org.eclipse.birt.report.model.core.DesignSession.openDesign",
          "source": "DesignSession.java:278"
        },
        {
          "method": "org.eclipse.birt.report.model.api.SessionHandle.openDesign",
          "source": "SessionHandle.java:291"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.ReportParser.getDesignHandle",
          "source": "ReportParser.java:161"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign",
          "source": "ReportEngineHelper.java:243"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign",
          "source": "ReportEngineHelper.java:191"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign",
          "source": "ReportEngineHelper.java:125"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ReportEngine.openReportDesign",
          "source": "ReportEngine.java:224"
        },
        {
          "method": "org.eclipse.tptp.test.report.birt.internal.TabularTPFTestSuiteReportElement.main",
          "source": "TabularTPFTestSuiteReportElement.java:322"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "160527",
      "date": "2006-10-11T19:56:33+02:00",
      "product": "BIRT",
      "component": "Report",
      "severity": "major"
    }
  ],
  "groupId": "160527",
  "bugId": "160527",
  "date": "2006-10-11T19:56:33+02:00",
  "product": "BIRT",
  "component": "Report",
  "severity": "major"
}