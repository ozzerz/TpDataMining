{
  "comments": [
    "Import two log files - an apache access and apache error log. Create a new \ncorrelation, then open the correlation with the Log interactions view. Scroll \ndown the diagram half way, and expand one of the bars that is collapsed.\n\nIn windows, I\u0027m scrolled to the top of the sequence diagram, then quickly back \nto the right place. In motif, I\u0027m scrolled somewhere in the bottom half of the \ndiagram. If I go back and select one of the expanded items, the same thing \nhappens again.",
    "Created an attachment (id\u003d10024)\napache access log\n",
    "Created an attachment (id\u003d10025)\napache error log\n",
    "During frame replacement, the new ScrollView size was not flushed",
    "Changing target to M9",
    "I\u0027m seeing this in Windows in Hyades 3.0.1. I have a correlation of two logs, \nand I expand some correlated logs on each side. I scroll the view down various \ndistances and click on log records. The view jumps around even when the record \nI select is in plain view. I don\u0027t think we want the view to move at all on \nselection.. it makes it hard to, say, right click on a log record because you \nlose your frame of reference; you have to find your record again.",
    "The view update problem has been fixed for while on the SD side.\n\nThe remain problem is due to a wrong use of the SD API by the log interaction \nloader. In the problem context, when a selection is made, the loader calls \nsetFrameAndEnsureVisible(Frame,GraphNode) method of the SD API.This ask the \nviewer to replace the existing frame (current view size, position, etc.. are \nreseted because a new frame will be used) and to scroll to the given graph node.\n\nAll the problem is due to this replacement. The loader must simply call the \nensureVisible method(nothing will move if the view is in that area) and not \nsetFrameAndEnsureVisible",
    "Dominique, the problem is we cannot avoid that call simply because when a user \nexpands a node the entire frame is recreated. We group log records that have \nthe same timestamp in a group represented by a execution occurence. When the \nuser right clicks and expands the group we need to add all the log records \nrepresented by the group to the life line the group belongs to, I don\u0027t know of \nany solution other then recreating the frame. Is there a way of removing/adding \nexecution occurences from/to a life line?",
    "According to what I noticed, I believe the problem is not when the user expand \nor collapse nodes. In this case, I would say, it is almost normal to call \nsetFrame because the user is requesting to add or remove stuffs in the diagram.\nBut, the problem is much more when the user simply select a execution occurence \nafter expanding a node.In this case, nothing need to be added or remove, the \ndiagram does not even need to be modified, but the loader is still calling \nsetFrameAndEnsureVisible instead of simply ensureVisible (or better to do \nnothing as the selected execution occurence is supposted to be visible)\n\nI would add, that the problem mainly occurs right after expanding a node. If \nthe user collapse back the node everything works again as supposed.\n",
    "By design we agreed upon the following behaviour of the log interactions \ndiagram:\n- when a node that is part of a group that is in expanded state is selected \nthen the correlations inbound and outbound to that node are displayed which \nrequires regenerating the frame but preserving the selection\n- when the selection changes from a node described above to any other node the \ncorrelations displayed previously need to be replaced by a dotted arrow showing \nthat the previously selected node has correlations which are not displayed \nuntil the node is actually selected as explained above, which requires \nregenerating the frame.\nWe cannot avoid using setFrameAndEnsureVisible(Frame,GraphNode) because in the \nscenarios described in the defect and identified in this note we do add/remove \nmessages and I don\u0027t know of any other way of doing it but to create another \nframe. \nAny suggestions Sebastien? ",
    "Created an attachment (id\u003d14734)\nSDView Patch\n",
    "Created an attachment (id\u003d14735)\nTest logc\n",
    "I see the problem. I will add a method (public void setFrameAndEnsureVisible\n(Frame frame, int x,int y)) when we will be allowed to commit for 3.2\nThis method will allow you to set the view content at the position you want.\nYou will be able to easily restore the previous view postion doing something \nlike that:\n\n//Store the view psoition before changing the frame\nint x \u003d view.getSDWidget().getContentX();\nint y \u003d view.getSDWidget().getContentY();\n...\n...\n...\n//When the view need to be changed, restore the position\nview.setFrameAndEnsureVisible(frame,x,y);\n\nI have attached the patch for the SDView and the patch for the tests I did with \nthe log loader.\n\nLet me know if it does not help",
    "Thank you Sebastien for the patch. It helps, the view is behaving properly know \nbut from time to time, I couldn\u0027t find a way to reproduce it, I get the \nfollowing exception:\n\njava.lang.ArrayIndexOutOfBoundsException: -765\n\tat java.util.Arrays$ArrayList.get(Arrays.java(Compiled Code))\n\tat org.eclipse.hyades.uml2sd.ui.core.Frame.draw(Frame.java(Compiled \nCode))\n\tat org.eclipse.hyades.uml2sd.ui.view.SDWidget.drawContents(SDWidget.java\n(Compiled Code))\n\tat org.eclipse.hyades.uml2sd.ui.view.ScrollView$5.paintControl\n(ScrollView.java(Compiled Code))\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled \nCode))\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:96)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:183)\n\tat org.eclipse.core.launcher.Main.run(Main.java:644)\n\tat org.eclipse.core.launcher.Main.main(Main.java:628)\n\n\nI applied both patches that you attached to this defect for my tests.",
    "And one more thing, after getting the exception I have to close the view \nbecause the exception keeps repeating on each draw event.",
    "Is it possible to get the source line informations?",
    "Fixed.",
    "Verified - much better. Closing bug."
  ],
  "commentCreationDates": [
    "2004-04-27T20:57:18+02:00",
    "2004-04-27T20:59:08+02:00",
    "2004-04-27T20:59:27+02:00",
    "2004-04-28T15:24:24+02:00",
    "2004-04-28T15:48:00+02:00",
    "2004-08-12T01:41:25+02:00",
    "2004-08-17T15:19:36+02:00",
    "2004-08-17T17:53:46+02:00",
    "2004-08-18T10:48:22+02:00",
    "2004-09-22T22:01:09+02:00",
    "2004-09-23T14:34:51+02:00",
    "2004-09-23T14:35:23+02:00",
    "2004-09-23T14:36:11+02:00",
    "2004-09-23T21:06:02+02:00",
    "2004-09-23T21:11:29+02:00",
    "2004-09-24T10:15:20+02:00",
    "2004-10-20T01:38:37+02:00",
    "2004-11-04T00:08:53+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-765",
      "elements": [
        {
          "method": "java.util.Arrays$ArrayList.get",
          "source": "Arrays.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.hyades.uml2sd.ui.core.Frame.draw",
          "source": "Frame.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.hyades.uml2sd.ui.view.SDWidget.drawContents",
          "source": "SDWidget.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.hyades.uml2sd.ui.view.ScrollView$5.paintControl",
          "source": "ScrollView.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Inlined  Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Inlined  Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_PAINT",
          "source": "Composite.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java(Inlined  Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:183"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:644"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:628"
        }
      ],
      "number": 0,
      "commentIndex": 13,
      "bugId": "60167",
      "date": "2004-09-23T21:06:02+02:00",
      "product": "Hyades",
      "component": "UI.seq_diagram",
      "severity": "normal"
    }
  ],
  "groupId": "60167",
  "bugId": "60167",
  "date": "2004-04-27T20:57:18+02:00",
  "product": "Hyades",
  "component": "UI.seq_diagram",
  "severity": "normal"
}