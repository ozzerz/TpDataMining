{
  "comments": [
    "Build ID: version:3.2.1, build id:M20061115-1052\n\nSteps To Reproduce:\n\nXULRunner1801 runtime reports \"undefined symbol: g_assert_warning\" error when embedding in Eclipse 3.2.1\n\nEnv:\nOn RedHat EL WS4 Update4\nSun JVM 1.5.0_06\nEclipse 3.2.1 \nXULRunner 1.8.0.1 release\n\nStep to reproduce:\n1. Unzip Eclipse.\n2. Download xulrunner 1801 release from:http://releases.mozilla.org/pub/mozilla.org/xulrunner/releases/1.8.0.1/linux-i686/en-US/\n3. untar it, like /opt/xulrunner\n4. Open a terminal\n5. vi ~/.bashrc, put \"export MOZILLA_FIVE_HOME\u003d/opt/xulrunner\". Save and exit\n6. source ~/.bashrc\n7. Start eclipse\n8. View \"Help Content\", it starts with external FireFox.\n9. Open View \"Internet Web Browser\", it shows error:\nNo more handles (java.lang.UnsatisfiedLinkError: /work/download/eclipse_3.2.2/configuration/org.eclipse.osgi/bundles/68/1/.cp/libswt-mozilla-gtk-3235.so: /opt/xulrunner/libxul.so: undefined symbol: g_assert_warning)\norg.eclipse.swt.SWTError: No more handles (java.lang.UnsatisfiedLinkError: /work/download/eclipse_3.2.2/configuration/org.eclipse.osgi/bundles/68/1/.cp/libswt-mozilla-gtk-3235.so: /opt/xulrunner/libxul.so: undefined symbol: g_assert_warning)\n\tat org.eclipse.swt.SWT.error(SWT.java:3400)\n\tat org.eclipse.swt.SWT.error(SWT.java:3297)\n\tat org.eclipse.swt.browser.Browser.\u003cinit\u003e(Browser.java:168)\n\tat org.eclipse.ui.internal.browser.BrowserViewer.\u003cinit\u003e(BrowserViewer.java:224)\n\tat org.eclipse.ui.internal.browser.WebBrowserView.createPartControl(WebBrowserView.java:48)\n\tat org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:332)\n\tat org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:197)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:566)\n\tat org.eclipse.ui.internal.Perspective.showView(Perspective.java:1675)\n\nMore information:\n\n1) We can run /opt/xulrunner/xulrunner sampleapplication.ini to start a xul application. But we just cannot embed it in Eclipse. Does it caused by different LD_LIBRARY_PATH value at JVM?\n\n2) Other system informations:\n\nroot@localhost eclipse_3.2.2]# java -version\njava version \"1.5.0_06\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-b05)\nJava HotSpot(TM) Client VM (build 1.5.0_06-b05, mixed mode, sharing)\n\n[root@localhost eclipse_3.2.2]# rpm -qa|grep gtk\ngtk-engines-0.12-6.el4\niiimf-gtk-12.1-13.EL.5\ngtk2-2.4.13-19\npygtk2-2.4.0-1\ngnome-python2-gtkhtml2-2.6.0-3\ngtk2-engines-2.2.0-7.el4\ngtksourceview-1.1.0-4\npygtk2-libglade-2.4.0-1\ngtkspell-2.0.7-2\nusermode-gtk-1.74-1\nauthconfig-gtk-4.6.10-rhel4.3\ngtkhtml2-2.6.2-1\ngtkhtml3-3.3.2-6.EL\ngtk+-1.2.10-33\n\n[root@localhost eclipse_3.2.2]# rpm -qa|grep glib\nglibc-common-2.3.4-2.25\ncompat-glibc-headers-2.3.2-95.30\nglib2-2.4.7-1\nglibc-headers-2.3.4-2.25\ndbus-glib-0.22-12.EL.7\nglib-1.2.10-15\nglibc-kernheaders-2.4-9.1.98.EL\nglibc-2.3.4-2.25\nglib2-devel-2.4.7-1\ncompat-glibc-2.3.2-95.30\nglibc-devel-2.3.4-2.25\n\n\n[root@localhost eclipse_3.2.2]# rpm -qa|grep libstd\nlibstdc++-3.4.6-3\ncompat-libstdc++-296-2.96-132.7.2\ncompat-libstdc++-33-3.2.3-47.3\nlibstdc++-devel-3.4.6-3\n\n\n[root@localhost eclipse_3.2.2]# rpm -qa|grep fontconfig\nfontconfig-2.2.3-7\nfontconfig-devel-2.2.3-7",
    "GG is investigating this but doesn\u0027t have a fix yet for 3.2.x or HEAD.",
    "Grant, what is the status of this for 3.2.2?",
    "I\u0027m still investigating this, but reverting the milestone since this is not fixed in this morning\u0027s 3.2.2 build.  I believe that xulrunner\u0027s changed linking strategy expects that this symbol will be statically linked into the swt library, which is different from pre-xulrunner mozillas.\n",
    "We have a proof of concept that using the XPCOM glue that comes with XULRunner 1.8, we can fix this.  We are working on the fix for 3.3 HEAD.  Right now, it seems too complex/dangerous for 3.2.2.\n\nWhen the code is working in 3.3 HEAD, we can then evaluate a back port to 3.2.x.",
    "Got some update for this problem.\n1) With same environment, if we change the JVM to an old IBM JRE142, it works fine. Version info(early IBM 142):\njava version \"1.4.2\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)\nClassic VM (build 1.4.2, J2RE 1.4.2 IBM build cxia32142ifx-20041203 (142SR1+80507) (JIT enabled: jitc))\n2) Use this IBM142, it also works fine with Eclipse 3.3 M4 build.\n3) Eclipse 3.3M4/IBM JR?50/RHEL4U4/Xulrunner-1801, still got same error. \n\nI give to list of loaded libraries within gdb. First is the one with IBM142, second is using IBM150. Separated with \"\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\". Hope it can help to identify the problem.\n\n\n0x009472d0  0x0094f6b8  Yes         /lib/tls/libpthread.so.0\n0x00dbf7c0  0x00dcc638  Yes         /lib/libnsl.so.1\n0x0083abb0  0x0083b8c4  Yes         /lib/libdl.so.2\n0x006fcbc0  0x007ee280  Yes         /lib/tls/libc.so.6\n0x006ca7a0  0x006dc5ff  Yes         /lib/ld-linux.so.2\n0xb7e6e3c0  0xb7fa2590  Yes         /root/IBMJava2-142/jre/bin/classic/libjvm.so0x00818300  0x00831534  Yes         /lib/tls/libm.so.6\n0xb7dba880  0xb7dc6a20  Yes         /root/IBMJava2-142/jre/bin/libute.so\n0xb7db3dd0  0xb7db4b60  Yes         /root/IBMJava2-142/jre/bin/libjsig.so\n0xb7db0fd0  0xb7db19b0  Yes         /root/IBMJava2-142/jre/bin/libdbgmalloc.so\n0xb7dad0b0  0xb7dadb30  Yes         /root/IBMJava2-142/jre/bin/libxhpi.so\n0xb7d97680  0xb7da6d10  Yes         /root/IBMJava2-142/jre/bin/libhpi.so\n0xb6c337a0  0xb6c40cd0  Yes         /root/IBMJava2-142/jre/bin/libjava.so\n0xb6c1eef0  0xb6c25d00  Yes         /root/IBMJava2-142/jre/bin/classic/libcore.so\n0xb6bc9500  0xb6bd3750  Yes         /root/IBMJava2-142/jre/bin/libzip.so\n0xb6796b10  0xb679d95c  Yes         /lib/libnss_files.so.2\n0xb6397e40  0xb65b9c20  Yes         /root/IBMJava2-142/jre/bin/libjitc.so\n0xb6004ab0  0xb6010d90  Yes         /root/IBMJava2-142/jre/bin/libnet.so\n0xb5ff7520  0xb5ffaa70  Yes         /root/IBMJava2-142/jre/bin/libnio.so\n0x00c71578  0x00c7617c  Yes         /lib/libgcc_s.so.1\n0xb5960d08  0xb597dbb0  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-pi-gtk-3235.so\n0x00142e30  0x0031f3e4  Yes         /usr/lib/libgtk-x11-2.0.so.0\n0x00dfb150  0x00dfc678  Yes         /usr/lib/libgthread-2.0.so.0\n0x00636fe0  0x00639ae8  Yes         /usr/X11R6/lib/libXtst.so.6\n0x00b34120  0x00b41b08  Yes         /usr/lib/libgdk_pixbuf-2.0.so.0\n0x00be6cb0  0x00c2dd34  Yes         /usr/lib/libgdk-x11-2.0.so.0\n0x00851500  0x008c1834  Yes         /usr/X11R6/lib/libX11.so.6\n0x00b8b7f0  0x00b8d758  Yes         /usr/lib/libpangoxft-1.0.so.0\n0x00c46900  0x00c4c1e4  Yes         /usr/lib/libpangox-1.0.so.0\n0x00b5ba60  0x00b75ad4  Yes         /usr/lib/libpango-1.0.so.0\n0x00b971f0  0x00ba4d88  Yes         /usr/lib/libatk-1.0.so.0\n0x00adfa20  0x00b0b6c8  Yes         /usr/lib/libgobject-2.0.so.0\n0x00b17ca0  0x00b18da0  Yes         /usr/lib/libgmodule-2.0.so.0\n0x009f1730  0x00a2f430  Yes         /usr/lib/libglib-2.0.so.0\n0x00923690  0x0092cf74  Yes         /usr/X11R6/lib/libXext.so.6\n0x006e3bf0  0x006e4ef0  Yes         /usr/X11R6/lib/libXrandr.so.2\n0x00b491e0  0x00b4e2cc  Yes         /usr/X11R6/lib/libXi.so.6\n0x00a8d8c0  0x00a8e318  Yes         /usr/X11R6/lib/libXinerama.so.1\n0x00a95a60  0x00aa1b38  Yes         /usr/X11R6/lib/libXft.so.2\n0x0098aa60  0x009ca6c0  Yes         /usr/lib/libfreetype.so.6\n0x00aae220  0x00ac048c  Yes         /usr/lib/libfontconfig.so.1\n0x00ad0240  0x00ad4c8c  Yes         /usr/X11R6/lib/libXcursor.so.1\n0x00a84330  0x00a89764  Yes         /usr/X11R6/lib/libXrender.so.1\n0x00bb31e0  0x00bd0464  Yes         /usr/lib/libpangoft2-1.0.so.0\n0x00a63fd0  0x00a79b5c  Yes         /usr/lib/libexpat.so.0\n0x009325b0  0x0093babc  Yes         /usr/lib/libz.so.1\n0xb592d5f0  0xb592d78c  Yes         /usr/X11R6/lib/X11/locale/lib/common/xlcUTF8Load.so.2\n0xb592a410  0xb592ad3c  Yes         /usr/lib/gconv/ISO8859-1.so\n0xb5911aa4  0xb5926038  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-gtk-3235.so\n0xb58f5a80  0xb58fed14  Yes         /usr/lib/gtk-2.0/2.4.0/engines/libbluecurve.so\n0xb5789ac0  0xb578a170  Yes         /usr/lib/pango/1.4.0/modules/pango-basic-fc.so\n0xb56f2ab0  0xb56f3220  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/76/1/.cp/os/linux/x86/liblocalfile_1_0_0.so\n0xb53228d0  0xb5324d98  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-atk-gtk-3235.so\n0xb52aa704  0xb52db0c4  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libcairo-swt.so\n0xb529b038  0xb529dde0  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-cairo-gtk-3235.so\n0xb511a760  0xb5127e44  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-mozilla-gtk-3235.so\n0xb511471c  0xb5114d98  Yes         /root/Desktop/xulrunner/libxpcom.so\n0xb50ecf2c  0xb510a9fc  Yes         /root/Desktop/xulrunner/libnspr4.so\n0xb50dfd2c  0xb50e0a54  Yes         /root/Desktop/xulrunner/libplds4.so\n0xb50db270  0xb50dc750  Yes         /root/Desktop/xulrunner/libplc4.so\n0x00cb7bc0  0x00d20118  Yes         /usr/lib/libstdc++.so.6\n0xb45941fc  0xb4e34a6c  Yes         /root/Desktop/xulrunner/libxul.so\n0xb409b300  0xb40f6900  Yes         /usr/lib/libstdc++.so.5\n0xb3fdf300  0xb404e9e0  Yes         /root/Desktop/xulrunner/libmozjs.so\n0xb3f89010  0xb3fc3148  Yes         /usr/X11R6/lib/libXt.so.6\n0x00959030  0x0095d8b8  Yes         /usr/X11R6/lib/libSM.so.6\n0x00965690  0x00974c68  Yes         /usr/X11R6/lib/libICE.so.6\n0xb50d5c38  0xb50d8b28  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-mozilla18-profile-gtk-3235.so\n0xb50d14e0  0xb50d2b70  Yes         /usr/lib/gconv/UTF-16.so\n0xb3576704  0xb3578e00  Yes         /root/Desktop/xulrunner/components/libsystem-pref.so\n0x07313690  0x07332b7c  Yes         /usr/lib/libgconf-2.so.4\n0x07271d30  0x07295db4  Yes         /usr/lib/libORBit-2.so.0\n0x00d48310  0x00d4cdfc  Yes         /usr/lib/libpopt.so.0\n0xb356e6a0  0xb3572690  Yes         /root/Desktop/xulrunner/components/libpipboot.so\n(gdb)\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n(gdb) info sharedlibrary\nFrom        To          Syms Read   Shared Object Library\n0x009472d0  0x0094f6b8  Yes         /lib/tls/libpthread.so.0\n0x0083abb0  0x0083b8c4  Yes         /lib/libdl.so.2\n0x006fcbc0  0x007ee280  Yes         /lib/tls/libc.so.6\n0x006ca7a0  0x006dc5ff  Yes         /lib/ld-linux.so.2\n0xb787e010  0xb7b85c30  Yes         /root/jdk150/jre/lib/i386/client/libjvm.so\n0x00818300  0x00831534  Yes         /lib/tls/libm.so.6\n0xb784d250  0xb7850e10  Yes         /root/jdk150/jre/lib/i386/native_threads/libhpi.so\n0x00dbf7c0  0x00dcc638  Yes         /lib/libnsl.so.1\n0xb782bb10  0xb783295c  Yes         /lib/libnss_files.so.2\n0xb78390d0  0xb783fc90  Yes         /root/jdk150/jre/lib/i386/libverify.so\n0xb7810190  0xb78248e0  Yes         /root/jdk150/jre/lib/i386/libjava.so\n0xb77f3cb0  0xb7802ae0  Yes         /root/jdk150/jre/lib/i386/libzip.so\n0xb1eeb1c0  0xb1ef9850  Yes         /root/jdk150/jre/lib/i386/libnet.so\n0xb1ee37a0  0xb1ee6650  Yes         /root/jdk150/jre/lib/i386/libnio.so\n0xac5a7d08  0xac5c4bb0  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-pi-gtk-3235.so\n0x00142e30  0x0031f3e4  Yes         /usr/lib/libgtk-x11-2.0.so.0\n0x00dfb150  0x00dfc678  Yes         /usr/lib/libgthread-2.0.so.0\n0x00636fe0  0x00639ae8  Yes         /usr/X11R6/lib/libXtst.so.6\n0x00b34120  0x00b41b08  Yes         /usr/lib/libgdk_pixbuf-2.0.so.0\n0x00be6cb0  0x00c2dd34  Yes         /usr/lib/libgdk-x11-2.0.so.0\n0x00851500  0x008c1834  Yes         /usr/X11R6/lib/libX11.so.6\n0x00b8b7f0  0x00b8d758  Yes         /usr/lib/libpangoxft-1.0.so.0\n0x00c46900  0x00c4c1e4  Yes         /usr/lib/libpangox-1.0.so.0\n0x00b5ba60  0x00b75ad4  Yes         /usr/lib/libpango-1.0.so.0\n0x00b971f0  0x00ba4d88  Yes         /usr/lib/libatk-1.0.so.0\n0x00adfa20  0x00b0b6c8  Yes         /usr/lib/libgobject-2.0.so.0\n0x00b17ca0  0x00b18da0  Yes         /usr/lib/libgmodule-2.0.so.0\n0x009f1730  0x00a2f430  Yes         /usr/lib/libglib-2.0.so.0\n0x00923690  0x0092cf74  Yes         /usr/X11R6/lib/libXext.so.6\n0x006e3bf0  0x006e4ef0  Yes         /usr/X11R6/lib/libXrandr.so.2\n0x00b491e0  0x00b4e2cc  Yes         /usr/X11R6/lib/libXi.so.6\n0x00a8d8c0  0x00a8e318  Yes         /usr/X11R6/lib/libXinerama.so.1\n0x00a95a60  0x00aa1b38  Yes         /usr/X11R6/lib/libXft.so.2\n0x0098aa60  0x009ca6c0  Yes         /usr/lib/libfreetype.so.6\n0x00aae220  0x00ac048c  Yes         /usr/lib/libfontconfig.so.1\n0x00ad0240  0x00ad4c8c  Yes         /usr/X11R6/lib/libXcursor.so.1\n0x00a84330  0x00a89764  Yes         /usr/X11R6/lib/libXrender.so.1\n0x00bb31e0  0x00bd0464  Yes         /usr/lib/libpangoft2-1.0.so.0\n0x00a63fd0  0x00a79b5c  Yes         /usr/lib/libexpat.so.0\n0x009325b0  0x0093babc  Yes         /usr/lib/libz.so.1\n0xac5745f0  0xac57478c  Yes         /usr/X11R6/lib/X11/locale/lib/common/xlcUTF8Load.so.2\n0xac571410  0xac571d3c  Yes         /usr/lib/gconv/ISO8859-1.so\n0xac558aa4  0xac56d038  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-gtk-3235.so\n0xac53ca80  0xac545d14  Yes         /usr/lib/gtk-2.0/2.4.0/engines/libbluecurve.so\n0xac496ac0  0xac497170  Yes         /usr/lib/pango/1.4.0/modules/pango-basic-fc.so\n0xb1e01ab0  0xb1e02220  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/76/1/.cp/os/linux/x86/liblocalfile_1_0_0.so\n0xac38f8d0  0xac391d98  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-atk-gtk-3235.so\n0xac358704  0xac3890c4  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libcairo-swt.so\n0xac349038  0xac34bde0  Yes         /root/IES3.2.1/configuration/org.eclipse.osgi/bundles/17/1/.cp/libswt-cairo-gtk-3235.so\n(gdb)\n\n\n\n\n\n\n\n",
    "fixed in HEAD \u003e 0129 by using xulrunner\u0027s glue facilities to load required libraries instead of LD_LIBRARY_PATH\n",
    "Verified with 3.3 I20070424 build, thanks! Grant\nTo verify, I set jvm property to specify the target xulrunner(1801 from mozilla.org)."
  ],
  "commentCreationDates": [
    "2006-12-05T09:20:46+01:00",
    "2006-12-12T16:43:53+01:00",
    "2007-01-10T00:31:28+01:00",
    "2007-01-10T14:37:03+01:00",
    "2007-01-10T22:12:01+01:00",
    "2007-01-16T10:10:09+01:00",
    "2007-01-29T16:40:47+01:00",
    "2007-04-28T07:42:11+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.UnsatisfiedLinkError",
      "message": "/work/download/eclipse_3.2.2/configuration/org.eclipse.osgi/bundles/68/1/.cp/libswt-mozilla-gtk-3235.so: /opt/xulrunner/libxul.so: undefined symbol: g_assert_warning)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3400"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.browser.Browser.\u003cinit\u003e",
          "source": "Browser.java:168"
        },
        {
          "method": "org.eclipse.ui.internal.browser.BrowserViewer.\u003cinit\u003e",
          "source": "BrowserViewer.java:224"
        },
        {
          "method": "org.eclipse.ui.internal.browser.WebBrowserView.createPartControl",
          "source": "WebBrowserView.java:48"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPartHelper",
          "source": "ViewReference.java:332"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPart",
          "source": "ViewReference.java:197"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.showView",
          "source": "Perspective.java:1675"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166760",
      "date": "2006-12-05T09:20:46+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "166760",
  "bugId": "166760",
  "date": "2006-12-05T09:20:46+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "major"
}