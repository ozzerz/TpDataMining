{
  "comments": [
    "When i try to do a \"run\" on a IWorkspace I get a IllegalArgumentException \n(java.lang.IllegalArgumentException: Attempted to beginRule: R/, does not \nmatch outer scope rule: F/PeterNewProj/b/g). It runs through this code sevral \ntimes and only seems to fail during a validate Edit. This was working fine in \nM7 but in M8 it fails every time. I\u0027m not sue what information is needed but \nplease feel free to mail me with any questions.\n\nHere is the stack trace i get:\n!MESSAGE Problems occurred when invoking code from plug-\nin: \"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.IllegalArgumentException: Attempted to beginRule: R/, does not match \nouter scope rule: F/PeterNewProj/b/g\n\tat org.eclipse.core.internal.runtime.Assert.isLegal(Assert.java:56)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.illegalPush\n(ImplicitJobs.java:86)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.push\n(ImplicitJobs.java:167)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin\n(ImplicitJobs.java:241)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule\n(JobManager.java:149)\n\tat org.eclipse.core.internal.resources.WorkManager.checkIn\n(WorkManager.java:88)\n\tat org.eclipse.core.internal.resources.Workspace.prepareOperation\n(Workspace.java:1521)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1554)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1578)\n\tat \ncom.rational.resourcemanagement.cmui.DefaultProgressMechanism.execute\n(DefaultProgressMechanism.java:49)\n\tat com.rational.resourcemanagement.cmcommands.CMOperation.execute\n(CMOperation.java:74)\n\tat com.rational.resourcemanagement.cmframework.CMOperations.checkout\n(CMOperations.java:94)\n\tat com.rational.clearcase.RSCMService.onDemandCheckOut\n(RSCMService.java:2158)\n\tat com.rational.clearcase.RSCMService.onDemand(RSCMService.java:1899)\n\tat \ncom.rational.clearcase.team.core.clearcase.CCFileModificationValidator$1.run\n(CCFileModificationValidator.java:301)\n\tat org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:135)\n\tat org.eclipse.ui.internal.UISynchronizer.syncExec\n(UISynchronizer.java:25)\n\tat org.eclipse.swt.widgets.Display.syncExec(Display.java:2902)\n\tat \ncom.rational.clearcase.team.core.clearcase.CCFileModificationValidator.makeRead\nableForEdit(CCFileModificationValidator.java:297)\n\tat \ncom.rational.clearcase.team.core.clearcase.CCFileModificationValidator.validate\nEdit(CCFileModificationValidator.java:192)\n\tat \norg.eclipse.team.internal.core.FileModificationValidatorManager.validateEdit\n(FileModificationValidatorManager.java:70)\n\tat org.eclipse.core.internal.resources.Workspace$5.run\n(Workspace.java:1755)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:610)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:521)\n\tat org.eclipse.core.internal.resources.Workspace.validateEdit\n(Workspace.java:1761)\n\tat \norg.eclipse.core.internal.filebuffers.ResourceFileBuffer.validateState\n(ResourceFileBuffer.java:312)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider$4.execute\n(TextFileDocumentProvider.java:822)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.\nrun(TextFileDocumentProvider.java:94)\n\tat org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute\n(WorkspaceModifyDelegatingOperation.java:67)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:91)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1559)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:105)\n\tat org.eclipse.ui.editors.text.WorkspaceOperationRunner.run\n(WorkspaceOperationRunner.java:73)\n\tat org.eclipse.ui.editors.text.WorkspaceOperationRunner.run\n(WorkspaceOperationRunner.java:63)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation\n(TextFileDocumentProvider.java:392)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider.validateState\n(TextFileDocumentProvider.java:835)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.validateState\n(AbstractTextEditor.java:3029)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor$16.run\n(AbstractTextEditor.java:3077)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:84)\n\tat \norg.eclipse.ui.texteditor.AbstractTextEditor.validateEditorInputState\n(AbstractTextEditor.java:3072)\n\tat \norg.eclipse.ui.texteditor.AbstractTextEditor$ElementStateListener$Validator.ver\nifyText(AbstractTextEditor.java:208)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:193)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:769)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:778)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:586)\n\tat org.eclipse.swt.custom.StyledText.modifyContent\n(StyledText.java:5539)\n\tat org.eclipse.swt.custom.StyledText.sendKeyEvent(StyledText.java:6391)\n\tat org.eclipse.swt.custom.StyledText.doContent(StyledText.java:2526)\n\tat org.eclipse.swt.custom.StyledText.handleKey(StyledText.java:4948)\n\tat org.eclipse.swt.custom.StyledText.handleKeyDown\n(StyledText.java:4971)\n\tat org.eclipse.swt.custom.StyledText$7.handleEvent\n(StyledText.java:4720)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:769)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:778)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716)\n\tat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3041)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2944)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3146)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1374)\n\tat org.eclipse.swt.internal.BidiUtil.windowProc(BidiUtil.java:647)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1450)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2254)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1562)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1536)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:257)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:90)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:277)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:239)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:117)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:267)\n\tat org.eclipse.core.launcher.Main.run(Main.java:692)\n\tat org.eclipse.core.launcher.Main.main(Main.java:676)\n\nHere is an example of something that use to work:\nIWorkspace workspace \u003d ResourcesPlugin.getWorkspace();\ntry {\nworkspace.run(this, null);\n//\t} catch (CoreException e) {\n//\t\tClearCasePlugin.logError( e.getMessage(), e );\n//\t}",
    "Sorry hit commit by mistake.\n\nThe code that use to work is as follows:\nIWorkspace workspace \u003d ResourcesPlugin.getWorkspace();\ntry {\n    workspace.run(this, null);\n} catch (CoreException e) {\n    ClearCasePlugin.logError( e.getMessage(), e );\n}\n\nI have tried just:\nthis.run();\n\nThis of course works but I don\u0027t know why the above doesn\u0027t anymore.\n\nThanks\nAnders",
    "We are currently making hard-coded assumptions about what locks are needed by\nall core workspace operations.  Since team providers (validateEdit, etc) need to\nreimplement some of these methods, they also need to a way to specify what\nscheduling rules are appropriate for their operations.  This needs to be\naddressed (see bug 50631)\n\nHowever, you (or whoever is implementing the validateEdit in the stack trace\nbelow) should start thinking about reducing, if possible, the number of\nresources that you need to lock during validation.  Otherwise, you will not play\nwell with other background processes that are happening concurrently. For\nexample, if a background operation is \"locking\" project A, and the user attempts\nto edit a file in project B, they would reasonably expect that they can do these\nthings concurrently. You can specify the \"locks\" (aka scheduling rules) that are\nacquired by a call to IWorkspace.run by using the new IWorkspace.run method that\ntakes a scheduling rule parameter. Start by looking at the Eclipse 3.0 Porting\nGuide (under recommended changes), to read about the changes to IWorkspace.run.\nAlso, there is the start of a guide in the Platform Plugin Developer Guide about\nusing the concurrency infrastructure (in the \"Runtime\" section of the\nProgrammer\u0027s Guide).",
    "I\u0027m going to mark this as a duplicate. The short summary:\n\n1) We will make the backwards compatibility story work so that errors don\u0027t\noccur when Eclipse 2.1 team providers are installed.\n2) In backwards compatibility mode, all workspace operations that can be hooked\nby team providers (such as validateEdit) will pessimistically lock the entire\nworkspace.  This essentially means the user won\u0027t be able to do much work\nconcurrently with things running in the background, but they\u0027ll certainly be no\nworse off than they were when using Eclipse 2.1.\n3) ClearCase and other team providers should use the new scheduling rule hooks\n(see bug 50631) to specify what locks are needed by their team operations, and\nminimize this locking if possible.\n\n*** This bug has been marked as a duplicate of 50631 ***"
  ],
  "commentCreationDates": [
    "2004-04-07T00:27:45+02:00",
    "2004-04-07T00:30:39+02:00",
    "2004-04-07T00:44:41+02:00",
    "2004-04-09T00:16:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: R/, does not match  outer scope rule: F/PeterNewProj/b/g",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Assert.java:56"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.illegalPush",
          "source": "ImplicitJobs.java:86"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.push",
          "source": "ImplicitJobs.java:167"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:241"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:149"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:88"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1521"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1554"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1578"
        },
        {
          "method": "com.rational.resourcemanagement.cmui.DefaultProgressMechanism.execute",
          "source": "DefaultProgressMechanism.java:49"
        },
        {
          "method": "com.rational.resourcemanagement.cmcommands.CMOperation.execute",
          "source": "CMOperation.java:74"
        },
        {
          "method": "com.rational.resourcemanagement.cmframework.CMOperations.checkout",
          "source": "CMOperations.java:94"
        },
        {
          "method": "com.rational.clearcase.RSCMService.onDemandCheckOut",
          "source": "RSCMService.java:2158"
        },
        {
          "method": "com.rational.clearcase.RSCMService.onDemand",
          "source": "RSCMService.java:1899"
        },
        {
          "method": "com.rational.clearcase.team.core.clearcase.CCFileModificationValidator$1.run",
          "source": "CCFileModificationValidator.java:301"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.syncExec",
          "source": "Synchronizer.java:135"
        },
        {
          "method": "org.eclipse.ui.internal.UISynchronizer.syncExec",
          "source": "UISynchronizer.java:25"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.syncExec",
          "source": "Display.java:2902"
        },
        {
          "method": "com.rational.clearcase.team.core.clearcase.CCFileModificationValidator.makeReadableForEdit",
          "source": "CCFileModificationValidator.java:297"
        },
        {
          "method": "com.rational.clearcase.team.core.clearcase.CCFileModificationValidator.validateEdit",
          "source": "CCFileModificationValidator.java:192"
        },
        {
          "method": "org.eclipse.team.internal.core.FileModificationValidatorManager.validateEdit",
          "source": "FileModificationValidatorManager.java:70"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace$5.run",
          "source": "Workspace.java:1755"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:610"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:521"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.validateEdit",
          "source": "Workspace.java:1761"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceFileBuffer.validateState",
          "source": "ResourceFileBuffer.java:312"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$4.execute",
          "source": "TextFileDocumentProvider.java:822"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.run",
          "source": "TextFileDocumentProvider.java:94"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute",
          "source": "WorkspaceModifyDelegatingOperation.java:67"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:91"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1559"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:105"
        },
        {
          "method": "org.eclipse.ui.editors.text.WorkspaceOperationRunner.run",
          "source": "WorkspaceOperationRunner.java:73"
        },
        {
          "method": "org.eclipse.ui.editors.text.WorkspaceOperationRunner.run",
          "source": "WorkspaceOperationRunner.java:63"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation",
          "source": "TextFileDocumentProvider.java:392"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.validateState",
          "source": "TextFileDocumentProvider.java:835"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.validateState",
          "source": "AbstractTextEditor.java:3029"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor$16.run",
          "source": "AbstractTextEditor.java:3077"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.validateEditorInputState",
          "source": "AbstractTextEditor.java:3072"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor$ElementStateListener$Validator.verifyText",
          "source": "AbstractTextEditor.java:208"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:193"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:793"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:778"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:586"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.modifyContent",
          "source": "StyledText.java:5539"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.sendKeyEvent",
          "source": "StyledText.java:6391"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.doContent",
          "source": "StyledText.java:2526"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleKey",
          "source": "StyledText.java:4948"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleKeyDown",
          "source": "StyledText.java:4971"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$7.handleEvent",
          "source": "StyledText.java:4720"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:793"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:778"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1720"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1716"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3041"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2944"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3146"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1374"
        },
        {
          "method": "org.eclipse.swt.internal.BidiUtil.windowProc",
          "source": "BidiUtil.java:647"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1450"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2254"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1562"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1536"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:257"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:90"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:277"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:239"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:117"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:267"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:692"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:676"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "57675",
      "duplicateId": "50631",
      "date": "2004-04-07T00:27:45+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "major"
    }
  ],
  "groupId": "50631",
  "bugId": "57675",
  "duplicateId": "50631",
  "date": "2004-04-07T00:27:45+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "major"
}