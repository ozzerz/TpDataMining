{
  "comments": [
    "Just upgraded to latest AJDT (Version: 1.3.1, Build id: 20060322082516\nAspectJ version: 1.5.1.20060320075953)\nand the compiler crashed while rebulding the project (which used to work fine \nusing using the March 16th version). Retrying with \u0027clean\u0027 build produced the\nsame crash.\n\njava.lang.NullPointerException\nat org.aspectj.weaver.AnnotationX.ensureAtTargetInitialized(AnnotationX.java:158)\nat org.aspectj.weaver.AnnotationX.specifiesTarget(AnnotationX.java:98)\nat org.aspectj.weaver.bcel.BcelWeaver.verifyTargetIsOK(BcelWeaver.java:1450)\nat org.aspectj.weaver.bcel.BcelWeaver.applyDeclareAtType(BcelWeaver.java:1417)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveParentTypeMungers(BcelWeaver.java:1366)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:1223)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:1211)\nat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1058)\nat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:311)\nat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:183)\nat org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.aj:70)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:367)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:845)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:241)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:161)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nNullPointerException thrown: null",
    "I wonder if this is related to #128655. There is one major difference, though. #128655 crahsed only during incremental compilation, whereas this one crahses on full build.",
    "this is no doubt because of the ASM support I added recently which has only just made it into an AJDT build.  Can you try putting this in the \u0027non standard options\u0027 field for the offending project?\n\n-Xset:activateLightweightDelegates\u003dfalse\n\ndoes it help it get past the NPE?",
    "after looking a little further at it - I\u0027m even more convinced its the ASM code since now annotations can be of two types depending on whether we loaded an ASM delegate for a type or a BCEL delegate for a type.  I missed a path in the annotation processing code that should have done different things based on the kind of delegate loaded.",
    "I just tried the suggested \"-Xset:activateLightweightDelegates\u003dfalse\" option and could get a successful compilation.",
    "Excellent - the option is doing exactly what I wanted - it deactivates the loading of classes via the ASM bytecode toolkit which is the problem here. I\u0027ll fix the bug soon as I can, now that I\u0027ve finished doing my 40,000 sessions at AOSD.",
    "fix for this checked into AJ now.",
    "fix available now in 1.5.1 - will be in AJDT shortly."
  ],
  "commentCreationDates": [
    "2006-03-23T01:05:02+01:00",
    "2006-03-23T01:25:34+01:00",
    "2006-03-23T08:55:32+01:00",
    "2006-03-23T09:42:44+01:00",
    "2006-03-23T17:18:17+01:00",
    "2006-03-24T08:44:15+01:00",
    "2006-03-24T10:10:24+01:00",
    "2006-04-04T20:01:39+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.AnnotationX.ensureAtTargetInitialized",
          "source": "AnnotationX.java:158"
        },
        {
          "method": "org.aspectj.weaver.AnnotationX.specifiesTarget",
          "source": "AnnotationX.java:98"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.verifyTargetIsOK",
          "source": "BcelWeaver.java:1450"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.applyDeclareAtType",
          "source": "BcelWeaver.java:1417"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveParentTypeMungers",
          "source": "BcelWeaver.java:1366"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor",
          "source": "BcelWeaver.java:1223"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor",
          "source": "BcelWeaver.java:1211"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1058"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:311"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:183"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0",
          "source": "CompilerAdapter.aj:70"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:367"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:845"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:241"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:161"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:122"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "132926",
      "date": "2006-03-23T01:05:02+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    }
  ],
  "groupId": "132926",
  "bugId": "132926",
  "date": "2006-03-23T01:05:02+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "critical"
}