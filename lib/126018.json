{
  "comments": [
    "When OPTION_RECORD_UNKNOWN_FEATURE is set to true, EMF should load any invalid XML without reporting any errors. However, schema and XML instance in the attachemnt below result in the following exception:\njava.lang.ClassCastException: java.lang.String\n\tat org.eclipse.emf.ecore.util.BasicFeatureMap.set(BasicFeatureMap.java:2279)\n\tat org.eclipse.emf.ecore.xml.type.impl.AnyTypeImpl.eSet(AnyTypeImpl.java:175)\n\tat org.eclipse.emf.ecore.impl.BasicEObjectImpl.eSet(BasicEObjectImpl.java:598)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.setValue(XMLHelperImpl.java:1008)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue(XMLHandler.java:2281)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue(XMLHandler.java:2271)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.endElement(XMLHandler.java:1249)\n\tat org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)",
    "Created an attachment (id\u003d33939)\nXML Schema to use\n\n",
    "Created an attachment (id\u003d33940)\nXML instance document\n\n",
    "The bug occurs because \"HoldingStatus\" feature, which is defined as restriction of string, is defined as a global element but is not valid as a child of \"root\" element. Therefore, when \"HoldingStatus\" is encountered it is treated as \"unknownFeature\". Normally, when processing such data we keep a stack of types, and normally after processing unknownFeature it looks like {..., \"unknownFeature\", \"Object\"}. We always tried to remove the type before last one -- unknownFeature one --  since we don\u0027t need it for further processing.\nHowever, since \"HoldingStatus\" is a simple feature, the stack for types will include {..., \"unknownFeature\", \"Object\", \"EAttributeImpl\"}. Therefore, we will end up removing in appropriate value -- \"Object\" -- leaving a stack in a bad shape.\n\nThe bug is now fixed in CVS and will be available on Thursday\u0027s build.",
    "Thanks Elena,\nI will verify once Thursday\u0027s build comes out.\n- Kihup",
    "Fixed in 2.2.0 I200509220200"
  ],
  "commentCreationDates": [
    "2006-02-01T15:19:11+01:00",
    "2006-02-01T15:21:37+01:00",
    "2006-02-01T15:21:55+01:00",
    "2006-02-01T15:32:16+01:00",
    "2006-02-01T16:33:40+01:00",
    "2006-02-02T06:57:45+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "java.lang.String",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.util.BasicFeatureMap.set",
          "source": "BasicFeatureMap.java:2279"
        },
        {
          "method": "org.eclipse.emf.ecore.xml.type.impl.AnyTypeImpl.eSet",
          "source": "AnyTypeImpl.java:175"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eSet",
          "source": "BasicEObjectImpl.java:598"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.setValue",
          "source": "XMLHelperImpl.java:1008"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue",
          "source": "XMLHandler.java:2281"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue",
          "source": "XMLHandler.java:2271"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.endElement",
          "source": "XMLHandler.java:1249"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.endElement",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "126018",
      "date": "2006-02-01T15:19:11+01:00",
      "product": "EMF",
      "component": "XML/XMI",
      "severity": "normal"
    }
  ],
  "groupId": "126018",
  "bugId": "126018",
  "date": "2006-02-01T15:19:11+01:00",
  "product": "EMF",
  "component": "XML/XMI",
  "severity": "normal"
}