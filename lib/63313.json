{
  "comments": [
    "I0520 noon build\n\n- go to the Java - Editor - Templates preference page\n- press New...\n- enter \u0027j\u0027 (no quotes) into the Pattern text entry and will get the following \nexception\n\n!ENTRY org.eclipse.ui 4 4 May 20, 2004 16:10:27.299\n!MESSAGE Unhandled event loop exception\n!ENTRY org.eclipse.ui 4 0 May 20, 2004 16:10:27.299\n!MESSAGE String index out of range: -3\n!STACK 0\njava.lang.StringIndexOutOfBoundsException: String index out of range: -3\n\tat java.lang.String.substring(String.java:1444)\n\tat \norg.eclipse.jdt.internal.ui.preferences.EditTemplateDialog.doSourceChanged\n(EditTemplateDialog.java:313)\n\tat \norg.eclipse.jdt.internal.ui.preferences.EditTemplateDialog$3.textChanged\n(EditTemplateDialog.java:382)\n\tat org.eclipse.jface.text.TextViewer.updateTextListeners\n(TextViewer.java:2235)\n\tat \norg.eclipse.jface.text.TextViewer$VisibleDocumentListener.documentChanged\n(TextViewer.java:301)\n\tat org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2\n(AbstractDocument.java:673)\n\tat org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged\n(AbstractDocument.java:638)\n\tat org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged\n(AbstractDocument.java:623)\n\tat org.eclipse.jface.text.AbstractDocument.fireDocumentChanged\n(AbstractDocument.java:698)\n\tat \norg.eclipse.jface.text.projection.ProjectionDocument.fireDocumentChanged\n(ProjectionDocument.java:696)\n\tat org.eclipse.jface.text.AbstractDocument.replace\n(AbstractDocument.java:989)\n\tat org.eclipse.jface.text.projection.ProjectionDocument.replace\n(ProjectionDocument.java:481)\n\tat org.eclipse.jface.text.DefaultDocumentAdapter.replaceTextRange\n(DefaultDocumentAdapter.java:208)\n\tat org.eclipse.swt.custom.StyledText.modifyContent(StyledText.java:5565)\n\tat org.eclipse.swt.custom.StyledText.sendKeyEvent(StyledText.java:6405)\n\tat org.eclipse.swt.custom.StyledText.doContent(StyledText.java:2535)\n\tat org.eclipse.swt.custom.StyledText.handleKey(StyledText.java:4963)\n\tat org.eclipse.swt.custom.StyledText.handleKeyDown(StyledText.java:4986)\n\tat org.eclipse.swt.custom.StyledText$7.handleEvent(StyledText.java:4731)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:805)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1724)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)\n\tat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3048)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2951)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3282)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1475)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2380)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat org.eclipse.ui.texteditor.templates.TemplatePreferencePage.add\n(TemplatePreferencePage.java:557)\n\tat org.eclipse.ui.texteditor.templates.TemplatePreferencePage.access$3\n(TemplatePreferencePage.java:549)\n\tat \norg.eclipse.ui.texteditor.templates.TemplatePreferencePage$5.handleEvent\n(TemplatePreferencePage.java:300)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat org.eclipse.ui.internal.OpenPreferencesAction.run\n(OpenPreferencesAction.java:72)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:899)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:850)\n\tat org.eclipse.jface.action.ActionContributionItem$7.handleEvent\n(ActionContributionItem.java:769)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:253)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:97)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:305)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:256)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:127)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:184)\n\tat org.eclipse.core.launcher.Main.run(Main.java:637)\n\tat org.eclipse.core.launcher.Main.main(Main.java:621)",
    "The prefix /**/r is not being preserved in the document.  When you type j, it \nis overwriting the first / rather than appending beyond the prefix.\n",
    "Tom, please investigate whether you can provide a fix for 0800 build",
    "Added a workaround which will disable javadoc syntax highlighting in the\ntemplate editor.\n\n----- behind the scene: \n\nEditTemplateDialog uses ITextViewer.setDocument(IDocument, int, int) to show\nonly a partial document in its pattern editor. This is done to get correct\nsyntax highlighting (the displayed document is internally prefixed with \u0027/**\u0027\nfor javadoc). \n\nIt seems that the ProjectionMapping implementing the partial document does not\nhandle the case well where the slave document is empty:\n\nProjectionMapping.toOriginRegion handles this case specially, returning the\nentire master document as the original region of (0,0). I would expect the\nbehaviour outlined by this test (from a modified ProjectionMappingTest):\n\npublic void test14a() {\n  // test toImageRegion \n  // test empty slave document\n  \n  fMasterDocument.set(\"abc\\n\");\n  fSlaveDocument.set(\"\");\n  addProjection(4, 0, 0);\n  \n  try {\n  \tIRegion origin\u003d fProjectionMapping.toOriginRegion(new Region(0, 0));\n  \tassertEquals(new Region(4, 0), origin); // fails, origin is (0, 4)\n  } catch (BadLocationException e) {\n  \tassertTrue(false);\n  }\t\t\n}\n\nThe behaviour and restrictions of the visible document capability of ITextViewer\nis not quite clear. Kai, what do you think?",
    "oh well, marking this as fixed an opening another one for the issue outlined in\nthe last comment."
  ],
  "commentCreationDates": [
    "2004-05-20T22:25:43+02:00",
    "2004-05-20T23:09:32+02:00",
    "2004-05-21T10:29:23+02:00",
    "2004-05-21T12:21:33+02:00",
    "2004-05-21T12:22:37+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StringIndexOutOfBoundsException",
      "message": "String index out of range: -3",
      "elements": [
        {
          "method": "java.lang.String.substring",
          "source": "String.java:1444"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.EditTemplateDialog.doSourceChanged",
          "source": "EditTemplateDialog.java:313"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.preferences.EditTemplateDialog$3.textChanged",
          "source": "EditTemplateDialog.java:382"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.updateTextListeners",
          "source": "TextViewer.java:2235"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$VisibleDocumentListener.documentChanged",
          "source": "TextViewer.java:301"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2",
          "source": "AbstractDocument.java:673"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:638"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:623"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentChanged",
          "source": "AbstractDocument.java:698"
        },
        {
          "method": "org.eclipse.jface.text.projection.ProjectionDocument.fireDocumentChanged",
          "source": "ProjectionDocument.java:696"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.replace",
          "source": "AbstractDocument.java:989"
        },
        {
          "method": "org.eclipse.jface.text.projection.ProjectionDocument.replace",
          "source": "ProjectionDocument.java:481"
        },
        {
          "method": "org.eclipse.jface.text.DefaultDocumentAdapter.replaceTextRange",
          "source": "DefaultDocumentAdapter.java:208"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.modifyContent",
          "source": "StyledText.java:5565"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.sendKeyEvent",
          "source": "StyledText.java:6405"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.doContent",
          "source": "StyledText.java:2535"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleKey",
          "source": "StyledText.java:4963"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleKeyDown",
          "source": "StyledText.java:4986"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$7.handleEvent",
          "source": "StyledText.java:4731"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:820"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:805"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1724"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1720"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3048"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2951"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3282"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1475"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2380"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.ui.texteditor.templates.TemplatePreferencePage.add",
          "source": "TemplatePreferencePage.java:557"
        },
        {
          "method": "org.eclipse.ui.texteditor.templates.TemplatePreferencePage.access$3",
          "source": "TemplatePreferencePage.java:549"
        },
        {
          "method": "org.eclipse.ui.texteditor.templates.TemplatePreferencePage$5.handleEvent",
          "source": "TemplatePreferencePage.java:300"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:72"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:899"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:850"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionContributionItem.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1363"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:253"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:97"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:305"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:256"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:127"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:184"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:637"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:621"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "63313",
      "date": "2004-05-20T22:25:43+02:00",
      "product": "JDT",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "63313",
  "bugId": "63313",
  "date": "2004-05-20T22:25:43+02:00",
  "product": "JDT",
  "component": "Text",
  "severity": "normal"
}