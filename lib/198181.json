{
  "comments": [
    "Consider the following test aspect and class\n\npackage m;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n@Aspect(\"pertarget(execution( public void m.M.run() ))\")\npublic class A {\n\tint i;\n\t@Around(\"execution( public void m.M.run() )\")\n\tpublic void count() {\n\t\tSystem.out.println(\"tick \" + (i++));\n\t}\n}\npackage m;\npublic class M {\n\tpublic void run() {\n\t}\n\tpublic static void main(String[] args) {\n\t\tfor (int i \u003d 0; i \u003c 3; i++) {\n\t\t\tnew M().run();\n\t\t}\n\t}\n}\n\nI get error message below when I run these class/aspect with LTW. No error message with compile time weaving. The code appears to work as expected in both cases. Tested with aspectj 1.5.3 and the latest dev build 20070611184800. \n\nMore information:\n     [java] loader (instance of  sun/misc/Launcher$AppClassLoader): attempted  duplicate class definition for name: \"m/A$ajcMightHaveAspect\"\n     [java] java.lang.LinkageError: loader (instance of  sun/misc/Launcher$AppClassLoader): attempted  duplicate class definition for name: \"m/A$ajcMightHaveAspect\"\n     [java] \tat java.lang.ClassLoader.defineClass1(Native Method)\n     [java] \tat java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n     [java] \tat java.lang.ClassLoader.defineClass(ClassLoader.java:465)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat java.lang.reflect.Method.invoke(Method.java:597)\n     [java] \tat org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.defineClass(ClassLoaderWeavingAdaptor.java:745)\n     [java] \tat org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.access$100(ClassLoaderWeavingAdaptor.java:58)\n     [java] \tat org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor$1.acceptClass(ClassLoaderWeavingAdaptor.java:129)\n     [java] \tat org.aspectj.weaver.tools.WeavingAdaptor$WeavingClassFileProvider$1.acceptResult(WeavingAdaptor.java:702)\n     [java] \tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1058)\n     [java] \tat org.aspectj.weaver.tools.WeavingAdaptor.getAtAspectJAspectBytes(WeavingAdaptor.java:368)\n     [java] \tat org.aspectj.weaver.tools.WeavingAdaptor.weaveClass(WeavingAdaptor.java:264)\n     [java] \tat org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:78)\n     [java] \tat org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:52)\n     [java] \tat sun.instrument.TransformerManager.transform(TransformerManager.java:169)\n     [java] \tat sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:365)\n     [java] \tat java.lang.ClassLoader.defineClass1(Native Method)\n     [java] \tat java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n     [java] \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n     [java] \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n     [java] \tat java.net.URLClassLoader.access$000(URLClassLoader.java:56)\n     [java] \tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n     [java] \tat java.security.AccessController.doPrivileged(Native Method)\n     [java] \tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n     [java] \tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n     [java] \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)\n     [java] \tat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n     [java] \tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n     [java] \tat m.M.run(M.java)\n     [java] \tat m.M.main(M.java:11)"
  ],
  "commentCreationDates": [
    "2007-07-28T08:41:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.LinkageError",
      "message": "loader (instance of  sun/misc/Launcher$AppClassLoader): attempted  duplicate class definition for name: \"m/A$ajcMightHaveAspect\"      [java]",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "198181",
      "date": "2007-07-28T08:41:06+02:00",
      "product": "AspectJ",
      "component": "LTWeaving",
      "severity": "normal"
    }
  ],
  "groupId": "198181",
  "bugId": "198181",
  "date": "2007-07-28T08:41:06+02:00",
  "product": "AspectJ",
  "component": "LTWeaving",
  "severity": "normal"
}