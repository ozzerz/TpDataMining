{
  "comments": [
    "I20071212-1800\n\nAST has a wrong source range for a method parameter with an array-valued annotation:\n\npackage xy;\n\npublic class C {\n\tvoid m(@SuppressWarnings({\"unused\", \"bla\"}) int arg) {\n\t\tint local;\n\t}\n}\n\n\nThe MethodDeclaration [34, 109] has the correct source range, but its body\u0027s Block [59, 17] has a wrong range (namely, the range of the ArrayInitializer in the SuppressWarnings annotation).\n\nThis causes e.g. an NPE when you select \"bla\", invoke Quick Fix, and select the \"Extract to local variable\" proposal:\n\nCaused by: java.lang.NullPointerException\nat org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.insertAt(ExtractTempRefactoring.java:710)\nat org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.createAndInsertTempDeclaration(ExtractTempRefactoring.java:645)\nat org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.createTempDeclaration(ExtractTempRefactoring.java:737)\nat org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.doCreateChange(ExtractTempRefactoring.java:525)\nat org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.checkFinalConditions(ExtractTempRefactoring.java:468)\nat org.eclipse.jdt.internal.ui.text.correction.QuickAssistProcessor$RefactoringCorrectionProposal.createTextChange(QuickAssistProcessor.java:1543)\nat org.eclipse.jdt.internal.ui.text.correction.proposals.CUCorrectionProposal.createChange(CUCorrectionProposal.java:478)\nat org.eclipse.jdt.internal.ui.text.correction.proposals.ChangeCorrectionProposal.getChange(ChangeCorrectionProposal.java:229)\nat org.eclipse.jdt.internal.ui.text.correction.proposals.CUCorrectionProposal.getTextChange(CUCorrectionProposal.java:488)\nat org.eclipse.jdt.internal.ui.text.correction.proposals.CUCorrectionProposal.getAdditionalProposalInfo(CUCorrectionProposal.java:172)\nat org.eclipse.jface.text.contentassist.AdditionalInfoController$6.run(AdditionalInfoController.java:162)",
    "Problem comes from the ASTConverter.retrieveStartBlockPosition(int,int) method which stops at the first opening brace although in this case it should not.\n",
    "Already happens in 3.3 \u003d\u003e not a stop ship for 3.4M4",
    "I\u0027ll have a look.",
    "The fix is trivial. It could have made it into 3.4M4 if this blocks an important feature from the UI, otherwise it can wait for 3.4M5.",
    "Once fixed, this would be a good candidate for 3.3.2 as it can break any users of the DOM/AST tree.",
    "Created an attachment (id\u003d85291)\nProposed fix + regression tests\n\nFr?d?ric, let me know what you think."
  ],
  "commentCreationDates": [
    "2007-12-13T10:42:09+01:00",
    "2007-12-13T12:25:44+01:00",
    "2007-12-13T12:28:52+01:00",
    "2007-12-13T17:09:02+01:00",
    "2007-12-13T22:07:58+01:00",
    "2007-12-14T01:18:08+01:00",
    "2007-12-14T16:29:00+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.insertAt",
          "source": "ExtractTempRefactoring.java:710"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.createAndInsertTempDeclaration",
          "source": "ExtractTempRefactoring.java:645"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.createTempDeclaration",
          "source": "ExtractTempRefactoring.java:737"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.doCreateChange",
          "source": "ExtractTempRefactoring.java:525"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.ExtractTempRefactoring.checkFinalConditions",
          "source": "ExtractTempRefactoring.java:468"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.QuickAssistProcessor$RefactoringCorrectionProposal.createTextChange",
          "source": "QuickAssistProcessor.java:1543"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.proposals.CUCorrectionProposal.createChange",
          "source": "CUCorrectionProposal.java:478"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.proposals.ChangeCorrectionProposal.getChange",
          "source": "ChangeCorrectionProposal.java:229"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.proposals.CUCorrectionProposal.getTextChange",
          "source": "CUCorrectionProposal.java:488"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.proposals.CUCorrectionProposal.getAdditionalProposalInfo",
          "source": "CUCorrectionProposal.java:172"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.AdditionalInfoController$6.run",
          "source": "AdditionalInfoController.java:162"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "212857",
      "date": "2007-12-13T10:42:09+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "212857",
  "bugId": "212857",
  "date": "2007-12-13T10:42:09+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}