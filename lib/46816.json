{
  "comments": [
    "If class A refers to B and B refers to A, and both of A.java and B.java has\naspects defined in them, ajc throws an exception if one uses \"ajc A.java\" or\n\"ajc B.java\" even if they are in the same directory. However, \"ajc A.java\nB.java\" works fine ...",
    "Created an attachment (id\u003d6825)\nthe first class for a compilation\n",
    "Created an attachment (id\u003d6826)\nthe 2nd class for a compilation\n",
    "It seems that if both classes have non-empty aspects defined in them and one of\nthem depends on the other, ajc cannot solve this dependency and ends up with a\nnull pointer exception. The problem is most like be in ResolvedTypeMunger.java\n(line 53, where matchType.getWorld() returns null!), ResolvedTypeX.java and\nConcreteTypeMunger.java.",
    "When I compile Class2 with \"ajc Class2.java\", I get:\n\ncan\u0027t find type Class1\njava.lang.NullPointerException\n        at org.aspectj.weaver.ResolvedTypeMunger.matches(ResolvedTypeMunger.java\n:53)\n        at org.aspectj.weaver.ConcreteTypeMunger.matches(ConcreteTypeMunger.java\n:52)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveIn\nterTypeDeclarations(AjLookupEnvironment.java:291)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveIn\nterTypeDeclarations(AjLookupEnvironment.java:228)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.complet\neTypeBindings(AjLookupEnvironment.java:109)\n        at org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.ja\nva:310)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:324)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilat\nion(AjBuildManager.java:373)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuild\nManager.java:125)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBu\nildManager.java:70)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:99)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:217)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\n/home/thomas/temp/tt/Class1.java:0 Internal compiler error\njava.lang.NullPointerException\n        at org.aspectj.weaver.ResolvedTypeMunger.matches(ResolvedTypeMunger.java\n:53)\n        at org.aspectj.weaver.ConcreteTypeMunger.matches(ConcreteTypeMunger.java\n:52)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveIn\nterTypeDeclarations(AjLookupEnvironment.java:291)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveIn\nterTypeDeclarations(AjLookupEnvironment.java:228)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.complet\neTypeBindings(AjLookupEnvironment.java:109)\n        at org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.ja\nva:310)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:324)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilat\nion(AjBuildManager.java:373)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuild\nManager.java:125)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBu\nildManager.java:70)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:99)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:217)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n!! no source information available !!\nABORT\nException thrown from AspectJ 1.1.1\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n        at org.aspectj.weaver.ResolvedTypeMunger.matches(ResolvedTypeMunger.java\n:53)\n        at org.aspectj.weaver.ConcreteTypeMunger.matches(ConcreteTypeMunger.java\n:52)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveIn\n                                            \nterTypeDeclarations(AjLookupEnvironment.java:291)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveIn\n                                            \nterTypeDeclarations(AjLookupEnvironment.java:228)\n        at org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.complet\n                                            \neTypeBindings(AjLookupEnvironment.java:109)\n        at org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.ja\n                                             va:310)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:324)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilat\n                                             ion(AjBuildManager.java:373)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuild\n                                             Manager.java:125)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBu\n                                             ildManager.java:70)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:99)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:217)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n1 fail|abort, 2 errors\n\nHowever, Class1 is in the same directory, and \"ajc Class1.java Class2.java\"\nworks fine!",
    "Added to the list under the general category of \"improve error messages from \nweaver\"\n\nThomas - the AspectJ compiler doesn\u0027t support resolution of types from the \nsourcepath. If \".\" is in your classpath and you have previously compiled such \nthat the .classs files are available, then you can compile successfully passing \nin just a single source file argument. If neither the source file nor the .class \nfile is available to AspectJ, it will fail because it can\u0027t resolve the missing \ntype.The error message you received does not explain this situation cleary!",
    "This bug is the same problem as 46671.  What is actually happening is that the \ncompiler is unable to locate \u0027Class1.class\u0027 so it looks on its classpath \nfor \u0027Class1.java\u0027 - if it finds it (i.e. you have \u0027.\u0027 on your CLASSPATH) then \nthe compiler attempts to build it as well.  AspectJ doesn\u0027t currently support \nthis kind of faulting in of source files, and the fix for 46671 prevents the \nNPE explosion shown in this bug report by deactivating the default JDT \ncompiler faulting behavior.  With the fix in place, \u0027ajc Class2.java\u0027 produces:\n\nC:\\eclipse\\aspectj_ws\\tests\\bugs\\Class2.java:4 Class1 cannot be resolved (or \nis not a valid type) for the field Class2.a\nClass1 a \u003d new Class1();\n^^^^^^\nC:\\eclipse\\aspectj_ws\\tests\\bugs\\Class2.java:4 Class1 cannot be resolved or is \nnot a type\nClass1 a \u003d new Class1();\n               ^^^^^^\n\n2 errors\n",
    "\n\n*** This bug has been marked as a duplicate of 46671 ***"
  ],
  "commentCreationDates": [
    "2003-11-18T02:32:31+01:00",
    "2003-11-18T02:33:32+01:00",
    "2003-11-18T02:33:56+01:00",
    "2003-11-18T03:32:36+01:00",
    "2003-11-18T03:37:08+01:00",
    "2003-12-08T14:05:24+01:00",
    "2004-01-09T17:07:59+01:00",
    "2004-01-12T09:36:33+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedTypeMunger.matches",
          "source": "ResolvedTypeMunger.java :53"
        },
        {
          "method": "org.aspectj.weaver.ConcreteTypeMunger.matches",
          "source": "ConcreteTypeMunger.java :52"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveInterTypeDeclarations",
          "source": "AjLookupEnvironment.java:291"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveInterTypeDeclarations",
          "source": "AjLookupEnvironment.java:228"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:109"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.ja va:310"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:324"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:373"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuild Manager.java:125"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:70"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:99"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 0,
      "commentIndex": 4,
      "bugId": "46816",
      "duplicateId": "46671",
      "date": "2003-11-18T03:37:08+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedTypeMunger.matches",
          "source": "ResolvedTypeMunger.java :53"
        },
        {
          "method": "org.aspectj.weaver.ConcreteTypeMunger.matches",
          "source": "ConcreteTypeMunger.java :52"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveInterTypeDeclarations",
          "source": "AjLookupEnvironment.java:291"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveInterTypeDeclarations",
          "source": "AjLookupEnvironment.java:228"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:109"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.ja va:310"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:324"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:373"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuild Manager.java:125"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:70"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:99"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "46816",
      "duplicateId": "46671",
      "date": "2003-11-18T03:37:08+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedTypeMunger.matches",
          "source": "ResolvedTypeMunger.java :53"
        },
        {
          "method": "org.aspectj.weaver.ConcreteTypeMunger.matches",
          "source": "ConcreteTypeMunger.java :52"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveInterTypeDeclarations",
          "source": "AjLookupEnvironment.java:291"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.weaveInterTypeDeclarations",
          "source": "AjLookupEnvironment.java:228"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:109"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.ja                                              va:310"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:324"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:373"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuild                                              Manager.java:125"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu                                              ildManager.java:70"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:99"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 2,
      "commentIndex": 4,
      "bugId": "46816",
      "duplicateId": "46671",
      "date": "2003-11-18T03:37:08+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    }
  ],
  "groupId": "46671",
  "bugId": "46816",
  "duplicateId": "46671",
  "date": "2003-11-18T02:32:31+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "enhancement"
}