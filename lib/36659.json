{
  "comments": [
    "I got an exception when launching eclipse in debug mode.  I have preferences \nset so that all perspectives open in their own window.  The debug pespective \nopened, but the debug view failed.\n\n\n!SESSION Apr 18, 2003 11:00:55.739 ---------------------------------------------\njava.version\u003d1.3.1_06\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -data d:\\ws\\gef -install file:D:/Eclipse2.1-Final/\n!ENTRY org.eclipse.ui 4 4 Apr 18, 2003 11:00:55.749\n!MESSAGE Unable to find Action Set: \ncom.instantiations.assist.eclipse.PatternActionSet\n!ENTRY org.eclipse.ui.workbench 4 2 Apr 18, 2003 11:00:55.799\n!MESSAGE Problems occurred when invoking code from plug-\nin: \"org.eclipse.ui.workbench\".\n!STACK 0\norg.eclipse.core.internal.runtime.AssertionFailedException: assertion failed: \nModel is read-only\n\tat org.eclipse.core.internal.runtime.Assert.isTrue(Assert.java:101)\n\tat org.eclipse.core.runtime.model.PluginModelObject.assertIsWriteable\n(PluginModelObject.java:43)\n\tat org.eclipse.core.internal.plugins.Extension.assertIsWriteable\n(Extension.java:79)\n\tat org.eclipse.core.runtime.model.ExtensionModel.setSubElements\n(ExtensionModel.java:151)\n\tat \norg.eclipse.core.internal.plugins.PluginRegistry.loadConfigurationElements\n(PluginRegistry.java:311)\n\tat org.eclipse.core.internal.plugins.Extension.getSubElements\n(Extension.java:69)\n\tat org.eclipse.core.internal.plugins.Extension.getConfigurationElements\n(Extension.java:25)\n\tat org.eclipse.debug.internal.ui.DelegatingModelPresentation.\u003cinit\u003e\n(DelegatingModelPresentation.java:67)\n\tat org.eclipse.debug.internal.ui.views.launch.LaunchView.createViewer\n(LaunchView.java:218)\n\tat org.eclipse.debug.ui.AbstractDebugView$ViewerPage.createControl\n(AbstractDebugView.java:253)\n\tat org.eclipse.debug.ui.AbstractDebugView.createDefaultPage\n(AbstractDebugView.java:335)\n\tat org.eclipse.ui.part.PageBookView.createPartControl\n(PageBookView.java:362)\n\tat org.eclipse.debug.ui.AbstractDebugView.createPartControl\n(AbstractDebugView.java:302)\n\tat org.eclipse.ui.internal.PartPane$4.run(PartPane.java:141)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:889)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.ui.internal.PartPane.createChildControl\n(PartPane.java:137)\n\tat org.eclipse.ui.internal.ViewPane.createChildControl\n(ViewPane.java:211)\n\tat org.eclipse.ui.internal.PartPane.createControl(PartPane.java:186)\n\tat org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:190)\n\tat org.eclipse.ui.internal.WorkbenchPage.findView\n(WorkbenchPage.java:1170)\n\tat \norg.eclipse.debug.internal.ui.views.launch.LaunchView.perspectiveActivated\n(LaunchView.java:471)\n\tat org.eclipse.ui.internal.PerspectiveListenerListOld$1.run\n(PerspectiveListenerListOld.java:44)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:889)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat \norg.eclipse.ui.internal.PerspectiveListenerListOld.firePerspectiveActivated\n(PerspectiveListenerListOld.java:42)\n\tat org.eclipse.ui.internal.WorkbenchWindow.firePerspectiveActivated\n(WorkbenchWindow.java:831)\n\tat org.eclipse.ui.internal.WorkbenchPage.init(WorkbenchPage.java:1696)\n\tat org.eclipse.ui.internal.WorkbenchPage.\u003cinit\u003e(WorkbenchPage.java:369)\n\tat org.eclipse.ui.internal.WorkbenchWindow.busyOpenPage\n(WorkbenchWindow.java:384)\n\tat org.eclipse.ui.internal.Workbench.busyOpenWorkbenchWindow\n(Workbench.java:405)\n\tat org.eclipse.ui.internal.Workbench.access$11(Workbench.java:398)\n\tat org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1178)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.Workbench.openWorkbenchWindow\n(Workbench.java:1175)\n\tat org.eclipse.ui.internal.Workbench.showPerspective\n(Workbench.java:1526)\n\tat \norg.eclipse.debug.internal.ui.launchConfigurations.PerspectiveManager$1.run\n(PerspectiveManager.java:117)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:98)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1815)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1549)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.block\n(ModalContext.java:136)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:261)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run\n(ProgressMonitorDialog.java:357)\n\tat org.eclipse.debug.ui.DebugUITools.launch(DebugUITools.java:494)\n\tat org.eclipse.debug.ui.actions.LaunchAction.run(LaunchAction.java:66)\n\tat org.eclipse.debug.ui.actions.LaunchAction.runWithEvent\n(LaunchAction.java:81)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:456)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:403)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:397)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:72)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1838)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1545)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)\n!ENTRY org.eclipse.ui 4 4 Apr 18, 2003 11:01:17.971\n!MESSAGE Unable to find Action Set: \ncom.instantiations.assist.eclipse.PatternActionSet",
    "Moving to platform for comment. We are simply doing a call \nto \"IExtenstion.getConfigurationElements()\" - what does \"Model is read-only\" \nindicate? ",
    "In 2.1 we implemented a lazy-loading mechanism for extensions\u0027 configuration \nelements, so they are only loaded when needed. This is why when trying to \nretrieve the configuration elements they have to be loaded \n(PluginRegistry#loadConfigurationElements) before. But \nextension#assertIsWritable is a no-op when an extension\u0027s configuration \nelements are being lazily loaded (because we need to set them after the whole \nplug-in registry has been marked as read only). I will investigate this \nfurther.",
    "It looks like a thread-safety issue. If the same extension is asked for its \nconfiguration elements in two different threads and the extension has not been \nloaded yet, the lazy loading mechanism may try to load the configuration \nelements twice (and then will fail).\n",
    "Created an attachment (id\u003d4666)\ntest case (patch for org.eclipse.core.tests.runtime)\n\nTest case that shows how two threads accessing the configuration elements of a\nlazily loaded extension may cause AssertionFailedExceptions (model is\nread-only). ",
    "A fix would be change the definition for method Extension#getSubElements to \nmake it thread-safe:\n\nsynchronized (this) {\n  // maybe it was lazily loaded\n  if (!fullyLoaded)\n    ((PluginRegistry) this.getParent().getRegistry()).loadConfigurationElements\n(this);\n}\nreturn super.getSubElements();\n\nIt is slightly slower than the current implementation, but the method runs so \nquickly that it does not affect registry cache loading time significantly (the \ndifference is only visible with millions of calls - around 2x to 3x slower).\n\nAlso, there is no risk of deadlocks - no other locks are obtained in the \nPluginRegistry#loadConfigurationElements call.\n\nI think it is a good idea to fix it for the next maintenance release.",
    "If you want to avoid the penalty of the synchronized(this), use this code \ninstead:\n\nif (!fullyLoaded) {\n  synchronized (this) {\n    // maybe it was lazily loaded\n    if (!fullyLoaded)\n      ((PluginRegistry)this.getParent().getRegistry())\n        .loadConfigurationElements(this);\n  }\n}\nreturn super.getSubElements();\n\n\nInstead of:\n  Obtain Lock-\u003ePerformTest\nyou do:\n  PerformTest-\u003eObtain Lock-\u003ePerformTest",
    "Old summary: \n\"Unable to create debug view when launching in debug mode\"",
    "Randy\u0027s code in comment #6 is not recommended, see:\n\nhttp://www.javaworld.com/jw-02-2001/jw-0209-double.html\n",
    "Agreed. Released fix and test case to 2.1 maintenance stream.",
    "Verified fix in 2.1.1 build 20030521."
  ],
  "commentCreationDates": [
    "2003-04-18T16:08:09+02:00",
    "2003-04-21T16:44:50+02:00",
    "2003-04-21T17:29:41+02:00",
    "2003-04-21T19:20:37+02:00",
    "2003-04-22T15:52:53+02:00",
    "2003-04-22T16:31:43+02:00",
    "2003-04-22T19:29:25+02:00",
    "2003-04-30T15:53:04+02:00",
    "2003-05-15T17:20:13+02:00",
    "2003-05-15T22:42:04+02:00",
    "2003-05-22T21:36:07+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.runtime.AssertionFailedException",
      "message": "assertion failed:  Model is read-only",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isTrue",
          "source": "Assert.java:101"
        },
        {
          "method": "org.eclipse.core.runtime.model.PluginModelObject.assertIsWriteable",
          "source": "PluginModelObject.java:43"
        },
        {
          "method": "org.eclipse.core.internal.plugins.Extension.assertIsWriteable",
          "source": "Extension.java:79"
        },
        {
          "method": "org.eclipse.core.runtime.model.ExtensionModel.setSubElements",
          "source": "ExtensionModel.java:151"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginRegistry.loadConfigurationElements",
          "source": "PluginRegistry.java:311"
        },
        {
          "method": "org.eclipse.core.internal.plugins.Extension.getSubElements",
          "source": "Extension.java:69"
        },
        {
          "method": "org.eclipse.core.internal.plugins.Extension.getConfigurationElements",
          "source": "Extension.java:25"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DelegatingModelPresentation.\u003cinit\u003e",
          "source": "DelegatingModelPresentation.java:67"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.createViewer",
          "source": "LaunchView.java:218"
        },
        {
          "method": "org.eclipse.debug.ui.AbstractDebugView$ViewerPage.createControl",
          "source": "AbstractDebugView.java:253"
        },
        {
          "method": "org.eclipse.debug.ui.AbstractDebugView.createDefaultPage",
          "source": "AbstractDebugView.java:335"
        },
        {
          "method": "org.eclipse.ui.part.PageBookView.createPartControl",
          "source": "PageBookView.java:362"
        },
        {
          "method": "org.eclipse.debug.ui.AbstractDebugView.createPartControl",
          "source": "AbstractDebugView.java:302"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane$4.run",
          "source": "PartPane.java:141"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:889"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.createChildControl",
          "source": "PartPane.java:137"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.createChildControl",
          "source": "ViewPane.java:211"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.createControl",
          "source": "PartPane.java:186"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.createControl",
          "source": "ViewPane.java:190"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.findView",
          "source": "WorkbenchPage.java:1170"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.perspectiveActivated",
          "source": "LaunchView.java:471"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectiveListenerListOld$1.run",
          "source": "PerspectiveListenerListOld.java:44"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:889"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectiveListenerListOld.firePerspectiveActivated",
          "source": "PerspectiveListenerListOld.java:42"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.firePerspectiveActivated",
          "source": "WorkbenchWindow.java:831"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.init",
          "source": "WorkbenchPage.java:1696"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.\u003cinit\u003e",
          "source": "WorkbenchPage.java:369"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.busyOpenPage",
          "source": "WorkbenchWindow.java:384"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyOpenWorkbenchWindow",
          "source": "Workbench.java:405"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$11",
          "source": "Workbench.java:398"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$13.run",
          "source": "Workbench.java:1178"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openWorkbenchWindow",
          "source": "Workbench.java:1175"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.showPerspective",
          "source": "Workbench.java:1526"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.PerspectiveManager$1.run",
          "source": "PerspectiveManager.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:98"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:1815"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1549"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.block",
          "source": "ModalContext.java:136"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:261"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:357"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.launch",
          "source": "DebugUITools.java:494"
        },
        {
          "method": "org.eclipse.debug.ui.actions.LaunchAction.run",
          "source": "LaunchAction.java:66"
        },
        {
          "method": "org.eclipse.debug.ui.actions.LaunchAction.runWithEvent",
          "source": "LaunchAction.java:81"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:456"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:403"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:397"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:72"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1838"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1545"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "36659",
      "date": "2003-04-18T16:08:09+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "36659",
  "bugId": "36659",
  "date": "2003-04-18T16:08:09+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}