{
  "comments": [
    "Build ID: Build id: I20061102-1715\n\nSteps To Reproduce:\nI manage the RCP Plugins in their own working set. Before exporting my RCP app, I have to close the plugins, since they have been imported to my workspace, and the build is not completing then (known bug to PDE).\n\nSo, I select all projects and select \"Close Project\" from the contextual menu. Sometimes, this operation is not finishing but stuck at 66%. I then have to kill the eclipse-process and restart. \n\nAlso, when re-opening these projects, I sometimes see it not happen. This is a stack I noticed after trying to open the projects again:\n\njava.lang.ClassCastException: org.eclipse.core.internal.resources.File\nat org.eclipse.ui.actions.OpenResourceAction.hasOtherClosedProjects(OpenResourceAction.java:119)\nat org.eclipse.ui.actions.OpenResourceAction.run(OpenResourceAction.java:189)\nat org.eclipse.jdt.ui.actions.OpenProjectAction.run(OpenProjectAction.java:152)\nat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:268)\nat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:244)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3463)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3077)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1924)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1888)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:348)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:341)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:285)\nat org.eclipse.core.launcher.Main.run(Main.java:987)\nat org.eclipse.core.launcher.Main.main(Main.java:962)\n\nUnfortunately this is not reproducable. Sometimes its working on the first try, sometimes not. I dont see anything in the logs when trying to close projects and it gets stuck doing so. \n\nThe RCP plugins are imported via \"Binary project with linked content\", maybe thats the reason for the problem. \n\nBen",
    "got fixed in 3.3 I20061121 with the fix for bug 164779",
    "Still seeing this in 3.3 M4",
    "This is now reproducible every time for me and given Bug 168365 makes 3.3 more or less useless for me.",
    "Thread Dump:\n\nName: Worker-3\nState: TIMED_WAITING on org.eclipse.core.internal.jobs.Semaphore@c4dc7c\nTotal blocked: 270  Total waited: 181\n\nStack trace: \njava.lang.Object.wait(Native Method)\norg.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:38)\norg.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:169)\norg.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:105)\norg.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:82)\norg.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)\norg.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1690)\norg.eclipse.core.internal.resources.Workspace.run(Workspace.java:1738)\norg.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:784)\norg.eclipse.jdt.core.JavaCore.setClasspathContainer(JavaCore.java:4128)\norg.eclipse.pde.internal.core.SearchablePluginsManager.updateClasspathContainer(SearchablePluginsManager.java:176)\norg.eclipse.pde.internal.core.SearchablePluginsManager.updateClasspathContainer(SearchablePluginsManager.java:161)\norg.eclipse.pde.internal.core.PluginModelManager.handleModelsChanged(PluginModelManager.java:283)\norg.eclipse.pde.internal.core.PluginModelManager.access$0(PluginModelManager.java:213)\norg.eclipse.pde.internal.core.PluginModelManager$1.modelsChanged(PluginModelManager.java:63)\norg.eclipse.pde.internal.core.WorkspaceModelManager.fireModelProviderEvent(WorkspaceModelManager.java:755)\n   - locked org.eclipse.pde.internal.core.WorkspaceModelManager@fee02f\norg.eclipse.pde.internal.core.WorkspaceModelManager.processModelChanges(WorkspaceModelManager.java:749)\norg.eclipse.pde.internal.core.WorkspaceModelManager.resourceChanged(WorkspaceModelManager.java:466)\norg.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:282)\norg.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:276)\norg.eclipse.core.internal.events.NotificationManager.handleEvent(NotificationManager.java:248)\norg.eclipse.core.internal.resources.Workspace.broadcastEvent(Workspace.java:251)\norg.eclipse.core.internal.resources.Project.close(Project.java:138)\norg.eclipse.ui.actions.CloseResourceAction.invokeOperation(CloseResourceAction.java:184)\norg.eclipse.ui.actions.WorkspaceAction.execute(WorkspaceAction.java:141)\norg.eclipse.ui.actions.WorkspaceAction$1.runInWorkspace(WorkspaceAction.java:460)\norg.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\norg.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n\nName: Worker-7\nState: BLOCKED on org.eclipse.pde.internal.core.WorkspaceModelManager@fee02f owned by: Worker-3\nTotal blocked: 142  Total waited: 164\n\nStack trace: \norg.eclipse.pde.internal.core.WorkspaceModelManager.fireModelProviderEvent(WorkspaceModelManager.java:754)\norg.eclipse.pde.internal.core.WorkspaceModelManager.processModelChanges(WorkspaceModelManager.java:749)\norg.eclipse.pde.internal.core.WorkspaceModelManager.resourceChanged(WorkspaceModelManager.java:461)\norg.eclipse.jdt.internal.core.DeltaProcessingState$1.run(DeltaProcessingState.java:364)\norg.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\norg.eclipse.jdt.internal.core.DeltaProcessingState.resourceChanged(DeltaProcessingState.java:359)\norg.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:282)\norg.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:276)\norg.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:148)\norg.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:257)\norg.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:964)\norg.eclipse.core.internal.resources.Workspace.run(Workspace.java:1752)\norg.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:39)\norg.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n\n\nName: Worker-8\nState: TIMED_WAITING on org.eclipse.core.internal.jobs.ThreadJob@1aa3e7b\nTotal blocked: 338  Total waited: 1.121\n\nStack trace: \njava.lang.Object.wait(Native Method)\norg.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:182)\norg.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)\norg.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:219)\norg.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)\norg.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1690)\norg.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1398)\norg.eclipse.core.internal.refresh.RefreshJob.runInWorkspace(RefreshJob.java:141)\norg.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\norg.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Reproducible also in 3.3 M2.\n\nWorks fine with 3.2",
    "Ok, so what is fixed is the ClassCastException from comment 0. The deadlock is still there. It seems it has to do with the workspace lock and a PDE lock.\nMoving to PDE.",
    "Looks like the lock problem reported in bug 168028\n\n*** This bug has been marked as a duplicate of bug 168028 ***"
  ],
  "commentCreationDates": [
    "2006-11-29T10:51:15+01:00",
    "2006-11-29T11:41:43+01:00",
    "2006-12-17T23:28:57+01:00",
    "2006-12-17T23:47:00+01:00",
    "2006-12-17T23:51:51+01:00",
    "2006-12-17T23:59:06+01:00",
    "2006-12-22T08:16:12+01:00",
    "2006-12-27T15:04:42+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.core.internal.resources.File",
      "elements": [
        {
          "method": "org.eclipse.ui.actions.OpenResourceAction.hasOtherClosedProjects",
          "source": "OpenResourceAction.java:119"
        },
        {
          "method": "org.eclipse.ui.actions.OpenResourceAction.run",
          "source": "OpenResourceAction.java:189"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.OpenProjectAction.run",
          "source": "OpenProjectAction.java:152"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:268"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:244"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:539"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:925"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3463"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3077"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1924"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1888"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:348"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:341"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:285"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:987"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:962"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166176",
      "duplicateId": "168028",
      "date": "2006-11-29T10:51:15+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "168028",
  "bugId": "166176",
  "duplicateId": "168028",
  "date": "2006-11-29T10:51:15+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}