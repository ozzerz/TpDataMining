{
  "comments": [
    "I have a following setup:\n1) There are two models (Saveables) A and B\n2) Both models are shown in a view (Project Explorer)\n3) The second model (B) is also shown in a few editors\n4) A non-part ISaveablesSource also registers with both of them\n\nI close the view and get prompted to save A - good. I decline and then get prompted to save both A and B - that\u0027s bad since I was already prompted to save A. I think we should have only the second prompt. I decline to save either which results in Project Explorer not being closed and a ConcurrentModificationException logged (see below).\n\nIf I repeat these steps I get prompted to save A, then prompted to save B and prompted to save A again (3 independent prompts). The Project Explorer does close after the third prompt in this case with no exception.\n\nStack trace:\njava.util.ConcurrentModificationException\n\tat java.util.HashMap$HashIterator.nextEntry(HashMap.java:842)\n\tat java.util.HashMap$KeyIterator.next(HashMap.java:878)\n\tat org.eclipse.ui.internal.SaveablesList.postClose(SaveablesList.java:501)\n\tat org.eclipse.ui.internal.WorkbenchPage.hideView(WorkbenchPage.java:2146)\n\tat org.eclipse.ui.internal.ViewPane.doHide(ViewPane.java:213)\n\tat org.eclipse.ui.internal.PartStack.close(PartStack.java:498)\n\tat org.eclipse.ui.internal.PartStack.close(PartStack.java:481)\n\tat org.eclipse.ui.internal.PartStack$1.close(PartStack.java:105)\n\tat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)\n\tat org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)\n\tat org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)\n\tat org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)\n\tat org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)\n\tat org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:580)\n\tat org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:187)\n        ...",
    "Actually, it is unrelated to the non-part source: I removed it and there is still the exception when closing Project Explorer with strange behavior afterwards if I decline saving dirty saveables.",
    "I should mention that this is with RC1a.",
    "I have fixed this in the meantime."
  ],
  "commentCreationDates": [
    "2006-04-27T18:07:16+02:00",
    "2006-04-27T19:04:31+02:00",
    "2006-04-27T19:16:00+02:00",
    "2006-04-27T19:53:11+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.ConcurrentModificationException",
      "elements": [
        {
          "method": "java.util.HashMap$HashIterator.nextEntry",
          "source": "HashMap.java:842"
        },
        {
          "method": "java.util.HashMap$KeyIterator.next",
          "source": "HashMap.java:878"
        },
        {
          "method": "org.eclipse.ui.internal.SaveablesList.postClose",
          "source": "SaveablesList.java:501"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.hideView",
          "source": "WorkbenchPage.java:2146"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.doHide",
          "source": "ViewPane.java:213"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.close",
          "source": "PartStack.java:498"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.close",
          "source": "PartStack.java:481"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack$1.close",
          "source": "PartStack.java:105"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent",
          "source": "TabbedStackPresentation.java:81"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:267"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:276"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1",
          "source": "DefaultTabFolder.java:1"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed",
          "source": "DefaultTabFolder.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners",
          "source": "PaneFolder.java:580"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder$3.close",
          "source": "PaneFolder.java:187"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "138975",
      "date": "2006-04-27T18:07:16+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "138975",
  "bugId": "138975",
  "date": "2006-04-27T18:07:16+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "critical"
}