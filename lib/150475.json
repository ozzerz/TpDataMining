{
  "comments": [
    "The chart generator thows a ChartException when a scatter chart contains DateTime data set, and the dates have a sub-second span (eg. 0.001sec - 0.010sec). If the date range has a large span, the Chart works ok.\n\nThe Exception is:\n\nJul 13, 2006 3:35:30 PM org.eclipse.birt.chart.exception.ChartException logThis\nSEVERE: Exception\norg.eclipse.birt.chart.exception.ChartException: Error in tick computations\n\tat org.eclipse.birt.chart.computation.withaxes.AutoScale.setTickCordinates(AutoScale.java:729)\n\tat org.eclipse.birt.chart.computation.withaxes.AutoScale.computeTicks(AutoScale.java:2382)\n\tat org.eclipse.birt.chart.computation.withaxes.AutoScale.computeScale(AutoScale.java:2166)\n\tat org.eclipse.birt.chart.computation.withaxes.PlotWith2DAxes.compute(PlotWith2DAxes.java:743)\n\tat org.eclipse.birt.chart.factory.Generator.build(Generator.java:943)\n\tat BIRTChartBug$MyPaintListener.paintControl(BIRTChartBug.java:153)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:83)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1045)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1030)\n\tat org.eclipse.swt.widgets.Control.gtk_expose_event(Control.java:1906)\n\tat org.eclipse.swt.widgets.Composite.gtk_expose_event(Composite.java:528)\n\tat org.eclipse.swt.widgets.Canvas.gtk_expose_event(Canvas.java:105)\n\tat org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1361)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3442)\n\tat org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)\n\tat org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:4777)\n\tat org.eclipse.swt.widgets.Display.eventProc(Display.java:1067)\n\tat org.eclipse.swt.internal.gtk.OS._gdk_window_process_updates(Native Method)\n\tat org.eclipse.swt.internal.gtk.OS.gdk_window_process_updates(OS.java:3058)\n\tat org.eclipse.swt.widgets.Control.update(Control.java:3382)\n\tat org.eclipse.swt.widgets.Shell.setVisible(Shell.java:1414)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:958)\n\tat BIRTChartBug.main(BIRTChartBug.java:172)\n\nThe code that generated this exception is:\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.GregorianCalendar;\n\nimport org.eclipse.birt.chart.device.IDeviceRenderer;\nimport org.eclipse.birt.chart.factory.GeneratedChartState;\nimport org.eclipse.birt.chart.factory.Generator;\nimport org.eclipse.birt.chart.model.Chart;\nimport org.eclipse.birt.chart.model.ChartWithAxes;\nimport org.eclipse.birt.chart.model.attribute.AxisType;\nimport org.eclipse.birt.chart.model.attribute.Bounds;\nimport org.eclipse.birt.chart.model.attribute.IntersectionType;\nimport org.eclipse.birt.chart.model.attribute.impl.BoundsImpl;\nimport org.eclipse.birt.chart.model.attribute.impl.ColorDefinitionImpl;\nimport org.eclipse.birt.chart.model.component.Axis;\nimport org.eclipse.birt.chart.model.component.Series;\nimport org.eclipse.birt.chart.model.component.impl.SeriesImpl;\nimport org.eclipse.birt.chart.model.data.DateTimeDataSet;\nimport org.eclipse.birt.chart.model.data.NumberDataSet;\nimport org.eclipse.birt.chart.model.data.SeriesDefinition;\nimport org.eclipse.birt.chart.model.data.impl.DateTimeDataSetImpl;\nimport org.eclipse.birt.chart.model.data.impl.NumberDataSetImpl;\nimport org.eclipse.birt.chart.model.data.impl.SeriesDefinitionImpl;\nimport org.eclipse.birt.chart.model.impl.ChartWithAxesImpl;\nimport org.eclipse.birt.chart.model.type.ScatterSeries;\nimport org.eclipse.birt.chart.model.type.impl.ScatterSeriesImpl;\nimport org.eclipse.birt.chart.util.PluginSettings;\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.events.PaintEvent;\nimport org.eclipse.swt.events.PaintListener;\nimport org.eclipse.swt.graphics.Rectangle;\nimport org.eclipse.swt.layout.FillLayout;\nimport org.eclipse.swt.widgets.Canvas;\nimport org.eclipse.swt.widgets.Composite;\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Shell;\n\npublic class BIRTChartBug {\n\tstatic Chart chart \u003d null;\n\tstatic Canvas canvas \u003d null;\n\n\tprivate static final class MyPaintListener implements PaintListener {\n\t\tpublic void paintControl(PaintEvent e) {\n\n\t\t\t// get device renderer\n\t\t\tIDeviceRenderer deviceRenderer \u003d null;\n\t\t\ttry {\n\t\t\t\tSystem.setProperty(\"STANDALONE\", \"true\");\n\t\t\t\tdeviceRenderer \u003d PluginSettings.instance().getDevice(\"dv.SWT\");\n\t\t\t} catch (Exception ex) {\n\t\t\t\tex.printStackTrace();\n\t\t\t\tSystem.exit(1);\n\t\t\t}\n\t\t\tdeviceRenderer.setProperty(IDeviceRenderer.GRAPHICS_CONTEXT, e.gc);\n\n\t\t\t// stay in the client area\u0027s bounds\n\t\t\tRectangle rect \u003d ((Composite) e.widget).getClientArea();\n\t\t\tfinal Bounds bounds \u003d BoundsImpl.create(rect.x + 2, rect.y + 2,\n\t\t\t\t\trect.width - 4, rect.height - 4);\n\t\t\tbounds.scale(72d / deviceRenderer.getDisplayServer()\n\t\t\t\t\t.getDpiResolution());\n\n\t\t\t// create chart\n\t\t\tif (chart \u003d\u003d null) {\n\t\t\t\tchart \u003d createDateTimeScatter();\n\t\t\t}\t\t\t\n\t\t\tif (chart !\u003d null) {\n\t\t\t\t// generate chart\n\t\t\t\tfinal Generator gr \u003d Generator.instance();\n\t\t\t\tGeneratedChartState state;\n\t\t\t\ttry {\n\t\t\t\t\tstate \u003d gr.build(deviceRenderer.getDisplayServer(), chart,\n\t\t\t\t\t\t\tbounds, null, null, null);\n\t\t\t\t\tgr.render(deviceRenderer, state);\n\t\t\t\t} catch (Exception ex) {\n\t\t\t\t\tex.printStackTrace();\n\t\t\t\t\tSystem.exit(1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tDisplay display \u003d new Display();\n\t\tShell shell \u003d new Shell(display);\n\t\tshell.setLayout(new FillLayout());\n\t\tshell.setText(\"Scatter Chart\");\n\t\tcanvas \u003d new Canvas(shell, SWT.NONE);\n\t\tcanvas.addPaintListener(new MyPaintListener());\n\t\tshell.setSize(640, 400);\n\t\tshell.open();\n\t\twhile (!shell.isDisposed()) {\n\t\t\tif (!display.readAndDispatch())\n\t\t\t\tdisplay.sleep();\n\t\t}\n\t\tdisplay.dispose();\n\t}\n\t\t\n\tpublic static final Chart createDateTimeScatter() {\n\t\tSystem.out.println(\"createDateTimeScatter\");\n\t\tChartWithAxes cwaScatter \u003d ChartWithAxesImpl.create();\n\n\t\t// Plot\n\t\tcwaScatter.getPlot().getClientArea().getOutline().setVisible(true);\n\n\t\t// Title\n\t\tcwaScatter.getTitle().setVisible(false);\n\n\t\t// X-Axis\n\t\tAxis xAxisPrimary \u003d ((ChartWithAxesImpl) cwaScatter)\n\t\t\t\t.getPrimaryBaseAxes()[0];\n\t\txAxisPrimary.getTitle().getCaption().setValue(\"Time\");\n\t\txAxisPrimary.setType(AxisType.DATE_TIME_LITERAL);\n\t\txAxisPrimary.getTitle().setVisible(true);\n\t\txAxisPrimary.getOrigin().setType(IntersectionType.MIN_LITERAL);\n\t\t\n\t\t// Y-Axis\n\t\tAxis yAxisPrimary \u003d ((ChartWithAxesImpl) cwaScatter)\n\t\t\t\t.getPrimaryOrthogonalAxis(xAxisPrimary);\n\t\tyAxisPrimary.getTitle().getCaption().setValue(\"Score\");\n\t\tyAxisPrimary.getTitle().setBackground(ColorDefinitionImpl.WHITE());\n\t\tyAxisPrimary.getTitle().setVisible(true);\n\t\tyAxisPrimary.setType(AxisType.LINEAR_LITERAL);\n\t\tyAxisPrimary.getOrigin().setType(IntersectionType.MIN_LITERAL);\n\n\t\t// create chart data\n\t\tint seriesLen \u003d 10;\n\t\tdouble[] yseries \u003d new double[seriesLen];\n\t\tCalendar[] datetime \u003d new Calendar[seriesLen];\n\t\tfor (int i \u003d 0; i \u003c seriesLen; i++) {\n\t\t\tyseries[i] \u003d ((double) i);\n\t\t\tdatetime[i] \u003d new GregorianCalendar();\n\t\t\tdatetime[i].setTime(new Date(i));\n                        // uncomment the following line and chart works ok\n\t\t\t// datetime[i].setTime(new Date(i*1000));\n\t\t}\n\t\tNumberDataSet dsNumericValues2 \u003d NumberDataSetImpl.create(yseries);\n\t\tDateTimeDataSet dsDateTime \u003d DateTimeDataSetImpl.create(datetime);\n\t\t\n\t\t// X-Series\n\t\tSeries seBase \u003d SeriesImpl.create();\n\t\tseBase.setDataSet(dsDateTime);\n\t\tSeriesDefinition sdX \u003d SeriesDefinitionImpl.create();\n\t\txAxisPrimary.getSeriesDefinitions().add(sdX);\n\t\tsdX.getSeries().add(seBase);\n\n\t\t// Y-Series\n\t\tScatterSeries ss \u003d (ScatterSeries) ScatterSeriesImpl.create();\n\t\tss.setDataSet(dsNumericValues2);\n\t\tSeriesDefinition sdY \u003d SeriesDefinitionImpl.create();\n\t\tyAxisPrimary.getSeriesDefinitions().add(sdY);\n\t\tsdY.getSeries().add(ss);\n\n\t\treturn cwaScatter;\n\t}\n\t\n\n}",
    "fixed on 7/17/2006. Note that you need to use ICU for your Calendar class when \nupgrading to 2.1 (since all Eclipse code has been migrated to use ICU, \nincluding the Chart Engine, it only requires changing the import statements as \nmost of the API are the same with java.util.Calendar)"
  ],
  "commentCreationDates": [
    "2006-07-13T08:07:15+02:00",
    "2006-07-17T17:53:47+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.birt.chart.exception.ChartException",
      "message": "Error in tick computations",
      "elements": [
        {
          "method": "org.eclipse.birt.chart.computation.withaxes.AutoScale.setTickCordinates",
          "source": "AutoScale.java:729"
        },
        {
          "method": "org.eclipse.birt.chart.computation.withaxes.AutoScale.computeTicks",
          "source": "AutoScale.java:2382"
        },
        {
          "method": "org.eclipse.birt.chart.computation.withaxes.AutoScale.computeScale",
          "source": "AutoScale.java:2166"
        },
        {
          "method": "org.eclipse.birt.chart.computation.withaxes.PlotWith2DAxes.compute",
          "source": "PlotWith2DAxes.java:743"
        },
        {
          "method": "org.eclipse.birt.chart.factory.Generator.build",
          "source": "Generator.java:943"
        },
        {
          "method": "BIRTChartBug$MyPaintListener.paintControl",
          "source": "BIRTChartBug.java:153"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:83"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1021"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1045"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1030"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.gtk_expose_event",
          "source": "Control.java:1906"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.gtk_expose_event",
          "source": "Composite.java:528"
        },
        {
          "method": "org.eclipse.swt.widgets.Canvas.gtk_expose_event",
          "source": "Canvas.java:105"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.windowProc",
          "source": "Widget.java:1361"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3442"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS._gtk_main_do_event",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.gtk_main_do_event",
          "source": "OS.java:4777"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.eventProc",
          "source": "Display.java:1067"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS._gdk_window_process_updates",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.gdk_window_process_updates",
          "source": "OS.java:3058"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.update",
          "source": "Control.java:3382"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.setVisible",
          "source": "Shell.java:1414"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:958"
        },
        {
          "method": "BIRTChartBug.main",
          "source": "BIRTChartBug.java:172"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "150475",
      "date": "2006-07-13T08:07:15+02:00",
      "product": "BIRT",
      "component": "Chart",
      "severity": "normal"
    }
  ],
  "groupId": "150475",
  "bugId": "150475",
  "date": "2006-07-13T08:07:15+02:00",
  "product": "BIRT",
  "component": "Chart",
  "severity": "normal"
}