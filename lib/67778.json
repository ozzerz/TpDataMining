{
  "comments": [
    "20040618\n\nIn the latest I builds I always find the following exception in the log. Except\nof the log entry, startup seems to work fine.\n\n!ENTRY org.eclipse.osgi Jun 18, 2004 11:13:47.226\n!MESSAGE While loading class\n\"org.eclipse.team.internal.ui.synchronize.actions.GlobalRefreshAction$RefreshParticipantAction\",\nthread \"main\" timed out waiting (5000ms) for thread \"Worker-6\" to finish\nstarting bundle \"org.eclipse.team.ui\". To avoid deadlock, thread \"main\" is\nproceeding but\n\"org.eclipse.team.internal.ui.synchronize.actions.GlobalRefreshAction$RefreshParticipantAction\"\nmay not be fully initialized.\n!STACK 0\njava.lang.Exception: Generated exception.\n\tat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:102)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\n\tat\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n\tat java.lang.Class.getDeclaredConstructors0(Native Method)\n\tat java.lang.Class.privateGetDeclaredConstructors(Class.java:1610)\n\tat java.lang.Class.getConstructor0(Class.java:1922)\n\tat java.lang.Class.newInstance0(Class.java:278)\n\tat java.lang.Class.newInstance(Class.java:261)\n\tat\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:141)\n\tat\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:124)\n\tat\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:113)\n\tat\norg.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:189)\n\tat org.eclipse.ui.internal.PluginAction.createDelegate(PluginAction.java:114)\n\tat\norg.eclipse.ui.internal.WWinPluginAction.refreshActionList(WWinPluginAction.java:147)\n\tat org.eclipse.ui.plugin.AbstractUIPlugin$3.run(AbstractUIPlugin.java:803)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:106)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2709)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2401)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1375)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1346)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:252)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:272)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:128)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:186)\n\tat org.eclipse.core.launcher.Main.run(Main.java:647)\n\tat org.eclipse.core.launcher.Main.main(Main.java:631)",
    "Martin, do you have decorators on? How many projects do you have in the \nworkspace? I suspect that this could happen if a background thread (I\u0027m \nguessing the decorator) was starving out the UI thread.\n\nPascal, I have two questions for you. First of all, the error message is \nstrange. It says that the main thread times out waiting for \"worker-6\" to \nfinish. Does the class loader wait for the thread to finish or just for the \nthread to finish initializing the plugin. If it\u0027s the later, the message \nshould be changed. If it\u0027s the former, than this is a problem. Also, is there \nany tracing that can be enabled to see what is happening in worker-6 thread \nstartup of the TeamUIPlugin (i.e. to see how long it is taking)?",
    "Yes, I have the CVS decorators enabled. There are about 20 projects in the \nworkspace that are shared under CVS, and also our connection to the CVS server \nis not super fast.",
    "The classloader is waiting for the plugin startup code to complete. \nIn this case, the message saying: \"for thread \"Worker-6\" to finish\nstarting bundle \"org.eclipse.team.ui\"\" captures the fact that \norg.eclipse.team.ui is being started by \"worker-6\".\n\nIf you turn on the debug option \"org.eclipse.osgi/trace/activation\", you will \nget a message when such a situation may occur (it is a preemptive message, we \nhave not timed out yet).",
    "TeamUIPlugin is checking persistant properties on projects to see if \ncapabilities need to be auto-enabled. This can take a long time. We could put \nthis is a background thread so it doesn\u0027t interfer with plugin startup. Also, \nwe do it on every startup but it really only needs to be done once per \nworkspace (i.e. it needs to be done the first time an old workspace is started \nwith 3.0 and never again).",
    "We could also make the synchronize manager initialization lazy? It is my\nimpression that this should be fixed for 3.0 RC3.",
    "Created an attachment (id\u003d12491)\npatch\n",
    "DJ, could we discuss and see if we should include in 3.0.",
    "fixed."
  ],
  "commentCreationDates": [
    "2004-06-18T11:29:17+02:00",
    "2004-06-18T13:21:48+02:00",
    "2004-06-18T13:25:22+02:00",
    "2004-06-18T15:41:04+02:00",
    "2004-06-18T16:15:50+02:00",
    "2004-06-18T16:46:08+02:00",
    "2004-06-18T17:53:21+02:00",
    "2004-06-18T19:16:44+02:00",
    "2004-06-18T21:42:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Generated exception.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass",
          "source": "EclipseClassLoader.java:102"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:371"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:402"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:93"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:235"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:302"
        },
        {
          "method": "java.lang.Class.getDeclaredConstructors0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.privateGetDeclaredConstructors",
          "source": "Class.java:1610"
        },
        {
          "method": "java.lang.Class.getConstructor0",
          "source": "Class.java:1922"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:278"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:261"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:141"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:124"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:113"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin.createExtension",
          "source": "WorkbenchPlugin.java:189"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.createDelegate",
          "source": "PluginAction.java:114"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.refreshActionList",
          "source": "WWinPluginAction.java:147"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$3.run",
          "source": "AbstractUIPlugin.java:803"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2709"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2401"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1375"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1346"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:252"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:272"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:128"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:186"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:647"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:631"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "67778",
      "date": "2004-06-18T11:29:17+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "normal"
    }
  ],
  "groupId": "67778",
  "bugId": "67778",
  "date": "2004-06-18T11:29:17+02:00",
  "product": "Platform",
  "component": "Team",
  "severity": "normal"
}