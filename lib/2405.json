{
  "comments": [
    "We have code generation that runs in a background thread.  It is invoked like:\n\t\t\tProgressMonitorDialog dialog \u003d getProgressMonitorDialog();\n\t\t\tEJBDeployBeansOperation operation \u003d new EJBDeployBeansOperation(getProject(), enterpriseBeans);\n\t\t\tIRunnableWithProgress runnable \u003d J2EEUIPlugin.getRunnableWithProgress(operation);\t\t\n\t\t\tdialog.run(true, true, runnable); \t// true\u003d\u003dfork, true\u003d\u003dcancelable\n\n(more details on this part available if necessary)\n\nIn the forked thread a java source file is generated.  If the java editor is open on that \nsource file at that time, the following exception is thrown.\n\nUnhandled exception caught in event loop.\nReason:\njava.lang.NullPointerException\norg.eclipse.swt.SWTException: Invalid thread access\n        at org.eclipse.swt.SWTException.\u003cinit\u003e(SWTException.java:45)\n        at org.eclipse.swt.SWTException.\u003cinit\u003e(SWTException.java:34)\n        at org.eclipse.swt.SWT.error(SWT.java:1774)\n        at org.eclipse.swt.SWT.error(SWT.java:1707)\n        at org.eclipse.swt.widgets.Widget.error(Widget.java:378)\n        at org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:193)\n        at org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:257)\n        at org.eclipse.jface.window.Window.createShell(Window.java:271)\n        at org.eclipse.jface.window.Window.create(Window.java:237)\n        at org.eclipse.jface.window.Window.open(Window.java:515)\n        at org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:319)\n        at org.eclipse.ui.internal.SafeRunnableAdapter.handleException(SafeRunnableAdapter.java:39)\n        at org.eclipse.ui.part.WorkbenchPart$1.handleException(WorkbenchPart.java:85)\n        at org.eclipse.core.internal.runtime.InternalPlatform.handleException(InternalPlatform.java:306)\n        at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java(Compiled Code))\n        at org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))\n        at org.eclipse.ui.part.WorkbenchPart.firePropertyChange(WorkbenchPart.java:80)\n        at org.eclipse.ui.texteditor.AbstractTextEditor.firePropertyChange(AbstractTextEditor.java:1223)\n        at org.eclipse.ui.texteditor.AbstractTextEditor$ElementStateListener.elementDirtyStateChanged(AbstractTextEditor.java:99)\n        at org.eclipse.ui.texteditor.AbstractDocumentProvider.fireElementDirtyStateChanged(AbstractDocumentProvider.java:383)\n        at org.eclipse.ui.texteditor.AbstractDocumentProvider$ElementInfo.documentChanged(AbstractDocumentProvider.java:96)\n        at org.eclipse.jface.text.AbstractDocument.fireDocumentChanged(AbstractDocument.java:427)\n        at org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:712)\n        at org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitDocumentProvider$BufferSynchronizer.bufferChanged(CompilationUnitDocumentProvider.java:106)\n        at org.eclipse.jdt.internal.core.Buffer.notifyChanged(Buffer.java:291)\n        at org.eclipse.jdt.internal.core.Buffer.setContents(Buffer.java:428)\n        at org.eclipse.jdt.internal.core.DeleteElementsOperation.commitChanges(DeleteElementsOperation.java:57)\n        at org.eclipse.jdt.internal.core.DeleteElementsOperation.processElement(DeleteElementsOperation.java:128)\n        at org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:183)\n        at org.eclipse.jdt.internal.core.DeleteElementsOperation.processElements(DeleteElementsOperation.java:139)\n        at org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:87)\n        at org.eclipse.jdt.internal.core.JavaModelOperation.execute(JavaModelOperation.java:258)\n        at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:453)\n        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1093)\n        at org.eclipse.jdt.internal.core.JavaModelManager.runOperation(JavaModelManager.java:952)\n        at org.eclipse.jdt.internal.core.JavaElement.runOperation(JavaElement.java:509)\n        at org.eclipse.jdt.internal.core.JavaModel.delete(JavaModel.java:165)\n        at org.eclipse.jdt.internal.core.SourceRefElement.delete(SourceRefElement.java:46)\n        at com.ibm.etools.java.codegen.JavaTypeGenerator.generateTarget(JavaTypeGenerator.java:114)\n        at com.ibm.etools.java.codegen.JavaMemberGenerator.run(JavaMemberGenerator.java:234)\n        at com.ibm.etools.codegen.BaseGenerator.runChildren(BaseGenerator.java:190)\n        at com.ibm.etools.codegen.BaseGenerator.run(BaseGenerator.java:182)\n        at com.ibm.etools.java.codegen.JavaCompilationUnitGenerator.run(JavaCompilationUnitGenerator.java:350)\n        at com.ibm.etools.ejbdeploy.generators.RemoteImpl.run(RemoteImpl.java:54)\n        at com.ibm.etools.codegen.BaseGenerator.runChildren(BaseGenerator.java:190)\n        at com.ibm.etools.codegen.BaseGenerator.run(BaseGenerator.java:182)\n        at com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.deploySession(EJBDeployOperation.java:197)\n        at com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.run(EJBDeployOperation.java:444)\n        at com.ibm.etools.j2ee.ui.RunnableWithProgressWrapper.run(RunnableWithProgressWrapper.java:49)\n        at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:99)\n\nNOTES:\n\nEG (6/7/2001 12:49:24 PM)\n\tthe problme is that JFace text is not designed to be accessible from multiple threads. This is \n\tconsistent with JFace.\n\tWorkaround is to call the progress monitor with fork\u003dfalse.\n\tThis has the negative consequence that the operaiton runs in the UI thread and cannot\n\tbe cancelled.\n\tFor more background see:\n\t\t1GCEE6Y: ITPUI:ALL - Architectural issue - using RunnableContext in \"forked\" mode\n\nEG (7/12/01 11:53:12 AM)\n\tCannot do anything about this in JUI, moving to ITPUI.",
    "PRODUCT VERSION:\nSeen in build 107.  Sorry, we don\u0027t have our code on later versions yet to verify,\nso this may already be fixed.\n\n",
    "Closing based on latest comments"
  ],
  "commentCreationDates": [
    "2001-10-11T04:35:48+02:00",
    "2001-10-29T23:26:02+01:00",
    "2002-01-22T03:03:14+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWTException.\u003cinit\u003e",
          "source": "SWTException.java:45"
        },
        {
          "method": "org.eclipse.swt.SWTException.\u003cinit\u003e",
          "source": "SWTException.java:34"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1774"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1707"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:378"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:193"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:257"
        },
        {
          "method": "org.eclipse.jface.window.Window.createShell",
          "source": "Window.java:271"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:237"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:515"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:319"
        },
        {
          "method": "org.eclipse.ui.internal.SafeRunnableAdapter.handleException",
          "source": "SafeRunnableAdapter.java:39"
        },
        {
          "method": "org.eclipse.ui.part.WorkbenchPart$1.handleException",
          "source": "WorkbenchPart.java:85"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.handleException",
          "source": "InternalPlatform.java:306"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.part.WorkbenchPart.firePropertyChange",
          "source": "WorkbenchPart.java:80"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.firePropertyChange",
          "source": "AbstractTextEditor.java:1223"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor$ElementStateListener.elementDirtyStateChanged",
          "source": "AbstractTextEditor.java:99"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDocumentProvider.fireElementDirtyStateChanged",
          "source": "AbstractDocumentProvider.java:383"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDocumentProvider$ElementInfo.documentChanged",
          "source": "AbstractDocumentProvider.java:96"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentChanged",
          "source": "AbstractDocument.java:427"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.replace",
          "source": "AbstractDocument.java:712"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitDocumentProvider$BufferSynchronizer.bufferChanged",
          "source": "CompilationUnitDocumentProvider.java:106"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Buffer.notifyChanged",
          "source": "Buffer.java:291"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Buffer.setContents",
          "source": "Buffer.java:428"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeleteElementsOperation.commitChanges",
          "source": "DeleteElementsOperation.java:57"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeleteElementsOperation.processElement",
          "source": "DeleteElementsOperation.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.core.MultiOperation.processElements",
          "source": "MultiOperation.java:183"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeleteElementsOperation.processElements",
          "source": "DeleteElementsOperation.java:139"
        },
        {
          "method": "org.eclipse.jdt.internal.core.MultiOperation.executeOperation",
          "source": "MultiOperation.java:87"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.execute",
          "source": "JavaModelOperation.java:258"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:453"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1093"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.runOperation",
          "source": "JavaModelManager.java:952"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.runOperation",
          "source": "JavaElement.java:509"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModel.delete",
          "source": "JavaModel.java:165"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SourceRefElement.delete",
          "source": "SourceRefElement.java:46"
        },
        {
          "method": "com.ibm.etools.java.codegen.JavaTypeGenerator.generateTarget",
          "source": "JavaTypeGenerator.java:114"
        },
        {
          "method": "com.ibm.etools.java.codegen.JavaMemberGenerator.run",
          "source": "JavaMemberGenerator.java:234"
        },
        {
          "method": "com.ibm.etools.codegen.BaseGenerator.runChildren",
          "source": "BaseGenerator.java:190"
        },
        {
          "method": "com.ibm.etools.codegen.BaseGenerator.run",
          "source": "BaseGenerator.java:182"
        },
        {
          "method": "com.ibm.etools.java.codegen.JavaCompilationUnitGenerator.run",
          "source": "JavaCompilationUnitGenerator.java:350"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.generators.RemoteImpl.run",
          "source": "RemoteImpl.java:54"
        },
        {
          "method": "com.ibm.etools.codegen.BaseGenerator.runChildren",
          "source": "BaseGenerator.java:190"
        },
        {
          "method": "com.ibm.etools.codegen.BaseGenerator.run",
          "source": "BaseGenerator.java:182"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.deploySession",
          "source": "EJBDeployOperation.java:197"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.run",
          "source": "EJBDeployOperation.java:444"
        },
        {
          "method": "com.ibm.etools.j2ee.ui.RunnableWithProgressWrapper.run",
          "source": "RunnableWithProgressWrapper.java:49"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:99"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "2405",
      "date": "2001-10-11T04:35:48+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "enhancement"
    }
  ],
  "groupId": "2405",
  "bugId": "2405",
  "date": "2001-10-11T04:35:48+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "enhancement"
}