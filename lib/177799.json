{
  "comments": [
    "I have an issue which seems to be a breach in ClassLoader isolation between plugins. I\u0027m not quite sure it\u0027s really a bug and I\u0027m also not sure if this is the place to report it, please correct me if I\u0027m wrong.\n\nThe issue: I\u0027m developing a plugin (\"FS\") that uses another plugin (\"DB\"). The DB plugin uses classes from the DOM W3C package. The FS plugin does not rely on those classes explicitly, but indirectly.\n\nThe problem is that I sometimes get the following error (LinkageError) when testing the plugin. I\u0027ve been able to trace the sometimes to exactly when I used the oXygen XML editor in that IDE session before. The bug also happens the other way round, if I first access code from my plugin and then from oXygen, oXygen fails. If I disable the oXygen plugin, everything is ok and works.\n\nSo it appears to me that oXygen probably contains these certain classes (W3C DOM, usually in xml-apis.jar), and somehow oXygen\u0027s classes mess up the class loading of my plugin, and vice-versa. I presume that is not intended or expected behaviour?\n\n!ENTRY org.eclipse.ui.ide 4 4 2007-03-16 18:31:19.793\n!MESSAGE Exception in org.eclipse.ui.dialogs.WizardNewFileCreationPage.createNewFile(): java.lang.LinkageError: loader constraints violated when linking org/w3c/dom/DOMConfiguration class\n\n!ENTRY org.eclipse.ui.ide 4 4 2007-03-16 18:31:19.793\n!MESSAGE Exception in org.eclipse.ui.dialogs.WizardNewFileCreationPage.createNewFile(): java.lang.LinkageError: loader constraints violated when linking org/w3c/dom/DOMConfiguration class\n!STACK 0\njava.lang.LinkageError: loader constraints violated when linking org/w3c/dom/DOMConfiguration class\n\tat com.xhive.dom.DomLibrary.createLSParser(DomLibrary.java:1239)\n\tat com.xhive.dom.DomLibrary.createLSParser(DomLibrary.java:1222)\n\tat com.xhive.dom.DomLibrary.createLSParser(DomLibrary.java:1)\n\tat com.xhive.gui.fs.XhiveFileStore$DocumentOutputStream.close(XhiveFileStore.java:336)\n\tat org.eclipse.core.internal.utils.FileUtil.safeClose(FileUtil.java:193)\n\tat org.eclipse.core.internal.utils.FileUtil.transferStreams(FileUtil.java:246)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.write(FileSystemResourceManager.java:903)\n\tat org.eclipse.core.internal.resources.File.internalSetContents(File.java:319)\n\tat org.eclipse.core.internal.resources.File.create(File.java:148)\n\tat org.eclipse.core.internal.resources.File.create(File.java:176)\n\tat org.eclipse.ui.internal.ide.undo.FileDescription.createExistentResourceFromHandle(FileDescription.java:197)\n\tat org.eclipse.ui.internal.ide.undo.AbstractResourceDescription.createResource(AbstractResourceDescription.java:87)\n\tat org.eclipse.ui.ide.undo.WorkspaceUndoUtil.recreate(WorkspaceUndoUtil.java:531)\n\tat org.eclipse.ui.ide.undo.AbstractResourcesOperation.recreate(AbstractResourcesOperation.java:124)\n\tat org.eclipse.ui.ide.undo.AbstractCreateResourcesOperation.doExecute(AbstractCreateResourcesOperation.java:63)\n\tat org.eclipse.ui.ide.undo.AbstractWorkspaceOperation$1.run(AbstractWorkspaceOperation.java:210)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1798)\n\tat org.eclipse.ui.ide.undo.AbstractWorkspaceOperation.execute(AbstractWorkspaceOperation.java:208)\n\tat org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:509)\n\tat org.eclipse.ui.dialogs.WizardNewFileCreationPage$4.run(WizardNewFileCreationPage.java:354)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)",
    "I suspect this has something to do with two bundles both containing their own version of the xml APIs.\n\nCan you try running with org.osgi.framework.bootdelegation\u003d* in your config.ini?  This will force everyone to use the xml APIs provided by the VM.  If that works then it appears that the extra xml packages from oxigen are conflicting with the system\u0027s.",
    "Thanks, that fixed it.\n\nBut I suppose this can\u0027t be the normal/regular behaviour?\n\nEarlier I had this API in my \"DB\" bundle, but I removed it because I ran into these issues. The classes from xml-apis.jar are indeed bundled in JVMs since 1.5, I think, so plugins still come with them for 1.4 JVMs.",
    "Changing OS from Mac OS to Mac OS X as per bug 185991"
  ],
  "commentCreationDates": [
    "2007-03-16T18:40:50+01:00",
    "2007-03-16T19:29:51+01:00",
    "2007-03-16T19:41:15+01:00",
    "2007-07-29T15:22:05+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.LinkageError",
      "message": "loader constraints violated when linking org/w3c/dom/DOMConfiguration class",
      "elements": [
        {
          "method": "com.xhive.dom.DomLibrary.createLSParser",
          "source": "DomLibrary.java:1239"
        },
        {
          "method": "com.xhive.dom.DomLibrary.createLSParser",
          "source": "DomLibrary.java:1222"
        },
        {
          "method": "com.xhive.dom.DomLibrary.createLSParser",
          "source": "DomLibrary.java:1"
        },
        {
          "method": "com.xhive.gui.fs.XhiveFileStore$DocumentOutputStream.close",
          "source": "XhiveFileStore.java:336"
        },
        {
          "method": "org.eclipse.core.internal.utils.FileUtil.safeClose",
          "source": "FileUtil.java:193"
        },
        {
          "method": "org.eclipse.core.internal.utils.FileUtil.transferStreams",
          "source": "FileUtil.java:246"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.write",
          "source": "FileSystemResourceManager.java:903"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.internalSetContents",
          "source": "File.java:319"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.create",
          "source": "File.java:148"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.create",
          "source": "File.java:176"
        },
        {
          "method": "org.eclipse.ui.internal.ide.undo.FileDescription.createExistentResourceFromHandle",
          "source": "FileDescription.java:197"
        },
        {
          "method": "org.eclipse.ui.internal.ide.undo.AbstractResourceDescription.createResource",
          "source": "AbstractResourceDescription.java:87"
        },
        {
          "method": "org.eclipse.ui.ide.undo.WorkspaceUndoUtil.recreate",
          "source": "WorkspaceUndoUtil.java:531"
        },
        {
          "method": "org.eclipse.ui.ide.undo.AbstractResourcesOperation.recreate",
          "source": "AbstractResourcesOperation.java:124"
        },
        {
          "method": "org.eclipse.ui.ide.undo.AbstractCreateResourcesOperation.doExecute",
          "source": "AbstractCreateResourcesOperation.java:63"
        },
        {
          "method": "org.eclipse.ui.ide.undo.AbstractWorkspaceOperation$1.run",
          "source": "AbstractWorkspaceOperation.java:210"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1798"
        },
        {
          "method": "org.eclipse.ui.ide.undo.AbstractWorkspaceOperation.execute",
          "source": "AbstractWorkspaceOperation.java:208"
        },
        {
          "method": "org.eclipse.core.commands.operations.DefaultOperationHistory.execute",
          "source": "DefaultOperationHistory.java:509"
        },
        {
          "method": "org.eclipse.ui.dialogs.WizardNewFileCreationPage$4.run",
          "source": "WizardNewFileCreationPage.java:354"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "177799",
      "date": "2007-03-16T18:40:50+01:00",
      "product": "Equinox",
      "component": "Bundles",
      "severity": "normal"
    }
  ],
  "groupId": "177799",
  "bugId": "177799",
  "date": "2007-03-16T18:40:50+01:00",
  "product": "Equinox",
  "component": "Bundles",
  "severity": "normal"
}