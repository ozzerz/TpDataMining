{
  "comments": [
    "build I20041104\n\n- tried running the RCP test suite via a JUnit Plug-in Test config\n- it has \"[No Application] - Headless Mode\" selected as the app\n- it fails with the following in the log\n- note that the -application is\n\"org.eclipse.pde.junit.runtime.uitestapplication\" and the -testApplication is\n\"[No Application] - Headless Mode\"\n- it should use the core test application instead\n- the \"class \"org.eclipse.ui.internal.UILockListener\" cannot be loaded\" errors\nare a side effect of the workbench trying to continue to do work after it has\nbeen shut down, and can be ignored\n\nI tried deleting and recreating the launch config (under a different name), but\nit made no difference.\n\nI also saw this on I20041104-2000, but it works OK for Kim on I20041104-1200.\n\n!SESSION 2004-11-11 10:24:40.360 -----------------------------------------------\neclipse.buildId\u003dunknown\njava.fullversion\u003dJ2RE 1.4.2 IBM Windows 32 build cn142-20040926 (JIT disabled)\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -version 3 -application\norg.eclipse.pde.junit.runtime.uitestapplication -testApplication [No\nApplication] - Headless Mode -pdelaunch -port 4646 -testpluginname\norg.eclipse.ui.tests.rcp -classnames\norg.eclipse.ui.tests.rcp.performance.RCPPerformanceTestSuite\n\n!ENTRY org.eclipse.osgi 2004-11-11 10:24:40.370\n!MESSAGE Application error\n!STACK 1\njunit.framework.AssertionFailedError\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat junit.framework.Assert.assertTrue(Assert.java:20)\n\tat junit.framework.Assert.assertNotNull(Assert.java:220)\n\tat junit.framework.Assert.assertNotNull(Assert.java:213)\n\tat\norg.eclipse.pde.internal.junit.runtime.UITestApplication.getApplication(UITestApplication.java:52)\n\tat\norg.eclipse.pde.internal.junit.runtime.UITestApplication.run(UITestApplication.java:27)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\n!ENTRY org.eclipse.osgi 2004-11-11 10:24:40.811\n!MESSAGE The class \"org.eclipse.ui.internal.UILockListener\" cannot be loaded\nbecause the system is shutting down and the plug-in \"org.eclipse.ui.workbench\"\nhas already been stopped.\n!STACK 0\njava.lang.ClassNotFoundException: The class\n\"org.eclipse.ui.internal.UILockListener\" cannot be loaded because the system is\nshutting down and the plug-in \"org.eclipse.ui.workbench\" has already been stopped.\n\tat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.shouldActivateFor(EclipseClassLoader.java:147)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:62)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\n\tat\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:494)\n\tat\norg.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions(AbstractUIPlugin.java:472)\n\tat\norg.eclipse.ui.plugin.AbstractUIPlugin$2.bundleChanged(AbstractUIPlugin.java:588)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1151)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:186)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:104)\n\n!ENTRY org.eclipse.osgi 2004-11-11 10:24:40.851\n!MESSAGE An unexpected runtime error has occurred.\n!STACK 0\njava.lang.NoClassDefFoundError: org/eclipse/ui/internal/UILockListener\n\tat\norg.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions(AbstractUIPlugin.java:472)\n\tat\norg.eclipse.ui.plugin.AbstractUIPlugin$2.bundleChanged(AbstractUIPlugin.java:588)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1151)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:186)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:104)\n\n!ENTRY update@/d:/eclipse-new/plugins/org.eclipse.ui/ 0 0 2004-11-11 10:24:40.871\n!MESSAGE FrameworkEvent.ERROR\n!STACK 0\njava.lang.NoClassDefFoundError: org/eclipse/ui/internal/UILockListener\n\tat\norg.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions(AbstractUIPlugin.java:472)\n\tat\norg.eclipse.ui.plugin.AbstractUIPlugin$2.bundleChanged(AbstractUIPlugin.java:588)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1151)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:186)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:104)",
    "I don\u0027t understand.  Why would you run UI tests in headless mode?",
    "The RCP tests want to control the creation of the workbench themselves, not be\nrun within a previously created workbench.\n",
    "Either way, the arg to -testApplication is wrong.\n",
    "the test application name is certainly wrong.  if the application is \npde.junit.runtime.uitestapplication, the -testApplication must never be \nheadless.  \n\nNothing happened in the PDE/JUnit domain (for better or worse) for a long \ntime.  So I don\u0027t understand how it could work ine one build but not the other.\n\nWhat project do I need to check out of cvs and what is the test suite name?",
    "Actually, I think I know what the problem is.\nIf your plugin has UI dependencies and you specify headless, PDE automatically \ngives you the uitestApplication, because we assume that you don\u0027t know what \nyou\u0027re doing ;-)\n\nThis has always been the behavior.  Not sure how it worked fine for you in \nsome instances and not in others.",
    "They\u0027re in org.eclipse.ui.tests.rcp, and you can choose either RcpTestSuite or\nRCPPerformanceTestSuite.\n\nIf you can try it and let me know if you\u0027re able to get it running, that will\nhelp determine whether it\u0027s an actual problem or something bizarre about my setup.\n",
    "I\u0027m not sure how this worked in the past either, but it did.\nThe way the RCP tests are structured, the test harness should invoke them\ndirectly, and allow them to create the workbench, rather than launching some app\nwhich creates the workbench which then uses ITestHarness handshaking to run the\ntests within that workbench.  The test suite needs to be in control.\n\n\n",
    "Using RCPTestSuite,\nif I just righ-click on the class and launch a Junit plugin test, the \nworkbench comes up fine but the tests fail.\nIf I go to the launch configuration and explicitly select Headless, then I was \nable to launch in headless mode (ie. the app name was set to \ncoretestapplication), but I got a lot of red in my stack.\n\nSo from a PDE point of view, the args are set correctly and the right \napplications are being invoked.  \n\nI have to leave pretty quick.  I\u0027ll do a more thorough investigation in a \ncouple of hours.",
    "Nick, it would be best if I debugged the problem using the exact same launch \nconfiguration you are using.  \nOn the \u0027Common\u0027 tab of the launch configuration, in the Save As section, save \nthe launch configuration as a \u0027shared file\u0027.  Either check this shared file \ninto cvs or email it to me.\nThanks.",
    "Created an attachment (id\u003d15826)\nRCP performance test launch config\n\nHere \u0027tis.",
    "Fixed.\nThere was a glitch in that the -testApplication arg was not being cleared when \nthe headless mode was selected.\n\nAnother glitch that was counting on [Headless] to be the first item in the \ncombo box.\n\nNick, to be able to reuse the same launch config, just add a space to any of \nthe fields and backspace to mark it as dirty and then hit Apply.  You will be \na-ok after that.",
    "mark the \"Main\" tab dirty, that is.  Alternately, you can create a new launch \nconfig.",
    "OK, I\u0027ll try that with today\u0027s build.  To confirm, I did have an app showing up\nbefore [No Application], called GravityServiceBinder1.app.  Might want to use\nthe String.CASE_INSENSITIVE_ORDER comparator to sort here.\n\n\n",
    "the fact that [headless] was not first is exactly the reason for this \nunpleasantness.  all fixed up now."
  ],
  "commentCreationDates": [
    "2004-11-11T16:19:48+01:00",
    "2004-11-11T16:31:31+01:00",
    "2004-11-11T17:14:39+01:00",
    "2004-11-11T17:15:11+01:00",
    "2004-11-11T17:19:44+01:00",
    "2004-11-11T17:25:40+01:00",
    "2004-11-11T17:38:50+01:00",
    "2004-11-11T17:44:33+01:00",
    "2004-11-11T17:49:18+01:00",
    "2004-11-12T04:53:24+01:00",
    "2004-11-12T17:12:00+01:00",
    "2004-11-16T08:49:34+01:00",
    "2004-11-16T09:11:43+01:00",
    "2004-11-16T16:11:11+01:00",
    "2004-11-16T16:22:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:20"
        },
        {
          "method": "junit.framework.Assert.assertNotNull",
          "source": "Assert.java:220"
        },
        {
          "method": "junit.framework.Assert.assertNotNull",
          "source": "Assert.java:213"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.UITestApplication.getApplication",
          "source": "UITestApplication.java:52"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.UITestApplication.run",
          "source": "UITestApplication.java:27"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "78399",
      "date": "2004-11-11T16:19:48+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.ClassNotFoundException",
      "message": "The class \"org.eclipse.ui.internal.UILockListener\" cannot be loaded because the system is shutting down and the plug-in \"org.eclipse.ui.workbench\" has already been stopped.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.shouldActivateFor",
          "source": "EclipseClassLoader.java:147"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass",
          "source": "EclipseClassLoader.java:62"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:371"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:402"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:93"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:494"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions",
          "source": "AbstractUIPlugin.java:472"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$2.bundleChanged",
          "source": "AbstractUIPlugin.java:588"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1151"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:186"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventThread.run",
          "source": "EventThread.java:104"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "78399",
      "date": "2004-11-11T16:19:48+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/ui/internal/UILockListener",
      "elements": [
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions",
          "source": "AbstractUIPlugin.java:472"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$2.bundleChanged",
          "source": "AbstractUIPlugin.java:588"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1151"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:186"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventThread.run",
          "source": "EventThread.java:104"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "78399",
      "date": "2004-11-11T16:19:48+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/ui/internal/UILockListener",
      "elements": [
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions",
          "source": "AbstractUIPlugin.java:472"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$2.bundleChanged",
          "source": "AbstractUIPlugin.java:588"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1151"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:186"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventThread.run",
          "source": "EventThread.java:104"
        }
      ],
      "number": 3,
      "commentIndex": 0,
      "bugId": "78399",
      "date": "2004-11-11T16:19:48+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "78399",
  "bugId": "78399",
  "date": "2004-11-11T16:19:48+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "critical"
}