{
  "comments": [
    "I have two views (ViewA, ViewB) which are both selection providers and selection listeners. They optionally synchronize with one another providing different information about the same model object. Within the create part control I register each as a selection listener for the other:\n\nclass ViewA implements ISelectionListener,\n\t\tISelectionProvider{\n\t...\n\tpublic void createPartControl(Composite parent) {\n\t\t...\n\t\t//LAST STEP OF CREATE PART CONTROL\n\t\tgetViewSite().getPage().addSelectionListener(ViewB.VIEW_ID, this);\n\t}\n\t...\n}\n\nclass ViewB implements ISelectionListener,\n\t\tISelectionProvider{\n\t...\n\tpublic void createPartControl(Composite parent) {\n\t\t...\n\t\t//LAST STEP OF CREATE PART CONTROL\n\t\tgetViewSite().getPage().addSelectionListener(ViewA.VIEW_ID, this);\n\t}\n\t...\n}\n\nWhen I run the code (as an RCP App with an initial perspective containing both views). I recieve the following trace in the console (reduced to relevant portion):\n\norg.eclipse.ui.PartInitException: Warning: Detected recursive attempt by part com.company.ViewA to create itself (this is probably, but not necessarily, a bug)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:557)\n\tat org.eclipse.ui.internal.ViewReference.getView(ViewReference.java:164)\n\tat org.eclipse.ui.internal.WorkbenchPage.findView(WorkbenchPage.java:1725)\n\tat org.eclipse.ui.internal.PagePartSelectionTracker.\u003cinit\u003e(PagePartSelectionTracker.java:59)\n\tat org.eclipse.ui.internal.PageSelectionService.createPartTracker(PageSelectionService.java:48)\n\tat org.eclipse.ui.internal.AbstractSelectionService.getPerPartTracker(AbstractSelectionService.java:200)\n\tat org.eclipse.ui.internal.AbstractSelectionService.addSelectionListener(AbstractSelectionService.java:92)\n\tat org.eclipse.ui.internal.WorkbenchPage.addSelectionListener(WorkbenchPage.java:679)\n\tat com.company.ViewB.createPartControl(ViewB.java:103)\n\tat org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:332)\n\tat org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:197)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:566)\n\tat org.eclipse.ui.internal.ViewReference.getView(ViewReference.java:164)\n\tat org.eclipse.ui.internal.WorkbenchPage.findView(WorkbenchPage.java:1725)\n\tat org.eclipse.ui.internal.PagePartSelectionTracker.\u003cinit\u003e(PagePartSelectionTracker.java:59)\n\tat org.eclipse.ui.internal.PageSelectionService.createPartTracker(PageSelectionService.java:48)\n\tat org.eclipse.ui.internal.AbstractSelectionService.getPerPartTracker(AbstractSelectionService.java:200)\n\tat org.eclipse.ui.internal.AbstractSelectionService.addSelectionListener(AbstractSelectionService.java:92)\n\tat org.eclipse.ui.internal.WorkbenchPage.addSelectionListener(WorkbenchPage.java:679)\n\tat com.company.ViewA.createPartControl(ViewA.java:95)\n\t...\n\nLooking through the stack trace/source it is obvious that the selection service is attempting to obtain a reference to the part before the creation completes (ViewReference.getView(ViewReference.java:164)) and the problem can be \"solved\" by performing the registration in an asynchronous Thread to allow the part creation to complete, however this behaviour seems to be contrary to the documentation that I have come acroos, which seems to indicate the Selection Service is \"lazy\", (de)registering the part as it progresses through the lifecycle. Yet from the stack trace it appears to be creating the part (createPartHelper(ViewReference.java:332)) as part of retrieving the reference. Im not sure if this is a bug or a feature request, or if I should be doing the registration somewhere other than createPartControl."
  ],
  "commentCreationDates": [
    "2006-11-08T12:43:59+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.ui.PartInitException",
      "message": "Warning: Detected recursive attempt by part com.company.ViewA to create itself (this is probably, but not necessarily, a bug)",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:557"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.getView",
          "source": "ViewReference.java:164"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.findView",
          "source": "WorkbenchPage.java:1725"
        },
        {
          "method": "org.eclipse.ui.internal.PagePartSelectionTracker.\u003cinit\u003e",
          "source": "PagePartSelectionTracker.java:59"
        },
        {
          "method": "org.eclipse.ui.internal.PageSelectionService.createPartTracker",
          "source": "PageSelectionService.java:48"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.getPerPartTracker",
          "source": "AbstractSelectionService.java:200"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.addSelectionListener",
          "source": "AbstractSelectionService.java:92"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.addSelectionListener",
          "source": "WorkbenchPage.java:679"
        },
        {
          "method": "com.company.ViewB.createPartControl",
          "source": "ViewB.java:103"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPartHelper",
          "source": "ViewReference.java:332"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPart",
          "source": "ViewReference.java:197"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.getView",
          "source": "ViewReference.java:164"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.findView",
          "source": "WorkbenchPage.java:1725"
        },
        {
          "method": "org.eclipse.ui.internal.PagePartSelectionTracker.\u003cinit\u003e",
          "source": "PagePartSelectionTracker.java:59"
        },
        {
          "method": "org.eclipse.ui.internal.PageSelectionService.createPartTracker",
          "source": "PageSelectionService.java:48"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.getPerPartTracker",
          "source": "AbstractSelectionService.java:200"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.addSelectionListener",
          "source": "AbstractSelectionService.java:92"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.addSelectionListener",
          "source": "WorkbenchPage.java:679"
        },
        {
          "method": "com.company.ViewA.createPartControl",
          "source": "ViewA.java:95"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "163794",
      "date": "2006-11-08T12:43:59+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "minor"
    }
  ],
  "groupId": "163794",
  "bugId": "163794",
  "date": "2006-11-08T12:43:59+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "minor"
}