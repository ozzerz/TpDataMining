{
  "comments": [
    "Open Eclipse with a non-CVS project in your workspace.  Expand the project, and\nselect a file, then exit Eclipse.  Restart Eclipse (the file should still be\nselected, yet the Share Project menu item is enabled), and without touching the\nNavigator View, goto Project \u003e Share Project...  You should be greeted with a\nNullPointerException dialog.",
    "I\u0027ve debugged this a bit (because someone is chopping off the stack).  Here\u0027s the cause of the NPE:\n\nThread [main] (Suspended (exception NullPointerException))\n\tConfigureProjectAction(TeamAction).getSelectedResources() line: 154\n\tConfigureProjectAction(TeamAction).getSelectedProjects() line: 124\n\tConfigureProjectAction$1.run(IProgressMonitor) line: 50\n\tTeamAction$2.run() line: 234\n\tBusyIndicator.showWhile(Display, Runnable) line: 69\n\tConfigureProjectAction(TeamAction).run(IRunnableWithProgress, String, int) line: 231\n\tConfigureProjectAction.run(IAction) line: 47\n\tConfigureProjectAction(ActionDelegate).runWithEvent(IAction, Event) line: 70\n\tWWinPluginAction(PluginAction).runWithEvent(Event) line: 241\n\tWWinPluginAction.runWithEvent(Event) line: 223\n\tPluginActionContributionItem(ActionContributionItem).handleWidgetSelection(Event, boolean) line: \n538\n\tActionContributionItem.access$2(ActionContributionItem, Event, boolean) line: 488\n\tActionContributionItem$5.handleEvent(Event) line: 400\n\tEventTable.sendEvent(Event) line: 66\n\tMenuItem(Widget).sendEvent(Event) line: 1412\n\tMenuItem(Widget).sendEvent(int, Event, boolean) line: 1436\n\tMenuItem(Widget).sendEvent(int, Event) line: 1421\n\tMenuItem(Widget).notifyListeners(int, Event) line: 1251\n\tDisplay.runDeferredEvents() line: 3118\n\tDisplay.readAndDispatch() line: 2766\n\tWorkbench.runEventLoop(Window$IExceptionHandler, Display) line: 1755\n\tWorkbench.runUI() line: 1719\n\tWorkbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 368\n\tPlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 143\n\tIDEApplication.run(Object) line: 106\n\tPlatformActivator$1.run(Object) line: 226\n\tEclipseStarter.run(Object) line: 377\n\tEclipseStarter.run(String[], Runnable) line: 164\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25\n\tMethod.invoke(Object, Object...) line: 585\n\tMain.invokeFramework(String[], URL[]) line: 338\n\tMain.basicRun(String[]) line: 282\n\tMain.run(String[]) line: 977\n\tMain.main(String[]) line: 952\n\n\nPassing to team.\n",
    "Fix released to HEAD",
    "Bogdan, please verify during 3.2 M3 test pass",
    "Verified in I20051101-0010",
    "We were resolving bugs in our bug system and I thought this bug was fixed because I could no longer reproduce it.  However, one of our other developers could reliably reproduce it.  After some further head bashing we found out that this bug still exists iff you have an editor open when you exit Eclipse.  So - to reproduce:\n\n1) Open Eclipse with at least one *non-CVS* project in your workspace.\n2) Close all editors.\n3) Open any file so you have one editor open.\n4) Select any \"file\" in any *non-CVS* project in the navigator view.\n5) Close the workbench.\n6) Restart Eclipse.\n7) Without touching *anything*, goto Project \u003e Share Project...\n\nThe file will be selected, and the menu item will be enabled and you will get a very weird exception dialog.\n",
    "I\u0027m able to reproduce this one. Here is the stack trace:\n\njava.lang.ArrayIndexOutOfBoundsException: 0\nat org.eclipse.team.internal.ui.actions.ConfigureProjectAction$1.run(ConfigureProjectAction.java:48)\nat org.eclipse.team.internal.ui.actions.TeamAction$2.run(TeamAction.java:237)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\nat org.eclipse.team.internal.ui.actions.TeamAction.run(TeamAction.java:234)\nat org.eclipse.team.internal.ui.actions.ConfigureProjectAction.execute(ConfigureProjectAction.java:45)\nat org.eclipse.team.internal.ui.actions.TeamAction.run(TeamAction.java:477)\nat org.eclipse.team.internal.ui.actions.TeamAction.runWithEvent(TeamAction.java:511)\nat org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)\nat org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\nat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\nat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1144)\n\nAs you can see the NPE is caused because there is actually no Project selected. I can see at least two solutions for the problem:\n1. Make sure that \"Share Project\" entry in the main menu is disabled for all non-project resources (the entry in the popup menu is disabled like it should be).\n2. Modify the TeamAction#getSelectedProjects() method so it will return a project even when there is a file/folder selected. We can look for the project of a given resource.",
    "The question is why is the menu enabled in the first place. The ConfigureProjectAction#isEnabled() method clearly only returns true if a single project is selected. It appears that, on startup, there is a scenario where the isEnabled is not being called before the operation is run. This may be a bug in the workbench so we should track it down (i.e. try and debug it and confirm that isEnabled is not being called and, if confirmed, forward the bug to Platform/UI).\n\nHaving said that, we should also add a check to the execute to exit if there isn\u0027t a selected project.",
    "Yes.  I have had similar issues in the past with some of my actions being enabled when they were clearly not *supposed* to be and I never did track them down.  It was driving me nuts.  Eventually I just decided it was a feature. ;)  Although I never made the connection to an editor being open...",
    "Created an attachment (id\u003d73312)\nFix\n\nThe check for proper selection added to the execute method. After some debugging done I can confirm that the isEnabled test is not called for the Project \u003e Share Project... as well as for other Team Actions located in the main toolbar menu.\n\nFirst, I though about disabling the menu entry (the action) after the check in the execute method fails. But I think that after forwarding the bug to Platform/UI they will find a better way to handle this case.",
    "I have released the patch to HEAD. Now that we\u0027ve fixed the problem in Team, it would be good if we could create a simple example plug-in that shows the failure. We can then create a separate bug against Platform/UI and attach the example. Tomek, can you do this please.",
    "Done. The bug with a simple plug-in is here: bug 195879.",
    "Thanks. Marking the Team specific issue fixed.",
    "Verified in build I20070807-0010"
  ],
  "commentCreationDates": [
    "2005-09-22T22:49:14+02:00",
    "2005-09-23T15:59:50+02:00",
    "2005-10-28T18:06:34+02:00",
    "2005-11-01T13:59:20+01:00",
    "2005-11-01T18:33:16+01:00",
    "2007-02-26T21:39:55+01:00",
    "2007-06-21T17:11:15+02:00",
    "2007-07-06T14:51:08+02:00",
    "2007-07-06T15:36:58+02:00",
    "2007-07-09T15:14:18+02:00",
    "2007-07-09T17:12:22+02:00",
    "2007-07-09T20:56:38+02:00",
    "2007-07-09T21:00:20+02:00",
    "2007-08-07T18:12:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ui.actions.ConfigureProjectAction$1.run",
          "source": "ConfigureProjectAction.java:48"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.TeamAction$2.run",
          "source": "TeamAction.java:237"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.TeamAction.run",
          "source": "TeamAction.java:234"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.ConfigureProjectAction.execute",
          "source": "ConfigureProjectAction.java:45"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.TeamAction.run",
          "source": "TeamAction.java:477"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.TeamAction.runWithEvent",
          "source": "TeamAction.java:511"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:246"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:229"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3682"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3293"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "number": 0,
      "commentIndex": 6,
      "bugId": "110378",
      "date": "2007-06-21T17:11:15+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "normal"
    }
  ],
  "groupId": "110378",
  "bugId": "110378",
  "date": "2005-09-22T22:49:14+02:00",
  "product": "Platform",
  "component": "Team",
  "severity": "normal"
}