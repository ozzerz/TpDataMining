{
  "comments": [
    "Build: I20021114.\nTo set PDE\u0027s ECLIPSE_HOME, we would like to take advantage of the \norg.eclipse.jdt.core.classpathVariableInitalizer extension point.\nIt works fine most of the time.  However, when I open a workspace that has a \nmanifest editor already open, I get the ClassCircularityError below.\nHere is what I am doing in the initialize() method of my initializer:\npublic void initialize(String variable) {\n\ttry {\n\tPreferences preferences \u003dPDECore.getDefault().getPluginPreferences();\n        JavaCore.setClasspathVariable(\n\t    variable,\n\t    new Path(preferences.getString(ICoreConstants.PLATFORM_PATH)),\n\t    null);\n\t} catch (JavaModelException e) {\n\t}\n}\n\nHere is the stack:\njava.lang.ClassCircularityError: org/eclipse/jdt/core/JavaModelException\nat java.lang.Class.getDeclaredConstructors0(Native Method)\nat java.lang.Class.privateGetDeclaredConstructors(Class.java:1590)\nat java.lang.Class.getConstructor0(Class.java:1762)\nat java.lang.Class.newInstance0(Class.java:276)\nat java.lang.Class.newInstance(Class.java:259)\nat org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:136)\nat org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:165)\nat \norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension\n(ConfigurationElement.java:102)\nat org.eclipse.jdt.core.JavaCore.getClasspathVariableInitializer\n(JavaCore.java:884)\nat org.eclipse.jdt.core.JavaCore.getClasspathVariable(JavaCore.java:840)\nat org.eclipse.jdt.core.JavaCore.getResolvedVariablePath(JavaCore.java:1487)\nat org.eclipse.jdt.core.JavaCore.getResolvedClasspathEntry(JavaCore.java:1402)\nat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1383)\nat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1327)\nat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1304)\nat org.eclipse.jdt.internal.core.search.indexing.IndexManager$2.run\n(IndexManager.java:385)\nat org.eclipse.jdt.internal.core.BatchOperation.executeOperation\n(BatchOperation.java:34)\nat org.eclipse.jdt.internal.core.JavaModelOperation.execute\n(JavaModelOperation.java:326)\nat org.eclipse.jdt.internal.core.JavaModelOperation.run\n(JavaModelOperation.java:626)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1580)\nat org.eclipse.jdt.core.JavaCore.run(JavaCore.java:2383)\nat org.eclipse.jdt.internal.core.search.indexing.IndexManager.reset\n(IndexManager.java:377)\nat org.eclipse.jdt.core.JavaCore.startIndexing(JavaCore.java:2659)\nat org.eclipse.jdt.core.JavaCore.startup(JavaCore.java:2691)\nat org.eclipse.core.internal.plugins.PluginDescriptor$1.run\n(PluginDescriptor.java:697)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:839)\nat org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation\n(PluginDescriptor.java:709)\nat org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation\n(PluginDescriptor.java:184)\nat org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin\n(PluginClassLoader.java:60)\nat \norg.eclipse.core.internal.plugins.PluginClassLoader.internalFindClassParentsSelf\n(PluginClassLoader.java:138)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassParentsSelf\n(DelegatingURLClassLoader.java:473)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:863)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.access$0\n(DelegatingURLClassLoader.java:857)\nat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader$DelegateLoader.loadClass\n(DelegatingURLClassLoader.java:80)\nat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassPrerequisites\n(DelegatingURLClassLoader.java:537)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:871)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:843)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:255)\nat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:315)\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:140)\nat org.eclipse.pde.internal.ui.PDEPlugin.startup(PDEPlugin.java:170)\nat org.eclipse.core.internal.plugins.PluginDescriptor$1.run\n(PluginDescriptor.java:697)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:839)\nat org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation\n(PluginDescriptor.java:709)\nat org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation\n(PluginDescriptor.java:184)\nat org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin\n(PluginClassLoader.java:60)\nat \norg.eclipse.core.internal.plugins.PluginClassLoader.internalFindClassParentsSelf\n(PluginClassLoader.java:138)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassParentsSelf\n(DelegatingURLClassLoader.java:473)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:863)\nat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:843)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:255)\nat org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:128)\nat org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:165)\nat \norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension\n(ConfigurationElement.java:102)\nat org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:151)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:65)\nat org.eclipse.ui.internal.WorkbenchPlugin.createExtension\n(WorkbenchPlugin.java:148)\nat org.eclipse.ui.internal.EditorManager$3.run(EditorManager.java:621)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:839)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.ui.internal.EditorManager.createPart(EditorManager.java:619)\nat org.eclipse.ui.internal.EditorManager.openInternalEditor\n(EditorManager.java:609)\nat org.eclipse.ui.internal.EditorManager.access$6(EditorManager.java:607)\nat org.eclipse.ui.internal.EditorManager$7.run(EditorManager.java:844)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:839)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.ui.internal.EditorManager.busyRestoreEditor\n(EditorManager.java:798)\nat org.eclipse.ui.internal.EditorManager$6.run(EditorManager.java:791)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:65)\nat org.eclipse.ui.internal.EditorManager.restoreEditor(EditorManager.java:787)\nat org.eclipse.ui.internal.EditorManager.restoreState(EditorManager.java:698)\nat org.eclipse.ui.internal.WorkbenchPage.restoreState(WorkbenchPage.java:1954)\nat org.eclipse.ui.internal.WorkbenchWindow.restoreState\n(WorkbenchWindow.java:1088)\nat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1296)\nat org.eclipse.ui.internal.Workbench.access$7(Workbench.java:1265)\nat org.eclipse.ui.internal.Workbench$8.run(Workbench.java:903)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:839)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState\n(Workbench.java:855)\nat org.eclipse.ui.internal.Workbench.init(Workbench.java:668)\nat org.eclipse.ui.internal.Workbench.run(Workbench.java:1411)\nat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:831)\nat org.eclipse.core.boot.BootLoader.run(BootLoader.java:432)\nat EclipseRuntimeLauncher.main(EclipseRuntimeLauncher.java:24)",
    "Moving to Platform/Core to get more information on what is going on. Is this a \nlegite error on our side?",
    "This looks like a duplicate of bug 5875.  In short, this is a problem caused by\nhow our classloaders work... the cyclic relationship between PDE core and JDT\ncore on startup tricks the VM into thinking there is a cycle in the supertype\nhierarchy of the class being loaded.\n\nI would recommend simply inlining that initialization code into\nPDECore.startup(), rather than relying on the initializer extension point.\n\nPhilippe, if there is any way you could avoid calling createExecutableExtension\non startup that would help.  This is a known problem with our classloaders but\nwe haven\u0027t been able to find a fix for it.\n",
    "During startup, we trigger a classpath resolution so as to start the index \nconsistency check process in the background... would be hard to avoid.",
    "\n\n*** This bug has been marked as a duplicate of 5875 ***"
  ],
  "commentCreationDates": [
    "2002-11-14T19:02:25+01:00",
    "2002-11-14T22:43:43+01:00",
    "2002-11-18T19:13:24+01:00",
    "2002-11-20T12:55:28+01:00",
    "2002-11-20T19:48:22+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jdt.core.JavaModelException",
      "elements": [
        {
          "method": "java.lang.Class.getDeclaredConstructors0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.privateGetDeclaredConstructors",
          "source": "Class.java:1590"
        },
        {
          "method": "java.lang.Class.getConstructor0",
          "source": "Class.java:1762"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:276"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:259"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:136"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:165"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:102"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathVariableInitializer",
          "source": "JavaCore.java:884"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathVariable",
          "source": "JavaCore.java:840"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getResolvedVariablePath",
          "source": "JavaCore.java:1487"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getResolvedClasspathEntry",
          "source": "JavaCore.java:1402"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1383"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1327"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1304"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager$2.run",
          "source": "IndexManager.java:385"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BatchOperation.executeOperation",
          "source": "BatchOperation.java:34"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.execute",
          "source": "JavaModelOperation.java:326"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:626"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1580"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.run",
          "source": "JavaCore.java:2383"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.reset",
          "source": "IndexManager.java:377"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.startIndexing",
          "source": "JavaCore.java:2659"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.startup",
          "source": "JavaCore.java:2691"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor$1.run",
          "source": "PluginDescriptor.java:697"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:839"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:709"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:184"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:60"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.internalFindClassParentsSelf",
          "source": "PluginClassLoader.java:138"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassParentsSelf",
          "source": "DelegatingURLClassLoader.java:473"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:863"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.access$0",
          "source": "DelegatingURLClassLoader.java:857"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader$DelegateLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:80"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassPrerequisites",
          "source": "DelegatingURLClassLoader.java:537"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:871"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:843"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:255"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:315"
        },
        {
          "method": "java.lang.Class.forName0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.forName",
          "source": "Class.java:140"
        },
        {
          "method": "org.eclipse.pde.internal.ui.PDEPlugin.startup",
          "source": "PDEPlugin.java:170"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor$1.run",
          "source": "PluginDescriptor.java:697"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:839"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:709"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:184"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:60"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.internalFindClassParentsSelf",
          "source": "PluginClassLoader.java:138"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassParentsSelf",
          "source": "DelegatingURLClassLoader.java:473"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:863"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:843"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:255"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:128"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:165"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:102"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin$1.run",
          "source": "WorkbenchPlugin.java:151"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:65"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin.createExtension",
          "source": "WorkbenchPlugin.java:148"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$3.run",
          "source": "EditorManager.java:621"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:839"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.createPart",
          "source": "EditorManager.java:619"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openInternalEditor",
          "source": "EditorManager.java:609"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.access$6",
          "source": "EditorManager.java:607"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$7.run",
          "source": "EditorManager.java:844"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:839"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.busyRestoreEditor",
          "source": "EditorManager.java:798"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$6.run",
          "source": "EditorManager.java:791"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:65"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.restoreEditor",
          "source": "EditorManager.java:787"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.restoreState",
          "source": "EditorManager.java:698"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.restoreState",
          "source": "WorkbenchPage.java:1954"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.restoreState",
          "source": "WorkbenchWindow.java:1088"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.restoreState",
          "source": "Workbench.java:1296"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$7",
          "source": "Workbench.java:1265"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$8.run",
          "source": "Workbench.java:903"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:839"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState",
          "source": "Workbench.java:855"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.init",
          "source": "Workbench.java:668"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1411"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:831"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:432"
        },
        {
          "method": "EclipseRuntimeLauncher.main",
          "source": "EclipseRuntimeLauncher.java:24"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "26390",
      "duplicateId": "5875",
      "date": "2002-11-14T19:02:25+01:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "major"
    }
  ],
  "groupId": "5875",
  "bugId": "26390",
  "duplicateId": "5875",
  "date": "2002-11-14T19:02:25+01:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "major"
}