{
  "comments": [
    "See bug 189000.\n\nUpdate core is eating a SecurityException at org.eclipse.update.internal.core.LocalSite#parseLocalSiteFile (line 96)\n\nThis causes major issues because the base site does not get configured which causes the Europa update site to be missing.  But it also causes other major failures when attempting to configure an extension location.  This results in a platform.xml that only contains the bundles/features from the extension location, all the base platform features will be missing.  This results in all of the base plaform bundles being uninstalled and the platform fails to launch.\n\nHere is the exception which is caught and thrown away.\n\njava.lang.SecurityException: invalid SHA1 signature file digest for about.html\tat sun.security.util.SignatureFileVerifier.verifySection(SignatureFileVerifier.java:461)\tat sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:254)\tat sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:199)\tat java.util.jar.JarVerifier.processEntry(JarVerifier.java:300)\tat java.util.jar.JarVerifier.update(JarVerifier.java:212)\tat java.util.jar.JarFile.initializeVerifier(JarFile.java:402)\tat java.util.jar.JarFile.getInputStream(JarFile.java:479)\tat org.eclipse.update.core.JarEntryContentReference.getInputStream(JarEntryContentReference.java:62)\tat org.eclipse.update.internal.core.SiteFileFactory.parsePackagedPlugins(SiteFileFactory.java:383)\tat org.eclipse.update.internal.core.SiteFileFactory.parseSite(SiteFileFactory.java:140)\tat org.eclipse.update.internal.core.SiteFileFactory.createSite(SiteFileFactory.java:72)\tat org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:336)\tat org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:326)\tat org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:291)\tat org.eclipse.update.internal.core.InternalSiteManager.attemptCreateSite(InternalSiteManager.java:222)\tat org.eclipse.update.internal.core.InternalSiteManager.getSite(InternalSiteManager.java:157)\tat org.eclipse.update.core.SiteManager.getSite(SiteManager.java:80)\tat org.eclipse.update.internal.model.InstallConfigurationParser.processSite(InstallConfigurationParser.java:90)\tat org.eclipse.update.internal.model.InstallConfigurationParser.processConfig(InstallConfigurationParser.java:204)\tat org.eclipse.update.internal.model.InstallConfigurationParser.\u0026lt;init\u0026gt;(InstallConfigurationParser.java:65)\tat org.eclipse.update.internal.model.InstallConfigurationModel.initialize(InstallConfigurationModel.java)\tat org.eclipse.update.internal.model.InstallConfigurationModel.getConfigurationSitesModel(InstallConfigurationModel.java:60)\tat org.eclipse.update.internal.model.SiteLocalModel.setCurrentConfigurationModel(SiteLocalModel.java:195)\tat org.eclipse.update.internal.core.LocalSite.addConfiguration(LocalSite.java:122)\tat org.eclipse.update.internal.model.SiteLocalParser.processConfig(SiteLocalParser.java:131)\tat org.eclipse.update.internal.model.SiteLocalParser.\u0026lt;init\u0026gt;(SiteLocalParser.java:79)\tat org.eclipse.update.internal.core.LocalSite.parseLocalSiteFile(LocalSite.java:93)",
    "I am attaching a patch that is rethrowing the exception:\n\n",
    "Created an attachment (id\u003d68794)\nThe patch to rethrow the original exception instead of eating it\n\n",
    "I was able to reproduce the original problem when I deleted the exloded project for the corruped bundle and replaced it with the signed jar. \n\nThe attached patch will cause error dialogs to show up.\nThe message isn\u0027t ideal because it does not tell you which JAR is causing it, but is definitely a step forward.",
    "When I apply the patch and put the patched version of the bundle into the i0525 build, I get an error dialog 3 times on my way to the \"install new features\" screen. The message is:\n   \"invalid SHA1 signature file digest for about.html\"\nwhich should be capitalized and have proper punctuation at the end.\n\nUnfortunately without the name of the bundle that is causing the problem, this isn\u0027t much help. How much work is it to add the name of the bundle?\n\nThe result of this also means that the site is disabled and we get into the same state as mentioned in bug 189000. Does it make sense to enable the site depending on what type of error we are getting?\n\nTom mentions that perhaps catching the security exception in JarEntryContentReference#getInputStream and maybe rethrow an IOException with more information and use SecurityException as the cause, might be better.\n\nThoughts?",
    "Yes, I was thinking about it on the way to lunch :-). The SHA message is coming from the exception - I didn\u0027t create it. ",
    "Since this is not a regression relative to 3.2, we will not address it in 3.3."
  ],
  "commentCreationDates": [
    "2007-05-25T17:59:42+02:00",
    "2007-05-25T18:24:27+02:00",
    "2007-05-25T18:25:07+02:00",
    "2007-05-25T18:29:01+02:00",
    "2007-05-25T18:55:59+02:00",
    "2007-05-25T19:13:38+02:00",
    "2007-06-01T18:55:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.SecurityException",
      "message": "invalid SHA1 signature file digest for about.html",
      "elements": [
        {
          "method": "sun.security.util.SignatureFileVerifier.verifySection",
          "source": "SignatureFileVerifier.java:461"
        },
        {
          "method": "sun.security.util.SignatureFileVerifier.processImpl",
          "source": "SignatureFileVerifier.java:254"
        },
        {
          "method": "sun.security.util.SignatureFileVerifier.process",
          "source": "SignatureFileVerifier.java:199"
        },
        {
          "method": "java.util.jar.JarVerifier.processEntry",
          "source": "JarVerifier.java:300"
        },
        {
          "method": "java.util.jar.JarVerifier.update",
          "source": "JarVerifier.java:212"
        },
        {
          "method": "java.util.jar.JarFile.initializeVerifier",
          "source": "JarFile.java:402"
        },
        {
          "method": "java.util.jar.JarFile.getInputStream",
          "source": "JarFile.java:479"
        },
        {
          "method": "org.eclipse.update.core.JarEntryContentReference.getInputStream",
          "source": "JarEntryContentReference.java:62"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteFileFactory.parsePackagedPlugins",
          "source": "SiteFileFactory.java:383"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteFileFactory.parseSite",
          "source": "SiteFileFactory.java:140"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteFileFactory.createSite",
          "source": "SiteFileFactory.java:72"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:336"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:326"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:291"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.attemptCreateSite",
          "source": "InternalSiteManager.java:222"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.getSite",
          "source": "InternalSiteManager.java:157"
        },
        {
          "method": "org.eclipse.update.core.SiteManager.getSite",
          "source": "SiteManager.java:80"
        },
        {
          "method": "org.eclipse.update.internal.model.InstallConfigurationParser.processSite",
          "source": "InstallConfigurationParser.java:90"
        },
        {
          "method": "org.eclipse.update.internal.model.InstallConfigurationParser.processConfig",
          "source": "InstallConfigurationParser.java:204"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "189168",
      "date": "2007-05-25T17:59:42+02:00",
      "product": "Platform",
      "component": "Update",
      "severity": "normal"
    }
  ],
  "groupId": "189168",
  "bugId": "189168",
  "date": "2007-05-25T17:59:42+02:00",
  "product": "Platform",
  "component": "Update",
  "severity": "normal"
}