{
  "comments": [
    "Build ID: I20070222-0951\n\nSteps To Reproduce:\n1. Run following from ant:\n${java.home}/bin/java -cp ${eclipse_target_root}/plugins/org.eclipse.equinox.launcher_1.0.0.v20070208a.jar org.eclipse.equinox.launcher.Main -data ${consoleapp_root} -application org.eclipse.ant.core.antRunner -buildfile ${buildfile} -DbuildDest\u003d${consoleapp_root} -DappLabel\u003d${appLabel} -DeclipseFeature\u003d${eclipseFeature} -DeclipseProduct\u003d${eclipseProduct} ${eclipse.ant.task}\n\n2. Eventually get:\norg.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:141)\n.............\nRoot exception:\njava.lang.NoClassDefFoundError: org/eclipse/swt/SWTError\n        at java.lang.Class.getDeclaredConstructors0(Native Method)\n        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2328)\n        at java.lang.Class.getConstructor0(Class.java:2640)\n        at java.lang.Class.newInstance0(Class.java:321)\n        at java.lang.Class.newInstance(Class.java:303)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:136)\n\n\nMore information:\nAnything trying to use SWT anything is not going\nto work on a headless system with no X or no gnome.\nThis used to work (when not using equinox)",
    "Do you have any more log information?  It looks like the stacktrace is incomplete.  Can you attach the complete log?",
    "Created an attachment (id\u003d62100)\nlog file\n\nI was able to reproduce on Win XP by removing the win32 swt fragment.  Looks like the ant bundle is dependent on the workbench.",
    "Moving to ant.  I did not investigate ant code but it looks like the ant application class org.eclipse.ant.core.AntRunner eventually loads classes out of org.eclipse.ant.ui which triggers org.eclipse.ui.workbench to be activated.  The org.eclipse.ui.workbench bundle requires classes from SWT.  This puts an indirect dependency on SWT from org.eclipse.ant.core.AntRunner.",
    "Investigating",
    "If the Ant UI plugin is present in the installation the AntClassLoader will attempt to load classes from the bundle as it extends some Ant core extension points.\n\nEven with the Ant UI plugin present my test build ran to completion...just with errors reported to the log.\n\nRemove the Ant UI plugin (and SWT win32 fragment) from the install and no problems / errors reported.\n\nPlease reopen if your results differ."
  ],
  "commentCreationDates": [
    "2007-03-26T23:51:59+02:00",
    "2007-03-27T16:12:40+02:00",
    "2007-03-27T16:21:10+02:00",
    "2007-03-27T16:27:11+02:00",
    "2007-04-22T00:46:35+02:00",
    "2007-04-22T01:07:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator",
          "source": "AbstractBundle.java:141"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "179397",
      "date": "2007-03-26T23:51:59+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "major"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTError",
      "elements": [
        {
          "method": "java.lang.Class.getDeclaredConstructors0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.privateGetDeclaredConstructors",
          "source": "Class.java:2328"
        },
        {
          "method": "java.lang.Class.getConstructor0",
          "source": "Class.java:2640"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:321"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:303"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator",
          "source": "AbstractBundle.java:136"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "179397",
      "date": "2007-03-26T23:51:59+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "major"
    }
  ],
  "groupId": "179397",
  "bugId": "179397",
  "date": "2007-03-26T23:51:59+02:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "major"
}