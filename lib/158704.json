{
  "comments": [
    "Hello AspectJ team,\n\nwhen load-time weaving into a Java Swing App (like Java\u0027s demo contained in a JDK/demo/jfc called SwingSet2) I receive lots of NPEs form ApsetcJ\u0027s LTW. That\u0027s the case for the last several versions including the current development build (aspectj-DEVELOPMENT-20060925164058).\n\nWhen using a pointcut like the following the LTW into Java\u0027s SwingSet2 demo fails:\n\n    protected pointcut justATest(ActionEvent actionEvent) :\n        execution( public void java.awt.event.ActionListener.actionPerformed(java.awt.event.ActionEvent) )\n        \u0026\u0026 args(actionEvent); \n    \nThis pointcut is used in an around advice which is applied to a Java Swing App running on Java 5. The LTW exception\u0027s stack-trace is as follows:\n\n\n   java.lang.NullPointerException\n        at org.aspectj.apache.bcel.generic.ClassGen.\u003cinit\u003e(ClassGen.java:158)\n        at org.aspectj.weaver.bcel.LazyClassGen.\u003cinit\u003e(LazyClassGen.java:262)\n        at org.aspectj.weaver.bcel.BcelObjectType.getLazyClassGen(BcelObjectType.java:470)\n        at org.aspectj.weaver.bcel.BcelAdvice.canInline(BcelAdvice.java:187)\n        at org.aspectj.weaver.bcel.BcelAdvice.implementOn(BcelAdvice.java:270)\n        at org.aspectj.weaver.Shadow.implementMungers(Shadow.java:699)\n        at org.aspectj.weaver.Shadow.implement(Shadow.java:471)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.implement(BcelClassWeaver.java:2832)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:506)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:119)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1611)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1562)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1340)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1160)\n        at org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes(WeavingAdaptor.java:337)\n        at org.aspectj.weaver.tools.WeavingAdaptor.weaveClass(WeavingAdaptor.java:243)\n        at org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:76)\n        at org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:55)\n        at sun.instrument.TransformerManager.transform(TransformerManager.java:122)\n        at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:155)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at ColorChooserDemo.\u003cinit\u003e(ColorChooserDemo.java:107)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at SwingSet2.loadDemo(SwingSet2.java:822)\n        at SwingSet2.loadDemos(SwingSet2.java:95)\n        at SwingSet2$DemoLoadThread.run(SwingSet2.java:1410)\n\n\n\nBest Regards \u0026 keep up the good work,\nChristian"
  ],
  "commentCreationDates": [
    "2006-09-26T08:44:12+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.apache.bcel.generic.ClassGen.\u003cinit\u003e",
          "source": "ClassGen.java:158"
        },
        {
          "method": "org.aspectj.weaver.bcel.LazyClassGen.\u003cinit\u003e",
          "source": "LazyClassGen.java:262"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelObjectType.getLazyClassGen",
          "source": "BcelObjectType.java:470"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.canInline",
          "source": "BcelAdvice.java:187"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.implementOn",
          "source": "BcelAdvice.java:270"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implementMungers",
          "source": "Shadow.java:699"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implement",
          "source": "Shadow.java:471"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.implement",
          "source": "BcelClassWeaver.java:2832"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:506"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:119"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1611"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:1562"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:1340"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1160"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes",
          "source": "WeavingAdaptor.java:337"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor.weaveClass",
          "source": "WeavingAdaptor.java:243"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj.preProcess",
          "source": "Aj.java:76"
        },
        {
          "method": "org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform",
          "source": "ClassPreProcessorAgentAdapter.java:55"
        },
        {
          "method": "sun.instrument.TransformerManager.transform",
          "source": "TransformerManager.java:122"
        },
        {
          "method": "sun.instrument.InstrumentationImpl.transform",
          "source": "InstrumentationImpl.java:155"
        },
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:620"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:124"
        },
        {
          "method": "java.net.URLClassLoader.defineClass",
          "source": "URLClassLoader.java:260"
        },
        {
          "method": "java.net.URLClassLoader.access$100",
          "source": "URLClassLoader.java:56"
        },
        {
          "method": "java.net.URLClassLoader$1.run",
          "source": "URLClassLoader.java:195"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.net.URLClassLoader.findClass",
          "source": "URLClassLoader.java:188"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:306"
        },
        {
          "method": "sun.misc.Launcher$AppClassLoader.loadClass",
          "source": "Launcher.java:268"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:251"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:319"
        },
        {
          "method": "ColorChooserDemo.\u003cinit\u003e",
          "source": "ColorChooserDemo.java:107"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance",
          "source": "NativeConstructorAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "DelegatingConstructorAccessorImpl.java:27"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Constructor.java:494"
        },
        {
          "method": "SwingSet2.loadDemo",
          "source": "SwingSet2.java:822"
        },
        {
          "method": "SwingSet2.loadDemos",
          "source": "SwingSet2.java:95"
        },
        {
          "method": "SwingSet2$DemoLoadThread.run",
          "source": "SwingSet2.java:1410"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "158704",
      "date": "2006-09-26T08:44:12+02:00",
      "product": "AspectJ",
      "component": "LTWeaving",
      "severity": "major"
    }
  ],
  "groupId": "158704",
  "bugId": "158704",
  "date": "2006-09-26T08:44:12+02:00",
  "product": "AspectJ",
  "component": "LTWeaving",
  "severity": "major"
}