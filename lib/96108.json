{
  "comments": [
    "I know this is going to sound lame, but it\u0027s too hard to describe the sequence\nof events and code that leads up to this.  But, in looking at the logic of\nCreationTool, if it just checked for the null object, I think our problems will\nbe solved and this would be good defensive programming anyway.\n\nThanks.\n\njava.lang.NullPointerException\n\tat org.eclipse.gef.tools.CreationTool.selectAddedObject(CreationTool.java:265)\n\tat org.eclipse.gef.tools.CreationTool.performCreation(CreationTool.java:254)\n\tat org.eclipse.gef.tools.CreationTool.handleButtonUp(CreationTool.java:177)\n\tat org.eclipse.gef.tools.AbstractTool.mouseUp(AbstractTool.java:1035)\n\tat org.eclipse.gef.EditDomain.mouseUp(EditDomain.java:259)\n\tat\norg.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased(DomainEventDispatcher.java:374)\n\tat\norg.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp(LightweightSystem.java:548)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:136)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1012)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2778)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2472)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:268)\n\tat org.eclipse.core.launcher.Main.run(Main.java:942)\n\tat org.eclipse.core.launcher.Main.main(Main.java:926)",
    "By the way, this problem only happens on Linux.",
    "This has been reported before but I don\u0027t have time to find the dupe right now.\n\nMy plan is to create a runnable which has a reference to the viewer in case the \nviewer becomes NULL as part of creation.",
    "*** Bug 96109 has been marked as a duplicate of this bug. ***",
    "*** Bug 103738 has been marked as a duplicate of this bug. ***",
    "Pratik to approve patch:\nPatch to CreationTool:\n\nIndex: CreationTool.java\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nRCS file: /home/tools/org.eclipse.gef/src/org/eclipse/gef/tools/CreationTool.java,v\nretrieving revision 1.27\ndiff -u -r1.27 CreationTool.java\n--- CreationTool.java\t9 Jun 2005 13:49:23 -0000\t1.27\n+++ CreationTool.java\t15 Aug 2005 18:48:53 -0000\n@@ -250,18 +250,18 @@\n  * @param button the button that was pressed\n  */\n protected void performCreation(int button) {\n+\tEditPartViewer viewer \u003d getCurrentViewer();\n \texecuteCurrentCommand();\n-\tselectAddedObject();\n+\tselectAddedObject(viewer);\n }\n \n /*\n  * Add the newly created object to the viewer\u0027s selected objects.\n  */\n-private void selectAddedObject() {\n+private void selectAddedObject(EditPartViewer viewer) {\n \tfinal Object model \u003d getCreateRequest().getNewObject();\n-\tif (model \u003d\u003d null)\n+\tif (model \u003d\u003d null || viewer \u003d\u003d null)\n \t\treturn;\n-\tEditPartViewer viewer \u003d getCurrentViewer();\n \tObject editpart \u003d viewer.getEditPartRegistry().get(model);\n \tif (editpart instanceof EditPart) {\n \t\t//Force the new object to get positioned in the viewer. \n\nPeter, we will need you to verify that this doesn\u0027t introduce any problems in VE.",
    "+1",
    "*** Bug 91778 has been marked as a duplicate of this bug. ***",
    "Forgot to close as fixed."
  ],
  "commentCreationDates": [
    "2005-05-20T16:52:53+02:00",
    "2005-05-20T16:53:42+02:00",
    "2005-05-20T17:28:23+02:00",
    "2005-05-20T17:29:22+02:00",
    "2005-08-15T17:51:55+02:00",
    "2005-08-15T20:50:22+02:00",
    "2005-08-15T22:36:13+02:00",
    "2005-09-02T23:31:19+02:00",
    "2005-09-06T23:21:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.gef.tools.CreationTool.selectAddedObject",
          "source": "CreationTool.java:265"
        },
        {
          "method": "org.eclipse.gef.tools.CreationTool.performCreation",
          "source": "CreationTool.java:254"
        },
        {
          "method": "org.eclipse.gef.tools.CreationTool.handleButtonUp",
          "source": "CreationTool.java:177"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.mouseUp",
          "source": "AbstractTool.java:1035"
        },
        {
          "method": "org.eclipse.gef.EditDomain.mouseUp",
          "source": "EditDomain.java:259"
        },
        {
          "method": "org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased",
          "source": "DomainEventDispatcher.java:374"
        },
        {
          "method": "org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp",
          "source": "LightweightSystem.java:548"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:136"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1012"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2778"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2472"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1570"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1534"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:306"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:228"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:344"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:156"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:315"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:268"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:942"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:926"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "96108",
      "date": "2005-05-20T16:52:53+02:00",
      "product": "GEF",
      "component": "GEF",
      "severity": "normal"
    }
  ],
  "groupId": "96108",
  "bugId": "96108",
  "date": "2005-05-20T16:52:53+02:00",
  "product": "GEF",
  "component": "GEF",
  "severity": "normal"
}