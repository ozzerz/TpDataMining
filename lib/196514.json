{
  "comments": [
    "Build ID:  I20070621-1340\n\nSteps To Reproduce:\n1.I edited attached source java file. Accidentally I typed the following text:\n\nmain(new String0])\nAs a result I got bunch of traces in the log. \n\nMore information:\n\n(Error descriptions were different, but the line of code exception occured was one and the same)\n\njava.lang.IllegalArgumentException\n\tat org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2609)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:838)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1534)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1998)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1621)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2476)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:511)\n\tat org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:179)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2661)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1248)\n\tat org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:278)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:207)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:89)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:720)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:780)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1169)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:101)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:82)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:149)\n\tat org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)\n\tat org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:96)\n\tat org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:75)\n\tat org.eclipse.jdt.internal.ui.text.JavaReconciler.process(JavaReconciler.java:378)\n\tat org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:204)",
    "Created an attachment (id\u003d73778)\nThis is a file I edited when got the described error\n\n",
    "David, the error seems to come from statement recovery.",
    "Created an attachment (id\u003d74117)\nProposed fix\n\nThe ASTConverter try to retrieve the right bracket position. The converter search this bracket one character after the left bracket and in this case the right bracket is a recovered token with the same location as left bracket.\nOn other side the converter doesn\u0027t take into account interlinked bracket (eg a[b[0]].\n\nThe fix is to count brackets and to start the search at the left bracket location.",
    "Released for 3.4M1.\n\nTests added\n  ASTConverterTestAST3_2#test0682() -\u003e test0683()",
    "Verified for 3.4M1 using build I20070802-0800.\n",
    "It might be worth backporting to 3.3.1. David, what do you think ?",
    "+1 for 3.3.1."
  ],
  "commentCreationDates": [
    "2007-07-14T00:03:58+02:00",
    "2007-07-14T00:07:12+02:00",
    "2007-07-15T17:02:41+02:00",
    "2007-07-19T10:09:35+02:00",
    "2007-07-19T10:12:20+02:00",
    "2007-08-03T15:32:13+02:00",
    "2007-08-09T17:03:46+02:00",
    "2007-08-09T20:18:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.setSourceRange",
          "source": "ASTNode.java:2609"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:838"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1534"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1998"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1621"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2476"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:511"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations",
          "source": "ASTConverter.java:179"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2661"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1248"
        },
        {
          "method": "org.eclipse.jdt.core.dom.AST.convertCompilationUnit",
          "source": "AST.java:278"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent",
          "source": "ReconcileWorkingCopyOperation.java:207"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:780"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1169"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run",
          "source": "JavaReconcilingStrategy.java:101"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:149"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile",
          "source": "CompositeReconcilingStrategy.java:86"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile",
          "source": "JavaCompositeReconcilingStrategy.java:96"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.process",
          "source": "MonoReconciler.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaReconciler.process",
          "source": "JavaReconciler.java:378"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:204"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "196514",
      "date": "2007-07-14T00:03:58+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "196514",
  "bugId": "196514",
  "date": "2007-07-14T00:03:58+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}