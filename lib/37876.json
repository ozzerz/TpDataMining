{
  "comments": [
    "When I try to make a search references on my project an error dialog pops up \nand with the following message : \nAn error occured during the search operation\nAssertion failed;\n\nWhen I look in the log I see the following entry with a stack trace:\n!ENTRY org.eclipse.jdt.ui 4 10001 May 20, 2003 12:33:41.791\n!MESSAGE Internal Error\n!STACK 0\njava.lang.reflect.InvocationTargetException\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:283)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run\n(ProgressMonitorDialog.java:357)\n\tat org.eclipse.jdt.ui.actions.FindAction.run(FindAction.java:292)\n\tat org.eclipse.jdt.ui.actions.FindReferencesAction.run\n(FindReferencesAction.java:83)\n\tat org.eclipse.jdt.ui.actions.FindAction.run(FindAction.java:238)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:193)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:169)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:456)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:403)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:397)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:72)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1838)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1545)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)\nCaused by: org.eclipse.jdt.internal.core.Assert$AssertionFailedException: \nAssertion failed; \n\tat org.eclipse.jdt.internal.core.Assert.isTrue(Assert.java:87)\n\tat org.eclipse.jdt.internal.core.Assert.isTrue(Assert.java:74)\n\tat org.eclipse.jdt.internal.core.SourceType.\u003cinit\u003e(SourceType.java:44)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.getType\n(CompilationUnit.java:516)\n\tat \norg.eclipse.jdt.internal.core.search.matching.PotentialMatch.getQualifiedName\n(PotentialMatch.java:123)\n\tat org.eclipse.jdt.internal.core.search.matching.PotentialMatch.\u003cinit\u003e\n(PotentialMatch.java:46)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator2.addPotentialMatch\n(MatchLocator2.java:198)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator2.locateMatches\n(MatchLocator2.java:841)\n\tat org.eclipse.jdt.core.search.SearchEngine.search\n(SearchEngine.java:471)\n\tat org.eclipse.jdt.core.search.SearchEngine.search\n(SearchEngine.java:400)\n\tat org.eclipse.jdt.internal.ui.search.JavaSearchOperation.execute\n(JavaSearchOperation.java:90)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:71)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1595)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:85)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)\n\nI found a workaround, by creating a working set. This work around does not work \nif I try to move a class from one package to another and ask to update the \nreferences, it seems to do internally a search references on the workspace \ninstead of using the current working set.",
    "Could you please try to turn on the Java search trace?\n\n1. Exit Eclipse\n2. Add a .options file as a sibling of eclipse.exe with the following contents:\n# Turn on debug tracing for org.eclipse.jdt.core plugin\norg.eclipse.jdt.core/debug\u003dtrue\n# Reports java search activity\norg.eclipse.jdt.core/debug/search\u003dtrue\n3. Start eclipse with the debug options:\neclipse.exe -data \u003cpath to your workspace\u003e -debug -vm \u003cpath to your vm\u003e\ne.g. eclipse -data d:\\eclipse\\workspace -debug -vm d:\\jdk1.3.1\\jre\\bin\\java.exe\n4. Do the search and report the trace you see in the console.\n",
    "Java search traces from the execution of the search references:\n\nStartup: using configuration file:C:\\Program \nFiles\\eclipse\\workspace\\.metadata\\.config\\platform.cfg\nBoot URL: file:C:/Program \nFiles/eclipse/plugins/org.eclipse.core.boot_2.1.0/boot.jar\nStartup: splash path \u003d C:\\Program \nFiles\\eclipse\\plugins\\org.eclipse.platform_2.1.0\\splash.bmp\nWorkspace location:\n   workspace\nDebug-Options:\n    file:C:/Program Files/eclipse/.options\nInstall URL:\n    file:C:/Program Files/eclipse/\nSearching for TypeReferencePattern: pkg\u003cportal.filter\u003e, \ntype\u003cCentralOfficesController\u003e, exact match, case sensitive in \nJavaWorkspaceScope\nLocating matches in files [\n        /portail/structureApp/portal/structure/filter/FilterController.java\n        /portail/actionPlanApp/portal/actionPlan/filter/FilterController.java\n        /portail/adminApp/portal/admin/CentralOfficesAssocController.java\n        /portail/adminApp/portal/admin/ui/SCCS/s.CentralOfficesAssocController.j\nava\n        /portail/testAdminApp/portal/admin/ui/ShowCentralOfficesFilterDialog.jav\na\n        /portail/testFilter/portal/filter/TestCentralOfficesController.java\n        /portail/actionPlanApp/portal/actionPlan/filter/SCCS/s.FilterController.\njava\n        /portail/structureApp/portal/structure/filter/SCCS/s.FilterController.ja\nva\n        /portail/testFilter/portal/filter/ui/ShowCentralOfficesPanel.java\n]\nand working copies [\n        [Working copy] ShowCentralOfficesFilterDialog.java [in portal.admin.ui [\nin testAdminApp [in portail]]]\n        [Working copy] CentralOfficesController.java [in portal.filter [in \nfilter [in portail]]]\n]\n\n",
    "Thanks Patrice. Somehow the 2 files \u0027s.FilterController.java\u0027 have been indexed \nwhen they should not have been.\n\nCould you please try something else?\n1. Exit Eclipse\n2. Go to \u003cpath to your workpace\u003e\\.metadata\\.plugins\\org.eclipse.jdt.core\n3. Delete all .index files and the savedIndexNames.txt file.\n4. Restart Eclipse. This will force all indexes to be recomputed on the first \nquery.\n5. Run your search query again and see if this fails.",
    "Thanks, \n\nit fixed the problem.",
    "Closing. Please reopen if you see the problem again indicating the steps you \nfollowed to get into this state."
  ],
  "commentCreationDates": [
    "2003-05-20T18:46:52+02:00",
    "2003-05-21T16:50:13+02:00",
    "2003-05-21T19:37:51+02:00",
    "2003-05-22T11:45:38+02:00",
    "2003-05-22T15:39:30+02:00",
    "2003-05-22T16:05:46+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:283"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:357"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.FindAction.run",
          "source": "FindAction.java:292"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.FindReferencesAction.run",
          "source": "FindReferencesAction.java:83"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.FindAction.run",
          "source": "FindAction.java:238"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:193"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:169"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:456"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:403"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:397"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:72"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1838"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1545"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.jdt.internal.core.Assert$AssertionFailedException",
        "message": "Assertion failed;",
        "elements": [
          {
            "method": "org.eclipse.jdt.internal.core.Assert.isTrue",
            "source": "Assert.java:87"
          },
          {
            "method": "org.eclipse.jdt.internal.core.Assert.isTrue",
            "source": "Assert.java:74"
          },
          {
            "method": "org.eclipse.jdt.internal.core.SourceType.\u003cinit\u003e",
            "source": "SourceType.java:44"
          },
          {
            "method": "org.eclipse.jdt.internal.core.CompilationUnit.getType",
            "source": "CompilationUnit.java:516"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.PotentialMatch.getQualifiedName",
            "source": "PotentialMatch.java:123"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.PotentialMatch.\u003cinit\u003e",
            "source": "PotentialMatch.java:46"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator2.addPotentialMatch",
            "source": "MatchLocator2.java:198"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator2.locateMatches",
            "source": "MatchLocator2.java:841"
          },
          {
            "method": "org.eclipse.jdt.core.search.SearchEngine.search",
            "source": "SearchEngine.java:471"
          },
          {
            "method": "org.eclipse.jdt.core.search.SearchEngine.search",
            "source": "SearchEngine.java:400"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.search.JavaSearchOperation.execute",
            "source": "JavaSearchOperation.java:90"
          },
          {
            "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
            "source": "WorkspaceModifyOperation.java:71"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1595"
          },
          {
            "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
            "source": "WorkspaceModifyOperation.java:85"
          },
          {
            "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
            "source": "ModalContext.java:101"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "37876",
      "date": "2003-05-20T18:46:52+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "37876",
  "bugId": "37876",
  "date": "2003-05-20T18:46:52+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}