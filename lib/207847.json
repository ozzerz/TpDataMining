{
  "comments": [
    "Created an attachment (id\u003d81500)\nFragments org.eclipse.osgi.nl1 and org.eclipse.osgi.nl2\n\nBuild ID: M20070921-1145\n\nSteps To Reproduce:\n1.Download Eclipse 33GA or 331.\n2.Download org.eclipse.osgi.nl1 and org.eclipse.osgi.nl2 fragments from the attachment plugins.zip into \u003ceclipse_install_area\u003e/plugins. \n3.Bring up eclipse with the -clean option to see the warnings below. Looks like the fragments are loaded correctly except for the warnings. But, our product based on Eclipse 33GA is required to start up cleanly without warnings in the log file, hence the defect.\n\n!SESSION 2007-10-29 12:52:29.545 -----------------------------------------------\neclipse.buildId\u003dM20070921-1145\njava.version\u003d1.5.0_12\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -clean\n\n!ENTRY org.eclipse.osgi 4 0 2007-10-29 12:52:32.780\n!MESSAGE \n!STACK 0\norg.osgi.framework.BundleException: Cannot attach fragment bundle \"org.eclipse.osgi.nl2\" to resolved host \"org.eclipse.osgi\".  Try refreshing the host bundle.\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.attachFragment(BundleHost.java:575)\n\tat org.eclipse.osgi.framework.internal.core.BundleFragment.addHost(BundleFragment.java:298)\n\tat org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setResolved(PackageAdminImpl.java:332)\n\tat org.eclipse.osgi.framework.internal.core.PackageAdminImpl.applyDeltas(PackageAdminImpl.java:347)\n\tat org.eclipse.osgi.framework.internal.core.PackageAdminImpl.processDelta(PackageAdminImpl.java:424)\n\tat org.eclipse.osgi.framework.internal.core.PackageAdminImpl.doResolveBundles(PackageAdminImpl.java:221)\n\tat org.eclipse.osgi.framework.internal.core.PackageAdminImpl$1.run(PackageAdminImpl.java:164)\n\tat java.lang.Thread.run(Unknown Source)\n\n\n\nMore information:",
    "Initial analysis indicates that the fragments are not getting attached to the host bundle in the correct order (by bundle id order).  It looks like this is possible because the order of the BundleDeltas are not sorted in any way when doing a resolution operation.  One simple fix would be to order the deltas so that the processing of fragments occurs in bundle ID order.",
    "Actually I would prefer to keep this out of the point release.  Is a spurious warning in the log a critical enough issue to risk a 3.3.2 fix?",
    "Created an attachment (id\u003d84015)\nfix + testcase\n\nThis fix sorts the BundleDeltas before applying the deltas.  This ensures the group of resolved fragments are attached to a resolved host by bundle ID order.  This will avoid the initial error message from getting logged.",
    "Fix released for 3.4 M4."
  ],
  "commentCreationDates": [
    "2007-10-29T21:22:46+01:00",
    "2007-10-29T23:27:02+01:00",
    "2007-10-29T23:28:37+01:00",
    "2007-11-28T20:54:45+01:00",
    "2007-11-28T20:57:11+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Cannot attach fragment bundle \"org.eclipse.osgi.nl2\" to resolved host \"org.eclipse.osgi\".  Try refreshing the host bundle.",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.attachFragment",
          "source": "BundleHost.java:575"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleFragment.addHost",
          "source": "BundleFragment.java:298"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl.setResolved",
          "source": "PackageAdminImpl.java:332"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl.applyDeltas",
          "source": "PackageAdminImpl.java:347"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl.processDelta",
          "source": "PackageAdminImpl.java:424"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl.doResolveBundles",
          "source": "PackageAdminImpl.java:221"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdminImpl$1.run",
          "source": "PackageAdminImpl.java:164"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "207847",
      "date": "2007-10-29T21:22:46+01:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "207847",
  "bugId": "207847",
  "date": "2007-10-29T21:22:46+01:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}