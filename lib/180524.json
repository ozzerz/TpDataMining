{
  "comments": [
    "HEAD\n\nNPE in ITypeBinding#createArrayType(..) on anonymous type, e.g. here:\n\npackage test;\npublic class E1 {\n\tvoid m() {\n\t\tnew Object() {/*anon*/};\n\t}\n}\n\n\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.compiler.lookup.LocalTypeBinding.createArrayType(LocalTypeBinding.java:96)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createArrayType(LookupEnvironment.java:541)\n\tat org.eclipse.jdt.core.dom.DefaultBindingResolver.resolveArrayType(DefaultBindingResolver.java:1783)\n\tat org.eclipse.jdt.core.dom.TypeBinding.createArrayType(TypeBinding.java:92)\n\tat org.eclipse.jdt.astview.views.Binding.getChildren(Binding.java:143)\n\tat org.eclipse.jdt.astview.views.ASTViewContentProvider.getChildren(ASTViewContentProvider.java:95)\n\tat org.eclipse.jdt.astview.views.ASTViewContentProvider.hasChildren(ASTViewContentProvider.java:246)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:1980)\n\tat org.eclipse.jface.viewers.TreeViewer.isExpandable(TreeViewer.java:449)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:2006)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus(AbstractTreeViewer.java:2619)\n\tat org.eclipse.jface.viewers.TreeViewer.updatePlus(TreeViewer.java:693)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:800)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:777)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:751)\n\tat org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:495)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand(AbstractTreeViewer.java:1507)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand(AbstractTreeViewer.java:1504)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand(AbstractTreeViewer.java:1504)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand(AbstractTreeViewer.java:1504)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.reveal(AbstractTreeViewer.java:2129)\n\tat org.eclipse.jdt.astview.views.ASTView.doLinkWithEditor(ASTView.java:1158)\n\tat org.eclipse.jdt.astview.views.ASTView.handleEditorPostSelectionChanged(ASTView.java:1145)\n\tat org.eclipse.jdt.astview.views.ASTView$ListenerMix.selectionChanged(ASTView.java:214)\n\tat org.eclipse.ui.internal.AbstractSelectionService.firePostSelection(AbstractSelectionService.java:179)\n\tat org.eclipse.ui.internal.AbstractSelectionService$2.selectionChanged(AbstractSelectionService.java:71)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2550)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2502)\n\tat org.eclipse.jface.text.TextViewer$5.run(TextViewer.java:2481)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:3736)\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2958)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2226)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3282)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2361)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2325)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2200)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:152)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:359)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:174)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1141)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1116)",
    "I would say this should be rejected.\nArrays of anonymous class doesn\u0027t make sense.",
    "However I can fix it.\nso we need to decide if we want to reject it which means that we should throw an IllegalArgumentException or return an array of an anonymous type binding.",
    "Created an attachment (id\u003d62737)\nProposed fix\n\n",
    "I just checked the Javadocs again, and I guess it would make sense to throw an IAE on anonymous types. However, \n\t * \u003cli\u003eif the receiver represents a recovered binding\u003c/li\u003e\nis too restrictive IMO. In source, you can produce arrays of recovered types, so why should it not be possible from a binding?",
    "I would also allow creating them. These could also appear through generic inference, e.g.:\n\npublic class X {\n\tstatic \u003cT\u003e T[] toArray(T t) { return null; }\n\tpublic static void main(String[] args) {\n\t\tSystem.out.println(toArray(new Object(){}));\n\t}\n}\n\nThe resolvedType of #toArray invocation expression is an array of an anonymous type.\n\n\n     \n     ",
    "Released for 3.3M7",
    "Verified for 3.3 M7 using  build I20070427-0010.\nTest case is org.eclipse.jdt.core.tests.dom.ASTConverterTestAST3_2.test0674."
  ],
  "commentCreationDates": [
    "2007-04-02T19:37:13+02:00",
    "2007-04-03T01:53:26+02:00",
    "2007-04-03T02:26:00+02:00",
    "2007-04-03T02:54:33+02:00",
    "2007-04-03T10:56:28+02:00",
    "2007-04-03T13:45:33+02:00",
    "2007-04-03T20:18:53+02:00",
    "2007-04-27T16:13:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LocalTypeBinding.createArrayType",
          "source": "LocalTypeBinding.java:96"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createArrayType",
          "source": "LookupEnvironment.java:541"
        },
        {
          "method": "org.eclipse.jdt.core.dom.DefaultBindingResolver.resolveArrayType",
          "source": "DefaultBindingResolver.java:1783"
        },
        {
          "method": "org.eclipse.jdt.core.dom.TypeBinding.createArrayType",
          "source": "TypeBinding.java:92"
        },
        {
          "method": "org.eclipse.jdt.astview.views.Binding.getChildren",
          "source": "Binding.java:143"
        },
        {
          "method": "org.eclipse.jdt.astview.views.ASTViewContentProvider.getChildren",
          "source": "ASTViewContentProvider.java:95"
        },
        {
          "method": "org.eclipse.jdt.astview.views.ASTViewContentProvider.hasChildren",
          "source": "ASTViewContentProvider.java:246"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable",
          "source": "AbstractTreeViewer.java:1980"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.isExpandable",
          "source": "TreeViewer.java:449"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable",
          "source": "AbstractTreeViewer.java:2006"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus",
          "source": "AbstractTreeViewer.java:2619"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.updatePlus",
          "source": "TreeViewer.java:693"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:800"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:777"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:751"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.createChildren",
          "source": "TreeViewer.java:495"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand",
          "source": "AbstractTreeViewer.java:1507"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand",
          "source": "AbstractTreeViewer.java:1504"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand",
          "source": "AbstractTreeViewer.java:1504"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpand",
          "source": "AbstractTreeViewer.java:1504"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.reveal",
          "source": "AbstractTreeViewer.java:2129"
        },
        {
          "method": "org.eclipse.jdt.astview.views.ASTView.doLinkWithEditor",
          "source": "ASTView.java:1158"
        },
        {
          "method": "org.eclipse.jdt.astview.views.ASTView.handleEditorPostSelectionChanged",
          "source": "ASTView.java:1145"
        },
        {
          "method": "org.eclipse.jdt.astview.views.ASTView$ListenerMix.selectionChanged",
          "source": "ASTView.java:214"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.firePostSelection",
          "source": "AbstractSelectionService.java:179"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$2.selectionChanged",
          "source": "AbstractSelectionService.java:71"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2550"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2502"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$5.run",
          "source": "TextViewer.java:2481"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3736"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2958"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:2226"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3282"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2361"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2325"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2200"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:152"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:359"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:174"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1141"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1116"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "180524",
      "date": "2007-04-02T19:37:13+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "180524",
  "bugId": "180524",
  "date": "2007-04-02T19:37:13+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}