{
  "comments": [
    "exceptions were thrown when runandrender attached report with load test tool, note that eight concurrent users were simulated, and the described issue did not occur in single user scenario.\n\njava.lang.ArrayIndexOutOfBoundsException: -1\n        at com.ibm.icu.text.DigitList.isIntegral(DigitList.java:264)\n        at com.ibm.icu.text.DecimalFormat.parse(DecimalFormat.java:1497)\n        at com.ibm.icu.text.DecimalFormat.parse(DecimalFormat.java:1403)\n        at com.ibm.icu.text.NumberFormat.parse(NumberFormat.java:381)\n        at org.eclipse.birt.report.model.api.util.ParameterValidationUtil.doVali\ndateNumber(ParameterValidationUtil.java:207)\n        at org.eclipse.birt.report.model.api.util.ParameterValidationUtil.doVali\ndateNumberByPattern(ParameterValidationUtil.java:655)\n        at org.eclipse.birt.report.model.api.util.ParameterValidationUtil.valida\nte(ParameterValidationUtil.java:387)\n        at org.eclipse.birt.report.model.api.util.ParameterValidationUtil.valida\nte(ParameterValidationUtil.java:290)\n        at org.eclipse.birt.report.utility.DataUtil.validate(Unknown Source)\n        at org.eclipse.birt.report.context.ViewerAttributeBean.getParsedParamete\nrs(Unknown Source)\n        at org.eclipse.birt.report.context.ViewerAttributeBean.__initParameters(\nUnknown Source)\n        at org.eclipse.birt.report.context.ViewerAttributeBean.__init(Unknown So\nurce)\n        at org.eclipse.birt.report.context.BaseAttributeBean.init(Unknown Source\n)\n        at org.eclipse.birt.report.context.ViewerAttributeBean.\u003cinit\u003e(Unknown So\nurce)\n        at org.eclipse.birt.report.context.BirtContext.__init(Unknown Source)\n        at org.eclipse.birt.report.context.BaseContext.\u003cinit\u003e(Unknown Source)\n        at org.eclipse.birt.report.context.BirtContext.\u003cinit\u003e(Unknown Source)\n        at org.eclipse.birt.report.servlet.BirtEngineServlet.__getContext(Unknow\nn Source)\n        at org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown\n Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n        at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBas\ne.java:327)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:252)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:173)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV\nalve.java:214)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV\nalve.java:178)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j\nava:126)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j\nava:105)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal\nve.java:107)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav\na:148)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java\n:825)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce\nssConnection(Http11Protocol.java:738)\n        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpo\nint.java:526)\n        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFol\nlowerWorkerThread.java:80)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadP\nool.java:684)\n        at java.lang.Thread.run(Thread.java:595)",
    "Created an attachment (id\u003d48870)\nreport design\n\n",
    "I have checked the ICU4J source code.It seems that there is a mistake in DecimalFormat Class. When use NumberFormat.getInstance(locale) to get DecimalFormat instance, It will get one from ICULocaleService and then clone this one.DecimalFormat has a DigitList variable.When clone DecimalFormat, the DigitList var isn\u0027t renewed.Please check the following code:\n\n     /**\n     * Standard override; no change in semantics.\n     * @stable ICU 2.0\n     */\n    public Object clone() {\n        try {\n            DecimalFormat other \u003d (DecimalFormat) super.clone();\n            other.symbols \u003d (DecimalFormatSymbols) symbols.clone();\n            other.digitList \u003d new DigitList();\n            return other;\n        } catch (Exception e) {\n            throw new InternalError();\n        }\n    }\n\nI have added a new line: other.digitList \u003d new DigitList();\nDone test again. It worked well.\n\nSo this bug should depend on ICU4J issue.",
    "log a bug to ICU team. Please refer to:\n\n http://bugs.icu-project.org/cgi-bin/icu-bugs/incoming?findid\u003d5358",
    "Since this bug has fixed in the latest ICU4J build, please integrate with it.",
    "Xiaoying, please check with Xiang if this issue exists in recent build.",
    "wait for Eclipse release which includes the new ICU build.",
    "Fixed.",
    "Verified, 20070206"
  ],
  "commentCreationDates": [
    "2006-08-28T12:02:39+02:00",
    "2006-08-28T12:03:39+02:00",
    "2006-08-30T11:51:50+02:00",
    "2006-08-31T04:41:54+02:00",
    "2006-09-26T04:01:20+02:00",
    "2006-10-20T07:52:56+02:00",
    "2006-11-20T06:16:16+01:00",
    "2007-02-13T04:05:40+01:00",
    "2007-02-13T05:10:31+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-1",
      "elements": [
        {
          "method": "com.ibm.icu.text.DigitList.isIntegral",
          "source": "DigitList.java:264"
        },
        {
          "method": "com.ibm.icu.text.DecimalFormat.parse",
          "source": "DecimalFormat.java:1497"
        },
        {
          "method": "com.ibm.icu.text.DecimalFormat.parse",
          "source": "DecimalFormat.java:1403"
        },
        {
          "method": "com.ibm.icu.text.NumberFormat.parse",
          "source": "NumberFormat.java:381"
        },
        {
          "method": "org.eclipse.birt.report.model.api.util.ParameterValidationUtil.doValidateNumber",
          "source": "ParameterValidationUtil.java:207"
        },
        {
          "method": "org.eclipse.birt.report.model.api.util.ParameterValidationUtil.doValidateNumberByPattern",
          "source": "ParameterValidationUtil.java:655"
        },
        {
          "method": "org.eclipse.birt.report.model.api.util.ParameterValidationUtil.validate",
          "source": "ParameterValidationUtil.java:387"
        },
        {
          "method": "org.eclipse.birt.report.model.api.util.ParameterValidationUtil.validate",
          "source": "ParameterValidationUtil.java:290"
        },
        {
          "method": "org.eclipse.birt.report.utility.DataUtil.validate",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.context.ViewerAttributeBean.getParsedParameters",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.context.ViewerAttributeBean.__initParameters",
          "source": " Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.context.ViewerAttributeBean.__init",
          "source": "Unknown So urce"
        },
        {
          "method": "org.eclipse.birt.report.context.BaseAttributeBean.init",
          "source": "Unknown Source "
        },
        {
          "method": "org.eclipse.birt.report.context.ViewerAttributeBean.\u003cinit\u003e",
          "source": "Unknown So urce"
        },
        {
          "method": "org.eclipse.birt.report.context.BirtContext.__init",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.context.BaseContext.\u003cinit\u003e",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.context.BirtContext.\u003cinit\u003e",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__getContext",
          "source": "Unknow n Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown  Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:689"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBas e.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:802"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "Appl icationFilterChain.java:252"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationF ilterChain.java:173"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperV alve.java:214"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextV alve.java:178"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.j ava:126"
        },
        {
          "method": "org.apache.catalina.valves.ErrorReportValve.invoke",
          "source": "ErrorReportValve.j ava:105"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineVal ve.java:107"
        },
        {
          "method": "org.apache.catalina.connector.CoyoteAdapter.service",
          "source": "CoyoteAdapter.jav a:148"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java :825"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:738"
        },
        {
          "method": "org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket",
          "source": "PoolTcpEndpo int.java:526"
        },
        {
          "method": "org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt",
          "source": "LeaderFol lowerWorkerThread.java:80"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadP ool.java:684"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "155370",
      "date": "2006-08-28T12:02:39+02:00",
      "product": "BIRT",
      "component": "Build",
      "severity": "normal"
    }
  ],
  "groupId": "155370",
  "bugId": "155370",
  "date": "2006-08-28T12:02:39+02:00",
  "product": "BIRT",
  "component": "Build",
  "severity": "normal"
}