{
  "comments": [
    "The following program causes ajc 1.2 to abort:\n\npublic class Conflict { public static void main(String[] args) { } }\n\naspect Conflict1 {\n  declare precedence: Conflict1, Conflict2;\n\n   before(): execution(* *(..)) { }\n}\n\naspect Conflict2 {\n  declare precedence: Conflict2, Conflict1;\n\n\n  after(): execution(* *(..)) { }\n}",
    "The code was actually throwing a BCException() in this case (very unhelpful). \nThe exception on compiling the supplied testcase was:\n\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\bug70619\u003eajc Precedence.java\ntrouble in:\nABORT\n\nException thrown from AspectJ DEVELOPMENT\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nconflicting dominates orders\nconflicting dominates orders\norg.aspectj.weaver.BCException: conflicting dominates orders\n        at org.aspectj.weaver.World.compareByDominates(World.java:309)\n        at org.aspectj.weaver.bcel.BcelAdvice.compareTo(BcelAdvice.java:379)\n        at\norg.aspectj.util.PartialOrder$SortObject.addDirectedLinks(PartialOrder.java:68)\n        at\norg.aspectj.util.PartialOrder.addNewPartialComparable(PartialOrder.java:88)\n        at org.aspectj.util.PartialOrder.sort(PartialOrder.java:121)\n        at org.aspectj.weaver.Shadow.sortMungers(Shadow.java:330)\n        at org.aspectj.weaver.Shadow.implement(Shadow.java:323)\n        at\norg.aspectj.weaver.bcel.BcelClassWeaver.implement(BcelClassWeaver.java:1153)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:361)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:82)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:726)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:691)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:617)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:565)\n        at\norg.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:239)\n        at\norg.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:114)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:717)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:170)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:100)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:287)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:224)\n        at org.aspectj.tools.ajc.Main.main(Main.java:79)\n\n\n1 fail|abort\n\nI\u0027ve now fixed it to do correct error handling.  When you get these kinds of\nconflict it now says:\n\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\bug70619\\Precedence.java error\nconflicting declare precedence orderings for aspects: Conflict1 and Conflict2\n(no source information available)\n\t\nsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\bug70619\\Precedence.java:10\nsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\bug70619\\Precedence.java:4\n\n1 error\n\nThe \u0027see also\u0027 locations are the conflicting locations of the declare precedence\nstatements.  We cannot use one of these locations as the primary location in the\nerror message because the primary error location for a message must be in the\nfile that was being processed when the error occurred.  In the case of having\neverything in one file this is not an issue, but if the class was in A, and the\naspects were in B and C - we cannot add an error message to B or C whilst\nprocessing A - just in case we have already dealt with B/C and have already\nreported all of its errors.",
    "fixed:\n\nBUILD COMPLETE -  build.315\nDate of build: 07/26/2004 21:28:08\nTime to build: 305 minutes 55 seconds\nLast changed: 07/26/2004 14:30:19\nLast log entry: Fix for Bug 70619 compiler aborts with \"conflicting dominates\norders\" with circular declare precedences\nLatest good AspectJ jar available at:\ndownload.eclipse.org/technology/ajdt/dev/aspectj-DEVELOPMENT.jar\n",
    "Fix released as part of AspectJ 1.2.1"
  ],
  "commentCreationDates": [
    "2004-07-22T16:11:01+02:00",
    "2004-07-26T15:44:30+02:00",
    "2004-07-27T09:53:38+02:00",
    "2004-10-21T10:33:00+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.aspectj.weaver.BCException",
      "message": "conflicting dominates orders",
      "elements": [
        {
          "method": "org.aspectj.weaver.World.compareByDominates",
          "source": "World.java:309"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.compareTo",
          "source": "BcelAdvice.java:379"
        },
        {
          "method": "org.aspectj.util.PartialOrder$SortObject.addDirectedLinks",
          "source": "PartialOrder.java:68"
        },
        {
          "method": "org.aspectj.util.PartialOrder.addNewPartialComparable",
          "source": "PartialOrder.java:88"
        },
        {
          "method": "org.aspectj.util.PartialOrder.sort",
          "source": "PartialOrder.java:121"
        },
        {
          "method": "org.aspectj.weaver.Shadow.sortMungers",
          "source": "Shadow.java:330"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implement",
          "source": "Shadow.java:323"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.implement",
          "source": "BcelClassWeaver.java:1153"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:361"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:82"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:726"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:691"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:617"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:565"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:239"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:717"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:170"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:100"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:287"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:224"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:79"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "70619",
      "date": "2004-07-26T15:44:30+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    }
  ],
  "groupId": "70619",
  "bugId": "70619",
  "date": "2004-07-22T16:11:01+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "major"
}