{
  "comments": [
    "Using SLeak, opening this editor (in a product based on eclipse with many plugins) everytime,  one color object leaks\n\njava.lang.Error\n\tat org.eclipse.swt.graphics.Device.new_Object(Device.java:753)\n\tat org.eclipse.swt.graphics.Color.\u003cinit\u003e(Color.java:80)\n\tat org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities.integerToColor(FigureUtilities.java:56)\n\tat org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart.setGridColor(DiagramRootEditPart.java:397)\n\tat org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart.initWorkspaceViewerProperties(DiagramRootEditPart.java:671)\n\tat org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart.activate(DiagramRootEditPart.java:645)\n\tat org.eclipse.gef.ui.parts.AbstractEditPartViewer.setRootEditPart(AbstractEditPartViewer.java:697)\n\tat org.eclipse.gef.ui.parts.GraphicalViewerImpl.setRootEditPart(GraphicalViewerImpl.java:374)\n\tat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditor.configureGraphicalViewer(DiagramEditor.java:829)\n\tat \n\u003csome\u003eEditor.configureGraphicalViewer(\u003csome\u003eEditor.java:161)\n\tat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditor.createGraphicalViewer(DiagramEditor.java:792)\n\tat org.eclipse.gef.ui.parts.GraphicalEditor.createPartControl(GraphicalEditor.java:163)\n\tat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditorWithFlyOutPalette.createPartControl(DiagramEditorWithFlyOutPalette.java:310)\n\tat org.eclipse.gmf.runtime.diagram.ui.resources.editor.parts.DiagramDocumentEditor.createPartControl(DiagramDocumentEditor.java:1459)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:596)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:372)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:566)\n\tat org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:290)\n\tat org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:140)\n\tat org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:268)\n\tat org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)\n\tat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:394)\n\tat org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1144)\n\tat org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1097)\n\tat org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1311)\n\tat org.eclipse.ui.internal.PartStack.add(PartStack.java:455)\n\tat org.eclipse.ui.internal.EditorStack.add(EditorStack.java:102)\n\tat org.eclipse.ui.internal.PartStack.add(PartStack.java:441)\n\tat org.eclipse.ui.internal.EditorStack.add(EditorStack.java:111)\n\tat org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:60)\n\tat org.eclipse.ui.internal.EditorAreaHelper.addToLayout(EditorAreaHelper.java:217)\n\tat org.eclipse.ui.internal.EditorAreaHelper.addEditor(EditorAreaHelper.java:207)\n\tat org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:820)\n\tat org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:719)\n\tat org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:680)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2586)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2521)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$10(WorkbenchPage.java:2513)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2498)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2493)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2470)\n\tat org.eclipse.ui.ide.IDE.openEditor(IDE.java:419)\n...\n\tat org.eclipse.jface.viewers.StructuredViewer$1.run(StructuredViewer.java:796)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n\tat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:149)\n\tat org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick(StructuredViewer.java:794)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.handleDoubleSelect(AbstractTreeViewer.java:1227)\n\tat org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected(StructuredViewer.java:1158)\n\tat org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent(OpenStrategy.java:223)\n\tat org.eclipse.jface.util.OpenStrategy.access$0(OpenStrategy.java:220)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:281)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d49195)\nPatch\n\nWhen setting the gridColor of a DiagramRootEditPart, FigureUtilities was used to get the color, as opposed to using DiagramColorRegistry. Thus, when the diagram was closed, the color was not disposed of properly.\n\nThis patch fixes the problem by updating the setGridColor method to use the DiagramColorRegistry.",
    "Cherie committed the patch for David.",
    "closed"
  ],
  "commentCreationDates": [
    "2006-08-29T23:42:27+02:00",
    "2006-08-31T20:11:41+02:00",
    "2006-09-05T16:14:19+02:00",
    "2007-06-06T20:05:35+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Error",
      "elements": [
        {
          "method": "org.eclipse.swt.graphics.Device.new_Object",
          "source": "Device.java:753"
        },
        {
          "method": "org.eclipse.swt.graphics.Color.\u003cinit\u003e",
          "source": "Color.java:80"
        },
        {
          "method": "org.eclipse.gmf.runtime.draw2d.ui.figures.FigureUtilities.integerToColor",
          "source": "FigureUtilities.java:56"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart.setGridColor",
          "source": "DiagramRootEditPart.java:397"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart.initWorkspaceViewerProperties",
          "source": "DiagramRootEditPart.java:671"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.DiagramRootEditPart.activate",
          "source": "DiagramRootEditPart.java:645"
        },
        {
          "method": "org.eclipse.gef.ui.parts.AbstractEditPartViewer.setRootEditPart",
          "source": "AbstractEditPartViewer.java:697"
        },
        {
          "method": "org.eclipse.gef.ui.parts.GraphicalViewerImpl.setRootEditPart",
          "source": "GraphicalViewerImpl.java:374"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramEditor.configureGraphicalViewer",
          "source": "DiagramEditor.java:829"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "155605",
      "date": "2006-08-29T23:42:27+02:00",
      "product": "GMF",
      "component": "Runtime Diagram",
      "severity": "normal"
    }
  ],
  "groupId": "155605",
  "bugId": "155605",
  "date": "2006-08-29T23:42:27+02:00",
  "product": "GMF",
  "component": "Runtime Diagram",
  "severity": "normal"
}