{
  "comments": [
    "In my particular case, if I compile this project using a JDK1.3 \"javac\", it \nwill compile.  However, when I am using the compiler that comes with WSAD \nVersion 4.0.2, it is not able to compile.  (NOTE:  The version choices in the \nbug report indicate 1.0 and 2.0, I have no idea how to tell what I have)\n\n  I get a message box popping up that says \"Errors During Build\"  and details \npoints to \n\u003d\u003d\u003d\u003e org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding\n  \n    The log file says:\n\n\nLog: Thu Mar 07 14:19:10 EST 2002\n2 org.eclipse.core.resources 2 Problems occurred when invoking code from plug-\nin: org.eclipse.core.resources.\njava.lang.ClassCastException: \norg.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding\n at org.eclipse.jdt.internal.compiler.lookup.BlockScope.emulateOuterAccess\n(BlockScope.java:297)\n at org.eclipse.jdt.internal.compiler.lookup.BlockScope.propagateInnerEmulation\n(BlockScope.java:1144)\n at org.eclipse.jdt.internal.compiler.ast.AllocationExpression.analyseCode\n(AllocationExpression.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.AllocationExpression.analyseCode\n(AllocationExpression.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.SingleNameReference.analyseAssignment\n(SingleNameReference.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.Assignment.analyseCode(Assignment.java\n(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.Block.analyseCode(Block.java(Compiled \nCode))\n at org.eclipse.jdt.internal.compiler.ast.IfStatement.analyseCode\n(IfStatement.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode\n(AbstractMethodDeclaration.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode\n(TypeDeclaration.java:145)\n at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode\n(AbstractMethodDeclaration.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode\n(TypeDeclaration.java(Compiled Code))\n at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode\n(CompilationUnitDeclaration.java:67)\n at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:379)\n at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java(Compiled \nCode))\n at org.eclipse.jdt.internal.core.builder.impl.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:90)\n at org.eclipse.jdt.internal.core.builder.impl.BatchImageBuilder.build\n(BatchImageBuilder.java(Compiled Code))\n at \norg.eclipse.jdt.internal.core.builder.impl.JavaDevelopmentContextImpl.createStat\ne(JavaDevelopmentContextImpl.java:146)\n at org.eclipse.jdt.internal.core.builder.impl.JavaBuilder.fullBuild\n(JavaBuilder.java:148)\n at org.eclipse.jdt.internal.core.builder.impl.JavaBuilder.build\n(JavaBuilder.java:46)\n at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:93)\n at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:761)\n at org.eclipse.core.runtime.Platform.run(Platform.java:393)\n at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:114)\n at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:73)\n at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:41)\n at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:140)\n at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:761)\n at org.eclipse.core.runtime.Platform.run(Platform.java:393)\n at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:154)\n at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:214)\n at org.eclipse.core.internal.resources.Project.build(Project.java:110)\n at org.eclipse.ui.actions.BuildAction.invokeOperation(BuildAction.java:90)\n at org.eclipse.ui.actions.WorkspaceAction.execute(WorkspaceAction.java:111)\n at org.eclipse.ui.actions.WorkspaceAction$1.execute(WorkspaceAction.java:268)\n at org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:64)\n at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1197)\n at org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:78)\n\n\n   This is extremely reproduceable.  I\u0027m trying to create a smaller test case \nof the problem but I have isolated the offending \"java\" source code to one \nparticular file.",
    "It looks like a duplicate of 6378. If you can isolate a test case, we could confirm this is fixed in \nthe 2.0 stream.",
    "I am still working on trying to skinny down the failing source.  (There\u0027s about \n271 source files in this project I\u0027m dealing with and I can\u0027t really send all \nthis source to you).  I will look at problem #6378 as well to see what it \nsays.  Thanks!",
    "Here is an isolated test case for the problem we solved in 6378. If you have a \npattern of code close to this, then this is fixed in 2.0.\n\npublic class A {\npublic Object foo() {\n\tB b \u003d new B() {\n\t\tprotected Object bar() {\n\t\t\treturn new B.C() {};\n\t\t}\n\t};\n\treturn b;\n}\n}\n\nclass B {\n\tclass C {\n\t}\n}\n\nIf you compile this code in 1.0, you\u0027ll get the same stacktrace than the one \nyou provided. Did you try to compile your code in a 2.0 build?",
    "The failing source java file does have a pattern similar to what you describe.  \nIt\u0027s beaucoup inner classes.  Is it possible to get this fix against the \nEclipse 1.0 base ?",
    "No this is unlikely, since so many changes did occur in this area in between \n1.0 and 2.0. Attempting to issue a patch would be hard, and likely causing some \nmore troubles.\n\nYou may want to change your source code for the short term (until you get a \nrefreshed WSAD build based on Eclipse 2.0).\n\nThe following would compile fine in 1.0:\n\npublic class X {\n\tpublic Object foo() {\n\t\tB b \u003d new B() {\n\t\t\tprotected Object bar() {\n\t\t\t\treturn new B.C(this) {\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\treturn b;\n\t}\n}\nclass B {\n\tstatic class C {\n\t\tC(B b){\n\t\t} \n\t}\n} ",
    "I just wanted to document that I did try the Eclipse 2.0 build (20020214) and \nthe problem is resolved.\n"
  ],
  "commentCreationDates": [
    "2002-03-12T19:03:34+01:00",
    "2002-03-12T19:32:52+01:00",
    "2002-03-13T17:43:10+01:00",
    "2002-03-13T17:51:15+01:00",
    "2002-03-13T21:14:09+01:00",
    "2002-03-14T17:34:18+01:00",
    "2002-03-15T16:43:45+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BlockScope.emulateOuterAccess",
          "source": "BlockScope.java:297"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BlockScope.propagateInnerEmulation",
          "source": "BlockScope.java:1144"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AllocationExpression.analyseCode",
          "source": "AllocationExpression.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AllocationExpression.analyseCode",
          "source": "AllocationExpression.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.SingleNameReference.analyseAssignment",
          "source": "SingleNameReference.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.Assignment.analyseCode",
          "source": "Assignment.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.Block.analyseCode",
          "source": "Block.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.IfStatement.analyseCode",
          "source": "IfStatement.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode",
          "source": "AbstractMethodDeclaration.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "TypeDeclaration.java:145"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode",
          "source": "AbstractMethodDeclaration.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "TypeDeclaration.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode",
          "source": "CompilationUnitDeclaration.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:379"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.impl.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:90"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.impl.BatchImageBuilder.build",
          "source": "BatchImageBuilder.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.impl.JavaDevelopmentContextImpl.createState",
          "source": "JavaDevelopmentContextImpl.java:146"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.impl.JavaBuilder.fullBuild",
          "source": "JavaBuilder.java:148"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.impl.JavaBuilder.build",
          "source": "JavaBuilder.java:46"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:93"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:761"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:393"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:114"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:73"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:41"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:140"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:761"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:393"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:154"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:214"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.build",
          "source": "Project.java:110"
        },
        {
          "method": "org.eclipse.ui.actions.BuildAction.invokeOperation",
          "source": "BuildAction.java:90"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceAction.execute",
          "source": "WorkspaceAction.java:111"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceAction$1.execute",
          "source": "WorkspaceAction.java:268"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:64"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1197"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:78"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "11201",
      "date": "2002-03-12T19:03:34+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "blocker"
    }
  ],
  "groupId": "11201",
  "bugId": "11201",
  "date": "2002-03-12T19:03:34+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "blocker"
}