{
  "comments": [
    "NullSourceEditingTextTools#getDocument(), #getCaretOffset() throws NPE when \nit\u0027s field fTextEditor is not setted by calling #setTextEditor method.\n\nIn following snippet codes, fTextEditor can be null because \"fTextEditor\" is \ninitialized by calling #setTextEditor.\n\npublic IDocument getDocument() {\nreturn fTextEditor.getDocumentProvider().getDocument(fTextEditor.getEditorInput\n());\n}\npublic ITextSelection getCaretOffset() {\nISelection sel \u003d fTextEditor.getSelectionProvider().getSelection()\n....\n}",
    "While that\u0027s true, normal usage doesn\u0027t skip setting the text editor field.  Are\nyou running into an actual problem at runtime?",
    "It can be seen in D\u0026D operation with CSS editor. To reproduce it,\n\n1. Create Dynamic Web Project with Default options.\n2. Craete test1.css, test2.css under WebContent folder.\n3. Drag test2.css in Project Explorer and Drop it to CSS editor whose input is \ntest1.css.\n4. NullPointerException is thrown.\n\nHere is the .log file. Due to it, setTextEditor also throws NPE.\n\n!ENTRY org.eclipse.wst.sse.ui 4 4 2005-08-10 10:05:14.328\n!MESSAGE Problem creating ISourceEditingTextTools implementation\n!STACK 0\njava.lang.NoSuchMethodException: \norg.eclipse.wst.sse.ui.internal.provisional.extensions.breakpoint.NullSourceEdit\ningTextTools.setTextEditor(org.eclipse.wst.sse.ui.internal.StructuredTextEditor)\n\tat java.lang.Class.getMethod(Class.java:1078)\n\tat \norg.eclipse.wst.sse.ui.internal.StructuredTextEditor.createSourceEditingTextTool\ns(StructuredTextEditor.java:979)\n\tat org.eclipse.wst.sse.ui.internal.StructuredTextEditor.getAdapter\n(StructuredTextEditor.java:1374)\n\tat org.eclipse.wst.sse.ui.internal.AbstractDropAction.insert\n(AbstractDropAction.java:43)\n\tat org.eclipse.wst.sse.ui.internal.FileDropAction.run\n(FileDropAction.java:45)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java(Compiled Code))\n\tat java.lang.reflect.Method.invoke(Method.java(Compiled Code))\n\tat org.eclipse.wst.sse.ui.internal.extension.DropActionProxy.invoke\n(DropActionProxy.java:139)\n\tat $Proxy0.run(Unknown Source)\n\tat \norg.eclipse.wst.sse.ui.internal.ExtendedEditorDropTargetAdapter.doDrop\n(ExtendedEditorDropTargetAdapter.java:73)\n\tat org.eclipse.wst.sse.ui.internal.ExtendedEditorDropTargetAdapter.drop\n(ExtendedEditorDropTargetAdapter.java:220)\n\tat org.eclipse.wst.sse.ui.internal.ReadOnlyAwareDropTargetAdapter.drop\n(ReadOnlyAwareDropTargetAdapter.java:39)\n\tat org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java\n(Compiled Code))\n\tat org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:405)\n\tat org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:350)\n\tat org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)\n\tat org.eclipse.swt.internal.ole.win32.COMObject.callback6\n(COMObject.java:117)\n\tat org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)\n\tat org.eclipse.swt.dnd.DragSource.drag(DragSource.java:277)\n\tat org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)\n\tat org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)\n\n!ENTRY org.eclipse.ui 4 4 2005-08-10 10:05:14.344\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 2005-08-10 10:05:14.344\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n\tat \norg.eclipse.wst.sse.ui.internal.provisional.extensions.breakpoint.NullSourceEdit\ningTextTools.getDocument(NullSourceEditingTextTools.java:47)\n\tat org.eclipse.wst.sse.ui.internal.AbstractDropAction.insert\n(AbstractDropAction.java:45)\n\tat org.eclipse.wst.sse.ui.internal.FileDropAction.run\n(FileDropAction.java:45)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java(Compiled Code))\n\tat java.lang.reflect.Method.invoke(Method.java(Compiled Code))\n\tat org.eclipse.wst.sse.ui.internal.extension.DropActionProxy.invoke\n(DropActionProxy.java:139)\n\tat $Proxy0.run(Unknown Source)\n\tat \norg.eclipse.wst.sse.ui.internal.ExtendedEditorDropTargetAdapter.doDrop\n(ExtendedEditorDropTargetAdapter.java:73)\n\tat org.eclipse.wst.sse.ui.internal.ExtendedEditorDropTargetAdapter.drop\n(ExtendedEditorDropTargetAdapter.java:220)\n\tat org.eclipse.wst.sse.ui.internal.ReadOnlyAwareDropTargetAdapter.drop\n(ReadOnlyAwareDropTargetAdapter.java:39)\n\tat org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java\n(Compiled Code))\n\tat org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:405)\n\tat org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:350)\n\tat org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)\n\tat org.eclipse.swt.internal.ole.win32.COMObject.callback6\n(COMObject.java:117)\n\tat org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)\n\tat org.eclipse.swt.dnd.DragSource.drag(DragSource.java:277)\n\tat org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)\n\tat org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "I\u0027m seeing a NoSuchMethodException every time i open the css editor.\n\nI\u0027m not sure if NullSourceEditingTextTools is the one with the problem, but it \nlooks like at least there\u0027s something wrong with \nStructuredTextEditor.createSourceEditingTextTools\n\nIt has the following:\ntry {\n\tMethod method \u003d tools.getClass().getMethod(\"setTextEditor\", new Class[]\n{StructuredTextEditor.class}); //$NON-NLS-1$\n\tif (method \u003d\u003d null) {\n\t\tmethod \u003d tools.getClass().getMethod(\"setTextEditor\", new Class\n[]{ITextEditor.class}); //$NON-NLS-1$\n\t}\n\tif (method \u003d\u003d null) {\n\t\tmethod \u003d tools.getClass().getMethod(\"setTextEditor\", new Class\n[]{IEditorPart.class}); //$NON-NLS-1$\n\t}\n\tif (method !\u003d null) {\n\t\tif (!method.isAccessible()) {\n\t\t\tmethod.setAccessible(true);\n\t\t}\n\t\tmethod.invoke(tools, new Object[]{this});\n\t}\n}\ncatch (Exception e) {\n\tLogger.logException(\"Problem creating ISourceEditingTextTools \nimplementation\", e); //$NON-NLS-1$\n}\n\nThe problem is instead of Class.getMethod returning method \u003d null, it throws a \nNoSuchMethodException.  So instead of checking for method \u003d\u003d null, there \nshould be try catch blocks.  It should look something like the following:\n\ntry {\n\tMethod method \u003d null;\n\ttry {\n\t\tmethod \u003d tools.getClass().getMethod(\"setTextEditor\", new Class\n[]{StructuredTextEditor.class}); //$NON-NLS-1$\n\tcatch (NoSuchMethodException e) {\n\t\ttry {\n\t\t\tmethod \u003d tools.getClass().getMethod(\"setTextEditor\", \nnew Class[]{ITextEditor.class}); //$NON-NLS-1$\n\t\t}\n\t\tcatch (NoSuchMethodException e) {\n\t\t\ttry {\n\t\t\t\tmethod \u003d tools.getClass().getMethod\n(\"setTextEditor\", new Class[]{IEditorPart.class}); //$NON-NLS-1$\n\t\t\t} catch (Exception e) {\n\t\t\t}\n\t\t}\n\t}\n\n\tif (method !\u003d null) {\n\t\tif (!method.isAccessible()) {\n\t\t\tmethod.setAccessible(true);\n\t\t}\n\t\tmethod.invoke(tools, new Object[]{this});\n\t}\n}\ncatch (Exception e) {\n\tLogger.logException(\"Problem creating ISourceEditingTextTools \nimplementation\", e); //$NON-NLS-1$\n}\n",
    "it looks like this was fixed on 9/28.  so the fix should be included in the \nwtp 1.0 m9 build.",
    "*** Bug 114884 has been marked as a duplicate of this bug. ***",
    "Actually, I just realized this is still broken in WTP 1.0 M9.\n\nThe text editor is still not being set in NullSourceEditingTextTools.  This is\nbecause NullSourceEditingTextTools#setTextEditor is a package projected method.\n So StructuredTextEditor#createSourceEditingTextTools still cannot set the text\neditor.",
    "Fixed. NullSourceEditingTextTools.setTextEditor() is now public.",
    "Verified"
  ],
  "commentCreationDates": [
    "2005-08-09T13:14:57+02:00",
    "2005-08-09T19:02:38+02:00",
    "2005-08-10T03:16:37+02:00",
    "2005-09-15T23:07:41+02:00",
    "2005-11-03T16:43:35+01:00",
    "2005-11-03T16:45:02+01:00",
    "2005-11-11T20:35:57+01:00",
    "2005-11-14T21:50:01+01:00",
    "2006-02-22T07:11:13+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodException",
      "message": "org.eclipse.wst.sse.ui.internal.provisional.extensions.breakpoint.NullSourceEdit ingTextTools.setTextEditor(org.eclipse.wst.sse.ui.internal.StructuredTextEditor)",
      "elements": [
        {
          "method": "java.lang.Class.getMethod",
          "source": "Class.java:1078"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.StructuredTextEditor.createSourceEditingTextTools",
          "source": "StructuredTextEditor.java:979"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.StructuredTextEditor.getAdapter",
          "source": "StructuredTextEditor.java:1374"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.AbstractDropAction.insert",
          "source": "AbstractDropAction.java:43"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.FileDropAction.run",
          "source": "FileDropAction.java:45"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java(Compiled Code)"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.extension.DropActionProxy.invoke",
          "source": "DropActionProxy.java:139"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "106456",
      "date": "2005-08-10T03:16:37+02:00",
      "product": "Web Tools",
      "component": "wst.sse",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.wst.sse.ui.internal.provisional.extensions.breakpoint.NullSourceEditingTextTools.getDocument",
          "source": "NullSourceEditingTextTools.java:47"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.AbstractDropAction.insert",
          "source": "AbstractDropAction.java:45"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.FileDropAction.run",
          "source": "FileDropAction.java:45"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java(Compiled Code)"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.extension.DropActionProxy.invoke",
          "source": "DropActionProxy.java:139"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "106456",
      "date": "2005-08-10T03:16:37+02:00",
      "product": "Web Tools",
      "component": "wst.sse",
      "severity": "normal"
    }
  ],
  "groupId": "106456",
  "bugId": "106456",
  "date": "2005-08-09T13:14:57+02:00",
  "product": "Web Tools",
  "component": "wst.sse",
  "severity": "normal"
}