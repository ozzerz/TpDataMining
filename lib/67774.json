{
  "comments": [
    "Hi,\nI am getting null-pointer-exceptions whenever I try to specify a pointcut with \na \"withincode(Signature)\" clause. E.g.:\n\npublic aspect DetectSystemOutErrorUsage \n{\npointcut allSystemOutAndSystemErrAccesses(): \n\t(get(* System.out) || get(* System.err))\n\t;\n\ndeclare warning: \n\tallSystemOutAndSystemErrAccesses() \n\t\u0026\u0026 !adviceexecution()\n\t\u0026\u0026 !within(com.tivoli.act..Test*)\n\t\u0026\u0026 !within(com.tivoli.act.log..*)\n\t\u0026\u0026 !execution(* com.tivoli.act..*.main(..))\n\t\u0026\u0026 !execution(* com.tivoli.act..*.usage())\n\t// \u0026\u0026 !withincode(* com.tivoli.act..*.main(..))\n\t// \u0026\u0026 !withincode(* com.tivoli.act..*.usage())\n\t: \"Warning: use of System.out or System.err - consider logging \ninstead!\";\n}\n\nIn the above example excluding main() and usage() methods from the pointcut \nusing an execution(...)-clause (shows) works but using a withincode()-clause \n(as commented) always yields an NPE:\n\ntrouble in:\nnull\njava.lang.NullPointerException\n        at org.aspectj.weaver.patterns.SignaturePattern.matches\n(SignaturePattern.java:87)\n        at org.aspectj.weaver.patterns.WithincodePointcut.match\n(WithincodePointcut.java:42)\n        at org.aspectj.weaver.patterns.NotPointcut.match(NotPointcut.java:45)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.ShadowMunger.match(ShadowMunger.java:62)\n        at org.aspectj.weaver.Checker.match(Checker.java:48)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match\n(BcelClassWeaver.java:1121)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.matchInit\n(BcelClassWeaver.java:895)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match\n(BcelClassWeaver.java:793)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave\n(BcelClassWeaver.java:343)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave\n(BcelClassWeaver.java:80)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:724)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump\n(BcelWeaver.java:689)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify\n(BcelWeaver.java:615)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:563)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave\n(AjCompilerAdapter.java:239)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling\n(AjCompilerAdapter.java:114)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)\n        at \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation\n(AjBuildManager.java:601)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:160)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:94)\n        at org.aspectj.ajde.internal.CompilerAdapter.compile\n(CompilerAdapter.java:108)\n        at org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run\n(AspectJBuildManager.java:165)\n!SESSION Jun 18, 2004 10:49:48.666 ---------------------------------------------\neclipse.buildId\u003dI200406110010\njava.version\u003d1.4.2_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_CH\n\n!ENTRY org.eclipse.ajdt.ui 4 0 Jun 18, 2004 10:49:48.666\n!MESSAGE NullPointerException thrown: null\n!STACK 0\njava.lang.NullPointerException\n        at org.aspectj.weaver.patterns.SignaturePattern.matches\n(SignaturePattern.java:87)\n        at org.aspectj.weaver.patterns.WithincodePointcut.match\n(WithincodePointcut.java:42)\n        at org.aspectj.weaver.patterns.NotPointcut.match(NotPointcut.java:45)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.patterns.AndPointcut.match(AndPointcut.java:42)\n        at org.aspectj.weaver.ShadowMunger.match(ShadowMunger.java:62)\n        at org.aspectj.weaver.Checker.match(Checker.java:48)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match\n(BcelClassWeaver.java:1121)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.matchInit\n(BcelClassWeaver.java:895)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match\n(BcelClassWeaver.java:793)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave\n(BcelClassWeaver.java:343)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave\n(BcelClassWeaver.java:80)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:724)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump\n(BcelWeaver.java:689)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify\n(BcelWeaver.java:615)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:563)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave\n(AjCompilerAdapter.java:239)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling\n(AjCompilerAdapter.java:114)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)\n        at \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation\n(AjBuildManager.java:601)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:160)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:94)\n        at org.aspectj.ajde.internal.CompilerAdapter.compile\n(CompilerAdapter.java:108)\n        at org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run\n(AspectJBuildManager.java:165)\n\n\nMichael",
    "Thanks Michael for privately sending me your source... from all that source I\u0027ve\nfinally recreated the problem with this tiny program:\n\naspect B {\n  public A.new(String s) { }\n  declare warning: withincode(void main(..)): \"X\";\n}\n\nclass A {\n  private final static String name \u003d A.class.getName();\n}\n\nI suspected it was an initialization issue but I couldn\u0027t recreate it myself. \nThen I learned from your application that an ITD\u0027d ctor was also in the mix.\n\nAnyway, I\u0027ll now work on fixing it ...",
    "*** Bug 65688 has been marked as a duplicate of this bug. ***",
    "Ok.  The problem is to do with the preinitialization join point shadow not\ncorrectly returning the right signature for the ctor that contains it.  It\nreturns null when asked \u0027where are you?\u0027 - which results in an NPE.  Although\nthe pointcuts we are discussing in this bug are looking for other shadows (not\nin ctors), we still attempt to match against preinitialization shadows from ITDd\nctors.  The fix is to simply get it to return the signature for the ctor\ncontaining it.\n\nFix checked in, waiting for build before closing this bug.",
    "Fixed, available in dev build:\n\nBUILD COMPLETE -  build.324\nDate of build: 08/02/2004 15:14:37\nTime to build: 100 minutes 0 seconds\nLast changed: 08/02/2004 14:43:47\nLast log entry: Fix for Bugzilla Bug 67774 Nullpointer-exception in pointcuts\nusing withincode() clause\nLatest good AspectJ jar available at:\ndownload.eclipse.org/technology/ajdt/dev/aspectj-DEVELOPMENT.jar",
    "Fix released as part of AspectJ 1.2.1"
  ],
  "commentCreationDates": [
    "2004-06-18T10:54:37+02:00",
    "2004-07-26T16:25:17+02:00",
    "2004-07-28T18:20:54+02:00",
    "2004-08-02T15:55:59+02:00",
    "2004-08-02T18:06:47+02:00",
    "2004-10-21T10:32:23+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.patterns.SignaturePattern.matches",
          "source": "SignaturePattern.java:87"
        },
        {
          "method": "org.aspectj.weaver.patterns.WithincodePointcut.match",
          "source": "WithincodePointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.NotPointcut.match",
          "source": "NotPointcut.java:45"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.ShadowMunger.match",
          "source": "ShadowMunger.java:62"
        },
        {
          "method": "org.aspectj.weaver.Checker.match",
          "source": "Checker.java:48"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:1121"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.matchInit",
          "source": "BcelClassWeaver.java:895"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:793"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:343"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:80"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:724"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:689"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:615"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:563"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:239"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:601"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:160"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:94"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:108"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:165"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "67774",
      "date": "2004-06-18T10:54:37+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.patterns.SignaturePattern.matches",
          "source": "SignaturePattern.java:87"
        },
        {
          "method": "org.aspectj.weaver.patterns.WithincodePointcut.match",
          "source": "WithincodePointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.NotPointcut.match",
          "source": "NotPointcut.java:45"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.match",
          "source": "AndPointcut.java:42"
        },
        {
          "method": "org.aspectj.weaver.ShadowMunger.match",
          "source": "ShadowMunger.java:62"
        },
        {
          "method": "org.aspectj.weaver.Checker.match",
          "source": "Checker.java:48"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:1121"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.matchInit",
          "source": "BcelClassWeaver.java:895"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:793"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:343"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:80"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:724"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:689"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:615"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:563"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:239"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:601"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:160"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:94"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:108"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:165"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "67774",
      "date": "2004-06-18T10:54:37+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    }
  ],
  "groupId": "67774",
  "bugId": "67774",
  "date": "2004-06-18T10:54:37+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "major"
}