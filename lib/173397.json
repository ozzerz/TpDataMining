{
  "comments": [
    "I am running I20070205-1824 build of Eclipse 3.3m5 and getting this error when opening an XML editor from WST Version: 1.6.0.v200611220050-iA4pdQ1Ztn4xezD / Build id: 200701031457\n\n-- Error Log --\nDate: Thu Feb 08 00:59:14 EST 2007\nMessage: Unhandled event loop exception\nSeverity: Error\nPlugin ID: org.eclipse.ui\nStack Trace:\norg.eclipse.swt.SWTError: Cannot initialize Drop\n\tat org.eclipse.swt.dnd.DND.error(DND.java:247)\n\tat org.eclipse.swt.dnd.DND.error(DND.java:208)\n\tat org.eclipse.swt.dnd.DropTarget.\u003cinit\u003e(DropTarget.java:130)\n\tat org.eclipse.ui.internal.EditorSiteDragAndDropServiceImpl$MergedDropTarget.\u003cinit\u003e(EditorSiteDragAndDropServiceImpl.java:70)\n\tat org.eclipse.ui.internal.EditorSiteDragAndDropServiceImpl.addMergedDropTarget(EditorSiteDragAndDropServiceImpl.java:156)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.installTextDragAndDrop(AbstractTextEditor.java:3189)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.initializeDragAndDrop(AbstractTextEditor.java:2820)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl(AbstractTextEditor.java:2898)\n\tat org.eclipse.ui.texteditor.StatusTextEditor.createPartControl(StatusTextEditor.java:53)\n\tat org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl(AbstractDecoratedTextEditor.java:373)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor.createPartControl(StructuredTextEditor.java:1771)\n\tat org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:185)\n\tat org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:155)\n\tat org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.addSourcePage(XMLMultiPageEditorPart.java:336)\n\tat org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.createPages(XMLMultiPageEditorPart.java:507)\n\tat org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:278)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:662)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:421)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:586)\n\tat org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:299)\n\tat org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:179)\n\tat org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:268)\n\tat org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)\n\tat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:394)\n\tat org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1189)\n\tat org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1142)\n\tat org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1368)\n\tat org.eclipse.ui.internal.PartStack.add(PartStack.java:468)\n\tat org.eclipse.ui.internal.EditorStack.add(EditorStack.java:103)\n\tat org.eclipse.ui.internal.PartStack.add(PartStack.java:454)\n\tat org.eclipse.ui.internal.EditorStack.add(EditorStack.java:112)\n\tat org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:66)\n\tat org.eclipse.ui.internal.EditorAreaHelper.addToLayout(EditorAreaHelper.java:217)\n\tat org.eclipse.ui.internal.EditorAreaHelper.addEditor(EditorAreaHelper.java:207)\n\tat org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:857)\n\tat org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:756)\n\tat org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:717)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2596)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2524)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$12(WorkbenchPage.java:2516)\n\tat org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2501)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2496)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2480)\n\tat org.eclipse.ui.actions.OpenWithMenu.openEditor(OpenWithMenu.java:334)\n\tat org.eclipse.ui.actions.OpenWithMenu.access$0(OpenWithMenu.java:326)\n\tat org.eclipse.ui.actions.OpenWithMenu$2.handleEvent(OpenWithMenu.java:190)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3490)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3104)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2239)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2203)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2078)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:456)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:451)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1124)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1099)",
    "Mind trying a later build? Of the platform! \u003e I20070207-0800.\n\n\n\n\n*** This bug has been marked as a duplicate of bug 173034 ***",
    "I do not think that this is a duplicate but rather, that your source page already added a DropTarget directly to the StyledText widget. The other bug only happens if a user disables and enables text DnD while the editor is already open.\n\nIf you indeed directly attach the DragTarget then you should change that code and use the IDragAndDropService instead. You can get the service via\n  (IDragAndDropService)editorSite.getService(IDragAndDropService.class);\n",
    "I think Dani\u0027s right ... I tried a more recent build and still had the problem. \n\n",
    "Nitin, I think you knew about this? (But, ask Dani if questions :) \n\nThanks all. \n",
    "The only thing we can do is catching the SWTError (see bug 173410 why) but that would disable the Platform drag and drop feature for the XML editor and it will again be in trouble as soon as another client uses the IDragAndDropService.\n\nClearly the fix has to be done on the XML editor side but in order not to break the XML editor I suggest that for M5 Platform UI guards this case by catching the SWTError in \nEditorSiteDragAndDropServiceImpl.addMergedDropTarget(EditorSiteDragAndDropServiceImpl.java:156)\n\n\nJust a reminder that it is and will always be dangerous to directly operate on the editor\u0027s StyledText widget and the API of ITextViewer als mentions this:\n/**\n * Returns this viewer\u0027s SWT control, \u003ccode\u003enull\u003c/code\u003e if the control is \n * disposed.\n * \u003cp\u003e\n * \u003cem\u003eCalling API directly on the widget can interfere with features provided\n * by a text viewer. Clients who call API directly on the widget are responsible\n * to resolve such conflicts on their side.\u003c/em\u003e \n * \u003c/p\u003e\n *\n * @return the SWT control or \u003ccode\u003enull\u003c/code\u003e\n */\nStyledText getTextWidget();\n",
    "Opened bug 173405 for the required changes in the WTP XML editor.",
    "This is something that needs to be fixed for 3.3.",
    "\nAbsolutely! I\u0027ll get the correct handling into the Dnd handler either today or tomorrow...right now there a known defect that prevents even the \u0027correct\u0027 approach from working correctly....\n",
    "Any chance of us also being able to swap out the list of supported Transfer types at will?",
    "\nSee bug 13221. I now completely blow away -any- existing drop target before creating the merged one. The SWT limitation of only ever having one DT at a time is still there as is the fact that the TransferType and \u0027operations\u0027 info is inside a black box in SWT.\n\nWe\u0027ve agreed with the SWT team that this is as far as we\u0027re likely to be able to go in 3.3 but that SWT will completely review this post 3.3...\n",
    "\nVerified in 20070321-0010.\n"
  ],
  "commentCreationDates": [
    "2007-02-08T06:03:12+01:00",
    "2007-02-08T06:33:03+01:00",
    "2007-02-08T07:06:25+01:00",
    "2007-02-08T08:04:56+01:00",
    "2007-02-08T08:06:03+01:00",
    "2007-02-08T08:26:55+01:00",
    "2007-02-08T08:59:57+01:00",
    "2007-03-13T09:15:22+01:00",
    "2007-03-14T19:02:58+01:00",
    "2007-03-14T19:40:08+01:00",
    "2007-03-16T14:44:44+01:00",
    "2007-03-21T15:10:30+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTError",
      "message": "Cannot initialize Drop",
      "elements": [
        {
          "method": "org.eclipse.swt.dnd.DND.error",
          "source": "DND.java:247"
        },
        {
          "method": "org.eclipse.swt.dnd.DND.error",
          "source": "DND.java:208"
        },
        {
          "method": "org.eclipse.swt.dnd.DropTarget.\u003cinit\u003e",
          "source": "DropTarget.java:130"
        },
        {
          "method": "org.eclipse.ui.internal.EditorSiteDragAndDropServiceImpl$MergedDropTarget.\u003cinit\u003e",
          "source": "EditorSiteDragAndDropServiceImpl.java:70"
        },
        {
          "method": "org.eclipse.ui.internal.EditorSiteDragAndDropServiceImpl.addMergedDropTarget",
          "source": "EditorSiteDragAndDropServiceImpl.java:156"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.installTextDragAndDrop",
          "source": "AbstractTextEditor.java:3189"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.initializeDragAndDrop",
          "source": "AbstractTextEditor.java:2820"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl",
          "source": "AbstractTextEditor.java:2898"
        },
        {
          "method": "org.eclipse.ui.texteditor.StatusTextEditor.createPartControl",
          "source": "StatusTextEditor.java:53"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl",
          "source": "AbstractDecoratedTextEditor.java:373"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor.createPartControl",
          "source": "StructuredTextEditor.java:1771"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.addPage",
          "source": "MultiPageEditorPart.java:185"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.addPage",
          "source": "MultiPageEditorPart.java:155"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.addSourcePage",
          "source": "XMLMultiPageEditorPart.java:336"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.createPages",
          "source": "XMLMultiPageEditorPart.java:507"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.createPartControl",
          "source": "MultiPageEditorPart.java:278"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:662"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:421"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:586"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.setVisible",
          "source": "PartPane.java:299"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PresentablePart.setVisible",
          "source": "PresentablePart.java:179"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select",
          "source": "PresentablePartFolder.java:268"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select",
          "source": "LeftToRightTabOrder.java:65"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart",
          "source": "TabbedStackPresentation.java:394"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.refreshPresentationSelection",
          "source": "PartStack.java:1189"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.setSelection",
          "source": "PartStack.java:1142"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.showPart",
          "source": "PartStack.java:1368"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.add",
          "source": "PartStack.java:468"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.add",
          "source": "EditorStack.java:103"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.add",
          "source": "PartStack.java:454"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.add",
          "source": "EditorStack.java:112"
        },
        {
          "method": "org.eclipse.ui.internal.EditorSashContainer.addEditor",
          "source": "EditorSashContainer.java:66"
        },
        {
          "method": "org.eclipse.ui.internal.EditorAreaHelper.addToLayout",
          "source": "EditorAreaHelper.java:217"
        },
        {
          "method": "org.eclipse.ui.internal.EditorAreaHelper.addEditor",
          "source": "EditorAreaHelper.java:207"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.createEditorTab",
          "source": "EditorManager.java:857"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor",
          "source": "EditorManager.java:756"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditor",
          "source": "EditorManager.java:717"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2596"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2524"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$12",
          "source": "WorkbenchPage.java:2516"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$10.run",
          "source": "WorkbenchPage.java:2501"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2496"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2480"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.openEditor",
          "source": "OpenWithMenu.java:334"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.access$0",
          "source": "OpenWithMenu.java:326"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu$2.handleEvent",
          "source": "OpenWithMenu.java:190"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3490"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3104"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2239"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2203"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2078"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:456"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:451"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1099"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "173397",
      "date": "2007-02-08T06:03:12+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "blocker"
    }
  ],
  "groupId": "173397",
  "bugId": "173397",
  "date": "2007-02-08T06:03:12+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "blocker"
}