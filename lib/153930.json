{
  "comments": [
    "A JET template that uses the \u003cc:userRegion\u003e tag, and overwrites a file that the CDT recognizes as a C/C++ file causes a message similar to the following to appear in the Eclipse error log.\n\nNote that the C/C++ file is still correctly written by JET.\n\nThe error is related to JET\u0027s use of the Eclipse filebuffers API ITextFileBufferManager.connect(IPath), and CDT\u0027s implementation of the org.eclipse.core.filebuffers.documentSetup extension. The CDT is assuming that its document setup extension runs in the SWT UI thread. In common usage, this is the case. However, JET is using the API from a background thread.\n\nHere is a typical error log entry:\n\n!ENTRY org.eclipse.core.filebuffers 4 2 2006-07-19 11:44:04.390\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.core.filebuffers\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.cdt.internal.ui.text.util.CColorManager.getColor(CColorManager.java:58)\n\tat org.eclipse.cdt.internal.ui.text.util.CColorManager.getColor(CColorManager.java:90)\n\tat org.eclipse.cdt.internal.ui.text.AbstractCScanner.addToken(AbstractCScanner.java:104)\n\tat org.eclipse.cdt.internal.ui.text.AbstractCScanner.initialize(AbstractCScanner.java:89)\n\tat org.eclipse.cdt.internal.ui.text.CCodeScanner.\u003cinit\u003e(CCodeScanner.java:59)\n\tat org.eclipse.cdt.internal.ui.text.CTextTools.\u003cinit\u003e(CTextTools.java:88)\n\tat org.eclipse.cdt.ui.CUIPlugin.getTextTools(CUIPlugin.java:398)\n\tat org.eclipse.cdt.internal.ui.editor.CDocumentSetupParticipant.setup(CDocumentSetupParticipant.java:33)\n\tat org.eclipse.core.internal.filebuffers.TextFileBufferManager$2.run(TextFileBufferManager.java:311)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.filebuffers.TextFileBufferManager.createEmptyDocument(TextFileBufferManager.java:325)\n\tat org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.initializeFileBufferContent(ResourceTextFileBuffer.java:268)\n\tat org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create(ResourceFileBuffer.java:242)\n\tat org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:108)\n\tat org.eclipse.jet.taglib.TagUtil.getContents(TagUtil.java:42)\n\tat org.eclipse.jet.taglib.UserRegionHelper.finalizeContent(UserRegionHelper.java:44)\n\tat org.eclipse.jet.BodyContentWriter.finalizeContent(BodyContentWriter.java:176)\n\tat org.eclipse.jet.taglib.workspace.ActionsUtil.writeTextFileFromWriter(ActionsUtil.java:89)\n\tat org.eclipse.jet.internal.taglib.workspace.WsFileFromWriterAction.performAction(WsFileFromWriterAction.java:98)\n\tat org.eclipse.jet.taglib.workspace.WorkspaceContextExtender$3.run(WorkspaceContextExtender.java:238)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.jet.taglib.workspace.WorkspaceContextExtender$2.run(WorkspaceContextExtender.java:227)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat org.eclipse.jet.taglib.workspace.WorkspaceContextExtender$ContextData.commit(WorkspaceContextExtender.java:215)\n\tat org.eclipse.jet.transform.TransformContextExtender.commit(TransformContextExtender.java:198)\n\tat org.eclipse.jet.JET2Platform$4.run(JET2Platform.java:434)\n\tat org.eclipse.jet.internal.runtime.JETBundleManager.run(JETBundleManager.java:290)\n\tat org.eclipse.jet.JET2Platform.runTransform(JET2Platform.java:395)\n\tat org.eclipse.jet.JET2Platform.runTransformOnString(JET2Platform.java:611)\n\tat org.eclipse.jet.JET2Platform.runTransformOnString(JET2Platform.java:569)\n\tat com.ibm.xtools.transform.uml2.cpp.internal.rules.CPPReapplyCodeGenRule.createTarget(CPPReapplyCodeGenRule.java:105)\n\tat com.ibm.xtools.transform.core.AbstractRule.execute(AbstractRule.java:91)\n\tat com.ibm.xtools.transform.core.Transform.execute(Transform.java:310)\n\tat com.ibm.xtools.transform.core.Transform.internalExecute(Transform.java:611)\n\tat com.ibm.xtools.transform.core.Transform$1.run(Transform.java:204)\n\tat com.ibm.xtools.transform.core.internal.engine.TransformRunHelper.runInWorkspaceRunnable(TransformRunHelper.java:212)\n\tat com.ibm.xtools.transform.core.Transform.execute(Transform.java:202)\n\tat com.ibm.xtools.transform.core.TransformController.executeElement(TransformController.java:213)\n\tat com.ibm.xtools.transform.core.TransformController.doExecute(TransformController.java:195)\n\tat com.ibm.xtools.transform.core.TransformController.access$0(TransformController.java:191)\n\tat com.ibm.xtools.transform.core.TransformController$1.run(TransformController.java:171)\n\tat com.ibm.xtools.transform.core.internal.engine.TransformRunHelper$1.run(TransformRunHelper.java:80)\n\tat org.eclipse.gmf.runtime.emf.core.internal.domain.MSLEditingDomain.runInUndoInterval(MSLEditingDomain.java:959)\n\tat org.eclipse.gmf.runtime.emf.core.internal.domain.MSLEditingDomain.runInUndoInterval(MSLEditingDomain.java:940)\n\tat org.eclipse.gmf.runtime.emf.core.util.OperationUtil.runInUndoInterval(OperationUtil.java:146)\n\tat com.ibm.xtools.transform.core.internal.engine.TransformRunHelper.runInUndoInterval(TransformRunHelper.java:76)\n\tat com.ibm.xtools.transform.core.internal.engine.TransformRunHelper$4.run(TransformRunHelper.java:227)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat com.ibm.xtools.transform.core.internal.engine.TransformRunHelper.runInWorkspaceRunnable(TransformRunHelper.java:224)\n\tat com.ibm.xtools.transform.core.TransformController.execute(TransformController.java:169)\n\tat com.ibm.xtools.transform.core.TransformController.execute(TransformController.java:94)\n\tat com.ibm.xtools.transform.ui.internal.actions.RunForwardAction$1.run(RunForwardAction.java:81)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)",
    "JET has been using the org.eclipse.core.filebuffers APIs, but the CDT, at least, is contributing extensions to these APIs assume they are called from the UI thread. Changed to using java.io directly.\n\nChanges committed to CVS.",
    "Fixed in build 0.7.1 M200608171625"
  ],
  "commentCreationDates": [
    "2006-08-15T17:56:27+02:00",
    "2006-08-16T15:53:02+02:00",
    "2006-08-18T15:58:49+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.cdt.internal.ui.text.util.CColorManager.getColor",
          "source": "CColorManager.java:58"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.text.util.CColorManager.getColor",
          "source": "CColorManager.java:90"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.text.AbstractCScanner.addToken",
          "source": "AbstractCScanner.java:104"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.text.AbstractCScanner.initialize",
          "source": "AbstractCScanner.java:89"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.text.CCodeScanner.\u003cinit\u003e",
          "source": "CCodeScanner.java:59"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.text.CTextTools.\u003cinit\u003e",
          "source": "CTextTools.java:88"
        },
        {
          "method": "org.eclipse.cdt.ui.CUIPlugin.getTextTools",
          "source": "CUIPlugin.java:398"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.editor.CDocumentSetupParticipant.setup",
          "source": "CDocumentSetupParticipant.java:33"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager$2.run",
          "source": "TextFileBufferManager.java:311"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.createEmptyDocument",
          "source": "TextFileBufferManager.java:325"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.initializeFileBufferContent",
          "source": "ResourceTextFileBuffer.java:268"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create",
          "source": "ResourceFileBuffer.java:242"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect",
          "source": "TextFileBufferManager.java:108"
        },
        {
          "method": "org.eclipse.jet.taglib.TagUtil.getContents",
          "source": "TagUtil.java:42"
        },
        {
          "method": "org.eclipse.jet.taglib.UserRegionHelper.finalizeContent",
          "source": "UserRegionHelper.java:44"
        },
        {
          "method": "org.eclipse.jet.BodyContentWriter.finalizeContent",
          "source": "BodyContentWriter.java:176"
        },
        {
          "method": "org.eclipse.jet.taglib.workspace.ActionsUtil.writeTextFileFromWriter",
          "source": "ActionsUtil.java:89"
        },
        {
          "method": "org.eclipse.jet.internal.taglib.workspace.WsFileFromWriterAction.performAction",
          "source": "WsFileFromWriterAction.java:98"
        },
        {
          "method": "org.eclipse.jet.taglib.workspace.WorkspaceContextExtender$3.run",
          "source": "WorkspaceContextExtender.java:238"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.jet.taglib.workspace.WorkspaceContextExtender$2.run",
          "source": "WorkspaceContextExtender.java:227"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.jet.taglib.workspace.WorkspaceContextExtender$ContextData.commit",
          "source": "WorkspaceContextExtender.java:215"
        },
        {
          "method": "org.eclipse.jet.transform.TransformContextExtender.commit",
          "source": "TransformContextExtender.java:198"
        },
        {
          "method": "org.eclipse.jet.JET2Platform$4.run",
          "source": "JET2Platform.java:434"
        },
        {
          "method": "org.eclipse.jet.internal.runtime.JETBundleManager.run",
          "source": "JETBundleManager.java:290"
        },
        {
          "method": "org.eclipse.jet.JET2Platform.runTransform",
          "source": "JET2Platform.java:395"
        },
        {
          "method": "org.eclipse.jet.JET2Platform.runTransformOnString",
          "source": "JET2Platform.java:611"
        },
        {
          "method": "org.eclipse.jet.JET2Platform.runTransformOnString",
          "source": "JET2Platform.java:569"
        },
        {
          "method": "com.ibm.xtools.transform.uml2.cpp.internal.rules.CPPReapplyCodeGenRule.createTarget",
          "source": "CPPReapplyCodeGenRule.java:105"
        },
        {
          "method": "com.ibm.xtools.transform.core.AbstractRule.execute",
          "source": "AbstractRule.java:91"
        },
        {
          "method": "com.ibm.xtools.transform.core.Transform.execute",
          "source": "Transform.java:310"
        },
        {
          "method": "com.ibm.xtools.transform.core.Transform.internalExecute",
          "source": "Transform.java:611"
        },
        {
          "method": "com.ibm.xtools.transform.core.Transform$1.run",
          "source": "Transform.java:204"
        },
        {
          "method": "com.ibm.xtools.transform.core.internal.engine.TransformRunHelper.runInWorkspaceRunnable",
          "source": "TransformRunHelper.java:212"
        },
        {
          "method": "com.ibm.xtools.transform.core.Transform.execute",
          "source": "Transform.java:202"
        },
        {
          "method": "com.ibm.xtools.transform.core.TransformController.executeElement",
          "source": "TransformController.java:213"
        },
        {
          "method": "com.ibm.xtools.transform.core.TransformController.doExecute",
          "source": "TransformController.java:195"
        },
        {
          "method": "com.ibm.xtools.transform.core.TransformController.access$0",
          "source": "TransformController.java:191"
        },
        {
          "method": "com.ibm.xtools.transform.core.TransformController$1.run",
          "source": "TransformController.java:171"
        },
        {
          "method": "com.ibm.xtools.transform.core.internal.engine.TransformRunHelper$1.run",
          "source": "TransformRunHelper.java:80"
        },
        {
          "method": "org.eclipse.gmf.runtime.emf.core.internal.domain.MSLEditingDomain.runInUndoInterval",
          "source": "MSLEditingDomain.java:959"
        },
        {
          "method": "org.eclipse.gmf.runtime.emf.core.internal.domain.MSLEditingDomain.runInUndoInterval",
          "source": "MSLEditingDomain.java:940"
        },
        {
          "method": "org.eclipse.gmf.runtime.emf.core.util.OperationUtil.runInUndoInterval",
          "source": "OperationUtil.java:146"
        },
        {
          "method": "com.ibm.xtools.transform.core.internal.engine.TransformRunHelper.runInUndoInterval",
          "source": "TransformRunHelper.java:76"
        },
        {
          "method": "com.ibm.xtools.transform.core.internal.engine.TransformRunHelper$4.run",
          "source": "TransformRunHelper.java:227"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "com.ibm.xtools.transform.core.internal.engine.TransformRunHelper.runInWorkspaceRunnable",
          "source": "TransformRunHelper.java:224"
        },
        {
          "method": "com.ibm.xtools.transform.core.TransformController.execute",
          "source": "TransformController.java:169"
        },
        {
          "method": "com.ibm.xtools.transform.core.TransformController.execute",
          "source": "TransformController.java:94"
        },
        {
          "method": "com.ibm.xtools.transform.ui.internal.actions.RunForwardAction$1.run",
          "source": "RunForwardAction.java:81"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "153930",
      "date": "2006-08-15T17:56:27+02:00",
      "product": "M2T",
      "component": "Jet",
      "severity": "normal"
    }
  ],
  "groupId": "153930",
  "bugId": "153930",
  "date": "2006-08-15T17:56:27+02:00",
  "product": "M2T",
  "component": "Jet",
  "severity": "normal"
}