{
  "comments": [
    "After starting a search Eclipse ran out of memory and crashed.  Now I can\u0027t \nstart Eclipse at all.  Here are a few lines from the log file:!ENTRY org.\neclipse.core.runtime 4 2 Aug 09, 2004 15:44:26.204\n!MESSAGE An internal error occurred during: \"Java Search\".\n!STACK 0\njava.lang.OutOfMemoryError\n\n!ENTRY org.eclipse.ui 4 4 Aug 09, 2004 15:44:26.376\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 Aug 09, 2004 15:44:26.376\n!MESSAGE java.lang.OutOfMemoryError\n!STACK 0\njava.lang.OutOfMemoryError\n!SESSION Aug 09, 2004 15:46:01.68 ----------------------------------------------\neclipse.buildId\u003dI200406251208\njava.version\u003d1.4.2_05\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nCommand-line arguments: -Xms10M -Xmx25M\n\n!ENTRY org.eclipse.osgi Aug 09, 2004 15:46:01.69\n!MESSAGE An error occured while automatically activating bundle org.eclipse.\ncore.resources (67).\n!STACK 0\norg.osgi.framework.BundleException: Exception in org.eclipse.core.internal.\ncompatibility.PluginActivator.start() of bundle org.eclipse.core.resources.\n\nThe error I get in the log when I try to restart is:\n!ENTRY org.eclipse.core.runtime 4 2 Aug 09, 2004 15:44:26.204\n!MESSAGE An internal error occurred during: \"Java Search\".\n!STACK 0\njava.lang.OutOfMemoryError\n\n!ENTRY org.eclipse.ui 4 4 Aug 09, 2004 15:44:26.376\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 Aug 09, 2004 15:44:26.376\n!MESSAGE java.lang.OutOfMemoryError\n!STACK 0\njava.lang.OutOfMemoryError\n!SESSION Aug 09, 2004 15:46:01.68 ----------------------------------------------\neclipse.buildId\u003dI200406251208\njava.version\u003d1.4.2_05\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nCommand-line arguments: -Xms10M -Xmx25M\n\n!ENTRY org.eclipse.osgi Aug 09, 2004 15:46:01.69\n!MESSAGE An error occured while automatically activating bundle org.eclipse.\ncore.resources (67).\n!STACK 0\norg.osgi.framework.BundleException: Exception in org.eclipse.core.internal.\ncompatibility.PluginActivator.start() of bundle org.eclipse.core.resources.",
    "Created an attachment (id\u003d13833)\nLog with error stack in it\n\nSorry, I miscopied the second error in the original post.  I am attaching the\nlog that has only the errors from trying to restart.",
    "Well, I backed up my current workspace, untarred a backup from 1:00AM today and \neverything is working.  I had to copy over my changed files from the \"corrupt\" \nworkspace (which was a hassle) but at least I am back in business.  I am \ntherefore changing the severity of the bug from \"blocker\" to \"major\".",
    "Move to Platform/Runtime",
    "This has just happened again.  Same error, different cause.  This time Eclipse \nlocked up on me and I shut it down forcefully.",
    "Something strange seems to have happened to your workspace.\nMoving to resources for comment.",
    "Yes, something strange did happen to the workspace.  My point in posting the bug \nwas to find out what.  It seems to me that after such shutdowns \n(OutOfMemoryCrash in one instance, ForcedShutdownAfterHang in another instance) \nyou should /still/ be able to restart Eclipse.  The errors in the log may be \nmisleading, but if they aren\u0027t it sounds like a classpath issue.  I don\u0027t know \nwhy an unexpected shutdown would cause classpath problems.",
    "OK, now this is getting ridiculous.  I wonder if it has something to do with the \nplugins I have installed.  I am experiencing the same behavior today.  This \ntime, Eclipse popped up the OutOfMemory dialog and gave me the choice to close \nthe workbench or not.  I decided not to close, got out of the dialog box, then \nclosed Eclipse manually.  When I restart I get the same error.",
    "You are correct, no matter how you crashed you should be able to start Eclispe\nagain.\n\nHow big is your workspace? Are you able to zip it and send it to us? \n\nNote that in your command-line arg you are probably getting the OutofMemory\nbecause of the -Xmx25M. Did you mean to type \"256M\" instead?",
    "The commandline is actually:\n   /opt/eclipse/gtk/3.0Final/eclipse -data /home/jrogers/workspace -vmargs \n-Xmx96M -Xverify:none -XX:+UseParallelGC -XX:PermSize\u003d20M -XX:MaxNewSize\u003d32M \n-XX:NewSize\u003d32M -Xms64m\n\nI up\u0027ed the -Xmx after the first crash.\n\nAs far as the size of the workspace, it is pretty large.  I TARed and GZIPed the \n.metadata directory and it is 7.3MB.  I can attach it if you would like.",
    "Can you delete \\.metadata\\.plugins\\org.eclipse.core.resources\\.history before\nattaching? (just contains local history)\n\nUnfortuanatly with crashes the interesting thing is \"how did we get in this\nstate?\" and its hard to figure that out since it already happened. But I can try\nto set up a new workspace with your .metadata and go from there...",
    "I removed .metadata/.plugins/org.eclipse.core.resources/.history and rearchived \nit, but that only takes it from 7.3MB to 7.2MB.  I ran \"du -hc\" on .metadata and \nit seems that the most space is contributed by .metadata/.plugins/org.eclipse.\njdt.core, weighing in at 19MB.  There are a bunch of *.index files there (eg. \n71478105.index).  Can I take those out, or do you need them?\n\nAlso, I have TARed and BZIPed the directory and gotten it down to 5.3M, so if \nthat is acceptable I will attach it.",
    "Sure, get rid of the index files. \n\nFYI: I\u0027m away for a week or so (starting tomorrow) so I will not be able to look\nat this for a bit. (unless someone else gets a chance while I\u0027m gone)",
    "Created an attachment (id\u003d14083)\n.metadata directory TARed and BZIPed\n\nThe .metadata directory has everything from the latest crashed workspace except\nfor:\n  - .metadata/.plugins/org.eclipse.core.resources/.history\n  - .metadata/.plugins/org.eclipse.jdt.core/*.index",
    "Thanks for looking into this.  Enjoy your vacation.",
    "*** Bug 57344 has been marked as a duplicate of this bug. ***",
    "I\u0027m also seeing \u0027OutOfMemory\u0027 errors. I have a little more detail however. I \nwas debugging a plugin, so I was able to trap the OutOfMemory exception within \nthe debugger, and the stack trace in my case is as follows: \n \nThread [main] (Suspended (exception OutOfMemoryError)) \n\tResourceTransfer.nativeToJava(TransferData) line: 160 \n\tClipboard.getContents(Transfer, int) line: 304 \n\tClipboard.getContents(Transfer) line: 236 \n\tPasteAction$1.run() line: 186 \n\tUISynchronizer(Synchronizer).syncExec(Runnable) line: 147 \n\tUISynchronizer.syncExec(Runnable) line: 28 \n\tDisplay.syncExec(Runnable) line: 3255 \n\tPasteAction.updateSelection(IStructuredSelection) line: 181 \n\t\nPasteAction(BaseSelectionListenerAction).selectionChanged(IStructuredSelection) \nline: 124 \n\tRefactorActionGroup.updateActionBars() line: 154 \n\tMainActionGroup.updateActionBars() line: 315 \n\tResourceNavigator.updateActionBars(IStructuredSelection) line: 1206 \n\tResourceNavigator.createPartControl(Composite) line: 275 \n\tViewReference.createPartHelper() line: 310 \n\tViewReference.createPart() line: 185 \n\tViewReference(WorkbenchPartReference).getPart(boolean) line: 559 \n\tWorkbenchPage$ActivationList.setActive(IWorkbenchPartReference) line: \n3399 \n\tWorkbenchPage.onActivate() line: 2089 \n\tWorkbenchWindow$5.run() line: 2359 \n\tBusyIndicator.showWhile(Display, Runnable) line: 69 \n\tWorkbenchWindow.setActivePage(IWorkbenchPage) line: 2341 \n\tWorkbenchWindow.busyOpenPage(String, IAdaptable) line: 695 \n\tWorkbench.busyOpenWorkbenchWindow(String, IAdaptable) line: 617 \n\tWorkbench.openFirstTimeWindow() line: 1168 \n\tWorkbenchConfigurer.openFirstTimeWindow() line: 180 \n\tIDEWorkbenchAdvisor(WorkbenchAdvisor).openWindows() line: 706 \n\tWorkbench.init(Display) line: 981 \n\tWorkbench.runUI() line: 1541 \n\tWorkbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 315 \n\tPlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 143 \n\tIDEApplication.run(Object) line: 103 \n\tPlatformActivator$1.run(Object) line: 230 \n\tEclipseStarter.run(Object) line: 371 \n\tEclipseStarter.run(String[], Runnable) line: 160 \n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not \navailable [native method] \n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39 \n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25 \n\tMethod.invoke(Object, Object[]) line: 324 \n\tMain.invokeFramework(String[], URL[]) line: 330 \n\tMain.basicRun(String[]) line: 274 \n\tMain.run(String[]) line: 977 \n\tMain.main(String[]) line: 952 \n \n \nThe variables are as follows: \nthis\u003d ResourceTransfer  (id\u003d46) \ntransferData\u003d TransferData  (id\u003d55) \nbytes\u003d byte[25]  (id\u003d58) \nin\u003d DataInputStream  (id\u003d60) \ncount\u003d 1869768494 \n \n \nThat count looks suspicious. ",
    "Eduard, your OOM is unrelated to this PR, which is caused by a corrupted file. \n\nOOMs are not always bugs, it can be just insufficient memory being provided to\nthe Java VM for the operation being performed. You can use the VM arg\n-Xmx\u003csize\u003em to change the maximum of memory allowed to a Java application (size\nin megabytes), for instance:\n\neclipse [any Eclipse args you might have] -vmargs -Xmx512m\n",
    "Eduard, I suggest entering a separate bug report against Platform UI in your\ncase.  I agree the \"count\" variable looks suspicious.  It looks like the data on\nthe system clipboard is somehow being corrupted.  In any case, it\u0027s unrelated to\nthis bug.",
    "Updating title to make it clear that not all OutOfMemoryErrors are related. \nHere is the relevant snippet from the log file that caused the startup failure:\n\njava.lang.IllegalArgumentException: Path must include project and resource name:\n/Salesforce.com Web Application\n\tat org.eclipse.core.internal.utils.Assert.isLegal(Assert.java:58)\n\tat org.eclipse.core.internal.resources.Workspace.newResource(Workspace.java:1509)\n\tat\norg.eclipse.core.internal.localstore.UnifiedTree.createChildNodeFromFileSystem(UnifiedTree.java:240)\n\tat\norg.eclipse.core.internal.localstore.UnifiedTree.addChildren(UnifiedTree.java:126)\n\tat\norg.eclipse.core.internal.localstore.UnifiedTree.addNodeChildrenToQueue(UnifiedTree.java:204)\n\tat org.eclipse.core.internal.localstore.UnifiedTree.accept(UnifiedTree.java:76)\n\tat\norg.eclipse.core.internal.localstore.FileSystemResourceManager.refreshResource(FileSystemResourceManager.java:622)\n\tat\norg.eclipse.core.internal.localstore.FileSystemResourceManager.refresh(FileSystemResourceManager.java:609)\n\tat\norg.eclipse.core.internal.localstore.FileSystemResourceManager.refreshRoot(FileSystemResourceManager.java:653)\n\tat\norg.eclipse.core.internal.localstore.FileSystemResourceManager.refresh(FileSystemResourceManager.java:602)\n\tat org.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1222)\n\tat org.eclipse.core.internal.resources.Workspace.open(Workspace.java:1608)\n",
    "(In reply to comment #18) \n \nOk, created a new bug 96679 \n ",
    "\n\n*** This bug has been marked as a duplicate of 86846 ***"
  ],
  "commentCreationDates": [
    "2004-08-09T22:17:38+02:00",
    "2004-08-09T22:22:41+02:00",
    "2004-08-09T23:22:10+02:00",
    "2004-08-10T04:59:05+02:00",
    "2004-08-12T16:59:33+02:00",
    "2004-08-16T22:56:32+02:00",
    "2004-08-16T23:22:05+02:00",
    "2004-08-18T21:32:11+02:00",
    "2004-08-18T23:47:28+02:00",
    "2004-08-18T23:53:11+02:00",
    "2004-08-19T17:41:20+02:00",
    "2004-08-19T21:31:23+02:00",
    "2004-08-19T21:47:36+02:00",
    "2004-08-19T23:28:57+02:00",
    "2004-08-19T23:30:15+02:00",
    "2005-02-15T19:43:10+01:00",
    "2005-05-23T21:34:54+02:00",
    "2005-05-24T17:43:29+02:00",
    "2005-05-24T20:08:01+02:00",
    "2005-05-25T17:27:42+02:00",
    "2005-05-25T21:04:17+02:00",
    "2005-10-17T21:38:51+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Path must include project and resource name: /Salesforce.com Web Application",
      "elements": [
        {
          "method": "org.eclipse.core.internal.utils.Assert.isLegal",
          "source": "Assert.java:58"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.newResource",
          "source": "Workspace.java:1509"
        },
        {
          "method": "org.eclipse.core.internal.localstore.UnifiedTree.createChildNodeFromFileSystem",
          "source": "UnifiedTree.java:240"
        },
        {
          "method": "org.eclipse.core.internal.localstore.UnifiedTree.addChildren",
          "source": "UnifiedTree.java:126"
        },
        {
          "method": "org.eclipse.core.internal.localstore.UnifiedTree.addNodeChildrenToQueue",
          "source": "UnifiedTree.java:204"
        },
        {
          "method": "org.eclipse.core.internal.localstore.UnifiedTree.accept",
          "source": "UnifiedTree.java:76"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.refreshResource",
          "source": "FileSystemResourceManager.java:622"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.refresh",
          "source": "FileSystemResourceManager.java:609"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.refreshRoot",
          "source": "FileSystemResourceManager.java:653"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.refresh",
          "source": "FileSystemResourceManager.java:602"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.refreshLocal",
          "source": "Resource.java:1222"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.open",
          "source": "Workspace.java:1608"
        }
      ],
      "number": 0,
      "commentIndex": 19,
      "bugId": "71677",
      "duplicateId": "86846",
      "date": "2005-05-25T17:27:42+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "major"
    }
  ],
  "groupId": "86846",
  "bugId": "71677",
  "duplicateId": "86846",
  "date": "2004-08-09T22:17:38+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "major"
}