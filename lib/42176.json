{
  "comments": [
    "I have got into a state that, whenever I open or close a project, I get the \nfollowing exception. Everything appears to work OK though. I\u0027m using the M3 \ncandidate build.\n\norg.eclipse.swt.SWTException: Invalid thread access\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat org.eclipse.swt.SWTException.\u003cinit\u003e(SWTException.java:73)\n\tat org.eclipse.swt.SWTException.\u003cinit\u003e(SWTException.java:62)\n\tat org.eclipse.swt.SWT.error(SWT.java:2367)\n\tat org.eclipse.swt.SWT.error(SWT.java:2297)\n\tat org.eclipse.swt.dnd.DND.error(DND.java:230)\n\tat org.eclipse.swt.dnd.DND.error(DND.java:181)\n\tat org.eclipse.swt.dnd.Clipboard.checkWidget(Clipboard.java:129)\n\tat org.eclipse.swt.dnd.Clipboard.getContents(Clipboard.java:184)\n\tat org.eclipse.ui.views.navigator.PasteAction.updateSelection\n(PasteAction.java:164)\n\tat org.eclipse.ui.actions.SelectionListenerAction.selectionChanged\n(SelectionListenerAction.java)\n\tat org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars\n(RefactorActionGroup.java:139)\n\tat org.eclipse.ui.views.navigator.MainActionGroup.handleResourceChanged\n(MainActionGroup.java:107)\n\tat org.eclipse.ui.views.navigator.MainActionGroup$1.resourceChanged\n(MainActionGroup.java:74)\n\tat org.eclipse.core.internal.events.NotificationManager$1.run\n(NotificationManager.java:179)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java)\n\tat org.eclipse.core.internal.events.NotificationManager.notify\n(NotificationManager.java:173)\n\tat \norg.eclipse.core.internal.events.NotificationManager.broadcastChanges\n(NotificationManager.java:77)\n\tat org.eclipse.core.internal.resources.Workspace.broadcastChanges\n(Workspace.java:155)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation\n(Workspace.java)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:85)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)",
    "This does not generally happen but resource change events can occur from \noutside of the UI Thread.\n\nMike how did you close this project? Was it via the menu or some other action?",
    "Can reproduce by selecting a project and selecting close/open from the context \nmenu.\nThere is a message printed to the console, no error dialog is shown. I\u0027m \nassuming this is not an M3 candidate.",
    "Correct - this just fills the log. I think it can wait until M4.",
    "Navigator menu",
    "Fixed in build \u003e20030902\nWhen I tried to reproduce this again I only got a stack dump in the log and no \nmessage in the console.",
    "The invalid thread access is still occurring in 3.0 M4.  See bug 45197 for a\nstack trace.  I am confused by Knut\u0027s comment, which says the bug is fixed but\nthe error still appears in the log.  PasteAction.updateSelection accesses the\nclipboard twice, and only once is it wrapped in a syncExec.",
    "I think I was saying when I tried to reproduce this again *before* fixing it I \nonly got a stack trace in the log.",
    "Just got this in the M5 candidate.\n\nSimple steps to reproduce it:\n- select a file in Windows Explorer\n- Copy\n- select project in Navigator\n- Project \u003e Close or Project \u003e Open\n\nStack is a bit different than above:\n!ENTRY org.eclipse.core.resources 4 2 Nov 20, 2003 23:34:46.257\n!MESSAGE Problems occurred when invoking code from plug-\nin: \"org.eclipse.core.resources\".\n!STACK 0\norg.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:2592)\n\tat org.eclipse.swt.SWT.error(SWT.java:2522)\n\tat org.eclipse.swt.dnd.DND.error(DND.java:230)\n\tat org.eclipse.swt.dnd.DND.error(DND.java:181)\n\tat org.eclipse.swt.dnd.Clipboard.checkWidget(Clipboard.java:129)\n\tat org.eclipse.swt.dnd.Clipboard.getAvailableTypes(Clipboard.java:409)\n\tat org.eclipse.ui.views.navigator.PasteAction.updateSelection\n(PasteAction.java:220)\n\tat org.eclipse.ui.actions.BaseSelectionListenerAction.selectionChanged\n(BaseSelectionListenerAction.java:102)\n\tat org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars\n(RefactorActionGroup.java:139)\n\tat org.eclipse.ui.views.navigator.MainActionGroup.handleResourceChanged\n(MainActionGroup.java:109)\n\tat org.eclipse.ui.views.navigator.MainActionGroup$1.resourceChanged\n(MainActionGroup.java:76)\n\tat org.eclipse.core.internal.events.NotificationManager$2.run\n(NotificationManager.java:251)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1127)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:464)\n\tat org.eclipse.core.internal.events.NotificationManager.notify\n(NotificationManager.java:244)\n\tat org.eclipse.core.internal.events.NotificationManager.broadcastChanges\n(NotificationManager.java:138)\n\tat org.eclipse.core.internal.resources.Workspace.broadcastChanges\n(Workspace.java:146)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation\n(Workspace.java:847)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1563)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:105)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)\n\n\nNot a stop-ship for M5, but should address in M6.\n",
    "*** Bug 47261 has been marked as a duplicate of this bug. ***",
    "*** Bug 47608 has been marked as a duplicate of this bug. ***",
    "*** Bug 49139 has been marked as a duplicate of this bug. ***",
    "I cannot replicate this in M6 - I think it has been fixed as a result of other \nfixes.",
    "I still see this with integration build I20040129, although with me it appears\nto ocurr when I open a project, rather than close it. It can go away for a while\n- but I\u0027ve been unable to identify any patterns yet. I\u0027m still damp behind the\nears with Eclipse (and java), so apologies if I\u0027m off track here.Looking in\norg.eclipse.ui.views.navigator.PasteAction, updateSelection is implemented as\nfollows (please see embedded comment in capitals) :\n\nprotected boolean updateSelection(IStructuredSelection selection) {\n\tif (!super.updateSelection(selection)) \n\t\treturn false;\n\t\n\tfinal IResource[][] clipboardData \u003d new IResource[1][];\n\tshell.getDisplay().syncExec(new Runnable() {\n\t\tpublic void run() {\n\t\t\t// clipboard must have resources or files\n\t\t\tResourceTransfer resTransfer \u003d ResourceTransfer.getInstance();\n\t\t\tclipboardData[0] \u003d (IResource[])clipboard.getContents(resTransfer);\t\t\n\t\t}\n\t});\t\n\tIResource[] resourceData \u003d clipboardData[0];\n\tboolean isProjectRes \u003d resourceData !\u003d null\n\t\t\u0026\u0026 resourceData.length \u003e 0\n\t\t\u0026\u0026 resourceData[0].getType() \u003d\u003d IResource.PROJECT;\n\n\tif (isProjectRes) {\n\t\tfor (int i \u003d 0; i \u003c resourceData.length; i++) {\n\t\t\t// make sure all resource data are open projects\n\t\t\t// can paste open projects regardless of selection\n\t\t\tif (resourceData[i].getType() !\u003d IResource.PROJECT || ((IProject)\nresourceData[i]).isOpen() \u003d\u003d false)\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} \n\t \n\tif (getSelectedNonResources().size() \u003e 0) \n\t\treturn false;\n\t\n\tIResource targetResource \u003d getTarget();\n\t// targetResource is null if no valid target is selected (e.g., open project) \n\t// or selection is empty\t\n\tif (targetResource \u003d\u003d null)\n\t\treturn false;\n\n\t// can paste files and folders to a single selection (file, folder, \n\t// open project) or multiple file selection with the same parent\n\tList selectedResources \u003d getSelectedResources();\n\tif (selectedResources.size() \u003e 1) {\n\t\tfor (int i \u003d 0; i \u003c selectedResources.size(); i++) {\n\t\t\tIResource resource \u003d (IResource)selectedResources.get(i);\n\t\t\tif (resource.getType() !\u003d IResource.FILE)\n\t\t\t\treturn false;\n\t\t\tif (!targetResource.equals(resource.getParent()))\n\t\t\t\treturn false;\n\t\t}\n\t}\n\tif (resourceData !\u003d null)  {\n\t\t// linked resources can only be pasted into projects\n\t\tif (isLinked(resourceData) \u0026\u0026 targetResource.getType() !\u003d IResource.PROJECT) \n\t\t\treturn false;\n\t\t\t\n\t\tif (targetResource.getType() \u003d\u003d IResource.FOLDER) {\n\t\t\t// don\u0027t try to copy folder to self\n\t\t\tfor (int i \u003d 0; i \u003c resourceData.length; i++) {\n\t\t\t\tif (targetResource.equals(resourceData[i]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\t\t\n\tTransferData[] transfers \u003d clipboard.getAvailableTypes();\n                                             ^^^^^^^^^^^^^^^^^\n        SHOULDN\u0027T THIS BE CONDUCTED IN A \u0027syncExec\u0027 AS WITH THE \u0027getContents\u0027 ABOVE?\n                \n\tFileTransfer fileTransfer \u003d FileTransfer.getInstance();\n\tfor (int i \u003d 0; i \u003c transfers.length; i++) {\n\t\tif (fileTransfer.isSupportedType(transfers[i])) \n\t\t\treturn true;\t\t\n\t}\n\treturn false;\n}",
    "*** Bug 58338 has been marked as a duplicate of this bug. ***",
    "Fixed by changing MainActionGroup.handleResourceChanged to do the updates in a\nsyncExec.\n",
    "Nick do you need to block the UI? If not then a UIJob should do it.",
    "I think making the Navigator update concurrently in the background would require\nmore work than I can devote to it at the moment.  This is just updating the\nenablement state of the actions in response to a resource delta, which should\nnot do much work.\n"
  ],
  "commentCreationDates": [
    "2003-08-27T20:49:29+02:00",
    "2003-08-27T21:07:28+02:00",
    "2003-08-27T21:31:53+02:00",
    "2003-08-27T21:42:50+02:00",
    "2003-08-27T21:50:23+02:00",
    "2003-09-02T18:57:11+02:00",
    "2003-10-20T17:29:41+02:00",
    "2003-10-20T19:12:50+02:00",
    "2003-11-21T04:40:21+01:00",
    "2003-11-21T19:05:21+01:00",
    "2003-11-27T13:14:40+01:00",
    "2003-12-18T21:25:25+01:00",
    "2003-12-18T21:27:19+01:00",
    "2004-02-01T13:51:32+01:00",
    "2004-04-13T21:53:53+02:00",
    "2004-04-13T22:10:23+02:00",
    "2004-04-13T22:29:28+02:00",
    "2004-04-13T22:41:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "org.eclipse.swt.SWTException.\u003cinit\u003e",
          "source": "SWTException.java:73"
        },
        {
          "method": "org.eclipse.swt.SWTException.\u003cinit\u003e",
          "source": "SWTException.java:62"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2367"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2297"
        },
        {
          "method": "org.eclipse.swt.dnd.DND.error",
          "source": "DND.java:230"
        },
        {
          "method": "org.eclipse.swt.dnd.DND.error",
          "source": "DND.java:181"
        },
        {
          "method": "org.eclipse.swt.dnd.Clipboard.checkWidget",
          "source": "Clipboard.java:129"
        },
        {
          "method": "org.eclipse.swt.dnd.Clipboard.getContents",
          "source": "Clipboard.java:184"
        },
        {
          "method": "org.eclipse.ui.views.navigator.PasteAction.updateSelection",
          "source": "PasteAction.java:164"
        },
        {
          "method": "org.eclipse.ui.actions.SelectionListenerAction.selectionChanged",
          "source": "SelectionListenerAction.java"
        },
        {
          "method": "org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars",
          "source": "RefactorActionGroup.java:139"
        },
        {
          "method": "org.eclipse.ui.views.navigator.MainActionGroup.handleResourceChanged",
          "source": "MainActionGroup.java:107"
        },
        {
          "method": "org.eclipse.ui.views.navigator.MainActionGroup$1.resourceChanged",
          "source": "MainActionGroup.java:74"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$1.run",
          "source": "NotificationManager.java:179"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:173"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:77"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastChanges",
          "source": "Workspace.java:155"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:85"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "42176",
      "date": "2003-08-27T20:49:29+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2592"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2522"
        },
        {
          "method": "org.eclipse.swt.dnd.DND.error",
          "source": "DND.java:230"
        },
        {
          "method": "org.eclipse.swt.dnd.DND.error",
          "source": "DND.java:181"
        },
        {
          "method": "org.eclipse.swt.dnd.Clipboard.checkWidget",
          "source": "Clipboard.java:129"
        },
        {
          "method": "org.eclipse.swt.dnd.Clipboard.getAvailableTypes",
          "source": "Clipboard.java:409"
        },
        {
          "method": "org.eclipse.ui.views.navigator.PasteAction.updateSelection",
          "source": "PasteAction.java:220"
        },
        {
          "method": "org.eclipse.ui.actions.BaseSelectionListenerAction.selectionChanged",
          "source": "BaseSelectionListenerAction.java:102"
        },
        {
          "method": "org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars",
          "source": "RefactorActionGroup.java:139"
        },
        {
          "method": "org.eclipse.ui.views.navigator.MainActionGroup.handleResourceChanged",
          "source": "MainActionGroup.java:109"
        },
        {
          "method": "org.eclipse.ui.views.navigator.MainActionGroup$1.resourceChanged",
          "source": "MainActionGroup.java:76"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$2.run",
          "source": "NotificationManager.java:251"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1127"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:464"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:244"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:138"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastChanges",
          "source": "Workspace.java:146"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:847"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1563"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:105"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 1,
      "commentIndex": 8,
      "bugId": "42176",
      "date": "2003-11-21T04:40:21+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "42176",
  "bugId": "42176",
  "date": "2003-08-27T20:49:29+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}