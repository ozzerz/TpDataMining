{
  "comments": [
    "Steps copied from bug 142784:\n\nBuild: I20060519-0010\n\nFollow the steps carefully to get the bug.\n\n1) Create a new .product file in the *navigator* view\n2) In the product editor, set the product name to \"foo\" (don\u0027t save)\n3) In the navigator, select the product file and delete\n4) When prompted to confirm deletion, click yes\n5) When prompted to confirm save, click cancel\n6) Back in the product editor, change the product name to \"bar\"\n7) Now click the editor close tab for the product editor.\n\nA NullPointerException occurs.  Now we are in a really broken state.  Anything\nyou do to change focus, such as opening wizards and dialogs will fail because\nthe NPE occurs during a focusLost callback. The only thing you can do is close\nthe workbench. A bunch more exceptions occur during shutdown.\n\nThe focus listener throws a NPE, which we catch in Workbench.runEventLoop. The exception is logged, and we try to open a dialog, but that fails since it will again trigger a focus lost event...\n\nAll you can do is exit and restart.",
    "Silenio, does SWT protect itself against exceptions in listeners? Is there anything we can do at our level to handle cases like this more gracefully?",
    "I guess the short answer is SWT does not protect itself. There are a few places I talk to SN and suggested some kind of try/finaly protection. In the places in question, the OS does not recover well. It would be quite hard to protect every single listener.",
    "A listener that prevents focus changes is pretty bad. Can I assign this bug to SWT so that you can look into adding protection in the case of focus listeners?",
    "Please could you attach the wallback/log? I am getting some other error when I create the .product file. Can this file be created in any project?\n\njava.lang.IllegalArgumentException: Argument cannot be null\n\tat org.eclipse.swt.SWT.error(SWT.java:3358)\n\tat org.eclipse.swt.SWT.error(SWT.java:3297)\n\tat org.eclipse.swt.SWT.error(SWT.java:3268)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:435)\n\tat org.eclipse.swt.widgets.Combo.indexOf(Combo.java:849)\n\tat org.eclipse.swt.widgets.Combo.indexOf(Combo.java:825)\n\tat org.eclipse.pde.internal.ui.parts.ComboPart.indexOf(ComboPart.java:37)\n\tat org.eclipse.pde.internal.ui.editor.product.ProductInfoSection.refreshProductCombo(ProductInfoSection.java:281)\n\tat org.eclipse.pde.internal.ui.editor.product.ProductInfoSection.refresh(ProductInfoSection.java:259)\n\tat org.eclipse.ui.forms.ManagedForm.doRefresh(ManagedForm.java:204)\n\tat org.eclipse.ui.forms.ManagedForm.refresh(ManagedForm.java:189)\n\tat org.eclipse.ui.forms.editor.FormPage.setActive(FormPage.java:124)\n\tat org.eclipse.pde.internal.ui.editor.PDEFormPage.setActive(PDEFormPage.java:220)\n\tat org.eclipse.ui.forms.editor.FormEditor.pageChange(FormEditor.java:477)\n\tat org.eclipse.pde.internal.ui.editor.PDEFormEditor.pageChange(PDEFormEditor.java:273)\n\tat org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:596)\n\tat org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:279)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:596)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:372)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:566)\n\tat org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:214)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2588)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2521)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$10(WorkbenchPage.java:2513)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2498)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2493)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2478)\n\tat org.eclipse.ui.ide.IDE.openEditor(IDE.java:388)\n\tat org.eclipse.ui.ide.IDE.openEditor(IDE.java:350)\n\tat org.eclipse.ui.wizards.newresource.BasicNewFileResourceWizard.performFinish(BasicNewFileResourceWizard.java:101)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:680)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:355)\n\tat org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Dialog.java:660)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.ui.internal.actions.NewWizardShortcutAction.run(NewWizardShortcutAction.java:110)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)",
    "You can see the full stack trace in bug 142784. Make sure you create the .product file using New-\u003eOther-\u003ePDE-\u003eProduct Configuration.\n\nMoving to SWT.",
    "What does \"protect\" actually mean?",
    "Generally, swallowing and hiding exceptions in a library is a really bad thing to do.  You\u0027ll need to reopen this bug with a very small snippet so see what you intend.  ",
    "How is the listener preventing the focus to switch to another control? I thought you had to use a Traverse listener to intercept a focus change."
  ],
  "commentCreationDates": [
    "2006-05-19T17:44:05+02:00",
    "2006-05-19T17:48:31+02:00",
    "2006-05-19T19:37:15+02:00",
    "2006-05-19T20:01:46+02:00",
    "2006-05-19T20:09:22+02:00",
    "2006-05-19T21:14:36+02:00",
    "2006-05-31T23:15:20+02:00",
    "2006-05-31T23:17:39+02:00",
    "2006-05-31T23:25:35+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Argument cannot be null",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3358"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3268"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:435"
        },
        {
          "method": "org.eclipse.swt.widgets.Combo.indexOf",
          "source": "Combo.java:849"
        },
        {
          "method": "org.eclipse.swt.widgets.Combo.indexOf",
          "source": "Combo.java:825"
        },
        {
          "method": "org.eclipse.pde.internal.ui.parts.ComboPart.indexOf",
          "source": "ComboPart.java:37"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.product.ProductInfoSection.refreshProductCombo",
          "source": "ProductInfoSection.java:281"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.product.ProductInfoSection.refresh",
          "source": "ProductInfoSection.java:259"
        },
        {
          "method": "org.eclipse.ui.forms.ManagedForm.doRefresh",
          "source": "ManagedForm.java:204"
        },
        {
          "method": "org.eclipse.ui.forms.ManagedForm.refresh",
          "source": "ManagedForm.java:189"
        },
        {
          "method": "org.eclipse.ui.forms.editor.FormPage.setActive",
          "source": "FormPage.java:124"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.PDEFormPage.setActive",
          "source": "PDEFormPage.java:220"
        },
        {
          "method": "org.eclipse.ui.forms.editor.FormEditor.pageChange",
          "source": "FormEditor.java:477"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.PDEFormEditor.pageChange",
          "source": "PDEFormEditor.java:273"
        },
        {
          "method": "org.eclipse.ui.forms.editor.FormEditor.setActivePage",
          "source": "FormEditor.java:596"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.createPartControl",
          "source": "MultiPageEditorPart.java:279"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:596"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:372"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.getEditor",
          "source": "EditorReference.java:214"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2588"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2521"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$10",
          "source": "WorkbenchPage.java:2513"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:2498"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2493"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2478"
        },
        {
          "method": "org.eclipse.ui.ide.IDE.openEditor",
          "source": "IDE.java:388"
        },
        {
          "method": "org.eclipse.ui.ide.IDE.openEditor",
          "source": "IDE.java:350"
        },
        {
          "method": "org.eclipse.ui.wizards.newresource.BasicNewFileResourceWizard.performFinish",
          "source": "BasicNewFileResourceWizard.java:101"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:680"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:355"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$3.widgetSelected",
          "source": "Dialog.java:660"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.internal.actions.NewWizardShortcutAction.run",
          "source": "NewWizardShortcutAction.java:110"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 4,
      "bugId": "142791",
      "date": "2006-05-19T20:09:22+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "142791",
  "bugId": "142791",
  "date": "2006-05-19T17:44:05+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}