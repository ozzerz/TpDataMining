{
  "comments": [
    "This bug must be fixed to allow JPA testing to run on MySQL without Oracle jars on the classpaht\n\nTo reproduce this problem, run the JUnitJPQLExamplesTestSuite in eclipselink.jpa.test on a MySQL database with no Oracle-specific files on the classpath.\n\nYou will get the following issue in the testDeleteExpression and testComplexDeleteExpression tests.\n\n[EPS Finer]: ServerSession(25865024)--Thread(Thread[main,5,main])--client acquired\n[EPS Finest]: UnitOfWork(21894917)--Thread(Thread[main,5,main])--Execute query DeleteAllQuery()\n[EPS Finer]: ClientSession(29983584)--Connection(18490742)--Thread(Thread[main,5,main])--begin transaction\n[EPS Fine]: ClientSession(29983584)--Connection(18490742)--Thread(Thread[main,5,main])--CREATE TEMPORARY TABLE IF NOT EXISTS TL_CMP3_ORDER LIKE CMP3_ORDER\n[EPS Fine]: ClientSession(29983584)--Connection(18490742)--Thread(Thread[main,5,main])--INSERT INTO TL_CMP3_ORDER (ORDER_ID) SELECT t1.ORDER_ID FROM CMP3_CUSTOMER t0, CMP3_ORDER t1 WHERE ((t0.NAME \u003d ?) AND (t0.CUST_ID \u003d t1.CUSTOMER_CUST_ID))\n\tbind \u003d\u003e [Karen McDonald]\n[EPS Fine]: ClientSession(29983584)--Connection(18490742)--Thread(Thread[main,5,main])--DELETE FROM TL_CMP3_ORDER\n[EPS Warning]: UnitOfWork(21894917)--Thread(Thread[main,5,main])--Local Exception Stack: \nException [EclipseLink-4002] (Eclipse Persistence Services - @VERSION@ (Build @BUILD_NUMBER@)): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLException: Field \u0027QUANTITY\u0027 doesn\u0027t have a default value\nError Code: 1364\nCall: INSERT INTO TL_CMP3_ORDER (ORDER_ID) SELECT t1.ORDER_ID FROM CMP3_CUSTOMER t0, CMP3_ORDER t1 WHERE ((t0.NAME \u003d ?) AND (t0.CUST_ID \u003d t1.CUSTOMER_CUST_ID))\n\tbind \u003d\u003e [Karen McDonald]\nQuery: DeleteAllQuery()\n\tat org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:302)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:725)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:781)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:550)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:493)\n\tat org.eclipse.persistence.internal.sessions.AbstractSession.executeCall(AbstractSession.java:800)\n\tat org.eclipse.persistence.internal.sessions.IsolatedClientSession.executeCall(IsolatedClientSession.java:123)\n\tat org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:201)\n\tat org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteAllUsingTempTables(DatasourceCallQueryMechanism.java:125)\n\tat org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteAll(DatasourceCallQueryMechanism.java:82)\n\tat org.eclipse.persistence.queries.DeleteAllQuery.executeDatabaseQuery(DeleteAllQuery.java:171)\n\tat org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:679)\n\tat org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:602)\n\tat org.eclipse.persistence.queries.ModifyAllQuery.executeInUnitOfWork(ModifyAllQuery.java:141)\n\tat org.eclipse.persistence.queries.DeleteAllQuery.executeInUnitOfWork(DeleteAllQuery.java:97)\n\tat org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2668)\n\tat org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1065)\n\tat org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1037)\n\tat org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeUpdate(EJBQueryImpl.java:422)\n\tat org.eclipse.persistence.testing.tests.ejb.ejbqltesting.JUnitJPQLExamplesTestSuite.testDeleteExpression(JUnitJPQLExamplesTestSuite.java:680)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat junit.framework.TestCase.runTest(TestCase.java:164)\n\tat junit.framework.TestCase.runBare(TestCase.java:130)\n\tat org.eclipse.persistence.testing.framework.junit.JUnitTestCase.runBare(JUnitTestCase.java:335)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:120)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\nCaused by: java.sql.SQLException: Field \u0027QUANTITY\u0027 doesn\u0027t have a default value\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2928)\n\tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)\n\tat com.mysql.jdbc.ServerPreparedStatement.serverExecute(ServerPreparedStatement.java:1124)\n\tat com.mysql.jdbc.ServerPreparedStatement.executeInternal(ServerPreparedStatement.java:676)\n\tat com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1166)\n\tat com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1082)\n\tat com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1067)\n\tat org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:718)\n\t... 41 more\n\n\n\nWorkaround is likely to make QUANTITY nullable - but fixing it with that change will ignore the issue of creating temp tables with non-nullable fields."
  ],
  "commentCreationDates": [
    "2007-11-27T16:45:15+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.sql.SQLException",
      "message": "Field \u0027QUANTITY\u0027 doesn\u0027t have a default value Error Code: 1364 Call: INSERT INTO TL_CMP3_ORDER (ORDER_ID) SELECT t1.ORDER_ID FROM CMP3_CUSTOMER t0, CMP3_ORDER t1 WHERE ((t0.NAME \u003d ?) AND (t0.CUST_ID \u003d t1.CUSTOMER_CUST_ID))  bind \u003d\u003e [Karen McDonald] Query: DeleteAllQuery()",
      "elements": [
        {
          "method": "org.eclipse.persistence.exceptions.DatabaseException.sqlException",
          "source": "DatabaseException.java:302"
        },
        {
          "method": "org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect",
          "source": "DatabaseAccessor.java:725"
        },
        {
          "method": "org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect",
          "source": "DatabaseAccessor.java:781"
        },
        {
          "method": "org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall",
          "source": "DatabaseAccessor.java:550"
        },
        {
          "method": "org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall",
          "source": "DatabaseAccessor.java:493"
        },
        {
          "method": "org.eclipse.persistence.internal.sessions.AbstractSession.executeCall",
          "source": "AbstractSession.java:800"
        },
        {
          "method": "org.eclipse.persistence.internal.sessions.IsolatedClientSession.executeCall",
          "source": "IsolatedClientSession.java:123"
        },
        {
          "method": "org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall",
          "source": "DatasourceCallQueryMechanism.java:201"
        },
        {
          "method": "org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteAllUsingTempTables",
          "source": "DatasourceCallQueryMechanism.java:125"
        },
        {
          "method": "org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.deleteAll",
          "source": "DatasourceCallQueryMechanism.java:82"
        },
        {
          "method": "org.eclipse.persistence.queries.DeleteAllQuery.executeDatabaseQuery",
          "source": "DeleteAllQuery.java:171"
        },
        {
          "method": "org.eclipse.persistence.queries.DatabaseQuery.execute",
          "source": "DatabaseQuery.java:679"
        },
        {
          "method": "org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork",
          "source": "DatabaseQuery.java:602"
        },
        {
          "method": "org.eclipse.persistence.queries.ModifyAllQuery.executeInUnitOfWork",
          "source": "ModifyAllQuery.java:141"
        },
        {
          "method": "org.eclipse.persistence.queries.DeleteAllQuery.executeInUnitOfWork",
          "source": "DeleteAllQuery.java:97"
        },
        {
          "method": "org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery",
          "source": "UnitOfWorkImpl.java:2668"
        },
        {
          "method": "org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery",
          "source": "AbstractSession.java:1065"
        },
        {
          "method": "org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery",
          "source": "AbstractSession.java:1037"
        },
        {
          "method": "org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeUpdate",
          "source": "EJBQueryImpl.java:422"
        },
        {
          "method": "org.eclipse.persistence.testing.tests.ejb.ejbqltesting.JUnitJPQLExamplesTestSuite.testDeleteExpression",
          "source": "JUnitJPQLExamplesTestSuite.java:680"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:164"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:130"
        },
        {
          "method": "org.eclipse.persistence.testing.framework.junit.JUnitTestCase.runBare",
          "source": "JUnitTestCase.java:335"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:120"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:230"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:225"
        },
        {
          "method": "junit.extensions.TestDecorator.basicRun",
          "source": "TestDecorator.java:24"
        },
        {
          "method": "junit.extensions.TestSetup$1.protect",
          "source": "TestSetup.java:21"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.extensions.TestSetup.run",
          "source": "TestSetup.java:25"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run",
          "source": "JUnit3TestReference.java:130"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.TestExecution.run",
          "source": "TestExecution.java:38"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:460"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:673"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main",
          "source": "RemoteTestRunner.java:196"
        }
      ],
      "causedBy": {
        "exceptionType": "java.sql.SQLException",
        "message": "Field \u0027QUANTITY\u0027 doesn\u0027t have a default value",
        "elements": [
          {
            "method": "com.mysql.jdbc.MysqlIO.checkErrorPacket",
            "source": "MysqlIO.java:2928"
          },
          {
            "method": "com.mysql.jdbc.MysqlIO.sendCommand",
            "source": "MysqlIO.java:1571"
          },
          {
            "method": "com.mysql.jdbc.ServerPreparedStatement.serverExecute",
            "source": "ServerPreparedStatement.java:1124"
          },
          {
            "method": "com.mysql.jdbc.ServerPreparedStatement.executeInternal",
            "source": "ServerPreparedStatement.java:676"
          },
          {
            "method": "com.mysql.jdbc.PreparedStatement.executeUpdate",
            "source": "PreparedStatement.java:1166"
          },
          {
            "method": "com.mysql.jdbc.PreparedStatement.executeUpdate",
            "source": "PreparedStatement.java:1082"
          },
          {
            "method": "com.mysql.jdbc.PreparedStatement.executeUpdate",
            "source": "PreparedStatement.java:1067"
          },
          {
            "method": "org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect",
            "source": "DatabaseAccessor.java:718"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "211084",
      "date": "2007-11-27T16:45:15+01:00",
      "product": "EPS(EclipseLink)",
      "component": "Foundation",
      "severity": "normal"
    }
  ],
  "groupId": "211084",
  "bugId": "211084",
  "date": "2007-11-27T16:45:15+01:00",
  "product": "EPS(EclipseLink)",
  "component": "Foundation",
  "severity": "normal"
}