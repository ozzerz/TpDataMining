{
  "comments": [
    "When I was editing a simple model where I had defined 3 interfaces I created an\nattribute in one of them tho represent a EJavaObject. Then when I cliked on the\neditor canvas I got an endless stream or NullPointerExceptions.\nSometimes I can go on with the job but saving immediately and then restarting\nEclipse but other times I have to kill the processs because the errors overflow\nand the error dialog cannot be cancelled.\n\nThis is an extract of the Eclipse log at that time.\n!ENTRY org.eclipse.core.runtime 4 2 Feb 03, 2005 16:14:00.574\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n  at\norg.eclipse.ui.views.properties.PropertySheetEntry.refreshChildEntries(PropertySheetEntry.java:436)\n  at\norg.eclipse.ui.views.properties.PropertySheetEntry.refreshFromRoot(PropertySheetEntry.java:478)\n  at\norg.eclipse.ui.views.properties.PropertySheetEntry.refreshFromRoot(PropertySheetEntry.java:480)\n  at\norg.eclipse.ui.views.properties.PropertySheetEntry.setValue(PropertySheetEntry.java:596)\n  at\norg.eclipse.ui.views.properties.PropertySheetEntry.applyEditorValue(PropertySheetEntry.java:129)\n  at\norg.eclipse.ui.views.properties.PropertySheetViewer.applyEditorValue(PropertySheetViewer.java:236)\n  at\norg.eclipse.ui.views.properties.PropertySheetViewer.setInput(PropertySheetViewer.java:795)\n  at\norg.eclipse.ui.views.properties.PropertySheetPage.selectionChanged(PropertySheetPage.java:370)\n  at\norg.eclipse.ui.views.properties.PropertySheet.selectionChanged(PropertySheet.java:185)\n  at\norg.eclipse.ui.internal.AbstractSelectionService$3.run(AbstractSelectionService.java:153)\n  at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)\n  at org.eclipse.core.runtime.Platform.run(Platform.java:747)\n  at\norg.eclipse.ui.internal.AbstractSelectionService.fireSelection(AbstractSelectionService.java:151)\n  at\norg.eclipse.ui.internal.AbstractSelectionService$1.selectionChanged(AbstractSelectionService.java:66)\n  at\norg.eclipse.emf.ecore.presentation.EcoreEditor.setSelection(EcoreEditor.java:1358)\n  at\norg.eclipse.emf.ecore.presentation.EcoreEditor$7.selectionChanged(EcoreEditor.java:739)\n  at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:159)\n  at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)\n  at org.eclipse.core.runtime.Platform.run(Platform.java:747)\n  at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:157)\n  at\norg.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1394)\n  at\norg.eclipse.jface.viewers.StructuredViewer.setSelection(StructuredViewer.java:1093)\n  at org.eclipse.emf.ecore.presentation.EcoreEditor$6.run(EcoreEditor.java:640)\n  at\norg.eclipse.emf.ecore.presentation.EcoreEditor.setSelectionToViewer(EcoreEditor.java:644)\n  at org.eclipse.emf.ecore.presentation.EcoreEditor$5.run(EcoreEditor.java:586)\n  at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n  at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:106)\n  at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2749)\n  at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2434)\n  at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n  at org.eclipse.jface.window.Window.open(Window.java:648)\n  at org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:295)\n  at org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:52)\n  at\norg.eclipse.core.internal.runtime.InternalPlatform.handleException(InternalPlatform.java:350)\n  at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:618)\n\nThen the exception stack trace repites many times from\n  at org.eclipse.core.runtime.Platform.run(Platform.java:747)\n  at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:618)\n\nI will keep the log for some days because the comments cannot contain all the\nstack trace.\n\nBest regards.\nLuis de Diego",
    "The problem is reproducible and is not related to the creation of the Attribute\nof type EJavaObject but to the setting of the default value to a string on the like:\nnew Entity().\nThe next XMI model does not generates any problem.\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cecore:EPackage xmi:version\u003d\"2.0\"\n    xmlns:xmi\u003d\"http://www.omg.org/XMI\"\nxmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:ecore\u003d\"http://www.eclipse.org/emf/2002/Ecore\" name\u003d\"bug\"\u003e\n  \u003ceClassifiers xsi:type\u003d\"ecore:EClass\" name\u003d\"Container\" interface\u003d\"true\"\u003e\n    \u003ceStructuralFeatures xsi:type\u003d\"ecore:EAttribute\" name\u003d\"Entity\" lowerBound\u003d\"1\"\n        eType\u003d\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EJavaObject\"\n        changeable\u003d\"false\"/\u003e\n  \u003c/eClassifiers\u003e\n\u003c/ecore:EPackage\u003e\n\nbut changing the defaultValueLiteral property to \"new Entoty()\" generates\nanother error when the model is read back.\n\nBest regards\nLuis de Diego\n",
    "A fix to EStructuralFeatureImpl.getDefaultValue has been committed to CVS; now\nwe check whether the EDataType is serialiazeable and avoid calling\ncreateFromString in that case, since it will fail for sure.  \n\nNote that EJavaObject is not serializeable so you cannot specify a default value\nfor it. Also, the EAttribute should be marked transient, since you won\u0027t be able\nto serialize/deserialize its value.",
    "Fixed in Build 2.1.0.I200502100800"
  ],
  "commentCreationDates": [
    "2005-02-03T15:35:32+01:00",
    "2005-02-03T15:52:37+01:00",
    "2005-02-03T20:52:54+01:00",
    "2005-02-10T17:39:48+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.refreshChildEntries",
          "source": "PropertySheetEntry.java:436"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.refreshFromRoot",
          "source": "PropertySheetEntry.java:478"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.refreshFromRoot",
          "source": "PropertySheetEntry.java:480"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.setValue",
          "source": "PropertySheetEntry.java:596"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.applyEditorValue",
          "source": "PropertySheetEntry.java:129"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.applyEditorValue",
          "source": "PropertySheetViewer.java:236"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.setInput",
          "source": "PropertySheetViewer.java:795"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetPage.selectionChanged",
          "source": "PropertySheetPage.java:370"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheet.selectionChanged",
          "source": "PropertySheet.java:185"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$3.run",
          "source": "AbstractSelectionService.java:153"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:616"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.fireSelection",
          "source": "AbstractSelectionService.java:151"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$1.selectionChanged",
          "source": "AbstractSelectionService.java:66"
        },
        {
          "method": "org.eclipse.emf.ecore.presentation.EcoreEditor.setSelection",
          "source": "EcoreEditor.java:1358"
        },
        {
          "method": "org.eclipse.emf.ecore.presentation.EcoreEditor$7.selectionChanged",
          "source": "EcoreEditor.java:739"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:159"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:616"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:157"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1394"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:1093"
        },
        {
          "method": "org.eclipse.emf.ecore.presentation.EcoreEditor$6.run",
          "source": "EcoreEditor.java:640"
        },
        {
          "method": "org.eclipse.emf.ecore.presentation.EcoreEditor.setSelectionToViewer",
          "source": "EcoreEditor.java:644"
        },
        {
          "method": "org.eclipse.emf.ecore.presentation.EcoreEditor$5.run",
          "source": "EcoreEditor.java:586"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2749"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2434"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:295"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:52"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.handleException",
          "source": "InternalPlatform.java:350"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:618"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "84337",
      "date": "2005-02-03T15:35:32+01:00",
      "product": "EMF",
      "component": "Edit",
      "severity": "major"
    }
  ],
  "groupId": "84337",
  "bugId": "84337",
  "date": "2005-02-03T15:35:32+01:00",
  "product": "EMF",
  "component": "Edit",
  "severity": "major"
}