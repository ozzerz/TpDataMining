{
  "comments": [
    "I\u0027m trying to get the provisioning stuff running.  I followed the instructions to get the code, setup xstream, and successfully generated metadata for an Eclipse 3.3RC2 install.\n\nWhen I try to generate a new install from the metadata (using the launch config provided), I get an NPE due to a null manipulator.\n\nI am a newbie so I don\u0027t know what other info may be relevant to provide...\n\nHere is what was in the console:\n\nosgi\u003e !SESSION 2007-05-31 14:43:37.746 -----------------------------------------------\neclipse.buildId\u003dunknown\njava.version\u003d1.5.0_11\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -dev file:C:/projects/provisioning/workspace/.metadata/.plugins/org.eclipse.pde.core/Test Director SDK/dev.properties -os win32 -ws win32 -arch x86 -console -consolelog\n\n!ENTRY org.eclipse.equinox.prov.test 4 0 2007-05-31 14:44:30.993\n!MESSAGE \n!STACK 0\norg.osgi.framework.BundleException: Exception in org.eclipse.equinox.prov.test.TestActivator.start() of bundle org.eclipse.equinox.prov.test.\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:1018)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:974)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:346)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:350)\n\tat org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1118)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:634)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:508)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:282)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:468)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:195)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:297)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.getManipulator(EclipseTouchpoint.java:152)\n\tat org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.install(EclipseTouchpoint.java:187)\n\tat org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.perform(EclipseTouchpoint.java:63)\n\tat org.eclipse.equinox.prov.operations.Install.performIU(Install.java:35)\n\tat org.eclipse.equinox.prov.engine.IUPhase.perform(IUPhase.java:38)\n\tat org.eclipse.equinox.prov.engine.Phase.perform(Phase.java:38)\n\tat org.eclipse.equinox.prov.engine.EngineOperation.perform(EngineOperation.java:33)\n\tat org.eclipse.equinox.prov.engine.Engine.perform(Engine.java:28)\n\tat org.eclipse.equinox.prov.director.SimpleDirector.install(SimpleDirector.java:106)\n\tat org.eclipse.equinox.prov.test.DirectorTest.testInstallIU(DirectorTest.java:83)\n\tat org.eclipse.equinox.prov.test.TestActivator.start(TestActivator.java:33)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:999)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:993)\n\t... 10 more\nRoot exception:\njava.lang.NullPointerException\n\tat org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.getManipulator(EclipseTouchpoint.java:152)\n\tat org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.install(EclipseTouchpoint.java:187)\n\tat org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.perform(EclipseTouchpoint.java:63)\n\tat org.eclipse.equinox.prov.operations.Install.performIU(Install.java:35)\n\tat org.eclipse.equinox.prov.engine.IUPhase.perform(IUPhase.java:38)\n\tat org.eclipse.equinox.prov.engine.Phase.perform(Phase.java:38)\n\tat org.eclipse.equinox.prov.engine.EngineOperation.perform(EngineOperation.java:33)\n\tat org.eclipse.equinox.prov.engine.Engine.perform(Engine.java:28)\n\tat org.eclipse.equinox.prov.director.SimpleDirector.install(SimpleDirector.java:106)\n\tat org.eclipse.equinox.prov.test.DirectorTest.testInstallIU(DirectorTest.java:83)\n\tat org.eclipse.equinox.prov.test.TestActivator.start(TestActivator.java:33)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:999)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:993)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:974)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:346)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:350)\n\tat org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1118)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:634)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:508)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:282)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:468)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:195)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:297)\n\n!ENTRY org.eclipse.osgi 4 0 2007-05-31 14:44:31.413\n!MESSAGE Bundle initial@reference:file:../projects/provisioning/workspace/org.eclipse.equinox.prov.test/ [9] is not active.",
    "I just tried with the code from HEAD and I have not been able to reproduce what looks like a setup problem where a plug-in would not have been started (one of org.eclipse.equinox.simpleconfigurator.manipulator, org.eclipse.equinox.frameworkadmin.equinox or org.eclipse.equinox.frameworkadmin).\n\nOn the other hand I can see why we would get an exception and I will fix this.\n\nIn order to help you make progress I have tagged all projects and released a new project set called \"stableProjectSet\" in the releng project which is what I have been using to reproduce your problem.\n",
    "thanks, Pascal.  It appears to have worked now.  The install succeeded and I was able to launch an eclipse that looks like the one I generated metadata from.  \n\nAs a side note, when I loaded the stable project set, I had a compile error and had to load the latest org.eclipse.equinox.prov.artifact.repository from HEAD in order to get the latest constructor for ArtifactDescriptor.\n\nIn general, is it relatively safe to be loading the latest from HEAD?...ie, is that pretty stable?",
    "We are trying to keep head in a relatively good state to make sure everyone can progress.\n",
    "I had a similar problem, fixed it and released the change but I guess I should have tagged it somehow.  Perhaps we should broadcast the expected process to the entire team knows what is going on.",
    "I ran into the same symptom today. The NPE occurred because the call to getFrameworkManipulator in EclipseTouchpoint returned null\n\n\tprivate Manipulator getFrameworkManipulator() {\n\t\tFrameworkAdmin fwAdmin \u003d this.getFrameworkAdmin();\n\t\treturn fwAdmin \u003d\u003d null ? null : fwAdmin.getManipulator();\n\t}\n\nbecause the call to getFrameworkAdmin() returned null\n\n\tprivate FrameworkAdmin getFrameworkAdmin() {\n\t\tif (fwAdminTracker \u003d\u003d null) {\n\t\t\tFilter chFilter;\n\t\t\ttry {...stuff omitted that worked\n\n\t\t}\n\t\treturn (FrameworkAdmin) fwAdminTracker.getService();\n\t}\n\nfrom fwAdminTracker.getService().\n\nSetting a breakpoint at the call to getService() and checked status of bundles:\nFramework is launched.\n\nid\tBundle Location\nState       Bundle File Name\n0\tSystem Bundle\n  ACTIVE      org.eclipse.osgi_3.3.0.v20070430\n1\tinitial@reference:file:../../equinox-provisioning/org.eclipse.equinox.frameworkadmin/\n  RESOLVED    org.eclipse.equinox.frameworkadmin_1.5.0\n2\tinitial@reference:file:../../equinox-provisioning/org.eclipse.ecf.core.identity/\n    ...\n26\tinitial@reference:file:../../equinox-provisioning/org.eclipse.equinox.frameworkadmin.equinox/\n  RESOLVED    org.eclipse.equinox.frameworkadmin.equinox_1.5.1\n\nI start\u0027d both 2 and 26 and the call succeeded.\n\nMy launch configuration did have AUTO_START on org.eclipse.equinox.frameworkadmin.equinox, but not on org.eclipse.equinox.frameworkadmin\n",
    "Not sure if this still applies. Simon could you please check?",
    "The actual code to \"get\" the manipulator hasn\u0027t changed although we have tightened up our initial configuring of a running system. Following these instruictions I don\u0027t get an NPE anymore and haven\u0027t seen a problem here in some time. I\u0027m marking FIXED but please re-open if you have reservations. \n\nSome of the code around setting up frameworkadmin in the Eclipse Touchpoint is fairly fragile. I imagine a bad configuration setting could cause this. I\u0027m writing tests in this area and will specifically try to narrow down problems while getting the manipulator.\n\n"
  ],
  "commentCreationDates": [
    "2007-06-01T00:00:39+02:00",
    "2007-06-01T00:42:30+02:00",
    "2007-06-01T22:22:03+02:00",
    "2007-06-02T05:17:46+02:00",
    "2007-06-03T01:50:19+02:00",
    "2007-06-05T02:51:04+02:00",
    "2007-10-18T20:32:18+02:00",
    "2007-10-18T22:47:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Exception in org.eclipse.equinox.prov.test.TestActivator.start() of bundle org.eclipse.equinox.prov.test.",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:1018"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:974"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:346"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.resume",
          "source": "AbstractBundle.java:350"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.resumeBundle",
          "source": "Framework.java:1118"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles",
          "source": "StartLevelManager.java:634"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL",
          "source": "StartLevelManager.java:508"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
          "source": "StartLevelManager.java:282"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent",
          "source": "StartLevelManager.java:468"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:195"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:297"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.getManipulator",
            "source": "EclipseTouchpoint.java:152"
          },
          {
            "method": "org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.install",
            "source": "EclipseTouchpoint.java:187"
          },
          {
            "method": "org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.perform",
            "source": "EclipseTouchpoint.java:63"
          },
          {
            "method": "org.eclipse.equinox.prov.operations.Install.performIU",
            "source": "Install.java:35"
          },
          {
            "method": "org.eclipse.equinox.prov.engine.IUPhase.perform",
            "source": "IUPhase.java:38"
          },
          {
            "method": "org.eclipse.equinox.prov.engine.Phase.perform",
            "source": "Phase.java:38"
          },
          {
            "method": "org.eclipse.equinox.prov.engine.EngineOperation.perform",
            "source": "EngineOperation.java:33"
          },
          {
            "method": "org.eclipse.equinox.prov.engine.Engine.perform",
            "source": "Engine.java:28"
          },
          {
            "method": "org.eclipse.equinox.prov.director.SimpleDirector.install",
            "source": "SimpleDirector.java:106"
          },
          {
            "method": "org.eclipse.equinox.prov.test.DirectorTest.testInstallIU",
            "source": "DirectorTest.java:83"
          },
          {
            "method": "org.eclipse.equinox.prov.test.TestActivator.start",
            "source": "TestActivator.java:33"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
            "source": "BundleContextImpl.java:999"
          },
          {
            "method": "java.security.AccessController.doPrivileged",
            "source": "Native Method"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
            "source": "BundleContextImpl.java:993"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "190362",
      "date": "2007-06-01T00:00:39+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.getManipulator",
          "source": "EclipseTouchpoint.java:152"
        },
        {
          "method": "org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.install",
          "source": "EclipseTouchpoint.java:187"
        },
        {
          "method": "org.eclipse.equinox.internal.prov.touchpoint.eclipse.EclipseTouchpoint.perform",
          "source": "EclipseTouchpoint.java:63"
        },
        {
          "method": "org.eclipse.equinox.prov.operations.Install.performIU",
          "source": "Install.java:35"
        },
        {
          "method": "org.eclipse.equinox.prov.engine.IUPhase.perform",
          "source": "IUPhase.java:38"
        },
        {
          "method": "org.eclipse.equinox.prov.engine.Phase.perform",
          "source": "Phase.java:38"
        },
        {
          "method": "org.eclipse.equinox.prov.engine.EngineOperation.perform",
          "source": "EngineOperation.java:33"
        },
        {
          "method": "org.eclipse.equinox.prov.engine.Engine.perform",
          "source": "Engine.java:28"
        },
        {
          "method": "org.eclipse.equinox.prov.director.SimpleDirector.install",
          "source": "SimpleDirector.java:106"
        },
        {
          "method": "org.eclipse.equinox.prov.test.DirectorTest.testInstallIU",
          "source": "DirectorTest.java:83"
        },
        {
          "method": "org.eclipse.equinox.prov.test.TestActivator.start",
          "source": "TestActivator.java:33"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextImpl.java:999"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:993"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:974"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:346"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.resume",
          "source": "AbstractBundle.java:350"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.resumeBundle",
          "source": "Framework.java:1118"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles",
          "source": "StartLevelManager.java:634"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL",
          "source": "StartLevelManager.java:508"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
          "source": "StartLevelManager.java:282"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent",
          "source": "StartLevelManager.java:468"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:195"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:297"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "190362",
      "date": "2007-06-01T00:00:39+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "190362",
  "bugId": "190362",
  "date": "2007-06-01T00:00:39+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}