{
  "comments": [
    "affected Build: M4 \n\nI get a NPE when executing the following code line:\n\nFont font \u003d JFaceResources.getTextFont();\n\nI havn\u0027t had this NPE in a previous run. I assume it has something to do with  \ninitialisiation beacaus this line of code is executed when initializing the \ndefault values of the preference store of the affected plugin. It seems that \nJFaceResources.getTextFont() can\u0027t determine a valid Display. The cause may be \na wrong thread.\n\nI\u0027m not sure so I will give you a small abstract description what is going on \nbefore this NPE.\n\nI started a fresh debugging sessions for my plugins. I\u0027m creating a development \ntoolset for the Harbour(Clipper) programming languange. The core plugin \nprovides a build. The process is similar to the new CDT plugin.\n\nI invoked the builder with right-click and \"Rebuild Project\" because I\u0027m \ncurrently developing the builder.\n\nThe builder uses a console for its output. This console is registered via an \nextension point from my ui plugin. You can see the next steps from the stack \ntrace.\n\n- builder was invoked\n- builder tries to get the console from the core plugin class\n- console is tried to be instanciated\n- console constructor tries to get the console manager from the ui plugin class\n- because manager is lazily initialized, ui plugin class starts the console \nmanager\n- console manager needs preference store to read some console preferences\n- because preference store is lazily initialized, too, ui plugin tries to apply \ndefault values to preference store\n- one default value is the console font -\u003e NPE\n\nAny ideas? Probably JFaceResources.getTextFont() has a bug or it can\u0027t be \ninvoked in this thread context or anything else. But I have no idea how to \nresolve this. I hope you guys have one.\n\nBUT! I know there is a way because it worked without getting a NPE on my first \ntries. But on the first tries I didn\u0027t have a newly started workbench. It was \nalready running and I performed some actions which might have initialized \nsomething before so that JFaceResources.getTextFont() worked correclty.\n\n\n-----------\nStack Trace\n-----------\n\njava.lang.NullPointerException\n\tat org.eclipse.jface.resource.FontRegistry.bestData\n(FontRegistry.java:257)\n\tat org.eclipse.jface.resource.FontRegistry.bestDataArray\n(FontRegistry.java:284)\n\tat org.eclipse.jface.resource.FontRegistry.createFont\n(FontRegistry.java:300)\n\tat org.eclipse.jface.resource.FontRegistry.get(FontRegistry.java:387)\n\tat org.eclipse.jface.resource.JFaceResources.getTextFont\n(JFaceResources.java:278)\n\tat \norg.harbour.ide.internal.ui.preferences.HarbourPreferences.initializeDefaultValu\nes(HarbourPreferences.java:144)\n\tat \norg.harbour.ide.internal.ui.HarbourUIPlugin.initializeDefaultPreferences\n(HarbourUIPlugin.java:251)\n\tat \norg.eclipse.ui.plugin.AbstractUIPlugin.initializeDefaultPluginPreferences\n(AbstractUIPlugin.java:623)\n\tat org.eclipse.core.runtime.Plugin.getPluginPreferences(Plugin.java:347)\n\tat \norg.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.initialize\n(AbstractUIPlugin.java:175)\n\tat org.eclipse.ui.plugin.AbstractUIPlugin.getPreferenceStore\n(AbstractUIPlugin.java:560)\n\tat \norg.harbour.ide.internal.ui.views.buildview.BuildConsoleManager.startup\n(BuildConsoleManager.java:286)\n\tat org.harbour.ide.internal.ui.HarbourUIPlugin.getConsoleManager\n(HarbourUIPlugin.java:300)\n\tat org.harbour.ide.internal.ui.views.buildview.BuildConsole.\u003cinit\u003e\n(BuildConsole.java:43)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance\n(NativeConstructorAccessorImpl.java:39)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance\n(DelegatingConstructorAccessorImpl.java:27)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:274)\n\tat java.lang.Class.newInstance0(Class.java:306)\n\tat java.lang.Class.newInstance(Class.java:259)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:138)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:167)\n\tat \norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension\n(ConfigurationElement.java:103)\n\tat org.harbour.ide.core.builder.HarbourBuildManager.getBuildConsole\n(HarbourBuildManager.java:744)\n\tat org.harbour.ide.internal.core.builder.HarbourBuilder.invokeBuild\n(HarbourBuilder.java:281)\n\tat org.harbour.ide.internal.core.builder.HarbourBuilder.build\n(HarbourBuilder.java:111)\n\tat org.eclipse.core.internal.events.BuildManager$2.run\n(BuildManager.java:384)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:852)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:120)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:176)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:186)\n\tat org.eclipse.core.internal.events.BuildManager$1.run\n(BuildManager.java:146)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:852)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:160)\n\tat org.eclipse.core.internal.events.BuildManager.build\n(BuildManager.java:232)\n\tat org.eclipse.core.internal.resources.Project.build(Project.java:87)\n\tat org.eclipse.ui.actions.BuildAction.invokeOperation\n(BuildAction.java:156)\n\tat org.eclipse.ui.actions.WorkspaceAction.execute\n(WorkspaceAction.java:111)\n\tat org.eclipse.ui.actions.WorkspaceAction$1.execute\n(WorkspaceAction.java:268)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:65)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1564)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:79)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:95)",
    "Added a null check for when there is no Display. Fxed in build \u003e 20030109",
    "Marking closed"
  ],
  "commentCreationDates": [
    "2002-12-21T11:31:18+01:00",
    "2003-01-09T20:19:22+01:00",
    "2005-05-10T20:55:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.resource.FontRegistry.bestData",
          "source": "FontRegistry.java:257"
        },
        {
          "method": "org.eclipse.jface.resource.FontRegistry.bestDataArray",
          "source": "FontRegistry.java:284"
        },
        {
          "method": "org.eclipse.jface.resource.FontRegistry.createFont",
          "source": "FontRegistry.java:300"
        },
        {
          "method": "org.eclipse.jface.resource.FontRegistry.get",
          "source": "FontRegistry.java:387"
        },
        {
          "method": "org.eclipse.jface.resource.JFaceResources.getTextFont",
          "source": "JFaceResources.java:278"
        },
        {
          "method": "org.harbour.ide.internal.ui.preferences.HarbourPreferences.initializeDefaultValues",
          "source": "HarbourPreferences.java:144"
        },
        {
          "method": "org.harbour.ide.internal.ui.HarbourUIPlugin.initializeDefaultPreferences",
          "source": "HarbourUIPlugin.java:251"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.initializeDefaultPluginPreferences",
          "source": "AbstractUIPlugin.java:623"
        },
        {
          "method": "org.eclipse.core.runtime.Plugin.getPluginPreferences",
          "source": "Plugin.java:347"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.initialize",
          "source": "AbstractUIPlugin.java:175"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.getPreferenceStore",
          "source": "AbstractUIPlugin.java:560"
        },
        {
          "method": "org.harbour.ide.internal.ui.views.buildview.BuildConsoleManager.startup",
          "source": "BuildConsoleManager.java:286"
        },
        {
          "method": "org.harbour.ide.internal.ui.HarbourUIPlugin.getConsoleManager",
          "source": "HarbourUIPlugin.java:300"
        },
        {
          "method": "org.harbour.ide.internal.ui.views.buildview.BuildConsole.\u003cinit\u003e",
          "source": "BuildConsole.java:43"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance",
          "source": "NativeConstructorAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "DelegatingConstructorAccessorImpl.java:27"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Constructor.java:274"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:306"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:259"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:138"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:167"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:103"
        },
        {
          "method": "org.harbour.ide.core.builder.HarbourBuildManager.getBuildConsole",
          "source": "HarbourBuildManager.java:744"
        },
        {
          "method": "org.harbour.ide.internal.core.builder.HarbourBuilder.invokeBuild",
          "source": "HarbourBuilder.java:281"
        },
        {
          "method": "org.harbour.ide.internal.core.builder.HarbourBuilder.build",
          "source": "HarbourBuilder.java:111"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:384"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:852"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:120"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:176"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:186"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:146"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:852"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:160"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:232"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.build",
          "source": "Project.java:87"
        },
        {
          "method": "org.eclipse.ui.actions.BuildAction.invokeOperation",
          "source": "BuildAction.java:156"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceAction.execute",
          "source": "WorkspaceAction.java:111"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceAction$1.execute",
          "source": "WorkspaceAction.java:268"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:65"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1564"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:79"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:95"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "28785",
      "date": "2002-12-21T11:31:18+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "28785",
  "bugId": "28785",
  "date": "2002-12-21T11:31:18+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}