{
  "comments": [
    "Try to search for an element\u0027s references for example.\nThe search proceeds, the search view seems to be populated properly but a platform dialog saying \"An internal error occurred during: \"File Search\"\" comes up and the following stack trace is in the log:\n\norg.eclipse.swt.SWTException: Invalid thread access\nat org.eclipse.swt.SWT.error(SWT.java:3374)\nat org.eclipse.swt.SWT.error(SWT.java(Inlined Compiled Code))\nat org.eclipse.swt.SWT.error(SWT.java(Inlined Compiled Code))\nat org.eclipse.swt.widgets.Widget.error(Widget.java(Inlined Compiled Code))\nat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java(Inlined Compiled Code))\nat org.eclipse.swt.widgets.Widget.getData(Widget.java(Compiled Code))\nat org.eclipse.ui.part.MultiPageEditorPart.getEditor(MultiPageEditorPart.java:421)\nat org.eclipse.ui.part.MultiPageEditorPart.getActiveEditor(MultiPageEditorPart.java:348)\nat org.eclipse.ui.part.MultiPageEditorPart.getAdapter(MultiPageEditorPart.java:810)\nat org.eclipse.wst.xsd.ui.internal.adt.editor.CommonMultiPageEditor.getAdapter(CommonMultiPageEditor.java:336)\nat org.eclipse.wst.xsd.ui.internal.adt.editor.ADTMultiPageEditor.getAdapter(ADTMultiPageEditor.java:223)\nat org.eclipse.wst.xsd.ui.internal.editor.InternalXSDMultiPageEditor.getAdapter(InternalXSDMultiPageEditor.java:365)\nat org.eclipse.search2.internal.ui.text.EditorAnnotationManager.createHighlighter(EditorAnnotationManager.java:172)\nat org.eclipse.search2.internal.ui.text.EditorAnnotationManager.addAnnotations(EditorAnnotationManager.java:231)\nat org.eclipse.search2.internal.ui.text.EditorAnnotationManager.searchResultChanged(EditorAnnotationManager.java:128)\nat org.eclipse.search.ui.text.AbstractTextSearchResult.fireChange(AbstractTextSearchResult.java:259)\nat org.eclipse.search.ui.text.AbstractTextSearchResult.addMatch(AbstractTextSearchResult.java:82)\nat org.eclipse.wst.common.ui.internal.search.SearchQueryResultCollector.acceptSearchMatch(SearchQueryResultCollector.java:30)\nat org.eclipse.wst.xml.core.internal.search.matching.PatternMatcher.addMatch(PatternMatcher.java:71)\nat org.eclipse.wst.xml.core.internal.search.matching.XMLSearchPatternMatcher.locateMatches(XMLSearchPatternMatcher.java:126)\nat org.eclipse.wst.xml.core.internal.search.matching.XMLSearchPatternMatcher.locateMatches(XMLSearchPatternMatcher.java:119)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.match(XMLSearchParticipant.java:170)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.visit(XMLSearchParticipant.java:157)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.visit(XMLSearchParticipant.java:161)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.visit(XMLSearchParticipant.java:161)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.access$0(XMLSearchParticipant.java:155)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant.locateMatches(XMLSearchParticipant.java:120)\nat org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant.locateMatches(XMLSearchParticipant.java:291)\nat org.eclipse.wst.common.core.search.SearchEngine.search(SearchEngine.java:140)\nat org.eclipse.wst.common.core.search.SearchEngine.search(SearchEngine.java:184)\nat org.eclipse.wst.common.ui.internal.search.AbstractSearchQuery.run(AbstractSearchQuery.java:110)\nat org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:93)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    " traced the problem to EditorAnnotationManager#createHighlighter, more precisely to the call to getAdapter(ISearchEditorAccess.class) call below:\n\n\tprivate Highlighter createHighlighter() {\n\t\tIEditorPart editor\u003d fEditor;\n\t\tif (fgHighlighterType !\u003d HIGHLLIGHTER_ANY) {\n\t\t\treturn debugCreateHighlighter(editor);\n\t\t}\n\t\tISearchEditorAccess access\u003d (ISearchEditorAccess) editor.getAdapter(ISearchEditorAccess.class);\n\t\tif (access !\u003d null)\n\nThe call goes all the way to our CommonMultipageEditor editor which then calls into super.getAdapter().\n\nIt appears that super - MultiPageEditorPart - was changed through https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d43523 to delegate calls to getAdapter to the active inner editor.\n\nThe new code uses code (getActiveEditor) which can be safely executed only from the UI thread.\n\nSince our search query is marked as safe to run in the background it is executed from a different thread than the UI thread, resulting in the given exception.",
    "A new bug was opened against the platform by the search team\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d144851",
    "This is really a dup for bug 144851 which has been fixed now by the Platform team.\n\n*** This bug has been marked as a duplicate of 144851 ***",
    "The source platform bug was fixed."
  ],
  "commentCreationDates": [
    "2006-05-31T17:40:20+02:00",
    "2006-06-01T03:52:38+02:00",
    "2006-06-01T14:12:02+02:00",
    "2006-06-06T23:07:20+02:00",
    "2006-06-13T22:42:10+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3374"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.getData",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.getEditor",
          "source": "MultiPageEditorPart.java:421"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.getActiveEditor",
          "source": "MultiPageEditorPart.java:348"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.getAdapter",
          "source": "MultiPageEditorPart.java:810"
        },
        {
          "method": "org.eclipse.wst.xsd.ui.internal.adt.editor.CommonMultiPageEditor.getAdapter",
          "source": "CommonMultiPageEditor.java:336"
        },
        {
          "method": "org.eclipse.wst.xsd.ui.internal.adt.editor.ADTMultiPageEditor.getAdapter",
          "source": "ADTMultiPageEditor.java:223"
        },
        {
          "method": "org.eclipse.wst.xsd.ui.internal.editor.InternalXSDMultiPageEditor.getAdapter",
          "source": "InternalXSDMultiPageEditor.java:365"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.EditorAnnotationManager.createHighlighter",
          "source": "EditorAnnotationManager.java:172"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.EditorAnnotationManager.addAnnotations",
          "source": "EditorAnnotationManager.java:231"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.EditorAnnotationManager.searchResultChanged",
          "source": "EditorAnnotationManager.java:128"
        },
        {
          "method": "org.eclipse.search.ui.text.AbstractTextSearchResult.fireChange",
          "source": "AbstractTextSearchResult.java:259"
        },
        {
          "method": "org.eclipse.search.ui.text.AbstractTextSearchResult.addMatch",
          "source": "AbstractTextSearchResult.java:82"
        },
        {
          "method": "org.eclipse.wst.common.ui.internal.search.SearchQueryResultCollector.acceptSearchMatch",
          "source": "SearchQueryResultCollector.java:30"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.matching.PatternMatcher.addMatch",
          "source": "PatternMatcher.java:71"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.matching.XMLSearchPatternMatcher.locateMatches",
          "source": "XMLSearchPatternMatcher.java:126"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.matching.XMLSearchPatternMatcher.locateMatches",
          "source": "XMLSearchPatternMatcher.java:119"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.match",
          "source": "XMLSearchParticipant.java:170"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.visit",
          "source": "XMLSearchParticipant.java:157"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.visit",
          "source": "XMLSearchParticipant.java:161"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.visit",
          "source": "XMLSearchParticipant.java:161"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant$DOMVisitor.access$0",
          "source": "XMLSearchParticipant.java:155"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant.locateMatches",
          "source": "XMLSearchParticipant.java:120"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.search.XMLSearchParticipant.locateMatches",
          "source": "XMLSearchParticipant.java:291"
        },
        {
          "method": "org.eclipse.wst.common.core.search.SearchEngine.search",
          "source": "SearchEngine.java:140"
        },
        {
          "method": "org.eclipse.wst.common.core.search.SearchEngine.search",
          "source": "SearchEngine.java:184"
        },
        {
          "method": "org.eclipse.wst.common.ui.internal.search.AbstractSearchQuery.run",
          "source": "AbstractSearchQuery.java:110"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run",
          "source": "InternalSearchUI.java:93"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "144695",
      "duplicateId": "144851",
      "date": "2006-05-31T17:40:20+02:00",
      "product": "Web Tools",
      "component": "wst.xsd",
      "severity": "major"
    }
  ],
  "groupId": "144851",
  "bugId": "144695",
  "duplicateId": "144851",
  "date": "2006-05-31T17:40:20+02:00",
  "product": "Web Tools",
  "component": "wst.xsd",
  "severity": "major"
}