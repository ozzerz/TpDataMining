{
  "comments": [
    "I build my RCP application using the Product Export wizard from my Windows box for 3 target platforms - Windows, Linux and Mac.  The resulting Windows and Linux builds run fine but not the Mac version.  However, if I perform the same Product Export on a Mac, then the Mac version works OK.\n\nThe error logged when running the resulting Mac application is this:\n\n!SESSION 2007-06-06 09:22:52.088 -----------------------------------------------\neclipse.buildId\u003dunknown\njava.version\u003d1.5.0_07\njava.vendor\u003dApple Computer, Inc.\nBootLoader constants: OS\u003dmacosx, ARCH\u003dx86, WS\u003dcarbon, NL\u003den_US\nFramework arguments:  -keyring /Users/phillipus/.eclipse_keyring -showlocation\nCommand-line arguments:  -os macosx -ws carbon -arch x86 -keyring /Users/phillipus/.eclipse_keyring -consoleLog -showlocation\n\n!ENTRY org.eclipse.osgi 4 0 2007-06-06 09:23:00.553\n!MESSAGE Application error\n!STACK 1\njava.lang.NullPointerException\n\tat org.eclipse.swt.widgets.Display.readImageRef(Display.java:2889)\n\tat org.eclipse.swt.widgets.Display.createDisplay(Display.java:994)\n\tat org.eclipse.swt.widgets.Display.create(Display.java:938)\n\tat org.eclipse.swt.graphics.Device.\u003cinit\u003e(Device.java:119)\n\tat org.eclipse.swt.widgets.Display.\u003cinit\u003e(Display.java:750)\n\tat org.eclipse.swt.widgets.Display.\u003cinit\u003e(Display.java:741)\n\tat org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:498)\n\tat org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)\n\tat org.tencompetence.ldauthor.LDAuthorApp.start(LDAuthorApp.java:49)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\n\n\nI compared the Mac build output done on the Windows box and that done on a Mac for the Mac build.  First of all, the Windows Mac build contains an extra \"Eclipse.app\" whilst the Mac build does not.  This is not the cause of the bug.    The \"Contents/MacOS/yourproduct.ini\" file that is generated contains the problem.  Here\u0027s the ini file as created by the Windows Product Export on the Windows box for Mac:\n\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n-vmargs\n-Xdock:icon\u003d../Resources/ldauthor.icns\n-XstartOnFirstThread\n-Xms40m\n-Xmx256m\n-Dorg.eclipse.swt.internal.carbon.smallFonts\n\nAnd here\u0027s the ini file as created by the Mac Product Export for Mac: \n-vmargs\n-XstartOnFirstThread\n-Dorg.eclipse.swt.internal.carbon.smallFonts\n\nI removed the line \"-Xdock:icon\u003d../Resources/ldauthor.icns\" from the first .ini file and it worked OK.  Note that the icns file does exist at that location.  I used exactly the same .product file in both cases.",
    "Eclipse build is 3.3 RC3 with RCP Delta pack.  Build id: I20070601-1539.\n",
    "2 Things:\n1) Was the export from the Mac done without the delta pack?  If it had the delta pack I would expect it to be the same as the export from the other platfrom.\n\n2) I would say that the first ini file that is causing the problem is the better of the two.  The call stack indicates that swt doesn\u0027t like your icon file.\n\nI raised bug 191260 on SWT about the NPE, you should verify that your Eclipse.App/Contents/Resources/ldauthor.icns is a valid icon file.",
    "I wonder if the extra resource fork information in the .icns file is being lost\nsomewhere along the line? In other words, is it the .icns file that\u0027s being\ncorrupted?\n\nGiven that the Mac product build probably has the -Xdock:icon as well, can you\ntry copying the .icns file from the Windows build onto the Mac app and then\nlaunch it? It will probably have to be a newly built (i.e. not launched file)\nas the Finder has a habit of caching the .icns files.\n\nNB Copying the Mac .icns file to a Windows share should spilt the file into two\nsegments; the resource-fork and data-fork. You\u0027ll end up with two files\n(Thing.icns and ._Thing.icns). Exporting both of those might fix the problem,\nesp. if the Mac version is shipped as an .zip, because the Mac unzip will then\nreconstruct the files appropriately.",
    "Regarding Comment #2:\n\n1).  Yes the delta pack was used for the Mac as well as Windows.\n2).  The ldauthor.icns works fine for the same scenario in Eclipse 3.2.  I shall try another one to make sure.\n\nRegarding Comment #3:\n\nI shall run some tests.\n",
    "Phillip, see bug 191260 comment #4.  Make sure your icns file has a 128x128 icon with 32 bit depth.",
    "An interesting thing to note.  The Mac build as done on the Windows machine produces an extra \"Eclipse.app\" Mac application  folder as well as the \"yourproduct.app\" Mac application folder.  Inside this is one file - \"Eclipse.app\\Contents\\MacOS\\yourproduct.ini\" the contents of which is:\n\n-vmargs\n-XstartOnFirstThread\n-Dorg.eclipse.swt.internal.carbon.smallFonts\n\nThis is the same as the ini file that is created when Product Export is done on the Mac.\n\nSomething wrong there?\n",
    "Re Comment #5, I changed the format of the .icns file to include a 128x128 version and yes it works now.\n\nBur there is still the issue of the spurious \"Eclipse.app\" Mac application folder as per Comment #6.\n\n",
    "The issue of eclipse.app is captured in bug #192127.\n",
    "Changing OS from Mac OS to Mac OS X as per bug 185991"
  ],
  "commentCreationDates": [
    "2007-06-06T12:00:11+02:00",
    "2007-06-06T12:03:42+02:00",
    "2007-06-06T15:59:53+02:00",
    "2007-06-06T16:18:44+02:00",
    "2007-06-06T16:25:31+02:00",
    "2007-06-06T17:39:11+02:00",
    "2007-06-06T17:42:51+02:00",
    "2007-06-06T18:01:43+02:00",
    "2007-06-12T16:59:26+02:00",
    "2007-07-29T15:23:00+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.Display.readImageRef",
          "source": "Display.java:2889"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.createDisplay",
          "source": "Display.java:994"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.create",
          "source": "Display.java:938"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.\u003cinit\u003e",
          "source": "Device.java:119"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.\u003cinit\u003e",
          "source": "Display.java:750"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.\u003cinit\u003e",
          "source": "Display.java:741"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createDisplay",
          "source": "Workbench.java:498"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createDisplay",
          "source": "PlatformUI.java:161"
        },
        {
          "method": "org.tencompetence.ldauthor.LDAuthorApp.start",
          "source": "LDAuthorApp.java:49"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191204",
      "date": "2007-06-06T12:00:11+02:00",
      "product": "PDE",
      "component": "Build",
      "severity": "normal"
    }
  ],
  "groupId": "191204",
  "bugId": "191204",
  "date": "2007-06-06T12:00:11+02:00",
  "product": "PDE",
  "component": "Build",
  "severity": "normal"
}