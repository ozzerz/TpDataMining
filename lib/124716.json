{
  "comments": [
    "HEAD\n\nAsk the IMethodBinding for the anonymous class instance creation\n\"new Object() {}\" about #getAnnotations() \u003d\u003e NPE below.\n\nThis can e.g. be reproduced with the new ASTView 1.1.0 from http://www.eclipse.org/jdt/ui/update-site (needs a JDT/Core \u003e 20060119).\n\npublic class Test {\n    void m() {\n        new Object() { /* anonymous */ };\n    }\n}\n\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.compiler.lookup.MethodBinding.getAnnotationTagBits(MethodBinding.java:421)\n\tat org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.retrieveAnnotationHolder(SourceTypeBinding.java:1276)\n\tat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.retrieveAnnotations(ReferenceBinding.java:965)\n\tat org.eclipse.jdt.internal.compiler.lookup.MethodBinding.getAnnotations(MethodBinding.java:397)\n\tat org.eclipse.jdt.core.dom.MethodBinding.getAnnotations(MethodBinding.java:106)\n\tat org.eclipse.jdt.astview.views.Binding.getChildren(Binding.java:206)\n\tat org.eclipse.jdt.astview.views.ASTViewContentProvider.getChildren(ASTViewContentProvider.java:94)\n...",
    "The only way to solve this issue is to call the getAnnotations() on the method binding of the anonymous class instance creation during the ast convertion. After that, there is no more environment to do the resolution and this is why it fails.\nWe cannot do the lazy resolution once the environment has been cleared out.",
    "I am not sure we want to provide that information.\nThis would have a huge performance hit. It basically means that each method invocation and class instance creation should resolve its method binding during the ast conversion and then call all lazy initialization like getAnnotations() to be able to provide this information.\nThis can slow down the whole ast conversion drastically.\n\nRight now the annotations are resolved for the bindings that correspond to a declaration (type, method, field, locals).",
    "It looks like it works with N20060511.\nPlease reopen if you see this again."
  ],
  "commentCreationDates": [
    "2006-01-20T20:24:29+01:00",
    "2006-01-24T19:57:07+01:00",
    "2006-01-24T20:43:28+01:00",
    "2006-05-11T18:09:19+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.MethodBinding.getAnnotationTagBits",
          "source": "MethodBinding.java:421"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.retrieveAnnotationHolder",
          "source": "SourceTypeBinding.java:1276"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.retrieveAnnotations",
          "source": "ReferenceBinding.java:965"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.MethodBinding.getAnnotations",
          "source": "MethodBinding.java:397"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodBinding.getAnnotations",
          "source": "MethodBinding.java:106"
        },
        {
          "method": "org.eclipse.jdt.astview.views.Binding.getChildren",
          "source": "Binding.java:206"
        },
        {
          "method": "org.eclipse.jdt.astview.views.ASTViewContentProvider.getChildren",
          "source": "ASTViewContentProvider.java:94"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "124716",
      "date": "2006-01-20T20:24:29+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "124716",
  "bugId": "124716",
  "date": "2006-01-20T20:24:29+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}