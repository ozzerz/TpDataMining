{
  "comments": [
    "When using the WTP HTML editor and the old Annotate view, I get the following when clicking on a line in the Annotate view. The problem is that the HTML editor is firing a structured selection which contains both the tag info and the actual text. The Annotate View was only expecting text selections; thus, the error.\n\nError\nTue May 23 12:15:01 EDT 2006\nProblems occurred when invoking code from plug-in: \"org.eclipse.wst.sse.ui\".\n\njava.lang.ClassCastException\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.listSelectionChanged(AnnotateView.java:259)\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged(AnnotateView.java:189)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$6.run(StructuredTextEditor.java:669)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged(StructuredTextEditor.java:667)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged(StructuredTextEditor.java:706)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged(StructuredTextEditor.java:648)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2321)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2273)\n\tat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2252)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:3411)\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2693)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1923)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:322)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:60)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:68)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged(StructuredTextEditor.java:667)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged(StructuredTextEditor.java:706)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged(StructuredTextEditor.java:648)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2321)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2273)\n\tat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2252)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:3411)\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2693)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1923)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d44951)\nFix\n\nCheck for CVSAnnotateBlock; if not CVSAnnotateBlock return",
    "Commited to HEAD, patched for 3.2.1",
    "Fix released to 3.2.1.",
    "This change has probably caused bug 150786. Please revise the fix such that it does not break that scenario.\n\nIf you don\u0027t want to cleanly separate the ISelectionChangedListeners for external (editor) and internal (AnnotateView) events, then there should be 2 checks in listSelectionChanged(..):\n\n1.) selection.size() \u003d\u003d 1\n2.) selection.getFirstElement() instanceof... (not \u0027selection instanceof\u0027)",
    "*** Bug 153100 has been marked as a duplicate of this bug. ***",
    "*** Bug 153462 has been marked as a duplicate of this bug. ***",
    "This exception still occurs with M20060830-0800. It looks like another fix (bug 150786) rebroke this case. The condition isn\u0027t quite right. It is:\n\n        if (selection.size() \u003d\u003d 1 \u0026\u0026 \n           !(selection.getFirstElement() instanceof CVSAnnotateBlock))\n        \treturn;\n\nbut should be \n\n        if (selection.size() !\u003d 1 ||\n           !(selection.getFirstElement() instanceof CVSAnnotateBlock))\n        \treturn;\n\nWe need to reverify bug 150786 when we fix this.",
    "Fix released t0 3.2.1 and 3.3.",
    "*** Bug 157893 has been marked as a duplicate of this bug. ***",
    "Also affects other WTP editors, i.e. Javascript \u0026 CSS"
  ],
  "commentCreationDates": [
    "2006-05-23T19:33:25+02:00",
    "2006-06-20T22:26:01+02:00",
    "2006-06-20T22:36:23+02:00",
    "2006-07-06T20:42:14+02:00",
    "2006-07-28T20:18:39+02:00",
    "2006-08-10T19:32:03+02:00",
    "2006-08-11T09:51:33+02:00",
    "2006-08-31T16:24:53+02:00",
    "2006-08-31T17:37:13+02:00",
    "2006-09-21T15:47:32+02:00",
    "2006-09-21T22:40:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.listSelectionChanged",
          "source": "AnnotateView.java:259"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged",
          "source": "AnnotateView.java:189"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$6.run",
          "source": "StructuredTextEditor.java:669"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged",
          "source": "StructuredTextEditor.java:667"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged",
          "source": "StructuredTextEditor.java:706"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged",
          "source": "StructuredTextEditor.java:648"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2321"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2273"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2252"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3411"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2693"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1923"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:322"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:60"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged",
          "source": "StructuredTextEditor.java:667"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged",
          "source": "StructuredTextEditor.java:706"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged",
          "source": "StructuredTextEditor.java:648"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2321"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2273"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2252"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3411"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2693"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1923"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "143270",
      "date": "2006-05-23T19:33:25+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "normal"
    }
  ],
  "groupId": "143270",
  "bugId": "143270",
  "date": "2006-05-23T19:33:25+02:00",
  "product": "Platform",
  "component": "CVS",
  "severity": "normal"
}