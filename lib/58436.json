{
  "comments": [
    "Platform OS X 10.3.3\nEclipse: 20040406\n\nWhen opening a java editor I get the stack below now and again:\n\njava.lang.NullPointerException\nat org.eclipse.jdt.core.dom.TypeBinding.getKey(TypeBinding.java:423)\nat org.eclipse.jdt.core.dom.MethodBinding.getKey(MethodBinding.java:158)\nat org.eclipse.jdt.internal.corext.dom.Bindings.equals(Bindings.java:68)\nat org.eclipse.jdt.internal.ui.search.OccurrencesFinder.match(OccurrencesFinder.java:279)\nat org.eclipse.jdt.internal.ui.search.OccurrencesFinder.visit(OccurrencesFinder.java:234)\nat org.eclipse.jdt.core.dom.ClassInstanceCreation.accept0(ClassInstanceCreation.java:326)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2575)\nat org.eclipse.jdt.core.dom.MethodInvocation.accept0(MethodInvocation.java:242)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2552)\nat org.eclipse.jdt.core.dom.VariableDeclarationFragment.accept0(VariableDeclarationFragment.java:\n198)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2575)\nat org.eclipse.jdt.core.dom.VariableDeclarationStatement.accept0(VariableDeclarationStatement.java:\n264)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2575)\nat org.eclipse.jdt.core.dom.Block.accept0(Block.java:133)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2552)\nat org.eclipse.jdt.core.dom.MethodDeclaration.accept0(MethodDeclaration.java:505)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2575)\nat org.eclipse.jdt.core.dom.TypeDeclaration.accept0(TypeDeclaration.java:480)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2575)\nat org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:291)\nat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2505)\nat org.eclipse.jdt.internal.ui.search.OccurrencesFinder.perform(OccurrencesFinder.java:92)\nat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.updateOccurrenceAnnotations(JavaEditor.java:3331)\nat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor$6.selectionChanged(JavaEditor.java:3354)\nat \norg.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateAS\nTandInform(SelectionListenerWithASTManager.java:128)\nat \norg.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$1.run(SelectionListenerWithAS\nTManager.java:101)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)",
    "might this be a consequence of concurrent access?",
    "\u003e might this be a consequence of concurrent access?\n\nnothing else had the file open so I don\u0027t think so.",
    "Could you please provide the file that you are opening and all dependant files?\nI\u0027d like a reproducable test case to investigate.",
    "Its not just one file - it occurs randomly with any java source file in any of my projects. Unfortunately, \nits not possible to give you the code that caused this particularly stack but if it occurs on something I \ncan give you, I will.\n\nChanning",
    "The bug comes from the fact that the scopes have been cleaned up when the key\nfor a local type is requested. Because no scope are available, it leads to a NPE.\nI suggest that keys for local types are computed immediately. This could be done\nin the AST converter when creating a local type node (anonymous or local class).\nIn general the scopes are not available anymore once the tree is built. It would\nuse too much memory to keep them around.",
    "I will try to simulate this in a test case.",
    "I cannot expose a test case that reproduces this issue. In the cases I tried, it\nappears that the key is already computed. So you have a specific code pattern\nthat requires a key to be computed later.\nIt would be good to get a test case. One of the class you opened with this\nproblem would make it. I know you cannot send me some of your classes, but I\nreally need to reproduce that specific problem.\nThanks.",
    "Close as REMIND.\nReopen once you have a test case.\nThanks.",
    "Closing as never reproduced in a long time"
  ],
  "commentCreationDates": [
    "2004-04-14T11:10:35+02:00",
    "2004-04-14T12:30:33+02:00",
    "2004-04-14T12:44:57+02:00",
    "2004-04-14T15:04:52+02:00",
    "2004-04-14T15:53:33+02:00",
    "2004-04-14T16:52:09+02:00",
    "2004-04-23T16:29:03+02:00",
    "2004-04-23T17:17:02+02:00",
    "2004-04-29T17:36:41+02:00",
    "2005-02-17T14:38:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.TypeBinding.getKey",
          "source": "TypeBinding.java:423"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodBinding.getKey",
          "source": "MethodBinding.java:158"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.dom.Bindings.equals",
          "source": "Bindings.java:68"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.search.OccurrencesFinder.match",
          "source": "OccurrencesFinder.java:279"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.search.OccurrencesFinder.visit",
          "source": "OccurrencesFinder.java:234"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ClassInstanceCreation.accept0",
          "source": "ClassInstanceCreation.java:326"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2575"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodInvocation.accept0",
          "source": "MethodInvocation.java:242"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:2552"
        },
        {
          "method": "org.eclipse.jdt.core.dom.VariableDeclarationFragment.accept0",
          "source": "VariableDeclarationFragment.java: 198"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2575"
        },
        {
          "method": "org.eclipse.jdt.core.dom.VariableDeclarationStatement.accept0",
          "source": "VariableDeclarationStatement.java: 264"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2575"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:133"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:2552"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodDeclaration.accept0",
          "source": "MethodDeclaration.java:505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2575"
        },
        {
          "method": "org.eclipse.jdt.core.dom.TypeDeclaration.accept0",
          "source": "TypeDeclaration.java:480"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2575"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnit.accept0",
          "source": "CompilationUnit.java:291"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2505"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.search.OccurrencesFinder.perform",
          "source": "OccurrencesFinder.java:92"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.updateOccurrenceAnnotations",
          "source": "JavaEditor.java:3331"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor$6.selectionChanged",
          "source": "JavaEditor.java:3354"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform",
          "source": "SelectionListenerWithASTManager.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$1.run",
          "source": "SelectionListenerWithAS TManager.java:101"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:62"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "58436",
      "date": "2004-04-14T11:10:35+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "58436",
  "bugId": "58436",
  "date": "2004-04-14T11:10:35+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}