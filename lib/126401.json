{
  "comments": [
    "I went to change the name of the aspect in my project. AJDC does not, as you know, support much in the way of refactoring. So I first edited the file to change the name of the aspect there. When I went to rename the file (using Rename.. from the menu attached to the file), I was told that AspectJ had crashed.\n\nHere is the stack trace:\n\njava.lang.NullPointerException\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.typeToRecord(CompilationUnitScope.java:710)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.recordTypeReference(CompilationUnitScope.java:632)\nat org.aspectj.ajdt.internal.compiler.lookup.InterTypeFieldBinding.canBeSeenBy(InterTypeFieldBinding.java:55)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.FieldBinding.getVisibleBinding(FieldBinding.java:326)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:814)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.MethodScope.findField(MethodScope.java:337)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.getField(Scope.java:1763)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.getOtherFieldBindings(QualifiedNameReference.java:720)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.resolveType(QualifiedNameReference.java:914)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.UnaryExpression.resolveType(UnaryExpression.java:210)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolveTypeExpecting(Expression.java:848)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:222)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:422)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:178)\nat org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:134)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:400)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1088)\nat org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:114)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1137)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:305)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:514)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:809)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:254)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:163)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nNullPointerException thrown: null",
    "I\u0027ve written a testcase which follows the steps you describe, however, am not seeing the NPE. Instead I\u0027m seeing a \"type A is needed by reweavable type C\" type message after editing the file to change the name of the aspect there. Would you be able to attach the aspect which you were wanting to rename?",
    "Unfortunately,  I\u0027ve still been unable to reproduce this bug :-(\n\nJames, are you able to provide more information? Have you been able to reproduce it? Are you able to attach the aspect you were editing when you saw the npe?\n\nLooking at this in more detail, it looks like possibly the declaringClass is set to null when the InterTypeFieldBinding is created which means that world.makeTypeBinding(withinType) returned null. This kind of makes sense since the name of the aspect has changed so if we thought that withinType was the original type which no longer exists then this would possibly return null. \n\nIts hard to go further with this until I can reproduce it.",
    "No response - closing as UTR.\nstalebug"
  ],
  "commentCreationDates": [
    "2006-02-03T19:59:34+01:00",
    "2006-02-10T10:40:35+01:00",
    "2006-03-15T16:46:04+01:00",
    "2006-05-10T17:58:07+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.typeToRecord",
          "source": "CompilationUnitScope.java:710"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.recordTypeReference",
          "source": "CompilationUnitScope.java:632"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.InterTypeFieldBinding.canBeSeenBy",
          "source": "InterTypeFieldBinding.java:55"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.FieldBinding.getVisibleBinding",
          "source": "FieldBinding.java:326"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.findField",
          "source": "Scope.java:814"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.MethodScope.findField",
          "source": "MethodScope.java:337"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.getField",
          "source": "Scope.java:1763"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.getOtherFieldBindings",
          "source": "QualifiedNameReference.java:720"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.resolveType",
          "source": "QualifiedNameReference.java:914"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.UnaryExpression.resolveType",
          "source": "UnaryExpression.java:210"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolveTypeExpecting",
          "source": "Expression.java:848"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve",
          "source": "IfStatement.java:222"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements",
          "source": "AbstractMethodDeclaration.java:422"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements",
          "source": "MethodDeclaration.java:178"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements",
          "source": "AdviceDeclaration.java:134"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:400"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1088"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve",
          "source": "AspectDeclaration.java:114"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1137"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:305"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:514"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:809"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:254"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:163"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:117"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "126401",
      "date": "2006-02-03T19:59:34+01:00",
      "product": "AspectJ",
      "component": "IDE",
      "severity": "normal"
    }
  ],
  "groupId": "126401",
  "bugId": "126401",
  "date": "2006-02-03T19:59:34+01:00",
  "product": "AspectJ",
  "component": "IDE",
  "severity": "normal"
}