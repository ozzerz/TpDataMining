{
  "comments": [
    "N20030915\n\nclass A{\n \tnative m();\n}\n\n- select \"m\"\n- Refactor \u003e Rename..., to \"k\"\n-\u003e NPE in PatternLocator.matchesTypeReference() is logged.\nThis worked with the last I-build, even though the method has no return type.\n\nThe same NPE is thrown when searching for method declaration \"m() int\" in the\nsearch dialog.\n\n\n!ENTRY org.eclipse.jdt.ui 4 10001 Sep 15, 2003 12:14:17.843\n!MESSAGE Internal Error\n!STACK 0\njava.lang.reflect.InvocationTargetException\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:283)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:271)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.internalCheckCondition(RefactoringWizard.java:430)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.checkInput(RefactoringWizard.java:415)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.UserInputWizardPage.performFinish(UserInputWizardPage.java:111)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish(RefactoringWizard.java:472)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.okPressed(RefactoringWizardDialog2.java:395)\n\tat org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:256)\n\tat org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:423)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:847)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2187)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1877)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:583)\n\tat org.eclipse.jface.window.Window.open(Window.java:563)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:56)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:97)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate(RenameUserInterfaceStarter.java:111)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.reorg.RenameMethodUserInterfaceStarter.activate(RenameMethodUserInterfaceStarter.java:62)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.run(UserInterfaceStarter.java:52)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.reorg.RenameRefactoringAction.run(RenameRefactoringAction.java:73)\n\tat org.eclipse.jdt.ui.refactoring.RenameSupport.openDialog(RenameSupport.java:93)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:145)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:108)\n\tat org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:127)\n\tat\norg.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:196)\n\tat\norg.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:172)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat org.eclipse.ui.internal.commands.ActionHandler.execute(ActionHandler.java:44)\n\tat org.eclipse.ui.internal.Workbench.press(Workbench.java:454)\n\tat org.eclipse.ui.internal.Workbench$2.handleEvent(Workbench.java:212)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:646)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:846)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:871)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:856)\n\tat org.eclipse.swt.widgets.Control.traverse(Control.java:2658)\n\tat org.eclipse.swt.widgets.Control.translateMnemonic(Control.java:2505)\n\tat org.eclipse.swt.widgets.Composite.translateMnemonic(Composite.java:552)\n\tat org.eclipse.swt.widgets.Control.translateMnemonic(Control.java:2518)\n\tat org.eclipse.swt.widgets.Display.translateMnemonic(Display.java:2599)\n\tat org.eclipse.swt.widgets.Display.filterMessage(Display.java:660)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1873)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2037)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:2020)\n\tat\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:858)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:295)\n\tat org.eclipse.core.launcher.Main.run(Main.java:751)\n\tat org.eclipse.core.launcher.Main.main(Main.java:587)\nCaused by: java.lang.NullPointerException\n\tat\norg.eclipse.jdt.internal.core.search.matching.PatternLocator.matchesTypeReference(PatternLocator.java:134)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MethodLocator.match(MethodLocator.java:72)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocatorParser$ClassButNoMethodDeclarationVisitor.visit(MatchLocatorParser.java:74)\n\tat\norg.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:144)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.parseBodies(MatchLocatorParser.java:213)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.parseBodies(MatchLocatorParser.java:188)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.getMethodBodies(MatchLocator.java:488)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.process(MatchLocator.java:822)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:565)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:602)\n\tat\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:711)\n\tat org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:515)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.internalSearch(RefactoringSearchEngine.java:151)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.search(RefactoringSearchEngine.java:114)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.search(RefactoringSearchEngine.java:106)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.rename.RenameMethodProcessor.getOccurrences(RenameMethodProcessor.java:260)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.rename.RenameMethodProcessor.checkInput(RenameMethodProcessor.java:195)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.rename.RenameVirtualMethodProcessor.checkInput(RenameVirtualMethodProcessor.java:90)\n\tat\norg.eclipse.jdt.internal.corext.refactoring.rename.RenameRefactoring.checkInput(RenameRefactoring.java:160)\n\tat\norg.eclipse.jdt.internal.ui.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:65)\n\tat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:101)",
    "Reproduced. Fixed in latest",
    "Added protection in MethodLocator.match(MethodDeclaration, MatchingNodeSet) and \nadded regression test JavaSearchTest.testMethodDeclarationNoReturnType()",
    "*** Bug 43086 has been marked as a duplicate of this bug. ***",
    "Verified."
  ],
  "commentCreationDates": [
    "2003-09-15T12:26:01+02:00",
    "2003-09-15T13:26:57+02:00",
    "2003-09-15T13:42:55+02:00",
    "2003-09-15T15:27:19+02:00",
    "2003-10-08T13:48:16+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:283"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.run",
          "source": "RefactoringWizardDialog2.java:271"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.internalCheckCondition",
          "source": "RefactoringWizard.java:430"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.checkInput",
          "source": "RefactoringWizard.java:415"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.UserInputWizardPage.performFinish",
          "source": "UserInputWizardPage.java:111"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish",
          "source": "RefactoringWizard.java:472"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.okPressed",
          "source": "RefactoringWizardDialog2.java:395"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.buttonPressed",
          "source": "Dialog.java:256"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:423"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:847"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2187"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1877"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:583"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:563"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:56"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate",
          "source": "UserInterfaceStarter.java:97"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate",
          "source": "RenameUserInterfaceStarter.java:111"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.reorg.RenameMethodUserInterfaceStarter.activate",
          "source": "RenameMethodUserInterfaceStarter.java:62"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.run",
          "source": "UserInterfaceStarter.java:52"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.reorg.RenameRefactoringAction.run",
          "source": "RenameRefactoringAction.java:73"
        },
        {
          "method": "org.eclipse.jdt.ui.refactoring.RenameSupport.openDialog",
          "source": "RenameSupport.java:93"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run",
          "source": "RenameJavaElementAction.java:145"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run",
          "source": "RenameJavaElementAction.java:108"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.RenameAction.run",
          "source": "RenameAction.java:127"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:196"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:172"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.ui.internal.commands.ActionHandler.execute",
          "source": "ActionHandler.java:44"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.press",
          "source": "Workbench.java:454"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$2.handleEvent",
          "source": "Workbench.java:212"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:646"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:846"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:871"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:856"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.traverse",
          "source": "Control.java:2658"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.translateMnemonic",
          "source": "Control.java:2505"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.translateMnemonic",
          "source": "Composite.java:552"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.translateMnemonic",
          "source": "Control.java:2518"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.translateMnemonic",
          "source": "Display.java:2599"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterMessage",
          "source": "Display.java:660"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1873"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2037"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:2020"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:295"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:751"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:587"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchesTypeReference",
            "source": "PatternLocator.java:134"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MethodLocator.match",
            "source": "MethodLocator.java:72"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocatorParser$ClassButNoMethodDeclarationVisitor.visit",
            "source": "MatchLocatorParser.java:74"
          },
          {
            "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse",
            "source": "MethodDeclaration.java:144"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.parseBodies",
            "source": "MatchLocatorParser.java:213"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocatorParser.parseBodies",
            "source": "MatchLocatorParser.java:188"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.getMethodBodies",
            "source": "MatchLocator.java:488"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.process",
            "source": "MatchLocator.java:822"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
            "source": "MatchLocator.java:565"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
            "source": "MatchLocator.java:602"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
            "source": "MatchLocator.java:711"
          },
          {
            "method": "org.eclipse.jdt.core.search.SearchEngine.search",
            "source": "SearchEngine.java:515"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.internalSearch",
            "source": "RefactoringSearchEngine.java:151"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.search",
            "source": "RefactoringSearchEngine.java:114"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.RefactoringSearchEngine.search",
            "source": "RefactoringSearchEngine.java:106"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.rename.RenameMethodProcessor.getOccurrences",
            "source": "RenameMethodProcessor.java:260"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.rename.RenameMethodProcessor.checkInput",
            "source": "RenameMethodProcessor.java:195"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.rename.RenameVirtualMethodProcessor.checkInput",
            "source": "RenameVirtualMethodProcessor.java:90"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.refactoring.rename.RenameRefactoring.checkInput",
            "source": "RenameRefactoring.java:160"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.refactoring.CheckConditionsOperation.run",
            "source": "CheckConditionsOperation.java:65"
          },
          {
            "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
            "source": "ModalContext.java:101"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "43080",
      "date": "2003-09-15T12:26:01+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "critical"
    }
  ],
  "groupId": "43080",
  "bugId": "43080",
  "date": "2003-09-15T12:26:01+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "critical"
}