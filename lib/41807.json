{
  "comments": [
    "Eclipse I200308201005\n\n1) Create a new Java project.\n2) Create a file in the project called abc.txt - leave the editor for this \nfile open.\n3) Edit abc.txt outside of eclipse and save the changes.\n4) Select the file in the Package Explorer and refresh from the context menu.\n\nThe editor does not show the changes made to the file.  Close the editor and \nreopen it and you will see the changes.\n\nExpect to see the changes immediately.  This works on Windows.\n\nYou can also see the failure if you use a file in CVS and replace with latest \nfrom Head instead of refresh.  Also happens with Java files.",
    "Running with the Core Tools, I can see the resource change in the Delta Spy. It\nseems that the editor\u0027s resource change listener is facing a problem while\nhandling the resource change event. Investigating...",
    "The following exception is preventing the resource change listener provided by\norg.eclipse.core.filebuffers to reflect the changes to the editor.\n\norg.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:2369)\n\tat org.eclipse.swt.SWT.error(SWT.java:2297)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:388)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:318)\n\tat org.eclipse.swt.widgets.Scrollable.getVerticalBar(Scrollable.java:180)\n\tat org.eclipse.swt.custom.StyledText.reset(StyledText.java:6662)\n\tat org.eclipse.swt.custom.StyledText.handleTextSet(StyledText.java:5428)\n\tat org.eclipse.swt.custom.StyledText$6.textSet(StyledText.java:4919)\n\tat org.eclipse.jface.text.DocumentAdapter.fireTextSet(DocumentAdapter.java:281)\n\tat org.eclipse.jface.text.DocumentAdapter.documentChanged(DocumentAdapter.java:204)\n\tat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2(AbstractDocument.java:635)\n\tat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged(AbstractDocument.java:610)\n\tat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged(AbstractDocument.java:595)\n\tat\norg.eclipse.jface.text.AbstractDocument.fireDocumentChanged(AbstractDocument.java:670)\n\tat org.eclipse.jface.text.AbstractDocument.set(AbstractDocument.java:975)\n\tat\norg.eclipse.core.internal.filebuffers.TextFileBuffer.handleFileContentChanged(TextFileBuffer.java:288)\n\tat org.eclipse.core.internal.filebuffers.FileBuffer$1.execute(FileBuffer.java:130)\n\tat\norg.eclipse.core.internal.filebuffers.FileBuffer$SafeFileChange.run(FileBuffer.java:64)\n\tat\norg.eclipse.core.internal.filebuffers.FileBuffer$FileSynchronizer.update(FileBuffer.java:171)\n\tat\norg.eclipse.core.internal.filebuffers.FileBuffer$FileSynchronizer.visit(FileBuffer.java:157)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:71)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:52)\n\tat\norg.eclipse.core.internal.filebuffers.FileBuffer$FileSynchronizer.resourceChanged(FileBuffer.java:108)\n\tat\norg.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:156)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1016)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:420)\n\tat\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:150)\n\tat\norg.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:63)\n\tat\norg.eclipse.core.internal.resources.Workspace.broadcastChanges(Workspace.java:156)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:875)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1581)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1591)\n\tat\norg.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:85)\n\tat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:101)\n\nMoving to Platform/Text.",
    "BTW, since the exception is not being logged, I was only able to find it by\nputting a breakpoint in the following code in\norg.eclipse.core.internal.filebuffers.FileBuffer.SafeFileChange:\n\npublic void run() {\n  if (isDisposed()) {\n    fManager.fireStateChangeFailed(FileBuffer.this);\n    return;\n  }\n\t\t\t\n  try {\n    execute();\n  } catch (Exception x) {  // \u003c\u003c SWTException caught here\n    fManager.fireStateChangeFailed(FileBuffer.this);\n  }\n}\n",
    "Tom,\nplease investigate. This looks like an M3 candidate.\n",
    "Changing OS to All as this happens on Windows 2000 as well, although you won\u0027t\nususally notice since the auto-refresh runs inside the UI thread. \n\nSteps on Windows:\n- As described above, \n- after 3): make sure to answer \"No\" when asked to refresh the file.\n- proceed with manual refresh (4).\n\nThe problem lies in DocumentAdapter, which bridges between the text (IDocument)\nworld which is UI-independent, and the SWT world of StyledText. It is not\nthreadsafe, although changes from IDocument make to guarantee about which thread\nupdates may occur from. \n\nThis may be something many other IDocumentListener Implementations may not be\naware of.",
    "*** Bug 41846 has been marked as a duplicate of this bug. ***",
    "I released a patch that does the job on this PR and bug 41846. The problem of\nthe editor infrastructure not being aware of document changes outside the UI\nthread remains though, and needs to be further investigated.",
    "This problem has been fixed.\nAvailable in builds \u003e 20030822\n"
  ],
  "commentCreationDates": [
    "2003-08-21T17:05:21+02:00",
    "2003-08-21T21:54:20+02:00",
    "2003-08-21T22:04:46+02:00",
    "2003-08-21T23:06:09+02:00",
    "2003-08-22T08:39:19+02:00",
    "2003-08-22T10:46:56+02:00",
    "2003-08-22T14:18:40+02:00",
    "2003-08-22T17:54:43+02:00",
    "2003-08-25T14:32:53+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2369"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2297"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:388"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:318"
        },
        {
          "method": "org.eclipse.swt.widgets.Scrollable.getVerticalBar",
          "source": "Scrollable.java:180"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.reset",
          "source": "StyledText.java:6662"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleTextSet",
          "source": "StyledText.java:5428"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$6.textSet",
          "source": "StyledText.java:4919"
        },
        {
          "method": "org.eclipse.jface.text.DocumentAdapter.fireTextSet",
          "source": "DocumentAdapter.java:281"
        },
        {
          "method": "org.eclipse.jface.text.DocumentAdapter.documentChanged",
          "source": "DocumentAdapter.java:204"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2",
          "source": "AbstractDocument.java:635"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:610"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:595"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentChanged",
          "source": "AbstractDocument.java:670"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.set",
          "source": "AbstractDocument.java:975"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBuffer.handleFileContentChanged",
          "source": "TextFileBuffer.java:288"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.FileBuffer$1.execute",
          "source": "FileBuffer.java:130"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.FileBuffer$SafeFileChange.run",
          "source": "FileBuffer.java:64"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.FileBuffer$FileSynchronizer.update",
          "source": "FileBuffer.java:171"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.FileBuffer$FileSynchronizer.visit",
          "source": "FileBuffer.java:157"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:71"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:52"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.FileBuffer$FileSynchronizer.resourceChanged",
          "source": "FileBuffer.java:108"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$1.run",
          "source": "NotificationManager.java:156"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1016"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:420"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:150"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:63"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastChanges",
          "source": "Workspace.java:156"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:875"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1581"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1591"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:85"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "41807",
      "date": "2003-08-21T22:04:46+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "major"
    }
  ],
  "groupId": "41807",
  "bugId": "41807",
  "date": "2003-08-21T17:05:21+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "major"
}