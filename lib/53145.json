{
  "comments": [
    "I have a view that hosts all the SWT Snippets (via an extension point). The \nbrowser snippets 128, 136, and 138 fail. Failure below shows and SWTError.\n\njava.lang.reflect.InvocationTargetException\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat com.ibm.jdg2e.launch.SnippetLaunch$2.run(SnippetLaunch.java:81)\nCaused by: org.eclipse.swt.SWTError: No more handles\n\tat org.eclipse.swt.SWT.error(SWT.java:2618)\n\tat org.eclipse.swt.SWT.error(SWT.java:2522)\n\tat org.eclipse.swt.browser.Browser.\u003cinit\u003e(Browser.java:117)\n\tat org.eclipse.swt.examples.snippets.Snippet128.main\n(Snippet128.java:55)\n\t... 5 more\n\nThe snippet runs fine when executed exactly as the instructed on the Eclipse \nSnippets page(as a java app). In my case I run it it is own thread so that it \ncan host its own Shell and Display and run as an SWT application under \neclipse. This allows the Snippet to run with no code changes (I just give it a \nunique class name and a zero argument instructor). As a further test I created \na separate launcher class as an SWT application (code below). The browser \nsnippet still fails on the second execution (works the first time). Failure is \nimmediate in the view. I showed this to Eclipse developers at eclipseCon and \nthey recommended that I open a bug.\n\nLauncher class:\n\npackage com.ibm.jdg2e.launch;\n/*\n * Created on Jan 1, 2004\n *\n * To change the template for this generated file go to\n * Window - Preferences - Java - Code Generation - Code and Comments\n */\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport org.eclipse.jface.dialogs.MessageDialog;\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.layout.GridData;\nimport org.eclipse.swt.layout.GridLayout;\nimport org.eclipse.swt.widgets.Button;\nimport org.eclipse.swt.widgets.Composite;\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Event;\nimport org.eclipse.swt.widgets.Label;\nimport org.eclipse.swt.widgets.Listener;\nimport org.eclipse.swt.widgets.Shell;\nimport org.eclipse.swt.widgets.Text;\n\n\n/**\n * @author danjou\n *\n * To change the template for this generated type comment go to\n * Window - Preferences - Java - Code Generation - Code and Comments\n */\npublic class SnippetLaunch {\n\tprivate String className;\n\t\t\n\tpublic static void main(String[] args) {\n\t\tSnippetLaunch launch \u003d new SnippetLaunch();\n\t\tlaunch.open();\n\n\t}\n\tpublic void open() {\n\t\tDisplay display \u003d new Display ();\n\t\tfinal Shell shell \u003d new Shell (display);\n\t\tshell.setLayout(new GridLayout());\n\t\tshell.setSize(250,150);\n\t\tshell.setText(\"Snippet Launcher\");\n\t\tfinal Composite c \u003d new Composite(shell, SWT.NONE);\n\t\tGridLayout layout \u003d new GridLayout();\n\t\tlayout.numColumns \u003d 1;\n\t\tc.setLayout(layout);\n\t\tLabel lbl1 \u003d new Label(c,SWT.NONE);\n\t\tlbl1.setText(\"Enter name of Snippet class:\");\n\t\tfinal Text t1 \u003d new Text(c,SWT.BORDER);\n\t\tt1.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_FILL));\n\t\tt1.setText(\"Snippet\");\t\t\n\t\tButton b \u003d new Button(shell, SWT.PUSH);\n\t\tb.setText(\"Run\");\n\t\tb.addListener(SWT.Selection, new Listener() {\n\t\t\tpublic void handleEvent(Event e) {\n\t\t\t\tclassName\u003dt1.getText();\n\t\t\t\tlaunch();\n\t\t\t}\n\t\t});\n\t\tshell.open ();\n\t\twhile (!shell.isDisposed ()) {\n\t\t\tif (!display.readAndDispatch ()) display.sleep ();\n\t\t}\n\t\tdisplay.dispose ();\n\t}\n\tpublic void showError(String msg){\n\t\tMessageDialog.openError(\n\t\t\t\tnull,\n\t\t\t\t\"Snippet Launcher\", msg);\n\t\t\n\t}\n\tpublic void launch(){\n\t\ttry {\n\t\t\tClass snippet \u003d Class.forName\n(\"org.eclipse.swt.examples.snippets.\" + className);\n\t\t\ttry {\n\t\t\t\tfinal Method main \u003d snippet.getMethod(\"main\", \nnew Class[] { String[].class });\n\t\t\t\tThread thread \u003d new Thread () {\n\t\t\t\t\tpublic void run () {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tmain.invoke(null,new \nObject[]{new String[]{}});\n\t\t\t\t\t\t} catch \n(IllegalArgumentException e2) {\n\t\t\t\t\t\t\t// TODO Auto-generated \ncatch block\n\t\t\t\t\t\t\te2.printStackTrace();\n\t\t\t\t\t\t} catch \n(IllegalAccessException e2) {\n\t\t\t\t\t\t\t// TODO Auto-generated \ncatch block\n\t\t\t\t\t\t\te2.printStackTrace();\n\t\t\t\t\t\t} catch \n(InvocationTargetException e2) {\n\t\t\t\t\t\t\t// TODO Auto-generated \ncatch block\n\t\t\t\t\t\t\te2.printStackTrace();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthread.start ();\n\t\t\t} catch (SecurityException e1) {\n\t\t\t\t// TODO Auto-generated catch block\n\t\t\t\te1.printStackTrace();\n\t\t\t} catch (NoSuchMethodException e1) {\n\t\t\t\tshowError(\"Class main method not found.\");\n\t\t\t}\n\t\t\t\n\t\t} catch (ClassNotFoundException e) {\n\t\t\tshowError(\"Class not found.\");\n\t\t\t\t\t\n\t\t} \n\t}\n}\n\n\nHere is the relevant code in the view that cases the same execption.\n\nprotected void executeSnippet2(ISnippetDescriptor selection2) {\n\t\tObject o \u003d null;\n\t\tClass snippet \u003d null;\n\t\tString className \u003d selection2.getClassName();\n\t\ttry {\n\t\t\to \u003d selection2.getConfigurationElement\n().createExecutableExtension(\n\t\t\t\t\t\"class\");\n\t\t} catch (CoreException e3) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te3.printStackTrace();\n\t\t\treturn;\n\t\t}\n\t\tsnippet \u003d o.getClass();\n\t\ttry {\n\t\t\tfinal Method main \u003d snippet.getMethod(\"main\",\n\t\t\t\t\tnew Class[]{String[].class});\n\t\t\tThread thread \u003d new Thread() {\n\t\t\t\tpublic void run() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tmain.invoke(null, new Object[]\n{new String[]{}});\n\t\t\t\t\t} catch (IllegalArgumentException e2) {\n\t\t\t\t\t\t// TODO Auto-generated catch \nblock\n\t\t\t\t\t\te2.printStackTrace();\n\t\t\t\t\t} catch (IllegalAccessException e2) {\n\t\t\t\t\t\t// TODO Auto-generated catch \nblock\n\t\t\t\t\t\te2.printStackTrace();\n\t\t\t\t\t} catch (InvocationTargetException e2) \n{\n\t\t\t\t\t\t// TODO Auto-generated catch \nblock\n\t\t\t\t\t\te2.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthread.start();\n\t\t} catch (NoSuchMethodException e1) {\n\t\t\tshowError(\"Class main method not found.\");\n\t\t}\n\t}",
    "This technique works fine nearly all of the 120+ SWT snippets. The drag and \ndrop snippets have some difficulties and a separate bug will probably be \nopened for them (pending some further investigation)",
    "CC to investigate.  The No More Handles error seems like a herring rouge.\n",
    "I tried the Browser snippet (snippet 128) on SuSE Linux 8.2 as described on the\nSnippets page (as a java application) and also got the SWTError:\n\nException in thread \"main\" org.eclipse.swt.SWTError: No more handles\n\tat org.eclipse.swt.SWT.error(SWT.java:2634)\n\tat org.eclipse.swt.SWT.error(SWT.java:2538)\n\tat org.eclipse.swt.browser.Browser.\u003cinit\u003e(Browser.java:116)\n\tat test.Main.main(Main.java:52)\n\nI came across this originally because I was testing the new org.eclipse.ui.intro\ncode in Linux - in the intro code, when the browser widget is created an\n\"org.eclipse.swt.SWTError: No more handles\" error also occurs.  I tried the\nsnippet sample to help determine if this was a general problem, or something\nspecific to the intro code.",
    "Jim: running the Browser on a second Display is not supported. More \nspecifically, OLE on Windows currently only works from a single display. This \nexplains the \u0027no more handles\u0027 you are receiving (on Windows, the Browser is \nOLE based). On other platforms such as GTK and Mac, multiple displays are not \nsupported and they are best avoided. \n\nKim: the SWT FAQ details the requirements to run the Browser widget. In \nparticular, try:\nhttp://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt-\nhome/faq.html#mozillanonredhat\nSuse 9 comes up with a supported version of Mozilla. Suse 8.2 requires a \nparticular version to be installed as detailed on this link. Let me know how \nthis goes - feedback will help us improve and update the FAQ. Thanks!\n"
  ],
  "commentCreationDates": [
    "2004-02-26T06:04:36+01:00",
    "2004-02-26T06:12:50+01:00",
    "2004-02-26T15:00:37+01:00",
    "2004-03-09T15:37:31+01:00",
    "2004-03-09T16:43:35+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "com.ibm.jdg2e.launch.SnippetLaunch$2.run",
          "source": "SnippetLaunch.java:81"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.swt.SWTError",
        "message": "No more handles",
        "elements": [
          {
            "method": "org.eclipse.swt.SWT.error",
            "source": "SWT.java:2618"
          },
          {
            "method": "org.eclipse.swt.SWT.error",
            "source": "SWT.java:2522"
          },
          {
            "method": "org.eclipse.swt.browser.Browser.\u003cinit\u003e",
            "source": "Browser.java:117"
          },
          {
            "method": "org.eclipse.swt.examples.snippets.Snippet128.main",
            "source": "Snippet128.java:55"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "53145",
      "date": "2004-02-26T06:04:36+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTError",
      "message": "No more handles",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2634"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2538"
        },
        {
          "method": "org.eclipse.swt.browser.Browser.\u003cinit\u003e",
          "source": "Browser.java:116"
        },
        {
          "method": "test.Main.main",
          "source": "Main.java:52"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "53145",
      "date": "2004-03-09T15:37:31+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "53145",
  "bugId": "53145",
  "date": "2004-02-26T06:04:36+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}