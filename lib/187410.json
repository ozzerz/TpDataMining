{
  "comments": [
    "First, configure your eclipse as in bug 187406. I\u0027ve tested this with and without GMF installed -- the latest failure was reproduced using a simpler set of installed features:\n\n* EMF SDK, OCL runtime, QTV runtime, UML2 runtime\n  -- or --\n* EMF runtime, Mylar task list, Mylar Bugzilla Connector\n\nThen:\n\n1. Help \u003e Software Updates \u003e Manage Configuration\n2. Expand install location where features are installed (I put everything in the base eclipse install folder)\n3. select Eclipse Project\n4. click \u0027Scan for Updates\u0027. choose a mirror (such as IBM RTP (because it\u0027s slow)): \"No updates for the currently installed feature(s) found, try again later.\" [OK] \n\n(So far, so good.)\n\n5. Click OK on the \u0027No updates...\u0027 dialog. Choose another feature, like EMF. This time, click \u0027Scan for Updates\u0027, choose a mirror, and hit the cancel button in the bottom-right corner of the wizard before it has a chance to report \u0027no updates available\u0027. You\u0027ll get the above dialog again. \n\n6. Choose yet another feature, and hit \u0027Scan for Updates\u0027 -- now, you get a NPE: \"An internal error occurred during: \"Update Manager\". java.lang.NullPointerException\"\n\nRestarting the Help \u003e Software Updates \u003e Manage Configuration dialog makes this problem go away, so I\u0027m marking this minor. I\u0027d mark it \"Usability police fine you $50 for bad behavior when cancelling an update scan\" but that\u0027s not an option. ;-)\n\nHere\u0027s the console log, FWIW:\n\n!SESSION 2007-05-16 18:18:57.927 -----------------------------------------------\neclipse.buildId\u003dI20070503-1400\njava.fullversion\u003dJ2RE 1.5.0 IBM J9 2.3 Linux x86-32 j9vmxi3223-20060504 (JIT enabled)\nJ9VM - 20060501_06428_lHdSMR\nJIT  - 20060428_1800_r8\nGC   - 20060501_AA\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nFramework arguments:  -startup /home/nickb/eclipse/m7clean/eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070502.jar\nCommand-line arguments:  -os linux -ws gtk -arch x86 -startup /home/nickb/eclipse/m7clean/eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070502.jar -data /tmp/workspace-clean -consolelog\n\n!ENTRY org.eclipse.core.jobs 4 2 2007-05-16 18:24:39.090\n!MESSAGE An internal error occurred during: \"Update Manager\".\n!STACK 0\njava.lang.NullPointerException\n        at java.io.FilterInputStream.close(FilterInputStream.java:182)\n        at org.eclipse.update.internal.core.connection.HttpResponse$MonitoringInputStream.close(HttpResponse.java:53)\n        at org.eclipse.update.internal.core.SiteURLFactory.createSite(SiteURLFactory.java:97)\n        at org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:334)\n        at org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:326)\n        at org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:291)\n        at org.eclipse.update.internal.core.InternalSiteManager.attemptCreateSite(InternalSiteManager.java:222)\n        at org.eclipse.update.internal.core.InternalSiteManager.getSite(InternalSiteManager.java:162)\n        at org.eclipse.update.core.SiteManager.getSite(SiteManager.java:80)\n        at org.eclipse.update.search.UpdateSearchRequest.searchOneSite(UpdateSearchRequest.java:452)\n        at org.eclipse.update.search.UpdateSearchRequest.performSearch(UpdateSearchRequest.java:299)\n        at org.eclipse.update.ui.UpdateJob.runUpdates(UpdateJob.java:207)\n        at org.eclipse.update.ui.UpdateJob.run(UpdateJob.java:168)\n        at org.eclipse.update.internal.ui.views.FindUpdatesAction$TrackedUpdateJob.run(FindUpdatesAction.java:93)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "I have seen this before. I can easily check for the input stream being null before calling \u0027super.close()\u0027.",
    "I added an NULL check while fixing bug 132450. Please retry with the next valid 3.3RC1 build.",
    "Verification/testing prevented by bug 188375.",
    "(In reply to comment #2)\n\u003e I added an NULL check while fixing bug 132450. Please retry with the next valid\n\u003e 3.3RC1 build.\n\nScenario reported has been fixed. However, I found another way to throw an NPE. (Sorry.)\n\nAs in the steps above, do 1 - 4. Then:\n\n5. Click OK on the \u0027No updates...\u0027 dialog. Choose another feature.\nThis time, click \u0027Scan for Updates\u0027, and hit the cancel button in the bottom-right corner of the wizard BEFORE it has a chance to present the dialog for choosing a mirror. You\u0027ll get this:\n\n!SESSION 2007-05-22 13:14:29.560 -----------------------------------------------\neclipse.buildId\u003dI20070517-1700\njava.fullversion\u003dJ2RE 1.5.0 IBM J9 2.3 Linux x86-32 j9vmxi3223-20060504 (JIT enabled)\nJ9VM - 20060501_06428_lHdSMR\nJIT  - 20060428_1800_r8\nGC   - 20060501_AA\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nFramework arguments:  -startup /home/nickb/eclipse/rc1clean/eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070516.jar\nCommand-line arguments:  -os linux -ws gtk -arch x86 -startup /home/nickb/eclipse/rc1clean/eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070516.jar -data /tmp/workspace-clean-rc1 -consolelog\n\n!ENTRY org.eclipse.core.jobs 4 2 2007-05-22 13:16:30.792\n!MESSAGE An internal error occurred during: \"Update Manager\".\n!STACK 0\njava.lang.NullPointerException\n        at java.io.FilterInputStream.read(FilterInputStream.java:89)\n        at org.eclipse.update.internal.core.connection.HttpResponse$MonitoringInputStream.read(HttpResponse.java:64)\n        at org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read(Unknown Source)\n        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)\n        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)\n        at org.eclipse.update.core.model.DefaultSiteParser.parse(DefaultSiteParser.java:152)\n        at org.eclipse.update.core.model.SiteModelFactory.parseSite(SiteModelFactory.java:81)\n        at org.eclipse.update.internal.core.SiteURLFactory.createSite(SiteURLFactory.java:80)\n        at org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:334)\n        at org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:326)\n        at org.eclipse.update.internal.core.InternalSiteManager.createSite(InternalSiteManager.java:291)\n        at org.eclipse.update.internal.core.InternalSiteManager.attemptCreateSite(InternalSiteManager.java:222)\n        at org.eclipse.update.internal.core.InternalSiteManager.getSite(InternalSiteManager.java:162)\n        at org.eclipse.update.core.SiteManager.getSite(SiteManager.java:80)\n        at org.eclipse.update.search.UpdateSearchRequest.searchOneSite(UpdateSearchRequest.java:452)\n        at org.eclipse.update.search.UpdateSearchRequest.searchOneSite(UpdateSearchRequest.java:481)\n        at org.eclipse.update.search.UpdateSearchRequest.performSearch(UpdateSearchRequest.java:299)\n        at org.eclipse.update.ui.UpdateJob.runUpdates(UpdateJob.java:207)\n        at org.eclipse.update.ui.UpdateJob.run(UpdateJob.java:168)\n        at org.eclipse.update.internal.ui.views.FindUpdatesAction$TrackedUpdateJob.run(FindUpdatesAction.java:93)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\n",
    "Sigh... We need more checks for in!\u003dnull.",
    "Created an attachment (id\u003d68232)\nAdded more checks for in!\u003dnull - should do it.\n\n",
    "Dejan, I get conflicts when I try to apply this patch to HEAD.",
    "Also note that you need 2 people to review the patch for RC2."
  ],
  "commentCreationDates": [
    "2007-05-17T00:29:27+02:00",
    "2007-05-17T00:45:00+02:00",
    "2007-05-17T16:36:24+02:00",
    "2007-05-22T18:36:51+02:00",
    "2007-05-22T19:22:35+02:00",
    "2007-05-23T00:46:39+02:00",
    "2007-05-23T00:48:20+02:00",
    "2007-05-23T14:29:26+02:00",
    "2007-05-24T15:36:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.io.FilterInputStream.close",
          "source": "FilterInputStream.java:182"
        },
        {
          "method": "org.eclipse.update.internal.core.connection.HttpResponse$MonitoringInputStream.close",
          "source": "HttpResponse.java:53"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteURLFactory.createSite",
          "source": "SiteURLFactory.java:97"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:334"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:326"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:291"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.attemptCreateSite",
          "source": "InternalSiteManager.java:222"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.getSite",
          "source": "InternalSiteManager.java:162"
        },
        {
          "method": "org.eclipse.update.core.SiteManager.getSite",
          "source": "SiteManager.java:80"
        },
        {
          "method": "org.eclipse.update.search.UpdateSearchRequest.searchOneSite",
          "source": "UpdateSearchRequest.java:452"
        },
        {
          "method": "org.eclipse.update.search.UpdateSearchRequest.performSearch",
          "source": "UpdateSearchRequest.java:299"
        },
        {
          "method": "org.eclipse.update.ui.UpdateJob.runUpdates",
          "source": "UpdateJob.java:207"
        },
        {
          "method": "org.eclipse.update.ui.UpdateJob.run",
          "source": "UpdateJob.java:168"
        },
        {
          "method": "org.eclipse.update.internal.ui.views.FindUpdatesAction$TrackedUpdateJob.run",
          "source": "FindUpdatesAction.java:93"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "187410",
      "date": "2007-05-17T00:29:27+02:00",
      "product": "Platform",
      "component": "Update",
      "severity": "minor"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.io.FilterInputStream.read",
          "source": "FilterInputStream.java:89"
        },
        {
          "method": "org.eclipse.update.internal.core.connection.HttpResponse$MonitoringInputStream.read",
          "source": "HttpResponse.java:64"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLVersionDetector.determineDocVersion",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.jaxp.SAXParserImpl.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.update.core.model.DefaultSiteParser.parse",
          "source": "DefaultSiteParser.java:152"
        },
        {
          "method": "org.eclipse.update.core.model.SiteModelFactory.parseSite",
          "source": "SiteModelFactory.java:81"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteURLFactory.createSite",
          "source": "SiteURLFactory.java:80"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:334"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:326"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.createSite",
          "source": "InternalSiteManager.java:291"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.attemptCreateSite",
          "source": "InternalSiteManager.java:222"
        },
        {
          "method": "org.eclipse.update.internal.core.InternalSiteManager.getSite",
          "source": "InternalSiteManager.java:162"
        },
        {
          "method": "org.eclipse.update.core.SiteManager.getSite",
          "source": "SiteManager.java:80"
        },
        {
          "method": "org.eclipse.update.search.UpdateSearchRequest.searchOneSite",
          "source": "UpdateSearchRequest.java:452"
        },
        {
          "method": "org.eclipse.update.search.UpdateSearchRequest.searchOneSite",
          "source": "UpdateSearchRequest.java:481"
        },
        {
          "method": "org.eclipse.update.search.UpdateSearchRequest.performSearch",
          "source": "UpdateSearchRequest.java:299"
        },
        {
          "method": "org.eclipse.update.ui.UpdateJob.runUpdates",
          "source": "UpdateJob.java:207"
        },
        {
          "method": "org.eclipse.update.ui.UpdateJob.run",
          "source": "UpdateJob.java:168"
        },
        {
          "method": "org.eclipse.update.internal.ui.views.FindUpdatesAction$TrackedUpdateJob.run",
          "source": "FindUpdatesAction.java:93"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "187410",
      "date": "2007-05-22T19:22:35+02:00",
      "product": "Platform",
      "component": "Update",
      "severity": "minor"
    }
  ],
  "groupId": "187410",
  "bugId": "187410",
  "date": "2007-05-17T00:29:27+02:00",
  "product": "Platform",
  "component": "Update",
  "severity": "minor"
}