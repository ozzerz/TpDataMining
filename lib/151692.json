{
  "comments": [
    "1 Open NewPage.jsp (attached)\n2  In Outline View move DOCTYPE:HTML upper on jsp:directive.page language\u003djava\n(see attached file)\nException will be: \nProblems occurred when invoking code from plug-in: \"org.eclipse.jface\".\n\norg.w3c.dom.DOMException: \n\tat org.eclipse.wst.xml.core.internal.document.ElementImpl.insertBefore(ElementImpl.java:676)\n\tat org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.doModify(DragNodeCommand.java:106)\n\tat org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.executeHelper(DragNodeCommand.java:162)\n\tat org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.execute(DragNodeCommand.java:133)\n\tat org.eclipse.wst.common.ui.internal.dnd.ViewerDropAdapter.drop(ViewerDropAdapter.java:195)\n\tat org.eclipse.wst.xml.ui.views.contentoutline.XMLContentOutlineConfiguration$2.drop(XMLContentOutlineConfiguration.java:442)\n\tat org.eclipse.jface.util.DelegatingDropAdapter$3.run(DelegatingDropAdapter.java:211)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n\tat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:149)\n\tat org.eclipse.jface.util.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:209)\n\tat org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:952)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:937)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:709)\n\tat org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:423)\n\tat org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:238)\n\tat org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:117)\n\tat org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)\n\tat org.eclipse.swt.dnd.DragSource.drag(DragSource.java:306)\n\tat org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:277)\n\tat org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:164)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d46753)\nPage for open\n\n",
    "Created an attachment (id\u003d46754)\nScreenshoot\n\n",
    "Looks there\u0027s a missing try/catch in org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.doModify()",
    "Nitin, I\u0027m attaching a patch to suppress the error dialog from appearing when an exception occurs during drag and drop (I just add a try/catch)\n\nWhat I notice though, is when you run this scenario, the DOCTYPE:HTML node is removed but never added back in when you run into a problem in insertBefore.  Same goes for if you run into a problem trying to move an attribute.\n\nGot any ideas on what we could do to handle it better?  I\u0027m thinking the options are:\n-add the node back in to the original position of we catch a DOMException.  problem is maybe the node won\u0027t be added to the exact original position\n-do some extra checking to make sure we really can move the node before removing. problem is that seems rather redundant since the check is also in insertBefore.",
    "Created an attachment (id\u003d47480)\norg.eclipse.wst.xml.ui.patch\n\nOh, I should also note that I may rethink the 1.5.1M1 target if this fix is more complicated that I originally thought.",
    "Retargetting to 2.0.  I believe when it comes time to fix this better, I will take the following approach:\n-add the node back in to the original position of we catch a DOMException. \nproblem is maybe the node won\u0027t be added to the exact original position",
    "Found a solution for:\n-add the node back in to the original position of we catch a DOMException. \n**problem is maybe the node won\u0027t be added to the exact original position**\n\n(i keep track of where the node previous was based on its parent and nextsibling. if unable to insert into new location, able to reinsert to old location)"
  ],
  "commentCreationDates": [
    "2006-07-25T15:28:10+02:00",
    "2006-07-25T15:29:49+02:00",
    "2006-07-25T15:31:10+02:00",
    "2006-07-25T21:36:43+02:00",
    "2006-08-07T18:21:06+02:00",
    "2006-08-07T18:22:27+02:00",
    "2006-08-31T00:37:12+02:00",
    "2007-01-08T23:50:01+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.w3c.dom.DOMException",
      "message": "",
      "elements": [
        {
          "method": "org.eclipse.wst.xml.core.internal.document.ElementImpl.insertBefore",
          "source": "ElementImpl.java:676"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.doModify",
          "source": "DragNodeCommand.java:106"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.executeHelper",
          "source": "DragNodeCommand.java:162"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.dnd.DragNodeCommand.execute",
          "source": "DragNodeCommand.java:133"
        },
        {
          "method": "org.eclipse.wst.common.ui.internal.dnd.ViewerDropAdapter.drop",
          "source": "ViewerDropAdapter.java:195"
        },
        {
          "method": "org.eclipse.wst.xml.ui.views.contentoutline.XMLContentOutlineConfiguration$2.drop",
          "source": "XMLContentOutlineConfiguration.java:442"
        },
        {
          "method": "org.eclipse.jface.util.DelegatingDropAdapter$3.run",
          "source": "DelegatingDropAdapter.java:211"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:149"
        },
        {
          "method": "org.eclipse.jface.util.DelegatingDropAdapter.drop",
          "source": "DelegatingDropAdapter.java:209"
        },
        {
          "method": "org.eclipse.swt.dnd.DNDListener.handleEvent",
          "source": "DNDListener.java:65"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:952"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:937"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:709"
        },
        {
          "method": "org.eclipse.swt.dnd.DropTarget.Drop",
          "source": "DropTarget.java:423"
        },
        {
          "method": "org.eclipse.swt.dnd.DropTarget$3.method6",
          "source": "DropTarget.java:238"
        },
        {
          "method": "org.eclipse.swt.internal.ole.win32.COMObject.callback6",
          "source": "COMObject.java:117"
        },
        {
          "method": "org.eclipse.swt.internal.ole.win32.COM.DoDragDrop",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.dnd.DragSource.drag",
          "source": "DragSource.java:306"
        },
        {
          "method": "org.eclipse.swt.dnd.DragSource.access$0",
          "source": "DragSource.java:277"
        },
        {
          "method": "org.eclipse.swt.dnd.DragSource$1.handleEvent",
          "source": "DragSource.java:164"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "151692",
      "date": "2006-07-25T15:28:10+02:00",
      "product": "Web Tools",
      "component": "wst.xml",
      "severity": "normal"
    }
  ],
  "groupId": "151692",
  "bugId": "151692",
  "date": "2006-07-25T15:28:10+02:00",
  "product": "Web Tools",
  "component": "wst.xml",
  "severity": "normal"
}