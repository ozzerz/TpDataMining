{
  "comments": [
    "I am attaching a sample plug-in project with a help TOC, a sample view (available in the resource perspective), and context sensitive help declared for the view. The sample was essentially generated with the new project wizard, with just a few modifications:\n\n- In testToc.xml note that the TOC label contains the XML ampersand entity: label\u003d\"Test A\u0026amp;D TOC\"\n- SampleView.createPartControl() connects the parent Composite with a help context named \"helpdemo.demoid\".\n- context.xml refers to this help context and points it to some existing html page\n\nWhen starting the debug workbench I activate all tracing for org.eclipse.help* plugins. When I reqest the context sensitive help (select an entry in the Sample View and press F1) then I get (among others) the following trace messages:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nContextManager.getContext(helpdemo.demoid)\n[Fatal Error] :1:151: The reference to entity \"D\" must end with the \u0027;\u0027 delimiter.\n[Fatal Error] :1:151: The reference to entity \"D\" must end with the \u0027;\u0027 delimiter.\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nThe error log of the debug workbench contains some messages, the key one is \"Argument not valid\". Here are the details:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\neclipse.buildId\u003dunknown\njava.version\u003d1.5.0_06\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_DE\nFramework arguments:  -product org.eclipse.sdk.ide -pdelaunch\nCommand-line arguments:  -product org.eclipse.sdk.ide -data D:\\Projekt\\RTP\\ws-help-dev/../ws-help-debug -dev file:D:/Projekt/RTP/ws-help-dev/.metadata/.plugins/org.eclipse.pde.core/ws-help-debug/dev.properties -pdelaunch -debug D:\\Projekt\\RTP\\ws-help-dev\\.metadata\\.plugins\\org.eclipse.pde.core\\ws-help-debug/.options -os win32 -ws win32 -arch x86\n\nError\nThu Jun 29 13:33:06 CEST 2006\nArgument not valid\n\njava.lang.IllegalArgumentException: Argument not valid\nat org.eclipse.swt.SWT.error(SWT.java:3358)\nat org.eclipse.swt.SWT.error(SWT.java:3297)\nat org.eclipse.ui.internal.forms.widgets.FormTextModel.parseInputStream(FormTextModel.java:114)\nat org.eclipse.ui.internal.forms.widgets.FormTextModel.parseTaggedText(FormTextModel.java:93)\nat org.eclipse.ui.forms.widgets.FormText.setText(FormText.java:661)\nat org.eclipse.help.ui.internal.views.ContextHelpPart.updateText(ContextHelpPart.java:275)\nat org.eclipse.help.ui.internal.views.ContextHelpPart.handleActivation(ContextHelpPart.java:256)\nat org.eclipse.help.ui.internal.views.ContextHelpPart.setFormInput(ContextHelpPart.java:522)\nat org.eclipse.ui.forms.ManagedForm.setInput(ManagedForm.java:236)\nat org.eclipse.help.ui.internal.views.RelatedTopicsPart.setFormInput(RelatedTopicsPart.java:165)\nat org.eclipse.ui.forms.ManagedForm.setInput(ManagedForm.java:236)\nat org.eclipse.help.ui.internal.views.ReusableHelpPart.update(ReusableHelpPart.java:1064)\nat org.eclipse.help.ui.internal.views.HelpView.displayContext(HelpView.java:352)\nat org.eclipse.help.ui.internal.DefaultHelpUI.displayContext(DefaultHelpUI.java:270)\nat org.eclipse.help.ui.internal.DefaultHelpUI.displayContext(DefaultHelpUI.java:245)\nat org.eclipse.ui.internal.help.WorkbenchHelpSystem.displayContext(WorkbenchHelpSystem.java:896)\nat org.eclipse.ui.internal.help.WorkbenchHelpSystem$WorkbenchHelpListener.helpRequested(WorkbenchHelpSystem.java:140)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:208)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nWhen I catch the exception then I find that the following tagged text was attempted to be parsed (linebreaks by me):\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\u003cform\u003e\n \u003cp\u003eDemo context description.\u003c/p\u003e\n \u003cli style\u003d\"image\" value\u003d\"obj16/topic_small.gif\" indent\u003d\"21\"\u003e\n \u003ca href\u003d\"/helpdemo/html/subtopic.html\" \n  alt\u003d\"Test A\u0026D TOC\"\u003eDemo context label\u003c/a\u003e\n \u003c/li\u003e\n\u003c/form\u003e\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nNote that the alt property of the \u003ca\u003e tag contains the text from TOC label but the ampersand entity was resolved to \"\u0026\" which is OK for a Java string. Apparently the parser which is trying to process this XML fragment chokes on on the ampersand which is no longer encoded as an entity.\n\nI suspect that this problem will strike anybody who is trying to use XML entities as part of a TOC label.\nShould be fixed :-)",
    "Created an attachment (id\u003d45527)\nSample plug-in project which produces the bug\n\nAdding sample plug-in project to reproduce the bug",
    "This bug is still in Eclipse 3.3 RC4.",
    "This is a duplicate of Bug 115614 which was fixed earlier today.\n\n*** This bug has been marked as a duplicate of bug 115614 ***"
  ],
  "commentCreationDates": [
    "2006-06-29T13:48:51+02:00",
    "2006-06-29T13:51:24+02:00",
    "2007-06-12T01:42:00+02:00",
    "2007-07-26T01:10:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Argument not valid",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3358"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.ui.internal.forms.widgets.FormTextModel.parseInputStream",
          "source": "FormTextModel.java:114"
        },
        {
          "method": "org.eclipse.ui.internal.forms.widgets.FormTextModel.parseTaggedText",
          "source": "FormTextModel.java:93"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.FormText.setText",
          "source": "FormText.java:661"
        },
        {
          "method": "org.eclipse.help.ui.internal.views.ContextHelpPart.updateText",
          "source": "ContextHelpPart.java:275"
        },
        {
          "method": "org.eclipse.help.ui.internal.views.ContextHelpPart.handleActivation",
          "source": "ContextHelpPart.java:256"
        },
        {
          "method": "org.eclipse.help.ui.internal.views.ContextHelpPart.setFormInput",
          "source": "ContextHelpPart.java:522"
        },
        {
          "method": "org.eclipse.ui.forms.ManagedForm.setInput",
          "source": "ManagedForm.java:236"
        },
        {
          "method": "org.eclipse.help.ui.internal.views.RelatedTopicsPart.setFormInput",
          "source": "RelatedTopicsPart.java:165"
        },
        {
          "method": "org.eclipse.ui.forms.ManagedForm.setInput",
          "source": "ManagedForm.java:236"
        },
        {
          "method": "org.eclipse.help.ui.internal.views.ReusableHelpPart.update",
          "source": "ReusableHelpPart.java:1064"
        },
        {
          "method": "org.eclipse.help.ui.internal.views.HelpView.displayContext",
          "source": "HelpView.java:352"
        },
        {
          "method": "org.eclipse.help.ui.internal.DefaultHelpUI.displayContext",
          "source": "DefaultHelpUI.java:270"
        },
        {
          "method": "org.eclipse.help.ui.internal.DefaultHelpUI.displayContext",
          "source": "DefaultHelpUI.java:245"
        },
        {
          "method": "org.eclipse.ui.internal.help.WorkbenchHelpSystem.displayContext",
          "source": "WorkbenchHelpSystem.java:896"
        },
        {
          "method": "org.eclipse.ui.internal.help.WorkbenchHelpSystem$WorkbenchHelpListener.helpRequested",
          "source": "WorkbenchHelpSystem.java:140"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:208"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "149135",
      "duplicateId": "115614",
      "date": "2006-06-29T13:48:51+02:00",
      "product": "Platform",
      "component": "User Assistance",
      "severity": "normal"
    }
  ],
  "groupId": "115614",
  "bugId": "149135",
  "duplicateId": "115614",
  "date": "2006-06-29T13:48:51+02:00",
  "product": "Platform",
  "component": "User Assistance",
  "severity": "normal"
}