{
  "comments": [
    "linux motif version 3.0M9 (also in previous versions)\nSun JDK 1.4.2\n\nWhen I first right-click on an item in the resource view (left pane in default\nJava perspective) there are items that do no appear in the context menu\nToday I noticed that \"Properties\" was missing from a project context menu.  \n\"Close Project\" is also missing on the first click.  On the second click, or if\nthe project is already selected, then the menu items appear",
    "This is in the Package Explorer.\n",
    "Created an attachment (id\u003d11223)\nmultiple menu in navigator\n\nWe found that the menu behaviour under motif is quite strange.\n\nPackage Explorer:\n- Menu shows on right mouse down\n- If there is no selection, the menu contains only parts of the entries\n- With selection, some entries only show up the second time the menu is opened\n- Some items are first disabled, then get enabled while the menu is already\nshowing\n\nNavigator:\n- menu opens on right mouse up or mouse move\n- menu contains lots of duplicates (see attached screenshot)",
    "This looks like an SWT problem, moving to swt. Please forward if you don\u0027t think\nthis is you.",
    "David,\n\nThe appearance of items in the menu only when a project is selected is not SWT \nbehaviour but UI (Navigator) or JDT UI (Package Explorer) behaviour.  To me it \nappears that this is the correct thing to do anyway - what would you prefer - \nthat the menu items appeared but were disabled?\n\nTom,\n\nWhen I run eclipse on linux motif, the menu always appears on mouse down (for \nboth navigator and package explorer) and I do not see the duplicate menu \nitems.  Perhaps there was an exception in the code that generates the menu \nitems resulting in slow and wrong behaviour.  I think this is a different \nproblem from the problem originally reported here.  Please  open a new bug \nreport for this and provide steps to reproduce.  Also, are you sure you are \nrunning with the open motif shipped with eclipse and not the lesstif libraries \nthat come with some linux installs?  To be sure, launch eclipse from the \ndirectory in which the eclipse exectuable is installed.\n",
    "Perhaps I am not fully aware of the \"correct\" or standard behaviour of context\nmenus in Motif. (I used the windows version for a couple of years before\nswitching to Motif).\n\nI expect when I right click an item in the explorer that the item is selected\n(but not opened as would be the case if left-clicked and the option \"open on\nsingle click\" is enabled) and then the context menu for that particular selected\nitem would appear. I am not sure why you think the menu items should be\ndisabled, although that seems preferable to being missing.  Is the resource not\nreally selected by the right click? Once a resource is highlighted, my intuition\ntells me that it is selected.  I will admit that this is a learned behaviour and\nI may have learned this incorrectly, but I don\u0027t see the rationel behind the\ncurrent behaviour.\n\nPerhaps this is related to another menu problem I have experienced -- I\nsometimes have difficulty copying and pasting from the context menu (since the\ndrag and drop does not work on the Motif version).  I have never been able to\npin it down into a reproducable test case to submit a bug report.\n\nNote: I have never seen the behavior captured in the previously attached image\n-- I always start eclipse from the eclipse directory.",
    "Drag and Drop works on motif - use the middle mouse button.",
    "- the duplicate menu items as shown on the screenshot are not reproducable if I\nstart eclipse from the install directory. I guess you are right about the\nlesstif libs.\n\n- the menu does still appear on mouse-up in the navigator, though, and it will\nstay up. This is not common for motif. The steps here are simple: create a Java\nproject, switch to Resource perspective, right click in the navigator view.\n\n- the funny thing about the disabled items is that the enabledment seems to be\ncalculated *after* the menu is displayed. Also the selection that is caused by\nthe right click seems to come late - some of the items do only show up the\nsecond time after the item is selected. My test case is to unselect everything\nin the Package Explorer using Ctrl+Click, and then right click on the single\nitem that\u0027s there.",
    "Right mouse down does select the item before popping up the menu.  I am not \nseeing the behaviour you desribe.  Is there anything in your .log file around \nthe same time?\n\nTo be sure you are getting the right libXm.so files do the following:\n\ncd ~/path/to/eclipse\nldd plugins/org.eclipse.swt.motif_3.0.0/os/linux/x86/libswt-motif-3054.so\n\n(Note, you may have a different number than 3054 depending on what build you \nare running)\n\nYou should have libXm.so.2 \u003d\u003e ./libXm.so.2 ",
    "I can see that the item is being selected before the context menu appears, which\nmakes the fact that some of the functionality is missing all the more confusing.\nSo, for example, I can select \"Open in New Window\" and the project will open. \nBut I can\u0027t select \"Close Project\" since its not there.  So my question is why\nis some functionality available while other functionality not?\n\nThere is nothing in the .log for the 5 minutes surrounding my last operation (I\nwill create bug reports for the other exceptions in there not related to this\nproblem)\n\n\nI believe that I have the correct libraries linked:\n% ldd plugins/org.eclipse.swt.motif_3.0.0/os/linux/x86/libswt-motif-3052.so\n        /lib/libNoVersion.so.1 \u003d\u003e /lib/libNoVersion.so.1 (0x4004a000)\n        libXm.so.2 \u003d\u003e ./libXm.so.2 (0x4004c000)\n        libX11.so.6 \u003d\u003e /usr/X11R6/lib/libX11.so.6 (0x401f3000)\n        libm.so.6 \u003d\u003e /lib/tls/libm.so.6 (0x402d2000)\n        libXext.so.6 \u003d\u003e /usr/X11R6/lib/libXext.so.6 (0x402f5000)\n        libXt.so.6 \u003d\u003e /usr/X11R6/lib/libXt.so.6 (0x40303000)\n        libXp.so.6 \u003d\u003e /usr/X11R6/lib/libXp.so.6 (0x40355000)\n        libdl.so.2 \u003d\u003e /lib/libdl.so.2 (0x4035d000)\n        libXtst.so.6 \u003d\u003e /usr/X11R6/lib/libXtst.so.6 (0x40360000)\n        libc.so.6 \u003d\u003e /lib/tls/libc.so.6 (0x40365000)\n        libSM.so.6 \u003d\u003e /usr/X11R6/lib/libSM.so.6 (0x4049e000)\n        libICE.so.6 \u003d\u003e /usr/X11R6/lib/libICE.so.6 (0x404a6000)\n        /lib/ld-linux.so.2 \u003d\u003e /lib/ld-linux.so.2 (0x80000000)\n",
    "Grant, please try to reproduce this problem.",
    "- ldd reports correct references.\n- no exceptions except for this, which I don\u0027t believe is related:\n\norg.eclipse.swt.SWTException: Widget is disposed\n        at org.eclipse.swt.SWT.error(SWT.java:2689)\n        at org.eclipse.swt.SWT.error(SWT.java:2614)\n        at org.eclipse.swt.SWT.error(SWT.java:2585)\n        at org.eclipse.swt.widgets.Widget.error(Widget.java:334)\n        at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:271)\n        at org.eclipse.swt.widgets.Control.redraw(Control.java:1409)\n        at\norg.eclipse.ui.forms.widgets.ImageHyperlink.handleActivate(ImageHyperlink.java:139)\n        at\norg.eclipse.ui.forms.widgets.AbstractHyperlink.handleMouseUp(AbstractHyperlink.java:264)\n        at\norg.eclipse.ui.forms.widgets.AbstractHyperlink.access$1(AbstractHyperlink.java:248)\n        at\norg.eclipse.ui.forms.widgets.AbstractHyperlink$4.handleEvent(AbstractHyperlink.java:95)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:731)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2938)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2642)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\n        at\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)\n[...]\n\n",
    "I see that the shown menu items will partially reflect the previously-selected \nitem on right-click-select.  There\u0027s probably an event-firing difference in the \nmotif tree.  Will investigate.\n",
    "The following snippet shows what appears to be the root cause.  When tree item \nis deselected, right-clicking on it fires Tree.selection and then Menu.show on \nwin32, but reverses the order of these events on motif.  The menu management \nmagic above us seems to depend on the win32 event ordering, since the \nTree.selection event is ultimately used to determine the proper context menu \nitems to create when Menu.show is received.\n\npublic static void main(String[] args) {\n\tfinal Display display \u003d new Display ();\n\tShell shell \u003d new Shell(display);\n\tshell.setBounds(10,10,200,200);\n\tTree tree \u003d new Tree(shell, SWT.MULTI);\n\ttree.setBounds(10,10,100,100);\n\tnew TreeItem(tree, SWT.NONE).setText(\"tree item\");\n\tMenu menu \u003d new Menu (tree);\n\tMenuItem item \u003d new MenuItem (menu, SWT.PUSH);\n\titem.setText (\"menu item\");\n\ttree.setMenu (menu);\n\ttree.addListener(SWT.Selection, new Listener() {\n\t\tpublic void handleEvent(Event event) {\n\t\t\tSystem.out.println(\"tree selection\");\n\t\t}\n\t});\n\tmenu.addListener(SWT.Show, new Listener() {\n\t\tpublic void handleEvent(Event event) {\n\t\t\tSystem.out.println(\"menu show\");\n\t\t}\n\t});\n\tshell.open();\n\twhile (!shell.isDisposed()) {\n\t\tif (!display.readAndDispatch()) display.sleep();\n\t}\n\tdisplay.dispose();\n}\n",
    "fixed \u003e 0603\n"
  ],
  "commentCreationDates": [
    "2004-05-26T23:47:01+02:00",
    "2004-05-27T17:17:18+02:00",
    "2004-05-27T19:39:59+02:00",
    "2004-05-27T19:41:07+02:00",
    "2004-05-27T20:31:54+02:00",
    "2004-05-27T20:46:55+02:00",
    "2004-05-27T21:05:59+02:00",
    "2004-05-27T21:08:45+02:00",
    "2004-05-27T21:20:19+02:00",
    "2004-05-27T21:47:31+02:00",
    "2004-05-28T00:14:07+02:00",
    "2004-05-28T09:04:17+02:00",
    "2004-05-31T16:46:39+02:00",
    "2004-06-03T19:28:14+02:00",
    "2004-06-03T21:58:07+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2689"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2614"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2585"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:334"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:271"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.redraw",
          "source": "Control.java:1409"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.ImageHyperlink.handleActivate",
          "source": "ImageHyperlink.java:139"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.AbstractHyperlink.handleMouseUp",
          "source": "AbstractHyperlink.java:264"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.AbstractHyperlink.access$1",
          "source": "AbstractHyperlink.java:248"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.AbstractHyperlink$4.handleEvent",
          "source": "AbstractHyperlink.java:95"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:731"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2642"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1363"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:253"
        }
      ],
      "number": 0,
      "commentIndex": 11,
      "bugId": "64237",
      "date": "2004-05-28T09:04:17+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "64237",
  "bugId": "64237",
  "date": "2004-05-26T23:47:01+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}