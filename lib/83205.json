{
  "comments": [
    "Accidentally shut down Eclipse while exporting a plug-in project as deployable\nfeature was in progress. The console window stayed open, and responsive (could\nuse console). No further activity seemed to be happening.\n\nNoticed that the plug-in export failed due to classloaders being closed for\nbusiness (see below), which is expected. Took a snapshot of the VM state (see\nbelow). It seems System.exit() was not called. The console and an event\ndispatching threads were left behind. \n\nTyping \"exit\" on the console caused the VM to exit.\n\nUnable to reproduce. \n\n\n!SESSION 2005-01-19 11:11:22.132 -----------------------------------------------\n\neclipse.buildId\u003dI20050118-1015\njava.version\u003d1.5.0\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_CA\nFramework arguments:  -keyring d:\\temp\\.keyring -showlocation\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -keyring d:\\temp\\.keyring\n -consolelog -console -debug -showlocation\n\n!ENTRY org.eclipse.pde.build 0 1 2005-01-19 11:11:22.132\n!MESSAGE Some inter-plug-in dependencies have not been satisfied.\njava.lang.NoClassDefFoundError: org/eclipse/pde/internal/core/ifeature/IFeatureM\nodel\n        at org.eclipse.pde.internal.ui.wizards.exports.FeatureExportJob.deleteBu\nildFiles(FeatureExportJob.java:298)\n        at org.eclipse.pde.internal.ui.wizards.exports.PluginExportJob.doExports\n(PluginExportJob.java:50)\n        at org.eclipse.pde.internal.ui.wizards.exports.FeatureExportJob.run(Feat\nureExportJob.java:95)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\nosgi\u003e\n\nosgi\u003e\n\n\nosgi\u003e\nosgi\u003e\n\nosgi\u003e Full thread dump Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode):\n\n\"DestroyJavaVM\" prio\u003d5 tid\u003d0x000361e8 nid\u003d0xc84 waiting on condition [0x00000000\n..0x0007fae8]\n\n\"OSGi Console\" prio\u003d5 tid\u003d0x19bd0e28 nid\u003d0xa28 in Object.wait() [0x19fcf000..0x1\n9fcfb68]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x042db588\u003e (a java.lang.Object)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(Fra\nmeworkConsole.java:265)\n        - locked \u003c0x042db588\u003e (a java.lang.Object)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(Fra\nmeworkConsole.java:236)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(Framewo\nrkConsole.java:207)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"Framework Event Dispatcher\" daemon prio\u003d5 tid\u003d0x199d55a0 nid\u003d0x878 in Object.wa\nit() [0x19f8f000..0x19f8fbe8]\n        at java.lang.Object.wait(Native Method)\n        at java.lang.Object.wait(Object.java:474)\n        at org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThr\nead.java:162)\n        - locked \u003c0x042db620\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread\n)\n        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:\n100)\n\n\"Low Memory Detector\" daemon prio\u003d5 tid\u003d0x00a912f8 nid\u003d0xe60 runnable [0x0000000\n0..0x00000000]\n\n\"CompilerThread0\" daemon prio\u003d10 tid\u003d0x00a8fec8 nid\u003d0x2b8 waiting on condition [\n0x00000000..0x198cf6c0]\n\n\"Signal Dispatcher\" daemon prio\u003d10 tid\u003d0x00a8f250 nid\u003d0xd4c waiting on condition\n [0x00000000..0x00000000]\n\n\"Finalizer\" daemon prio\u003d9 tid\u003d0x00a86670 nid\u003d0xd9c in Object.wait() [0x1984f000.\n.0x1984fa68]\n        at java.lang.Object.wait(Native Method)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:116)\n        - locked \u003c0x042db808\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:132)\n        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio\u003d10 tid\u003d0x00a851e0 nid\u003d0x478 in Object.wait() [0x\n1980f000..0x1980fae8]\n        at java.lang.Object.wait(Native Method)\n        at java.lang.Object.wait(Object.java:474)\n        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)\n        - locked \u003c0x042db888\u003e (a java.lang.ref.Reference$Lock)\n\n\"VM Thread\" prio\u003d10 tid\u003d0x00a82810 nid\u003d0x750 runnable\n\n\"VM Periodic Task Thread\" prio\u003d10 tid\u003d0x00a924d0 nid\u003d0xd04 waiting on condition",
    "I can reproduce this almost every time I run a test workspace.  The application\nexits but the main thread never exits.",
    "Having just said that, I loaded all the changes from OSGi and runtime from HEAD\nagain, and now it always exits cleanly.  Looks like it\u0027s fixed.",
    "This is puzzling.  It looks like the main thread has ended.  Is it possible \nthat Main from startup.jar failed to call System.exit()?  It looks like we \nshould have a try -\u003e catch -\u003e finally in Main.main(String[]) like this.\n\n\tpublic static void main(String[] args) {\n\t\tint result;\n\t\ttry {\n\t\t\tresult \u003d new Main().run(args);\n\t\t} catch(Throwable t) {\n\t\t\tresult \u003d 13; // not sure how to fail here?\n\t\t} finally {\n\t\t\tSystem.exit(result);\n\t\t}\n\t}\n\nThe threads that have anything on their stack are daemon threads except the \nconsole thread.  Seems like the only way this could happen is if System.exit() \ndid not get called.\n\nJohn, when you got hung on shutdown did you use the -console options? and did \nyou happen to get a stack dump to see if it was similar to this bug.  Maybe \nyour hangs were realated to bug 83341.",
    "We did change org.eclipse.core.launcher.Main in the context of bug 82068. Maybe\nthat is causing a runtime exception to be thrown where none was before. But\nsince we were not capturing it and logging it, it is hard to figure out what is\nhappening.\n\nI agree with exitting with error code 13 if an exception is caught at that\npoint. The exception should be logged though.",
    "Created an attachment (id\u003d20679)\npatch for org.eclipse.platform\n\nPascal, could you review/release?",
    "Created an attachment (id\u003d20680)\npatch for org.eclipse.platform\n\nPrevious patch was invalid (too many changes, likely due to formatting)",
    "Fixed in HEAD."
  ],
  "commentCreationDates": [
    "2005-01-19T16:25:15+01:00",
    "2005-01-20T23:40:03+01:00",
    "2005-01-20T23:42:39+01:00",
    "2005-01-21T14:16:36+01:00",
    "2005-01-21T15:45:05+01:00",
    "2005-05-04T16:35:07+02:00",
    "2005-05-04T16:38:34+02:00",
    "2005-05-04T18:09:25+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/pde/internal/core/ifeature/IFeatureM odel",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.ui.wizards.exports.FeatureExportJob.deleteBuildFiles",
          "source": "FeatureExportJob.java:298"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.exports.PluginExportJob.doExports",
          "source": "PluginExportJob.java:50"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.exports.FeatureExportJob.run",
          "source": "Feat ureExportJob.java:95"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "83205",
      "date": "2005-01-19T16:25:15+01:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    }
  ],
  "groupId": "83205",
  "bugId": "83205",
  "date": "2005-01-19T16:25:15+01:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "normal"
}