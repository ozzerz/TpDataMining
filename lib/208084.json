{
  "comments": [
    "I20071030-0010\n\nI created a new bundle and then a new OSGi launch configuration and ran it. In the launch config I had -console -consoleLog -noexit so when the OSGi console came up, I type \"ss\" to get the system status. But instead I got a dialog saying that an error occurred. Here is the stack trace:\n\n!ENTRY org.eclipse.ui 4 0 2007-10-30 14:36:44.192\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.ArrayIndexOutOfBoundsException)\n        at org.eclipse.swt.SWT.error(SWT.java:3706)\n        at org.eclipse.swt.SWT.error(SWT.java:3624)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:127)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3312)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2985)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2395)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2359)\n        at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2225)\n        at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:468)\n        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:463)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:193)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:362)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:175)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:615)\n        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:515)\n        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:455)\n        at org.eclipse.equinox.launcher.Main.run(Main.java:1193)\n        at org.eclipse.equinox.launcher.Main.main(Main.java:1169)\nCaused by: java.lang.ArrayIndexOutOfBoundsException\n        at org.eclipse.swt.custom.StyledTextRenderer.textChanging(StyledTextRenderer.java:1289)\n        at org.eclipse.swt.custom.StyledText.handleTextChanging(StyledText.java:5425)\n        at org.eclipse.swt.custom.StyledText$6.textChanging(StyledText.java:4811)\n        at org.eclipse.ui.internal.console.ConsoleDocumentAdapter.documentAboutToBeChanged(ConsoleDocumentAdapter.java:300)\n        at org.eclipse.jface.text.AbstractDocument.fireDocumentAboutToBeChanged(AbstractDocument.java:606)\n        at org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:1072)\n        at org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:1099)\n        at org.eclipse.ui.internal.console.ConsoleDocument.replace(ConsoleDocument.java:82)\n        at org.eclipse.ui.internal.console.IOConsolePartitioner$QueueProcessingJob.runInUIThread(IOConsolePartitioner.java:533)\n        at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:124)\n        ... 23 more",
    "Created an attachment (id\u003d81637)\njava file\n\nHere is the activator for a sample bundle that will show this problem. \n\n- create a new bundle (yes create an activator, no it won\u0027t make contributions to the UI)\n- make this class the activator\n- create a new OSGi launch config that auto-starts this bundle\n- also add -noexit to the args\n- run\n- try and type something into the console\n\nNote that I am on linux.\n",
    "I tried on WindowsXP but can\u0027t reproduce. What I see is the caret being at the wrong places:\n\ne.g.\n- I enter \"ss\" and the caret goes away.\n- I enter \"start Bug\" and I get\nosgi\u003e start Bug\n|\nosgi\u003e\nwhere | is the caret.\n\nI would expect:\nosgi\u003e start Bug\n\nosgi\u003e|\n\nWill now see whether I can make the bug appear under Linux.\n",
    "Created an attachment (id\u003d81706)\nMy Test Bundle\n\nThis is the bundle I use for testing.",
    "Can reproduce on Linux-GTK.",
    "Simpler test case:\nStarting any OSGi or Eclipse target with -console and then typing \"ss\" + Return\n\nWorks using I20071023-0800 under Linux.\n\nBug is in the ConsoleDocumentAdapter introduced by \"fix\" for bug 207743.",
    "Created an attachment (id\u003d81711)\nFix\n\n",
    "Thanks for the patch Daniel\n\napplied + verified the patch",
    "Released to 3.3.2",
    "*** Bug 208239 has been marked as a duplicate of this bug. ***",
    "*** Bug 195100 has been marked as a duplicate of this bug. ***",
    "Needs PMC approval.",
    "marking as dup of bug 207743. This is really just an additional part of the fix for bug 207743 (the original fix caused this problem). The original bug should have been re-opened and re-fixed.\n\n*** This bug has been marked as a duplicate of bug 207743 ***"
  ],
  "commentCreationDates": [
    "2007-10-30T19:41:36+01:00",
    "2007-10-30T20:58:34+01:00",
    "2007-10-31T11:16:54+01:00",
    "2007-10-31T12:30:42+01:00",
    "2007-10-31T12:31:19+01:00",
    "2007-10-31T13:17:13+01:00",
    "2007-10-31T14:37:02+01:00",
    "2007-10-31T20:02:04+01:00",
    "2007-10-31T20:24:36+01:00",
    "2007-11-02T11:24:13+01:00",
    "2007-11-07T19:42:30+01:00",
    "2007-11-21T03:27:45+01:00",
    "2007-11-21T21:47:01+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.ArrayIndexOutOfBoundsException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3706"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3624"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:127"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3312"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2985"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2395"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2359"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2225"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:468"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:288"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:463"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:193"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:362"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:175"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:515"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:455"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1193"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1169"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
        "elements": [
          {
            "method": "org.eclipse.swt.custom.StyledTextRenderer.textChanging",
            "source": "StyledTextRenderer.java:1289"
          },
          {
            "method": "org.eclipse.swt.custom.StyledText.handleTextChanging",
            "source": "StyledText.java:5425"
          },
          {
            "method": "org.eclipse.swt.custom.StyledText$6.textChanging",
            "source": "StyledText.java:4811"
          },
          {
            "method": "org.eclipse.ui.internal.console.ConsoleDocumentAdapter.documentAboutToBeChanged",
            "source": "ConsoleDocumentAdapter.java:300"
          },
          {
            "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentAboutToBeChanged",
            "source": "AbstractDocument.java:606"
          },
          {
            "method": "org.eclipse.jface.text.AbstractDocument.replace",
            "source": "AbstractDocument.java:1072"
          },
          {
            "method": "org.eclipse.jface.text.AbstractDocument.replace",
            "source": "AbstractDocument.java:1099"
          },
          {
            "method": "org.eclipse.ui.internal.console.ConsoleDocument.replace",
            "source": "ConsoleDocument.java:82"
          },
          {
            "method": "org.eclipse.ui.internal.console.IOConsolePartitioner$QueueProcessingJob.runInUIThread",
            "source": "IOConsolePartitioner.java:533"
          },
          {
            "method": "org.eclipse.ui.progress.UIJob$1.run",
            "source": "UIJob.java:94"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:124"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "208084",
      "duplicateId": "207743",
      "date": "2007-10-30T19:41:36+01:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "major"
    }
  ],
  "groupId": "207743",
  "bugId": "208084",
  "duplicateId": "207743",
  "date": "2007-10-30T19:41:36+01:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "major"
}