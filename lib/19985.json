{
  "comments": [
    "In our custom editor, we have our own line style provider. There\u0027s been times \nwhen we have a bug in that code so that invalid StyleRanges are produced. That \nis, there may be too many of them, and they may have overlapping ranges. The \nhighlighting code actually deals with these with out error, and usually even \nproduces the right highlighting (So, its hard to see that anything is wrong \nvisually). A problem occurs, however, if someone does a \"copy to clipboard\" \noperation on these bad ranges. Its during creation of an RTF form of the data. \nfor the clipboard. In these cases a NegativeArraySizeException is thrown, which \nof course looks pretty embarrassing. So, while I know the original error is in \nmy code, I thought I\u0027d suggest this low-level code be bullet proofed to never \nthrow an exception. In could just log the error, and return a generic \"black\" \nRTF string to clip board (or, no RTF at all). Not sure if this would count as a \ndefect, per se, but please consider at least as a suggested improvement.\n\nTop of stack trace below:\n\njava.lang.NegativeArraySizeException: \n\tat org.eclipse.swt.custom.StyledText$RTFWriter.write\n(StyledText.java:597)\n\tat org.eclipse.swt.custom.StyledText$RTFWriter.writeStyledLine\n(StyledText.java:693)\n\tat org.eclipse.swt.custom.StyledText$RTFWriter.writeLine\n(StyledText.java:556)\n\tat org.eclipse.swt.custom.StyledText.getPlatformDelimitedText\n(StyledText.java:3678)\n\tat org.eclipse.swt.custom.StyledText.copy(StyledText.java:1810)\n\tat org.eclipse.jface.text.TextViewer.doOperation(TextViewer.java:2370)\n\tat org.eclipse.jface.text.source.SourceViewer.doOperation\n(SourceViewer.java:406)\n\tat com.ibm.sed.editor.StructuredTextViewer.doOperation\n(StructuredTextViewer.java:474)",
    "A valid issue, which we won\u0027t have time to deal with for R2.0. To be \nconsidered afterwards.\n",
    "Reassigning to KR since he\u0027s looking into some RTF issues.",
    "Fixed in \u003e 20020726.\nAdded regression test to StyledText JUnit test suite."
  ],
  "commentCreationDates": [
    "2002-06-12T09:24:40+02:00",
    "2002-06-12T14:51:20+02:00",
    "2002-07-22T17:10:14+02:00",
    "2002-07-26T18:02:45+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NegativeArraySizeException",
      "message": "",
      "elements": [
        {
          "method": "org.eclipse.swt.custom.StyledText$RTFWriter.write",
          "source": "StyledText.java:597"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$RTFWriter.writeStyledLine",
          "source": "StyledText.java:693"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$RTFWriter.writeLine",
          "source": "StyledText.java:556"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getPlatformDelimitedText",
          "source": "StyledText.java:3678"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.copy",
          "source": "StyledText.java:1810"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.doOperation",
          "source": "TextViewer.java:2370"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.doOperation",
          "source": "SourceViewer.java:406"
        },
        {
          "method": "com.ibm.sed.editor.StructuredTextViewer.doOperation",
          "source": "StructuredTextViewer.java:474"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "19985",
      "date": "2002-06-12T09:24:40+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "19985",
  "bugId": "19985",
  "date": "2002-06-12T09:24:40+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}