{
  "comments": [
    "Trying to find an existing class in the type dialog results in the error message \n\"Could not uniquely map the name to a type. Path is ..\" \n\nThe type dialog (\u0027s indexing) seems to fail when the project name contains a dot \u0027.\u0027.\n\nAlso see attached workspace.",
    "Created an attachment (id\u003d39273)\nWorkspace demonstrating the problem\n\nTry to open MyClass from projectTest.jar - this fails with the described error message\nTry to open MyClass from TestProjectWithoutDot - OK",
    "Thanks for the workspace. Reproduced with 20060424-0010\n\nThere are two types MyClass in two projects:\nThe first has as \u0027path\u0027 reported be the search engine\n/TestProjectWithoutDot/test-src/com/test/myclass/MyClassTest.java\nthe second\n/Test.jar|test-src/com/test/myclass/MyClassTest.java\n\nBut \u0027Test.jar\u0027 is a project name in this workspace.\n\nMoving to jdt.core",
    "The documentPath given to the requestor is wrong. It assumes it is a jar document path (i.e \"/Test.jar|src/p/MyClass.java\").\n\nProblem comes from InternalSearchPattern#documentPath(String, String) that assumes that a container path ending with .jar is a jar file path.",
    "One possible fix would be to encode the fact that it is a jar path in the container path (by adding \u0027|\u0027 to the path for example).",
    "Since this bug existed in 3.1, this is not a regression. \n\nFixing it at this stage of 3.2 is too risky. Will keep for post 3.2.",
    "*** Bug 140117 has been marked as a duplicate of this bug. ***",
    "The problem persists in 3.3 stream, but in a worse fashion as the Open Type dialog is now even more broken.\nWhere previously only the opening of the type was failing, now searching with patterns matching a type in a \".jar\" project fails to show any type, from the \".jar\" project, but also from any other projects or referenced libraries.",
    "(In reply to comment #7)\nIt sounds like a different problem. Please open a separate bug with detailed steps to reproduce.\n",
    "Tested the original workspace again in 3.3. Type Dialog now produces an error message.\n\n\u0027Items filtering (Time of error: July 13, 2007 9:39:21 AM GMT+2:00) \nReason:\nClass file name must end with .class\u0027\n\nSee below .log file from the workspace \n\n!ENTRY org.eclipse.core.jobs 4 2 2007-07-13 09:39:21.586\n!MESSAGE An internal error occurred during: \"Items filtering\".\n!STACK 0\njava.lang.IllegalArgumentException: Class file name must end with .class\n        at org.eclipse.jdt.internal.core.PackageFragment.getClassFile(PackageFragment.java:188)\n        at org.eclipse.jdt.internal.core.search.TypeNameMatchRequestorWrapper.createTypeFromJar(TypeNameMatchRequestorWrapper.java:146)\n        at org.eclipse.jdt.internal.core.search.TypeNameMatchRequestorWrapper.acceptType(TypeNameMatchRequestorWrapper.java:108)\n        at org.eclipse.jdt.internal.core.search.BasicSearchEngine$2.acceptIndexMatch(BasicSearchEngine.java:767)\n        at org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.acceptMatch(InternalSearchPattern.java:45)\n        at org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches(InternalSearchPattern.java:89)\n        at org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches(MatchLocator.java:325)\n        at org.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:114)\n        at org.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:64)\n        at org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:279)\n        at org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllTypeNames(BasicSearchEngine.java:778)\n        at org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:781)\n        at org.eclipse.jdt.internal.ui.dialogs.FilteredTypesSelectionDialog.fillContentProvider(FilteredTypesSelectionDialog.java:593)\n        at org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.filterContent(FilteredItemsSelectionDialog.java:2059)\n        at org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.internalRun(FilteredItemsSelectionDialog.java:2001)\n        at org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.doRun(FilteredItemsSelectionDialog.java:1973)\n        at org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.run(FilteredItemsSelectionDialog.java:1960)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n",
    "(In reply to comment #9)\nThis is also a different problem (different error message). Please enter a separate  bug with steps to reproduce.",
    "registered bug  \n#199392 \u0027Type Dialog Error \u0027Items filtering ... Reason: Class file name must end with .class\u0027\u0027\n\nMarked this bug as invalid for version 3.3.",
    "Reopen as it appears finally that it was the same issue than bug 199392.\n\nThe message has changed because Open Type dialog uses a different API method from SearchEngine (TypeNameMatchRequestor instead of TypeNameRequestor) since 3.3...\n",
    "*** Bug 199392 has been marked as a duplicate of this bug. ***",
    "Created an attachment (id\u003d75775)\nProposed patch\n\nAll JDT/Core model and JDT/UI tests pass with this patch.",
    "Created an attachment (id\u003d75822)\nNew proposed patch\n\nNew patch using char for separator instead of string to reduce memory allocation and speed-up concatenation just a little bit...\n",
    "Released for 3.4M2 in HEAD stream.\n",
    "Verified for 3.4 M2 using build I20070917-0010.",
    "Might be fixed in R3_3_maintenance by fix for bug 204652. Frederic please verify that assumption.",
    "(In reply to comment #18)\n\u003e Might be fixed in R3_3_maintenance by fix for bug 204652. Frederic please\n\u003e verify that assumption.\n\u003e \nUnfortunately not, as we get a \"Class file name must ends with .class\" error with the fix released in maintenance stream for bug 204652.\n\nJavaSearchScope behaves correctly with the patch, but in comment 2 test case, there\u0027s a java file (MyClass.java) in the source folder and this error is raised as the TypeNameMatchRequestorWrapper expects to find a class file in a jar file (method #createTypeFromJar(String, int))...\n\nSo, to definitely avoid this error, the only way is not to jump into this method reserved to Jar files and I currently do not see any simple workaround to fix this in maintenance stream...\n"
  ],
  "commentCreationDates": [
    "2006-04-24T15:38:44+02:00",
    "2006-04-24T15:44:50+02:00",
    "2006-04-24T20:33:16+02:00",
    "2006-04-25T13:35:33+02:00",
    "2006-04-25T13:36:38+02:00",
    "2006-04-25T13:37:54+02:00",
    "2006-05-04T12:12:58+02:00",
    "2007-04-17T09:58:23+02:00",
    "2007-04-17T10:30:10+02:00",
    "2007-07-13T09:46:00+02:00",
    "2007-08-09T11:33:49+02:00",
    "2007-08-09T12:38:35+02:00",
    "2007-08-09T18:25:56+02:00",
    "2007-08-09T18:29:00+02:00",
    "2007-08-09T18:43:45+02:00",
    "2007-08-10T10:11:52+02:00",
    "2007-08-10T10:12:45+02:00",
    "2007-09-18T09:38:47+02:00",
    "2007-10-08T12:59:07+02:00",
    "2007-10-09T19:57:34+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Class file name must end with .class",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.PackageFragment.getClassFile",
          "source": "PackageFragment.java:188"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.TypeNameMatchRequestorWrapper.createTypeFromJar",
          "source": "TypeNameMatchRequestorWrapper.java:146"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.TypeNameMatchRequestorWrapper.acceptType",
          "source": "TypeNameMatchRequestorWrapper.java:108"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine$2.acceptIndexMatch",
          "source": "BasicSearchEngine.java:767"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.acceptMatch",
          "source": "InternalSearchPattern.java:45"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches",
          "source": "InternalSearchPattern.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches",
          "source": "MatchLocator.java:325"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "PatternSearchJob.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:64"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:279"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllTypeNames",
          "source": "BasicSearchEngine.java:778"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "SearchEngine.java:781"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.FilteredTypesSelectionDialog.fillContentProvider",
          "source": "FilteredTypesSelectionDialog.java:593"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.filterContent",
          "source": "FilteredItemsSelectionDialog.java:2059"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.internalRun",
          "source": "FilteredItemsSelectionDialog.java:2001"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.doRun",
          "source": "FilteredItemsSelectionDialog.java:1973"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.run",
          "source": "FilteredItemsSelectionDialog.java:1960"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 9,
      "bugId": "138184",
      "date": "2007-07-13T09:46:00+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "138184",
  "bugId": "138184",
  "date": "2006-04-24T15:38:44+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}