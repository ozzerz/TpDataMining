{
  "comments": [
    "When building an AJ-enabled project (from the Project-\u003eBuild menu) I sometimes get the following exception:\n\njava.lang.RuntimeException\nat org.aspectj.weaver.WeaverStateInfo.read(WeaverStateInfo.java:142)\nat org.aspectj.weaver.AjAttribute.read(AjAttribute.java:98)\nat org.aspectj.weaver.bcel.BcelAttributes.readAjAttributes(BcelAttributes.java:59)\nat org.aspectj.weaver.bcel.BcelObjectType.unpackAspectAttributes(BcelObjectType.java:273)\nat org.aspectj.weaver.bcel.BcelObjectType.\u003cinit\u003e(BcelObjectType.java:134)\nat org.aspectj.weaver.bcel.BcelWorld.makeBcelObjectType(BcelWorld.java:257)\nat org.aspectj.weaver.bcel.BcelWorld.addSourceObjectType(BcelWorld.java:314)\nat org.aspectj.weaver.bcel.BcelWeaver.addIfAspect(BcelWeaver.java:256)\nat org.aspectj.weaver.bcel.BcelWeaver.addAspectsFromDirectory(BcelWeaver.java:248)\nat org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile(BcelWeaver.java:198)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld(AjBuildManager.java:623)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:209)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:185)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:163)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nRuntimeException thrown: bad WeaverState.Kind: -115",
    "Do you by any chance have a directory on the aspectpath for that project which contains aspects built by a different version of AspectJ?",
    "(In reply to comment #1)\n\u003e Do you by any chance have a directory on the aspectpath for that project which\n\u003e contains aspects built by a different version of AspectJ?\n\u003e \nNo, no other versions of AspectJ anywhere.\n",
    "do you have anything at all on either the inpath or aspectpath?\n\nat org.aspectj.weaver.bcel.BcelWeaver.addIfAspect(BcelWeaver.java:256)\nat org.aspectj.weaver.bcel.BcelWeaver.addAspectsFromDirectory(BcelWeaver.java:248)\nat\norg.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile(BcelWeaver.java:198)\n\nthat part of the stack is only invoked if there is an aspectpath... hmmm",
    "(In reply to comment #3)\n\u003e do you have anything at all on either the inpath or aspectpath?\n\u003e \n\u003e at org.aspectj.weaver.bcel.BcelWeaver.addIfAspect(BcelWeaver.java:256)\n\u003e at\n\u003e org.aspectj.weaver.bcel.BcelWeaver.addAspectsFromDirectory(BcelWeaver.java:248)\n\u003e at\n\u003e org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile(BcelWeaver.java:198)\n\u003e \n\u003e that part of the stack is only invoked if there is an aspectpath... hmmm\n\u003e \n\nI do.  Let me explain my project structure.  It\u0027s a pretty standard MyEclipse J2EE structure, with EAR, EJB and Web projects, where Web depends on EJB and EAR, and EJB depends on EAR.  The aspect resides in the EJB project, which is AJ enabled.  I have the classes folder of the Web project in the aspectpath of the EJB project.  I have a whole separate problem with that particular scenario, but that has nothing to do with this bug (I don\u0027t think.)",
    "Re-categorizing as \"compiler\" rather than \"LTWeaving\". We should go back to the raiser to see if this still occurs. If so we can try the the new tracing infrastructure.",
    "I\u0027m guessing you are no longer seeing this problem, having either got past it or not using AJ now?  If you are please respond and I\u0027ll mark this appropriately (now we actually have some real resource working on AspectJ!) - otherwise I\u0027ll close in a few days."
  ],
  "commentCreationDates": [
    "2006-03-29T19:21:57+02:00",
    "2006-03-29T19:26:02+02:00",
    "2006-03-29T19:28:54+02:00",
    "2006-03-30T08:50:14+02:00",
    "2006-03-30T15:58:16+02:00",
    "2006-09-25T12:06:37+02:00",
    "2007-10-24T15:44:51+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "elements": [
        {
          "method": "org.aspectj.weaver.WeaverStateInfo.read",
          "source": "WeaverStateInfo.java:142"
        },
        {
          "method": "org.aspectj.weaver.AjAttribute.read",
          "source": "AjAttribute.java:98"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAttributes.readAjAttributes",
          "source": "BcelAttributes.java:59"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelObjectType.unpackAspectAttributes",
          "source": "BcelObjectType.java:273"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelObjectType.\u003cinit\u003e",
          "source": "BcelObjectType.java:134"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.makeBcelObjectType",
          "source": "BcelWorld.java:257"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.addSourceObjectType",
          "source": "BcelWorld.java:314"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addIfAspect",
          "source": "BcelWeaver.java:256"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addAspectsFromDirectory",
          "source": "BcelWeaver.java:248"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile",
          "source": "BcelWeaver.java:198"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld",
          "source": "AjBuildManager.java:623"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:209"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:185"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:163"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:117"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "133898",
      "date": "2006-03-29T19:21:57+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "133898",
  "bugId": "133898",
  "date": "2006-03-29T19:21:57+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}