{
  "comments": [
    "Using warm-up build I20070205-0009 and taken example given in buildnotes for bug 157584, I got an NPE while completing in catch formal parameter.\n\nHere\u0027s the test case I used:\npackage bug;\npublic class X {\n  void foo() throws TestException, TestOtherException {}\n  void bar() {\n    try {\n    \tfoo();\n    } catch(TestException e) {\n    } catch(Test|) //complete at \u0027|\u0027 position\n  }\n}\nclass TestException extends Exception {}\nclass TestOtherException extends Exception {}\n\nThen you\u0027ll get an NPE with following stack trace:\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.canBeSeenBy(ReferenceBinding.java:254)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.findExceptionFromTryStatement(CompletionEngine.java:2321)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.findExceptionFromTryStatement(CompletionEngine.java:2469)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:936)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:1994)\n\tat org.eclipse.jdt.internal.core.Openable.codeComplete(Openable.java:123)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:320)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:313)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.internalComputeCompletionProposals(JavaCompletionProposalComputer.java:180)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.computeCompletionProposals(JavaCompletionProposalComputer.java:148)\n\tat org.eclipse.jdt.internal.ui.text.java.CompletionProposalComputerDescriptor.computeCompletionProposals(CompletionProposalComputerDescriptor.java:303)\n\tat org.eclipse.jdt.internal.ui.text.java.CompletionProposalCategory.computeCompletionProposals(CompletionProposalCategory.java:264)\n\tat org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.collectProposals(ContentAssistProcessor.java:251)\n\tat org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.computeCompletionProposals(ContentAssistProcessor.java:220)",
    "Note that the NPE does not occur if TestException and TestOtherException are top level types defined in their own CU...\n",
    "Created an attachment (id\u003d58767)\nProposed fix\n\n",
    "Released for 3.3M6.\n\nTest added\n  CompletionTests#testCatchClauseExceptionRef14()",
    "Verified for 3.3 M6 using build I20070319-1335."
  ],
  "commentCreationDates": [
    "2007-02-06T10:13:13+01:00",
    "2007-02-06T10:14:10+01:00",
    "2007-02-12T14:16:31+01:00",
    "2007-02-12T14:19:53+01:00",
    "2007-03-20T07:28:23+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.canBeSeenBy",
          "source": "ReferenceBinding.java:254"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.findExceptionFromTryStatement",
          "source": "CompletionEngine.java:2321"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.findExceptionFromTryStatement",
          "source": "CompletionEngine.java:2469"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:936"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:1994"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.codeComplete",
          "source": "Openable.java:123"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:320"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:313"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.internalComputeCompletionProposals",
          "source": "JavaCompletionProposalComputer.java:180"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.computeCompletionProposals",
          "source": "JavaCompletionProposalComputer.java:148"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.CompletionProposalComputerDescriptor.computeCompletionProposals",
          "source": "CompletionProposalComputerDescriptor.java:303"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.CompletionProposalCategory.computeCompletionProposals",
          "source": "CompletionProposalCategory.java:264"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.collectProposals",
          "source": "ContentAssistProcessor.java:251"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.computeCompletionProposals",
          "source": "ContentAssistProcessor.java:220"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "173013",
      "date": "2007-02-06T10:13:13+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "173013",
  "bugId": "173013",
  "date": "2007-02-06T10:13:13+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}