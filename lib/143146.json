{
  "comments": [
    "NOTE: I\u0027m using BEA Workshop 9.2b to reproduce the bug:\n\n1. Create a Weblogic Server 9.2 Runtime\n2. Create a Tomcat Server Runtime 5.5\n3. launch the web project wizard.\n4. \"Weblogic Server 9.2 Runtime\" is the initial combo selection\n5. Select \"Tomcat Runtime\", Select \"WebLogic\", Select \"Tomcat Runtime\", after 3 times selection, the uncaught ClassCastException happens\n\nThis Exception happens when the first Rutime has \"defaultFacets\" (e.g. wls.web) that second Runtime does not have.\n\n!ENTRY org.eclipse.ui 4 0 2006-05-22 23:07:24.250\n!MESSAGE java.lang.String\n!STACK 0\njava.lang.ClassCastException: java.lang.String\n\tat org.eclipse.wst.common.componentcore.datamodel.FacetProjectCreationDataModelProvider.propertySet(FacetProjectCreationDataModelProvider.java:218)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.internalSetProperty(DataModelImpl.java:182)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.setProperty(DataModelImpl.java:172)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper.setProperty(DataModelSynchHelper.java:189)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper$ComboListener.modifyText(DataModelSynchHelper.java:107)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:188)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)\n\tat org.eclipse.swt.widgets.Combo.wmCommandChild(Combo.java:2025)\n\tat org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3164)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3041)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3751)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProcW(IIIII)I(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)\n\tat org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:276)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)\n\tat org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1755)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3751)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Lorg.eclipse.swt.internal.win32.MSG;)I(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2756)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:809)\n\tat org.eclipse.jface.window.Window.open(Window.java:787)\n\tat org.eclipse.ui.actions.NewProjectAction.run(NewProjectAction.java:114)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)",
    "Kosta, did you want to propose this as a 1.0.3 defect?  Would you be willing to investigate?",
    "I can take a look, but it would be nice if Jason could take a look as well since he wrote this code. The problem is that the FACET_RUNTIME data model property is expected to be an IRuntime by this code, but it\u0027s really a String. I seem to remember such a problem being fixed in the past. Perhaps it was fixed in 1.5, but not in 1.0.x line. Jason, do you remember?",
    "Another related issue:\n\n1. The runtime combo has two items: weblogic and tomcat, current selection is weblogic\n2. click next, unselect any weblogic facet and select it again.\n3. click back, now the runtime combo filters out tomcat.\nHowever, in the above step2, if i do not make changes and click back: the runtime combo won\u0027t change.\n\nSeems like the combo should not filter any item when user changes facets.  But should filter out 2nd page facets when user changes the combo.\n",
    "I think this is a dup of 138745 which for process reasons was never released; I circumvented the process and just pushed it into cvs.\n\n*** This bug has been marked as a duplicate of 138745 ***",
    "Found this problem in Eclipse3.2+WTP1.5(June27) (it seems OK in WTP1.0)\n\nTo illustrate this problem, I created a new facet \"test.ear.facet\" (requires EAR facet).  See attachment.  I made BEA Weblogic 9.0 Runtime support \"test.ear.facet\", and set it to be \"defaultFacet\" so it is initially selected.\n\nSteps:\n- Create two Server Runtime in preference: WebLogic9.0 and JBOSS4.0\n- Open EAR project wziard, in the runtime selection combo-box,  switch between Weblogic9.0 and Jboss4.0\n- ClassCastError is generated in \"PDE runtime Error View\"\njava.lang.ClassCastException\nat org.eclipse.wst.common.componentcore.datamodel.FacetProjectCreationDataModelProvider.propertySet(FacetProjectCreationDataModelProvider.java:224)\nat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.internalSetProperty(DataModelImpl.java:182)\nat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.setProperty(DataModelImpl.java:172)\nat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper.setProperty(DataModelSynchHelper.java:189)\nat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper$ComboListener.modifyText(DataModelSynchHelper.java:107)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:196)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:952)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:933)\nat org.eclipse.swt.widgets.Combo.wmCommandChild(Combo.java:2203)\nat org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3375)\nat org.eclipse.swt.widgets.Control.windowProc(Control.java:3249)\nat org.eclipse.swt.widgets.Display.windowProc(Display.java:4025)\nat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\nat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1842)\nat org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:281)\nat org.eclipse.swt.widgets.Control.windowProc(Control.java:3334)\nat org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1921)\nat org.eclipse.swt.widgets.Display.windowProc(Display.java:4025)\nat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\nat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1923)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\nat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\nat org.eclipse.jface.window.Window.open(Window.java:796)\nat org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run(WizardShortcutAction.java:94)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)\n\n",
    "Created an attachment (id\u003d47866)\nSample Plugin to illustrate the ClassCastException\n\nSample Plugin to illustrate the ClassCastException",
    "I just tested 1.5.0.v200606092300,  the ClassCastException did not happen, but it comes another problem:\n\nIn the first wizard page, the combo box is initially showing \"WEBLOGIC 9.2\" runtime; the Jboss4.0 runtime is filtered out.  User have to go to second wizard page to deselect the \"test ear facet\" and come back to first wizard page.\n\nSuppose we have runtimeA with default facetA and runtimeB with default facetB - the runtime combo box will be always empty.\n\nSo I think it\u0027s not proper to filter the serverruntime combobox of first wizard page, it should always show all.\n",
    "Opps, the recent build (1.5.0.v200606092300) also cause ClassCastException, but is tricky to reproduce.\n\nSteps:\n1. Install my little plugin\n2. Create Weblogic9.0 runtime, create jboss 4.0 runtime\n3. launch EAR project wizard.  The combobox is initially showing \"weblogic\" and \"\u003cnone\u003e\",  Select none and click next\n4. In second page, select \"Test Ear Facet\" and deselect it again, click back.\n5. Now we are back in first page, the \"JBoss\" is in the combobox.\n6. Switch between the Jboss and weblogic.  A ClassCastException is caught in Error Log.\n\n",
    "Regarding, Comment #7, this issue has already been addressed in 1.5.1.",
    "I suspect the latest problem you found is actually a duplicate of 152011 which will be fixed in this weeks 1.5.1 IBuild.\n\n*** This bug has been marked as a duplicate of 152011 ***",
    "closing as duplicate."
  ],
  "commentCreationDates": [
    "2006-05-23T08:37:26+02:00",
    "2006-05-23T15:21:12+02:00",
    "2006-05-23T16:13:47+02:00",
    "2006-05-23T21:33:42+02:00",
    "2006-06-05T18:32:21+02:00",
    "2006-08-14T22:09:57+02:00",
    "2006-08-14T22:11:00+02:00",
    "2006-08-15T00:11:10+02:00",
    "2006-08-15T00:19:21+02:00",
    "2006-08-15T05:15:09+02:00",
    "2006-08-15T15:47:35+02:00",
    "2006-09-26T18:59:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "java.lang.String",
      "elements": [
        {
          "method": "org.eclipse.wst.common.componentcore.datamodel.FacetProjectCreationDataModelProvider.propertySet",
          "source": "FacetProjectCreationDataModelProvider.java:218"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.internalSetProperty",
          "source": "DataModelImpl.java:182"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.setProperty",
          "source": "DataModelImpl.java:172"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper.setProperty",
          "source": "DataModelSynchHelper.java:189"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper$ComboListener.modifyText",
          "source": "DataModelSynchHelper.java:107"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:188"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:867"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:848"
        },
        {
          "method": "org.eclipse.swt.widgets.Combo.wmCommandChild",
          "source": "Combo.java:2025"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_COMMAND",
          "source": "Control.java:3164"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3041"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3751"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "IIIII"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "143146",
      "duplicateId": "152011",
      "date": "2006-05-23T08:37:26+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.wst.common.componentcore.datamodel.FacetProjectCreationDataModelProvider.propertySet",
          "source": "FacetProjectCreationDataModelProvider.java:224"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.internalSetProperty",
          "source": "DataModelImpl.java:182"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.setProperty",
          "source": "DataModelImpl.java:172"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper.setProperty",
          "source": "DataModelSynchHelper.java:189"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelSynchHelper$ComboListener.modifyText",
          "source": "DataModelSynchHelper.java:107"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:196"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:952"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:933"
        },
        {
          "method": "org.eclipse.swt.widgets.Combo.wmCommandChild",
          "source": "Combo.java:2203"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_COMMAND",
          "source": "Control.java:3375"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3249"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4025"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1842"
        },
        {
          "method": "org.eclipse.swt.widgets.Combo.callWindowProc",
          "source": "Combo.java:281"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3334"
        },
        {
          "method": "org.eclipse.swt.widgets.Combo.windowProc",
          "source": "Combo.java:1921"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4025"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1923"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run",
          "source": "WizardShortcutAction.java:94"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:539"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 1,
      "commentIndex": 5,
      "bugId": "143146",
      "duplicateId": "152011",
      "date": "2006-08-14T22:09:57+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "major"
    }
  ],
  "groupId": "152011",
  "bugId": "143146",
  "duplicateId": "152011",
  "date": "2006-05-23T08:37:26+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "major"
}