{
  "comments": [
    "In the following build output:\n\nhttp://fullmoon/eclipse/downloads/drops/N20060221-0010/testresults/consolelogs/macosx.carbon_consolelog.txt\n\nThere are a large number of NPEs. These are caused by EclipsePreferences.put being called with a null parameter.\n\n\nFull stack trace:\n\njava.lang.NullPointerException\n at org.eclipse.core.internal.preferences.EclipsePreferences.put(EclipsePreferences.java:758)\n at org.eclipse.jdt.internal.core.JavaModelManager$EclipsePreferencesListener.preferenceChange(JavaModelManager.java:1006)\n at org.eclipse.core.internal.preferences.EclipsePreferences$2.run(EclipsePreferences.java:746)\n at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n at org.eclipse.core.internal.preferences.EclipsePreferences.firePreferenceEvent(EclipsePreferences.java:749)\n at org.eclipse.core.internal.preferences.EclipsePreferences.put(EclipsePreferences.java:762)\n at org.eclipse.jdt.internal.core.JavaModelManager.variablePut(JavaModelManager.java:3918)\n at org.eclipse.jdt.internal.core.JavaModelManager.updateVariableValues(JavaModelManager.java:3810)\n at org.eclipse.jdt.core.JavaCore.setClasspathVariables(JavaCore.java:4306)\n at org.eclipse.jdt.core.JavaCore.setClasspathVariable(JavaCore.java:4271)\n at org.eclipse.jdt.core.tests.model.ClasspathInitializerTests$DefaultVariableInitializer.initialize(ClasspathInitializerTests.java:44)\n at org.eclipse.jdt.core.tests.model.VariablesInitializer.initialize(VariablesInitializer.java:43)\n at org.eclipse.jdt.core.JavaCore.getClasspathVariable(JavaCore.java:1584)\n at org.eclipse.jdt.core.tests.model.ClasspathInitializerTests.testVariableInitializer11(ClasspathInitializerTests.java:898)",
    "Fixed and released in HEAD.\n\nTo avoid polluting messages in console, I added a null check on option value before reset it.\n\nOlivier, if you have any time, I will be really interested in having feedback on reason why property value is null only on Mac/OS box, TIA\n",
    "Changing title since this is not related to Mac. Same errors occur on Windows and Linux.\nThis needs more investigation. Right now executing testVariableInitializer01 before testVariableInitializer02 is different from executing only testVariableInitializer02. testVariableInitializer01 has a side-effect when executing testVariableInitializer02.\nThe javamodel.variablesWithInitializer field doesn\u0027t have the same value if testVariableInitializer02 is run alone or testVariableInitializer01 is executed first when running testVariableInitializer02.\nA test should not be dependant or affected by the execution of another test.",
    "Problem comes from the fact that variables were not removed from JavaModelManager variablesWithInitializer cache when their value was reset. This was intentionally done as I thought that initializers may only be specified in extensions and so cannot be removed during an eclipse session.\n\nI was obviously wrong as users can use JavaCore API programatically (as we do in our tests!) and add/remove initializers... So, the fix is to remove the variable name from this cache when the value is set to null in putVariable(...) method in JavaModelManager..\n\nNote that remove this variable name from cache before updating eclipse preferences also avoid to call preferences listener with a wrong value and avoid to refresh preferences unnecessarily (see fix for bug 125965).\n\nI keep null check as ultimate protection \u003d\u003e in this case, variable name is removed from cache...",
    "Fixed and released in HEAD.\n",
    "Verified using I20060328-0010 for 3.2M6 since tests passed for a long time now."
  ],
  "commentCreationDates": [
    "2006-02-21T15:22:46+01:00",
    "2006-02-27T12:47:08+01:00",
    "2006-02-27T18:37:35+01:00",
    "2006-02-27T21:53:09+01:00",
    "2006-02-27T21:54:56+01:00",
    "2006-03-28T16:54:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.preferences.EclipsePreferences.put",
          "source": "EclipsePreferences.java:758"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager$EclipsePreferencesListener.preferenceChange",
          "source": "JavaModelManager.java:1006"
        },
        {
          "method": "org.eclipse.core.internal.preferences.EclipsePreferences$2.run",
          "source": "EclipsePreferences.java:746"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.preferences.EclipsePreferences.firePreferenceEvent",
          "source": "EclipsePreferences.java:749"
        },
        {
          "method": "org.eclipse.core.internal.preferences.EclipsePreferences.put",
          "source": "EclipsePreferences.java:762"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.variablePut",
          "source": "JavaModelManager.java:3918"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.updateVariableValues",
          "source": "JavaModelManager.java:3810"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.setClasspathVariables",
          "source": "JavaCore.java:4306"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.setClasspathVariable",
          "source": "JavaCore.java:4271"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.ClasspathInitializerTests$DefaultVariableInitializer.initialize",
          "source": "ClasspathInitializerTests.java:44"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.VariablesInitializer.initialize",
          "source": "VariablesInitializer.java:43"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathVariable",
          "source": "JavaCore.java:1584"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.ClasspathInitializerTests.testVariableInitializer11",
          "source": "ClasspathInitializerTests.java:898"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "128814",
      "date": "2006-02-21T15:22:46+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "128814",
  "bugId": "128814",
  "date": "2006-02-21T15:22:46+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}