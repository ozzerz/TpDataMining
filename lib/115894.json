{
  "comments": [
    "I\u0027m using a resource change listener to update an EAR\u0027s application.xml via the  \norg.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation;\n\nthis is causing a SWTException when the XMLTableTreeContentProvider is notified:\n\n\n!ENTRY org.eclipse.wst.sse.core 4 4 2005-11-10 12:41:50.609\n!MESSAGE A structured model client,\norg.eclipse.wst.xml.ui.internal.tabletree.XMLTableTreeContentProvider$ViewerNotifyingAdapter@c8a604\nthrew following exception during adapter notification (STRUCUTRED_CHANGED )\n!STACK 0\norg.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:2942)\n\tat org.eclipse.swt.SWT.error(SWT.java:2865)\n\tat org.eclipse.swt.SWT.error(SWT.java:2836)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:395)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:298)\n\tat org.eclipse.swt.widgets.Tree.getSelection(Tree.java:1222)\n\tat org.eclipse.jface.viewers.TreeViewer.getSelection(TreeViewer.java:413)\n\tat org.eclipse.jface.viewers.TreeViewer.setSelection(TreeViewer.java:580)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:1605)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget(StructuredViewer.java:1496)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1208)\n\tat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1262)\n\tat\norg.eclipse.wst.xml.ui.internal.tabletree.XMLTableTreeViewer.refresh(XMLTableTreeViewer.java:112)\n\tat\norg.eclipse.wst.xml.ui.internal.tabletree.XMLTableTreeContentProvider$ViewerNotifyingAdapter.notifyChanged(XMLTableTreeContentProvider.java:311)\n\tat\norg.eclipse.wst.sse.core.internal.provisional.AbstractNotifier.notify(AbstractNotifier.java:201)\n\tat\norg.eclipse.wst.xml.core.internal.document.XMLModelNotifierImpl.notifyStructureChanged(XMLModelNotifierImpl.java:361)\n\tat\norg.eclipse.wst.xml.core.internal.document.XMLModelNotifierImpl.structureChanged(XMLModelNotifierImpl.java:423)\n\tat\norg.eclipse.wst.xml.core.internal.document.XMLModelNotifierImpl.childReplaced(XMLModelNotifierImpl.java:157)\n\tat\norg.eclipse.wst.xml.core.internal.document.DOMModelImpl.childReplaced(DOMModelImpl.java:190)\n\tat\norg.eclipse.wst.xml.core.internal.document.NodeContainer.notifyChildReplaced(NodeContainer.java:357)\n\tat\norg.eclipse.wst.xml.core.internal.document.NodeContainer.removeChild(NodeContainer.java:401)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.removeDOMChild(EMF2DOMAdapterImpl.java:648)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.removeDOMChild(EMF2DOMAdapterImpl.java:634)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMultiFeature(EMF2DOMAdapterImpl.java:337)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMultiFeature(EMF2DOMAdapterImpl.java:1306)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMMultiFeature(EMF2DOMAdapterImpl.java:1558)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMFeature(EMF2DOMAdapterImpl.java:1497)\n\tat\norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.notifyChanged(EMF2DOMAdapterImpl.java:996)\n\tat\norg.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:229)\n\tat\norg.eclipse.emf.common.notify.impl.NotificationChainImpl.dispatch(NotificationChainImpl.java:113)\n\tat\norg.eclipse.emf.common.notify.impl.NotificationChainImpl.dispatch(NotificationChainImpl.java:101)\n\tat\norg.eclipse.emf.common.notify.impl.NotifyingListImpl.remove(NotifyingListImpl.java:513)\n\tat org.eclipse.emf.common.util.BasicEList.remove(BasicEList.java:794)\n\tat\norg.eclipse.jst.j2ee.refactor.operations.RemoveDeletedComponentFromEAROperation.removeModule(RemoveDeletedComponentFromEAROperation.java:47)\n\tat\norg.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation.updateEARDD(RemoveComponentFromEnterpriseApplicationOperation.java:45)\n\tat\norg.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation.execute(RemoveComponentFromEnterpriseApplicationOperation.java:28)\n\tat\norg.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonDeleteOp.removeEARDependency(UpdateDependentEARonDeleteOp.java:71)\n\tat\norg.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonRenameOp.execute(UpdateDependentEARonRenameOp.java:65)\n\tat\norg.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute(ExtendableOperationImpl.java:161)\n\tat\norg.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run(ExtendableOperationImpl.java:129)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1739)\n\tat\norg.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute(ExtendableOperationImpl.java:135)\n\tat\norg.eclipse.jst.j2ee.refactor.operations.ProjectRenameOperation.updateDependentEARProject(ProjectRenameOperation.java:82)\n\tat\norg.eclipse.jst.j2ee.refactor.operations.ProjectRefactorOperation.execute(ProjectRefactorOperation.java:63)\n\tat\norg.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute(ExtendableOperationImpl.java:161)\n\tat\norg.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run(ExtendableOperationImpl.java:129)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat\norg.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute(ExtendableOperationImpl.java:137)\n\tat\norg.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.processRename(ProjectRefactoringListener.java:203)\n\tat\norg.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.processProjectDelta(ProjectRefactoringListener.java:173)\n\tat\norg.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.visit(ProjectRefactoringListener.java:134)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:68)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)\n\tat\norg.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.resourceChanged(ProjectRefactoringListener.java:108)\n\tat\norg.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:783)\n\tat\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)\n\tat\norg.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)\n\tat\norg.eclipse.core.internal.resources.Workspace.broadcastBuildEvent(Workspace.java:185)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:137)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)",
    "hey Nitin: I changed the way I\u0027m triggering the ops on resource events\n(POST_CHANGE via a WorkspaceJob) and now I\u0027m no longer seeing this SWTException;\nbased on the stack, it looks like this might still be a potential issue for\nXMLTableTreeContentProvider, however, it no longer impacts the refactoring logic\nso I\u0027m dropping the severity and disassociating. -Rob",
    "hmmm, sorry, it\u0027s still showing up",
    "Fixed.  Refresh is now triggered by a delay from the JFaceNodeAdapters and\nhappens on the correct thread.",
    "Closing"
  ],
  "commentCreationDates": [
    "2005-11-10T19:46:59+01:00",
    "2005-11-10T21:26:04+01:00",
    "2005-11-10T21:30:01+01:00",
    "2005-11-15T23:46:20+01:00",
    "2006-06-29T20:27:45+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2942"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2865"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2836"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:395"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:298"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.getSelection",
          "source": "Tree.java:1222"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.getSelection",
          "source": "TreeViewer.java:413"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.setSelection",
          "source": "TreeViewer.java:580"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget",
          "source": "AbstractTreeViewer.java:1605"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget",
          "source": "StructuredViewer.java:1496"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:1208"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
          "source": "StructuredViewer.java:1262"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.tabletree.XMLTableTreeViewer.refresh",
          "source": "XMLTableTreeViewer.java:112"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.tabletree.XMLTableTreeContentProvider$ViewerNotifyingAdapter.notifyChanged",
          "source": "XMLTableTreeContentProvider.java:311"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.provisional.AbstractNotifier.notify",
          "source": "AbstractNotifier.java:201"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.document.XMLModelNotifierImpl.notifyStructureChanged",
          "source": "XMLModelNotifierImpl.java:361"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.document.XMLModelNotifierImpl.structureChanged",
          "source": "XMLModelNotifierImpl.java:423"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.document.XMLModelNotifierImpl.childReplaced",
          "source": "XMLModelNotifierImpl.java:157"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.document.DOMModelImpl.childReplaced",
          "source": "DOMModelImpl.java:190"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.document.NodeContainer.notifyChildReplaced",
          "source": "NodeContainer.java:357"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.document.NodeContainer.removeChild",
          "source": "NodeContainer.java:401"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.removeDOMChild",
          "source": "EMF2DOMAdapterImpl.java:648"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.removeDOMChild",
          "source": "EMF2DOMAdapterImpl.java:634"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:337"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1306"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1558"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMFeature",
          "source": "EMF2DOMAdapterImpl.java:1497"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.notifyChanged",
          "source": "EMF2DOMAdapterImpl.java:996"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify",
          "source": "BasicNotifierImpl.java:229"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotificationChainImpl.dispatch",
          "source": "NotificationChainImpl.java:113"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotificationChainImpl.dispatch",
          "source": "NotificationChainImpl.java:101"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.remove",
          "source": "NotifyingListImpl.java:513"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList.remove",
          "source": "BasicEList.java:794"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.RemoveDeletedComponentFromEAROperation.removeModule",
          "source": "RemoveDeletedComponentFromEAROperation.java:47"
        },
        {
          "method": "org.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation.updateEARDD",
          "source": "RemoveComponentFromEnterpriseApplicationOperation.java:45"
        },
        {
          "method": "org.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation.execute",
          "source": "RemoveComponentFromEnterpriseApplicationOperation.java:28"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonDeleteOp.removeEARDependency",
          "source": "UpdateDependentEARonDeleteOp.java:71"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonRenameOp.execute",
          "source": "UpdateDependentEARonRenameOp.java:65"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute",
          "source": "ExtendableOperationImpl.java:161"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run",
          "source": "ExtendableOperationImpl.java:129"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1739"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute",
          "source": "ExtendableOperationImpl.java:135"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectRenameOperation.updateDependentEARProject",
          "source": "ProjectRenameOperation.java:82"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorOperation.execute",
          "source": "ProjectRefactorOperation.java:63"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute",
          "source": "ExtendableOperationImpl.java:161"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run",
          "source": "ExtendableOperationImpl.java:129"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute",
          "source": "ExtendableOperationImpl.java:137"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.processRename",
          "source": "ProjectRefactoringListener.java:203"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.processProjectDelta",
          "source": "ProjectRefactoringListener.java:173"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.visit",
          "source": "ProjectRefactoringListener.java:134"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:68"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:49"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener.resourceChanged",
          "source": "ProjectRefactoringListener.java:108"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$2.run",
          "source": "NotificationManager.java:276"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:270"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:144"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastBuildEvent",
          "source": "Workspace.java:185"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:137"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "115894",
      "date": "2005-11-10T19:46:59+01:00",
      "product": "Web Tools",
      "component": "wst.xml",
      "severity": "normal"
    }
  ],
  "groupId": "115894",
  "bugId": "115894",
  "date": "2005-11-10T19:46:59+01:00",
  "product": "Web Tools",
  "component": "wst.xml",
  "severity": "normal"
}