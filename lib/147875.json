{
  "comments": [
    "An error occurs while generating the AST resulting in a NULL AST.  I will attach a project where the class has the problem.  Here is the error:\n\neclipse.buildId\u003dI20060602-1317\njava.version\u003d1.5.0_06\njava.vendor\u003dApple Computer, Inc.\nBootLoader constants: OS\u003dmacosx, ARCH\u003dx86, WS\u003dcarbon, NL\u003den_US\nFramework arguments:  -keyring /Users/Jesse/.eclipse_keyring -showlocation\nCommand-line arguments:  -os macosx -ws carbon -keyring /Users/Jesse/.eclipse_keyring -consoleLog -showlocation\nThis is a continuation of log file /Users/Jesse/Development/workspace/udig/udig3.1/.metadata/.bak_2.log\nCreated Time: 2006-06-19 23:12:38.956\n\nError\nTue Jun 20 07:49:31 PDT 2006\nError in JDT Core during AST creation\n\njava.lang.NullPointerException\nat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding$2.compare(ReferenceBinding.java:49)\nat java.util.Arrays.mergeSort(Arrays.java:1284)\nat java.util.Arrays.sort(Arrays.java:1265)\nat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.sortFields(ReferenceBinding.java:153)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.getField(BinaryTypeBinding.java:708)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.convertMemberValue(BinaryTypeBinding.java:62)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotation(BinaryTypeBinding.java:82)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotations(BinaryTypeBinding.java:92)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createFields(BinaryTypeBinding.java:344)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.cachePartsFrom(BinaryTypeBinding.java:312)\nat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:579)\nat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:558)\nat org.eclipse.jdt.internal.compiler.Compiler.accept(Compiler.java:272)\nat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:102)\nat org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve(UnresolvedReferenceBinding.java:43)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType(BinaryTypeBinding.java:97)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.convertMemberValue(BinaryTypeBinding.java:61)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotation(BinaryTypeBinding.java:82)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotations(BinaryTypeBinding.java:92)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethod(BinaryTypeBinding.java:483)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethods(BinaryTypeBinding.java:530)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.cachePartsFrom(BinaryTypeBinding.java:313)\nat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:579)\nat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:558)\nat org.eclipse.jdt.internal.compiler.Compiler.accept(Compiler.java:272)\nat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:102)\nat org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve(UnresolvedReferenceBinding.java:43)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveUnresolvedType(BinaryTypeBinding.java:138)\nat org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.superInterfaces(BinaryTypeBinding.java:920)\nat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.implementsInterface(ReferenceBinding.java:791)\nat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.isCompatibleWith0(ReferenceBinding.java:937)\nat org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.isCompatibleWith(ReferenceBinding.java:890)\nat org.eclipse.jdt.internal.compiler.lookup.Scope.parameterCompatibilityLevel(Scope.java:3495)\nat org.eclipse.jdt.internal.compiler.lookup.Scope.parameterCompatibilityLevel(Scope.java:3483)\nat org.eclipse.jdt.internal.compiler.lookup.Scope.computeCompatibleMethod(Scope.java:443)\nat org.eclipse.jdt.internal.compiler.lookup.Scope.getConstructor(Scope.java:1605)\nat org.eclipse.jdt.internal.compiler.ast.AllocationExpression.resolveType(AllocationExpression.java:301)\nat org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType(MessageSend.java:344)\nat org.eclipse.jdt.internal.compiler.ast.Expression.resolve(Expression.java:880)\nat org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:432)\nat org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:179)\nat org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:403)\nat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1047)\nat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1094)\nat org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:353)\nat org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:882)\nat org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:508)\nat org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:832)\nat org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:630)\nat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$1.run(ASTProvider.java:605)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST(ASTProvider.java:600)\nat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST(ASTProvider.java:514)\nat org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo(NLSStringHover.java:86)\nat org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo(BestMatchHover.java:102)\nat org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo(JavaEditorTextHoverProxy.java:69)\nat org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:160)",
    "Could be a dup of bug 143259.\nCould you please try with latest integration build?",
    "*** Bug 147880 has been marked as a duplicate of this bug. ***",
    "Tried integration build I20060620-1010 and bug still exists.  I have put a small project that illustrates the bug online at:\n\nudig.refractions.net/NullASTBug.zip\n\nBoth classes demonstrate the bug.  \n\nIn Test.java you can make the AST generate correctly by changing DefaultGeographicCRS.WGS84 to null.  (And make it fail by switching it back)\n\nLet me know if you still have questions.",
    "Reproduced.\nThanks for the test case.\nPhilippe,\nThe given test case reproduces the problem. The annotation initialization seems to be responsible of the NPE.",
    "Created an attachment (id\u003d45465)\nProposed patch\n\nThis is a bug due to reentrance, where an annotation on a binary field is denoting a field of the same binary type, which hasn\u0027t yet been constructed.\n\nFix is to defer the annotation reification after the initial fields construction.\n",
    "Olivier - could you construct a DOM AST regression test ?\nProblem is located on binary ref to org.opengis.annotation.Obligation which fields carry some self-referring annotations.",
    "Olivier - pls release the changes to both HEAD and 3.2.1, once you have the regression test.",
    "Released for 3.3 M1.\nRegression test added in org.eclipse.jdt.core.tests.dom.ASTConverter15Test.test0221.",
    "Released for 3.2.1.\nSame regression test.",
    "Verified for 3.3 M1 using build I20060807-2000.",
    "Verified for 3.2.1 using build M20060908-1655"
  ],
  "commentCreationDates": [
    "2006-06-20T16:53:59+02:00",
    "2006-06-20T16:59:10+02:00",
    "2006-06-20T19:47:12+02:00",
    "2006-06-21T03:31:20+02:00",
    "2006-06-21T04:40:23+02:00",
    "2006-06-28T16:08:42+02:00",
    "2006-06-28T16:12:04+02:00",
    "2006-06-28T18:46:28+02:00",
    "2006-06-28T19:12:41+02:00",
    "2006-06-28T19:24:47+02:00",
    "2006-08-08T15:37:13+02:00",
    "2006-09-12T10:05:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding$2.compare",
          "source": "ReferenceBinding.java:49"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1284"
        },
        {
          "method": "java.util.Arrays.sort",
          "source": "Arrays.java:1265"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.sortFields",
          "source": "ReferenceBinding.java:153"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.getField",
          "source": "BinaryTypeBinding.java:708"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.convertMemberValue",
          "source": "BinaryTypeBinding.java:62"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotation",
          "source": "BinaryTypeBinding.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotations",
          "source": "BinaryTypeBinding.java:92"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createFields",
          "source": "BinaryTypeBinding.java:344"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.cachePartsFrom",
          "source": "BinaryTypeBinding.java:312"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom",
          "source": "LookupEnvironment.java:579"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom",
          "source": "LookupEnvironment.java:558"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.accept",
          "source": "Compiler.java:272"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType",
          "source": "LookupEnvironment.java:102"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve",
          "source": "UnresolvedReferenceBinding.java:43"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType",
          "source": "BinaryTypeBinding.java:97"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.convertMemberValue",
          "source": "BinaryTypeBinding.java:61"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotation",
          "source": "BinaryTypeBinding.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createAnnotations",
          "source": "BinaryTypeBinding.java:92"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethod",
          "source": "BinaryTypeBinding.java:483"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethods",
          "source": "BinaryTypeBinding.java:530"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.cachePartsFrom",
          "source": "BinaryTypeBinding.java:313"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom",
          "source": "LookupEnvironment.java:579"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom",
          "source": "LookupEnvironment.java:558"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.accept",
          "source": "Compiler.java:272"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType",
          "source": "LookupEnvironment.java:102"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve",
          "source": "UnresolvedReferenceBinding.java:43"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveUnresolvedType",
          "source": "BinaryTypeBinding.java:138"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.superInterfaces",
          "source": "BinaryTypeBinding.java:920"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.implementsInterface",
          "source": "ReferenceBinding.java:791"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.isCompatibleWith0",
          "source": "ReferenceBinding.java:937"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.isCompatibleWith",
          "source": "ReferenceBinding.java:890"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.parameterCompatibilityLevel",
          "source": "Scope.java:3495"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.parameterCompatibilityLevel",
          "source": "Scope.java:3483"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.computeCompatibleMethod",
          "source": "Scope.java:443"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getConstructor",
          "source": "Scope.java:1605"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AllocationExpression.resolveType",
          "source": "AllocationExpression.java:301"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType",
          "source": "MessageSend.java:344"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.Expression.resolve",
          "source": "Expression.java:880"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements",
          "source": "AbstractMethodDeclaration.java:432"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements",
          "source": "MethodDeclaration.java:179"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:403"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1047"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1094"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve",
          "source": "CompilationUnitResolver.java:882"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve",
          "source": "CompilationUnitResolver.java:508"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.internalCreateAST",
          "source": "ASTParser.java:832"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.createAST",
          "source": "ASTParser.java:630"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$1.run",
          "source": "ASTProvider.java:605"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST",
          "source": "ASTProvider.java:600"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST",
          "source": "ASTProvider.java:514"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.NLSStringHover.getHoverInfo",
          "source": "NLSStringHover.java:86"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo",
          "source": "BestMatchHover.java:102"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo",
          "source": "JavaEditorTextHoverProxy.java:69"
        },
        {
          "method": "org.eclipse.jface.text.TextViewerHoverManager$4.run",
          "source": "TextViewerHoverManager.java:160"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "147875",
      "date": "2006-06-20T16:53:59+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "147875",
  "bugId": "147875",
  "date": "2006-06-20T16:53:59+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}