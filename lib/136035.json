{
  "comments": [
    "Description:\nHighlight doesn\u0027t work in chart.\n\nSteps to reproduce:\n1. Insert a chart.\n2. Define highlight rule in chart item with condition 1 equal to 1.\n3. Preview.\n\nExpected result:\nHighlight style takes effect.\n\nActual result:\nNo effect.",
    "Currently Report Engine doesn\u0027t provide appropriate api to return this style info for extended items.",
    "Reassigning to report engine",
    "Agreed with Wei to add a new method setDynamicStyle(IStyle style) in \nIReportItemPresentation.",
    "Reassign to Wei to add the new method in the interface.",
    "Add a new method setDynamicStyle(IStyle style) in \nIReportItemPresentation.\n\nWhen execute extended item, the computed style of extended item will be set into IReportItemPresentation using setDynamicStyle(IStyle style) after model object, script context and queries are set.\n\n",
    "Improve the BIRTStyleProcessor to use this dynamic style as well as the private \nstyle. Make sure the merging is working correctly, i.e. if a style is defined \non the chart and the highlight defines a new style, they need to be merged. \nLook how other report items behave so the chart behaves the same way.",
    "Fixed in ChartReportStyleProcessor",
    "The way the colors are parsed in BIRTStyleProcessor is incorrect:\n\nif ( dstyle !\u003d null )\n{\n\tString color \u003d dstyle.getBackgroundColor( );\n\tint r \u003d Integer.valueOf( color.substring( 4,\n\tcolor.indexOf( \",\" ) ).trim( ) ).intValue( ); //$NON-NLS-1$\n\tint g \u003d Integer.valueOf( color.substring( color.indexOf( \",\" ) + 1, \ncolor.indexOf( \",\", color.indexOf( \",\" ) + 1 ) ).trim( ) ).intValue( ); \n//$NON-NLS-1$//$NON-NLS-2$//$NON-NLS-3$\n\tint b \u003d Integer.valueOf( color.substring( color.lastIndexOf( \",\" ) + 1, \ncolor.length( ) - 1 ).trim( ) ).intValue( );//$NON-NLS-1$\n\tss.setBackgroundColor( ColorDefinitionImpl.create( r, g, b ) );\n}\n\nThe background color returned by the dstyle is a css2 \nproperty:http://www.w3.org/TR/REC-CSS2/colors.html#background-properties\n\nIt can be a color, \"transparent\" or \"inherit\". For a report with no style set, \nit actually returns \"transparent\" causing a runtime exception and the chart is \nnot rendered:\nCaused by: java.lang.StringIndexOutOfBoundsException: String index out of \nrange: -5 at java.lang.String.substring(String.java:1768) at \norg.eclipse.birt.chart.reportitem.ChartReportStyleProcessor.getStyle(ChartReportStyleProcessor.java:222) \nat \norg.eclipse.birt.chart.factory.Generator.updateHierarchyStyle(Generator.java:406)\n\nFix to do:\n- improve the CSS2 parsing to handle non-rgb values such as transparent or \nother colors formats. See the CSS2 color syntax: \nhttp://www.w3.org/TR/REC-CSS2/syndata.html#value-def-color\nIf we don\u0027t have time to implement parsing of every CSS2 format, catch runtime \nexceptions in parsing to simply ignore the color instead of failing to render \nthe chart (and then log something and assert false in the catch)\n\n- Refactor parsing code throughout the processor.  There might be some CSS2 \nparsing code already available in DE or Report Engine we could reuse to convert \na CSS2 color in a  array of int.",
    "The CSS2 parsing code exists in engine.pdf, so it\u0027s not able to reuse the related methods. While DE team uses the different color set (standard) with Engine, so we cannot use the ColorUtil.java from DE.\n\nFixed the RuntimeException by adding getColor( ) to parse the CSSValue.",
    "Verified in build 20060427"
  ],
  "commentCreationDates": [
    "2006-04-11T05:45:45+02:00",
    "2006-04-11T08:01:49+02:00",
    "2006-04-11T09:34:39+02:00",
    "2006-04-11T15:32:27+02:00",
    "2006-04-12T14:58:10+02:00",
    "2006-04-20T10:14:27+02:00",
    "2006-04-20T15:56:59+02:00",
    "2006-04-25T07:14:45+02:00",
    "2006-04-25T19:33:01+02:00",
    "2006-04-26T09:56:17+02:00",
    "2006-04-27T09:25:22+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StringIndexOutOfBoundsException",
      "message": "String index out of  range: -5",
      "elements": [
        {
          "method": "java.lang.String.substring",
          "source": "String.java:1768"
        },
        {
          "method": "org.eclipse.birt.chart.reportitem.ChartReportStyleProcessor.getStyle",
          "source": "ChartReportStyleProcessor.java:222"
        },
        {
          "method": "org.eclipse.birt.chart.factory.Generator.updateHierarchyStyle",
          "source": "Generator.java:406"
        }
      ],
      "number": 0,
      "commentIndex": 8,
      "bugId": "136035",
      "date": "2006-04-25T19:33:01+02:00",
      "product": "BIRT",
      "component": "Chart",
      "severity": "major"
    }
  ],
  "groupId": "136035",
  "bugId": "136035",
  "date": "2006-04-11T05:45:45+02:00",
  "product": "BIRT",
  "component": "Chart",
  "severity": "major"
}