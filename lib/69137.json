{
  "comments": [
    "Create a new Visual Class extenting other and the Object superclass, in a java \nproject that the SWT library added.\n\nDrop a SWT Shell on to the canvas, and select its layout as FillLayout.\n\nDrop 4 or 5 separate SWT components on to the Shell. Then select two and move \nthem around on the Shell. Repeat this a couple of times.\nSelect \u0027Undo\u0027 just once (then sit back and watch the show).\n\nInstead of just un-doing the last action, it un-does the last six or seven  \nactions at once - plus creating errors.",
    "Sri... another undo problem... probably a dup of bug 69478",
    "*** Bug 69634 has been marked as a duplicate of this bug. ***",
    "*** Bug 69639 has been marked as a duplicate of this bug. ***",
    "On the latest code base the undo seems to work fine... no more flashing or\nmultiple redraws on the canvas and the code generation seems to work as well.\n\nBut a NPE is thrown when you move/drop the two controls in the FillLayout to a\nnew position. \n\nEugene, please investigate. Thx...",
    "Here\u0027s the NPE stack trace:\njava.lang.NullPointerException\n\tat\norg.eclipse.ve.internal.cde.core.VisualComponentsLayoutPolicy$ConstraintRefreshPolicy.signalRefresh(VisualComponentsLayoutPolicy.java:141)\n\tat\norg.eclipse.ve.internal.cde.core.VisualComponentsLayoutPolicy$ConstraintRefreshPolicy.componentRefreshed(VisualComponentsLayoutPolicy.java:194)\n\tat\norg.eclipse.ve.internal.cde.core.VisualComponentSupport.fireComponentRefreshed(VisualComponentSupport.java:86)\n\tat org.eclipse.ve.internal.swt.ControlManager$1.run(ControlManager.java:235)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:106)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2749)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2434)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:183)\n\tat org.eclipse.core.launcher.Main.run(Main.java:644)\n\tat org.eclipse.core.launcher.Main.main(Main.java:628)",
    "*** Bug 69210 has been marked as a duplicate of this bug. ***",
    "Here\u0027s my contribution to the \"storm\" of problems with \"undo\":\n\n1)Drop 6 buttons on the shell in FillLayout\n2)give labels from 1 to 6 from left to right\n3)move button \"6\" in front of \"1\"\n4)\"undo\"\n\nPROBLEM: in the ErrorLog view there\u0027s an error: \"Invalid PropertyDecorator\" \nand there\u0027s one button less on the graph view\n\nPeter? do i need to open up a new bug for this one?",
    "I was able to replicate that problem:\n\n1)drop 3 buttons onto fill layout, give labels \"1\",\"2\",\"3\" starting from left\n2)select \"2\",\"3\" and drop in front of \"1\"\n\nThis NPE is thrown in the signalRefresh() of the \nVisualComponentsLayoutPolicy.java\n\nBy some reason refresh is fired when component is deactivated and in the \nmethod below visualComponent \u003d\u003d null.\n\nprotected void signalRefresh() {\n// Get the current bounds and set the figure\u0027s constraint.\nfinal Rectangle bounds \u003d visualComponent.getBounds().getCopy();\ngetDisplay().asyncExec(new Runnable() {\n/**\n * @see java.lang.Runnable#run()\n */\npublic void run() {\n\tEditPart ep \u003d getHost();\n\tif (ep.isActive())\n\t((GraphicalEditPart) VisualComponentsLayoutPolicy.this.getHost\n()).setLayoutConstraint(getHost(), ((GraphicalEditPart) getHost()).getFigure\n(), bounds);\t\t\t\t\t\n}\n});\n}\n\nNB:The simple solution can be just to return if visualComponent\u003d\u003dnull but as \nsoon as we shouldn\u0027t hit that point the problem be elsewhere.",
    "Rich, could this be a timing problem with activate/deactivate when doing the move?",
    "It could be a timing isse. I haven\u0027t had time to step in and doing any debugging.",
    "Rich... given that Eugene has a quick manner to reCreate this, we need to size\nit for 1.0.2 to see if it is containable.  If it is not, move the target to v1.1",
    "Created an attachment (id\u003d15460)\nClass that I used for the tests.\n",
    "This no longer occurs. We did some cleanup and I don\u0027t see it now. However we do\nget some other wierd errors. I\u0027ve attached the class I\u0027ve used to test this.",
    "Created an attachment (id\u003d15461)\n.log file for this test\n\nIf you do the following:\n\n1) On graphical, multiselect in this order, \"3\", then \"2\"\n2) Drag these to the left side of \"1\" and release\n3) This works and they are reordered.\n4) Then hit undo and you get the attached log file, AND the order results in\n\"1\", \"3\", \"2\" instead of 1,2,3 which undo should of done.",
    "Created an attachment (id\u003d15462)\n.log for this test\n\nNext problem, start with fresh editor on the class:\n\n1) From BeansList select \"2\", then \"3\", and then drag up to before \"1\"\n2) This works but the log file is generated.\n",
    "This problem looks very similar to the problem in defect 77074. Please try to\nre-create this after catching up to the changes in class BDMMerger. I was not\nable to recreate the problem after catching up with the latest class. There was\na problem with the source update mechanism to do with offset changes of\nconstructors (undo/redo) which was fixed in 77074. \nPlease close the defect if the problem no longer exists.\n",
    "I\u0027ve checked this out on the latest build and the original issue doesn\u0027t seem \nto be happening, so I guess it could be closed.\nP.",
    "Fixed as per Paul\u0027s comments.",
    "Verified as Fixed"
  ],
  "commentCreationDates": [
    "2004-07-01T16:29:49+02:00",
    "2004-07-09T22:31:28+02:00",
    "2004-07-09T22:31:52+02:00",
    "2004-07-09T23:13:06+02:00",
    "2004-08-17T01:55:18+02:00",
    "2004-08-17T01:59:05+02:00",
    "2004-08-17T02:02:50+02:00",
    "2004-08-19T11:54:04+02:00",
    "2004-08-19T16:49:26+02:00",
    "2004-08-19T19:13:54+02:00",
    "2004-08-19T22:48:08+02:00",
    "2004-10-18T22:02:15+02:00",
    "2004-10-29T01:03:56+02:00",
    "2004-10-29T01:06:08+02:00",
    "2004-10-29T01:07:23+02:00",
    "2004-10-29T01:09:45+02:00",
    "2004-10-31T20:58:36+01:00",
    "2004-11-23T10:14:38+01:00",
    "2004-11-23T11:54:57+01:00",
    "2004-12-01T09:51:18+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ve.internal.cde.core.VisualComponentsLayoutPolicy$ConstraintRefreshPolicy.signalRefresh",
          "source": "VisualComponentsLayoutPolicy.java:141"
        },
        {
          "method": "org.eclipse.ve.internal.cde.core.VisualComponentsLayoutPolicy$ConstraintRefreshPolicy.componentRefreshed",
          "source": "VisualComponentsLayoutPolicy.java:194"
        },
        {
          "method": "org.eclipse.ve.internal.cde.core.VisualComponentSupport.fireComponentRefreshed",
          "source": "VisualComponentSupport.java:86"
        },
        {
          "method": "org.eclipse.ve.internal.swt.ControlManager$1.run",
          "source": "ControlManager.java:235"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2749"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2434"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:183"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:644"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:628"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "69137",
      "date": "2004-08-17T01:59:05+02:00",
      "product": "VE",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "69137",
  "bugId": "69137",
  "date": "2004-07-01T16:29:49+02:00",
  "product": "VE",
  "component": "SWT",
  "severity": "major"
}