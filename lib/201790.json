{
  "comments": [
    "Copying and Pasting a file from one connection to a Local drive doesn\u0027t work.  Copy and Paste within Local to a Drive works though.\n\nSteps to Reproduce:\n1. Create a connection.\n2. Copy some file from that connection.\n3. Go to your C:\\ and try to paste.\n--\u003e No error is shown, but the paste doesn\u0027t work.\n\n-----------Enter bugs above this line-----------\nTM 2.0.1 Testing\ninstallation : eclipse-SDK-3.3\nRSE install  : Dev Driver - \njava.runtime : Sun 1.5.0_11-b03\nos.name:     : Windows XP, Service Pack 2\n------------------------------------------------",
    "That\u0027s an ugly loss of functionality. Dave can you check this?",
    "I could see the following NPE on the console of my first workspace:\n\njava.lang.NullPointerException\n\tat org.eclipse.rse.files.ui.resources.UniversalFileTransferUtility.copyWorkspaceResourcesToRemote(UniversalFileTransferUtility.java:1158)\n\tat org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.doDrop(SystemViewRemoteFileAdapter.java:1777)\n\tat org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.transferRSEResources(SystemDNDTransferRunnable.java:214)\n\tat org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.runInWorkspace(SystemDNDTransferRunnable.java:589)\n\tat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\n\nThe reason is in UniversalFileTransferUtility#copyWorkspaceResourcesToRemote() method, we do the following:\n\nboolean isTargetArchive \u003d targetFolder.isArchive();\n\t\tif (isTargetArchive \u0026\u0026 !targetFolder.getParentRemoteFileSubSystem().getParentRemoteFileSubSystemConfiguration().supportsArchiveManagement()) return null;\n\t\tStringBuffer newPathBuf \u003d new StringBuffer(targetFolder.getAbsolutePath());\n\t\tif (isTargetArchive)\n\t\t{\n\t\t\tnewPathBuf.append(ArchiveHandlerManager.VIRTUAL_SEPARATOR);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewPathBuf.append(targetFolder.getSeparatorChar());\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\t\t}\n\nIn the case where the target folder is not a drive, targetFolder.getAbsolutePath() returns the full path without the last separator.\nBut in the case of a drive, it returns \"C:\\\\\"\n\nSo the new path with becomes \"C:\\\\\\\\\", which does not exist.\n\nTo fix it, we need to check if the newPathBuf already ends with the separatorChar.  If yes, we don\u0027t need to append it.\n\n\n\n",
    "The other thing I noticed is that copy a folder from one connection to an archive file in a different connection does not work.  But that is the different issue.  I will open a separate bug for it.",
    "Created an attachment (id\u003d77759)\nfix for the bug\n\nI put in the following fix:\n\nCheck if the full path of the target folder already ends with the separator character of the file subsystem.  If no, we will append the separator to the target folder path.",
    "The fix looks good.",
    "I committed the fix.",
    "Verified fixed with 2.0.1RC1."
  ],
  "commentCreationDates": [
    "2007-08-30T22:13:29+02:00",
    "2007-09-03T17:44:26+02:00",
    "2007-09-05T07:10:14+02:00",
    "2007-09-05T07:11:44+02:00",
    "2007-09-06T00:08:21+02:00",
    "2007-09-06T18:10:32+02:00",
    "2007-09-06T21:19:29+02:00",
    "2007-09-13T17:08:01+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.rse.files.ui.resources.UniversalFileTransferUtility.copyWorkspaceResourcesToRemote",
          "source": "UniversalFileTransferUtility.java:1158"
        },
        {
          "method": "org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.doDrop",
          "source": "SystemViewRemoteFileAdapter.java:1777"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.transferRSEResources",
          "source": "SystemDNDTransferRunnable.java:214"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.runInWorkspace",
          "source": "SystemDNDTransferRunnable.java:589"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "201790",
      "date": "2007-09-05T07:10:14+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "201790",
  "bugId": "201790",
  "date": "2007-08-30T22:13:29+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}