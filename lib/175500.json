{
  "comments": [
    "N20070226-0010\n\nStart Eclipse with:\neclipse.exe -data n2 -clean -consolelog -console -showlocation\n\n\u003d\u003e Errors in log:\n\n!ENTRY org.eclipse.ui.workbench 4 2 2007-02-26 10:48:00.968\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NoSuchMethodError: org.eclipse.swt.widgets.Shell.internal_new(Lorg/eclipse/swt/widgets/Display;J)Lorg/eclipse/swt/widgets/Shell;\n\tat org.eclipse.ui.internal.Workbench$5.run(Workbench.java:538)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.ui.internal.Workbench.createSplashWrapper(Workbench.java:573)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2154)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2125)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:459)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:454)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1124)\n\n!ENTRY org.eclipse.ui 4 0 2007-02-26 10:48:01.000\n!MESSAGE Could not instantiate splash\n!STACK 0\njava.lang.NoSuchMethodError: org.eclipse.swt.widgets.Shell.internal_new(Lorg/eclipse/swt/widgets/Display;J)Lorg/eclipse/swt/widgets/Shell;\n\tat org.eclipse.ui.internal.Workbench$5.run(Workbench.java:538)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.ui.internal.Workbench.createSplashWrapper(Workbench.java:573)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2154)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2125)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:459)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:454)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1124)",
    "\nKim, I guessing that this is a startup issue...\n",
    "This is very strange.  Nothing has changed on either workbench or SWT sides of the code in ages.",
    "Reproduced with I20070227-0800.\nI am investigating what could cause it.\nReassign to myself.\nI\u0027ll move it back to Platform/UI once I know what happened.",
    "The problem might come from PDE/Build.\n\nThe ui.workbench plugin is compiled with a 64 bit version of swt before the win32 version of swt.\n...\n\u003cclasspath id\u003d\"FOLDER\" path\u003d\"/builds/I200702270800/src/plugins/org.eclipse.swt.gtk.linux.x86_64/@dot/\"/\u003e\n\u003cclasspath id\u003d\"FOLDER\" path\u003d\"/builds/I200702270800/src/plugins/org.eclipse.swt.win32.win32.x86/@dot/\"/\u003e\n...\n\nThe 64 bit version of the internal_new method is:\n\n  public static org.eclipse.swt.widgets.Shell internal_new(org.eclipse.swt.widgets.Display display, long handle);\n\nand the 32 bit version is:\n  public static org.eclipse.swt.widgets.Shell internal_new(org.eclipse.swt.widgets.Display display, int handle);\n\nSo since the 64 bit version is found first, this is the method that is called. So the splash screen should work fine on a 64 bit platform, but won\u0027t work on any 32 bit platform.\n\nThe code that calls the internal new is:\n\nString splashHandle \u003d System.getProperty(\"org.eclipse.equinox.launcher.splash.handle\"); //$NON-NLS-1$\nif (splashHandle \u003d\u003d null) {\n\tcreateSplash \u003d false;\n\treturn;\n}\n// create the splash\ngetSplash();\nif (splash \u003d\u003d null) {\n\tcreateSplash \u003d false;\n\treturn;\n}\n\t\t\t\t\nint handle \u003d new Integer(splashHandle).intValue();\nShell splashShell \u003d Shell.internal_new(display, handle);\n\nthis code is platform dependent, but the plugin is not platform dependent.\n\nSomething must have changed in the way the classpath is computed by PDE/Build.\n\nThe compiler is right in the way it resolves the method invocation. There is nothing we can do to fix this.\n\nMoving to PDE/Build for further investigation.\nIt looks like this code should be moved to a platform dependent plugin.",
    "The reflection might also be a way to fix this.",
    "I\u0027ve changed the code in workbench to work reflectively as a fix for bug 173844.  I\u0027m not sure if the PDE build change will hose anyone else but from the workbench perspective this is no longer an issue.",
    "PDE/Build has not made any changes that should affect this, I think we have just been lucky so far.  There are issues in pde.build (and I raised bug 175864), however, in this particular case we wouldn\u0027t really be able to do anything.\n\nThe fragments are added to the classpath in the order returned from the osgi resolver. There may or may not have been changes internal to the osgi resolver that changed the order, but there was never any guarantee that they would be returned in any particular order.  With ui.workbench claiming to be platform-independent, the order should not matter.\n\nui.workbench is using a method Shell.internal_new whose signature depends on the platform.  There are 2 cases here:\n\n1) Shell.internal_new is API.  In this case the signature should be the same on all platforms, I suggest changing it to always be long.\n\n2) Shell.internal_new is not API.  In this case it is caller beware and the workbench must protect itself, which Kim has already done in comment #6.\n\n\nMoving to SWT to clarify whether or not Shell.internal_new is API.  I suspect not, since it has internal in its name :) ",
    "SSQ, should they use reflection?",
    "I believe so. Shell.internal_new() is not API.",
    "Andrew, Kim, is this an issue still? Should I just close as WONTFIX or move to some other component?",
    "This isn\u0027t an issue any longer.",
    "(In reply to comment #11)\n\u003e This isn\u0027t an issue any longer.\n\u003e \n\nJust in case this matters, I can see this problem with 3.3M6 on gtk-x86_64... \n",
    "Eek!  J?rg, can you post a stack trace please?\n\nSteve, do you have a 64 bit GTK machine that we can try this on?",
    "(In reply to comment #13)\n\u003e Eek!  J?rg, can you post a stack trace please?\n\nHere it comes:\n\neclipse.buildId\u003dI20070323-1616\njava.version\u003d1.5.0_10\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86_64, WS\u003dgtk, NL\u003dde_DE\nFramework arguments:  -startup /home/jfrantzius/apps/eclipse3.3/M6/eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070319.jar\nCommand-line arguments:  -os linux -ws gtk -arch x86_64 -startup /home/jfrantzius/apps/eclipse3.3/M6/eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070319.jar -clean -data /home/jfrantzius/Documents/eclipse_workspaces/sgw2\n\nError\nMon Mar 26 12:29:24 CEST 2007\nCould not instantiate splash\n\njava.lang.NoSuchMethodException: org.eclipse.swt.widgets.Shell.internal_new(org.eclipse.swt.widgets.Display, int)\nat java.lang.Class.getMethod(Class.java:1581)\nat org.eclipse.ui.internal.Workbench$5.run(Workbench.java:542)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.ui.internal.Workbench.createSplashWrapper(Workbench.java:596)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2205)\nat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2176)\nat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:463)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:458)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:356)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:171)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1141)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1116)\n\n",
    "Yes, contact Grant or Carolyn."
  ],
  "commentCreationDates": [
    "2007-02-26T09:54:44+01:00",
    "2007-02-26T21:03:31+01:00",
    "2007-02-27T17:53:28+01:00",
    "2007-02-28T01:11:12+01:00",
    "2007-02-28T02:06:32+01:00",
    "2007-02-28T03:01:32+01:00",
    "2007-02-28T13:35:09+01:00",
    "2007-02-28T17:38:42+01:00",
    "2007-02-28T19:57:27+01:00",
    "2007-02-28T20:09:33+01:00",
    "2007-03-13T16:58:27+01:00",
    "2007-03-13T17:03:21+01:00",
    "2007-03-26T12:41:25+02:00",
    "2007-03-26T14:12:47+02:00",
    "2007-03-26T15:32:39+02:00",
    "2007-03-26T16:59:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "org.eclipse.swt.widgets.Shell.internal_new(Lorg/eclipse/swt/widgets/Display;J)Lorg/eclipse/swt/widgets/Shell;",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.Workbench$5.run",
          "source": "Workbench.java:538"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createSplashWrapper",
          "source": "Workbench.java:573"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2154"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2125"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:459"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:454"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "175500",
      "date": "2007-02-26T09:54:44+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "org.eclipse.swt.widgets.Shell.internal_new(Lorg/eclipse/swt/widgets/Display;J)Lorg/eclipse/swt/widgets/Shell;",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.Workbench$5.run",
          "source": "Workbench.java:538"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createSplashWrapper",
          "source": "Workbench.java:573"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2154"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2125"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:459"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:454"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "175500",
      "date": "2007-02-26T09:54:44+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoSuchMethodException",
      "message": "org.eclipse.swt.widgets.Shell.internal_new(org.eclipse.swt.widgets.Display, int)",
      "elements": [
        {
          "method": "java.lang.Class.getMethod",
          "source": "Class.java:1581"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$5.run",
          "source": "Workbench.java:542"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createSplashWrapper",
          "source": "Workbench.java:596"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2205"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2176"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:463"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:458"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:356"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:171"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1141"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1116"
        }
      ],
      "number": 2,
      "commentIndex": 14,
      "bugId": "175500",
      "date": "2007-03-26T15:32:39+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "175500",
  "bugId": "175500",
  "date": "2007-02-26T09:54:44+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}