{
  "comments": [
    "ActionContributionItem.handleWidgetSelection throws a null pointer exception \nwhen used in a standalone SWT/JFACE application.\n\nI have a standalone SWT/JFACE application that uses toolbar/menu actions. When \nusing latest build, i.e. eclipse-SDK-I20040514-linux-gtk.zip  I get an NPE \ncaused by new dependancy of JFACE on org.eclipse.core.runtime.Platform \nespecially a platform context.\n\njava.lang.ExceptionInInitializerError\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:893)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:850)\n\tat org.eclipse.jface.action.ActionContributionItem$8.handleEvent\n(ActionContributionItem.java:808)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:939)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2538)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2249)\n\tat au.com.kelpie.fgfp.FlightPlanner.run(FlightPlanner.java:737)\n\tat au.com.kelpie.fgfp.Main.main(Main.java:44)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.core.internal.runtime.InternalPlatform.isRunning\n(InternalPlatform.java:923)\n\tat org.eclipse.core.runtime.Platform.isRunning(Platform.java:1142)\n\tat org.eclipse.jface.util.Policy.getDebugOption(Policy.java:78)\n\tat org.eclipse.jface.util.Policy.\u003cclinit\u003e(Policy.java:29)\n\t... 9 more\n\nIn debug I found that in the following snippet\n\norg.eclipse.core.internal.runtime.InternalPlatform...\n\n\tpublic boolean isRunning() {\n\t\ttry {\n\t\t\treturn context.getBundle().getState() \u003d\u003d Bundle.ACTIVE;\n\t\t} catch (IllegalStateException e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\ncontext is null.",
    "Can Platform.isRunning() be made to return false if the platform has not been\ninitialized at all?\n\nIt should suffice to change InternalPlatform.isRunning to do:\n     return initialized \u0026\u0026 context.getBundle().getState() \u003d\u003d Bundle.ACTIVE;\ninstead of just \n     return context.getBundle().getState() \u003d\u003d Bundle.ACTIVE;\n",
    "Fixed.  Good catch.",
    "I guess you forgot to close this one, Jeff."
  ],
  "commentCreationDates": [
    "2004-05-19T06:14:44+02:00",
    "2004-05-19T17:04:28+02:00",
    "2004-05-19T17:53:53+02:00",
    "2004-05-20T03:36:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ExceptionInInitializerError",
      "elements": [
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:893"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:850"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$8.handleEvent",
          "source": "ActionContributionItem.java:808"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:939"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2538"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2249"
        },
        {
          "method": "au.com.kelpie.fgfp.FlightPlanner.run",
          "source": "FlightPlanner.java:737"
        },
        {
          "method": "au.com.kelpie.fgfp.Main.main",
          "source": "Main.java:44"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.core.internal.runtime.InternalPlatform.isRunning",
            "source": "InternalPlatform.java:923"
          },
          {
            "method": "org.eclipse.core.runtime.Platform.isRunning",
            "source": "Platform.java:1142"
          },
          {
            "method": "org.eclipse.jface.util.Policy.getDebugOption",
            "source": "Policy.java:78"
          },
          {
            "method": "org.eclipse.jface.util.Policy.\u003cclinit\u003e",
            "source": "Policy.java:29"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "62841",
      "date": "2004-05-19T06:14:44+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "62841",
  "bugId": "62841",
  "date": "2004-05-19T06:14:44+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}