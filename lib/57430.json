{
  "comments": [
    "Exceptions thrown from the compiler used to be printed once, with the submit-bug\nheader.  Now they are printed twice, without and with the header.  True of CVS\nversion.",
    "Just an info note ... The testcode you checked in for 57432 demonstrates this \ndouble exception printing.  ",
    "I believe the duplicate is printed by the line:\n\ninternalException.printStackTrace() \n\nwithin\n\nCompiler.handleInternalException() (line 452 to be precise)\n\ncontinuing to investigate...",
    "Fix checked in.\n\nThe fix is to wrap (at the appropriate point) the NPE exception inside an \nAbortCompilation exception which is then rethrown.  If the JDT compiler sees \nan AbortCompilation exception it behaves differently - we can prevent it from \nbeing logged by the JDT code *knowing* that it will be logged by the original \ncalling AspectJ code.  The JDT will unwrap the AbortException and throw the \nnested NPE.\n\nHere is the output from the code in bug 57432 with the fix in (there is \nno \u0027extra\u0027 logging of the NPE):\n\n------------------------------------------\nABORT\n\t\nException thrown from AspectJ DEVELOPMENT\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack, \ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.compiler.CompilationResult.computePriority\n(CompilationResult.java:110)\n\tat org.eclipse.jdt.internal.compiler.CompilationResult.quickPrioritize\n(CompilationResult.java:336)\n\tat org.eclipse.jdt.internal.compiler.CompilationResult.getProblems\n(CompilationResult.java:230)\n\tat org.eclipse.jdt.internal.compiler.CompilationResult.getAllProblems\n(CompilationResult.java:118)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager$4.acceptResult\n(AjBuildManager.java:661)\n\tat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.acceptResult\n(AjCompilerAdapter.java:176)\n\tat org.aspectj.ajdt.internal.compiler.WeaverAdapter.finishedWith\n(WeaverAdapter.java:203)\n\tat org.aspectj.ajdt.internal.compiler.WeaverAdapter.weaveCompleted\n(WeaverAdapter.java:167)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:570)\n\tat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave\n(AjCompilerAdapter.java:237)\n\tat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling\n(AjCompilerAdapter.java:114)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile\n(Compiler.java:376)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation\n(AjBuildManager.java:600)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:160)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:94)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:104)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:280)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:217)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:79)\n\n\n1 fail|abort\n---------------------------------------------",
    "fixed by Andy."
  ],
  "commentCreationDates": [
    "2004-04-05T10:58:49+02:00",
    "2004-04-05T12:10:55+02:00",
    "2004-04-07T09:36:06+02:00",
    "2004-04-07T11:16:02+02:00",
    "2004-05-13T11:07:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.CompilationResult.computePriority",
          "source": "CompilationResult.java:110"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.CompilationResult.quickPrioritize",
          "source": "CompilationResult.java:336"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.CompilationResult.getProblems",
          "source": "CompilationResult.java:230"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.CompilationResult.getAllProblems",
          "source": "CompilationResult.java:118"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$4.acceptResult",
          "source": "AjBuildManager.java:661"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.acceptResult",
          "source": "AjCompilerAdapter.java:176"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.WeaverAdapter.finishedWith",
          "source": "WeaverAdapter.java:203"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.WeaverAdapter.weaveCompleted",
          "source": "WeaverAdapter.java:167"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:570"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:237"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:600"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:160"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:94"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:104"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:280"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:79"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "57430",
      "date": "2004-04-07T11:16:02+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "57430",
  "bugId": "57430",
  "date": "2004-04-05T10:58:49+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}