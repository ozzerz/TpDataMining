{
  "comments": [
    "M6 test candidate\n\nTried to launch my target workspace after importing binary plugins and get the \nfollowing in the log:\n\n!SESSION ----------------------------------------------------------------------\n!ENTRY org.eclipse.core.launcher 4 0 Dec 17, 2003 15:18:07.83\n!MESSAGE Exception launching the Eclipse Platform:\n!STACK\njava.lang.NullPointerException\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java:59)\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java:73)\n\tat java.lang.NullPointerException.\u003cinit\u003e(NullPointerException.java:60)\n\tat org.eclipse.core.internal.boot.FeatureEntry.getFeatureVersion\n(FeatureEntry.java:28)\n\tat org.eclipse.ui.internal.WorkbenchPlugin.initializeProductInfo\n(WorkbenchPlugin.java:597)\n\tat org.eclipse.ui.internal.WorkbenchPlugin.getAppName\n(WorkbenchPlugin.java:627)\n\tat org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:258)\n\tat org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:41)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:233)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:79)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:41)\n\tat java.lang.reflect.Method.invoke(Method.java:386)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:281)\n\tat org.eclipse.core.launcher.Main.run(Main.java:744)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)",
    "I have the same problem. The point is that our launch configs only enable plug-\nins in the workspace. The workspace does not contain any feature. Raising to \nblocker.",
    "Need more exact steps.  I can import plugins as binary and run the target.  I \ncan even open the About dialog and inspect the platform feature.\n",
    "I have the following workspace layout:\n\norg.eclipse.core.resources.win32\norg.eclipse.swt.win32\norg.eclipse.update.core.win32\norg.apache.ant\norg.apache.lucene\norg.eclipse.ant.core\norg.eclipse.compare\norg.eclipse.core.boot\norg.eclipse.core.filebuffers  \u003c\u003d\u003d\u003d source\norg.eclipse.core.resources\norg.eclipse.core.runtime\norg.eclipse.core.runtime.compatibility\norg.eclipse.core.variables\norg.eclipse.debug.core\norg.eclipse.debug.ui\norg.eclipse.help\norg.eclipse.help.appserver\norg.eclipse.help.base\norg.eclipse.jdt.core  \u003c\u003d\u003d\u003d source\norg.eclipse.jdt.debug\norg.eclipse.jdt.debug.ui\norg.eclipse.jdt.launching\norg.eclipse.jdt.ui  \u003c\u003d\u003d\u003d source\norg.eclipse.jdt.ui.examples.javafamily  \u003c\u003d\u003d\u003d source\norg.eclipse.jdt.ui.examples.projects  \u003c\u003d\u003d\u003d source\norg.eclipse.jdt.ui.tests  \u003c\u003d\u003d\u003d source\norg.eclipse.jdt.ui.tests.refactoring  \u003c\u003d\u003d\u003d source\norg.eclipse.jface\norg.eclipse.jface.text  \u003c\u003d\u003d\u003d source\norg.eclipse.osgi\norg.eclipse.osgi.services\norg.eclipse.osgi.util\norg.eclipse.search\norg.eclipse.search.core  \u003c\u003d\u003d\u003d source from ottcvs1 repository\norg.eclipse.search.ui  \u003c\u003d\u003d\u003d source from ottcvs1 repository\norg.eclipse.swt\norg.eclipse.team.core\norg.eclipse.text  \u003c\u003d\u003d\u003d source\norg.eclipse.ui\norg.eclipse.ui.console\norg.eclipse.ui.editors  \u003c\u003d\u003d\u003d source\norg.eclipse.ui.ide\norg.eclipse.ui.views\norg.eclipse.ui.win32\norg.eclipse.ui.workbench\norg.eclipse.ui.workbench.texteditor  \u003c\u003d\u003d\u003d source\norg.eclipse.update.configurator\norg.eclipse.update.core\norg.junit\n\nI will attach a screen shot showing the launch configuration I use.",
    "Created an attachment (id\u003d7212)\nThe launch config I am using to start the target workspace\n",
    "Trying the same with a fresh workspace and the following plug-ins as binary\n\norg.eclipse.core.resources.win32\norg.eclipse.swt.win32\norg.eclipse.ui.workbench.compatibility\norg.eclipse.update.core.win32\norg.apache.ant\norg.eclipse.ant.core\norg.eclipse.compare\norg.eclipse.core.filebuffers\norg.eclipse.core.resources\norg.eclipse.core.runtime\norg.eclipse.core.runtime.compatibility\norg.eclipse.core.variables\norg.eclipse.debug.core\norg.eclipse.debug.ui\norg.eclipse.help\norg.eclipse.jdt.core\norg.eclipse.jdt.debug\norg.eclipse.jdt.launching\norg.eclipse.jdt.ui\norg.eclipse.jface\norg.eclipse.jface.text\norg.eclipse.osgi\norg.eclipse.osgi.util\norg.eclipse.search\norg.eclipse.swt\norg.eclipse.team.core\norg.eclipse.text\norg.eclipse.ui\norg.eclipse.ui.console\norg.eclipse.ui.editors\norg.eclipse.ui.ide\norg.eclipse.ui.views\norg.eclipse.ui.win32\norg.eclipse.ui.workbench\norg.eclipse.ui.workbench.texteditor\norg.eclipse.update.configurator\norg.eclipse.update.core\norg.eclipse.osgi.services\n\nresults in the following exception and a canceled launch\n\n!ENTRY org.eclipse.pde.core 4 4 Dec 17, 2003 17:16:45.854\n!MESSAGE Exception caught while creating platform configuration.\n!STACK 0\njava.lang.NullPointerException\n\tat \norg.eclipse.pde.internal.core.DefaultRuntimeSupport.getPluginLocation\n(DefaultRuntimeSupport.java:39)\n\tat org.eclipse.pde.internal.core.TargetPlatform.getPluginLocation\n(TargetPlatform.java:356)\n\tat \norg.eclipse.pde.internal.core.TargetPlatform.createConfigurationEntries\n(TargetPlatform.java:345)\n\tat \norg.eclipse.pde.internal.core.TargetPlatform.savePlatformConfiguration\n(TargetPlatform.java:275)\n\tat \norg.eclipse.pde.internal.core.TargetPlatform.createPlatformConfigurationArea\n(TargetPlatform.java:174)\n\tat \norg.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.getPr\nogramArguments(WorkbenchLaunchConfigurationDelegate.java:138)\n\tat \norg.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.creat\neVMRunner(WorkbenchLaunchConfigurationDelegate.java:86)\n\tat \norg.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.launc\nh(WorkbenchLaunchConfigurationDelegate.java:47)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch\n(LaunchConfiguration.java:156)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch\n(DebugUIPlugin.java:740)\n\tat org.eclipse.debug.ui.DebugUITools.buildAndLaunch\n(DebugUITools.java:625)\n\tat org.eclipse.debug.ui.DebugUITools$3.run(DebugUITools.java:581)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)",
    "Dirk, I got the same problem as you (fresh workspace case) and have entered bug\n49035.",
    "I have reproduced this in my workspace. \n\nI deleted the org.eclipse.platform project from my workspace yesterday because\nit was failing to start a test workspace.  I do not have org.eclipse.platform\nselected in the list of external plugins in my target platform setup.\n\nSo, this problem can be reproduced by trying to start a test workspace with\nabsolutely no feature plugins in the configuration.  When I added\norg.eclipse.platform to my workspace, it started fine.\n\nIn essence this is user error because I had an invalid configuration, but it\nshould have failed more gracefully than a NullPointerException.",
    "To clarify: \nWhen launching a runtime workbench, we do not pass any features.  So if you \nhave 0 or 10 features in your workspace, it makes no differene.\n\nJeff, note that the Zurich folks are launching without the primary plugin \norg.eclipse.platform, and that is what is causing the problem.  You are \nassuming its presence.\n\nI don\u0027t think org.eclipse.platform is mandatory to start.  Only the plugins in \nthe config.ini are essential.  One should never assume the presence of any \nother plugins.\n",
    "Re comment #7, it is not a user error to not have org.eclipse.platform.\n\nThe core runtime only cares about plugins.  It does not care about features or \nwhich plugin is the primary plugin.  Only the Update component does.\n  \nWhen we launch a runtime workbench, we make sure that the Update reconciling \nis bypassed.  This is because we pass the -configuration fileURL argument, \nwith a file containing exactly the list of plugins that need to run.",
    "The runtime does not assume anything about org.eclipse.platform.  The only \nthing needed is the locatoin of the startup code.  It seems that the \nconfiguration code is somehow expecting to have a feature entry and there isn\u0027t \none because org.eclipse.platform is missing.\n\nThe only other issue I can think of is the code which accesses the feature \nentries may be expecting to get back null if there are none.  With the \ncompatibility support, we may be wrappering that null rather than returning it.\n",
    "It looks like this bug has been around for awhile.  See Jeem\u0027s comments in bug\n48632.  I will close that one as a duplicate since most of the discussion is in\nhere.",
    "*** Bug 48632 has been marked as a duplicate of this bug. ***",
    "Raising priority to see if we can get it in for this week.  \n\nWassim, can you comment on a path forward here.  Is it a wrapper error, \nconfiguration error, ...",
    "I think it\u0027s best if PlatformConfiguration.getPrimaryFeatureId() returned null \nif it contains no features.  Currently, it returns the \ndefault \"org.eclipse.platform\" if no features, which is causing all this \nconfusion.\n\nSince features are not required by the core runtime, and self-hosting using a \npde-crafted config file is a good example of that, then it\u0027s perfectly ok for \na primary feature id to return null;\n\nA quick check on who calls this method, it seems that Platform UI code does \ncheck if the getPrimaryFeatureId() returns null.  However, classes \nBaseHelpSystem (i.e. Help team) and OperationsValidator (i.e. Update team) do \nnot.  So these two teams have to modify their code to check for null.",
    "dorian, you would be interested in comment #14",
    "This sounds good to me. (especially since the spec of IPlatformConfiguration\nsays that it can return null)\n\nMoving to PDE/UI for closure. (and co-ordination with Help/Update to handle the\nuse cases illustrated above)",
    "I will change \norg.eclipse.update.internal.configurator.PlatformConfiguration.getPrimaryFeatur\neIdentifier() return null if the feature is not configured and will fix the \ncalls from Help and Update.\nThe implementation will return null if findConfiguredFeatureEntry(featureId) \nreturn null.\n\nI assume this is an M6 candidate fix, right ?",
    "Moving to Update to fix as suggested.",
    "Fixed and released for the next (12 am) build.\nI\u0027d suggest all the teams cc:ed on this bug do a quick sanity test on this \nbuild.",
    "Thanks to all for pulling together on this.  I have a further question.  Does \nit make sense for the old configuration objects to wrapper new objects which \nare actually null?  The fix that was put in resolved one case but I wonder if \nthere are others?  Confidence level?"
  ],
  "commentCreationDates": [
    "2003-12-17T14:20:27+01:00",
    "2003-12-17T14:26:32+01:00",
    "2003-12-17T15:58:08+01:00",
    "2003-12-17T16:07:54+01:00",
    "2003-12-17T16:10:26+01:00",
    "2003-12-17T16:20:17+01:00",
    "2003-12-17T16:21:11+01:00",
    "2003-12-17T16:52:57+01:00",
    "2003-12-17T16:56:20+01:00",
    "2003-12-17T17:10:31+01:00",
    "2003-12-17T17:36:11+01:00",
    "2003-12-17T22:47:33+01:00",
    "2003-12-17T22:47:49+01:00",
    "2003-12-17T23:15:56+01:00",
    "2003-12-17T23:40:08+01:00",
    "2003-12-17T23:55:23+01:00",
    "2003-12-18T00:07:00+01:00",
    "2003-12-18T00:24:10+01:00",
    "2003-12-18T01:16:10+01:00",
    "2003-12-18T01:18:57+01:00",
    "2003-12-18T03:38:48+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java:59"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java:73"
        },
        {
          "method": "java.lang.NullPointerException.\u003cinit\u003e",
          "source": "NullPointerException.java:60"
        },
        {
          "method": "org.eclipse.core.internal.boot.FeatureEntry.getFeatureVersion",
          "source": "FeatureEntry.java:28"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin.initializeProductInfo",
          "source": "WorkbenchPlugin.java:597"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin.getAppName",
          "source": "WorkbenchPlugin.java:627"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createDisplay",
          "source": "Workbench.java:258"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createDisplay",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:41"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:233"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:79"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:41"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:386"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:281"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:744"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "49008",
      "date": "2003-12-17T14:20:27+01:00",
      "product": "Platform",
      "component": "Update",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.core.DefaultRuntimeSupport.getPluginLocation",
          "source": "DefaultRuntimeSupport.java:39"
        },
        {
          "method": "org.eclipse.pde.internal.core.TargetPlatform.getPluginLocation",
          "source": "TargetPlatform.java:356"
        },
        {
          "method": "org.eclipse.pde.internal.core.TargetPlatform.createConfigurationEntries",
          "source": "TargetPlatform.java:345"
        },
        {
          "method": "org.eclipse.pde.internal.core.TargetPlatform.savePlatformConfiguration",
          "source": "TargetPlatform.java:275"
        },
        {
          "method": "org.eclipse.pde.internal.core.TargetPlatform.createPlatformConfigurationArea",
          "source": "TargetPlatform.java:174"
        },
        {
          "method": "org.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.getProgramArguments",
          "source": "WorkbenchLaunchConfigurationDelegate.java:138"
        },
        {
          "method": "org.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.createVMRunner",
          "source": "WorkbenchLaunchConfigurationDelegate.java:86"
        },
        {
          "method": "org.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.launch",
          "source": "WorkbenchLaunchConfigurationDelegate.java:47"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:156"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:740"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.buildAndLaunch",
          "source": "DebugUITools.java:625"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools$3.run",
          "source": "DebugUITools.java:581"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:62"
        }
      ],
      "number": 1,
      "commentIndex": 5,
      "bugId": "49008",
      "date": "2003-12-17T16:20:17+01:00",
      "product": "Platform",
      "component": "Update",
      "severity": "blocker"
    }
  ],
  "groupId": "49008",
  "bugId": "49008",
  "date": "2003-12-17T14:20:27+01:00",
  "product": "Platform",
  "component": "Update",
  "severity": "blocker"
}