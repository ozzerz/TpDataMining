{
  "comments": [
    "The following exception was encountered on shutdown the applicaiton. It happend on Linux(SuSE Linux Enterprise 9, PatchLevel: 3). It\u0027s very similar to defect: 142785.  \n\n!ENTRY org.eclipse.osgi 4 0 2006-05-19 11:21:38.993\n!MESSAGE An unexpected runtime error has occurred.\n!STACK 0\njava.lang.NullPointerException\nat\norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.computeSaveables(NavigatorSaveablesService.java:216)\nat\norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.recomputeSaveablesAndNotify(NavigatorSaveablesService.java:374)\nat\norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.handleBundleStopped(NavigatorSaveablesService.java:457)\nat\norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.bundleChanged(NavigatorSaveablesService.java:100)\nat\norg.eclipse.ui.internal.navigator.NavigatorPlugin$1.bundleChanged(NavigatorPlugin.java:35)\nat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1206)\nat\norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)\nat\norg.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)\n11",
    "I talked to Yi Shen and the stack trace in this bug is the stack trace from bug 142785, not the one that is actually occurring.\n\nClosing as invalid for now.  Feel free to reopen once you have more information that shows a bug in our code.  Right now it seems to be a bug in client code, but without further information I cannot help you with that.",
    "The stack trace is from bug 142785 that was resolved on 3.2.1 but it still occurs. The other stack trace (in the client code) is actually driven by this same class: the client provider has been disposed and then queried by NavigatorSaveablesService.",
    "I load the source code and re-test it. The problem still happend on Linux. \n\nHere is the erro log:\n-----------------------------------------------------------------------\n!ENTRY org.eclipse.osgi 4 0 2007-02-23 15:28:18.717\n!MESSAGE An unexpected runtime error has occurred.\n!STACK 0\njava.lang.NullPointerException\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.computeSaveables(NavigatorSaveablesService.java:220)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.recomputeSaveablesAndNotify(NavigatorSaveablesService.java:495)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.handleBundleStarted(NavigatorSaveablesService.java:566)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.bundleChanged(NavigatorSaveablesService.java:95)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorPlugin$1.bundleChanged(NavigatorPlugin.java:89)\n\tat \norg.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1202)\n\tat \norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)\n\tat \norg.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)\n\n!ENTRY org.eclipse.ui.navigator 4 0 2007-02-23 15:28:18.717\n!MESSAGE FrameworkEvent.ERROR\n!STACK 0\njava.lang.NullPointerException\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.computeSaveables(NavigatorSaveablesService.java:220)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.recomputeSaveablesAndNotify(NavigatorSaveablesService.java:495)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.handleBundleStarted(NavigatorSaveablesService.java:566)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorSaveablesService.bundleChanged(NavigatorSaveablesService.java:95)\n\tat \norg.eclipse.ui.internal.navigator.NavigatorPlugin$1.bundleChanged(NavigatorPlugin.java:89)\n\tat \norg.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1202)\n\tat \norg.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)\n\tat \norg.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)\n",
    "Did the NPE in client code appear after this one in your log, or the other way around?",
    "No. This time I didn\u0027t see the client code error at all. ",
    "I would need help reproducing this.  Can I come for a visit to see how exactly the NPE happens?",
    "Too late for RC1.",
    "Created an attachment (id\u003d67436)\npatch against 3.2.2\n\nThis was due to a programming error - using \"synchronized(this)\" in a listener inner class which ended up synchronizing on the inner instance, not the outer.",
    "Michael, could you please review this patch for inclusion in 3.3RC1? Thanks!",
    "Too late for RC1.",
    "Need another reviewer...",
    "Unless I am mistaken, I see the potential for deadlock here. The init method synchronizes on the \"instances\" instance variable and then on \"this\". The patched code first synchronizes on \"NavigatorSaveablesService.this\" and then calls removeInstance which synchronizes on \"instances\".",
    "Created an attachment (id\u003d68180)\nupdated patch\n\nThis patch acquires the locks in the proper order and adds disposed checks to the async runnables.",
    "+1 for the updated patch. \n\nIt might be easier to read with a separate lock object (e.g. private final Object lock \u003d new Object()) that you could then sync(lock) on in the methods, instead of mixing synchronized methods with the synchronized(staticfield) syntax, but I don\u0027t think that\u0027s a safe change for 3.3.",
    "Released \u003e20070522.",
    "Verified using I20070525-0010."
  ],
  "commentCreationDates": [
    "2007-02-22T20:14:27+01:00",
    "2007-02-22T21:12:27+01:00",
    "2007-02-22T21:42:35+01:00",
    "2007-02-23T19:00:49+01:00",
    "2007-02-23T20:53:16+01:00",
    "2007-02-23T21:50:10+01:00",
    "2007-04-27T15:11:15+02:00",
    "2007-05-14T19:01:08+02:00",
    "2007-05-16T18:13:56+02:00",
    "2007-05-16T18:14:37+02:00",
    "2007-05-17T03:21:43+02:00",
    "2007-05-22T17:15:05+02:00",
    "2007-05-22T19:00:21+02:00",
    "2007-05-22T19:56:57+02:00",
    "2007-05-22T20:48:12+02:00",
    "2007-05-22T22:37:56+02:00",
    "2007-05-25T18:44:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.computeSaveables",
          "source": "NavigatorSaveablesService.java:216"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.recomputeSaveablesAndNotify",
          "source": "NavigatorSaveablesService.java:374"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.handleBundleStopped",
          "source": "NavigatorSaveablesService.java:457"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.bundleChanged",
          "source": "NavigatorSaveablesService.java:100"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorPlugin$1.bundleChanged",
          "source": "NavigatorPlugin.java:35"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1206"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:291"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "175181",
      "date": "2007-02-22T20:14:27+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.computeSaveables",
          "source": "NavigatorSaveablesService.java:220"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.recomputeSaveablesAndNotify",
          "source": "NavigatorSaveablesService.java:495"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.handleBundleStarted",
          "source": "NavigatorSaveablesService.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.bundleChanged",
          "source": "NavigatorSaveablesService.java:95"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorPlugin$1.bundleChanged",
          "source": "NavigatorPlugin.java:89"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1202"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:291"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "175181",
      "date": "2007-02-23T19:00:49+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.computeSaveables",
          "source": "NavigatorSaveablesService.java:220"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.recomputeSaveablesAndNotify",
          "source": "NavigatorSaveablesService.java:495"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.handleBundleStarted",
          "source": "NavigatorSaveablesService.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorSaveablesService.bundleChanged",
          "source": "NavigatorSaveablesService.java:95"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.NavigatorPlugin$1.bundleChanged",
          "source": "NavigatorPlugin.java:89"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1202"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:291"
        }
      ],
      "number": 2,
      "commentIndex": 3,
      "bugId": "175181",
      "date": "2007-02-23T19:00:49+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "175181",
  "bugId": "175181",
  "date": "2007-02-22T20:14:27+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}