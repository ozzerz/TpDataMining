{
  "comments": [
    "I use Mac OS X 10.3.9, Java 1.4.2, Eclipse IDE 3.0 and SWT 3.1.1 and have the following problem (with Java 1.3.1 everything works. On the command-line it also seem to work with Java 1.4.2 but not when I start it from Eclipse IDE 3.0):\n\nIf I add the swt.jar to my classpath, I can?t use the awt.Graphics and the awt.image.BufferedImage classes. I also can?t use the following command in any class: \"JFrame x\u003dnew JFrame();\" (also not if it is the only row in a very little class).\n\nThis is my awt-code:\n\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.image.BufferedImage;\n\npublic class Awt  {\n\n\tpublic Awt()  {\n\t\tBufferedImage i\u003dnew BufferedImage(150,150,BufferedImage.TYPE_INT_RGB);\n\t\tGraphics gr\u003di.getGraphics();\n\t\t\n\t\tgr.setColor(new Color(100,0,0));\n\t\tgr.setFont(new Font(\"Helvetica\",Font.BOLD,40));\n\t\tgr.drawString(\"textstring\",30,30);\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tAwt x\u003dnew Awt();\n\t}\n}\n\nThis is the error in the Eclipse IDE 3.0:\n\n2006-01-07 01:56:28.413 java_swt[500] Apple AWT Java VM was loaded on first thread -- can\u0027t start AWT.\nException in thread \"main\" java.lang.InternalError: Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1586)\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1503)\n\tat java.lang.Runtime.loadLibrary0(Runtime.java:788)\n\tat java.lang.System.loadLibrary(System.java:834)\n\tat sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:50)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.awt.image.ColorModel.loadLibraries(ColorModel.java:188)\n\tat java.awt.image.ColorModel.\u003cclinit\u003e(ColorModel.java:196)\n\tat java.awt.image.BufferedImage.\u003cclinit\u003e(BufferedImage.java:212)\n\tat Awt.\u003cinit\u003e(Awt.java:15)\n\tat Awt.main(Awt.java:34)",
    "Another problem: The following code returns the same error in Eclipse IDE and creates a not reacting-app when started on the command-line (java -Djava.library.path\u003d/swt -classpath /swt/swt.jar:. de.klinkerjens.swt.Swt):\n\npackage de.klinkerjens.swt;\n\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\n\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.events.SelectionAdapter;\nimport org.eclipse.swt.events.SelectionEvent;\nimport org.eclipse.swt.graphics.Image;\nimport org.eclipse.swt.layout.FillLayout;\nimport org.eclipse.swt.widgets.Button;\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Menu;\nimport org.eclipse.swt.widgets.MenuItem;\nimport org.eclipse.swt.widgets.Shell;\n\nimport com.sun.image.codec.jpeg.JPEGCodec;\nimport com.sun.image.codec.jpeg.JPEGEncodeParam;\nimport com.sun.image.codec.jpeg.JPEGImageEncoder;\n\npublic class Swt {\n\t private Display display;\n\t private Shell shell;\n\n\tpublic Swt() {\n\t\n\tSelectionAdapter clickAdapter\u003dnew SelectionAdapter(){\n\t\tpublic void widgetSelected (SelectionEvent se){\n\t\t\t\n\t\t\tif (!shell.getText().equals(\"click\")) shell.setText(\"click\"); else shell.setText(\"unclick\");\n\t\t}\n\t };\n\t\t \n\tdisplay \u003d new Display();\n\tshell \u003d new Shell(display);\n\tshell.setSize(500,500);\n\tshell.setText(\"Simple SWT Sample\");\n\tshell.setLayout(new FillLayout());\n\tButton b\u003dnew Button(shell,SWT.NONE);\n\n\tBufferedImage i\u003dnew BufferedImage(150,150,BufferedImage.TYPE_INT_RGB);\n\tGraphics gr\u003di.getGraphics();\n\t\n\tgr.setColor(new Color(100,0,0));\n\tgr.setFont(new Font(\"Helvetica\",Font.BOLD,40));\n\tgr.drawString(\"textstring\",30,30);\n\tByteArrayOutputStream fo\u003dnew ByteArrayOutputStream();\n\t\n\tJPEGImageEncoder encoder \u003d JPEGCodec.createJPEGEncoder (fo) ;\n\n\t   JPEGEncodeParam param \u003d\n\t\t      encoder.getDefaultJPEGEncodeParam(i);\n\t\t   param.setQuality(1.0f,true);\n\t\n\ttry{\n\t\tencoder.encode(i,param) ;\n\t} catch (Exception e){}\n\t\n\tb.setImage(new Image(display,new ByteArrayInputStream(fo.toByteArray())));\n\t\n\tb.addSelectionListener(clickAdapter);\n\tMenu menubar\u003dnew Menu(shell,SWT.BAR);\n\tshell.setMenuBar(menubar);\n\t\n\tMenu fileMenu \u003d new Menu(menubar);\n\tMenuItem fileMenuItem \u003d new MenuItem(menubar,SWT.CASCADE);\n\tfileMenuItem.setText(\"File\");\n\tfileMenuItem.setMenu(fileMenu);\n\t\n\tMenuItem neu \u003d new MenuItem(fileMenu,SWT.CASCADE);\n\tneu.setText(\"neu\");\n\t \t \n\tnew MenuItem (fileMenu,SWT.SEPARATOR);\n\t \n\tMenu subMenu\u003dnew Menu(fileMenu);\n\tMenuItem subMenuItem\u003dnew MenuItem(fileMenu,SWT.CASCADE);\n\tsubMenuItem.setText(\"submenu\");\n\tsubMenuItem.setMenu(subMenu);\n\t \n\tMenuItem neuSubMenu\u003dnew MenuItem(subMenu,SWT.CASCADE);\n\tneuSubMenu.setText(\"neusub\");\n\t \n\tneuSubMenu.addSelectionListener(clickAdapter);\n\n\tshell.open();\n\twhile (!shell.isDisposed())\n\tif (!display.readAndDispatch())\n\t display.sleep();\n\t }\n\n\tpublic static void main(String[] args) {\n\n\t\tnew Swt();\n\t}\n\n}\n",
    "Jens, it\u0027s a duplicate of bug 67384. Vote for it :-)",
    "The non-reacting shell is a dupliate of bug #67384.  The original problem is not.",
    "\u003eException in thread \"main\" java.lang.InternalError: Can\u0027t start the AWT \u003ebecause Java was started on the first thread.  Make sure StartOnFirstThread\n\u003eis not specified in your application\u0027s Info.plist or on the command line\n\nDid you investigate this?  Due to bug 67384, SWT interop with AWT/Swing does not work, however, just having the SWT jar on the path and not referencing any SWT classes shouldn\u0027t be a problem.  I suspect you have StartOnFirstThread (a flag that is necessary to run SWT) turned on somewhere.\n\nI\u0027m marking this as a dup of 67384 because this intent is that both toolkits should work together.\n\n\n*** This bug has been marked as a duplicate of 67384 ***",
    "the second code-example doesn?t work at all (neither on the shell or on eclipse 3.0). I don?t use the \"-XStartOnFirstThread\"-option. I?ve wrote already that I use the command \"java\n-Djava.library.path\u003d/swt -classpath /swt/swt.jar:. de.klinkerjens.swt.Swt\"",
    "I was confused because this bug report contains two problems.  The AWT program doesn\u0027t work and the SWT program is not reacting. \n\nSpecify -XstartOnFirstThread on the command line for the SWT program and it should work.  Sorry about that.  The FAQ on the SWT page in this ares is way out of date."
  ],
  "commentCreationDates": [
    "2006-01-07T01:07:22+01:00",
    "2006-01-07T01:19:22+01:00",
    "2006-01-07T20:50:24+01:00",
    "2006-01-09T19:03:36+01:00",
    "2006-01-09T19:07:43+01:00",
    "2006-01-09T20:39:20+01:00",
    "2006-01-09T23:05:06+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.InternalError",
      "message": "Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line",
      "elements": [
        {
          "method": "java.lang.ClassLoader$NativeLibrary.load",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.loadLibrary0",
          "source": "ClassLoader.java:1586"
        },
        {
          "method": "java.lang.ClassLoader.loadLibrary",
          "source": "ClassLoader.java:1503"
        },
        {
          "method": "java.lang.Runtime.loadLibrary0",
          "source": "Runtime.java:788"
        },
        {
          "method": "java.lang.System.loadLibrary",
          "source": "System.java:834"
        },
        {
          "method": "sun.security.action.LoadLibraryAction.run",
          "source": "LoadLibraryAction.java:50"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.awt.image.ColorModel.loadLibraries",
          "source": "ColorModel.java:188"
        },
        {
          "method": "java.awt.image.ColorModel.\u003cclinit\u003e",
          "source": "ColorModel.java:196"
        },
        {
          "method": "java.awt.image.BufferedImage.\u003cclinit\u003e",
          "source": "BufferedImage.java:212"
        },
        {
          "method": "Awt.\u003cinit\u003e",
          "source": "Awt.java:15"
        },
        {
          "method": "Awt.main",
          "source": "Awt.java:34"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "122988",
      "duplicateId": "67384",
      "date": "2006-01-07T01:07:22+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "67384",
  "bugId": "122988",
  "duplicateId": "67384",
  "date": "2006-01-07T01:07:22+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}