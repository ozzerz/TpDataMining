{
  "comments": [
    "Using atf-0.2.1-v200704051500 with the 2007-05-07 version of http://www.jslint.com/fulljslint.js (renamed to \"jslint.js\"), the \"validate\" operation on any JavaScript file creates an entry in the Problems view that says \"JSLint error: undefined\" on the first line of source code.",
    "Created an attachment (id\u003d66467)\ncurrent version of jslint.js (from http://www.jslint.com/fulljslint.js)\n\n",
    "The problem seems to be caused by variable t.id in function statement() in the jslint.js file being undefined when running in Rhino. This doesn\u0027t occur when running when running the same file in the browser. If it is possible, the simplest solution may be to make an old version available until the problem can be resolved. ",
    "I confirmed that the problem is specific to running in Rhino and is not something that we are doing wrong in our ATF Java code.\n\nI ran then latest fulljslint.js with the rhino.js stub available from http://jslint.com/rhino/rhino.js using command line Rhino and still saw the problem. This test did not involve ATF nor eclipse, it was direct call to Rhino\u0027s Main.\n\nSent a note to Douglas Crockford to see if he has any ideas.",
    "Thanks to Douglas Crockford for the info...\n\nApparently in Rhino the expression\n\nundefined || 0\n\nevaluates to undefined, whereas in the browsers it evaluates to 0.\n\nThis is what\u0027s causing the problem in ATF since we use Rhino to embed jslint.",
    "Created an attachment (id\u003d68860)\ndownloaded from http://www.jslint.com/fulljslint.js, and renamed to jslint.js\n\nas per Robert Goodman, I was requested to attach my version of jslint.js to this bug.\n\nMy original email:\nI?ve followed the instructions on http://www.eclipse.org/atf/downloads/index_build.php?plat\u003dall\u0026buildID\u003d0.2.1-v200704051500\u0026XULPlugin\u003dtrue \n  \nI installed eclipse WTP 1.5.2 (fresh install), then installed ATF (atf-0.2.1-v200704051500.zip).  In Windows | Preferences | ATF | JavaScript Validation, I set the ?JSLint Location? value to the location of my jslint.js file. \n  \nWhen I save a JSP page (with javascript), I get the a popup with the title ?JavaScript JSLint Validator? and text ?org.mozilla.javascript.NativeString?.  The trace below appears in my .metadata/.log file. \n  \n!SESSION 2007-05-25 12:12:02.227 ----------------------------------------------- \neclipse.buildId\u003dM20060921-0945 \njava.version\u003d1.5.0_11 \njava.vendor\u003dSun Microsystems Inc. \nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_ZA \nCommand-line arguments:  -os win32 -ws win32 -arch x86 \n  \n!ENTRY org.eclipse.atf.javascript.validator 4 4 2007-05-25 12:12:18.064 \n!MESSAGE org.mozilla.javascript.NativeString \n!STACK 0 \njava.lang.ClassCastException: org.mozilla.javascript.NativeString \n      at org.eclipse.atf.javascript.internal.validation.jslint.JSLintError.\u003cinit\u003e(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.jslint.JSLint.lint(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.JSLintValidator.validateString(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateDOM(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateFile(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateDelta(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validate(Unknown Source) \n      at org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateInJob(Unknown Source) \n      at org.eclipse.wst.validation.internal.operations.ValidatorJob.run(ValidatorJob.java:70) \n      at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58) ",
    "A patched version of JSLint has been made available. The site ATF site has been updated with the new URL. It ends up that the Bug is in Rhino which ATF uses to run JSLint, but it was easier to patch JSLint. The plans are to use this patched version of JSLint until JSLint is replaced.\n\nJust for reference we changed line 1430 which is \n\nif (t.identifier \u0026\u0026 !t.reserved \u0026\u0026 peek().id \u003d\u003d\u003d \u0027:\u0027) {\n\nto\n\nif (t.identifier \u0026\u0026 !t.reserved \u0026\u0026 peek(0).id \u003d\u003d\u003d \u0027:\u0027) { \n\n"
  ],
  "commentCreationDates": [
    "2007-05-09T15:57:57+02:00",
    "2007-05-09T15:59:47+02:00",
    "2007-05-22T00:24:13+02:00",
    "2007-05-23T20:45:24+02:00",
    "2007-05-24T00:10:17+02:00",
    "2007-05-26T22:21:23+02:00",
    "2007-06-04T17:05:12+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.mozilla.javascript.NativeString",
      "elements": [
        {
          "method": "org.eclipse.atf.javascript.internal.validation.jslint.JSLintError.\u003cinit\u003e",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.jslint.JSLint.lint",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.JSLintValidator.validateString",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateDOM",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateFile",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateDelta",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validate",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.javascript.internal.validation.JSAbstractValidator.validateInJob",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.validation.internal.operations.ValidatorJob.run",
          "source": "ValidatorJob.java:70"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "186156",
      "date": "2007-05-26T22:21:23+02:00",
      "product": "ATF",
      "component": "javascript",
      "severity": "normal"
    }
  ],
  "groupId": "186156",
  "bugId": "186156",
  "date": "2007-05-09T15:57:57+02:00",
  "product": "ATF",
  "component": "javascript",
  "severity": "normal"
}