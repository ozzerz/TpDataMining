{
  "comments": [
    "Having just installed 3.1 M3, we have discovered that this code\n\nImage image \u003d null;\nString iconPath \u003d \"icons/someicon.ico\";\nFile f \u003d new File(iconPath);\nImageDescriptor desc \u003d ImageDescriptor.createFromFile\n(InfrastructurePlugin.class, f.getPath());\n  if (desc !\u003d null)\n  {\n     //obtain the cached image corresponding to the descriptor\n     image \u003d m_ImageCache.getImage(desc);\n  }\n}\nreturn image;\n\nworks in 3.1 M2 if iconPath references a gif or an ico file.  But only works in \n3.1 M3 if the iconPath is a gif.  No longer working for icons.",
    "Move to Platform/UI.",
    "If you replace \"image \u003d m_ImageCache.getImage(desc);\" with \"image \u003d\ndesc.createImage();\", does the ico file get created correctly? ",
    "This looks like an SWT issue. In M3, I have not been able to successfully create\nan \"ico\" image. Jennifer, is this the problem you are running into as well? \nMoving to SWT for comments. This could be a duplicate of Bug 78240.\n\nThe following snippet works well in M2, but not in M3, where it produces this trace:\n\n\"\norg.eclipse.swt.SWTException: i/o error (java.lang.ArrayIndexOutOfBoundsException)\n\tat org.eclipse.swt.SWT.error(SWT.java:2697)\n\tat org.eclipse.swt.SWT.error(SWT.java:2622)\n\tat org.eclipse.swt.internal.image.FileFormat.loadFromStream(FileFormat.java:49)\n\tat org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:75)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:125)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:152)\n\tat org.eclipse.swt.graphics.ImageData.\u003cinit\u003e(ImageData.java:355)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:669)\n\tat Main.main(Main.java:23)\n*** Stack trace of contained exception ***\njava.lang.ArrayIndexOutOfBoundsException\n\tat java.lang.System.arraycopy(Native Method)\n\tat\norg.eclipse.swt.internal.image.WinICOFileFormat.convertPad(WinICOFileFormat.java:28)\n\tat\norg.eclipse.swt.internal.image.WinICOFileFormat.loadIcon(WinICOFileFormat.java:130)\n\tat\norg.eclipse.swt.internal.image.WinICOFileFormat.loadFromByteStream(WinICOFileFormat.java:111)\n\tat org.eclipse.swt.internal.image.FileFormat.loadFromStream(FileFormat.java:47)\n\tat org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:75)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:125)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:152)\n\tat org.eclipse.swt.graphics.ImageData.\u003cinit\u003e(ImageData.java:355)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:669)\n\tat Main.main(Main.java:23)\nException in thread \"main\" \n\"\n\nSnippet:\npublic static void main(String[] args) {\n\tString fileName \u003d \"C:\\\\icon\\\\JavaCup.ico\";\n\tDisplay display \u003d new Display ();\n\tImage image \u003d new Image(display, fileName);\n\tShell shell \u003d new Shell(display);\n\tshell.setImage(image);\n\tshell.open ();\n\twhile (!shell.isDisposed ()) {\n\t\tif (!display.readAndDispatch ()) display.sleep ();\n\t}\n\timage.dispose();\n\tdisplay.dispose ();\n}",
    "GG to make check whether the bug was introduced by fixing FindBugs warnings.  \nIf not, assign to CAR.",
    "The FindBugs changes aren\u0027t in M3.  Car, this became broken between swt v3107c \nand 3108.\n",
    "*** Bug 78240 has been marked as a duplicate of this bug. ***",
    "Fixed \u003e 20041111.",
    "*** Bug 78631 has been marked as a duplicate of this bug. ***",
    "*** Bug 78682 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2004-11-09T21:37:07+01:00",
    "2004-11-09T22:07:11+01:00",
    "2004-11-10T03:02:13+01:00",
    "2004-11-10T15:12:03+01:00",
    "2004-11-10T22:15:05+01:00",
    "2004-11-10T22:55:39+01:00",
    "2004-11-11T15:37:57+01:00",
    "2004-11-11T22:17:37+01:00",
    "2004-11-15T18:51:45+01:00",
    "2004-11-16T13:47:16+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "i/o error (java.lang.ArrayIndexOutOfBoundsException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2697"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2622"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.loadFromStream",
          "source": "FileFormat.java:49"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.load",
          "source": "FileFormat.java:75"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:125"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:152"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageData.\u003cinit\u003e",
          "source": "ImageData.java:355"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.\u003cinit\u003e",
          "source": "Image.java:669"
        },
        {
          "method": "Main.main",
          "source": "Main.java:23"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "78226",
      "date": "2004-11-10T15:12:03+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.image.WinICOFileFormat.convertPad",
          "source": "WinICOFileFormat.java:28"
        },
        {
          "method": "org.eclipse.swt.internal.image.WinICOFileFormat.loadIcon",
          "source": "WinICOFileFormat.java:130"
        },
        {
          "method": "org.eclipse.swt.internal.image.WinICOFileFormat.loadFromByteStream",
          "source": "WinICOFileFormat.java:111"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.loadFromStream",
          "source": "FileFormat.java:47"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.load",
          "source": "FileFormat.java:75"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:125"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:152"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageData.\u003cinit\u003e",
          "source": "ImageData.java:355"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.\u003cinit\u003e",
          "source": "Image.java:669"
        },
        {
          "method": "Main.main",
          "source": "Main.java:23"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "78226",
      "date": "2004-11-10T15:12:03+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "78226",
  "bugId": "78226",
  "date": "2004-11-09T21:37:07+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}