{
  "comments": [
    "Note: This might as well be CDT related, but I do not know. It may also be coincidence that Eclipse crashed while clicking on a project, but I do not think so.\nDetails: I have some rather largish C/C++ projects in my workspace (several thousand files). It already takes very long (~1 Min) to open the workbench and when selecting a project in the navigator it takes (depending on project size) quite as long. During the waiting period the workbench is completely unresponsive.\nAt some point the project selection leads to a crash while waiting for the workbench to become responsive again. The debugger shows the following:\n\n1. NullPointerException:\n!ENTRY org.eclipse.ui 4 0 2007-05-30 13:03:02.177\n!MESSAGE Error occurred during status handling\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.ui.internal.statushandlers.StatusNotificationManager.openStatusDialog(StatusNotificationManager.java:155)\n\tat org.eclipse.ui.internal.statushandlers.StatusNotificationManager$2.run(StatusNotificationManager.java:110)\n\tat org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:152)\n\tat org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:118)\n\tat org.eclipse.swt.widgets.Display.syncExec(Display.java:3897)\n\tat org.eclipse.ui.internal.statushandlers.StatusNotificationManager.addError(StatusNotificationManager.java:108)\n\tat org.eclipse.ui.statushandlers.WorkbenchErrorHandler.handle(WorkbenchErrorHandler.java:50)\n\tat org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler.handle(IDEWorkbenchErrorHandler.java:91)\n\tat org.eclipse.ui.internal.WorkbenchErrorHandlerProxy.handle(WorkbenchErrorHandlerProxy.java:36)\n\tat org.eclipse.ui.statushandlers.StatusManager.handle(StatusManager.java:186)\n\tat org.eclipse.ui.statushandlers.StatusManager.handle(StatusManager.java:230)\n\tat org.eclipse.ui.statushandlers.StatusManager.handle(StatusManager.java:241)\n\tat org.eclipse.ui.application.WorkbenchAdvisor.eventLoopException(WorkbenchAdvisor.java:324)\n\tat org.eclipse.ui.internal.ExceptionHandler.handleException(ExceptionHandler.java:62)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2393)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:497)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:436)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1162)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1137)\n\n2. It stops in the \u0027Daemon Thread [Error Reader]\u0027 in ProcessClosure$ReaderThread.run, line 73 with an OutOfMemoryException.\n\nAfterwards the workbench is completely hung, I can only kill it thus corrupting my workspace :-(",
    "Which build are you using?",
    "I am using Eclipse 3.3M7 (eclipse.buildId\u003dI20070517-1700), CDT 4.0M7\nShould I update to a newer build?",
    "Created an attachment (id\u003d69332)\nPatch\n\nThis looks like a threading issue. Was this your first error or had you already had one - you are getting OutofMemory exceptions so you could be getting a lot of these.\n\nWhen you close the dialog you have the following code\n\ndialog \u003d null;\ndialogOpened \u003d false;\n\nit is possible that the other thread was running and switched off when you were inbetween these calls/\n\ndialogOpened is not really useful you could replace this by just checking if the dialog is null.\n\nAlso be aware that when it is not null it might also be disposed. This suggested patch covers those cases",
    "Incidentally the crash of Eclipse is due to the OutofMemory exception, not this issue.",
    "Andreas I can see why this would happen in the current build so no.\n\nHowever you are running out of memory so you should use the -XmX option with a large heap size. If you turn on the heap monitor you can get an idea of what is getting so big.",
    "+1 for the simplification but we should log another bug about handling catastrophic OutOfMemoryExceptions in 3.4.",
    "The bug for catastrophic OOMs is Bug 189989",
    "+1. New code looks safer.\n",
    "Patch released for build \u003e20070530",
    "(In reply to comment #5)\n\u003e Andreas I can see why this would happen in the current build so no.\n\u003e \n\u003e However you are running out of memory so you should use the -XmX option with a\n\u003e large heap size. If you turn on the heap monitor you can get an idea of what is\n\u003e getting so big.\n\u003e \nBut the question remains what the workbench is doing to consume all the heap. From what I\u0027ve seen so far it is walking a tree (the resources?). I\u0027ll investigate further and eventually file a bug :-)\nThanks for the help/fix for the other problem.\n",
    "That is of course a totally different problem. I find that if you run with your heap monitor open you can see a spike in memory usage as it happens."
  ],
  "commentCreationDates": [
    "2007-05-30T14:30:01+02:00",
    "2007-05-30T18:35:22+02:00",
    "2007-05-30T18:37:52+02:00",
    "2007-05-30T18:50:19+02:00",
    "2007-05-30T18:56:24+02:00",
    "2007-05-30T18:58:01+02:00",
    "2007-05-30T20:13:10+02:00",
    "2007-05-30T20:34:53+02:00",
    "2007-05-30T20:41:29+02:00",
    "2007-05-30T20:58:43+02:00",
    "2007-05-31T10:22:38+02:00",
    "2007-05-31T13:48:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.statushandlers.StatusNotificationManager.openStatusDialog",
          "source": "StatusNotificationManager.java:155"
        },
        {
          "method": "org.eclipse.ui.internal.statushandlers.StatusNotificationManager$2.run",
          "source": "StatusNotificationManager.java:110"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.syncExec",
          "source": "Synchronizer.java:152"
        },
        {
          "method": "org.eclipse.ui.internal.UISynchronizer.syncExec",
          "source": "UISynchronizer.java:118"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.syncExec",
          "source": "Display.java:3897"
        },
        {
          "method": "org.eclipse.ui.internal.statushandlers.StatusNotificationManager.addError",
          "source": "StatusNotificationManager.java:108"
        },
        {
          "method": "org.eclipse.ui.statushandlers.WorkbenchErrorHandler.handle",
          "source": "WorkbenchErrorHandler.java:50"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler.handle",
          "source": "IDEWorkbenchErrorHandler.java:91"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchErrorHandlerProxy.handle",
          "source": "WorkbenchErrorHandlerProxy.java:36"
        },
        {
          "method": "org.eclipse.ui.statushandlers.StatusManager.handle",
          "source": "StatusManager.java:186"
        },
        {
          "method": "org.eclipse.ui.statushandlers.StatusManager.handle",
          "source": "StatusManager.java:230"
        },
        {
          "method": "org.eclipse.ui.statushandlers.StatusManager.handle",
          "source": "StatusManager.java:241"
        },
        {
          "method": "org.eclipse.ui.application.WorkbenchAdvisor.eventLoopException",
          "source": "WorkbenchAdvisor.java:324"
        },
        {
          "method": "org.eclipse.ui.internal.ExceptionHandler.handleException",
          "source": "ExceptionHandler.java:62"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2393"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:497"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:436"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1162"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1137"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "189901",
      "date": "2007-05-30T14:30:01+02:00",
      "product": "Platform",
      "component": "IDE",
      "severity": "critical"
    }
  ],
  "groupId": "189901",
  "bugId": "189901",
  "date": "2007-05-30T14:30:01+02:00",
  "product": "Platform",
  "component": "IDE",
  "severity": "critical"
}