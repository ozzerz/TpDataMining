{
  "comments": [
    "The asynchronous operations should be aware of being executed after the initialy valid data became invalid. Especially, there shoudn\u0027t be any refresh trigger anymore if the platform is shutting down. Occassionally, exceptions like the followings will happen than:\n\nUnhandled event loop exception during blocked modal context.\norg.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:3499)\n\tat org.eclipse.swt.SWT.error(SWT.java:3422)\n\tat org.eclipse.swt.SWT.error(SWT.java:3393)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:432)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:325)\n\tat org.eclipse.swt.widgets.Tree.getItems(Tree.java:3011)\n\tat org.eclipse.rse.internal.ui.view.SystemView.smartRefresh(SystemView.java:3244)\n\tat org.eclipse.rse.internal.ui.view.SystemView.refreshAll(SystemView.java:3133)\n\tat org.eclipse.rse.internal.ui.view.SystemView$ResourceChangedJob.runInUIThread(SystemView.java:1942)\n\tat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3650)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3287)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:158)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:326)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:495)\n\tat org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run(ProgressMonitorJobsDialog.java:265)\n\tat org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.disconnectFromWorkspace(IDEWorkbenchAdvisor.java:404)\n\tat org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.postShutdown(IDEWorkbenchAdvisor.java:321)\n\tat org.eclipse.ui.internal.Workbench.shutdown(Workbench.java:2650)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:902)\n\tat org.eclipse.ui.internal.Workbench.access$15(Workbench.java:819)\n\tat org.eclipse.ui.internal.Workbench$22.run(Workbench.java:1063)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:1061)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:1033)\n\tat org.eclipse.ui.internal.testing.WorkbenchTestable$2.run(WorkbenchTestable.java:121)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3650)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3287)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2337)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2301)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2176)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:463)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:458)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat com.windriver.ide.application.CopyOfIDEApplication.start(CopyOfIDEApplication.java:104)\n\tat com.windriver.ide.application.UnifiedSWTSwingApplication.access$4(UnifiedSWTSwingApplication.java:1)\n\tat com.windriver.ide.application.UnifiedSWTSwingApplication.start(UnifiedSWTSwingApplication.java:37)\n\tat org.eclipse.pde.internal.junit.runtime.UITestApplication.start(UITestApplication.java:52)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:356)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:171)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1141)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1116)",
    "Uwe - shouldn\u0027t this particular one be resolved with your SafeTreeViewer contribution?",
    "No. SystemView, line 3244 is calling a method of the tree widget directly, so SafeTreeViewer cannot kick in. ",
    "Seen similar exceptions during workbench shutdown from smartRefresh() ... getViewAdapter() ... getInputProvider() ... SystemView#getShell()\nSee backtrace below.\n\nI was tempted to just fix the getShell() call, since we should get rid of passing the shell around anyways. But seeing that there are other exceptions in smartRefresh() during shutdown as well, I think we should try and avoid any SystemView refreshes when the Workbench is already shutting down. It might help to register as a SaveParticipant, so we know we\u0027re already shutting down.\n\nThe issue is not severe, but since lots of people have been seeing these exceptions during workbench shutdown, it\u0027s a must-fix for 2.0.1\n\nExceptions:\nCaused by: org.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:3563)\n\tat org.eclipse.swt.SWT.error(SWT.java:3481)\n\tat org.eclipse.swt.SWT.error(SWT.java:3452)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:432)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:325)\n\tat org.eclipse.swt.widgets.Control.getShell(Control.java:1366)\n\tat org.eclipse.rse.internal.ui.view.SystemView.getShell(SystemView.java:1149)\n\tat org.eclipse.rse.internal.ui.view.SystemView.getInputProvider(SystemView.java:625)\n\tat org.eclipse.rse.internal.ui.view.SystemView.getViewAdapter(SystemView.java:1328)\n\tat org.eclipse.rse.internal.ui.view.SystemView.smartRefresh(SystemView.java:3518)\n\tat org.eclipse.rse.internal.ui.view.SystemView$ResourceChangedJob.runInUIThread(SystemView.java:2005)\n\tat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\n\nUnhandled event loop exception during blocked modal context.\norg.eclipse.swt.SWTException: Failed to execute runnable (org.eclipse.swt.SWTException: Widget is disposed)\n\tat org.eclipse.swt.SWT.error(SWT.java:3563)\n\tat org.eclipse.swt.SWT.error(SWT.java:3481)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3659)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3296)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:158)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:326)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:495)\n\tat org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run(ProgressMonitorJobsDialog.java:268)\n\tat org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.disconnectFromWorkspace(IDEWorkbenchAdvisor.java:396)\n\tat org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.postShutdown(IDEWorkbenchAdvisor.java:313)\n\tat org.eclipse.ui.internal.Workbench.shutdown(Workbench.java:2702)\n",
    "Created an attachment (id\u003d78233)\nPatch to suppress \"widget is disposed\" during shutdown\n\nAttached patch suppresses the \"widget is disposed\" exceptions when a refresh is requested while the tree is already disposed.\n\nIt\u0027s not a perfect safeguard though. Expanding a large remote file tree on a slow connection, and quitting eclipse immediately after, leads to 5-10 exceptions being printed due to IllegalState of bundles resolved -- I dont\u0027t think we can really fix this, but the patch should alleviate the problem for the most common cases.",
    "Dave can you review this?",
    "Okay, this is much better than printing exceptions.",
    "Patch applied."
  ],
  "commentCreationDates": [
    "2007-04-19T15:41:09+02:00",
    "2007-05-09T18:01:49+02:00",
    "2007-05-10T10:19:27+02:00",
    "2007-08-10T11:25:10+02:00",
    "2007-09-12T23:03:21+02:00",
    "2007-09-12T23:03:50+02:00",
    "2007-09-13T00:05:12+02:00",
    "2007-09-13T22:28:07+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3499"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3422"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3393"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:432"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:325"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.getItems",
          "source": "Tree.java:3011"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView.smartRefresh",
          "source": "SystemView.java:3244"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView.refreshAll",
          "source": "SystemView.java:3133"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView$ResourceChangedJob.runInUIThread",
          "source": "SystemView.java:1942"
        },
        {
          "method": "org.eclipse.ui.progress.UIJob$1.run",
          "source": "UIJob.java:94"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3650"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3287"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.block",
          "source": "ModalContext.java:158"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:326"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:495"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run",
          "source": "ProgressMonitorJobsDialog.java:265"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.disconnectFromWorkspace",
          "source": "IDEWorkbenchAdvisor.java:404"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.postShutdown",
          "source": "IDEWorkbenchAdvisor.java:321"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.shutdown",
          "source": "Workbench.java:2650"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:902"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$15",
          "source": "Workbench.java:819"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$22.run",
          "source": "Workbench.java:1063"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:1061"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:1033"
        },
        {
          "method": "org.eclipse.ui.internal.testing.WorkbenchTestable$2.run",
          "source": "WorkbenchTestable.java:121"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3650"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3287"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2337"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2301"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2176"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:463"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:458"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "com.windriver.ide.application.CopyOfIDEApplication.start",
          "source": "CopyOfIDEApplication.java:104"
        },
        {
          "method": "com.windriver.ide.application.UnifiedSWTSwingApplication.access$4",
          "source": "UnifiedSWTSwingApplication.java:1"
        },
        {
          "method": "com.windriver.ide.application.UnifiedSWTSwingApplication.start",
          "source": "UnifiedSWTSwingApplication.java:37"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.UITestApplication.start",
          "source": "UITestApplication.java:52"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:356"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:171"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1141"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1116"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "183176",
      "date": "2007-04-19T15:41:09+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "minor"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3563"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3481"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3452"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:432"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:325"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.getShell",
          "source": "Control.java:1366"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView.getShell",
          "source": "SystemView.java:1149"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView.getInputProvider",
          "source": "SystemView.java:625"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView.getViewAdapter",
          "source": "SystemView.java:1328"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView.smartRefresh",
          "source": "SystemView.java:3518"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView$ResourceChangedJob.runInUIThread",
          "source": "SystemView.java:2005"
        },
        {
          "method": "org.eclipse.ui.progress.UIJob$1.run",
          "source": "UIJob.java:94"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "183176",
      "date": "2007-08-10T11:25:10+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "minor"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3563"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3481"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3659"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3296"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.block",
          "source": "ModalContext.java:158"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:326"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:495"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run",
          "source": "ProgressMonitorJobsDialog.java:268"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.disconnectFromWorkspace",
          "source": "IDEWorkbenchAdvisor.java:396"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.postShutdown",
          "source": "IDEWorkbenchAdvisor.java:313"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.shutdown",
          "source": "Workbench.java:2702"
        }
      ],
      "number": 2,
      "commentIndex": 3,
      "bugId": "183176",
      "date": "2007-08-10T11:25:10+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "minor"
    }
  ],
  "groupId": "183176",
  "bugId": "183176",
  "date": "2007-04-19T15:41:09+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "minor"
}