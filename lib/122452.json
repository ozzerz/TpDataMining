{
  "comments": [
    "I wrote below wrong aspect:\n\nand NPE is thrown\npublic aspect TracePoint {\n    pointcut greeting() : call (* Point.sayHello(..));\n    pointcut greeting2() : call (* related.Hello.sayHello(..));\n    after() returning() : greeting*() {\n        System.out.println(\" World!\");\n    }\n}\n\n\njava.lang.NullPointerException\nat org.aspectj.weaver.ResolvedType.findPointcut(ResolvedType.java:479)\nat org.aspectj.weaver.patterns.ReferencePointcut.resolveBindings(ReferencePointcut.java:148)\nat org.aspectj.weaver.patterns.Pointcut.resolve(Pointcut.java:195)\nat org.aspectj.ajdt.internal.compiler.ast.PointcutDesignator.finishResolveTypes(PointcutDesignator.java:84)\nat org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:118)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:400)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1088)\nat org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:115)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1137)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:305)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:514)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java(Compiled Code))\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:230)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:185)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:163)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nNullPointerException thrown: null",
    "To solve your problem, you could use:\n\n    after() returning() : greeting() || greeting2() {  \n        System.out.println(\" World!\");\n    }\n\n\nTo solve the NPE, some comments below:\n\nIf the aspect changes to\n\npublic aspect TracePoint {\n    after() returning() : greeting*() {  \n        System.out.println(\" World!\");\n    }\n}\n\na NPE is raised in another location (see stackTrace in the end of this msg). The \u0027ReferencePointcut\u0027 class has a field named \u0027name\u0027. This field is used in several places in the class but it\u0027s value is given by the constructor. The code below creates a \u0027ReferencePointcut\u0027 instance:\n\npublic class PatternParser {\n   private Pointcut parseReferencePointcut() {\n      ...\n      new ReferencePointcut(onType, name.maybeGetSimpleName(), arguments) \n   }\n}\n\nI believe the problem is due to the \u0027maybeGetSimpleName\u0027 method, that returns null if the name contains a \u0027*\u0027.\n\npublic String maybeGetSimpleName() {\n   if (starCount \u003d\u003d 0 \u0026\u0026 pattern.length \u003e 0) \n      return new String(pattern);\n   return null;\n}\n\n\nStackTrace:\n------------------------------------------------------------------------------\njava.lang.NullPointerException\nat java.io.DataOutputStream.writeUTF(Unknown Source)\nat java.io.DataOutputStream.writeUTF(Unknown Source)\nat org.aspectj.weaver.patterns.ReferencePointcut.write(ReferencePointcut.java:112)\nat org.aspectj.weaver.AjAttribute$AdviceAttribute.write(AjAttribute.java:493)\nat org.aspectj.weaver.AjAttribute.getBytes(AjAttribute.java:60)\nat org.aspectj.weaver.AjAttribute.getAllBytes(AjAttribute.java:73)\nat org.aspectj.ajdt.internal.compiler.ast.EclipseAttributeAdapter.getAllBytes(EclipseAttributeAdapter.java:31)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ClassFile.generateMethodInfoAttribute(ClassFile.java:3310)\nat org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.generateInfoAttributes(AdviceDeclaration.java:82)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode(AbstractMethodDeclaration.java:207)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode(AbstractMethodDeclaration.java:173)\nat org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.generateCode(AdviceDeclaration.java:257)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:568)\nat org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.generateCode(AspectDeclaration.java:280)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:640)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode(CompilationUnitDeclaration.java:184)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:520)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:811)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:230)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:156)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nNullPointerException thrown: null",
    "two little test programs checked in.",
    "Eduardo is right.  I\u0027ve put in a very trivial change that isnt perfect but stops us blowing up when this happens.",
    "fix available."
  ],
  "commentCreationDates": [
    "2006-01-02T11:35:47+01:00",
    "2006-01-10T16:29:53+01:00",
    "2006-01-18T16:26:30+01:00",
    "2006-01-25T11:49:56+01:00",
    "2006-01-25T14:37:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedType.findPointcut",
          "source": "ResolvedType.java:479"
        },
        {
          "method": "org.aspectj.weaver.patterns.ReferencePointcut.resolveBindings",
          "source": "ReferencePointcut.java:148"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.resolve",
          "source": "Pointcut.java:195"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.PointcutDesignator.finishResolveTypes",
          "source": "PointcutDesignator.java:84"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements",
          "source": "AdviceDeclaration.java:118"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:400"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1088"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve",
          "source": "AspectDeclaration.java:115"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1137"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:305"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:514"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java(Compiled Code)"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:230"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:185"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:163"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:117"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "122452",
      "date": "2006-01-02T11:35:47+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.io.DataOutputStream.writeUTF",
          "source": "Unknown Source"
        },
        {
          "method": "java.io.DataOutputStream.writeUTF",
          "source": "Unknown Source"
        },
        {
          "method": "org.aspectj.weaver.patterns.ReferencePointcut.write",
          "source": "ReferencePointcut.java:112"
        },
        {
          "method": "org.aspectj.weaver.AjAttribute$AdviceAttribute.write",
          "source": "AjAttribute.java:493"
        },
        {
          "method": "org.aspectj.weaver.AjAttribute.getBytes",
          "source": "AjAttribute.java:60"
        },
        {
          "method": "org.aspectj.weaver.AjAttribute.getAllBytes",
          "source": "AjAttribute.java:73"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.EclipseAttributeAdapter.getAllBytes",
          "source": "EclipseAttributeAdapter.java:31"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ClassFile.generateMethodInfoAttribute",
          "source": "ClassFile.java:3310"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.generateInfoAttributes",
          "source": "AdviceDeclaration.java:82"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode",
          "source": "AbstractMethodDeclaration.java:207"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode",
          "source": "AbstractMethodDeclaration.java:173"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.generateCode",
          "source": "AdviceDeclaration.java:257"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode",
          "source": "TypeDeclaration.java:568"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.generateCode",
          "source": "AspectDeclaration.java:280"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode",
          "source": "TypeDeclaration.java:640"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode",
          "source": "CompilationUnitDeclaration.java:184"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:520"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:811"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:230"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:156"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:122"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "122452",
      "date": "2006-01-10T16:29:53+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "122452",
  "bugId": "122452",
  "date": "2006-01-02T11:35:47+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}