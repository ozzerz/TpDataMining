{
  "comments": [
    "At report a has four parameters to pass values for datasoure.\nthis parameters is:\ndb_driver\ndb_conn_url\ndb_user\ndb_pass\n\nand these parameters have default values:\ndb_driver \u003d org.postgresql.Driver\ndb_conn_url \u003d jdbc ....\ndb_user \u003d user\ndb_pass \u003d pass\n\non Datasource beforeopen event, I put this script:\nif( params[\"db_driver\"].value ){\t\n   extensionProperties.odaDriverClass \u003d params[\"db_driver\"].value;\n   extensionProperties.odaURL \u003d params[\"db_conn_url\"].value;\n   extensionProperties.odaUser \u003d params[\"db_user\"].value;\n   extensionProperties.odaPassword \u003d params[\"db_password\"].value;\n}\n\nthis away, when on Eclipse Birt ( development time ) datasource will use parameters default value, and when on Birt WebViewer ( runtime in tomcat) datasource will use parameters pass in url, like this:\nhttp://localhost:8080/viewer/run?__report\u003dxxx.rptdesign\u0026db_driver\u003dorg.postgresql.Driver\u0026db_host\u003d172.16.30.4\u0026db_name\u003dgf_mata_compras\u0026db_port\u003d5432\u0026db_user\u003duser\n\n\nthe Birt use defaultValue of db_name(compras) instead of url param value, gf_mata_compras\n\nERROR: \n\nThe following items have errors:\n\nText NewText61:\n+ Cannot open the connection for the driver: org.eclipse.birt.report.data.oda.jdbc\nFailed to get connection.\nSQL error #1: FATAL: banco de dados \"compras\" n\u0026#65533;o existe\n\nodaconsumer.CannotOpenConnection ( 1 time(s) )\ndetail : org.eclipse.birt.data.engine.core.DataException: Cannot open the connection for the driver: org.eclipse.birt.report.data.oda.jdbc\nFailed to get connection.\nSQL error #1: FATAL: banco de dados \"compras\" n\u0026#65533;o existe\n\n at org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:152)\n at org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:133)\n at org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:121)\n at org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource(DataSourceRuntime.java:206)\n at org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource(QueryExecutor.java:248)\n at org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution(QueryExecutor.java:202)\n at org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare(PreparedQuery.java:396)\n at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:145)\n at org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute(PreparedOdaDSQuery.java:134)\n at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:125)\n at org.eclipse.birt.report.engine.data.dte.DteDataEngine.doExecuteQuery(DteDataEngine.java:119)\n at org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.execute(AbstractDataEngine.java:210)\n at org.eclipse.birt.report.engine.executor.ExecutionContext.executeQuery(ExecutionContext.java:1641)\n at org.eclipse.birt.report.engine.executor.QueryItemExecutor.executeQuery(QueryItemExecutor.java:62)\n at org.eclipse.birt.report.engine.executor.TextItemExecutor.executeHtmlText(TextItemExecutor.java:96)\n at org.eclipse.birt.report.engine.executor.TextItemExecutor.execute(TextItemExecutor.java:69)\n at org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute(ReportItemExecutor.java:140)\n at org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute(ReportItemExecutor.java:148)\n at org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute(ReportItemExecutor.java:148)\n at org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute(ReportItemExecutor.java:148)\n at org.eclipse.birt.report.engine.executor.ReportExecutor.executeMasterPage(ReportExecutor.java:192)\n at org.eclipse.birt.report.engine.executor.ReportExecutor.createPage(ReportExecutor.java:237)\n at org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportExecutor.createPage(LocalizedReportExecutor.java:58)\n at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.start(HTMLPageLM.java:181)\n at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:135)\n at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81)\n at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:85)\n at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:205)\n at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:142)\n at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n at org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(Unknown Source)\n at org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute(Unknown Source)\n at org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(Unknown Source)\n at org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source)\n at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(Unknown Source)\n at org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet(Unknown Source)\n at org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown Source)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)\n at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:210)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:870)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:685)\n at java.lang.Thread.run(Thread.java:619)\nCaused by: org.eclipse.birt.report.data.oda.jdbc.JDBCException: Failed to get connection.\nSQL error #1: FATAL: banco de dados \"compras\" n\u0026#65533;o existe\n ;\n    org.postgresql.util.PSQLException: FATAL: banco de dados \"compras\" n\u0026#65533;o existe\n at org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl(Connection.java:154)\n at org.eclipse.birt.report.data.oda.jdbc.Connection.open(Connection.java:111)\n at org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open(OdaConnection.java:235)\n at org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:140)\n ... 54 more\nCaused by: org.postgresql.util.PSQLException: FATAL: banco de dados \"compras\" n\u0026#65533;o existe\n at org.postgresql.core.v3.ConnectionFactoryImpl.readStartupMessages(ConnectionFactoryImpl.java:447)\n at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:102)\n at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)\n at org.postgresql.jdbc2.AbstractJdbc2Connection.\u003cinit\u003e(AbstractJdbc2Connection.java:125)\n at org.postgresql.jdbc3.AbstractJdbc3Connection.\u003cinit\u003e(AbstractJdbc3Connection.java:30)\n at org.postgresql.jdbc3g.Jdbc3gConnection.\u003cinit\u003e(Jdbc3gConnection.java:24)\n at org.postgresql.Driver.makeConnection(Driver.java:382)\n at org.postgresql.Driver.connect(Driver.java:260)\n at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager$WrappedDriver.connect(JDBCDriverManager.java:787)\n at java.sql.DriverManager.getConnection(DriverManager.java:582)\n at java.sql.DriverManager.getConnection(DriverManager.java:154)\n at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect(JDBCDriverManager.java:185)\n at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection(JDBCDriverManager.java:146)\n at org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl(Connection.java:149)\n ... 57 more",
    "Please check the latest 2.1.3 build. It should work well. Thanks.",
    "yes, \n\nit`s works great"
  ],
  "commentCreationDates": [
    "2007-04-25T23:05:21+02:00",
    "2007-04-27T03:48:18+02:00",
    "2007-04-27T04:16:39+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.birt.data.engine.core.DataException",
      "message": "Cannot open the connection for the driver: org.eclipse.birt.report.data.oda.jdbc Failed to get connection. SQL error #1: FATAL: banco de dados \"compras\" n\u0026#65533;o existe",
      "elements": [
        {
          "method": "org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection",
          "source": "ConnectionManager.java:152"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.newConnection",
          "source": "DataSource.java:133"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.open",
          "source": "DataSource.java:121"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource",
          "source": "DataSourceRuntime.java:206"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource",
          "source": "QueryExecutor.java:248"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution",
          "source": "QueryExecutor.java:202"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare",
          "source": "PreparedQuery.java:396"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute",
          "source": "PreparedDataSourceQuery.java:145"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute",
          "source": "PreparedOdaDSQuery.java:134"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute",
          "source": "PreparedDataSourceQuery.java:125"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.DteDataEngine.doExecuteQuery",
          "source": "DteDataEngine.java:119"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.execute",
          "source": "AbstractDataEngine.java:210"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.executeQuery",
          "source": "ExecutionContext.java:1641"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.QueryItemExecutor.executeQuery",
          "source": "QueryItemExecutor.java:62"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.TextItemExecutor.executeHtmlText",
          "source": "TextItemExecutor.java:96"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.TextItemExecutor.execute",
          "source": "TextItemExecutor.java:69"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute",
          "source": "ReportItemExecutor.java:140"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute",
          "source": "ReportItemExecutor.java:148"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute",
          "source": "ReportItemExecutor.java:148"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportItemExecutor.execute",
          "source": "ReportItemExecutor.java:148"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.executeMasterPage",
          "source": "ReportExecutor.java:192"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.createPage",
          "source": "ReportExecutor.java:237"
        },
        {
          "method": "org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportExecutor.createPage",
          "source": "LocalizedReportExecutor.java:58"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.start",
          "source": "HTMLPageLM.java:181"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren",
          "source": "HTMLPageLM.java:135"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout",
          "source": "HTMLPageLM.java:81"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:85"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
          "source": "RunAndRenderTask.java:205"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:142"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:690"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:803"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:269"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:188"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:210"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:174"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:127"
        },
        {
          "method": "org.apache.catalina.valves.ErrorReportValve.invoke",
          "source": "ErrorReportValve.java:117"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:108"
        },
        {
          "method": "org.apache.catalina.connector.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:151"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:870"
        },
        {
          "method": "org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection",
          "source": "Http11BaseProtocol.java:665"
        },
        {
          "method": "org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket",
          "source": "PoolTcpEndpoint.java:528"
        },
        {
          "method": "org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt",
          "source": "LeaderFollowerWorkerThread.java:81"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:685"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:619"
        }
      ],
      "causedBy": {
        "exceptionType": "org.postgresql.util.PSQLException",
        "message": "FATAL: banco de dados \"compras\" n\u0026#65533;o existe",
        "elements": [
          {
            "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl",
            "source": "Connection.java:154"
          },
          {
            "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.open",
            "source": "Connection.java:111"
          },
          {
            "method": "org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open",
            "source": "OdaConnection.java:235"
          },
          {
            "method": "org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection",
            "source": "ConnectionManager.java:140"
          }
        ],
        "causedBy": {
          "exceptionType": "org.postgresql.util.PSQLException",
          "message": "FATAL: banco de dados \"compras\" n\u0026#65533;o existe",
          "elements": [
            {
              "method": "org.postgresql.core.v3.ConnectionFactoryImpl.readStartupMessages",
              "source": "ConnectionFactoryImpl.java:447"
            },
            {
              "method": "org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl",
              "source": "ConnectionFactoryImpl.java:102"
            },
            {
              "method": "org.postgresql.core.ConnectionFactory.openConnection",
              "source": "ConnectionFactory.java:66"
            },
            {
              "method": "org.postgresql.jdbc2.AbstractJdbc2Connection.\u003cinit\u003e",
              "source": "AbstractJdbc2Connection.java:125"
            },
            {
              "method": "org.postgresql.jdbc3.AbstractJdbc3Connection.\u003cinit\u003e",
              "source": "AbstractJdbc3Connection.java:30"
            },
            {
              "method": "org.postgresql.jdbc3g.Jdbc3gConnection.\u003cinit\u003e",
              "source": "Jdbc3gConnection.java:24"
            },
            {
              "method": "org.postgresql.Driver.makeConnection",
              "source": "Driver.java:382"
            },
            {
              "method": "org.postgresql.Driver.connect",
              "source": "Driver.java:260"
            },
            {
              "method": "org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager$WrappedDriver.connect",
              "source": "JDBCDriverManager.java:787"
            },
            {
              "method": "java.sql.DriverManager.getConnection",
              "source": "DriverManager.java:582"
            },
            {
              "method": "java.sql.DriverManager.getConnection",
              "source": "DriverManager.java:154"
            },
            {
              "method": "org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect",
              "source": "JDBCDriverManager.java:185"
            },
            {
              "method": "org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection",
              "source": "JDBCDriverManager.java:146"
            },
            {
              "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl",
              "source": "Connection.java:149"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "184129",
      "date": "2007-04-25T23:05:21+02:00",
      "product": "BIRT",
      "component": "Report Viewer",
      "severity": "blocker"
    }
  ],
  "groupId": "184129",
  "bugId": "184129",
  "date": "2007-04-25T23:05:21+02:00",
  "product": "BIRT",
  "component": "Report Viewer",
  "severity": "blocker"
}