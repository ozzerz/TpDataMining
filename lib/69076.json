{
  "comments": [
    "The reveal method does not always properly scroll when the last item in the \nlist is specified.  The reveal method seems to have several coding errors.  A \nportion of the code (from 3.0RC3) is listed below:\n\n\t[a] int visibleCount \u003d Math.max ((rect.x + rect.height) / height, 1);\n\t[b] int bottomIndex \u003d Math.min (topIndex + visibleCount + 1, count - 1);\n\tif ((topIndex \u003c\u003d index) \u0026\u0026 (index \u003c\u003d bottomIndex)) return;\n\t[c] int newTop \u003d Math.min (Math.max (index - (visibleCount / 2), 0), \ncount - 1);\n\tlist.setTopIndex(newTop);\n\nWe note the following problems:\n[a]: rect.x in this expression seems wrong.  In fact we think that rect.x + \nrect.height should be replaced simply with rect.height\n[b]: We believe that topIndex + visibleCount + 1 is incorrect, and should be \ntopIndex + visibleCount - 1.  This seems to be the source of the error.\n[c]: The outer \"min\" expression is superfluous.  The max expression is \nproveably \u003e\u003d count-1.\n\nLarry Bergman and Tessa Lau",
    "This is a bug in the code we copied from SWT, which has since been fixed (see\nbug 68950).\n\nI have only fixed [a] and [b], I did not change [c]. \n\nReleased for builds \u003e20051108.",
    "Reopening because we have a test failure on MacOS.\n\njunit.framework.AssertionFailedError: topIndex should not change on setSelection\nexpected:\u003c19\u003e but was:\u003c18\u003e\nat\norg.eclipse.jface.tests.viewers.ListViewerTest.testRevealBug69076(ListViewerTest.java:66)\nat org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:330)\nat org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:204)\nat org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:35)\nat org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:31)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "I have changed the test so that it does not run on Mac OS until bug 116105 is fixed.",
    "Opened bug 120167 to track the issue with the test so that I can close this one.",
    "Trying again to mark this as fixed.",
    "Verified on Windows XP using I20051213-0010. The test is part of the suite and passes."
  ],
  "commentCreationDates": [
    "2004-06-30T22:17:21+02:00",
    "2005-11-08T20:53:35+01:00",
    "2005-11-11T16:52:06+01:00",
    "2005-11-12T04:18:48+01:00",
    "2005-12-09T20:46:52+01:00",
    "2005-12-09T20:52:27+01:00",
    "2005-12-13T15:54:05+01:00"
  ],
  "traces": [
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "message": "topIndex should not change on setSelection expected:\u003c19\u003e but was:\u003c18\u003e",
      "elements": [
        {
          "method": "org.eclipse.jface.tests.viewers.ListViewerTest.testRevealBug69076",
          "source": "ListViewerTest.java:66"
        },
        {
          "method": "org.eclipse.test.EclipseTestRunner.run",
          "source": "EclipseTestRunner.java:330"
        },
        {
          "method": "org.eclipse.test.EclipseTestRunner.run",
          "source": "EclipseTestRunner.java:204"
        },
        {
          "method": "org.eclipse.test.CoreTestApplication.runTests",
          "source": "CoreTestApplication.java:35"
        },
        {
          "method": "org.eclipse.test.CoreTestApplication.run",
          "source": "CoreTestApplication.java:31"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "69076",
      "date": "2005-11-11T16:52:06+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "69076",
  "bugId": "69076",
  "date": "2004-06-30T22:17:21+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}