{
  "comments": [
    "I20050329-2000\n\nClose a project and the open the context menu on it. I guess the problem is that\norg.eclipse.ui.internal.ide.model.ProjectPersistentPropertyTester accesses a\nclosed project.\n\nError 2005-03-30 12:42:44.675 Core exception while testing project persistent\nproperty\norg.eclipse.core.internal.resources.ResourceException: Resource\n/org.eclipse.jface.text.tests is not open.\n\tat org.eclipse.core.internal.resources.Project.checkAccessible(Project.java:127)\n\tat\norg.eclipse.core.internal.resources.Resource.getPersistentProperty(Resource.java:924)\n\tat\norg.eclipse.ui.internal.ide.model.ProjectPersistentPropertyTester.test(ProjectPersistentPropertyTester.java:68)\n\tat org.eclipse.core.internal.expressions.Property.test(Property.java:52)\n\tat\norg.eclipse.core.internal.expressions.TestExpression.evaluate(TestExpression.java:57)\n\tat\norg.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:47)\n\tat\norg.eclipse.core.internal.expressions.AdaptExpression.evaluate(AdaptExpression.java:58)\n\tat\norg.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:47)\n\tat\norg.eclipse.core.internal.expressions.EnablementExpression.evaluate(EnablementExpression.java:29)\n\tat\norg.eclipse.ui.internal.ObjectActionContributor$ObjectContribution.isApplicableTo(ObjectActionContributor.java:337)\n\tat\norg.eclipse.ui.internal.ObjectActionContributor.isApplicableTo(ObjectActionContributor.java:208)\n\tat\norg.eclipse.ui.internal.ObjectContributorManager.isApplicableTo(ObjectContributorManager.java:274)\n\tat\norg.eclipse.ui.internal.ObjectActionContributorManager.contributeObjectActions(ObjectActionContributorManager.java:124)\n\tat\norg.eclipse.ui.internal.PopupMenuExtender.addObjectActions(PopupMenuExtender.java:201)\n\tat\norg.eclipse.ui.internal.PopupMenuExtender.menuAboutToShow(PopupMenuExtender.java:226)\n\tat org.eclipse.jface.action.MenuManager.fireAboutToShow(MenuManager.java:285)\n\tat org.eclipse.jface.action.MenuManager.handleAboutToShow(MenuManager.java:372)\n\tat org.eclipse.jface.action.MenuManager.access$0(MenuManager.java:369)\n\tat org.eclipse.jface.action.MenuManager$2.menuShown(MenuManager.java:386)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:116)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:866)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:847)\n\tat org.eclipse.swt.widgets.Control.WM_INITMENUPOPUP(Control.java:3327)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3055)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1493)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3466)\n\tat org.eclipse.swt.internal.win32.OS.TrackPopupMenu(Native Method)\n\tat org.eclipse.swt.widgets.Menu._setVisible(Menu.java:225)\n\tat org.eclipse.swt.widgets.Display.runPopups(Display.java:2920)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2521)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:338)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:151)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:268)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:260)\n\tat org.eclipse.core.launcher.Main.run(Main.java:887)\n\tat org.eclipse.core.launcher.Main.main(Main.java:871)",
    "This is even more a problem with the Package Explorer in Working Sets mode:\nOpening the context menu on a working set with closed projects logs an exception\nfor each closed project.",
    "Michael, could you please take a look at this?",
    "Yes, I will have a look at this. Could someone explain why this is major? Is \nthere a loss of funtionality? ",
    "Created an attachment (id\u003d19321)\nPatch to org.eclipse.ui.ide\n\nHere\u0027s a patch that prevents logging of the exception if the projet is closed",
    "Created an attachment (id\u003d19322)\nPatch to org.eclipse.ui.tests\n\nHere a patch to the test case that tests for closd projects. Incidently, the\ntest passes without the previous patch but I think it is a good test case to\nhave anyway.",
    "Downgrading severity as the exception has no effect on funtionality and I \nbelieve that major implies that at least some funtionality is affected. \nProbably good to include the patch in M6 anyway.",
    "MvM: M6 candidate?",
    "Missing functionality I can see is that the context menu on working sets in the\nPackage Explorer does not show Open/Close Projects and Team menus. I agree on\n\"Normal\" severity, though.",
    "The Team menu will only appear if there is at least one open project that is \nmapped to CVS. This worked for me (i.e. if I close one project and leave \nothers open, the team menu still appears). This is what the test case I added \ntests for. \n\nAs for the Close Projects menu, I see what you mean. It is there when there \nare no closed projects but disappears when one of the projects in closed. This \nis a different issue. You should log a bug report against JDT UI for this.",
    "Oops, sorry for the false accusation. The open/close projects menu problem is\nbug 81515.",
    "*** Bug 89558 has been marked as a duplicate of this bug. ***",
    "*** Bug 89565 has been marked as a duplicate of this bug. ***",
    "I\u0027ve moved the check into the if statement before the catch.  Patch submitted with MvM.",
    "*** Bug 89738 has been marked as a duplicate of this bug. ***",
    "Just a note on the effects of concurrency: The change you made (performing a \nprecheck instead of a postcheck) has introduced the chance (if ever so slight) \nof the exception being logged. The property tester does not hold any \nscheduling rules while it does it\u0027s checks so there is always the chance that \na project will be closed after the precheck but before the property access. \n\nI don\u0027t think it is worth changing the code back to doing a postcheck since \nthe chances of a project close happening at the same time the tester is being \nused is negligable. I think there is a larger chance of other concurrent \noperations (e.g. resource deletion) causing exceptions to be logged by the \ntester. I\u0027m not sure if we need to do anything about this at this point since \nthere are no undesirable side effects (otherthan the logged exception) and the \nchances of it happening are slim. It is something to keep in mind though. \n\nI did notice that other Workbench filters just caught any exceptions and \nsilently ignored them. I didn\u0027t do it in the property tester as silently \nignoring exceptions makes me uncomfortable.",
    "Verified in I20050509-2010"
  ],
  "commentCreationDates": [
    "2005-03-30T11:52:25+02:00",
    "2005-03-30T12:07:04+02:00",
    "2005-03-30T13:22:17+02:00",
    "2005-03-30T14:53:46+02:00",
    "2005-03-30T15:09:47+02:00",
    "2005-03-30T15:11:11+02:00",
    "2005-03-30T15:12:31+02:00",
    "2005-03-30T15:37:19+02:00",
    "2005-03-30T15:59:54+02:00",
    "2005-03-30T16:16:53+02:00",
    "2005-03-30T16:25:25+02:00",
    "2005-03-30T16:26:17+02:00",
    "2005-03-30T16:34:47+02:00",
    "2005-03-30T21:47:05+02:00",
    "2005-03-31T00:49:19+02:00",
    "2005-04-04T18:36:00+02:00",
    "2005-05-10T19:44:39+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.resources.ResourceException",
      "message": "Resource /org.eclipse.jface.text.tests is not open.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.resources.Project.checkAccessible",
          "source": "Project.java:127"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.getPersistentProperty",
          "source": "Resource.java:924"
        },
        {
          "method": "org.eclipse.ui.internal.ide.model.ProjectPersistentPropertyTester.test",
          "source": "ProjectPersistentPropertyTester.java:68"
        },
        {
          "method": "org.eclipse.core.internal.expressions.Property.test",
          "source": "Property.java:52"
        },
        {
          "method": "org.eclipse.core.internal.expressions.TestExpression.evaluate",
          "source": "TestExpression.java:57"
        },
        {
          "method": "org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd",
          "source": "CompositeExpression.java:47"
        },
        {
          "method": "org.eclipse.core.internal.expressions.AdaptExpression.evaluate",
          "source": "AdaptExpression.java:58"
        },
        {
          "method": "org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd",
          "source": "CompositeExpression.java:47"
        },
        {
          "method": "org.eclipse.core.internal.expressions.EnablementExpression.evaluate",
          "source": "EnablementExpression.java:29"
        },
        {
          "method": "org.eclipse.ui.internal.ObjectActionContributor$ObjectContribution.isApplicableTo",
          "source": "ObjectActionContributor.java:337"
        },
        {
          "method": "org.eclipse.ui.internal.ObjectActionContributor.isApplicableTo",
          "source": "ObjectActionContributor.java:208"
        },
        {
          "method": "org.eclipse.ui.internal.ObjectContributorManager.isApplicableTo",
          "source": "ObjectContributorManager.java:274"
        },
        {
          "method": "org.eclipse.ui.internal.ObjectActionContributorManager.contributeObjectActions",
          "source": "ObjectActionContributorManager.java:124"
        },
        {
          "method": "org.eclipse.ui.internal.PopupMenuExtender.addObjectActions",
          "source": "PopupMenuExtender.java:201"
        },
        {
          "method": "org.eclipse.ui.internal.PopupMenuExtender.menuAboutToShow",
          "source": "PopupMenuExtender.java:226"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.fireAboutToShow",
          "source": "MenuManager.java:285"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.handleAboutToShow",
          "source": "MenuManager.java:372"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.access$0",
          "source": "MenuManager.java:369"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager$2.menuShown",
          "source": "MenuManager.java:386"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:116"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:866"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:847"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_INITMENUPOPUP",
          "source": "Control.java:3327"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3055"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1493"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3466"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.TrackPopupMenu",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Menu._setVisible",
          "source": "Menu.java:225"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runPopups",
          "source": "Display.java:2920"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2521"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1570"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1534"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:306"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:228"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:338"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:151"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:268"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:260"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:887"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:871"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "89504",
      "date": "2005-03-30T11:52:25+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "89504",
  "bugId": "89504",
  "date": "2005-03-30T11:52:25+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}