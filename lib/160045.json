{
  "comments": [
    "N20061004-0010\nTypeCompletionTest fail on linux.\n\nAdded a null check in ContentAssistProcessor line 161 to prevent the failures. However, this has to be investigated: it is most likely a platform problem that no key binding is returned there.\n\norg.eclipse.core.runtime.AssertionFailedException: null argument:\nat org.eclipse.core.runtime.Assert.isNotNull(Assert.java:84)\nat org.eclipse.core.runtime.Assert.isNotNull(Assert.java:72)\nat org.eclipse.jface.text.contentassist.ContentAssistant.setRepeatedInvocationTrigger(ContentAssistant.java:2267)\nat org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor$2.assistSessionStarted(ContentAssistProcessor.java:163)\nat org.eclipse.jface.text.contentassist.ContentAssistant.fireSessionBeginEvent(ContentAssistant.java:2134)\nat org.eclipse.jface.text.contentassist.ContentAssistant.prepareToShowCompletions(ContentAssistant.java:1611)\nat org.eclipse.jface.text.contentassist.ContentAssistant.completePrefix(ContentAssistant.java:1591)\nat org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.incrementalAssist(AbstractCompletionTest.java:489)\nat org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.assertIncrementalCompletion(AbstractCompletionTest.java:311)\nat org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.assertMethodBodyIncrementalCompletion(AbstractCompletionTest.java:211)\nat org.eclipse.jdt.text.tests.contentassist.TypeCompletionTest.testIncrementalInsertion(TypeCompletionTest.java:206)\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)",
    "I can see the failure in my working eclipse, but so far not in my self-hosted eclipse.\n\nPW\n",
    "I reverted the change since we need to figure out the real cause for this and because clients of ContentAssist.getTriggerSequence() aren\u0027t prepared to get \u0027null\u0027.\n\nSee bug 159713 for a scenario where it happens for a user using 3.2.1.\n\n*** This bug has been marked as a duplicate of 159713 ***",
    "I\u0027m reopening this one because there seems to be either a bug on the build machine or in Platform UI not returning the key binding in some strange situations. The  unchanged Platform Text code seems to trigger the failures on the build machine since about a week.\n\nI will hold off committing the fix for bug 159699 since it will hide this issue.\n\nPaul, do you have a change to debug/check this on the build machine?",
    "\u003echange\nshould be\n\nNOTE: we cannot reproduce this on our Linux machine with gtk2.\n\nHere\u0027s the code we use to get the key sequence:\n\nfinal IBindingService bindingSvc\u003d (IBindingService)   \n  PlatformUI.getWorkbench().getAdapter(IBindingService.class);\n\nTriggerSequence binding\u003d \nbindingSvc.getBestActiveBindingFor(ITextEditorActionDefinitionIds.CONTENT_ASSIST_PROPOSALS);\n\nif (binding instanceof KeySequence)\n  return (KeySequence) binding;\nreturn null;\n",
    "NOTE the failures now happen again (last time on N20061010-0010) because I reverted Martin\u0027s fix that hides the problem, see comment 2.",
    "This could be happening because of a separate thread update to the BindingManager clearing the bindings, or because of incorrect information from a parameterized command.\n\nInvestigating.\n\nPW\n",
    "Can you reproduce it on your machine? On ours which is a dual processor (not dual core) machine we can\u0027t.",
    "I\u0027ve been able to produce the failure on and off on my machine ... I\u0027ll hop into the lab if I can\u0027t get it reliably by lunch.\n\nPW\n",
    "I\u0027ve confirmed that this problem occurs when running the tests with the screen locked (I get the same 15 UI failures and the same 4 JFace failures).\n\nKim, can we make sure the screens on the linux machines don\u0027t lock for test runs?  Then we can confirm my results in tonight\u0027s nightly build.\n\nDani, the screen lock interferes with our shell activation-\u003econtext update-\u003ekeybinding update, which should explain why you see your problem.\n\nI can also get the problem by removing the CTRL+SPACE keybinding and waiting for the time-delay content assist, but that\u0027s a valid user usecase.\n\nPW\n",
    "\u003eI can also get the problem by removing the CTRL+SPACE keybinding and waiting\n\u003efor the time-delay content assist, but that\u0027s a valid user usecase.\nYes I know, this is covered by bug 159699. I only held off committing the fix because it would hide this problem.",
    "At least under WindowsXP it doesn\u0027t seem to cause this and unfortunately I can\u0027t test it on our Linux box since I can\u0027t enable the screen saver there.",
    "Paul - yes, I disabled the screen saver earlier morning.",
    "It looks in in the i build we solved UI test problems but not jdt.text.\n\nI\u0027ll start investigating with the jdt.text testcases.\n\nPW\n",
    "I don\u0027t have access to last nights nightly build test results, but it appears to still be a locked screen problem.\n\nThe tests work fine on my machine, and I get the same 8 failures as http://fullmoon.ottawa.ibm.com/downloads/drops/I20061010-0800/testresults/html/org.eclipse.jdt.text.tests_linux.gtk.x86.html when I run with my screen locked.\n\nKim, did you disable the screen or just set it to a long time for that I build?  It looks like the I build failures are locked screen related, but we\u0027ll need to see the nightly build results to confirm.\n\nPW\n",
    "The screen saver was completely disabled yesterday morning. ",
    "But the tests were already running, correct?  I\u0027m hoping here that org.eclipse.jdt.text.tests runs before org.eclipse.ui.tests :-)\n\nLast night\u0027s tests haven\u0027t shown up yet.\n\nPW\n",
    "Yes, the jdt text suite is the first to run.  The windows tests from the nightly build  are running really slowly for some reason. The other test results from the nightly build are available here.  \n\nhttp://download.eclipse.org/eclipse/downloads/drops/N20061011-0010/testresults/html/",
    "If you just run the JDT Text tests on the build machine: do they also fail?",
    "Excellent, the jdt nightly tests ran at 100%, and the old UI tests failures are gone.\n\n(of course, there are new, unrelated UI test failures :-)\n\nPW\n",
    "The link does not work for me I get \"Forbidden Access\" and on the internal server\nhttp://eclipsebuildserv.ottawa.ibm.com/downloads/master/downloads/drops/N20061011-0010/testResults.php\n\nThe test results seem not to be there yet.",
    "Dani, \n\nThe main test results page has not been generated yet because the windows tests are still running.  You can look at the results that have been generated so far from the other machines by looking at the html files, for instance\n\nhttp://eclipsebuildserv.ottawa.ibm.com/downloads/master/downloads/drops/N20061011-0010/testresults/html/",
    "Thanks - and the JDT Text pass - great. I guess we can close this bug then.",
    "Screensaver disabled.\n\nPW\n",
    "bookkeeping"
  ],
  "commentCreationDates": [
    "2006-10-06T17:32:00+02:00",
    "2006-10-06T19:05:54+02:00",
    "2006-10-09T09:20:06+02:00",
    "2006-10-10T12:14:02+02:00",
    "2006-10-10T12:21:14+02:00",
    "2006-10-10T12:27:38+02:00",
    "2006-10-10T14:25:15+02:00",
    "2006-10-10T14:33:57+02:00",
    "2006-10-10T14:41:17+02:00",
    "2006-10-10T17:45:15+02:00",
    "2006-10-10T17:49:18+02:00",
    "2006-10-10T18:18:20+02:00",
    "2006-10-10T19:16:59+02:00",
    "2006-10-10T20:20:24+02:00",
    "2006-10-11T14:45:34+02:00",
    "2006-10-11T14:51:39+02:00",
    "2006-10-11T16:07:33+02:00",
    "2006-10-11T16:47:19+02:00",
    "2006-10-11T16:55:24+02:00",
    "2006-10-11T16:56:40+02:00",
    "2006-10-11T17:01:27+02:00",
    "2006-10-11T17:17:36+02:00",
    "2006-10-11T17:20:29+02:00",
    "2006-10-12T15:35:03+02:00",
    "2007-02-06T16:19:18+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.AssertionFailedException",
      "message": "null argument:",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isNotNull",
          "source": "Assert.java:84"
        },
        {
          "method": "org.eclipse.core.runtime.Assert.isNotNull",
          "source": "Assert.java:72"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.setRepeatedInvocationTrigger",
          "source": "ContentAssistant.java:2267"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor$2.assistSessionStarted",
          "source": "ContentAssistProcessor.java:163"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.fireSessionBeginEvent",
          "source": "ContentAssistant.java:2134"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.prepareToShowCompletions",
          "source": "ContentAssistant.java:1611"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.completePrefix",
          "source": "ContentAssistant.java:1591"
        },
        {
          "method": "org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.incrementalAssist",
          "source": "AbstractCompletionTest.java:489"
        },
        {
          "method": "org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.assertIncrementalCompletion",
          "source": "AbstractCompletionTest.java:311"
        },
        {
          "method": "org.eclipse.jdt.text.tests.contentassist.AbstractCompletionTest.assertMethodBodyIncrementalCompletion",
          "source": "AbstractCompletionTest.java:211"
        },
        {
          "method": "org.eclipse.jdt.text.tests.contentassist.TypeCompletionTest.testIncrementalInsertion",
          "source": "TypeCompletionTest.java:206"
        },
        {
          "method": "junit.extensions.TestDecorator.basicRun",
          "source": "TestDecorator.java:24"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "160045",
      "date": "2006-10-06T17:32:00+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "160045",
  "bugId": "160045",
  "date": "2006-10-06T17:32:00+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}