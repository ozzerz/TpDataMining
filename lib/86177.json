{
  "comments": [
    "This happened with a clean install of 3.1M5a, on a fresh workspace.\n\n1. Change the background and foreground colors to be not \"system default\"\nWindow -\u003e Preferences -\u003e General -\u003e Editors -\u003e Text Editors\nSelect Background color and uncheck \"System Default\"\nSelect Foreground color and uncheck \"System Default\"\n\n2. Go to the Java syntax coloring page and click \"OK\"\nWindow -\u003e Preferences -\u003e Java -\u003e Editor -\u003e Syntax Coloring\nClick OK.\n\nAn error dialog will show up saying, \"An error has occurred.\"  You can\u0027t go back\nto eclipse, and you\u0027re forced to kill eclipse.  The error log has this stack trace:\n\n!ENTRY org.eclipse.ui 4 4 2005-02-22 13:22:33.31\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 2005-02-22 13:22:33.31\n!MESSAGE Argument not valid\n!STACK 0\njava.lang.IllegalArgumentException: Argument not valid\n\tat org.eclipse.swt.SWT.error(SWT.java:2823)\n\tat org.eclipse.swt.SWT.error(SWT.java:2762)\n\tat org.eclipse.swt.SWT.error(SWT.java:2733)\n\tat org.eclipse.swt.graphics.TextStyle.\u003cinit\u003e(TextStyle.java:73)\n\tat\norg.eclipse.swt.custom.StyledTextRenderer.getTextLayout(StyledTextRenderer.java:437)\n\tat org.eclipse.swt.custom.StyledTextRenderer.drawLine(StyledTextRenderer.java:114)\n\tat org.eclipse.swt.custom.StyledText.performPaint(StyledText.java:5748)\n\tat org.eclipse.swt.custom.StyledText.handlePaint(StyledText.java:5129)\n\tat org.eclipse.swt.custom.StyledText$7.handleEvent(StyledText.java:4791)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:866)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:851)\n\tat org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java:1078)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3076)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3480)\n\tat org.eclipse.swt.internal.win32.OS.RedrawWindow(Native Method)\n\tat org.eclipse.swt.widgets.Control.update(Control.java:2907)\n\tat org.eclipse.swt.widgets.Display.update(Display.java:3382)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:724)\n\tat org.eclipse.jface.window.Window.open(Window.java:696)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:319)\n\tat\norg.eclipse.jface.preference.PreferenceDialog$12.handleException(PreferenceDialog.java:890)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.handleException(InternalPlatform.java:697)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1017)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat\norg.eclipse.jface.preference.PreferenceDialog.okPressed(PreferenceDialog.java:833)\n\tat\norg.eclipse.jface.preference.PreferenceDialog.buttonPressed(PreferenceDialog.java:220)\n\tat\norg.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.buttonPressed(WorkbenchPreferenceDialog.java:246)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:543)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2908)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2541)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:718)\n\tat org.eclipse.jface.window.Window.open(Window.java:696)\n\tat org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:66)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:1003)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:557)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:507)\n\tat\norg.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:421)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2908)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2541)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1612)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1578)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:293)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:333)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:150)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:268)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:260)\n\tat org.eclipse.core.launcher.Main.run(Main.java:887)\n\tat org.eclipse.core.launcher.Main.main(Main.java:871)",
    "*** Bug 86149 has been marked as a duplicate of this bug. ***",
    "The problem is in JavaSourceViewer.unconfigure() which gets called upon editor\nreuse and when during handleDispose(). During handleDispose() the text widget\nisn\u0027t disposed yet and hence setFore/BackgroundColor(Color) got called which\ncaused the text widget being redrawn during dispose.\n\nThis problem only appears on the preference page because the previewer uses its\nown color manager which is already disposed when the redraw happens.\n\nThe calls to setFore/BackgroundColor(Color) have been introduced to fix bug 53641.\n\nFixed in HEAD.\n",
    "*** Bug 88576 has been marked as a duplicate of this bug. ***",
    "*** Bug 88906 has been marked as a duplicate of this bug. ***",
    "Verified",
    "*** Bug 88623 has been marked as a duplicate of this bug. ***",
    "I entered the bug no.88623, which was recently marked as a duplicate of this bug.\nRegarding the following line in additional comment #2:\n\n\"This problem only appears on the preference page because the previewer uses its\nown color manager which is already disposed when the redraw happens.\"\n\nI\u0027d like to point out that in my original bug entry, I also specified that the\nbug happened also when not using/browsing the preference page.\nI don\u0027t know the inner workings of eclipse, thus I may well miss something, but\n(assuming comment #2 is accurate) it seems to me that either the bug I entered\nwere really two bugs (of which just one should have been marked as duplicated of\nthis one), or maybe something in this bug report was not considered.\nAs an additional remark I can say, now that I\u0027ve seen this bug report, that\nindeed I\u0027m using custom colors in my eclipse editors configuration.\nThanks.",
    "Comment 2 is correct. You have two variants in your original bug but only one\nstack trace which cleary is for variant 2.\n\nI suggest to\n- switch to M6 which is coming this week\n- file a separate bug once you detect variant 1 again using M6\n",
    "I\u0027ll follow your advice. Thank you very much.",
    "*** Bug 91188 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2005-02-22T18:26:15+01:00",
    "2005-02-23T08:32:22+01:00",
    "2005-02-24T15:14:34+01:00",
    "2005-03-21T08:41:12+01:00",
    "2005-03-23T23:04:35+01:00",
    "2005-03-30T11:32:38+02:00",
    "2005-03-31T07:50:02+02:00",
    "2005-03-31T09:18:03+02:00",
    "2005-03-31T09:26:22+02:00",
    "2005-03-31T09:56:23+02:00",
    "2005-04-13T18:17:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Argument not valid",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2823"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2762"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2733"
        },
        {
          "method": "org.eclipse.swt.graphics.TextStyle.\u003cinit\u003e",
          "source": "TextStyle.java:73"
        },
        {
          "method": "org.eclipse.swt.custom.StyledTextRenderer.getTextLayout",
          "source": "StyledTextRenderer.java:437"
        },
        {
          "method": "org.eclipse.swt.custom.StyledTextRenderer.drawLine",
          "source": "StyledTextRenderer.java:114"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.performPaint",
          "source": "StyledText.java:5748"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handlePaint",
          "source": "StyledText.java:5129"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$7.handleEvent",
          "source": "StyledText.java:4791"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:866"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:851"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_PAINT",
          "source": "Composite.java:1078"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3076"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3480"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.RedrawWindow",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.update",
          "source": "Control.java:2907"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.update",
          "source": "Display.java:3382"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:724"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:696"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:319"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog$12.handleException",
          "source": "PreferenceDialog.java:890"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.handleException",
          "source": "InternalPlatform.java:697"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1017"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog.okPressed",
          "source": "PreferenceDialog.java:833"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog.buttonPressed",
          "source": "PreferenceDialog.java:220"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.buttonPressed",
          "source": "WorkbenchPreferenceDialog.java:246"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:543"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2908"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2541"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:718"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:696"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:66"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:1003"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:557"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:507"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:421"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2908"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2541"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1612"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1578"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:293"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:228"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:333"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:150"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:268"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:260"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:887"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:871"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "86177",
      "date": "2005-02-22T18:26:15+01:00",
      "product": "Platform",
      "component": "Text",
      "severity": "major"
    }
  ],
  "groupId": "86177",
  "bugId": "86177",
  "date": "2005-02-22T18:26:15+01:00",
  "product": "Platform",
  "component": "Text",
  "severity": "major"
}