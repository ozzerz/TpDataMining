{
  "comments": [
    "Loading a 15x12 pixel jpeg created in Photoshop but copied from a windows bmp \nfile throws the following exception:\n\norg.eclipse.swt.SWTException: Unsupported or unrecognized format\n\tat org.eclipse.swt.SWT.error(SWT.java:2691)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.SWT.error(SWT.java:2587)\n\tat org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:73)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:124)\n\tat org.eclipse.swt.graphics.ImageData.\u003cinit\u003e(ImageData.java:308)\n\tat com.swtdesigner.SWTResourceManager.getImage\n(SWTResourceManager.java:117)\n\tat com.swtdesigner.SWTResourceManager.getImage\n(SWTResourceManager.java:166)\n\tat org.ncems.cis.vehicle.ui.SearchPageUI.\u003cinit\u003e(SearchPageUI.java:122)\n\tat org.ncems.cis.vehicle.uimodel.SearchPageModel.\u003cinit\u003e\n(SearchPageModel.java:38)\n\tat org.ncems.cis.vehicle.CISVehicleApp.searchPage\n(CISVehicleApp.java:98)\n\tat org.ncems.cis.vehicle.CISVehicleApp.open(CISVehicleApp.java:171)\n\tat org.ncems.cis.vehicle.CISVehicleApp.main(CISVehicleApp.java:64)",
    "Created an attachment (id\u003d25336)\njpg that fails to load.\n",
    "That\u0027s funny - I can load that image just fine. I ran SWT\u0027s \"ImageAnalyzer\" \n(comes with the eclipse examples) and it opens it no problem. What version of \neclipse are you running? Are you sure you attached the correct jpg? I see a \n15 x 12, depth 24 jpg, and it\u0027s a little beige-grey shaded triangle pointing \nup.",
    "I\u0027m running Eclipse 3.02\n\nYou have the right image. I can load larger images just fine, but this one and \na companion throw this exception every time I try to load them.\n\nHere\u0027s sample code that throws the exception every time:\n\nimport java.io.BufferedInputStream;\nimport java.io.InputStream;\n\nimport org.eclipse.swt.graphics.Image;\nimport org.eclipse.swt.graphics.ImageData;\nimport org.eclipse.swt.widgets.Display;\n\n/**\n * Class: SWTImageTest\n * \n * @author pcooper\n * Created on Jul 27, 2005\n */\npublic class SWTImageTest {\n    \n    private final static String imagePath \u003d \"/resources/images/up.jpg\";\n    \n    public SWTImageTest() {\n        Display display \u003d Display.getCurrent();\n        InputStream is \u003d this.getClass().getResourceAsStream(imagePath);\n        ImageData data \u003d new ImageData(new BufferedInputStream(is));\n        Image image \u003d new Image(display, data);\n    }\n\n    public static void main(String[] args) {\n        SWTImageTest test \u003d new SWTImageTest();\n    }\n}\n",
    "Are you able to upgrade to eclipse 3.1?",
    "Only if I know this bug is fixed in that version. I generally don\u0027t like to \nchange my development platform mid-project.\n\nAre you saying this bug is fixed in 3.1? I\u0027m using MyEclipse and SWTDesigner, \nand both will require me to upgrade them as well, so I\u0027d like some assurance \nthat the new version fixes this problem.\n\nThanks.",
    "I am running eclipse 3.1 (on WinXP) and it works for me.\n\nIf you\u0027d like to try it first before upgrading everything else, you could just \ndownload eclipse 3.1, then download the 3.1 example plug-ins (from the same \ndownload page - just unzip them to the same place as eclipse), and then start \neclipse (I use the following command to start eclipse, just FYI, in case you \nneed the extra heap space or something):\nD:\\eclipse\\eclipse.exe -data D:\\workspace -clean -debug -consolelog -vm \nd:\\jdk1.4.2_06\\jre\\bin\\java -vmargs -Xmx400m -Xms400M\n\nWhen eclipse comes up, run the ImageAnalyzer example by going to:\nWindow -\u003e Show View -\u003e Other...\nSWT Examples -- SWT Example Launcher  OK\nIn the SWT Example Launcher view, expand Stand Alone and select Image Analyzer\nClick Run\nIn the ImageAnalyzer, File -\u003e Open File...\nfind and select your up.jpg, and say Open.\nIf it opens for you without throwing an exception or bringing up an error \ndialog, then you will be satisfied that eclipse 3.1 opens your problem jpgs.\nHope this helps - please let me know so that I can close this bug.",
    "Upgraded to Eclipse 3.1.....took a little while to figure out SWT is now a \nseparate download!!!\n\nBug is fixed. Thanks for your assistance!",
    "You\u0027re welcome. SWT is available separately, yes, but it\u0027s still included when \nyou download eclipse - that\u0027s how folks usually get it. Sorry you had trouble \nfinding it. The dll\u0027s are now rolled into a jar in the eclipse download, which \nmakes it a little tougher to use swt standalone outside of the IDE - you have \nto find and extract the swt dll\u0027s first. However the steps I gave in comment 6 \nshould have worked just with the eclipse download. Anyhow, I\u0027m glad it works \nfor you now. We will consider this bug closed.",
    "This bug should be marked as WORKSFORME since nothing was changed specifically\nfor it.",
    "Marking WORKSFORME.",
    "Thanks, Billy - good spot.",
    "I\u0027m leaving the status alone here for now, but I\u0027m now testing my app OUTSIDE \nof Eclipse, and I\u0027m getting the exception again. I\u0027ve searched my PC for any \nother copy of SWT and there is none. The code works fine running from Eclipse, \nbut starting the app from the commandline under Windows XP SP 2 throws the \nexception every time.\n\nCould someone verify that the submitted code runs standalone OUTSIDE of \nEclipse?\n\nThanks.\n\nPaul",
    "Yes, your little snippet from comment 3 runs for me outside of eclipse.\n\nI did use eclipse to compile the snippet - can\u0027t imagine that making any \ndifference.\n\nHere\u0027s the 3 DOS command lines I used to run it (3rd is split across 4 lines):\n\nD:\n\ncd D:\\workspace\\Car\\bin\n\nD:\\jdk1.4.2_06\\jre\\bin\\java\n-classpath .;D:\\eclipse\\plugins\\org.eclipse.swt_3.1.0.jar;\nD:\\eclipse\\plugins\\org.eclipse.swt.win32.win32.x86_3.1.0.jar\n-Djava.library.path\u003dD:\\eclipse\\plugins test.SWTImageTest\n\n\nLet\u0027s make the snippet even smaller, so that there are no Java streams to deal \nwith, and definitely no SWTDesigner resource management going on, and let\u0027s \nread the image 100 times (and dispose it each time, so we don\u0027t run out of \nhandles). Here\u0027s the modified snippet, which runs fine for me:\n\nimport org.eclipse.swt.graphics.*;\nimport org.eclipse.swt.widgets.*;\n\npublic class SWTImageTest2 {\n    \n    public static void main(String[] args) {\n        Display display \u003d new Display();\n    \tfor (int i \u003d 0; i \u003c 100; i++) {\n    \t\tImage image \u003d new Image(display, \"D:\\\\temp\\\\up.jpg\");\n    \t\timage.dispose();\n    \t}\n    }\n}\n\n\nI am using the following version of the SWT DLL:\nswt-win32-3138.dll\n\nand the 2 SWT JARs that came with eclipse 3.1:\norg.eclipse.swt_3.1.0.jar\norg.eclipse.swt.win32.win32.x86_3.1.0.jar\n\nand I am launching it using Sun\u0027s jdk1.4.2_06 VM,\nand I am running on Win XP SP2.\n\nPlease note that it is *very* strange that you are getting \nSWT.ERROR_UNSUPPORTED_FORMAT in FileFormat.load.\nThat should only happen if the first 2 bytes in your file (or stream) are not \nFFD8, which is the standard \"Start Of Image\" for JPEG file format. Since your \nfile does indeed start with FFD8, the only thing I can think of that may be \nhappening is some kind of strange intermittent IO error or something. Is this \npossible?",
    "Things that make you go \"hmmmmmmm\".\n\nIt looks like the bug is in the ImageData class, and only if you load the \nimage from a resource, AND only if I build the file outside of Eclipse. I can \nrepeat the problem any number of times, using exactly the same versions of \neverything you are. The only difference is that I build the jar from the \ncommand line using an Ant/perl script. The original code throws the same \nexception every time if I build from the command line.\n\nIn fact, I\u0027ve tried 5 different variations of this code, and the only one that \nblows up is passing ImageData a stream loaded from a resource.\n\nHere\u0027s my output:\nC:\\dev\\Sandbox\\make\u003ejava -\nclasspath ..\\lib\\org.eclipse.swt_3.1.0.jar;..\\lib\\org.eclipse.swt.win32.win32.x\n86_3.1.0.jar;.\\jar\\sandbox.jar -Djava.library.path\u003d..\\lib SWTImageTest\ngetImageAsFileStream completed\ngetImageAsFile completed\norg.eclipse.swt.SWTException: Unsupported or unrecognized format\n        at org.eclipse.swt.SWT.error(SWT.java:2942)\n        at org.eclipse.swt.SWT.error(SWT.java:2865)\n        at org.eclipse.swt.SWT.error(SWT.java:2836)\n        at org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:73)\n        at org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:126)\n        at org.eclipse.swt.graphics.ImageDataLoader.load\n(ImageDataLoader.java:18)\n        at org.eclipse.swt.graphics.ImageData.\u003cinit\u003e(ImageData.java:327)\n        at SWTImageTest.getImageAsResource(SWTImageTest.java:62)\n        at SWTImageTest.\u003cinit\u003e(SWTImageTest.java:24)\n        at SWTImageTest.main(SWTImageTest.java:75)\ngetImageAsResource completed\nDone\n\nI can post my code if you want....\n\nAgain, thanks for spending time on this.",
    "OK, past your latest SWTImageTest.java here, and please write down the exact \nsteps you used to create sandbox.jar (I have never used Ant or Perl). Are \nSWTImageTest.class and up.jpg the only 2 things in the jar?\n\nI\u0027ll reopen this bug until we either find it or give up \u003cg\u003e.",
    "Thanks for plugging away at this. I\u0027ll simplify things a little and take Perl \nout of the equation. But I can generate this problem consistently. If I \ncompile in Eclipse, it works fine, even if I build the jar from the command \nline. But if I compile from the command line, it throws the exception, even in \nEclipse.\n\nI\u0027ll post source, the ant build.xml file, and the batch file used to compile \nand run by EOD.",
    "Paul, Did you ever figure this one out?\nI really should close the bug again as \"works for me\" unless you can see a reason to keep it open.",
    "I\u0027ll take a look at this problem again next week, as I got taken off this project and put on a more critical one. I\u0027m coming back to it next week, and this will be at the top of my priority list.\n\nSorry for taking so long to get back to it, and thanks for keeping on top of it."
  ],
  "commentCreationDates": [
    "2005-07-27T01:47:54+02:00",
    "2005-07-27T01:48:56+02:00",
    "2005-07-27T20:15:37+02:00",
    "2005-07-27T20:47:37+02:00",
    "2005-07-27T21:07:13+02:00",
    "2005-07-27T21:12:54+02:00",
    "2005-07-27T21:33:04+02:00",
    "2005-08-01T19:09:20+02:00",
    "2005-08-02T20:22:25+02:00",
    "2005-08-02T21:00:26+02:00",
    "2005-08-02T21:00:41+02:00",
    "2005-08-03T13:01:31+02:00",
    "2005-08-03T19:34:58+02:00",
    "2005-08-03T22:32:25+02:00",
    "2005-08-04T00:04:14+02:00",
    "2005-08-04T18:47:48+02:00",
    "2005-08-04T19:37:55+02:00",
    "2006-04-04T11:07:57+02:00",
    "2006-04-05T17:21:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Unsupported or unrecognized form",
      "elements": [
        {
          "method": "atorg.eclipse.swt.SWT.error",
          "source": "SWT.java:2691"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2587"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.load",
          "source": "FileFormat.java:73"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:124"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageData.\u003cinit\u003e",
          "source": "ImageData.java:308"
        },
        {
          "method": "com.swtdesigner.SWTResourceManager.getImage",
          "source": "SWTResourceManager.java:117"
        },
        {
          "method": "com.swtdesigner.SWTResourceManager.getImage",
          "source": "SWTResourceManager.java:166"
        },
        {
          "method": "org.ncems.cis.vehicle.ui.SearchPageUI.\u003cinit\u003e",
          "source": "SearchPageUI.java:122"
        },
        {
          "method": "org.ncems.cis.vehicle.uimodel.SearchPageModel.\u003cinit\u003e",
          "source": "SearchPageModel.java:38"
        },
        {
          "method": "org.ncems.cis.vehicle.CISVehicleApp.searchPage",
          "source": "CISVehicleApp.java:98"
        },
        {
          "method": "org.ncems.cis.vehicle.CISVehicleApp.open",
          "source": "CISVehicleApp.java:171"
        },
        {
          "method": "org.ncems.cis.vehicle.CISVehicleApp.main",
          "source": "CISVehicleApp.java:64"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "105246",
      "date": "2005-07-27T01:47:54+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Unsupported or unrecognized form",
      "elements": [
        {
          "method": "atorg.eclipse.swt.SWT.error",
          "source": "SWT.java:2942"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2865"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2836"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.load",
          "source": "FileFormat.java:73"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:126"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageDataLoader.load",
          "source": "ImageDataLoader.java:18"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageData.\u003cinit\u003e",
          "source": "ImageData.java:327"
        },
        {
          "method": "SWTImageTest.getImageAsResource",
          "source": "SWTImageTest.java:62"
        },
        {
          "method": "SWTImageTest.\u003cinit\u003e",
          "source": "SWTImageTest.java:24"
        },
        {
          "method": "SWTImageTest.main",
          "source": "SWTImageTest.java:75"
        }
      ],
      "number": 1,
      "commentIndex": 14,
      "bugId": "105246",
      "date": "2005-08-04T00:04:14+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "105246",
  "bugId": "105246",
  "date": "2005-07-27T01:47:54+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}