{
  "comments": [
    "When selecting an epf to import, upon clicking OK the stack below is produced - prefs not imported.\n\nOSX (Jaguar)\nEclipse build: 200307300800\n\n!ENTRY org.eclipse.ui 4 0 Jul 31, 2003 15:00:04.391\n!MESSAGE Widget is disposed\n!STACK 0\norg.eclipse.swt.SWTException: Widget is disposed\n        at org.eclipse.swt.SWT.error(SWT.java:2365)\n        at org.eclipse.swt.SWT.error(SWT.java:2295)\n        at org.eclipse.swt.widgets.Widget.error(Widget.java:545)\n        at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:300)\n        at org.eclipse.swt.widgets.Control.getParent(Control.java:822)\n        at org.eclipse.jface.dialogs.Dialog.isContained(Dialog.java:544)\n        at org.eclipse.jface.dialogs.Dialog.initializeBounds(Dialog.java:531)\n        at org.eclipse.jface.window.Window.create(Window.java:305)\n        at org.eclipse.jface.window.Window.open(Window.java:552)\n        at org.eclipse.jface.dialogs.ErrorDialog.open(ErrorDialog.java:307)\n        at org.eclipse.ui.internal.dialogs.PreferenceErrorDialog.openError(PreferenceErrorDialog.java:45)\n        at \norg.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.loadPressed(WorkbenchPreferenceDialog.java\n:144)\n        at \norg.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.buttonPressed(WorkbenchPreferenceDialog.ja\nva:80)\n        at org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:423)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1016)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2180)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1878)\n        at org.eclipse.jface.window.Window.runEventLoop(Window.java:583)\n        at org.eclipse.jface.window.Window.open(Window.java:563)\n        at org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:53)\n        at org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n        at \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:542)\n        at org.eclipse.jface.action.ActionContributionItem.access$4(ActionContributionItem.java:496)\n        at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:468)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1016)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2180)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1878)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1680)\n        at org.eclipse.ui.internal.Workbench.run(Workbench.java:1663)\n        at org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:858)\n        at org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n        at org.eclipse.core.launcher.Main.run(Main.java:747)\n        at org.eclipse.core.launcher.Main.main(Main.java:583)",
    "org.eclipse.jface.dialogs.Dialog.isContained seems to be accessing a disposed \nwidget.",
    "This is a problem as a result of the fix for Bug 22621. I can\u0027t replciate it \nmyself as the problem occurs if the shell of the original dialog (the \npreference dialog) is closed.\n\nMoving to Nick as he implemented the fix for Bug 22621 and might have more \ninsight.",
    "The stack shows that, as a result of pressing the import button, it\u0027s trying \nto open a PreferenceErrorDialog.  At line 144, this is due to it getting an \nIStatus.WARNING from Preferences.validatePreferenceVersions, probably due to \nimporting preferences from an older version of the product (Channing, can you \nconfirm?)\n\nThe opening of the PreferenceErrorDialog then fails because isContained \n(called in a section of Mac-specific code for the button ordering) finds a \ndisposed control, either for the default button or one of its parents.\nAt this point, none of the parents should be disposed so it\u0027s probably the \nbutton itself.\n\nPreferenceErrorDialog.createButtonsForButtonBar has some peculiar logic.\nFirst it creates the Yes and No buttons, with Yes being the default.\nThen it calls super, which creates OK and Details buttons with OK as the \ndefault.\nThen it deletes the OK button.\nSo it looks like shell.getDefaultButton returned the disposed OK button rather \nthan the Yes button.  \n\nVeronika, is this expected semantics from SWT?  Should getDefaultButton return \nthe disposed button or null?  If it\u0027s disposed, it\u0027s clearly not going to be \nthe default button when the dialog is opened (hopefully the dialog doesn\u0027t \nblow up when the default button is disposed).\n\nEven if getDefaultButton() were to return null, the result would not be what \nwe want since we want to move Yes to the right.\nMoving the call to super.createButtonsForButtonBar up won\u0027t work either since \nthat would put Details before Yes and No.\n\nRecommend adding an explicit call to shell.setDefaultButton for the Yes button \nafter the OK button is disposed.\n\nTod, can you please follow up?  Should be easy to create a pref file that will \ncause the warning check, and test it on one of the Macs.\n",
    "\u003e  probably due to importing preferences from an older version of the product (Channing, can you \nconfirm?)\n\nyup, I was importing them from the previous integration release.",
    "\u003e Veronika, is this expected semantics from SWT?  Should getDefaultButton \n\u003e return the disposed button or null? \n\nSWT should return null, not the disposed widget.",
    "Should confirm that my hypothesis is actually the case before filing a bug \nagainst SWT for the getDefaultButton behaviour.",
    "This message is part of a mass update on bugs that have been reviewed for several releases, but not fixed.  The bug is legitimate, but not a priority.  Marking P5.  Patches would be entertained."
  ],
  "commentCreationDates": [
    "2003-07-31T16:05:10+02:00",
    "2003-08-05T17:44:41+02:00",
    "2003-08-07T16:29:01+02:00",
    "2003-08-07T21:24:17+02:00",
    "2003-08-07T22:18:35+02:00",
    "2003-08-08T00:12:57+02:00",
    "2003-08-08T03:57:28+02:00",
    "2007-06-29T19:02:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2365"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2295"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:545"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:300"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.getParent",
          "source": "Control.java:822"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.isContained",
          "source": "Dialog.java:544"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.initializeBounds",
          "source": "Dialog.java:531"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:305"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:552"
        },
        {
          "method": "org.eclipse.jface.dialogs.ErrorDialog.open",
          "source": "ErrorDialog.java:307"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.PreferenceErrorDialog.openError",
          "source": "PreferenceErrorDialog.java:45"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.loadPressed",
          "source": "WorkbenchPreferenceDialog.java :144"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.buttonPressed",
          "source": "WorkbenchPreferenceDialog.ja va:80"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:423"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:1016"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2180"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1878"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:583"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:563"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:53"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:542"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$4",
          "source": "ActionContributionItem.java:496"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:468"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:1016"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2180"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1680"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "41005",
      "date": "2003-07-31T16:05:10+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "41005",
  "bugId": "41005",
  "date": "2003-07-31T16:05:10+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}