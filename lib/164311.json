{
  "comments": [
    "Code completion doesn\u0027t work as expected in some cases. In the class below, \ncontent assistance is unavailable for the AnyClass methods. I\u0027ve placed the AnyClass as an inner static class to simplify but it might as well be created as a separate class.\n\nCode completion however succeeds when I make any of the following changes:\n1. When replacing the comparison operator \"\u003e\" to a \"\u003c\" in the if-statement.\n2. Removing the paranthesis in the if-statement, ie changing \"if (0 \u003e (10))\" to if \"(0 \u003e 10)\"\n3. or removing the LOOP_WHILE label.\n\npublic class Test\n{\n    public static class AnyClass\n    {\n        public static void callMe()\n        {\n            System.out.println(\"whatever\");\n        }\n    }\n\n    public void method1()\n    {\n        LOOP_WHILE:\n        while (true)\n        {\n            if (0 \u003e (10))\n            {\n                break LOOP_WHILE;\n            }\n        }\n        AnyClass.callMe(); //code completion fails here\n    }\n}",
    "An exception occurs during code completion\n\njava.lang.ArrayIndexOutOfBoundsException: -1\n\tat org.eclipse.jdt.internal.codeassist.complete.CompletionParser.buildMoreCompletionContext(CompletionParser.java:617)\n\tat org.eclipse.jdt.internal.codeassist.complete.CompletionParser.attachOrphanCompletionNode(CompletionParser.java:446)\n\tat org.eclipse.jdt.internal.codeassist.complete.CompletionParser.updateRecoveryState(CompletionParser.java:3869)\n\tat org.eclipse.jdt.internal.compiler.parser.Parser.resumeOnSyntaxError(Parser.java:10062)\n\tat org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:8902)\n\tat org.eclipse.jdt.internal.codeassist.impl.AssistParser.parseBlockStatements(AssistParser.java:1314)\n\tat org.eclipse.jdt.internal.codeassist.impl.AssistParser.parseBlockStatements(AssistParser.java:1167)\n\tat org.eclipse.jdt.internal.codeassist.impl.Engine.parseBlockStatements(Engine.java:292)\n\tat org.eclipse.jdt.internal.codeassist.impl.Engine.parseBlockStatements(Engine.java:255)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:1930)\n\tat org.eclipse.jdt.internal.core.Openable.codeComplete(Openable.java:123)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:316)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:309)",
    "Created an attachment (id\u003d54002)\nProposed fix\n\n",
    "Released for 3.3 M4.\n\nTest added\n  CompletionTests#testBug164311()\n\nThanks for the test case which is the simplest test case to reproduce the bug. The labeled control statement and the \u0027\u003e\u0027 followed by a \u0027(\u0027 are necessary to reproduce it.",
    "Verified for 3.3M4 with I20061211-1119"
  ],
  "commentCreationDates": [
    "2006-11-13T12:53:54+01:00",
    "2006-11-15T15:08:53+01:00",
    "2006-11-16T17:51:42+01:00",
    "2006-11-16T17:59:14+01:00",
    "2006-12-11T19:23:34+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-1",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.codeassist.complete.CompletionParser.buildMoreCompletionContext",
          "source": "CompletionParser.java:617"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.complete.CompletionParser.attachOrphanCompletionNode",
          "source": "CompletionParser.java:446"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.complete.CompletionParser.updateRecoveryState",
          "source": "CompletionParser.java:3869"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.resumeOnSyntaxError",
          "source": "Parser.java:10062"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.parser.Parser.parse",
          "source": "Parser.java:8902"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.impl.AssistParser.parseBlockStatements",
          "source": "AssistParser.java:1314"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.impl.AssistParser.parseBlockStatements",
          "source": "AssistParser.java:1167"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.impl.Engine.parseBlockStatements",
          "source": "Engine.java:292"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.impl.Engine.parseBlockStatements",
          "source": "Engine.java:255"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:1930"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.codeComplete",
          "source": "Openable.java:123"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:316"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:309"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "164311",
      "date": "2006-11-15T15:08:53+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "164311",
  "bugId": "164311",
  "date": "2006-11-13T12:53:54+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}