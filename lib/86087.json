{
  "comments": [
    "In 3.1M5 I highlight a build.xml in the Package Explorer and bring up the \ncontext menu. When selecting the \"Run As\" menu I get the \"Run...\" item instead \nof the expected \"Ant Build\" item. This is true for all my build.xml files. All \nbuild.xml files exhibited the correct behavior in 3.1M4.\n\nLooking at the log file I see that a SAXParseException is being thrown when \nany build.xml file is parsed. Here is the stack trace:\n\n!ENTRY org.eclipse.pde.core 4 0 2005-02-21 20:17:53.897\n!MESSAGE Invalid byte 1 of 1-byte UTF-8 sequence.\n!STACK 0\norg.xml.sax.SAXParseException: Invalid byte 1 of 1-byte UTF-8 sequence.\n\tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse\n(DOMParser.java:264)\n\tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse\n(DocumentBuilderImpl.java:292)\n\tat javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:172)\n\tat org.eclipse.pde.internal.core.PDEState.reachPluginInfoCache\n(PDEState.java:114)\n\tat org.eclipse.pde.internal.core.PDEState.\u003cinit\u003e(PDEState.java:78)\n\tat org.eclipse.pde.internal.core.ExternalModelManager.loadModels\n(ExternalModelManager.java:149)\n\tat org.eclipse.pde.internal.core.ExternalModelManager.getAllModels\n(ExternalModelManager.java:109)\n\tat org.eclipse.pde.internal.core.PluginModelManager.initializeTable\n(PluginModelManager.java:441)\n\tat org.eclipse.pde.internal.core.PluginModelManager.findEntry\n(PluginModelManager.java:159)\n\tat org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize\n(RequiredPluginsInitializer.java:36)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer\n(JavaModelManager.java:1274)\n\tat \norg.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers\n(JavaModelManager.java:1239)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer\n(JavaModelManager.java:846)\n\tat org.eclipse.jdt.core.JavaCore.getClasspathContainer\n(JavaCore.java:1268)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:2033)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1946)\n\tat org.eclipse.jdt.internal.core.JavaProject.isOnClasspath\n(JavaProject.java:2219)\n\tat \norg.eclipse.jdt.internal.corext.buildpath.EditFiltersOperation.isValid\n(EditFiltersOperation.java:100)\n\tat \norg.eclipse.jdt.internal.ui.wizards.buildpaths.newsourcepage.BuildPathAction.se\nlectionChanged(BuildPathAction.java:149)\n\tat \norg.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged\n(SelectionDispatchAction.java:200)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged\n(SelectionDispatchAction.java:195)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:163)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1015)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged\n(Viewer.java:161)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateSelection\n(StructuredViewer.java:1676)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleSelect\n(StructuredViewer.java:935)\n\tat org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected\n(StructuredViewer.java:961)\n\tat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent\n(OpenStrategy.java:209)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:204)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent\n(OpenStrategy.java:364)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2908)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2541)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1612)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1578)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:293)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:102)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:228)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:333)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:150)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:268)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:260)\n\tat org.eclipse.core.launcher.Main.run(Main.java:887)\n\tat org.eclipse.core.launcher.Main.main(Main.java:871)\n\nI have tried starting with a simple build.xml from scratch. Same problem. I \nhave also checked for control and other bogus characters and there are none.\n\nThe Ant Editor functions properly with all these build.xml files. When the Ant \nEditor is open on one of the build.xml files, the Outline view\u0027s context menu \nbehaves as expected and shows the \"Run As\" \"Ant Build\" items.",
    "The exception comes from PDE parsing internal state data, not parsing \nbuild.xml.  Which JVM and locale are you using?  Can you reproduce starting \nwith a clean workspace?\n\n",
    "My JVM is:\n\njava version \"1.5.0_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_01-b08)\nJava HotSpot(TM) Client VM (build 1.5.0_01-b08, mixed mode, sharing)\n\nI am using the default English (en_US) locale.\n\nI am in the process of starting from a clean workspace. I will report my \nfindings when I get my new workspace set up.",
    "Bad news: The problem remains after a complete fresh install (3.1M5a)\n\nGood news: You put me on the trail by pointing out that the problem was in \nparsing the plugin state information and not parsing the build.xml file. So I \nlooked at the actual XML pluginInfo cache file and tried to read it with a \ngood XML editor. The editor barfed indicating the same problem as the SAX \nParser in Java. I created a simple Java program to parse the file and found \nthe offending character sequence. Turns out that a provider of one of my \nplugins is a German fellow. He identifies himself in the various manifest \nfiles in his plugin. His name has a u-umlaut (\u0026#252;) and a scharfes-s \n*\u0026#223;). The plugin provider properly encoded all his files in UTF-8. That \nis, these characters in his name became the UTF-8 character sequences 0xC3 \n0xBC 0xC3 0x9F. So far so good. However, when eclipse saves his name in the \nPDE plugin cache file (org.eclipse.pde.core/[tstamp].pluginInfo) the character \nencoding has been changed to what looks like the platform default (CP 1252 on \nWindows I believe) and so the characters take on their Latin1 encodings 0xFC \n0xDF. These are invalid UTF-8 sequences and so the SAX parser barfs because it \nwas told at the top of the file that the encoding is supposed to be UTF-8. So \nit appears that whoever and whereever the plugin cache files are written the \nUTF-8 encoding is not being done correctly.\n",
    "Thank you for investigation.\nThere was a usage of FileWriter (uses default platform encoding).  I have \nfixed the problem shown in the exception, and am marking bug as fixed.\n\nIf you continue to have issues with build.xml, please open a separate report \nabout it."
  ],
  "commentCreationDates": [
    "2005-02-22T04:36:17+01:00",
    "2005-02-22T16:42:28+01:00",
    "2005-02-22T17:43:35+01:00",
    "2005-02-24T00:43:03+01:00",
    "2005-02-24T19:35:11+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.xml.sax.SAXParseException",
      "message": "Invalid byte 1 of 1-byte UTF-8 sequence.",
      "elements": [
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.DOMParser.parse",
          "source": "DOMParser.java:264"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse",
          "source": "DocumentBuilderImpl.java:292"
        },
        {
          "method": "javax.xml.parsers.DocumentBuilder.parse",
          "source": "DocumentBuilder.java:172"
        },
        {
          "method": "org.eclipse.pde.internal.core.PDEState.reachPluginInfoCache",
          "source": "PDEState.java:114"
        },
        {
          "method": "org.eclipse.pde.internal.core.PDEState.\u003cinit\u003e",
          "source": "PDEState.java:78"
        },
        {
          "method": "org.eclipse.pde.internal.core.ExternalModelManager.loadModels",
          "source": "ExternalModelManager.java:149"
        },
        {
          "method": "org.eclipse.pde.internal.core.ExternalModelManager.getAllModels",
          "source": "ExternalModelManager.java:109"
        },
        {
          "method": "org.eclipse.pde.internal.core.PluginModelManager.initializeTable",
          "source": "PluginModelManager.java:441"
        },
        {
          "method": "org.eclipse.pde.internal.core.PluginModelManager.findEntry",
          "source": "PluginModelManager.java:159"
        },
        {
          "method": "org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize",
          "source": "RequiredPluginsInitializer.java:36"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer",
          "source": "JavaModelManager.java:1274"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers",
          "source": "JavaModelManager.java:1239"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer",
          "source": "JavaModelManager.java:846"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:1268"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:2033"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1946"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.isOnClasspath",
          "source": "JavaProject.java:2219"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.buildpath.EditFiltersOperation.isValid",
          "source": "EditFiltersOperation.java:100"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.newsourcepage.BuildPathAction.selectionChanged",
          "source": "BuildPathAction.java:149"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged",
          "source": "SelectionDispatchAction.java:200"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged",
          "source": "SelectionDispatchAction.java:195"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:163"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1015"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:161"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1676"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:935"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:961"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:209"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:204"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:364"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2908"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2541"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1612"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1578"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:293"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:228"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:333"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:150"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:268"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:260"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:887"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:871"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "86087",
      "date": "2005-02-22T04:36:17+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "86087",
  "bugId": "86087",
  "date": "2005-02-22T04:36:17+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}