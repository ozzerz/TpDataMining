{
  "comments": [
    "I\u0027m writing an RCP application that doesn\u0027t have a workspace. When trying to\nintegrate help, using tomcat, the following exception is logged and help won\u0027t\nstart. To reproduce create an RCP application and run with \"@none\" in the\nworkspace field of the launch configuration.\n\nHere is where it dies:\n\n!ENTRY org.eclipse.tomcat 4 0 Nov 02, 2004 22:46:48.427\n!MESSAGE Exception occurred starting the embedded application server.\n!STACK 0\njava.lang.IllegalStateException: No instance data can be specified.\n\tat org.eclipse.core.internal.runtime.DataArea.assertLocationInitialized(DataArea\n.java:38)\n\tat org.eclipse.core.internal.runtime.DataArea.getStateLocation(DataArea.java:76)\n\n\tat org.eclipse.core.internal.runtime.InternalPlatform.getStateLocation(InternalP\nlatform.java:1061)\n\tat org.eclipse.core.runtime.Plugin.getStateLocation(Plugin.java:290)\n\tat org.eclipse.tomcat.internal.TomcatAppServer.start(TomcatAppServer.java:67)\n\tat org.eclipse.help.internal.appserver.AppserverPlugin.startWebappServer(Appserv\nerPlugin.java:145)\n\tat org.eclipse.help.internal.appserver.AppserverPlugin.getAppServer(AppserverPlu\ngin.java:42)\n\tat org.eclipse.help.internal.appserver.WebappManager.start(WebappManager.java:57\n)\n\tat org.eclipse.help.internal.base.BaseHelpSystem.ensureWebappRunning(BaseHelpSys\ntem.java:203)\n\tat org.eclipse.help.internal.base.HelpDisplay.displayHelpURL(HelpDisplay.java:16\n4)\n\tat org.eclipse.help.internal.base.HelpDisplay.displayHelp(HelpDisplay.java:54)\n\tat org.eclipse.help.ui.internal.DefaultHelpUI.displayHelp(DefaultHelpUI.java:43)\n\n\tat org.eclipse.ui.help.WorkbenchHelp.displayHelp(WorkbenchHelp.java:210)\n\tat org.eclipse.ui.internal.actions.HelpContentsAction$1.run(HelpContentsAction.j\nava:80)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.actions.HelpContentsAction.run(HelpContentsAction.jav\na:78)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:988)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionC\nontributionItem.java:946)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionIt\nem.java:896)\n\tat org.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContribut\nionItem.java:810)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2783)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2442)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat rCP_Book_Help.RCPApplication.run(RCPApplication.java:20)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.j\nava:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:684)\n\tat org.eclipse.core.launcher.Main.main(Main.java:668)",
    "In starting up the standalone/infocenter help system, Tomcat wants to write to \na log file at startup in:\neclipse/workspace/.metadata/.plugins/org.eclipse.tomcat/*.log\n\nWhen I look at my non-RCP standalone help system, I also see other items \nautomatically written to \neclipse/workspace/.metadata/.plugins/org.eclipse.tomcat with the same timestamp \nas the log file:\nhelp/Sessions.ser\nhelpControl/Sessions.ser\nROOT/Sessions.ser\n\n--Lee Anne",
    "All instances of help components writing to workspace, should be considered to \nbe moved elsewhere.",
    "Ideally, the platform\u0027s getStateLocation() should always return a valid \ndirectory. \nWhen passing @none, this should default to some place in the temporary \ndirectory for that OS. This way, plugins will always receive a read/write \nlocation to put various state data. On systems, like unix/linux, where the \ntemp may automatically be purged by the os, there will be cases in which state \nis not preserved, but the plugins can still start in their initial state.\n\nIf this is not done in the platform, then plugins themselves should check for \nnull value in state location, and use the temp dir if needed.",
    "the @none is to indicate that there just isn\u0027t any writable storage for that \ninstance of the plugin.  You could grovel around and see if Java will spoof up \nsome temp storage for you but from Eclipse\u0027s point of view, it was told to run \nand not use any disk for that instance.  \n\nPlugins wanting to support @none should handle null locations by simply not \ntrying to write. (as they would if the location is marked as readonly).\n\nNote that not all plugins need to handle @none.  It is reasonable for plugins \nto simply say that they need writable storage.  Such plugin providers are \nopting out of various scenarios.",
    "We could consider writing to configuration instead of workspace, if workspace \ndoes not exist.  If there is no writable location at all I am bending \ntoward \"later\" for help plug-ins above org.eclipse.help.  Right now there is \nTomcat and Lucene indexing that need to write.  If user decides for @none, \nthey probably don\u0027t want anything to be written, so we should not look for \nloopholes, or make wild guesses like c:\\temp.",
    "Jean-Michel wrote that his RCP application doesn\u0027t have a workspace; the \nworkspace field for launch is \"@none\". Does this indicate that Eclipse run when \nthere is no writable space whatsoever? Is eclipse/configuration available as \nwritable space in your deployment scenario?\n\nIf eclipse/configuration is available, then I concur with Konrad that it would \nbe good for the help system to consider writing to configuration if workspace \nis set \u003d @none. I\u0027m not so sure about writing to configuration just if \nworkspace does not exist, because isn\u0027t the logic now that if it doesn\u0027t exist, \nthen it gets created by default?\n\n--Lee Anne",
    "Unsetting the target milestone, as no solution happened in M6."
  ],
  "commentCreationDates": [
    "2004-11-03T04:03:18+01:00",
    "2005-02-24T15:15:26+01:00",
    "2005-02-24T15:22:12+01:00",
    "2005-02-24T15:35:37+01:00",
    "2005-02-25T05:02:23+01:00",
    "2005-02-26T04:13:19+01:00",
    "2005-03-01T23:43:21+01:00",
    "2005-04-12T05:07:55+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "No instance data can be specified.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.DataArea.assertLocationInitialized",
          "source": "DataArea .java:38"
        },
        {
          "method": "org.eclipse.core.internal.runtime.DataArea.getStateLocation",
          "source": "DataArea.java:76"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.getStateLocation",
          "source": "InternalP latform.java:1061"
        },
        {
          "method": "org.eclipse.core.runtime.Plugin.getStateLocation",
          "source": "Plugin.java:290"
        },
        {
          "method": "org.eclipse.tomcat.internal.TomcatAppServer.start",
          "source": "TomcatAppServer.java:67"
        },
        {
          "method": "org.eclipse.help.internal.appserver.AppserverPlugin.startWebappServer",
          "source": "Appserv erPlugin.java:145"
        },
        {
          "method": "org.eclipse.help.internal.appserver.AppserverPlugin.getAppServer",
          "source": "AppserverPlu gin.java:42"
        },
        {
          "method": "org.eclipse.help.internal.appserver.WebappManager.start",
          "source": "WebappManager.java:57 "
        },
        {
          "method": "org.eclipse.help.internal.base.BaseHelpSystem.ensureWebappRunning",
          "source": "BaseHelpSys tem.java:203"
        },
        {
          "method": "org.eclipse.help.internal.base.HelpDisplay.displayHelpURL",
          "source": "HelpDisplay.java:16 4"
        },
        {
          "method": "org.eclipse.help.internal.base.HelpDisplay.displayHelp",
          "source": "HelpDisplay.java:54"
        },
        {
          "method": "org.eclipse.help.ui.internal.DefaultHelpUI.displayHelp",
          "source": "DefaultHelpUI.java:43"
        },
        {
          "method": "org.eclipse.ui.help.WorkbenchHelp.displayHelp",
          "source": "WorkbenchHelp.java:210"
        },
        {
          "method": "org.eclipse.ui.internal.actions.HelpContentsAction$1.run",
          "source": "HelpContentsAction.j ava:80"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.actions.HelpContentsAction.run",
          "source": "HelpContentsAction.jav a:78"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:988"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionC ontributionItem.java:946"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionIt em.java:896"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionContribut ionItem.java:810"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2783"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2442"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1527"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1498"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:276"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "rCP_Book_Help.RCPApplication.run",
          "source": "RCPApplication.java:20"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.j ava:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:684"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:668"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "77563",
      "date": "2004-11-03T04:03:18+01:00",
      "product": "Platform",
      "component": "User Assistance",
      "severity": "normal"
    }
  ],
  "groupId": "77563",
  "bugId": "77563",
  "date": "2004-11-03T04:03:18+01:00",
  "product": "Platform",
  "component": "User Assistance",
  "severity": "normal"
}