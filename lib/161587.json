{
  "comments": [
    "The context corresponds to a view of a performance test report (RPT product).\nTo view this report the executionHistoryExtension is used for some node types, and for specific node types there is a detailsPage which is provided.\n\nBased on this context i have observed frequent NPE exception, with an error dialog boxes too ( see below for the exception), on objects that i own, and others too.\n\nTo understand what\u0027s happening i have extended the MessageEventDetailsPart with some code to monitor:\n-Constructor\n-Dispose \n-SetInput\n\nThe result is that:\n-It sounds like there is a lot of creation of objects (more than one per type of nodes to which it applyes), which might be nominal, i do not know.\n-All the created objects are notified when the selection changes in the log tree. This might be nominal too, but it cost a lot in terms of cpu (it flicks for the end user ).\n\nThe major issue is that disposed objects are still notified, this for objects created by default by the api, and objects created using the extension point.\nIn the second case this is not a big deal to workaround, but since it involves also what\u0027s created by default this is a big issue.\n\njava.lang.NullPointerException\n\tat org.eclipse.hyades.test.ui.forms.base.ExecutionEventDetailsPart.setInput(ExecutionEventDetailsPart.java:643)\n\tat org.eclipse.hyades.test.ui.forms.base.VerdictEventDetailsPart.setInput(VerdictEventDetailsPart.java:100)\n\tat org.eclipse.hyades.test.ui.forms.base.ExecutionEventDetailsPart.selectionChanged(ExecutionEventDetailsPart.java:890)\n\tat org.eclipse.ui.forms.ManagedForm.fireSelectionChanged(ManagedForm.java:146)\n\tat org.eclipse.hyades.test.ui.forms.base.LogEventsBlock.selectionChanged(LogEventsBlock.java:321)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:162)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n\tat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:149)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:160)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1976)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:1128)\n\tat org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:1154)\n\tat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:213)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:207)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:374)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "add cTelep as cc.",
    "Reassign to Jerome. ",
    "It seems to me that this defect is related to the test Log viewer extensibility.",
    "Targeting to 4.3 i3 as decided in today\u0027s AG call.",
    "Hi, Emmanuel, can you provide a little more details as to how you get to the point of having disposed pages so that I can reproduce the problem?  Right now to optimize memory usage, the maximum details pages can be created is set to 20. Once that number is reached, earlier created pages will be disposed. But I just want to make sure that\u0027s the case with you.",
    "Created an attachment (id\u003d52630)\ntest.ui plugin with a fix.\n\n",
    "Hi, Emmanuel, assuming the senario you are seeing is after the max details pages are created, old ones gets disposed. If this is the case, I\u0027m attaching a jar file with the fix.  The fix is simply to deregister the details page from the listener list when  it\u0027s disposed.\n\ncan you try it out and let me know if it solves your problem?",
    "Hi Bianca.\nWhat you describe sounds very good. On my side still some osgi issues to replace the jar in the product, i will keep you informed today anyway.",
    "Hi Bianca.\nThat\u0027s it !\nThanks a lot.\n\n(Checked on RPT 20061024_1623 + simple rename / exchange of the hyades.test.ui jar).",
    "That\u0027s great Emmanuel. Thanks.\n\nFix checked in HEAD for 4.3. Leaving this defect open waiting for PMC approval for 4.2.1 maintenance release.",
    "(In reply to comment #10)\n\u003e That\u0027s great Emmanuel. Thanks.\n\u003e Fix checked in HEAD for 4.3. Leaving this defect open waiting for PMC approval\n\u003e for 4.2.1 maintenance release.\n\nPlease marked fixed since https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d162208 covers the request for the maintenance release.",
    "Fixed.",
    "ACTION: Please verify/close this defect.",
    "Reporter: Please verify and close in preparation for shutting down the TPTP 4.4 release.  Thanks.",
    "Closing by default since not verified/closed by the originator in the 6+ months since being resolved.  \n\nPlease reopen if the issue is still present in the latest TPTP release or the\nresolution is not correct."
  ],
  "commentCreationDates": [
    "2006-10-19T17:16:58+02:00",
    "2006-10-19T18:30:23+02:00",
    "2006-10-19T18:56:37+02:00",
    "2006-10-20T09:01:19+02:00",
    "2006-10-20T20:48:22+02:00",
    "2006-10-20T22:11:22+02:00",
    "2006-10-24T22:23:59+02:00",
    "2006-10-24T23:59:45+02:00",
    "2006-10-25T14:17:06+02:00",
    "2006-10-25T14:18:57+02:00",
    "2006-10-25T16:21:06+02:00",
    "2006-10-27T18:30:12+02:00",
    "2006-10-27T21:54:15+02:00",
    "2006-11-16T14:01:22+01:00",
    "2007-06-02T20:51:00+02:00",
    "2007-06-27T19:18:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.test.ui.forms.base.ExecutionEventDetailsPart.setInput",
          "source": "ExecutionEventDetailsPart.java:643"
        },
        {
          "method": "org.eclipse.hyades.test.ui.forms.base.VerdictEventDetailsPart.setInput",
          "source": "VerdictEventDetailsPart.java:100"
        },
        {
          "method": "org.eclipse.hyades.test.ui.forms.base.ExecutionEventDetailsPart.selectionChanged",
          "source": "ExecutionEventDetailsPart.java:890"
        },
        {
          "method": "org.eclipse.ui.forms.ManagedForm.fireSelectionChanged",
          "source": "ManagedForm.java:146"
        },
        {
          "method": "org.eclipse.hyades.test.ui.forms.base.LogEventsBlock.selectionChanged",
          "source": "LogEventsBlock.java:321"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:162"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:149"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:160"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1976"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:1128"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:1154"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:213"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:207"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:374"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "161587",
      "date": "2006-10-19T17:16:58+02:00",
      "product": "TPTP Testing",
      "component": "Test.UI",
      "severity": "blocker"
    }
  ],
  "groupId": "161587",
  "bugId": "161587",
  "date": "2006-10-19T17:16:58+02:00",
  "product": "TPTP Testing",
  "component": "Test.UI",
  "severity": "blocker"
}