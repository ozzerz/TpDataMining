{
  "comments": [
    "WSAD 5.1.2 (based on Eclipse 2.1.3)\n\nSome user reported seeing crashes in background indexer preventing subsequent\nuse of search features (e.g. getting walkbacks trying to perform an ctrl-shift-T\n(open type) operation).\n\n!ENTRY org.eclipse.jdt.core 4 4 Aug 02, 2005 15:05:59.505\n!MESSAGE Background Indexer Crash Recovery\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at\njava.lang.ArrayIndexOutOfBoundsException.\u003cinit\u003e(ArrayIndexOutOfBoundsException.java:63)\n at java.lang.System.arraycopy(Native Method)\n at\norg.eclipse.jdt.internal.core.index.impl.GammaCompressedIndexBlock.nextEntry(GammaCompressedIndexBlock.java)\n at\norg.eclipse.jdt.internal.core.index.impl.BlocksIndexInput.moveToNextWordEntry(BlocksIndexInput.java)\n at\norg.eclipse.jdt.internal.core.index.impl.MergeFactory.mergeReferences(MergeFactory.java)\n at\norg.eclipse.jdt.internal.core.index.impl.MergeFactory.merge(MergeFactory.java:85)\n at org.eclipse.jdt.internal.core.index.impl.Index.merge(Index.java:243)\n at org.eclipse.jdt.internal.core.index.impl.Index.save(Index.java:348)\n at\norg.eclipse.jdt.internal.core.search.indexing.IndexManager.saveIndex(IndexManager.java)\n at\norg.eclipse.jdt.internal.core.search.indexing.AddJarFileToIndex.execute(AddJarFileToIndex.java)\n at\norg.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:360)\n at java.lang.Thread.run(Thread.java:796",
    "When pressing ctrl-shift-T (open type):\nThe pop-up dialog says, \"Progress Information. Searching... XXX files to index\".\nIt relatively quickly went from 1 to 6157 files to index and then stayed there\nfor about 30 seconds. That dialog disappears and a new one appears that says,\n\"Unexpected exception. See log for details. See error log for more details.\" \n\nUser said he got this same behavior for each subsequent ctrl-shift-t;\nlog entries below:\n\n\n!ENTRY org.eclipse.jdt.core 4 4 Aug 02, 2005 15:05:59.505\n!MESSAGE Background Indexer Crash Recovery\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at\njava.lang.ArrayIndexOutOfBoundsException.\u003cinit\u003e(ArrayIndexOutOfBoundsException.java:63)\n at java.lang.System.arraycopy(Native Method)\n at\norg.eclipse.jdt.internal.core.index.impl.GammaCompressedIndexBlock.nextEntry(GammaCompressedIndexBlock.java)\n at\norg.eclipse.jdt.internal.core.index.impl.BlocksIndexInput.moveToNextWordEntry(BlocksIndexInput.java)\n at\norg.eclipse.jdt.internal.core.index.impl.MergeFactory.mergeReferences(MergeFactory.java)\n at\norg.eclipse.jdt.internal.core.index.impl.MergeFactory.merge(MergeFactory.java:85)\n at org.eclipse.jdt.internal.core.index.impl.Index.merge(Index.java:243)\n at org.eclipse.jdt.internal.core.index.impl.Index.save(Index.java:348)\n at\norg.eclipse.jdt.internal.core.search.indexing.IndexManager.saveIndex(IndexManager.java)\n at\norg.eclipse.jdt.internal.core.search.indexing.AddJarFileToIndex.execute(AddJarFileToIndex.java)\n at\norg.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:360)\n at java.lang.Thread.run(Thread.java:796)\n!ENTRY org.eclipse.jdt.core 4 4 Aug 02, 2005 15:08:05.443\n!MESSAGE Background Indexer Crash Recovery\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at\njava.lang.ArrayIndexOutOfBoundsException.\u003cinit\u003e(ArrayIndexOutOfBoundsException.java:63)\n at java.lang.System.arraycopy(Native Method)\n at\norg.eclipse.jdt.internal.core.index.impl.GammaCompressedIndexBlock.nextEntry(GammaCompressedIndexBlock.java)\n at\norg.eclipse.jdt.internal.core.index.impl.BlocksIndexInput.moveToNextWordEntry(BlocksIndexInput.java)\n at\norg.eclipse.jdt.internal.core.index.impl.MergeFactory.mergeReferences(MergeFactory.java)\n at\norg.eclipse.jdt.internal.core.index.impl.MergeFactory.merge(MergeFactory.java:85)\n at org.eclipse.jdt.internal.core.index.impl.Index.merge(Index.java:243)\n at org.eclipse.jdt.internal.core.index.impl.Index.save(Index.java:348)\n at\norg.eclipse.jdt.internal.core.search.indexing.IndexManager.saveIndex(IndexManager.java)\n at\norg.eclipse.jdt.internal.core.search.indexing.AddJarFileToIndex.execute(AddJarFileToIndex.java)\n at org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java)\n at java.lang.Thread.run(Thread.java:796)\n!ENTRY org.eclipse.jdt.ui 4 10001 Aug 02, 2005 15:08:06.505\n!MESSAGE Internal Error\n!STACK 0\njava.lang.reflect.InvocationTargetException: java.lang.NullPointerException\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n at java.lang.NullPointerException.\u003cinit\u003e(NullPointerException.java:63)\n at\norg.eclipse.jdt.internal.core.search.indexing.IndexManager.updateIndexState(IndexManager.java)\n at\norg.eclipse.jdt.internal.core.search.indexing.IndexManager.rebuildIndex(IndexManager.java:334)\n at\norg.eclipse.jdt.internal.core.search.indexing.IndexManager.getIndex(IndexManager.java)\n at\norg.eclipse.jdt.internal.core.search.IndexSelector.getIndexes(IndexSelector.java:163)\n at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:86)\n at\norg.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:282)\n at\norg.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:581)\n at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.doSearchTypes(AllTypesCache.java:130)\n at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.getAllTypes(AllTypesCache.java:90)\n at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.getTypes(AllTypesCache.java:66)\n at\norg.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog$1.run(TypeSelectionDialog.java:191)\n at\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:10",
    "This problem cannot be reproduced in builds \u003e\u003d 3.0, since the index\ninfrastructure got rewritten entirely. Backporting the new infrastructure is a\nno go. We need to identify the defect and fix it in 2.1.3 codebase.\n\nLikely the indexer cannot merge the in memory index into disk representation,\nand keeps failing (crash recovery would be performing for ever). Also when index\nis requested to be used (when opening type dialog), it will trigger another\nindex recreation (as part of crash recovery), and in some cases may die in a\nwalkback.\n\nThere would be 2 problems:\n1. index creation failed in the first place\n2. our recovery could have an issue leading to the walkback/user dialog when\nopening type dialog\n\nFixing (1) is a must, since even if we only addressed (2), assumption is that\nthe crash recovery would kick in some endless loop.\n\n(2) is likely a timing issue, and would probably be related to the lack of\nsynchronization on IndexManager#updateIndexState(...) (sync got added on it in\nsubsequent streams).",
    "Troy: pls provide instructions to recreate problem (1)",
    "Closing as, per Troy, this isn\u0027t reproducible anymore.\nTroy, pls reopen if you eventually find steps.\n\nNo action planned for now.\n\nNote: change (2) (see comment 2) got released in maintenance branch, so it\ndoesn\u0027t get lost in the future."
  ],
  "commentCreationDates": [
    "2005-08-12T12:27:08+02:00",
    "2005-08-12T12:30:19+02:00",
    "2005-08-12T12:35:27+02:00",
    "2005-08-12T12:36:47+02:00",
    "2005-08-19T16:46:19+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.ArrayIndexOutOfBoundsException.\u003cinit\u003e",
          "source": "ArrayIndexOutOfBoundsException.java:63"
        },
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.GammaCompressedIndexBlock.nextEntry",
          "source": "GammaCompressedIndexBlock.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.BlocksIndexInput.moveToNextWordEntry",
          "source": "BlocksIndexInput.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.MergeFactory.mergeReferences",
          "source": "MergeFactory.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.MergeFactory.merge",
          "source": "MergeFactory.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.Index.merge",
          "source": "Index.java:243"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.Index.save",
          "source": "Index.java:348"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.saveIndex",
          "source": "IndexManager.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.AddJarFileToIndex.execute",
          "source": "AddJarFileToIndex.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.run",
          "source": "JobManager.java:360"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "106829",
      "date": "2005-08-12T12:27:08+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.ArrayIndexOutOfBoundsException.\u003cinit\u003e",
          "source": "ArrayIndexOutOfBoundsException.java:63"
        },
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.GammaCompressedIndexBlock.nextEntry",
          "source": "GammaCompressedIndexBlock.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.BlocksIndexInput.moveToNextWordEntry",
          "source": "BlocksIndexInput.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.MergeFactory.mergeReferences",
          "source": "MergeFactory.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.MergeFactory.merge",
          "source": "MergeFactory.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.Index.merge",
          "source": "Index.java:243"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.Index.save",
          "source": "Index.java:348"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.saveIndex",
          "source": "IndexManager.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.AddJarFileToIndex.execute",
          "source": "AddJarFileToIndex.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.run",
          "source": "JobManager.java:360"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:796"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "106829",
      "date": "2005-08-12T12:30:19+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.ArrayIndexOutOfBoundsException.\u003cinit\u003e",
          "source": "ArrayIndexOutOfBoundsException.java:63"
        },
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.GammaCompressedIndexBlock.nextEntry",
          "source": "GammaCompressedIndexBlock.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.BlocksIndexInput.moveToNextWordEntry",
          "source": "BlocksIndexInput.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.MergeFactory.mergeReferences",
          "source": "MergeFactory.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.MergeFactory.merge",
          "source": "MergeFactory.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.Index.merge",
          "source": "Index.java:243"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.impl.Index.save",
          "source": "Index.java:348"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.saveIndex",
          "source": "IndexManager.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.AddJarFileToIndex.execute",
          "source": "AddJarFileToIndex.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.run",
          "source": "JobManager.java"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:796"
        }
      ],
      "number": 2,
      "commentIndex": 1,
      "bugId": "106829",
      "date": "2005-08-12T12:30:19+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.NullPointerException.\u003cinit\u003e",
          "source": "NullPointerException.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.updateIndexState",
          "source": "IndexManager.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.rebuildIndex",
          "source": "IndexManager.java:334"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.getIndex",
          "source": "IndexManager.java"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.IndexSelector.getIndexes",
          "source": "IndexSelector.java:163"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:86"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:282"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "SearchEngine.java:581"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.doSearchTypes",
          "source": "AllTypesCache.java:130"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.getAllTypes",
          "source": "AllTypesCache.java:90"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.getTypes",
          "source": "AllTypesCache.java:66"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog$1.run",
          "source": "TypeSelectionDialog.java:191"
        }
      ],
      "number": 3,
      "commentIndex": 1,
      "bugId": "106829",
      "date": "2005-08-12T12:30:19+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "106829",
  "bugId": "106829",
  "date": "2005-08-12T12:27:08+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}