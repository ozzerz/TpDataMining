{
  "comments": [
    " ",
    "The following NPE can occur in a builder thread after a project is imported:\n\nava.lang.NullPointerException\n    at java.util.ArrayList.addAll(ArrayList.java:473)\n    at org.eclipse.wst.common.internal.emfworkbench.edit.EditModelRegistry.getAllEditModelExtensions(EditModelRegistry.java:198)\n    at org.eclipse.wst.common.internal.emfworkbench.edit.EditModelRegistry.getEditModelExtensions(EditModelRegistry.java:150)\n    at org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.initializeKnownResourceUris(EditModel.java:508)\n    at org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.\u003cinit\u003e(EditModel.java:130)\n...\n\nTthe problem seems to be that the delayed initialization of the EditModelRegistry.EditModelInfo instance seems to create a race condition that allows the EditModelRegistry.EditModelInfo.getEditModelExtensions() method (called in getAllEditModelExtensions()) to return null.  This results in the ArrayList NPE.\n\nWith proper initialization (i.e. synchronizing the EditModelInfo.initializeResources() method and adding a default assignment of empty List to editModelExtensions member variable, the NPE will be prevented.  See attached patch for this fix.",
    "Created an attachment (id\u003d75277)\npatch to fix EditModelRegistry\n\n",
    "I have tested and reviewed this patch.   Simple, with virtually no chance for deadlocks within the synchronize block.\n\nThanks Scott!",
    "I approve as is, but is synchronization really necessary? I just ask because even if correct, synchronization can change threading behavior and expose other bugs ... especially this late in a maintenance cycle ... so, be sure to test well, and be ready to revert if problems found! \n\nThanks. \n\n",
    "Committed to CVS.",
    "Verified that the code was in the WTP155m0817 driver.",
    "Was this fix ported to 2.0.1 as well? Is it in the current build?"
  ],
  "commentCreationDates": [
    "2007-08-02T23:25:48+02:00",
    "2007-08-03T00:04:57+02:00",
    "2007-08-03T00:05:42+02:00",
    "2007-08-07T17:21:47+02:00",
    "2007-08-07T21:18:22+02:00",
    "2007-08-08T20:48:26+02:00",
    "2007-08-30T20:55:26+02:00",
    "2007-09-11T20:34:37+02:00"
  ],
  "traces": [
    {
      "exceptionType": "ava.lang.NullPointerException",
      "elements": [
        {
          "method": "java.util.ArrayList.addAll",
          "source": "ArrayList.java:473"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.edit.EditModelRegistry.getAllEditModelExtensions",
          "source": "EditModelRegistry.java:198"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.edit.EditModelRegistry.getEditModelExtensions",
          "source": "EditModelRegistry.java:150"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.initializeKnownResourceUris",
          "source": "EditModel.java:508"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.\u003cinit\u003e",
          "source": "EditModel.java:130"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "198744",
      "date": "2007-08-03T00:04:57+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "normal"
    }
  ],
  "groupId": "198744",
  "bugId": "198744",
  "date": "2007-08-02T23:25:48+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "normal"
}