{
  "comments": [
    "3.0 RC1\n\nDuring shutdown I found this in the log:\n\n\n!ENTRY org.eclipse.osgi Jun 07, 2004 10:00:18.843\n!MESSAGE Error while stopping \"org.eclipse.search_3.0.0\".\n!STACK 0\norg.osgi.framework.BundleException: Exception in \norg.eclipse.core.internal.compatibility.PluginActivator.stop() of bundle \norg.eclipse.search.\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop\n(BundleContextImpl.java:1010)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker\n(BundleHost.java:502)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.stop\n(AbstractBundle.java:437)\n\tat org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles\n(BundleStopper.java:65)\n\tat org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles\n(BundleStopper.java:52)\n\tat org.eclipse.core.runtime.adaptor.EclipseAdaptor.frameworkStopping\n(EclipseAdaptor.java:538)\n\tat org.eclipse.osgi.framework.internal.core.Framework.shutdown\n(Framework.java:452)\n\tat org.eclipse.osgi.framework.internal.core.SystemBundle$1.run\n(SystemBundle.java:181)\n\tat java.lang.Thread.run(Thread.java:534)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.core.filebuffers.FileBuffers.getTextFileBufferManager\n(FileBuffers.java:42)\n\tat org.eclipse.search2.internal.ui.text.PositionTracker.\u003cinit\u003e\n(PositionTracker.java:58)\n\tat org.eclipse.search2.internal.ui.InternalSearchUI.\u003cinit\u003e\n(InternalSearchUI.java:113)\n\tat org.eclipse.search2.internal.ui.InternalSearchUI.getInstance\n(InternalSearchUI.java:124)\n\tat org.eclipse.search.internal.ui.SearchPlugin.shutdown\n(SearchPlugin.java:233)\n\tat org.eclipse.core.internal.compatibility.PluginActivator.stop\n(PluginActivator.java:74)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run\n(BundleContextImpl.java:994)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop\n(BundleContextImpl.java:990)\n\t... 8 more\nRoot exception:\njava.lang.NullPointerException\n\tat org.eclipse.core.filebuffers.FileBuffers.getTextFileBufferManager\n(FileBuffers.java:42)\n\tat org.eclipse.search2.internal.ui.text.PositionTracker.\u003cinit\u003e\n(PositionTracker.java:58)\n\tat org.eclipse.search2.internal.ui.InternalSearchUI.\u003cinit\u003e\n(InternalSearchUI.java:113)\n\tat org.eclipse.search2.internal.ui.InternalSearchUI.getInstance\n(InternalSearchUI.java:124)\n\tat org.eclipse.search.internal.ui.SearchPlugin.shutdown\n(SearchPlugin.java:233)\n\tat org.eclipse.core.internal.compatibility.PluginActivator.stop\n(PluginActivator.java:74)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run\n(BundleContextImpl.java:994)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop\n(BundleContextImpl.java:990)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker\n(BundleHost.java:502)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.stop\n(AbstractBundle.java:437)\n\tat org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles\n(BundleStopper.java:65)\n\tat org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles\n(BundleStopper.java:52)\n\tat org.eclipse.core.runtime.adaptor.EclipseAdaptor.frameworkStopping\n(EclipseAdaptor.java:538)\n\tat org.eclipse.osgi.framework.internal.core.Framework.shutdown\n(Framework.java:452)\n\tat org.eclipse.osgi.framework.internal.core.SystemBundle$1.run\n(SystemBundle.java:181)\n\tat java.lang.Thread.run(Thread.java:534)",
    "I can imagine 2 causes for the exception:\n\n1) the filebuffers plugin has never been activated\n2) The filebuffers plugin has been activated, but has been shut down before the\nsearch plugin. \n\nI\u0027m not quite sure what the cause is, but I shouldn\u0027t activate the filebuffers\nplugin when it\u0027s not loaded yet at shutdown time (whether it works or not).",
    "I don\u0027t think I can actually fix this in search. I\u0027m uncomfortable with having\nto check the activation state of foreign plugins before calling static methods\nin it. I\u0027ll move the PR to Platform-text to fix the null pointer, but I think we\nshould discuss the issue more broadly.",
    "I changed InternalSearchUI to only shut down if initialized.",
    "Added null check. I200406091200. Will raise discussion on this issue.",
    "start verifying",
    "verified in I200406110010 through code inspection"
  ],
  "commentCreationDates": [
    "2004-06-07T10:01:30+02:00",
    "2004-06-07T17:50:04+02:00",
    "2004-06-08T10:26:29+02:00",
    "2004-06-08T11:05:38+02:00",
    "2004-06-09T12:55:08+02:00",
    "2004-06-11T12:13:41+02:00",
    "2004-06-11T12:20:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Exception in  org.eclipse.core.internal.compatibility.PluginActivator.stop() of bundle  org.eclipse.search.",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop",
          "source": "BundleContextImpl.java:1010"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:502"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.stop",
          "source": "AbstractBundle.java:437"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles",
          "source": "BundleStopper.java:65"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles",
          "source": "BundleStopper.java:52"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseAdaptor.frameworkStopping",
          "source": "EclipseAdaptor.java:538"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.shutdown",
          "source": "Framework.java:452"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle$1.run",
          "source": "SystemBundle.java:181"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.core.filebuffers.FileBuffers.getTextFileBufferManager",
            "source": "FileBuffers.java:42"
          },
          {
            "method": "org.eclipse.search2.internal.ui.text.PositionTracker.\u003cinit\u003e",
            "source": "PositionTracker.java:58"
          },
          {
            "method": "org.eclipse.search2.internal.ui.InternalSearchUI.\u003cinit\u003e",
            "source": "InternalSearchUI.java:113"
          },
          {
            "method": "org.eclipse.search2.internal.ui.InternalSearchUI.getInstance",
            "source": "InternalSearchUI.java:124"
          },
          {
            "method": "org.eclipse.search.internal.ui.SearchPlugin.shutdown",
            "source": "SearchPlugin.java:233"
          },
          {
            "method": "org.eclipse.core.internal.compatibility.PluginActivator.stop",
            "source": "PluginActivator.java:74"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
            "source": "BundleContextImpl.java:994"
          },
          {
            "method": "java.security.AccessController.doPrivileged",
            "source": "Native Method"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop",
            "source": "BundleContextImpl.java:990"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "65930",
      "date": "2004-06-07T10:01:30+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.filebuffers.FileBuffers.getTextFileBufferManager",
          "source": "FileBuffers.java:42"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.PositionTracker.\u003cinit\u003e",
          "source": "PositionTracker.java:58"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI.\u003cinit\u003e",
          "source": "InternalSearchUI.java:113"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI.getInstance",
          "source": "InternalSearchUI.java:124"
        },
        {
          "method": "org.eclipse.search.internal.ui.SearchPlugin.shutdown",
          "source": "SearchPlugin.java:233"
        },
        {
          "method": "org.eclipse.core.internal.compatibility.PluginActivator.stop",
          "source": "PluginActivator.java:74"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextImpl.java:994"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop",
          "source": "BundleContextImpl.java:990"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:502"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.stop",
          "source": "AbstractBundle.java:437"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles",
          "source": "BundleStopper.java:65"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.BundleStopper.stopBundles",
          "source": "BundleStopper.java:52"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseAdaptor.frameworkStopping",
          "source": "EclipseAdaptor.java:538"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.shutdown",
          "source": "Framework.java:452"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle$1.run",
          "source": "SystemBundle.java:181"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "65930",
      "date": "2004-06-07T10:01:30+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "65930",
  "bugId": "65930",
  "date": "2004-06-07T10:01:30+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "normal"
}