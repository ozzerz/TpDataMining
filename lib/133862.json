{
  "comments": [
    "Using 3.2/M5\n\nLooking at the Extension Point Reference for org.eclipse.help.toc I see the following:\n\n  \u003c!ATTLIST toc label CDATA #REQUIRED \u003e \n\nThis is surprising to me.  I\u0027m porting some old and crusty plugins from Eclipse 2.1, where at runtime a \u003ctoc\u003e did NOT require a label attribute (although it seems that the Eclipse 2.1 doc says it is required).  Here\u0027s the setup I have.\n\n#\n# primary.xml\n#\n\u003ctoc label\u003d\"My Book\" topic\u003d\"books/bookset.html\"\u003e\n  \u003ctopic label\u003d\"Getting Started\" href\u003d\"books/getting-started/book.html\"\u003e\n    \u003canchor id\u003d\"getting-started\"/\u003e\n  \u003c/topic\u003e\n\u003c/toc\u003e\n\n#\n# getting-started.xml\n#\n\u003ctoc link_to\u003d\"toc/primary.xml#getting-started\"\u003e \n  \u003ctopic\n    label\u003d\"Introduction\"\n    href\u003d\"books/getting-started/introduction.html\"/\u003e\n  \u003ctopic\n    label\u003d\"Software Architecture\"\n    href\u003d\"books/getting-started/architecture.html\"/\u003e\n\u003c/toc\u003e\n\n#\n# plugin.xml\n#\n\u003cplugin\u003e\n  \u003cextension point\u003d\"org.eclipse.help.toc\"\u003e\n    \u003ctoc file\u003d\"toc/primary.xml\" primary\u003d\"true\"/\u003e\n    \u003ctoc file\u003d\"toc/getting-started.xml\"/\u003e\n  \u003c/extension\u003e\n\u003c/plugin\u003e\n\n\nSince my primary.xml has an \u003canchor\u003e element nested inside a \u003ctopic\u003e with a label, there should be no need for me to provide a label when I define the \u003ctoc\u003e that attaches to the \u003canchor\u003e.\n\nNot surprisingly, the following is written to the .log:\n\n  java.lang.RuntimeException: toc label\u003d\u003dnull\n    at org.apache.crimson.parser.Parser2.parseInternal(Unknown Source)\n    at org.apache.crimson.parser.Parser2.parse(Unknown Source)\n    at org.apache.crimson.parser.XMLReaderImpl.parse(Unknown Source)\n    at javax.xml.parsers.SAXParser.parse(Unknown Source)\n    at org.eclipse.help.internal.toc.TocFileParser.parse(TocFileParser.java:89)",
    "The work around is to specify a label attribute with an empty string.  If you specify non-empty string it does not get displayed anywhere.\n\n#\n# getting-started.xml\n#\n\u003ctoc label\u003d\"\" link_to\u003d\"toc/primary.xml#getting-started\"\u003e \n  \u003ctopic\n    label\u003d\"Introduction\"\n    href\u003d\"books/getting-started/introduction.html\"/\u003e\n  \u003ctopic\n    label\u003d\"Software Architecture\"\n    href\u003d\"books/getting-started/architecture.html\"/\u003e\n\u003c/toc\u003e\n\nBut of course this is meaningless.\n",
    "The logic should be smarter.\n\nBack in Eclipse 2.x, people would forget to put on labels when they were supposed to, and then be surprised why their navigation tree was behaving oddly. And there was no debug message in the log to say \"Hey! This is primary in the ToC, you need to have a label!\"\n\nSo, to ease their ability to debug, updated the code to make it required. This has the unforseen side effect that you report specifically for the \u003clink-to\u003e case.\n\nSo really, are you saying that IF my \u003ctoc\u003e has a link-to attribute, THEN label should be optional?\n\nSeems like there is a related rfe about this--because when your doc is componentized and used in multiple places, sometimes it might end up in a bigger offering that it wants to be the \"top dog\" \u003ctoc\u003e and would need a label to display, while others it is linked into a larger doc set. Some run-time smarts that says \"This time, the \u003ctoc\u003e\u0027s label is needed and this time, it\u0027s linking into something else.\" so the author doesn\u0027t have to change the source file whenever the doc plug-in is being reused elsewhere.\n\nBut then the original author would still need to supply a label, which brings it back to having the label required. :-) Requiring a label supports reuse--for when someone later wants to reuse those toc branches that you today are linking into something else.",
    "\u003e\u003eSo really, are you saying that IF my \u003ctoc\u003e has a link-to attribute,\n\u003e\u003eTHEN label should be optional?\n\nYes, that is exactly what I\u0027m saying.\n\nI understand your point of view, and applaud the attempt to serve both the simple and the advanced scenarios. But, from what you say, it is neither of these cases that is causing the problem.  It seems that the problem is caused by the goal of helping out the hapless developer that has coded up their XML incorrectly.  While I agree that helping debug problems is important, it should probably be considered a secondary goal.\n\nOf course this is all rather minor, in that those people implementing the simple case only need to specify the label attribute as being an empty string.  But, this does sound a little bogus to me, but if you really think that the debug scenario is important, then so be it.\n\nMaybe setting the label to an empty string should be documented and explained.  But it sounds like you\u0027re punishing the diligent developer.  ;-)\n"
  ],
  "commentCreationDates": [
    "2006-03-29T16:45:43+02:00",
    "2006-03-29T17:02:46+02:00",
    "2006-07-14T23:52:44+02:00",
    "2006-07-15T03:26:01+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "toc label\u003d\u003dnull",
      "elements": [
        {
          "method": "org.apache.crimson.parser.Parser2.parseInternal",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.crimson.parser.XMLReaderImpl.parse",
          "source": "Unknown Source"
        },
        {
          "method": "javax.xml.parsers.SAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.help.internal.toc.TocFileParser.parse",
          "source": "TocFileParser.java:89"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "133862",
      "date": "2006-03-29T16:45:43+02:00",
      "product": "Platform",
      "component": "User Assistance",
      "severity": "normal"
    }
  ],
  "groupId": "133862",
  "bugId": "133862",
  "date": "2006-03-29T16:45:43+02:00",
  "product": "Platform",
  "component": "User Assistance",
  "severity": "normal"
}