{
  "comments": [
    "There probably lots of factors that affect this. But I think that generally Mylar should catch any exceptions from java model, log them and return an empty result, even if it is originally JDT fault.\n\n-- Error Log --\nDate: Fri Dec 01 16:53:28 EST 2006\nMessage: The \u0027org.eclipse.mylar.java.javaNoTypeCompletionProposalComputer\u0027 proposal computer from the \u0027org.eclipse.mylar.java\u0027 plug-in did not complete normally. The extension has thrown a runtime exception.\nSeverity: Warning\nPlugin ID: org.eclipse.jdt.ui\nStack Trace:\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.compiler.util.SimpleSet.includes(SimpleSet.java:79)\n\tat org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.acceptName(UnresolvedReferenceNameFinder.java:61)\n\tat org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.endVisitPreserved(UnresolvedReferenceNameFinder.java:415)\n\tat org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.endVisit(UnresolvedReferenceNameFinder.java:314)\n\tat org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:246)\n\tat org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.find(UnresolvedReferenceNameFinder.java:76)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.findVariableFromUnresolvedReference(CompletionEngine.java:6289)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:1300)\n\tat org.eclipse.jdt.internal.codeassist.CompletionEngine.complete(CompletionEngine.java:1943)\n\tat org.eclipse.jdt.internal.core.Openable.codeComplete(Openable.java:123)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:314)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:307)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.internalComputeCompletionProposals(JavaCompletionProposalComputer.java:171)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.computeCompletionProposals(JavaCompletionProposalComputer.java:147)\n\tat org.eclipse.mylar.internal.java.ui.editor.MylarJavaNoTypeProposalComputer.computeCompletionProposals(MylarJavaNoTypeProposalComputer.java:39)\n\tat org.eclipse.jdt.internal.ui.text.java.CompletionProposalComputerDescriptor.computeCompletionProposals(CompletionProposalComputerDescriptor.java:303)\n\tat org.eclipse.jdt.internal.ui.text.java.CompletionProposalCategory.computeCompletionProposals(CompletionProposalCategory.java:264)\n\tat org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.collectProposals(ContentAssistProcessor.java:251)\n\tat org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.computeCompletionProposals(ContentAssistProcessor.java:220)\n\tat org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1754)\n\tat org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:479)\n\tat org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$16(CompletionProposalPopup.java:476)\n\tat org.eclipse.jface.text.contentassist.CompletionProposalPopup$12.run(CompletionProposalPopup.java:1400)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.jface.text.contentassist.CompletionProposalPopup.incrementalComplete(CompletionProposalPopup.java:1394)\n\tat org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1582)\n\tat org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:181)\n\tat org.eclipse.ui.texteditor.ContentAssistAction$1.run(ContentAssistAction.java:82)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.texteditor.ContentAssistAction.run(ContentAssistAction.java:80)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\n\tat org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:185)\n\tat org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:109)\n\tat org.eclipse.core.commands.Command.executeWithChecks(Command.java:461)\n\tat org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:424)\n\tat org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:160)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:465)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:791)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:838)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:563)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:505)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:122)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:1005)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:924)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:934)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:962)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:958)\n\tat org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1272)\n\tat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3468)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3368)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4132)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1990)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3075)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1924)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1888)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:348)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:341)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:285)\n\tat org.eclipse.core.launcher.Main.run(Main.java:987)\n\tat org.eclipse.core.launcher.Main.main(Main.java:962)",
    "Humm... I saw this a couple of times, but never realized what it could be. Appears something random.",
    "In all such cases we always avoid modifying the exception contract of the JDT parts that we extend.  Without Mylar JDT would throw this exception, so it should throw it with Mylar.  Although the Mylar processor is blamed, we have not done any additional computation at this stage.  So moving to JDT since error appears to be on that end.  Fyi the error gets thrown from the MylarJavaNoTypeProposalComputer which extends JavaNoTypeCompletionProposalComputer.\n\n\t@Override\n\tpublic List computeCompletionProposals(ContentAssistInvocationContext context, IProgressMonitor monitor) {\n--\u003e\tList proposals \u003d super.computeCompletionProposals(context, monitor);\n\t\treturn MylarJavaProposalProcessor.getDefault().projectInterestModel(this, proposals);\n\t}\n\t\nEugene: please post the Eclipse version you saw this with.",
    "I is Eclipse 3.3M3. Should you reassign it to jdt inbox then?",
    "Looks like a jdt.core problem.",
    "I don\u0027t find a test case to reproduce the bug.\n\nThe bug is caused by a completion inside a variable name.\n\npublic class X {\n  void foo() {\n    ???\n    int bar| // do ctrl + space at |\n    ???\n  }\n}\n\nDo you have a test case to reproduce the problem ?",
    "I unfortunately do not, since I have never seen this bug.  Eugene?",
    "(In reply to comment #6)\n\u003e I unfortunately do not, since I have never seen this bug.  Eugene?\n\nNo. I don\u0027t have test case. It happens randomly from time to time.\n\n",
    "I cannot reproduce the bug then i cannot fix it.\nBut i can add a null check to avoid NPE.",
    "Created an attachment (id\u003d55200)\nFix with the null check\n\n",
    "Released for 3.3M4.\n\nNow the bug could cause wrong completion proposals but won\u0027t cause exception.",
    "Verified for 3.3M4 with I20061211-1119 by checking the source code.\nEugene, could you please verify that your test case is fixed? Thanks.",
    "(In reply to comment #11)\n\u003e Verified for 3.3M4 with I20061211-1119 by checking the source code.\n\u003e Eugene, could you please verify that your test case is fixed? Thanks.\n\nI don\u0027t have completely reproduceable test case. Will keep an eye on this after M4 release.\n\n",
    "Jerome found a test case that reproduce the NPE with 3.3M3.\n\nI reopen the bug and will add a real fix for this bug.\n\nThe test case is:\npackage p;\nimport q.ZZZ;\npublic class X {\n\tpublic static void foo() {\n\t\tZZZ[] zzz| // do ctrl + space at |\n\t\tint zzzzzz \u003d -1;\n\t}\n}",
    "Created an attachment (id\u003d57440)\nProposed fix\n\n",
    "Released for 3.3M5\n\nTest added\n  CompletionTests#testCompletionVariableName35",
    "Verified for 3.3 M5 using warm-up build I20070205-0009.\n"
  ],
  "commentCreationDates": [
    "2006-12-01T21:59:01+01:00",
    "2006-12-02T00:35:35+01:00",
    "2006-12-02T11:54:23+01:00",
    "2006-12-02T18:19:08+01:00",
    "2006-12-06T09:38:58+01:00",
    "2006-12-06T12:31:55+01:00",
    "2006-12-06T17:51:09+01:00",
    "2006-12-06T18:58:45+01:00",
    "2006-12-07T09:50:33+01:00",
    "2006-12-07T09:51:00+01:00",
    "2006-12-07T10:00:27+01:00",
    "2006-12-11T19:45:47+01:00",
    "2006-12-14T15:49:46+01:00",
    "2007-01-24T16:24:34+01:00",
    "2007-01-24T16:25:03+01:00",
    "2007-01-24T16:27:19+01:00",
    "2007-02-05T16:18:44+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.util.SimpleSet.includes",
          "source": "SimpleSet.java:79"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.acceptName",
          "source": "UnresolvedReferenceNameFinder.java:61"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.endVisitPreserved",
          "source": "UnresolvedReferenceNameFinder.java:415"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.endVisit",
          "source": "UnresolvedReferenceNameFinder.java:314"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse",
          "source": "MethodDeclaration.java:246"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.UnresolvedReferenceNameFinder.find",
          "source": "UnresolvedReferenceNameFinder.java:76"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.findVariableFromUnresolvedReference",
          "source": "CompletionEngine.java:6289"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:1300"
        },
        {
          "method": "org.eclipse.jdt.internal.codeassist.CompletionEngine.complete",
          "source": "CompletionEngine.java:1943"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.codeComplete",
          "source": "Openable.java:123"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:314"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.codeComplete",
          "source": "CompilationUnit.java:307"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.internalComputeCompletionProposals",
          "source": "JavaCompletionProposalComputer.java:171"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer.computeCompletionProposals",
          "source": "JavaCompletionProposalComputer.java:147"
        },
        {
          "method": "org.eclipse.mylar.internal.java.ui.editor.MylarJavaNoTypeProposalComputer.computeCompletionProposals",
          "source": "MylarJavaNoTypeProposalComputer.java:39"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.CompletionProposalComputerDescriptor.computeCompletionProposals",
          "source": "CompletionProposalComputerDescriptor.java:303"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.CompletionProposalCategory.computeCompletionProposals",
          "source": "CompletionProposalCategory.java:264"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.collectProposals",
          "source": "ContentAssistProcessor.java:251"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.ContentAssistProcessor.computeCompletionProposals",
          "source": "ContentAssistProcessor.java:220"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals",
          "source": "ContentAssistant.java:1754"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals",
          "source": "CompletionProposalPopup.java:479"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$16",
          "source": "CompletionProposalPopup.java:476"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup$12.run",
          "source": "CompletionProposalPopup.java:1400"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.incrementalComplete",
          "source": "CompletionProposalPopup.java:1394"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions",
          "source": "ContentAssistant.java:1582"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation",
          "source": "CompilationUnitEditor.java:181"
        },
        {
          "method": "org.eclipse.ui.texteditor.ContentAssistAction$1.run",
          "source": "ContentAssistAction.java:82"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.texteditor.ContentAssistAction.run",
          "source": "ContentAssistAction.java:80"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.ui.commands.ActionHandler.execute",
          "source": "ActionHandler.java:185"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute",
          "source": "LegacyHandlerWrapper.java:109"
        },
        {
          "method": "org.eclipse.core.commands.Command.executeWithChecks",
          "source": "Command.java:461"
        },
        {
          "method": "org.eclipse.core.commands.ParameterizedCommand.executeWithChecks",
          "source": "ParameterizedCommand.java:424"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.HandlerService.executeCommand",
          "source": "HandlerService.java:160"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:465"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:791"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:838"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:563"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3",
          "source": "WorkbenchKeyboard.java:505"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent",
          "source": "WorkbenchKeyboard.java:122"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:1005"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:924"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:949"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:934"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:962"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:958"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.wmChar",
          "source": "Widget.java:1272"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3468"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3368"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4132"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1990"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3075"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1924"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1888"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:348"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:341"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:285"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:987"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:962"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166570",
      "date": "2006-12-01T21:59:01+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "166570",
  "bugId": "166570",
  "date": "2006-12-01T21:59:01+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}