{
  "comments": [
    "Build ID: 120070625-1500\n\nSteps To Reproduce:\nI\u0027m developing a Plug-in over ATF Plugins. So this error ocurrs when I\u0027m running the my plug-in.\n\n1. Runs a Plug-in Project with the \"Clear\" button checked in the Workspace Data Goup on the Plug-in Launcher.\n2. Create a HTML Page\n3. Open With -\u003e Mozilla Browser\n\n\nMore information:\nWe are working on Linux RedHat Enterprise 4. We install the ATF Plug-in like as said in the ATF\u0027s page. But in first time we try to run the Mozilla Browser in a new workspace we found a NullPointerException. The bug occurs when the ATF Plug-ins requires the SWT  Mozilla Broswer, in the org.eclipse.swt.browser.Mozilla.getWebBrowser(Mozilla.java:1258), in the first time that I tried to open a mozilla for a workspace, this method throw the InvocationTargetException. When I restart the Eclipse and try to open a Mozilla browser again everything works fine.\n\njava.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.swt.browser.Mozilla.getWebBrowser(Mozilla.java:1258)\n    at org.eclipse.swt.browser.Browser.getWebBrowser(Browser.java:446)\n    at org.eclipse.atf.mozilla.ide.ui.browser.MozBrowserEditor.getAdapter(Unknown Source)\n    at org.eclipse.atf.mozilla.ide.ui.netmon.MozNetworkMonitorAdapter.connect(Unknown Source)\n    at org.eclipse.atf.mozilla.ide.ui.browser.MozBrowserEditor.createPartControl(Unknown Source)\n    at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:661)\n    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:426)\n    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:592)\n    at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:263)\n    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2721)\n    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2633)\n    at org.eclipse.ui.internal.WorkbenchPage.access$12(WorkbenchPage.java:2625)\n    at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2577)\n    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2572)\n    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2556)\n    at org.eclipse.ui.actions.OpenWithMenu.openEditor(OpenWithMenu.java:340)\n    at org.eclipse.ui.actions.OpenWithMenu.access$0(OpenWithMenu.java:328)\n    at org.eclipse.ui.actions.OpenWith Menu$2.handleEvent(OpenWithMenu.java:190)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1101)\n    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3319)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2971)\n    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n    at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1169)\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1144)\nCaused by: org.mozilla.xpcom.XPCOMInitializationException: Must call Mozilla.getInstance().initialize() before using this method\n    at org.mozilla.xpcom.Mozilla.wrapXPCOMObject(Mozilla.java:1062)\n    ... 48 more\nCaused by: java.lang.NullPointerException\n    at org.mozilla.xpcom.Mozilla.wrapXPCOMObject(Mozilla.java:1060)\n    ... 48 more",
    "Moving to ATF",
    "It ends up that the Welcome page is a browser component. On Linux this causes SWT to do its initialization code in Mozilla.java before ATF can set the path to XULRunner. The initialization code in Mozilla.java is only executed once per workspace start. The problem doesn\u0027t occur on sequential workspace start since the welcome page doesn\u0027t show up. \n",
    "The SWT Browser code looks for the system property \"XULRUNNER_PATH\", which is what ATF provides.  However, ATF can only set that property once it is loaded.  If the Browser is loaded before ATF (as is with the Intro screen on a new workspace), then XULRunner isn\u0027t properly setup for use by ATF.\n\nOf course, this is a problem in general if anyone opens the internal web browser on Eclipse/Linux before loading ATF.\n\nSo we need to set \"XULRUNNER_PATH\" before any instance of the Browser is loaded.  Ideally, looking for the XULRunner plugin should be handled by SWT itself, but SWT has no concept of plugins (hence the use of the system property).  Maybe there\u0027s a better way for SWT to handle this?\n\nIn the meantime, we need to fix this in ATF.  The best time to set the system property would be during startup, using the \"org.eclipse.ui.startup\" extension point.  But this carries performance issues: we wouldn\u0027t want to load the XULRunner plugin (which is rather large) during startup if it is not necessary.\n\nSo maybe put the system property setting code in its own, small plugin, and load this on startup?",
    "(In reply to comment #3)\n\u003e So maybe put the system property setting code in its own, small plugin, and\n\u003e load this on startup?\nThat probably makes sense to try that. And that is somehow something which I started working on with this:\nhttp://wiki.eclipse.org/ATF/Mozilla\n",
    "It does seem to make sense to solve this problem as part of the proposed XULRunner extension restructuring. If we are going to have to add a new plugin for the restructuring, then it makes sense to try to solve the problem in that plugin. ",
    "I committed the proposed changes in the xulrunner_extension_reorg branch",
    "fixed in head \u003e 20071009\nThis also contains the new xulrunner extension code that works with the Xulrunner i uploaded @ mozilla as 1.8.1.3.200904"
  ],
  "commentCreationDates": [
    "2007-08-30T20:29:17+02:00",
    "2007-08-30T22:15:51+02:00",
    "2007-08-30T23:38:19+02:00",
    "2007-08-31T00:37:05+02:00",
    "2007-08-31T02:54:06+02:00",
    "2007-08-31T15:58:43+02:00",
    "2007-09-08T00:36:06+02:00",
    "2007-10-10T03:14:51+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.browser.Mozilla.getWebBrowser",
          "source": "Mozilla.java:1258"
        },
        {
          "method": "org.eclipse.swt.browser.Browser.getWebBrowser",
          "source": "Browser.java:446"
        },
        {
          "method": "org.eclipse.atf.mozilla.ide.ui.browser.MozBrowserEditor.getAdapter",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.mozilla.ide.ui.netmon.MozNetworkMonitorAdapter.connect",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.atf.mozilla.ide.ui.browser.MozBrowserEditor.createPartControl",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:661"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:426"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:592"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.getEditor",
          "source": "EditorReference.java:263"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2721"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2633"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$12",
          "source": "WorkbenchPage.java:2625"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$10.run",
          "source": "WorkbenchPage.java:2577"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2572"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2556"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.openEditor",
          "source": "OpenWithMenu.java:340"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.access$0",
          "source": "OpenWithMenu.java:328"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu$2.handleEvent",
          "source": "OpenWithMenu.java:190"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1101"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3319"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2971"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "causedBy": {
        "exceptionType": "org.mozilla.xpcom.XPCOMInitializationException",
        "message": "Must call Mozilla.getInstance().initialize() before using this method",
        "elements": [
          {
            "method": "org.mozilla.xpcom.Mozilla.wrapXPCOMObject",
            "source": "Mozilla.java:1062"
          }
        ],
        "causedBy": {
          "exceptionType": "java.lang.NullPointerException",
          "elements": [
            {
              "method": "org.mozilla.xpcom.Mozilla.wrapXPCOMObject",
              "source": "Mozilla.java:1060"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "201774",
      "date": "2007-08-30T20:29:17+02:00",
      "product": "ATF",
      "component": "mozide",
      "severity": "normal"
    }
  ],
  "groupId": "201774",
  "bugId": "201774",
  "date": "2007-08-30T20:29:17+02:00",
  "product": "ATF",
  "component": "mozide",
  "severity": "normal"
}