{
  "comments": [
    "See in eclipse.tools.emf message \"java.lang.ClassCircularityError: myPackage/ValidationDelegateClientSelector\".\n\nThe fact that client contexts are not lazily loaded may be responsible for ClassCircularityError.",
    "Wrong project; this has nothing to do with OCL.\n\nTo quote from the newsgroup:\n\n\"\nWhen EMF Validation examples are not loaded, the exception occurs. When \nEMF Validation examples are loaded, the exception does not occur.\n\nAny idea on the reason for this would be appreciated.\n\nEclipse Version: 3.3.0 Build id: I20070621-1340\nSun JRE 1.6.02\n\nEMF Validation 1.1.1 200708161445\n\nWhat I have read so far on ClassCircularityError seems irrelevant (given \nthe previously mentionned version numbers).\n\njava.lang.ClassCircularityError: \nmypackage/validation/constraints/ValidationDelegateClientSelector\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClass(Unknown Source)\nat \norg.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:161)\nat \norg.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:501)\nat \norg.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:471)\nat \norg.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:430)\nat \norg.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:413)\nat \norg.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:189)\nat \norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:340)\nat \norg.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal(BundleLoader.java:408)\nat \norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:369)\nat \norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:357)\nat \norg.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)\nat java.lang.ClassLoader.loadClass(Unknown Source)\nat \norg.eclipse.osgi.framework.internal.core.BundleLoader.loadClass(BundleLoader.java:289)\nat \norg.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:227)\nat \norg.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1269)\nat \norg.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:160)\nat \norg.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:788)\nat \norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)\nat \norg.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:51)\nat \norg.eclipse.emf.validation.internal.service.ClientContext.initializeCustomSelector(ClientContext.java:186)\nat \norg.eclipse.emf.validation.internal.service.ClientContext.initializeSelector(ClientContext.java:122)\nat \norg.eclipse.emf.validation.internal.service.ClientContext.\u003cinit\u003e(ClientContext.java:72)\nat \norg.eclipse.emf.validation.internal.service.ClientContextManager.configureClientContexts(ClientContextManager.java:321)\nat \norg.eclipse.emf.validation.internal.service.ClientContextManager.configureConstraintBindings(ClientContextManager.java:304)\nat \norg.eclipse.emf.validation.internal.EMFModelValidationPlugin$Implementation.configureConstraintBindings(EMFModelValidationPlugin.java:256)\nat \norg.eclipse.emf.validation.internal.EMFModelValidationPlugin$Implementation.start(EMFModelValidationPlugin.java:229)\nat \norg.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:999)\nat java.security.AccessController.doPrivileged(Native Method)\nat \norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:993)\nat \norg.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:974)\nat \norg.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:346)\nat \norg.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:260)\n...\n\"",
    "It seems to me there isn\u0027t enough information here to enable Christian to reproduce this problem.  Circularity problems from what I remember this is classes that have circular dependencies in their initialization code. This sound likely to be a problems specific to ValidationDelegateClientSelector...",
    "(In reply to comment #2)\n\u003e It seems to me there isn\u0027t enough information here to enable Christian to\n\u003e reproduce this problem.  Circularity problems from what I remember this is\n\u003e classes that have circular dependencies in their initialization code. This\n\u003e sound likely to be a problems specific to ValidationDelegateClientSelector...\n\u003e \n\nThe ValidationDelegateClientSelector is org.eclipse.emf.validation.examples.general.constraints.ValidationDelegateClientSelector   in a different package (my production plugin should not depend on EMF Validation Examples ...).\n\nI think I apply the tutorial and get the error systematically.\n\nCould I send a copy of my workspace plugins to Christian\u0027s email to help him understand if there\u0027s really a problem ? Making a public example would take more time ...\n",
    "I\u0027ll be happy to see anything that reproduces this problem, as I\u0027ve never actually encountered it myself.  I\u0027ll treat anything you send me as confidential and will destroy it when I have finished.\n\nI am reasonably confident that taking the start-up of the validation framework\u0027s own plug-in out of the picture will clear this problem up, but having the test case will certainly help.",
    "Committed a fix to CVS.\n\nThe client-context definitions, constraint bindings, constraint providers, and validation listeners extension points are now all loaded on-demand by the APIs that use them.  The validation plug-in activator no longer does anything.\n\nNote, however, that I was unable to reproduce the ClassCircularityError with the plug-ins provided to me off-line.  Neither with nor without the EMF Validation Framework examples installed.  In any case, it is better for OSGi performance to avoid loading extensions during bundle activation.  If the problem persists, please comment here and we can re-open this bug."
  ],
  "commentCreationDates": [
    "2007-12-10T16:48:16+01:00",
    "2007-12-10T17:10:49+01:00",
    "2007-12-11T06:58:03+01:00",
    "2007-12-14T08:52:07+01:00",
    "2007-12-14T12:22:48+01:00",
    "2007-12-15T20:54:05+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCircularityError",
      "message": "mypackage/validation/constraints/ValidationDelegateClientSelector",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass",
          "source": "DefaultClassLoader.java:161"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass",
          "source": "ClasspathManager.java:501"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl",
          "source": "ClasspathManager.java:471"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl",
          "source": "ClasspathManager.java:430"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass",
          "source": "ClasspathManager.java:413"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass",
          "source": "DefaultClassLoader.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:340"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal",
          "source": "BundleLoader.java:408"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:369"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:357"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass",
          "source": "DefaultClassLoader.java:83"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.loadClass",
          "source": "BundleLoader.java:289"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.loadClass",
          "source": "BundleHost.java:227"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass",
          "source": "AbstractBundle.java:1269"
        },
        {
          "method": "org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension",
          "source": "RegistryStrategyOSGI.java:160"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension",
          "source": "ExtensionRegistry.java:788"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:243"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension",
          "source": "ConfigurationElementHandle.java:51"
        },
        {
          "method": "org.eclipse.emf.validation.internal.service.ClientContext.initializeCustomSelector",
          "source": "ClientContext.java:186"
        },
        {
          "method": "org.eclipse.emf.validation.internal.service.ClientContext.initializeSelector",
          "source": "ClientContext.java:122"
        },
        {
          "method": "org.eclipse.emf.validation.internal.service.ClientContext.\u003cinit\u003e",
          "source": "ClientContext.java:72"
        },
        {
          "method": "org.eclipse.emf.validation.internal.service.ClientContextManager.configureClientContexts",
          "source": "ClientContextManager.java:321"
        },
        {
          "method": "org.eclipse.emf.validation.internal.service.ClientContextManager.configureConstraintBindings",
          "source": "ClientContextManager.java:304"
        },
        {
          "method": "org.eclipse.emf.validation.internal.EMFModelValidationPlugin$Implementation.configureConstraintBindings",
          "source": "EMFModelValidationPlugin.java:256"
        },
        {
          "method": "org.eclipse.emf.validation.internal.EMFModelValidationPlugin$Implementation.start",
          "source": "EMFModelValidationPlugin.java:229"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextImpl.java:999"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:993"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:974"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:346"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "AbstractBundle.java:260"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "212429",
      "date": "2007-12-10T17:10:49+01:00",
      "product": "EMF",
      "component": "Validation",
      "severity": "enhancement"
    }
  ],
  "groupId": "212429",
  "bugId": "212429",
  "date": "2007-12-10T16:48:16+01:00",
  "product": "EMF",
  "component": "Validation",
  "severity": "enhancement"
}