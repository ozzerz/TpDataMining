{
  "comments": [
    "3.1 RC2\n\nSteps to reproduce:\n- Checkout project org.eclipse.jdt.ui.vcm\n- Expand project in the package explorer\n- Browse through the folders of the JRE_LIB container\n\n-\u003e The following exception occurs:\n\njava.lang.NullPointerException\n        at org.eclipse.core.internal.content.FileSpec.getMappingKeyFor\n(FileSpec.java:57)\n        at \norg.eclipse.core.internal.content.ContentTypeCatalog.getDirectlyAssociated\n(ContentTypeCatalog.java:454)\n        at \norg.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFo\nr(ContentTypeCatalog.java:409)\n\n        at \norg.eclipse.core.internal.content.ContentTypeCatalog.findContentTypesFor\n(ContentTypeCatalog.java:263)\n        at \norg.eclipse.core.internal.content.ContentTypeMatcher.findContentTypeFor\n(ContentTypeMatcher.java:49)\n        at org.eclipse.ui.internal.registry.EditorRegistry.guessAtContentType\n(EditorRegistry.java:338)\n        at org.eclipse.ui.internal.registry.EditorRegistry.getImageDescriptor\n(EditorRegistry.java:382)\n        at \norg.eclipse.jdt.internal.ui.viewsupport.StorageLabelProvider.getDefaultImage\n(StorageLabelProvider.java:133)\n        at \norg.eclipse.jdt.internal.ui.viewsupport.StorageLabelProvider.getImageForJarEntr\ny(StorageLabelProvider.java:11\n6)\n        at \norg.eclipse.jdt.internal.ui.viewsupport.StorageLabelProvider.getImage\n(StorageLabelProvider.java:52)\n        at org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getImage\n(JavaUILabelProvider.java:140)\n        at \norg.eclipse.jdt.internal.ui.packageview.WorkingSetAwareLabelProvider.getImage\n(WorkingSetAwareLabelProvider.ja\nva:54)\n        at org.eclipse.jface.viewers.DecoratingLabelProvider.getImage\n(DecoratingLabelProvider.java:82)\n        at org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel\n(DecoratingLabelProvider.java:212)\n        at org.eclipse.jface.viewers.StructuredViewer.buildLabel\n(StructuredViewer.java:1855)\n        at org.eclipse.jface.viewers.TreeViewer.doUpdateItem\n(TreeViewer.java:228)\n        at \norg.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run\n(AbstractTreeViewer.java:85)\n        at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1038)\n        at org.eclipse.core.runtime.Platform.run(Platform.java:775)\n        at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n        at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\n        at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:621)\n        at \norg.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run\n(StructuredViewer.java:434)\n        at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1038)\n        at org.eclipse.core.runtime.Platform.run(Platform.java:775)\n        at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n        at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\n        at org.eclipse.jface.viewers.StructuredViewer.updateItem\n(StructuredViewer.java:1763)\n        at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem\n(AbstractTreeViewer.java:535)\n        at org.eclipse.jface.viewers.AbstractTreeViewer$1.run\n(AbstractTreeViewer.java:514)\n        at org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:69)\n        at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren\n(AbstractTreeViewer.java:494)\n        at org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand\n(AbstractTreeViewer.java:948)\n        at org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded\n(AbstractTreeViewer.java:959)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:179)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:844)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:868)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:853)\n        at org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:3703)\n        at org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:3567)\n        at org.eclipse.swt.widgets.Composite.WM_NOTIFY(Composite.java:1035)\n        at org.eclipse.swt.widgets.Control.windowProc(Control.java:3088)\n        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3679)\n        at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n        at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1578)\n        at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:219)\n        at org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:2814)\n        at org.eclipse.swt.widgets.Control.windowProc(Control.java:3070)\n        at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:2390)\n        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3679)\n        at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n        at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1654)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2686)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1717)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1681)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:366)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n        at org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n        at org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n        at java.lang.reflect.Method.invoke(Method.java:391)\n        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n        at org.eclipse.core.launcher.Main.run(Main.java:973)\n        at org.eclipse.core.launcher.Main.main(Main.java:948)",
    "To make the steps more specific: select the package sun.text.resources inside\nrt.jar (works for me with Sun 1.5). The triggers is to try to expose a file\n(inside a JAR in the claspath) that has no file extension.\n\nThe NPE occurs because null is passed to\nIContentTypeMatcher.findContentTypeFor(String), which is not legal.\nEditorRegistry  will do that when null is passed to\nIEditorRegistry.getImageDescriptor(String), which does not mention null is\nallowed as argument, so I assume it is not allowed there either (Kim, please\ncorrect me if I am wrong). \n\nStorageLabelProvider is explicitly passing null, and it only does that when the\nfile has no file extension. I would have expected clients of the editor registry\nto always pass the full file name, not only the extension.\n\nMoving to JDT/Text.",
    "getImageDescriptor(null) doesn\u0027t make a whole lot of sense.  The doc for the method mentions that it will \nextract the file extension itself.",
    "I agree that the Javadoc does not mention null as valid argument, however we\n(and possibly other clients) used this call since 2001 to get the default image\nfor files that have no editor associated. In addition the Javadoc of\ngetImageDescriptor writes that it does use the unknwon content type i.e. it does\nnot try to derive a content type from the file extension:\n\t * Returns the image descriptor associated with a given file. This image is\n\t * usually displayed next to the given file. This method assumes an unknown\n\t * content type for the given file.\n\nSo, it might be a good idea to protect the Platform UI code as well.",
    "Moving to JDT UI where this bug belongs. Dirk, I\u0027m the initial owner of this\nclass and I have a trivial fix read. I approve to fix this for 3.1 RC3.",
    "I\u0027ve entered bug 99679 to address javadoc cleanup + error trapping in the UI code.",
    "+1 for RC3.",
    "Dani, can you take care of the fix.",
    "Fixed in HEAD.\nReviewed by Markus.",
    ".",
    "start verifying...",
    "Verified on I20050617-0010 following the steps in comment one. There are four\nfiles without an extension in this package. All are displayed fine."
  ],
  "commentCreationDates": [
    "2005-06-13T11:36:43+02:00",
    "2005-06-13T16:20:04+02:00",
    "2005-06-13T16:29:36+02:00",
    "2005-06-13T16:51:46+02:00",
    "2005-06-13T16:52:32+02:00",
    "2005-06-13T17:02:25+02:00",
    "2005-06-13T17:19:32+02:00",
    "2005-06-13T17:20:21+02:00",
    "2005-06-14T18:56:56+02:00",
    "2005-06-14T18:57:09+02:00",
    "2005-06-17T13:55:24+02:00",
    "2005-06-17T13:57:17+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.content.FileSpec.getMappingKeyFor",
          "source": "FileSpec.java:57"
        },
        {
          "method": "org.eclipse.core.internal.content.ContentTypeCatalog.getDirectlyAssociated",
          "source": "ContentTypeCatalog.java:454"
        },
        {
          "method": "org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor",
          "source": "ContentTypeCatalog.java:409"
        },
        {
          "method": "org.eclipse.core.internal.content.ContentTypeCatalog.findContentTypesFor",
          "source": "ContentTypeCatalog.java:263"
        },
        {
          "method": "org.eclipse.core.internal.content.ContentTypeMatcher.findContentTypeFor",
          "source": "ContentTypeMatcher.java:49"
        },
        {
          "method": "org.eclipse.ui.internal.registry.EditorRegistry.guessAtContentType",
          "source": "EditorRegistry.java:338"
        },
        {
          "method": "org.eclipse.ui.internal.registry.EditorRegistry.getImageDescriptor",
          "source": "EditorRegistry.java:382"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.StorageLabelProvider.getDefaultImage",
          "source": "StorageLabelProvider.java:133"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.StorageLabelProvider.getImageForJarEntry",
          "source": "StorageLabelProvider.java:11 6"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.StorageLabelProvider.getImage",
          "source": "StorageLabelProvider.java:52"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getImage",
          "source": "JavaUILabelProvider.java:140"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.WorkingSetAwareLabelProvider.getImage",
          "source": "WorkingSetAwareLabelProvider.ja va:54"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.getImage",
          "source": "DecoratingLabelProvider.java:82"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel",
          "source": "DecoratingLabelProvider.java:212"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.buildLabel",
          "source": "StructuredViewer.java:1855"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:228"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:85"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1038"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:775"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:621"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:434"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1038"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:775"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1763"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:535"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:514"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:494"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand",
          "source": "AbstractTreeViewer.java:948"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded",
          "source": "AbstractTreeViewer.java:959"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:179"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:844"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:868"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:853"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.wmNotifyChild",
          "source": "Tree.java:3703"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_NOTIFY",
          "source": "Control.java:3567"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_NOTIFY",
          "source": "Composite.java:1035"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3088"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3679"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1578"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.callWindowProc",
          "source": "Tree.java:219"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN",
          "source": "Tree.java:2814"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3070"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.windowProc",
          "source": "Tree.java:2390"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3679"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1654"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2686"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1717"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1681"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:366"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "99585",
      "date": "2005-06-13T11:36:43+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "99585",
  "bugId": "99585",
  "date": "2005-06-13T11:36:43+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}