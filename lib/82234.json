{
  "comments": [
    "Get an SWTException: Invalid thread access when calling ApplicationWindow.open\n() from a Thread which is not owner of the Display object comming from \nDisplay.getDefault(). \n\nI have written a littel JFace application extending the ApplicationWindow \nclass, having some menu bar added by calling addMenuBar() and I got the \nfollowing SWTException during the configureShell() method is called:\n\nException in thread \"HandlerThread#Journal\" org.eclipse.swt.SWTException: \nInvalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:2827)\n\tat org.eclipse.swt.SWT.error(SWT.java:2752)\n\tat org.eclipse.swt.SWT.error(SWT.java:2723)\n\tat org.eclipse.swt.widgets.Display.error(Display.java:748)\n\tat org.eclipse.swt.widgets.Display.checkDevice(Display.java:573)\n\tat org.eclipse.swt.widgets.Display.disposeExec(Display.java:688)\n\tat org.eclipse.jface.action.ActionContributionItem.getImageCache\n(ActionContributionItem.java:389) \u003c-- *\n\tat org.eclipse.jface.action.ActionContributionItem.updateImages\n(ActionContributionItem.java:887)\n\tat org.eclipse.jface.action.ActionContributionItem.update\n(ActionContributionItem.java:824)\n\tat org.eclipse.jface.action.ActionContributionItem.fill\n(ActionContributionItem.java:274)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:625)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:547)\n\tat org.eclipse.jface.action.MenuManager.fill(MenuManager.java:232)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:625)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:547)\n\tat org.eclipse.jface.action.MenuManager.createMenuBar\n(MenuManager.java:158)\n\tat org.eclipse.jface.window.ApplicationWindow.createTrimWidgets\n(ApplicationWindow.java:332)\n\tat org.eclipse.jface.window.ApplicationWindow.configureShell\n(ApplicationWindow.java:320)\n\tat \nde.powerisdnmonitor.ui.jface.application.JournalApplication.configureShell\n(JournalApplication.java:43)\n:\n:\n\nMy configureShell() method is simple an overriden method from ApplicationWindow:\n\n\tprotected void configureShell(Shell shell) {\n\t\tsuper.configureShell(shell);\n\t\tshell.setText(\"MyApplication\");\n\t}\t\n\n\n* The exception only occurs if I call the Application from user-interface \nthread which does not belong to Display.getDefault(). The method getImageCache\n() of the class ActionContributionItem calls Display.getDefault() for my \nThread \"HandlerThread#Journal\" although it does not belong to this Display \nobject:\n\n    private static ImageCache getImageCache() {\n        ImageCache cache \u003d globalImageCache;\n        if (cache \u003d\u003d null) {\n            globalImageCache \u003d cache \u003d new ImageCache();\n            Display display \u003d Display.getDefault();        \u003c-- *\n            if (display !\u003d null) {\n                display.disposeExec(new Runnable() {\n                    public void run() {\n                        if (globalImageCache !\u003d null) {\n                            globalImageCache.dispose();\n                            globalImageCache \u003d null;\n                        }\n                    }\n                });\n            }\n        }\n        return cache;\n    }\n\nWouldn\u0027t it be better to call Display.getCurrent() in the getImageCache() \nmethod? Or should I do something different in my coding?",
    "Sorry, forgot to say. I used SWT and JFace libraries from the 3.1M4 build",
    "You should be wrapping you call to open() in a Runnable and using\nDisplay.syncExec() or Display.asyncExec() if you\u0027re in a non-UI thread.  This is\nstandard behaviour in SWT and by extension JFace."
  ],
  "commentCreationDates": [
    "2005-01-05T12:59:12+01:00",
    "2005-01-05T13:02:18+01:00",
    "2005-01-05T13:53:26+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2827"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2752"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2723"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.error",
          "source": "Display.java:748"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.checkDevice",
          "source": "Display.java:573"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.disposeExec",
          "source": "Display.java:688"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.getImageCache",
          "source": "ActionContributionItem.java:389"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "82234",
      "date": "2005-01-05T12:59:12+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "82234",
  "bugId": "82234",
  "date": "2005-01-05T12:59:12+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}