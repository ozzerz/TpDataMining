{
  "comments": [
    "According to the J2SE Specification : \"It is a compile-time error for the class body of an enum constant to declare an abstract method.\", but no error is reported in this case.\n\nExample:\n\npublic enum Operation {\n  PLUS   { double eval(double x, double y) { return x + y; } },\n  MINUS  { abstract double eval(double x, double y); };\n\n  abstract double eval(double x, double y);\n}\n\nWhen trying to use the class, the following exception appears in the console :\n\nException in thread \"main\" java.lang.ClassFormatError: Illegal class modifiers in class enumtest/Operation: 0x4412\n\tat java.lang.ClassLoader.defineClass1(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n\tat enumtest.Main.main(Main.java:22)",
    "Not only we don\u0027t detect this case, but we also don\u0027t detect abstract method not implemented.\npublic enum X {\n  PLUS   { double eval(double x, double y) { return x + y; } },\n  MINUS  { abstract void eval2(Object x, Object y); };\n\n  abstract double eval(double x, double y);\n  public static void main(String[] args) {}\n}\n\n\nIn this case, we don\u0027t detect that eval2 is abstract and we don\u0027t detect that eval is not implemented for MINUS.\nX ends up being abstract and this is also illegal.\nSee JLS3 8.1.1.1",
    "Created an attachment (id\u003d49701)\nProposed patch\n\n3.3 patch",
    "Created an attachment (id\u003d49705)\nBetter patch\n\nImproved patch, which also clarifies the AccFinal positionning.\nIn the past, it was always set, and cleared during enum constant checkAndSetModifiers, which could allow for some discrepancy in the meantime.",
    "Added EnumTest#test138-141.\nReleased for 3.3M2 (HEAD)\n\nWill queue the change as well for 3.2.2 (too late for 3.2.1)",
    "Verified for 3.3 M2 using build I20060918-0010.",
    "Released for 3.2.2",
    "*** Bug 166866 has been marked as a duplicate of this bug. ***",
    "Reopen for verification",
    "(In reply to comment #6)\n\u003e Released for 3.2.2\n\u003e \n\n",
    "verified for 3.2.2 using build M20070112-1200"
  ],
  "commentCreationDates": [
    "2006-09-07T21:50:46+02:00",
    "2006-09-08T01:57:22+02:00",
    "2006-09-08T12:05:40+02:00",
    "2006-09-08T12:41:33+02:00",
    "2006-09-08T15:12:06+02:00",
    "2006-09-18T18:55:35+02:00",
    "2006-09-28T16:34:11+02:00",
    "2006-12-06T03:11:06+01:00",
    "2007-01-15T09:07:55+01:00",
    "2007-01-15T09:10:30+01:00",
    "2007-01-15T11:51:41+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassFormatError",
      "message": "Illegal class modifiers in class enumtest/Operation: 0x4412",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:620"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:124"
        },
        {
          "method": "java.net.URLClassLoader.defineClass",
          "source": "URLClassLoader.java:260"
        },
        {
          "method": "java.net.URLClassLoader.access$100",
          "source": "URLClassLoader.java:56"
        },
        {
          "method": "java.net.URLClassLoader$1.run",
          "source": "URLClassLoader.java:195"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.net.URLClassLoader.findClass",
          "source": "URLClassLoader.java:188"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:306"
        },
        {
          "method": "sun.misc.Launcher$AppClassLoader.loadClass",
          "source": "Launcher.java:268"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:251"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:319"
        },
        {
          "method": "enumtest.Main.main",
          "source": "Main.java:22"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "156591",
      "date": "2006-09-07T21:50:46+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "156591",
  "bugId": "156591",
  "date": "2006-09-07T21:50:46+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}