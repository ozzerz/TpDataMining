{
  "comments": [
    "I have a couple of simple schema, one defines an attribute, and the other \nincludes an attribute wildcard. When I try to use the SDO api to set the \nattribute onto the wildcard I get a class cast exception deep within the \nfeature map code.\n\nHere are the scehmas:\n\n\u003cxs:schema xmlns:xs\u003d\"http://www.w3.org/2001/XMLSchema\"\n           xmlns:tns\u003d\"http://sib.mfp.sdo/testElementContent.xsd\"\n           elementFormDefault\u003d\"qualified\"\n           targetNamespace\u003d\"http://sib.mfp.sdo/testElementContent.xsd\"\u003e\n\u003c!-- Made up by Matt Lovett for the xsd tests --\u003e\n\n  \u003cxs:attribute name\u003d\"GlobalAttribute1\" type\u003d\"xs:string\"/\u003e\n  \n  \u003cxs:element name\u003d\"GlobalElement1\"\u003e\n    \u003cxs:complexType\u003e\n      \u003cxs:sequence\u003e\n        \u003cxs:element name\u003d\"string1\" type\u003d\"xs:string\"/\u003e\n        \u003cxs:element name\u003d\"integer1\" type\u003d\"xs:int\"/\u003e\n      \u003c/xs:sequence\u003e\n      \u003cxs:attribute ref\u003d\"tns:GlobalAttribute1\"/\u003e\n    \u003c/xs:complexType\u003e\n  \u003c/xs:element\u003e\n  \n  \n\u003c/xs:schema\u003e\n\nand\n\n\u003cxs:schema xmlns:xs\u003d\"http://www.w3.org/2001/XMLSchema\"\n           elementFormDefault\u003d\"qualified\"\n           xmlns:tns\u003d\"http://sib.mfp.sdo/testOpenContent.xsd\"\n           targetNamespace\u003d\"http://sib.mfp.sdo/testOpenContent.xsd\"\u003e\n\u003c!-- Made up by Matt Lovett for the xsd tests --\u003e\n  \u003cxs:element name\u003d\"OpenElement1\"\u003e\n    \u003cxs:complexType\u003e\n      \u003cxs:sequence\u003e\n        \u003cxs:any/\u003e\n      \u003c/xs:sequence\u003e\n      \u003cxs:anyAttribute/\u003e\n    \u003c/xs:complexType\u003e\n  \u003c/xs:element\u003e\n  \u003cxs:element name\u003d\"OpenElement2\"\u003e\n    \u003cxs:complexType\u003e\n      \u003cxs:sequence\u003e\n        \u003cxs:element ref\u003d\"tns:OpenElement1\" minOccurs\u003d\"0\"/\u003e\n        \u003cxs:any namespace\u003d\"##other\"/\u003e\n      \u003c/xs:sequence\u003e\n      \u003cxs:anyAttribute/\u003e\n    \u003c/xs:complexType\u003e\n  \u003c/xs:element\u003e\n\u003c/xs:schema\u003e\n\nand here is the code I use to set the attribute:\n\n    DataObject temp \u003d graph.createRootObject\n(openContentNamespace, \"DocumentRoot\");\n\n    temp \u003d temp.createDataObject(\"openElement1\");\n    \n    Type root \u003d graph.getType(elementContentNamespace, \"\");\n    Property element1Property \u003d root.getProperty(\"globalElement1\");\n    \n    DataObject nested \u003d temp.createDataObject(element1Property);\n    nested.setString(\"string1\", \"value1\");\n    nested.setInt(\"integer1\", 1);\n\n    // Set a global attribute on the open element\n    Property attributeProperty \u003d root.getProperty(\"globalAttribute1\");\n    temp.setString(attributeProperty, \"attribute value\");\n\nThe code fails with the following stacktrace:\n\njava.lang.ClassCastException: java.lang.String\n       at org.eclipse.emf.ecore.util.BasicFeatureMap.set\n(BasicFeatureMap.java:943)\n       at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eOpenSet\n(BasicEObjectImpl.java:529)\n       at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eDynamicSet\n(BasicEObjectImpl.java:515)\n       at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eSet\n(BasicEObjectImpl.java:503)\n       at org.eclipse.emf.ecore.sdo.util.SDOUtil.set(SDOUtil.java:902)\n       at org.eclipse.emf.ecore.sdo.util.SDOUtil.setString(SDOUtil.java:657)\n       at org.eclipse.emf.ecore.sdo.impl.EDataObjectImpl.setString\n(EDataObjectImpl.java:1158)\n       at xsd.SimpleXSDTests.testOpenContent(SimpleXSDTests.java:149)\n       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n       at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:84)\n       at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:57)\n       at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:59)\n       at java.lang.reflect.Method.invoke(Method.java:390)\n       at junit.framework.TestCase.runTest(TestCase.java:154)\n       at com.ibm.js.test.LoggingTestCase.runTest(LoggingTestCase.java:271)\n       at junit.framework.TestCase.runBare(TestCase.java:127)\n       at junit.framework.TestResult$1.protect(TestResult.java:106)\n       at junit.framework.TestResult.runProtected(TestResult.java:124)\n       at junit.framework.TestResult.run(TestResult.java:109)\n       at junit.framework.TestCase.run(TestCase.java:118)\n       at junit.framework.TestSuite.runTest(TestSuite.java:208)\n       at junit.framework.TestSuite.run(TestSuite.java:203)\n       at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests\n(RemoteTestRunner.java:392)\n       at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run\n(RemoteTestRunner.java:276)\n       at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main\n(RemoteTestRunner.java:167)",
    "The mulitplicity of a attribute feature in an attribute wildcard should be \nisMany false; I\u0027ve committed to CVS the fix that will test for that properly.",
    "The fix is available in the latest build."
  ],
  "commentCreationDates": [
    "2004-05-19T18:09:58+02:00",
    "2004-05-20T15:04:40+02:00",
    "2004-05-20T18:59:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "java.lang.String",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.util.BasicFeatureMap.set",
          "source": "BasicFeatureMap.java:943"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eOpenSet",
          "source": "BasicEObjectImpl.java:529"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eDynamicSet",
          "source": "BasicEObjectImpl.java:515"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eSet",
          "source": "BasicEObjectImpl.java:503"
        },
        {
          "method": "org.eclipse.emf.ecore.sdo.util.SDOUtil.set",
          "source": "SDOUtil.java:902"
        },
        {
          "method": "org.eclipse.emf.ecore.sdo.util.SDOUtil.setString",
          "source": "SDOUtil.java:657"
        },
        {
          "method": "org.eclipse.emf.ecore.sdo.impl.EDataObjectImpl.setString",
          "source": "EDataObjectImpl.java:1158"
        },
        {
          "method": "xsd.SimpleXSDTests.testOpenContent",
          "source": "SimpleXSDTests.java:149"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:84"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:57"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:59"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:390"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "com.ibm.js.test.LoggingTestCase.runTest",
          "source": "LoggingTestCase.java:271"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:392"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:276"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main",
          "source": "RemoteTestRunner.java:167"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "62988",
      "date": "2004-05-19T18:09:58+02:00",
      "product": "EMF",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "62988",
  "bugId": "62988",
  "date": "2004-05-19T18:09:58+02:00",
  "product": "EMF",
  "component": "Core",
  "severity": "normal"
}