{
  "comments": [
    "I get 8 of these \"avoiding deadlock\"  errors while running I20060309-1000, on both win32 and linux-gtk.\n\nI\u0027ll attach my full log\n\n!SESSION 2006-03-14 07:18:01.682 -----------------------------------------------\neclipse.buildId\u003dI20060309-1000\njava.version\u003d1.4.2_08\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86\n\n!ENTRY org.eclipse.osgi 4 0 2006-03-14 07:18:30.767\n!MESSAGE While loading class \"org.eclipse.pde.internal.core.RequiredPluginsInitializer\", thread \"org.eclipse.jdt.internal.ui.text.JavaReconciler\" timed out waiting (5000ms) for thread \"org.eclipse.jdt.internal.ui.text.JavaReconciler\" to finish starting bundle \"org.eclipse.pde.core\". To avoid deadlock, thread \"org.eclipse.jdt.internal.ui.text.JavaReconciler\" is proceeding but \"org.eclipse.pde.internal.core.RequiredPluginsInitializer\" may not be fully initialized.\n!STACK 0\njava.lang.Exception: Generated exception.\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass(EclipseLazyStarter.java:75)\n\tat org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:402)\n\tat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:188)\n\tat org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:338)\n\tat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:390)\n\tat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:351)\n\tat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat org.eclipse.osgi.framework.internal.core.BundleLoader.loadClass(BundleLoader.java:276)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:227)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1245)\n\tat org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:144)\n\tat org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:759)\n\tat org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)\n\tat org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:51)\n\tat org.eclipse.jdt.core.JavaCore.computeClasspathContainerInitializer(JavaCore.java:1515)\n\tat org.eclipse.jdt.core.JavaCore.getClasspathContainerInitializer(JavaCore.java:1488)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:1813)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1258)\n\tat org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1465)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:2160)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:2064)\n\tat org.eclipse.jdt.internal.core.JavaProject.buildStructure(JavaProject.java:335)\n\tat org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:229)\n\tat org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:503)\n\tat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:247)\n\tat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:233)\n\tat org.eclipse.jdt.internal.core.JavaProject.getJavaProjectElementInfo(JavaProject.java:1626)\n\tat org.eclipse.jdt.internal.core.JavaProject.newNameLookup(JavaProject.java:2543)\n\tat org.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e(SearchableEnvironment.java:53)\n\tat org.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e(SearchableEnvironment.java:67)\n\tat org.eclipse.jdt.internal.core.CancelableNameEnvironment.\u003cinit\u003e(CancelableNameEnvironment.java:26)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:155)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:246)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:152)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:71)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:720)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:779)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1107)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:97)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:82)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:172)\n\tat org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)\n\tat org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:120)\n\tat org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:103)\n\tat org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:328)\n\tat org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:170)\n\nPW",
    "Created an attachment (id\u003d36223)\nerror log with threading complaints\n\n",
    "It seems to me that the problem is that two threads try to initialize the PDE container at the same time. ",
    "Created an attachment (id\u003d37319)\nLog with more errors\n\nGot about 20 more of these errors in the I20060330-0010 build on win32.\n\nWhile loading class \"org.eclipse.pde.internal.core.PDEStateHelper\", thread \"Worker-3\" timed out waiting (5000ms) for thread \"org.eclipse.jdt.internal.ui.text.JavaReconciler\" to finish starting bundle \"org.eclipse.pde.core\". To avoid deadlock, thread \"Worker-3\" is proceeding but \"org.eclipse.pde.internal.core.PDEStateHelper\" may not be fully initialized.\n\nPW\n",
    "Are you sure you\u0027re using I20060330-0010 ? According to the trace, you are at line 424 of PluginModelManager.java (\norg.eclipse.pde.internal.core.PluginModelManager.initializeTable(PluginModelManager.java:424)), but this line is a comment in this build.",
    "Ooops, I was reading it in that build, but the errors are from the I20060328-0010 build.\n\nPW\n",
    "haha, comment #5 is also wrong :-)  The log includes a session from this morning that is from the I20060330-0010 build.\n\n\n!SESSION 2006-03-30 08:30:34.224 -----------------------------------------------\neclipse.buildId\u003dI20060330-0010\njava.version\u003d1.5.0_05\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_CA\nCommand-line arguments:  -data C:\\eclipse\\workspaces\\bug128455 -os win32 -ws win32 -arch x86\n\n!ENTRY org.eclipse.osgi 4 0 2006-03-30 08:31:14.192\n!MESSAGE While loading class \"org.eclipse.pde.internal.core.RequiredPluginsInitializer\", thread \"Worker-3\" timed out waiting (5000ms) for thread \"org.eclipse.jdt.internal.ui.text.JavaReconciler\" to finish starting bundle \"org.eclipse.pde.core\". To avoid deadlock, thread \"Worker-3\" is proceeding but \"org.eclipse.pde.internal.core.RequiredPluginsInitializer\" may not be fully initialized.\n!STACK 0\njava.lang.Exception: Generated exception.\n\n",
    "Can you please post the whole stack traces from this morning ?",
    "They\u0027re all in the attachement 37319 \"Log with more errors\".\n\nLook for the session with !SESSION 2006-03-30 08:30:34.224\n\nLater,\nPW\n",
    "Moving to PDE since the timeout happened loading PDE classes. Might be a runtime problem though.",
    "Tom, comments?",
    "From the stack traces, it does look like multiple threads are attempting to load classes from pde.core and that is attempting to activate it at the same time.  It looks like the thread org.eclipse.jdt.internal.ui.text.JavaReconciler wins and is the first thread to start the pde.core bundle.  For some reason it looks like this thread is taking an extra long time to start pde.core\n\nWassim, do you know why pde.core would take so long to start?",
    "I do know why it\u0027s taking longer to initialize pde.core now.\n\nRight after 3.2M5, we moved the builders extension from org.eclipse.pde to pde.core, we moved some initialization code too.\n\nUnfortunately, a new call (fFeatureRebuilder.start();) was added to\n PDECore.start() \n\nThis call results in premature parsing of features, which accounts for the longer time for pdecore activation as well as the possibility for a deadlock.\n\nFixed and will be contributed to the rebuild."
  ],
  "commentCreationDates": [
    "2006-03-14T14:38:46+01:00",
    "2006-03-14T14:39:27+01:00",
    "2006-03-21T06:59:32+01:00",
    "2006-03-30T14:51:47+02:00",
    "2006-03-30T15:32:36+02:00",
    "2006-03-30T15:48:31+02:00",
    "2006-03-30T15:50:21+02:00",
    "2006-03-30T15:53:05+02:00",
    "2006-03-30T16:15:53+02:00",
    "2006-03-30T17:09:03+02:00",
    "2006-03-30T21:35:35+02:00",
    "2006-03-31T00:07:53+02:00",
    "2006-03-31T01:19:04+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Generated exception.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass",
          "source": "EclipseLazyStarter.java:75"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass",
          "source": "ClasspathManager.java:402"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass",
          "source": "DefaultClassLoader.java:188"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:338"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:390"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:351"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass",
          "source": "DefaultClassLoader.java:83"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:235"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.loadClass",
          "source": "BundleLoader.java:276"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.loadClass",
          "source": "BundleHost.java:227"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass",
          "source": "AbstractBundle.java:1245"
        },
        {
          "method": "org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension",
          "source": "RegistryStrategyOSGI.java:144"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension",
          "source": "ExtensionRegistry.java:759"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:243"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension",
          "source": "ConfigurationElementHandle.java:51"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.computeClasspathContainerInitializer",
          "source": "JavaCore.java:1515"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainerInitializer",
          "source": "JavaCore.java:1488"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer",
          "source": "JavaModelManager.java:1813"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer",
          "source": "JavaModelManager.java:1258"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:1465"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:2160"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:2064"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.buildStructure",
          "source": "JavaProject.java:335"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.generateInfos",
          "source": "Openable.java:229"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.openWhenClosed",
          "source": "JavaElement.java:503"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getElementInfo",
          "source": "JavaElement.java:247"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getElementInfo",
          "source": "JavaElement.java:233"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getJavaProjectElementInfo",
          "source": "JavaProject.java:1626"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.newNameLookup",
          "source": "JavaProject.java:2543"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e",
          "source": "SearchableEnvironment.java:53"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e",
          "source": "SearchableEnvironment.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CancelableNameEnvironment.\u003cinit\u003e",
          "source": "CancelableNameEnvironment.java:26"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process",
          "source": "CompilationUnitProblemFinder.java:155"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process",
          "source": "CompilationUnitProblemFinder.java:246"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent",
          "source": "ReconcileWorkingCopyOperation.java:152"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:71"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:779"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1107"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run",
          "source": "JavaReconcilingStrategy.java:97"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile",
          "source": "JavaReconcilingStrategy.java:172"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile",
          "source": "CompositeReconcilingStrategy.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile",
          "source": "JavaCompositeReconcilingStrategy.java:120"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess",
          "source": "MonoReconciler.java:103"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess",
          "source": "JavaReconciler.java:328"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:170"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "131701",
      "date": "2006-03-14T14:38:46+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "131701",
  "bugId": "131701",
  "date": "2006-03-14T14:38:46+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}