{
  "comments": [
    "I have a component I have defined with a factory:\n\n\u003cscr:component\n  xmlns:scr\u003d\"http://www.osgi.org/xmlns/scr/v1.0.0\"\n  xmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\"\n  name\u003d\"com.bea.core.adg\"\n  factory\u003d\"com.bea.core.adg\"\u003e\n  \u003cimplementation class\u003d\"com.bea.core.adg.internal.AcyclicalDirectedGraphImpl\"/\u003e\n  \u003cservice\u003e\n    \u003cprovide interface\u003d\"com.bea.core.adg.AcyclicalDirectedGraph\" /\u003e\n  \u003c/service\u003e\n  \n  \u003cproperty \n    name\u003d\"com.bea.core.adg.name\"\n    type\u003d\"String\"\n    value\u003d\"dag\"/\u003e\n\u003c/scr:component\u003e\n\nI have another component that is the \"manager\" for this factory:\n\n\u003cscr:component\n  xmlns:scr\u003d\"http://www.osgi.org/xmlns/scr/v1.0.0\"\n  xmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\"\n  name\u003d\"com.bea.core.adgFactory\"\n  immediate\u003d\"true\"\u003e\n  \u003cimplementation class\u003d\"com.bea.core.adg.internal.AcyclicalDirectedGraphManagerImpl\"/\u003e\n  \u003cservice\u003e\n    \u003cprovide interface\u003d\"com.bea.core.adg.AcyclicalDirectedGraphManager\" /\u003e\n  \u003c/service\u003e\n  \n  \u003creference name\u003d\"ComponentFactory\"\n    interface\u003d\"org.osgi.service.component.ComponentFactory\"\n    bind\u003d\"setComponentFactory\"\n    target\u003d\"(\u0026amp;(component.name\u003dcom.bea.core.adg)(component.factory\u003dcom.bea.core.adg))\"\n    /\u003e\n\u003c/scr:component\u003e\n\nWhen I call the \"create\" service in the com.bea.core.adgFactory it ends up calling the \"newInstance\" in order to create the first component (with a name value).\n\nWhat I am seeing is the component gets created OK, but it is getting created twice.  I have put println\u0027s before and after the newInstance call, and I have put println\u0027s in the \"activate\" call of the first component.  This is what I am seeing.  I will number the lines from the output:\n\n1.  JRW(10) factory before newInstance  \u003c-- println before newInstance call\n\n2.  INFO: Service REGISTERED: { com.bea.core.adg.name\u003dGood Graph, component.factory\u003d com.bea.core.adg, component.name\u003dcom.bea.core.adg, component.id\u003d3, objectClass\u003d[ Ljava.lang.String;@d70d7a, service.id\u003d10 }  \u003c-- from the framework\n\n3.  JRW(10) activation of name Good Graph with id 11240763 \u003c-- activate println\n\n4. JRW(10) gt setting graph to 11240763 \u003c-- dependency getting injected in test (using ServiceTracker)\n\n5.  JRW(10) activation of name Good Graph with id 12067688 \u003c-- ?println? again?\n\n6.  JRW(20) factory after newInstance \u003c-- println after newInstance call\n\nLine 5 is the strange one (and causing me problems)!  Why am I getting the second activation?  Is it a bug in the implementation, or is there something I am not understanding about the specification?  I do *not* think this is a dummy service (since this is using the factory pattern).\n\nAny help would be appreciated.",
    "Please post a test case with actual code.",
    "Created an attachment (id\u003d35207)\nThe source code and binaries to reproduce\n\nSee the readme file in the root of this ZIP file for a description of the contents.  I do *not* think there is enough in this ZIP to build from only the ZIP file, but there *is* enough there to make two Eclipse plugin projects.\n\nFurthermore, there is the test run outputs that show the problem.\n\nAll I have to do is call \"DSFactory.newInstance\" and put a println in the activator of the component to see that two objects are created and activated.  This is obviously a problem if the activator does something silly like open a network port!",
    "Do you have enough information here?  I was hoping there was something quick to fix this.  I guess I could try to debug the code myself, but I was hoping not to...\n\nI\u0027m now getting feedback on my side about when it is going to be fixed!",
    "Hey, this bug is killing us now.  We have a fairly large infrastructe using DS, but this bug keeps biting us.  There are now those in the company who want us to completely jettison DS because of this.\n\nHere is a little more information too:\n\nSometimes, the object that is returned from ComponentInstance.getInstance is different from what another bundle gets when they use normal OSGi reference lookups with their bundle context!!!\n\nIs there anything more I can do to help diagnose this problem?",
    "Here is the stack from one creation:\n\njava.lang.Exception: Stack trace\n\tat java.lang.Thread.dumpStack(Thread.java:1158)\n\tat com.bea.core.namedEcho.internal.NamedEchoServiceImpl.activate(NamedEchoServiceImpl.java:59)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.invokeMethod(InvokeMethod.java:144)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.activateComponent(InvokeMethod.java:60)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.activate(BuildDispose.java:672)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.buildComponentConfigInstance(BuildDispose.java:122)\n\tat org.eclipse.equinox.ds.instance.RegisterComponentService$2.getService(RegisterComponentService.java:123)\n\tat org.eclipse.osgi.framework.internal.core.ServiceUse$1.run(ServiceUse.java:108)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.ServiceUse.getService(ServiceUse.java:106)\n\tat org.eclipse.osgi.framework.internal.core.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:348)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.getService(BundleContextImpl.java:879)\n\tat com.bea.core.dioce.internal.ServiceDioce$Tracker.addingService(ServiceDioce.java:149)\n\tat org.osgi.util.tracker.ServiceTracker$Tracked.trackAdding(ServiceTracker.java:1011)\n\tat org.osgi.util.tracker.ServiceTracker$Tracked.track(ServiceTracker.java:989)\n\tat org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:925)\n\tat org.eclipse.osgi.framework.internal.core.FilteredServiceListener.serviceChanged(FilteredServiceListener.java:55)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:1219)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)\n\tat org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:141)\n\tat org.eclipse.osgi.framework.internal.core.Framework.publishServiceEventPrivileged(Framework.java:1526)\n\tat org.eclipse.osgi.framework.internal.core.Framework.publishServiceEvent(Framework.java:1501)\n\tat org.eclipse.osgi.framework.internal.core.ServiceRegistrationImpl.\u003cinit\u003e(ServiceRegistrationImpl.java:103)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.createServiceRegistration(BundleContextImpl.java:649)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.registerService(BundleContextImpl.java:601)\n\tat org.eclipse.equinox.ds.instance.RegisterComponentService.registerService(RegisterComponentService.java:102)\n\tat org.eclipse.equinox.ds.instance.InstanceProcess.registerComponentConfigs(InstanceProcess.java:149)\n\tat org.eclipse.equinox.ds.service.ComponentFactoryImpl.newInstance(ComponentFactoryImpl.java:80)\n\tat com.bea.core.namedEcho.internal.NamedEchoManagerImpl.createNamedEchoService(NamedEchoManagerImpl.java:42)\n\tat com.bea.core.namedEcho.test.NamedEchoTest.testNamedEcho(NamedEchoTest.java:101)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestCase(JUnitServiceImpl.java:152)\n\tat org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestXML(JUnitServiceImpl.java:74)\n\tat org.knopflerfish.bundle.junit.JUnitServiceImpl.runTest(JUnitServiceImpl.java:54)\n\tat org.knopflerfish.bundle.junit_runner.Grunt.doRun(Grunt.java:186)\n\tat org.knopflerfish.bundle.junit_runner.Grunt.doGrunt(Grunt.java:74)\n\tat org.knopflerfish.bundle.junit_runner.Activator.start(Activator.java:57)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:994)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:988)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:969)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:314)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:329)\n\tat org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1037)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:573)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:495)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:455)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)\n",
    "Here is the stack from the second creation:\n\njava.lang.Exception: Stack trace\n\tat java.lang.Thread.dumpStack(Thread.java:1158)\n\tat com.bea.core.namedEcho.internal.NamedEchoServiceImpl.activate(NamedEchoServiceImpl.java:59)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.invokeMethod(InvokeMethod.java:144)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.activateComponent(InvokeMethod.java:60)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.activate(BuildDispose.java:672)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.buildComponentConfigInstance(BuildDispose.java:122)\n\tat org.eclipse.equinox.ds.service.ComponentFactoryImpl.newInstance(ComponentFactoryImpl.java:89)\n\tat com.bea.core.namedEcho.internal.NamedEchoManagerImpl.createNamedEchoService(NamedEchoManagerImpl.java:42)\n\tat com.bea.core.namedEcho.test.NamedEchoTest.testNamedEcho(NamedEchoTest.java:101)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestCase(JUnitServiceImpl.java:152)\n\tat org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestXML(JUnitServiceImpl.java:74)\n\tat org.knopflerfish.bundle.junit.JUnitServiceImpl.runTest(JUnitServiceImpl.java:54)\n\tat org.knopflerfish.bundle.junit_runner.Grunt.doRun(Grunt.java:186)\n\tat org.knopflerfish.bundle.junit_runner.Grunt.doGrunt(Grunt.java:74)\n\tat org.knopflerfish.bundle.junit_runner.Activator.start(Activator.java:57)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:994)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:988)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:969)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:314)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:329)\n\tat org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1037)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:573)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:495)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:455)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:189)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:291)",
    "The difference in the stacks starts with this:\n\nIn the first creation, the component is being created here:\n\nat org.eclipse.equinox.ds.instance.RegisterComponentService$2.getService (RegisterComponentService.java:123)\n\nIn the second create, the component is being created here:\n\nat org.eclipse.equinox.ds.service.ComponentFactoryImpl.newInstance (ComponentFactoryImpl.java:89)\n\nSeems like there is some sort of unresolved issue between ComponentFactory.newInstance and the DS stuff monitoring the state of the services.\n\nI guess I\u0027m either going to have to start debugging DS myself (please don\u0027t make me) or find some other way around this problem.\n",
    "Created an attachment (id\u003d37244)\nSimpler Reproducer\n\nSimpler reproducer",
    "The simpler reproducer is, well, simpler.  It has only two bundles (of importance).\n\nThe trick to reproduction (I found) is to have a ServiceTracker also tracking the service which the DS ComponentFactory will create.  If you do that then the activator is always called twice.\n\nIn the zip file are ExampleComponent, which is a component that does nothing more than print its hashCode in the activator and dump a stack.  It is a DS factory component.\n\nThere is also a Driver.  The driver depends on the ComponentFactory which will be advertised by the ExampleComponent.  It sets itself up as a ServiceTracker for the ExampleComponent and then creates a new ExampleComponent with the ComponentFactory.newInstance() method.\n\nIn this case DS starts the ExampmleComponent twice, and also causes the gracefull shutdown of the framework to hang.",
    "Created an attachment (id\u003d37321)\nThis patch fixes the multi-activate problem\n\n",
    "Thanks for the patch.  We will take a look at it.",
    "I reviewed the patch. It was in the right area but didn\u0027t really solve the race condition. \n\nI made a change which ensured that the instance was created before the service was registered. This made sure both the code getting the service and the code creating the instance received the same object.\n\nWhen the fix was run against the provided test case, the following output was produced which indicated only a single instance was created.\n\nConstructor called in Driver 471604252\nSTART Create of ExampleComponent in Driver(471604252)\nConstructor for example component called for 1570266520\nStarting to dump stack in object ExampleComponent(1570266520)\njava.lang.Throwable\n\tat java.lang.Thread.dumpStack(Thread.java:432)\n\tat example.ExampleComponent.activate(ExampleComponent.java:21)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.invokeMethod(InvokeMethod.java:144)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.activateComponent(InvokeMethod.java:60)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.activate(BuildDispose.java:672)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.buildComponentConfigInstance(BuildDispose.java:122)\n\tat org.eclipse.equinox.ds.instance.InstanceProcess.registerComponentConfigs(InstanceProcess.java:145)\n\tat org.eclipse.equinox.ds.service.ComponentFactoryImpl.newInstance(ComponentFactoryImpl.java:80)\n\tat driver.Driver.activate(Driver.java:50)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)Finished dumping stack in object ExampleComponent(1570266520)\n\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.invokeMethod(InvokeMethod.java:144)\n\tat org.eclipse.equinox.ds.instance.InvokeMethod.activateComponent(InvokeMethod.java:60)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.activate(BuildDispose.java:672)\n\tat org.eclipse.equinox.ds.instance.BuildDispose.buildComponentConfigInstance(BuildDispose.java:122)\n\tat org.eclipse.equinox.ds.instance.InstanceProcess.registerComponentConfigs(InstanceProcess.java:145)\n\tat org.eclipse.equinox.ds.resolver.Resolver.dispatchWork(Resolver.java:701)\n\tat org.eclipse.equinox.ds.workqueue.WorkQueue$Queued.dispatch(WorkQueue.java:57)\n\tat org.eclipse.equinox.ds.workqueue.WorkQueue.run(WorkQueue.java:108)\nDriver: adding service in Driver(471604252)\nFINISH Create of ExampleComponent in Driver(471604252)\nDriver: The example instance is ExampleComponent(1570266520)\n",
    "Marking milestone for the fix."
  ],
  "commentCreationDates": [
    "2006-02-22T21:07:47+01:00",
    "2006-02-22T22:09:39+01:00",
    "2006-02-23T01:34:08+01:00",
    "2006-02-24T17:39:00+01:00",
    "2006-03-29T12:57:01+02:00",
    "2006-03-29T20:16:33+02:00",
    "2006-03-29T20:17:27+02:00",
    "2006-03-29T20:27:08+02:00",
    "2006-03-29T22:27:26+02:00",
    "2006-03-29T22:31:50+02:00",
    "2006-03-30T15:07:19+02:00",
    "2006-03-30T18:06:29+02:00",
    "2006-04-08T06:33:09+02:00",
    "2006-04-08T17:20:04+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Stack trace",
      "elements": [
        {
          "method": "java.lang.Thread.dumpStack",
          "source": "Thread.java:1158"
        },
        {
          "method": "com.bea.core.namedEcho.internal.NamedEchoServiceImpl.activate",
          "source": "NamedEchoServiceImpl.java:59"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.InvokeMethod.invokeMethod",
          "source": "InvokeMethod.java:144"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.InvokeMethod.activateComponent",
          "source": "InvokeMethod.java:60"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.BuildDispose.activate",
          "source": "BuildDispose.java:672"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.BuildDispose.buildComponentConfigInstance",
          "source": "BuildDispose.java:122"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.RegisterComponentService$2.getService",
          "source": "RegisterComponentService.java:123"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceUse$1.run",
          "source": "ServiceUse.java:108"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceUse.getService",
          "source": "ServiceUse.java:106"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceRegistrationImpl.getService",
          "source": "ServiceRegistrationImpl.java:348"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.getService",
          "source": "BundleContextImpl.java:879"
        },
        {
          "method": "com.bea.core.dioce.internal.ServiceDioce$Tracker.addingService",
          "source": "ServiceDioce.java:149"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker$Tracked.trackAdding",
          "source": "ServiceTracker.java:1011"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker$Tracked.track",
          "source": "ServiceTracker.java:989"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged",
          "source": "ServiceTracker.java:925"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FilteredServiceListener.serviceChanged",
          "source": "FilteredServiceListener.java:55"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1219"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous",
          "source": "ListenerQueue.java:141"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.publishServiceEventPrivileged",
          "source": "Framework.java:1526"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.publishServiceEvent",
          "source": "Framework.java:1501"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceRegistrationImpl.\u003cinit\u003e",
          "source": "ServiceRegistrationImpl.java:103"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.createServiceRegistration",
          "source": "BundleContextImpl.java:649"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.registerService",
          "source": "BundleContextImpl.java:601"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.RegisterComponentService.registerService",
          "source": "RegisterComponentService.java:102"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.InstanceProcess.registerComponentConfigs",
          "source": "InstanceProcess.java:149"
        },
        {
          "method": "org.eclipse.equinox.ds.service.ComponentFactoryImpl.newInstance",
          "source": "ComponentFactoryImpl.java:80"
        },
        {
          "method": "com.bea.core.namedEcho.internal.NamedEchoManagerImpl.createNamedEchoService",
          "source": "NamedEchoManagerImpl.java:42"
        },
        {
          "method": "com.bea.core.namedEcho.test.NamedEchoTest.testNamedEcho",
          "source": "NamedEchoTest.java:101"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestCase",
          "source": "JUnitServiceImpl.java:152"
        },
        {
          "method": "org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestXML",
          "source": "JUnitServiceImpl.java:74"
        },
        {
          "method": "org.knopflerfish.bundle.junit.JUnitServiceImpl.runTest",
          "source": "JUnitServiceImpl.java:54"
        },
        {
          "method": "org.knopflerfish.bundle.junit_runner.Grunt.doRun",
          "source": "Grunt.java:186"
        },
        {
          "method": "org.knopflerfish.bundle.junit_runner.Grunt.doGrunt",
          "source": "Grunt.java:74"
        },
        {
          "method": "org.knopflerfish.bundle.junit_runner.Activator.start",
          "source": "Activator.java:57"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextImpl.java:994"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:988"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:969"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:314"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.resume",
          "source": "AbstractBundle.java:329"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.resumeBundle",
          "source": "Framework.java:1037"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles",
          "source": "StartLevelManager.java:573"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL",
          "source": "StartLevelManager.java:495"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
          "source": "StartLevelManager.java:275"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent",
          "source": "StartLevelManager.java:455"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:291"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "129055",
      "date": "2006-03-29T20:16:33+02:00",
      "product": "Equinox",
      "component": "Bundles",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.Exception",
      "message": "Stack trace",
      "elements": [
        {
          "method": "java.lang.Thread.dumpStack",
          "source": "Thread.java:1158"
        },
        {
          "method": "com.bea.core.namedEcho.internal.NamedEchoServiceImpl.activate",
          "source": "NamedEchoServiceImpl.java:59"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.InvokeMethod.invokeMethod",
          "source": "InvokeMethod.java:144"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.InvokeMethod.activateComponent",
          "source": "InvokeMethod.java:60"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.BuildDispose.activate",
          "source": "BuildDispose.java:672"
        },
        {
          "method": "org.eclipse.equinox.ds.instance.BuildDispose.buildComponentConfigInstance",
          "source": "BuildDispose.java:122"
        },
        {
          "method": "org.eclipse.equinox.ds.service.ComponentFactoryImpl.newInstance",
          "source": "ComponentFactoryImpl.java:89"
        },
        {
          "method": "com.bea.core.namedEcho.internal.NamedEchoManagerImpl.createNamedEchoService",
          "source": "NamedEchoManagerImpl.java:42"
        },
        {
          "method": "com.bea.core.namedEcho.test.NamedEchoTest.testNamedEcho",
          "source": "NamedEchoTest.java:101"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestCase",
          "source": "JUnitServiceImpl.java:152"
        },
        {
          "method": "org.knopflerfish.bundle.junit.JUnitServiceImpl.runTestXML",
          "source": "JUnitServiceImpl.java:74"
        },
        {
          "method": "org.knopflerfish.bundle.junit.JUnitServiceImpl.runTest",
          "source": "JUnitServiceImpl.java:54"
        },
        {
          "method": "org.knopflerfish.bundle.junit_runner.Grunt.doRun",
          "source": "Grunt.java:186"
        },
        {
          "method": "org.knopflerfish.bundle.junit_runner.Grunt.doGrunt",
          "source": "Grunt.java:74"
        },
        {
          "method": "org.knopflerfish.bundle.junit_runner.Activator.start",
          "source": "Activator.java:57"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextImpl.java:994"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:988"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:969"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:314"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.resume",
          "source": "AbstractBundle.java:329"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.resumeBundle",
          "source": "Framework.java:1037"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles",
          "source": "StartLevelManager.java:573"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL",
          "source": "StartLevelManager.java:495"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
          "source": "StartLevelManager.java:275"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent",
          "source": "StartLevelManager.java:455"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run",
          "source": "EventManager.java:291"
        }
      ],
      "number": 1,
      "commentIndex": 6,
      "bugId": "129055",
      "date": "2006-03-29T20:17:27+02:00",
      "product": "Equinox",
      "component": "Bundles",
      "severity": "normal"
    }
  ],
  "groupId": "129055",
  "bugId": "129055",
  "date": "2006-02-22T21:07:47+01:00",
  "product": "Equinox",
  "component": "Bundles",
  "severity": "normal"
}