{
  "comments": [
    "Here\u0027s my setup:\n - latest 3.0.1 build (M20040908)\n - large number of projects in my workspace (i.e. all of Eclipse loaded from \nthe repository)\n - latest IBM VM and JXE support\n\nI changed the encoding on the Editors preference page and clicked OK. There\u0027s \nwas a fairly long (probably in the order of a minute) delay where there was \nsomething going on but there was no progress indication. At first, Eclipse was \ntotally frozen (i.e. I could not even move the mouse). The preferences dialog \nremained open with OK diabled but Cancel enabled. Once the mouse was movable \nagain, there was a busy cursor when the mouse was over the workbench but not \nwhen the mouse was over the preferences dialog. Eventually the dialog closed \nand a build was launched.\n\nI don\u0027t know what changing the encoding involves but clearly there is some \npretty intensive work that is happening inside a busy cursor. Either this \nshould be done in a progress dialog or a background job.",
    "Created an attachment (id\u003d14465)\nScreen shot of blocked operation\n\nI tried it a second time and didn\u0027t get the intial freeze. I then clicked\ncancel which closed the preferences dialog but then resulted in an operation\nblocked dialog which is shown in the attachment (i.e. the build from the\noriginal change was still happening). It appears the cancel did not actually\ncancel everything.",
    "I then manually cancelled the second job in the dialog and got an error dialog \nand the following trace in the log:\n\norg.eclipse.core.runtime.OperationCanceledException\nat org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:147)\nat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)\nat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:170)\nat org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:95)\nat org.eclipse.core.internal.resources.Workspace.prepareOperation\n(Workspace.java:1628)\nat org.eclipse.core.internal.resources.Container.setDefaultCharset\n(Container.java:267)\nat org.eclipse.ui.internal.ide.dialogs.IDEEditorsPreferencePage.performOk\n(IDEEditorsPreferencePage.java:214)\nat org.eclipse.jface.preference.PreferenceDialog$11.run\n(PreferenceDialog.java:746)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:616)\nat org.eclipse.core.runtime.Platform.run(Platform.java:747)\nat org.eclipse.jface.preference.PreferenceDialog.okPressed\n(PreferenceDialog.java:728)\nat org.eclipse.jface.preference.PreferenceDialog.buttonPressed\n(PreferenceDialog.java:199)\nat org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.buttonPressed\n(WorkbenchPreferenceDialog.java:75)\nat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:506)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\nat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\nat org.eclipse.jface.window.Window.open(Window.java:648)\nat org.eclipse.ui.internal.OpenPreferencesAction.run\n(OpenPreferencesAction.java:72)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:915)\nat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:866)\nat org.eclipse.jface.action.ActionContributionItem$7.handleEvent\n(ActionContributionItem.java:785)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:335)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\nat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\nat java.lang.reflect.Method.invoke(Method.java:391)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\nat org.eclipse.core.launcher.Main.run(Main.java:684)\nat org.eclipse.core.launcher.Main.main(Main.java:668)\n",
    "This is because the encoding should be set in the background",
    "I have now moved the encoding setting to a job which provides both progress \nand responsiveness.",
    "Tod, just to make sure, your fix affects both preferences and resource\nproperties dialogs, right? Changing encoding for projects, folders and files can\nbecome very long operations as well.",
    "Not yet - I am going to generalize the encoding portion of the preference page \nand use it in the ResourceInfoPage too - see Bug 56957",
    "Verified in build 200409210800"
  ],
  "commentCreationDates": [
    "2004-09-09T16:53:41+02:00",
    "2004-09-09T16:56:10+02:00",
    "2004-09-09T16:57:33+02:00",
    "2004-09-09T21:39:57+02:00",
    "2004-09-09T23:24:42+02:00",
    "2004-09-10T20:42:22+02:00",
    "2004-09-10T21:14:21+02:00",
    "2004-09-21T17:08:44+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.OperationCanceledException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.joinRun",
          "source": "ThreadJob.java:147"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:87"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:170"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:95"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1628"
        },
        {
          "method": "org.eclipse.core.internal.resources.Container.setDefaultCharset",
          "source": "Container.java:267"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.IDEEditorsPreferencePage.performOk",
          "source": "IDEEditorsPreferencePage.java:214"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog$11.run",
          "source": "PreferenceDialog.java:746"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:616"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog.okPressed",
          "source": "PreferenceDialog.java:728"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog.buttonPressed",
          "source": "PreferenceDialog.java:199"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.buttonPressed",
          "source": "WorkbenchPreferenceDialog.java:75"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:506"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2772"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2431"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:72"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:915"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:866"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionContributionItem.java:785"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2772"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2431"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:684"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:668"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "73556",
      "date": "2004-09-09T16:57:33+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "73556",
  "bugId": "73556",
  "date": "2004-09-09T16:53:41+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}