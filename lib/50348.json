{
  "comments": [
    "I\u0027m trying to build a bunch of plugins, but during building I get an error \ndialog saying:\n\n\"Internal error: null\".\n\nI\u0027m assuming you won\u0027t be able to reproduce this, but I thought you should at \nleast know it\u0027s happening. Here\u0027s my .log file. The first exception I get on \nstartup.\n\n!SESSION ----------------------------------------------------------------------\n!ENTRY org.eclipse.core.launcher 4 0 Jan 21, 2004 14:18:58.661\n!MESSAGE Exception launching the Eclipse Platform:\n!STACK\njava.lang.ArrayIndexOutOfBoundsException: 0\n\tat org.eclipse.core.internal.runtime.PlatformActivator.stopLegacyBundles\n(PlatformActivator.java:254)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:237)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n\tat org.eclipse.core.launcher.Main.run(Main.java:742)\n\tat org.eclipse.core.launcher.Main.main(Main.java:581)\n\n!SESSION Jan 21, 2004 14:21:48.470 ---------------------------------------------\njava.version\u003d1.4.2_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -os win32 -ws win32 -arch x86\n!ENTRY org.eclipse.core.runtime 4 2 Jan 21, 2004 14:21:48.470\n!MESSAGE Problems occurred when invoking code from plug-\nin: \"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.core.internal.events.BuildManager$2.run\n(BuildManager.java:496)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:457)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:138)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:209)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:164)\n\tat org.eclipse.core.internal.events.BuildManager$1.run\n(BuildManager.java:190)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:457)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:193)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuildLoop\n(BuildManager.java:227)\n\tat org.eclipse.core.internal.events.BuildManager.build\n(BuildManager.java:255)\n\tat org.eclipse.core.internal.resources.Workspace.build\n(Workspace.java:165)\n\tat org.eclipse.ui.actions.GlobalBuildAction$1.run\n(GlobalBuildAction.java:184)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)\n!ENTRY org.eclipse.core.runtime 4 2 Jan 21, 2004 14:21:48.486\n!MESSAGE Problems occurred when invoking code from plug-\nin: \"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:144)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:209)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:164)\n\tat org.eclipse.core.internal.events.BuildManager$1.run\n(BuildManager.java:190)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:457)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:193)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuildLoop\n(BuildManager.java:227)\n\tat org.eclipse.core.internal.events.BuildManager.build\n(BuildManager.java:255)\n\tat org.eclipse.core.internal.resources.Workspace.build\n(Workspace.java:165)\n\tat org.eclipse.ui.actions.GlobalBuildAction$1.run\n(GlobalBuildAction.java:184)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)\n!ENTRY org.eclipse.ui.ide 4 4 Jan 21, 2004 14:21:48.564\n!MESSAGE Exception in org.eclipse.ui.actions.GlobalBuildAction.run: \njava.lang.NullPointerException",
    "\nHere\u0027s the build number. Let me know if there\u0027s anything else.\n200312182000\n",
    "The NPE\u0027s in build are a duplicate of bug 43957.  We have not had a reproducible\ntest case for this, so please add any further details you can to bug 43957.\n\nI will move this bug to Equinxo for the ArrayIndexOutOfBoundsException",
    "Orinal summary: \"\"Internal error: null\" while building\"\n\nIn the mentioned build (3.0 M6), the revision for PlatformActivator was 1.13.\nThe exception happened in the following code:\n\nprotected void stopLegacyBundles(BundleContext context) {\n  IExtensionPoint shutdownHooksExtPt \u003d\nregistry.getExtensionPoint(IPlatform.PI_RUNTIME, IPlatform.PT_SHUTDOWN_HOOK);\n  IExtension[] shutdownHooksExts \u003d shutdownHooksExtPt.getExtensions();\n  for (int i \u003d 0; i \u003c shutdownHooksExts.length; i++) {\n    if\n(!shutdownHooksExts[i].getParentIdentifier().equals(IPlatform.PI_RUNTIME_COMPATIBILITY))\n      continue;\n    IConfigurationElement[] configEls \u003d\nshutdownHooksExts[i].getConfigurationElements();\n    try {\n      // ArrayIndexOutOfBoundsException in the array access below\n      IShutdownHook shutdownHook \u003d (IShutdownHook)\nconfigEls[0].createExecutableExtension(\"run\"); //$NON-NLS-1$\n      shutdownHook.run();\n    } catch (CoreException e) {\t\t\t\nInternalPlatform.getDefault().getLog(context.getBundle()).log(e.getStatus());\n    }\n    // we expect only one shut down hook contributor (if any)\n    break;\n  }\n}\n\nIn this code, we assume that there will be one configuration element in the\nextension contributed by the runtime.compatibility plugin to the shutdown hook\nextension point, what should always be true, anyway.\n\nSo, for some reason (and that is the problem here), the extension does not\ncontain the configuration element it was supposed to contain. Bug 50378 also\nreports invalid data being provided by the registry.",
    "I believe my problem may have been caused by a lack of memory for the VM. I was \nbuilding a large number of plugins, and later on I received some out-of-memory \nerrors.\n",
    "*** Bug 50973 has been marked as a duplicate of this bug. ***",
    "Curtis, do you use to start two instances of the same Eclipse install\nsimultaneously? We have an outstanding issue related to that: bug 49112.",
    "No, only one instance.\n",
    "I could observe once that unexplicably stopLegacyBundles wasn\u0027t even called\n(maybe was not the extension found in the registry?), so user plugins were\nstopped at a random order (by the StartLevel service), causing NPEs.",
    "\nI\u0027m now reproducing this bug consistently using M7. I simply try to build the \nHyades plugins from CVS. I\u0027m using the workbench, which includes M7, as well as \nEMF (including XSD runtime) and GEF. These are required to build Hyades. Then, \nconnect to dev.eclipse.org /home/tools, check out:\n\n(you might want to enable SSH2 since it\u0027s faster and there is a lot to check \nout)\n\norg.apache.jakarta_oro\norg.eclipse.hyades.*\n\nYou can skip all the *-feature, nl1, and nls1 plugins. If you get a problem \nbuilding org.eclipse.hyades.logging.java14, try PDE Tools-\u003e Update classpath. \nIf you don\u0027t get any errors, try rebuild all. It happens every time for me.\n\nHope this helps..\n",
    "Is this a description of how to reproduce this bug (The\nArrayIndexOutOfBoundsException while shutting down) or bug 43957 (the NPE from\nBuildManager)? If it is the latter, please re-add your comment to that bug.",
    "My mistake, this is for the NPEs. I will repost to that bug.",
    "Is this still happening?\n",
    "Bundle stopping is now done in somewhere else, using a different mechanism, so\nwe could say that it will not happen again (in the context of stopping legacy\nbundles). Since nobody else is seeing this with their own extension points, I\nwould say this can be closed.",
    "Closing since not reproducible in the new code.",
    "Closing bug."
  ],
  "commentCreationDates": [
    "2004-01-21T19:35:30+01:00",
    "2004-01-21T19:37:09+01:00",
    "2004-01-22T17:28:50+01:00",
    "2004-01-23T15:53:15+01:00",
    "2004-01-23T15:58:09+01:00",
    "2004-01-30T15:44:34+01:00",
    "2004-02-02T16:27:31+01:00",
    "2004-02-02T16:41:02+01:00",
    "2004-02-06T15:31:23+01:00",
    "2004-02-18T20:17:05+01:00",
    "2004-02-18T20:32:57+01:00",
    "2004-02-18T20:43:13+01:00",
    "2004-03-22T21:33:34+01:00",
    "2004-03-22T21:39:25+01:00",
    "2004-03-23T19:30:55+01:00",
    "2004-04-01T16:39:44+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator.stopLegacyBundles",
          "source": "PlatformActivator.java:254"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:237"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "50348",
      "date": "2004-01-21T19:35:30+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:496"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:138"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:209"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:164"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:190"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:193"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:227"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:255"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.build",
          "source": "Workspace.java:165"
        },
        {
          "method": "org.eclipse.ui.actions.GlobalBuildAction$1.run",
          "source": "GlobalBuildAction.java:184"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "50348",
      "date": "2004-01-21T19:35:30+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:144"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:209"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:164"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:190"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:193"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:227"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:255"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.build",
          "source": "Workspace.java:165"
        },
        {
          "method": "org.eclipse.ui.actions.GlobalBuildAction$1.run",
          "source": "GlobalBuildAction.java:184"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "50348",
      "date": "2004-01-21T19:35:30+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "50348",
  "bugId": "50348",
  "date": "2004-01-21T19:35:30+01:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}