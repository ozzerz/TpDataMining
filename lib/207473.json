{
  "comments": [
    "Build ID: europa\n\nSteps To Reproduce:\n1. Have a triage project with JEE War, Ear and utility jar + java project\n2. Over time I get alot of classcastexceptions (that seem to be ignored and only logged at trace level) in AppClientBinaryComponentHelper.\n\nThe exception is: \njava.lang.ClassCastException: org.eclipse.jst.j2ee.internal.componentcore.UtilityBinaryComponentHelper$ReferenceCountedArchiveImpl\n    \tat org.eclipse.jst.j2ee.internal.componentcore.AppClientBinaryComponentHelper.getPrimaryRootObject(AppClientBinaryComponentHelper.java:110)\n    \tat org.eclipse.wst.common.componentcore.ArtifactEdit.getContentModelRoot(ArtifactEdit.java:540)\n    \tat org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createBinaryModules(JEEDeployableFactory.java:159)\n    \tat org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createModuleDelegates(JEEDeployableFactory.java:99)\n    \tat org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createModules(JEEDeployableFactory.java:73)\n    \tat org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createModules(JEEDeployableFactory.java:62)\n    \tat org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.cacheModules(ProjectModuleFactoryDelegate.java:60)\n    \tat org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.getModules(ProjectModuleFactoryDelegate.java:257)\n    \tat org.eclipse.wst.server.core.internal.ModuleFactory.getModules(ModuleFactory.java:131)\n    \tat org.eclipse.wst.server.core.ServerUtil.getModules(ServerUtil.java:97)\n    \tat org.eclipse.wst.server.core.ServerUtil.getModule(ServerUtil.java:68)\n    \tat org.eclipse.wst.server.ui.internal.ServerPropertyTester.checkProperty(ServerPropertyTester.java:42)\n    \tat org.eclipse.wst.server.ui.internal.ServerPropertyTester.test(ServerPropertyTester.java:33)\n    \tat org.eclipse.core.internal.expressions.Property.test(Property.java:58)\n    \tat org.eclipse.core.internal.expressions.TestExpression.evaluate(TestExpression.java:98)\n    \tat org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:53)\n    \tat org.eclipse.core.internal.expressions.IterateExpression.evaluate(IterateExpression.java:150)\n    \tat org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:53)\n    \tat org.eclipse.core.internal.expressions.WithExpression.evaluate(WithExpression.java:69)\n    \tat org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:53)\n    \tat org.eclipse.core.internal.expressions.EnablementExpression.evaluate(EnablementExpression.java:43)\n    \tat org.eclipse.debug.internal.ui.launchConfigurations.LaunchShortcutExtension.evalEnablementExpression(LaunchShortcutExtension.java:282)\n    \tat org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.getApplicableConfigurationTypes(LaunchConfigurationManager.java:720)\n    \tat org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.getApplicableLaunchConfigurations(LaunchConfigurationManager.java:753)\n    \tat org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.getResourceLabel(LaunchingResourceManager.java:303)\n    \tat org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.computeLabels(LaunchingResourceManager.java:207)\n    \tat org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager$2.run(LaunchingResourceManager.java:125)\n    \tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\n\n\nMore information:\nLooks like a shortcut extension is triggering an evaluation that will always trigger this classcast.",
    "Moving to correct component.",
    "Jason- the problem is that AppClientBinaryComponentHelper.getPrimaryRootObject() tries to cast the getArchive() results as an ApplicationClientFile, but getArchive() returns a UtilityBinaryComponentHelper$ReferenceCountedArchiveImpl, which is not an ApplicationClientFile.",
    "Can you attach an example?  Either an EAR I could import, or a zipped up workspace would be ideal.",
    "Exceptions throws if there is a jar declared in application.xml as \u003cmodule\u003e without deployment descriptor in it."
  ],
  "commentCreationDates": [
    "2007-10-25T17:32:57+02:00",
    "2007-10-25T19:12:21+02:00",
    "2007-11-01T23:41:42+01:00",
    "2007-11-02T16:02:03+01:00",
    "2007-11-05T02:17:58+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jst.j2ee.internal.componentcore.UtilityBinaryComponentHelper$ReferenceCountedArchiveImpl",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.componentcore.AppClientBinaryComponentHelper.getPrimaryRootObject",
          "source": "AppClientBinaryComponentHelper.java:110"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.ArtifactEdit.getContentModelRoot",
          "source": "ArtifactEdit.java:540"
        },
        {
          "method": "org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createBinaryModules",
          "source": "JEEDeployableFactory.java:159"
        },
        {
          "method": "org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createModuleDelegates",
          "source": "JEEDeployableFactory.java:99"
        },
        {
          "method": "org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createModules",
          "source": "JEEDeployableFactory.java:73"
        },
        {
          "method": "org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory.createModules",
          "source": "JEEDeployableFactory.java:62"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.cacheModules",
          "source": "ProjectModuleFactoryDelegate.java:60"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.getModules",
          "source": "ProjectModuleFactoryDelegate.java:257"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ModuleFactory.getModules",
          "source": "ModuleFactory.java:131"
        },
        {
          "method": "org.eclipse.wst.server.core.ServerUtil.getModules",
          "source": "ServerUtil.java:97"
        },
        {
          "method": "org.eclipse.wst.server.core.ServerUtil.getModule",
          "source": "ServerUtil.java:68"
        },
        {
          "method": "org.eclipse.wst.server.ui.internal.ServerPropertyTester.checkProperty",
          "source": "ServerPropertyTester.java:42"
        },
        {
          "method": "org.eclipse.wst.server.ui.internal.ServerPropertyTester.test",
          "source": "ServerPropertyTester.java:33"
        },
        {
          "method": "org.eclipse.core.internal.expressions.Property.test",
          "source": "Property.java:58"
        },
        {
          "method": "org.eclipse.core.internal.expressions.TestExpression.evaluate",
          "source": "TestExpression.java:98"
        },
        {
          "method": "org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd",
          "source": "CompositeExpression.java:53"
        },
        {
          "method": "org.eclipse.core.internal.expressions.IterateExpression.evaluate",
          "source": "IterateExpression.java:150"
        },
        {
          "method": "org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd",
          "source": "CompositeExpression.java:53"
        },
        {
          "method": "org.eclipse.core.internal.expressions.WithExpression.evaluate",
          "source": "WithExpression.java:69"
        },
        {
          "method": "org.eclipse.core.internal.expressions.CompositeExpression.evaluateAnd",
          "source": "CompositeExpression.java:53"
        },
        {
          "method": "org.eclipse.core.internal.expressions.EnablementExpression.evaluate",
          "source": "EnablementExpression.java:43"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchShortcutExtension.evalEnablementExpression",
          "source": "LaunchShortcutExtension.java:282"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.getApplicableConfigurationTypes",
          "source": "LaunchConfigurationManager.java:720"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.getApplicableLaunchConfigurations",
          "source": "LaunchConfigurationManager.java:753"
        },
        {
          "method": "org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.getResourceLabel",
          "source": "LaunchingResourceManager.java:303"
        },
        {
          "method": "org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.computeLabels",
          "source": "LaunchingResourceManager.java:207"
        },
        {
          "method": "org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager$2.run",
          "source": "LaunchingResourceManager.java:125"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "207473",
      "date": "2007-10-25T17:32:57+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "normal"
    }
  ],
  "groupId": "207473",
  "bugId": "207473",
  "date": "2007-10-25T17:32:57+02:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "normal"
}