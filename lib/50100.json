{
  "comments": [
    "Using 0106 build, it takes minutes to update the markers for a compilation unit\ncontaining 250 problems (maximum limit).\nEach time I save the unit, the UI dies for several minutes. There is a running\njob in the background that I cannot identify.\nThis is something new. I was not that bad with M5.\nI set it as critical, because it makes the editor unusable.",
    "I think I saw that too.\nMy scenario:\n- A workspace that has only org.eclipse.ui.workbench.texteditor as project.\n- Open AbstarctTextEditor in editor\n- remove all imports (to generate some errors)\n- add a space and save. Repeat this until NPE is reached\n\ndeclaration is in the \u0027changedAnnotation\u0027 array. but seems to be removed already.\n\n- note the funny efects when repeating \u0027add space and save\u0027. Somethimes there\nare now error underlies but full, red background highlights.\n\nThread [main] (Suspended (exception NullPointerException))\n\tAnnotationPainter.catchupWithModel(AnnotationModelEvent) line: 283\n\tAnnotationPainter.updatePainting(AnnotationModelEvent) line: 531\n\tAnnotationPainter.access$1(AnnotationPainter, AnnotationModelEvent) line: 528\n\tAnnotationPainter$1.run() line: 597\n\tRunnableLock.run() line: 35\n\tUISynchronizer(Synchronizer).runAsyncMessages() line: 102\n\tDisplay.runAsyncMessages() line: 2295\n\tDisplay.readAndDispatch() line: 2003\n\tWorkbench.runEventLoop(Window$IExceptionHandler, Display) line: 1518\n\tWorkbench.runUI() line: 1494\n\tWorkbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 258\n\tPlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 139\n\tIDEApplication.run(Object) line: 47\n\tPlatformActivator$1.run() line: 226\n\tEclipseStarter.run(String[], Runnable) line: 85\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available\n[native method]\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 79\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 41\n\tMethod.invoke(Object, Object[]) line: 386\n\tMain.basicRun(String[]) line: 279\n\tMain.run(String[]) line: 742\n\tMain.main(String[]) line: 581\n\n",
    "Fixed the NPE (see bug 50157). Need to verify whether this is really the cause\nfor the problem reported by this PR.\n",
    "\u003eThere is a running job in the background that I cannot identify.\nDoesn\u0027t the job have a name when you go to the Progress view (set to verbose)?\n\nIs there something in .log?\n\nI tried it with AbstractTextEditor having set the number to 999 and removed all\nimports. I could save without any delay.\n\nDo you see this with all files or just a specific one?\n",
    "\u003eDoesn\u0027t the job have a name when you go to the Progress view (set to verbose)?\nI didn\u0027t know the verbose mode.\n\n\u003eIs there something in .log?\nNothing in the .log.\n\n\u003eI tried it with AbstractTextEditor having set the number to 999 and removed\n\u003eall imports. I could save without any delay.\nI tried to describe what I got. I had 250 errors and the performance was very \nlow. It took minutes sometimes before I could do something.\n\n\u003eDo you see this with all files or just a specific one?\nMy case was a specific file.\n",
    "\u003eI didn\u0027t know the verbose mode.\nGo to the Progress view\u0027s view menu and there you can enable it.\n\nCan you reproduce the error on that file?",
    "If this is reproducible please give me the name and revision of that file and\nhow to reproduce the 250 errors I will then load JDT Core from the repository\nand try to find the bug.\n",
    "I got it again in a different file. That time I got this exception:\n\norg.eclipse.core.internal.resources.ResourceException: Marker id: 76748 not \nfound.\nat org.eclipse.core.internal.resources.Marker.checkInfo(Marker.java:53)\nat org.eclipse.core.internal.resources.Marker.getType(Marker.java:176)\nat org.eclipse.core.internal.resources.Marker.isSubtypeOf(Marker.java:194)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator.isAnnotationInRange\n(ProblemsLabelDecorator.java:263)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator.getErrorTicksFromWorkingCopy\n(ProblemsLabelDecorator.java:246)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator.computeAdornmentFlags\n(ProblemsLabelDecorator.java:185)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator.decorateImage\n(ProblemsLabelDecorator.java:146)\nat org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.decorateImage\n(JavaUILabelProvider.java:119)\nat org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getImage\n(JavaUILabelProvider.java:134)\nat org.eclipse.jface.viewers.DecoratingLabelProvider.getImage\n(DecoratingLabelProvider.java:73)\nat org.eclipse.jdt.internal.ui.viewsupport.DecoratingJavaLabelProvider.getImage\n(DecoratingJavaLabelProvider.java:103)\nat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:99)\nat org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run\n(AbstractTreeViewer.java:87)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:814)\nat org.eclipse.core.runtime.Platform.run(Platform.java:457)\nat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:469)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh\n(AbstractTreeViewer.java:1029)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh\n(AbstractTreeViewer.java:1044)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh\n(AbstractTreeViewer.java:1044)\nat org.eclipse.jface.viewers.AbstractTreeViewer.labelProviderChanged\n(AbstractTreeViewer.java:1160)\nat org.eclipse.jface.viewers.ContentViewer.handleLabelProviderChanged\n(ContentViewer.java:161)\nat org.eclipse.jface.viewers.StructuredViewer.handleLabelProviderChanged\n(StructuredViewer.java:650)\nat \norg.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage$JavaOutlineViewer.handle\nLabelProviderChanged(JavaOutlinePage.java:688)\nat org.eclipse.jface.viewers.ContentViewer$1.labelProviderChanged\n(ContentViewer.java:74)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator.fireProblemsChanged\n(ProblemsLabelDecorator.java:347)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator.access$0\n(ProblemsLabelDecorator.java:342)\nat org.eclipse.jdt.ui.ProblemsLabelDecorator$1.problemsChanged\n(ProblemsLabelDecorator.java:322)\nat org.eclipse.jdt.internal.ui.viewsupport.ProblemMarkerManager$1.run\n(ProblemMarkerManager.java:183)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:102)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2295)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2003)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1518)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1494)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:258)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:85)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\nat org.eclipse.core.launcher.Main.run(Main.java:742)\nat org.eclipse.core.launcher.Main.main(Main.java:581)\n\nThe test case is to edit a file with lots of compilation errors and fix the \nerrors one by one.",
    "Did you see this exception only ones? Which build?\n",
    "I got it using 0113 build.\nI don\u0027t have it all the time.\n\nConcerning your comment 6, you need to load JDT/Core from source using the \nHEAD contents and then you replace the DefaultCodeFormatterOptions.java in \nformatter/org.eclipse.jdt.internal.formatter with its revision number 1.32. \nThen you should see the performance issue while editing the file.\nA background thread is running that prevents the key bindings to work. The \nmouse action (copy/paste) are still working fine, but Ctrl + C is not working.",
    "Also increase the number of problems per cu to 250 or more.",
    "We need to revisit code in the form of\n  x.exists() \u0026\u0026 \u003cdo something that expects x to exist\u003e\nAnother thread might have deleted the marker/annotation after exists() results\nto true but before the code after \u0026\u0026 gets fully executed. This causes \u003c...\u003e to\nfail. In this particular case we fill the log. We must handle that case more\ngracefully.\n\nAdding Martin since he\u0027s the ProblemDecorator owner",
    "Moving to Martin to\n1. not fill the .log\n2. think about how decoration can be made more robust regarding changes in other\nthreads",
    "fixed \u003e 20040126\n\nno logging for removed markers. decorator should behave tolerant and not force a\nlock."
  ],
  "commentCreationDates": [
    "2004-01-15T20:49:48+01:00",
    "2004-01-16T13:39:45+01:00",
    "2004-01-19T09:16:10+01:00",
    "2004-01-19T14:49:05+01:00",
    "2004-01-19T14:56:15+01:00",
    "2004-01-19T14:58:37+01:00",
    "2004-01-19T16:10:52+01:00",
    "2004-01-20T17:51:50+01:00",
    "2004-01-20T18:13:04+01:00",
    "2004-01-20T18:27:37+01:00",
    "2004-01-20T18:27:58+01:00",
    "2004-01-20T18:33:21+01:00",
    "2004-01-22T10:05:15+01:00",
    "2004-01-26T14:30:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.resources.ResourceException",
      "message": "Marker id: 76748 not  found.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.resources.Marker.checkInfo",
          "source": "Marker.java:53"
        },
        {
          "method": "org.eclipse.core.internal.resources.Marker.getType",
          "source": "Marker.java:176"
        },
        {
          "method": "org.eclipse.core.internal.resources.Marker.isSubtypeOf",
          "source": "Marker.java:194"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator.isAnnotationInRange",
          "source": "ProblemsLabelDecorator.java:263"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator.getErrorTicksFromWorkingCopy",
          "source": "ProblemsLabelDecorator.java:246"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator.computeAdornmentFlags",
          "source": "ProblemsLabelDecorator.java:185"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator.decorateImage",
          "source": "ProblemsLabelDecorator.java:146"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.decorateImage",
          "source": "JavaUILabelProvider.java:119"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getImage",
          "source": "JavaUILabelProvider.java:134"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.getImage",
          "source": "DecoratingLabelProvider.java:73"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.DecoratingJavaLabelProvider.getImage",
          "source": "DecoratingJavaLabelProvider.java:103"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:99"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:87"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:814"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:469"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh",
          "source": "AbstractTreeViewer.java:1029"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh",
          "source": "AbstractTreeViewer.java:1044"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh",
          "source": "AbstractTreeViewer.java:1044"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.labelProviderChanged",
          "source": "AbstractTreeViewer.java:1160"
        },
        {
          "method": "org.eclipse.jface.viewers.ContentViewer.handleLabelProviderChanged",
          "source": "ContentViewer.java:161"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleLabelProviderChanged",
          "source": "StructuredViewer.java:650"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage$JavaOutlineViewer.handleLabelProviderChanged",
          "source": "JavaOutlinePage.java:688"
        },
        {
          "method": "org.eclipse.jface.viewers.ContentViewer$1.labelProviderChanged",
          "source": "ContentViewer.java:74"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator.fireProblemsChanged",
          "source": "ProblemsLabelDecorator.java:347"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator.access$0",
          "source": "ProblemsLabelDecorator.java:342"
        },
        {
          "method": "org.eclipse.jdt.ui.ProblemsLabelDecorator$1.problemsChanged",
          "source": "ProblemsLabelDecorator.java:322"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.ProblemMarkerManager$1.run",
          "source": "ProblemMarkerManager.java:183"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:102"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2295"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2003"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1518"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1494"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:258"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 7,
      "bugId": "50100",
      "date": "2004-01-20T17:51:50+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "50100",
  "bugId": "50100",
  "date": "2004-01-15T20:49:48+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "critical"
}