{
  "comments": [
    "Adding watch expression always causes an exception if debuging is stoped on \nbreakpoint who is in anonymous SWT event processing class. I am using JAVA VM \n1.5.0_01 and eclipse 3.1M5a, Build ID: I20050219-1500\n\nThis is what I got in logfile:\n\n!ENTRY org.eclipse.jdt.debug 4 120 2005-03-03 14:41:10.705\n!MESSAGE Exception processing async thread queue\n!SUBENTRY 1 org.eclipse.jdt.debug 4 120 2005-03-03 14:41:10.705\n!MESSAGE Exception processing async thread queue\n!STACK 0\njava.lang.UnsupportedOperationException: Operation only supported in JLS2 AST\n\tat org.eclipse.jdt.core.dom.ASTNode.supportedOnlyIn2(ASTNode.java:1771)\n\tat org.eclipse.jdt.core.dom.ClassInstanceCreation.getName\n(ClassInstanceCreation.java:405)\n\tat \norg.eclipse.jdt.internal.debug.eval.ast.engine.SourceBasedSourceGenerator.endVis\nit(SourceBasedSourceGenerator.java:769)\n\tat org.eclipse.jdt.core.dom.ClassInstanceCreation.accept0\n(ClassInstanceCreation.java:337)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.MethodInvocation.accept0\n(MethodInvocation.java:245)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2497)\n\tat org.eclipse.jdt.core.dom.ExpressionStatement.accept0\n(ExpressionStatement.java:143)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.Block.accept0(Block.java:135)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2497)\n\tat org.eclipse.jdt.core.dom.MethodDeclaration.accept0\n(MethodDeclaration.java:503)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.TypeDeclaration.accept0\n(TypeDeclaration.java:486)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.CompilationUnit.accept0\n(CompilationUnit.java:291)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat \norg.eclipse.jdt.internal.debug.eval.ast.engine.EvaluationSourceGenerator.createE\nvaluationSourceFromSource(EvaluationSourceGenerator.java:162)\n\tat \norg.eclipse.jdt.internal.debug.eval.ast.engine.EvaluationSourceGenerator.getSour\nce(EvaluationSourceGenerator.java:212)\n\tat \norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.getCompiledEx\npression(ASTEvaluationEngine.java:161)\n\tat \norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.evaluate\n(ASTEvaluationEngine.java:77)\n\tat \norg.eclipse.jdt.internal.debug.ui.JavaWatchExpressionDelegate$EvaluationRunnable\n.run(JavaWatchExpressionDelegate.java:144)\n\tat org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run\n(JDIThread.java:2417)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)",
    "Created an attachment (id\u003d18435)\nMy project files\n\nTry adding \"singleTable\" watch in \"BindingWizardPage.java\" when break point is\nin stared(*) place:\n\nremoveSingleMenuItem.addSelectionListener(new SelectionListener(){\n\n\t    public void widgetSelected(SelectionEvent e)\n\t    {\n*\t\t singleTable.remove(singleTable.getSelectionIndex());\n\t    }\n\n\t    public void widgetDefaultSelected(SelectionEvent e)\n\t    {\n\t    }\n\t    \n\t});",
    "Created an attachment (id\u003d18436)\nLog file\n",
    "There are two other places where JLS2 APIs are used with no alternative for JLS3.\n\nSourceBasedSourceGenerator.endVisit - lines 769 \u0026 792.\nBreakpointMethodLocator.computeMethodSignature - line 101.",
    "Fixed in SourceBasedSourceGenerator and BreakpointMethodLocator.\n\nSmaller test case:\n\npublic class Bug_87071 {\n  public static void main(String[] args) {\n    new Runnable(){\n      public void run() {\n        System.out.println(1);    // \u003c-- breakpoint here\n      }\n    }.run();\n  }\n}\n\nWith the project compiler preferences set to Java 1.5, any evaluations at the\nbreakpoint position were failing.",
    "Please verify, Darin S.",
    "Verified."
  ],
  "commentCreationDates": [
    "2005-03-03T14:59:40+01:00",
    "2005-03-03T15:04:34+01:00",
    "2005-03-03T15:06:39+01:00",
    "2005-03-04T03:36:23+01:00",
    "2005-03-04T21:57:13+01:00",
    "2005-03-04T21:57:28+01:00",
    "2005-03-07T22:29:12+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.UnsupportedOperationException",
      "message": "Operation only supported in JLS2 AST",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.supportedOnlyIn2",
          "source": "ASTNode.java:1771"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ClassInstanceCreation.getName",
          "source": "ClassInstanceCreation.java:405"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.SourceBasedSourceGenerator.endVisit",
          "source": "SourceBasedSourceGenerator.java:769"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ClassInstanceCreation.accept0",
          "source": "ClassInstanceCreation.java:337"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodInvocation.accept0",
          "source": "MethodInvocation.java:245"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:2497"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ExpressionStatement.accept0",
          "source": "ExpressionStatement.java:143"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:135"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:2497"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodDeclaration.accept0",
          "source": "MethodDeclaration.java:503"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.TypeDeclaration.accept0",
          "source": "TypeDeclaration.java:486"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnit.accept0",
          "source": "CompilationUnit.java:291"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.EvaluationSourceGenerator.createEvaluationSourceFromSource",
          "source": "EvaluationSourceGenerator.java:162"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.EvaluationSourceGenerator.getSource",
          "source": "EvaluationSourceGenerator.java:212"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.getCompiledExpression",
          "source": "ASTEvaluationEngine.java:161"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.evaluate",
          "source": "ASTEvaluationEngine.java:77"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JavaWatchExpressionDelegate$EvaluationRunnable.run",
          "source": "JavaWatchExpressionDelegate.java:144"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run",
          "source": "JDIThread.java:2417"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "87071",
      "date": "2005-03-03T14:59:40+01:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "87071",
  "bugId": "87071",
  "date": "2005-03-03T14:59:40+01:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}