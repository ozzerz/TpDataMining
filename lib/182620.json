{
  "comments": [
    "Build ID: TPTP-4.4.0-200703270100\n\nSteps To Reproduce:\n1.Import access.log (Sample log file can be provided)\n2.Select the option for \"Show heap status\" in the preference page\n3.Re-import the same log multiple times.\n4.Watch the heap size grow.\n5.After it reaches max set heap size OutOfMemoryError exception get thrown and application hangs.\n6.javacore and heapdump get created in the eclipse dir.\n\n\n\nMore information:\n!ENTRY org.eclipse.tptp.platform.common.cbe 4 0 2007-04-16 14:33:54.578\n!MESSAGE An error occurred while attempting to import the log file D:/logs/perf/accessTest_20k.log.\n!STACK 0\norg.eclipse.hyades.logging.parsers.LogParserException: IWAT0412E Errors occurred parsing the log file D:/logs/perf/accessTest_20k.log.\n\tat org.eclipse.hyades.logging.parsers.importer.ParserWrapper.parse(ParserWrapper.java:144)\n\tat org.eclipse.hyades.logging.parsers.internal.importer.LocalLogImportLoader.startParsing(LocalLogImportLoader.java:95)\n\tat org.eclipse.tptp.monitoring.log.internal.core.LocalImportHandler.importLog(LocalImportHandler.java:105)\n\tat org.eclipse.tptp.monitoring.logui.internal.wizards.ImportLogWizard$LocalLogImportJob.run(ImportLogWizard.java:994)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n!SUBENTRY 1 org.eclipse.tptp.platform.common.cbe 4 0 2007-04-16 14:33:54.578\n!MESSAGE java.lang.OutOfMemoryError\n\n!ENTRY org.eclipse.ui 4 0 2007-04-16 14:33:55.578\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError)\n\tat org.eclipse.swt.SWT.error(SWT.java:3499)\n\tat org.eclipse.swt.SWT.error(SWT.java:3422)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3650)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3287)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2337)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2301)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2176)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:463)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:458)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:356)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:171)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1141)\nCaused by: java.lang.OutOfMemoryError\n\tat java.lang.Object.clone(Native Method)\n\tat org.eclipse.jface.viewers.StructuredViewer.getSortedChildren(StructuredViewer.java:997)\n\tat org.eclipse.ui.internal.progress.ProgressCanvasViewer.internalRefresh(ProgressCanvasViewer.java:142)\n\tat org.eclipse.jface.viewers.StructuredViewer.internalRefresh(StructuredViewer.java:1221)\n\tat org.eclipse.jface.viewers.StructuredViewer$8.run(StructuredViewer.java:1478)\n\tat org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1333)\n\tat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1476)\n\tat org.eclipse.ui.internal.progress.ProgressViewerContentProvider.refresh(ProgressViewerContentProvider.java:137)\n\tat org.eclipse.ui.internal.progress.ProgressViewUpdater$1.runInUIThread(ProgressViewUpdater.java:274)\n\tat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 22 more",
    "Created an attachment (id\u003d63944)\nPerfoemance data\n\nUnzip the file and open 4.html and 5.html\n4.html --\u003e data with re-Import sample log three times\n5.html --\u003e data with re-Import sample log four times\nCompare the object and the retained size for both.\nAs you can see the growth of the Hyades cbe models even if same log is imported multiple times. And eventually OutOfMemoryError exception get thrown.",
    "Are you replacing the initially imported log file?",
    "Yes, I am replacing the log file. I should have mention this. :-)",
    "Even if say user import different logs after deleting last imported log in the log and trace analyzer multiple times causes the same problem.\nThis problem is not limited to the same log import over and over.",
    "On import log replace the old agent is deleted using\n((IHyadesExtendedResource) agentProxy.getAgent().eResource()).delete(); \nbut it looks like the method is not cleaning up the agent and associated CBEs.\nMarius can you comment on this.\n",
    "Marius, I am assigning this defect to you for further investigation.\nThanks.",
    "Assigning...",
    "Is there any progress here? we\u0027re hoping to see a fix in the Eclipse 3.3 release.",
    "I\u0027m working on it, I have a partial fix and I plan to have a more complete fix done for TPTP 4.4.",
    "Created an attachment (id\u003d69382)\nPatch for the CBEtoMemoryOutputter\n\nPatch reviewed by Alex.",
    "Alex please commit the patch.",
    "Eugene please check-in the patch for me, Alex cannot connect tonight. Thanks Marius",
    "(In reply to comment #10)\nPatch is submitted.",
    "Thanks Eugene.",
    "Fix in CVS.",
    "Tested with the patch provide by Alex with AC build. Fixed\nAC Build : AC-4.4.1-200711261700",
    "Closing"
  ],
  "commentCreationDates": [
    "2007-04-16T21:48:56+02:00",
    "2007-04-16T22:09:44+02:00",
    "2007-04-16T22:19:52+02:00",
    "2007-04-16T22:41:08+02:00",
    "2007-04-18T17:10:48+02:00",
    "2007-04-25T22:09:08+02:00",
    "2007-04-27T20:42:15+02:00",
    "2007-04-27T20:43:11+02:00",
    "2007-05-08T19:15:01+02:00",
    "2007-05-14T16:13:31+02:00",
    "2007-05-30T22:23:55+02:00",
    "2007-05-31T03:07:07+02:00",
    "2007-05-31T03:45:38+02:00",
    "2007-05-31T05:24:34+02:00",
    "2007-05-31T05:29:21+02:00",
    "2007-05-31T16:10:36+02:00",
    "2007-11-27T15:19:44+01:00",
    "2007-11-27T15:19:59+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.hyades.logging.parsers.LogParserException",
      "message": "IWAT0412E Errors occurred parsing the log file D:/logs/perf/accessTest_20k.log.",
      "elements": [
        {
          "method": "org.eclipse.hyades.logging.parsers.importer.ParserWrapper.parse",
          "source": "ParserWrapper.java:144"
        },
        {
          "method": "org.eclipse.hyades.logging.parsers.internal.importer.LocalLogImportLoader.startParsing",
          "source": "LocalLogImportLoader.java:95"
        },
        {
          "method": "org.eclipse.tptp.monitoring.log.internal.core.LocalImportHandler.importLog",
          "source": "LocalImportHandler.java:105"
        },
        {
          "method": "org.eclipse.tptp.monitoring.logui.internal.wizards.ImportLogWizard$LocalLogImportJob.run",
          "source": "ImportLogWizard.java:994"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "182620",
      "date": "2007-04-16T21:48:56+02:00",
      "product": "TPTP Log Analyzer",
      "component": "Platform.UI.LogView",
      "severity": "critical"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.OutOfMemoryError)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3499"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3422"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3650"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3287"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2337"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2301"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2176"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:463"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:458"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:356"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:171"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1141"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.OutOfMemoryError",
        "elements": [
          {
            "method": "java.lang.Object.clone",
            "source": "Native Method"
          },
          {
            "method": "org.eclipse.jface.viewers.StructuredViewer.getSortedChildren",
            "source": "StructuredViewer.java:997"
          },
          {
            "method": "org.eclipse.ui.internal.progress.ProgressCanvasViewer.internalRefresh",
            "source": "ProgressCanvasViewer.java:142"
          },
          {
            "method": "org.eclipse.jface.viewers.StructuredViewer.internalRefresh",
            "source": "StructuredViewer.java:1221"
          },
          {
            "method": "org.eclipse.jface.viewers.StructuredViewer$8.run",
            "source": "StructuredViewer.java:1478"
          },
          {
            "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
            "source": "StructuredViewer.java:1333"
          },
          {
            "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
            "source": "StructuredViewer.java:1476"
          },
          {
            "method": "org.eclipse.ui.internal.progress.ProgressViewerContentProvider.refresh",
            "source": "ProgressViewerContentProvider.java:137"
          },
          {
            "method": "org.eclipse.ui.internal.progress.ProgressViewUpdater$1.runInUIThread",
            "source": "ProgressViewUpdater.java:274"
          },
          {
            "method": "org.eclipse.ui.progress.UIJob$1.run",
            "source": "UIJob.java:94"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 0,
      "bugId": "182620",
      "date": "2007-04-16T21:48:56+02:00",
      "product": "TPTP Log Analyzer",
      "component": "Platform.UI.LogView",
      "severity": "critical"
    }
  ],
  "groupId": "182620",
  "bugId": "182620",
  "date": "2007-04-16T21:48:56+02:00",
  "product": "TPTP Log Analyzer",
  "component": "Platform.UI.LogView",
  "severity": "critical"
}