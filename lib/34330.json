{
  "comments": [
    "This is the code snippet 111 as is with one exception: the tree contains chlidren \n(see [A])\nIt throws the following stacktrace:\n\norg.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2316)\n\tat org.eclipse.swt.SWT.error(SWT.java:2246)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:381)\n\tat org.eclipse.swt.widgets.Control.getDisplay(Control.java:731)\n\tat org.eclipse.swt.widgets.Widget.isValidThread(Widget.java:589)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:311)\n\tat org.eclipse.swt.widgets.Control.setVisible(Control.java:2231)\n\tat org.eclipse.swt.custom.TreeEditor$1.treeExpanded\n(TreeEditor.java:84)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:173)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:836)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:861)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:845)\n\tat org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:1890)\n\tat org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:3811)\n\tat org.eclipse.swt.widgets.Composite.WM_NOTIFY(Composite.java:638)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2811)\n\tat org.eclipse.swt.widgets.Decorations.windowProc\n(Decorations.java:1225)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:2283)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1232)\n\tat org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:152)\n\tat org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:1498)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2794)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:2283)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1299)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1483)\n\tat A.main(A.java:97)\nException in thread \"main\" \n\n/*\n * Copyright (c) 2000, 2003 IBM Corp.  All rights reserved.\n * This file is made available under the terms of the Common Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/cpl-v10.html\n */\n\nimport org.eclipse.swt.*;\nimport org.eclipse.swt.graphics.*;\nimport org.eclipse.swt.widgets.*;\nimport org.eclipse.swt.layout.*;\nimport org.eclipse.swt.custom.*;\n\npublic class A {\n\npublic static void main (String [] args) {\n\tfinal Display display \u003d new Display ();\n\tfinal Color black \u003d display.getSystemColor (SWT.COLOR_BLACK);\n\tShell shell \u003d new Shell (display);\n\tshell.setLayout (new FillLayout ());\n\tfinal Tree tree \u003d new Tree (shell, SWT.BORDER);\n/*\tfor (int i\u003d0; i\u003c16; i++) {\n\t\tTreeItem item \u003d new TreeItem (tree, SWT.NONE);\n\t\titem.setText (\"Item \" + i);\n\t}\n*/\n                /* [A] set children so we can expand */\n\tfor (int i \u003d 0; i \u003c 12; i++) {\n\t\tTreeItem treeItem \u003d new TreeItem(tree, SWT.NULL);\n\t\ttreeItem.setText(\"Item \" + i);\n\t\tTreeItem childItem \u003d new TreeItem(treeItem, SWT.NONE);\n\t\tchildItem.setText(\"child item\" + i);\n\t}\n\n\tfinal TreeItem [] lastItem \u003d new TreeItem [1];\n\tfinal TreeEditor editor \u003d new TreeEditor (tree);\n\ttree.addListener (SWT.Selection, new Listener () {\n\t\tpublic void handleEvent (Event e) {\n\t\t\tfinal TreeItem item \u003d (TreeItem) e.item;\n\t\t\tif (item !\u003d null \u0026\u0026 item \u003d\u003d lastItem [0]) {\n\t\t\t\tfinal Composite composite \u003d new \nComposite (tree, SWT.NONE);\n\t\t\t\tcomposite.setBackground (black);\n\t\t\t\tfinal Text text \u003d new Text \n(composite, SWT.NONE);\n\t\t\t\tcomposite.addListener (SWT.Resize, \nnew Listener () {\n\t\t\t\t\tpublic void handleEvent \n(Event e) {\n\t\t\t\t\t\tRectangle rect \n\u003d composite.getClientArea ();\n\t\t\t\t\t\ttext.setBounds \n(rect.x + 1, rect.y + 1, rect.width - 2, rect.height - 2);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tListener textListener \u003d new Listener \n() {\n\t\t\t\t\tpublic void handleEvent \n(final Event e) {\n\t\t\t\t\t\tswitch (e.type) \n{\n\t\t\t\t\t\t\tcase \nSWT.DefaultSelection:\n\t\t\t\t\t\t\t\n\titem.setText (text.getText ());\n\t\t\t\t\t\t\t\n\t//FALL THROUGH\n\t\t\t\t\t\t\tcase \nSWT.FocusOut:\n\t\t\t\t\t\t\t\n\tcomposite.dispose ();\n\t\t\t\t\t\t\t\n\tbreak;\n\t\t\t\t\t\t\tcase \nSWT.Verify:\n\t\t\t\t\t\t\t\n\tString newText \u003d text.getText ();\n\t\t\t\t\t\t\t\n\tString leftText \u003d newText.substring (0, e.start);\n\t\t\t\t\t\t\t\n\tString rightText \u003d newText.substring (e.end, newText.length ());\n\t\t\t\t\t\t\t\n\tGC gc \u003d new GC (text);\n\t\t\t\t\t\t\t\n\tPoint size \u003d gc.textExtent (leftText + e.text + rightText);\n\t\t\t\t\t\t\t\n\tgc.dispose ();\n\t\t\t\t\t\t\t\n\tsize \u003d text.computeSize (size.x, SWT.DEFAULT);\n\t\t\t\t\t\t\t\n\teditor.horizontalAlignment \u003d SWT.LEFT;\n\t\t\t\t\t\t\t\n\tRectangle itemRect \u003d item.getBounds (), rect \u003d tree.getClientArea ();\n\t\t\t\t\t\t\t\n\teditor.minimumWidth \u003d Math.max (size.x, itemRect.width) + 2;\n\t\t\t\t\t\t\t\n\tint left \u003d itemRect.x, right \u003d rect.x + rect.width;\n\t\t\t\t\t\t\t\n\teditor.minimumWidth \u003d Math.min (editor.minimumWidth, right - left);\n\t\t\t\t\t\t\t\n\teditor.layout ();\n\t\t\t\t\t\t\t\n\tbreak;\n\t\t\t\t\t\t\tcase \nSWT.Traverse:\n\t\t\t\t\t\t\t\n\tif (e.detail \u003d\u003d SWT.TRAVERSE_ESCAPE) {\n\t\t\t\t\t\t\t\n\t\tcomposite.dispose ();\n\t\t\t\t\t\t\t\n\t\te.doit \u003d false;\n\t\t\t\t\t\t\t\n\t}\n\t\t\t\t\t\t\t\n\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\ttext.addListener \n(SWT.DefaultSelection, textListener);\n\t\t\t\ttext.addListener (SWT.FocusOut, \ntextListener);\n\t\t\t\ttext.addListener (SWT.Traverse, \ntextListener);\n\t\t\t\ttext.addListener (SWT.Verify, \ntextListener);\n\t\t\t\teditor.setEditor (composite, item);\n\t\t\t\ttext.setText (item.getText ());\n\t\t\t\ttext.selectAll ();\n\t\t\t\ttext.setFocus ();\n\t\t\t}\n\t\t\tlastItem [0] \u003d item;\n\t\t}\n\t});\n\tshell.pack ();\n\tshell.open ();\n\twhile (!shell.isDisposed()) {\n\t\t\tif (!display.readAndDispatch ()) display.sleep ();\n\t}\n\tdisplay.dispose ();\n}\n}",
    "Fixed \u003e 20030617",
    "Actually, I fixed the snippet111, not TreeEditor.",
    "Actually, I felt bad and fixed TreeEditor too."
  ],
  "commentCreationDates": [
    "2003-03-10T15:33:30+01:00",
    "2003-06-17T21:57:20+02:00",
    "2003-06-17T21:57:56+02:00",
    "2003-06-17T22:29:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2316"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2246"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:381"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.getDisplay",
          "source": "Control.java:731"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.isValidThread",
          "source": "Widget.java:589"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:311"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.setVisible",
          "source": "Control.java:2231"
        },
        {
          "method": "org.eclipse.swt.custom.TreeEditor$1.treeExpanded",
          "source": "TreeEditor.java:84"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:173"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:836"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:861"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:845"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.wmNotifyChild",
          "source": "Tree.java:1890"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_NOTIFY",
          "source": "Control.java:3811"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_NOTIFY",
          "source": "Composite.java:638"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2811"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1225"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2283"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1232"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.callWindowProc",
          "source": "Tree.java:152"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN",
          "source": "Tree.java:1498"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2794"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2283"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1299"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1483"
        },
        {
          "method": "A.main",
          "source": "A.java:97"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "34330",
      "date": "2003-03-10T15:33:30+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "34330",
  "bugId": "34330",
  "date": "2003-03-10T15:33:30+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}