{
  "comments": [
    "Scenario to reproduce:\n\n1. Unzip Eclipse 3.1 M4 for GTK\n\n2. Unzip only missing files from Eclipse 3.1 M4 for Motif into the same \nlocation (only platform.source.linux.gtk.x86 and swt.gtk fragments should be \nunzipped)\n\n3. Try to run eclipse with command\njava ?cp startup.jar org.eclipse.core.launcher.Main ?os linux ?arch x86 ?ws gtk\nEverethin is OK. Eclipse is started.\n\n4. Try to run eclipse with command \njava ?cp startup.jar org.eclipse.core.launcher.Main ?os linux ?arch x86 ?ws \nmotif\nEclipse fails with following error\n!ENTRY org.eclipse.osgi 2005-02-11 17:49:36.879\n!MESSAGE Application error\n!STACK 1\njava.lang.UnsatisfiedLinkError: MB_CUR_MAX\n  at org.eclipse.swt.internal.motif.OS.MB_CUR_MAX(Native Method)\n  at org.eclipse.swt.internal.motif.OS.\u003cclinit\u003e(OS.java:35)\n  at org.eclipse.swt.graphics.Device.\u003cclinit\u003e(Device.java:89)\n  at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:299)\n  at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:156)\n  at org.eclipse.ui.internal.ide.IDEApplication.createDisplay\n(IDEApplication.java:127)\n  at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:78)\n  at org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:220)\n  at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n  at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n  at java.lang.reflect.Method.invoke(Method.java:324)\n  at org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n  at org.eclipse.core.launcher.Main.run(Main.java:710)\n  at org.eclipse.core.launcher.Main.main(Main.java:694)",
    "There is misprint in step 2. It should be motif fragments no gtk.",
    "Chrix, any comment on that?",
    "CC\u0027ing Grant. From the stack trace above, it is dying on the very first JNI \ncall to libswt-motif.so. But the earlier loadLibrary should have failed to \nload that library and complain.\n\nArtyom: does the full Eclipse motif M4 work fine for you?",
    "Yes, Eclipse 3.1 M4 works fine. Motif and GTK version work with no problem \nseparately. Only when I install all fragments (GTK and Motif) into the same \nlocation strange things happen. There was no such problem in Eclipse 3.0.1.\n\nIt seems like Eclipse runtime considers GTK fragment (i.e. takes native \nlibraries from there) even if -ws motif was specified. \n",
    "There may be a couple things at play here.\n\n1) Technically speaking, the GTK stuff should not even be presented to the \nruntime if you are running on Motif (and vice versa).  This is an Update thing \nand there was some similar discussion there recently.  CC\u0027ing Dorian.\n\n2) The runtime may have a bug in how it is picking things up.  I suspect that \nthis is NOT the case.  Its not because I am a runtime guy :-)  Basically the \nruntime just does as it is told.  It is given a path to follow and variables to \nsubstitute.  If there was a problem with this then it should show up other \nplaces.\n\n3) SWT may have changed something in the way this is laid out?  Chrix? Grant?\n\nMy final observation is that we are looking at marking up plugins/fragments \nwith platform filters. This would essentially ignore anything that is not for \nthe current environment.  So Update could install them (#1) but the runtime \nwould simply ignore them (they would be unresolved).",
    "I have the same problem. I cannot PDE-self-host from either a motif or gtk\ndevelopment workbench.",
    "(In reply to comment #5)\n\u003e 2) The runtime may have a bug in how it is picking things up.  I suspect that \n\u003e this is NOT the case.  Its not because I am a runtime guy :-)  Basically the \n\u003e runtime just does as it is told.  It is given a path to follow and variables \nto \n\u003e substitute.  If there was a problem with this then it should show up other \n\u003e places.\n\nBut GTK and Motif Eclipse work with no problems if only one version of SWT is \ninstalled. If runtimes filters GTK fragment it should behave like it is not \npresent but it influence Eclipse some how. It seems like swt-pi library is \nloaded form the /os/linux/x86 of GTK fragment instead of Motif fragment (We can \nfind native library but cannot find function in there). ",
    "re comment 7\n\nyes but we currently do not filter fragments.  We follow $ws$, $os$, etc \nvariables that are presented to us.  For the GTK/Motif native code, I suspect \nthat both are in os/linux/x86 so it will be luck of the draw as to which you \nget (first one wins).\n\nThis is clearly not good which is why we are looking at filtering.  Check out \nbug 84370c25 for more details.  You can add these filters yourself and see if \nit helps.  Please let us know.",
    "Closing this one since the support for platform filter has been added.\nThe addition of the proper markup in SWT manifest is covered by bug #87833.\n"
  ],
  "commentCreationDates": [
    "2005-02-11T15:03:18+01:00",
    "2005-02-11T15:07:26+01:00",
    "2005-02-11T15:35:36+01:00",
    "2005-02-11T16:57:41+01:00",
    "2005-02-14T07:17:40+01:00",
    "2005-02-14T14:12:42+01:00",
    "2005-02-15T18:38:11+01:00",
    "2005-02-22T11:50:51+01:00",
    "2005-02-24T05:30:28+01:00",
    "2005-03-14T19:51:18+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.UnsatisfiedLinkError",
      "message": "MB_CUR_MAX",
      "elements": [
        {
          "method": "org.eclipse.swt.internal.motif.OS.MB_CUR_MAX",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.motif.OS.\u003cclinit\u003e",
          "source": "OS.java:35"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.\u003cclinit\u003e",
          "source": "Device.java:89"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createDisplay",
          "source": "Workbench.java:299"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createDisplay",
          "source": "PlatformUI.java:156"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.createDisplay",
          "source": "IDEApplication.java:127"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:78"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:220"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:710"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:694"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "84996",
      "date": "2005-02-11T15:03:18+01:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "major"
    }
  ],
  "groupId": "84996",
  "bugId": "84996",
  "date": "2005-02-11T15:03:18+01:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "major"
}