{
  "comments": [
    "Using RC4\n\norg.eclipse.swt.SWTException: Invalid thread access\nat org.eclipse.swt.SWT.error(SWT.java:3374)\nat org.eclipse.swt.SWT.error(SWT.java:3297)\nat org.eclipse.swt.SWT.error(SWT.java:3268)\nat org.eclipse.swt.widgets.Widget.error(Widget.java:435)\nat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:271)\nat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:357)\nat org.eclipse.jface.window.Window.createShell(Window.java:482)\nat org.eclipse.jface.window.Window.create(Window.java:425)\nat org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1124)\nat org.eclipse.jface.window.Window.open(Window.java:785)\nat org.eclipse.rse.files.ui.resources.UniversalFileTransferUtility.checkForCollision(UniversalFileTransferUtility.java:2030)\nat org.eclipse.rse.files.ui.resources.UniversalFileTransferUtility.copyWorkspaceResourceToRemote(UniversalFileTransferUtility.java:1169)\nat org.eclipse.rse.files.ui.view.SystemViewRemoteFileAdapter.doDrop(SystemViewRemoteFileAdapter.java:1975)\nat org.eclipse.rse.files.ui.view.SystemViewRemoteFileAdapter.doDrop(SystemViewRemoteFileAdapter.java:1947)\nat org.eclipse.rse.ui.view.SystemDNDTransferRunnable.transferNonRSEResources(SystemDNDTransferRunnable.java:372)\nat org.eclipse.rse.ui.view.SystemDNDTransferRunnable.run(SystemDNDTransferRunnable.java:575)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Created an attachment (id\u003d53487)\nA pathch that should fix the problem\n\nI have not tested it. The patch fixes another potential thread access problem as well....",
    "The patch looks good, the only problem I see is that Display.getCurrent() might return null in some cases, this should probably be checked. What do you think about this Michael?\n\nDaveM - you\u0027ve had similar fixes before. How risky do you think is this patch, can we apply it for 1.0 ?",
    "With the patch, I still hit an exception, because in my case Display.getCurrent() returns null.  If I change it to the following things seem okay:\n\n\tprivate static void runInDisplayThread(Runnable runnable) {\n\t\tDisplay display \u003d Display.getCurrent();\n\t\tif (display \u003d\u003d null)\n\t\t\tdisplay \u003d Display.getDefault();\n\t\tif(Thread.currentThread()\u003d\u003ddisplay.getThread()) {\n\t\t\t// if we are in the display thread we can call the method directly\n\t\t\trunnable.run();\n\t\t} else {\n\t\t\t// we execute it in the Display Thread but we wait for the result...\n\t\t\tdisplay.syncExec(runnable);\n\t\t}\n\t}\n\nAny thoughts on that?",
    "I\u0027ve seen cases where even Display.getDefault() returned null -- namely, during workbench shutdown. I\u0027m not sure whether this would be an issue here since the corresponding code (job) would typically not run during system shutdown. Also, the corresponding SWT / display-related stuff would be hosed in this case anyways.\n\nSo, for me the change looks ok if it looks ok for you.\n\n",
    "Okay, I\u0027ll apply the patch along with my modification.",
    "I\u0027ve applied the patch and the modification.",
    "Oops getCurrent() was a typo. What I meant was getDefault(). I think getCurrent() returns null when you are not in the UI thread....",
    "Michael - could you please tell us what you did in order to get that exception?\n\nI suppose that you did a drag\u0026drop or copy\u0026paste of a file to a target folder where a file with that name already existed. But perhaps some additional prerequisites were necessary to force that happen in a background job?\n\nI couldn\u0027t reproduce the issue any more with I20061109-0800 (tried on both Windows and Linux). Please try yourself and set it verified.",
    "With the old code you could get the exception by doing a copy paste from the Navigator to a folder in RSE.",
    "Thanks Dave. Since you saw the problem with the old code, can you verify that it works with the new one?",
    "Closing."
  ],
  "commentCreationDates": [
    "2006-11-08T19:59:08+01:00",
    "2006-11-08T20:20:49+01:00",
    "2006-11-09T09:59:18+01:00",
    "2006-11-09T14:21:48+01:00",
    "2006-11-09T14:35:41+01:00",
    "2006-11-09T14:49:12+01:00",
    "2006-11-09T14:53:41+01:00",
    "2006-11-09T17:06:18+01:00",
    "2006-11-10T14:15:12+01:00",
    "2006-11-10T15:47:49+01:00",
    "2006-11-10T16:12:56+01:00",
    "2006-11-23T11:53:04+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3374"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3268"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:435"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:271"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:357"
        },
        {
          "method": "org.eclipse.jface.window.Window.createShell",
          "source": "Window.java:482"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:425"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.create",
          "source": "Dialog.java:1124"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:785"
        },
        {
          "method": "org.eclipse.rse.files.ui.resources.UniversalFileTransferUtility.checkForCollision",
          "source": "UniversalFileTransferUtility.java:2030"
        },
        {
          "method": "org.eclipse.rse.files.ui.resources.UniversalFileTransferUtility.copyWorkspaceResourceToRemote",
          "source": "UniversalFileTransferUtility.java:1169"
        },
        {
          "method": "org.eclipse.rse.files.ui.view.SystemViewRemoteFileAdapter.doDrop",
          "source": "SystemViewRemoteFileAdapter.java:1975"
        },
        {
          "method": "org.eclipse.rse.files.ui.view.SystemViewRemoteFileAdapter.doDrop",
          "source": "SystemViewRemoteFileAdapter.java:1947"
        },
        {
          "method": "org.eclipse.rse.ui.view.SystemDNDTransferRunnable.transferNonRSEResources",
          "source": "SystemDNDTransferRunnable.java:372"
        },
        {
          "method": "org.eclipse.rse.ui.view.SystemDNDTransferRunnable.run",
          "source": "SystemDNDTransferRunnable.java:575"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "163844",
      "date": "2006-11-08T19:59:08+01:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "163844",
  "bugId": "163844",
  "date": "2006-11-08T19:59:08+01:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}