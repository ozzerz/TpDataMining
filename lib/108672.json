{
  "comments": [
    "M20050831-1200\n\nTake the following attache Java file and execute convert to enhanced for loop\n(note that the formatting of the file is important; the bug doesn\u0027t happen when\ne..hasMoreElements(); is on one line). Got get the following exception. \n\n\norg.eclipse.jface.text.Assert$AssertionFailedException: Assertion failed:\nat org.eclipse.jface.text.Assert.isTrue(Assert.java:189)\nat org.eclipse.jface.text.Assert.isTrue(Assert.java:174)\nat org.eclipse.text.edits.TextEdit.internalSetParent(TextEdit.java:711)\nat org.eclipse.text.edits.TextEdit.internalAdd(TextEdit.java:744)\nat org.eclipse.text.edits.TextEdit.addChild(TextEdit.java:332)\nat org.eclipse.text.edits.MoveSourceEdit.insert(MoveSourceEdit.java:351)\nat org.eclipse.text.edits.MoveSourceEdit.insertEdits(MoveSourceEdit.java:334)\nat\norg.eclipse.text.edits.MoveSourceEdit.applyTransformation(MoveSourceEdit.java:288)\nat\norg.eclipse.text.edits.MoveSourceEdit.performSourceComputation(MoveSourceEdit.java:238)\nat\norg.eclipse.text.edits.MoveSourceEdit.traverseSourceComputation(MoveSourceEdit.java:222)\nat\norg.eclipse.text.edits.TextEditProcessor.computeSources(TextEditProcessor.java:201)\nat org.eclipse.text.edits.TextEditProcessor.executeDo(TextEditProcessor.java:184)\nat org.eclipse.text.edits.TextEdit.dispatchPerformEdits(TextEdit.java:700)\nat org.eclipse.text.edits.TextEditProcessor.performEdits(TextEditProcessor.java:153)\nat org.eclipse.ltk.core.refactoring.TextChange.perform(TextChange.java:359)\nat\norg.eclipse.jdt.internal.ui.text.correction.ChangeCorrectionProposal.performChange(ChangeCorrectionProposal.java:114)\nat\norg.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.performChange(CUCorrectionProposal.java:279)\nat\norg.eclipse.jdt.internal.ui.text.correction.LinkedCorrectionProposal.performChange(LinkedCorrectionProposal.java:231)\nat\norg.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.apply(CUCorrectionProposal.java:309)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.insertProposal(CompletionProposalPopup.java:512)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.selectProposalWithMask(CompletionProposalPopup.java:458)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.verifyKey(CompletionProposalPopup.java:837)\nat\norg.eclipse.jface.text.contentassist.ContentAssistant$InternalListener.verifyKey(ContentAssistant.java:630)\nat\norg.eclipse.jface.text.TextViewer$VerifyKeyListenersManager.verifyKey(TextViewer.java:414)\nat org.eclipse.swt.custom.StyledTextListener.handleEvent(StyledTextListener.java:55)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)\nat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:660)\nat org.eclipse.swt.custom.StyledText.handleKeyDown(StyledText.java:5122)\nat org.eclipse.swt.custom.StyledText$7.handleEvent(StyledText.java:4857)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)\nat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:880)\nat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:876)\nat org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1190)\nat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3135)\nat org.eclipse.swt.widgets.Control.windowProc(Control.java:3038)\nat org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)\nat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\nat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\nat org.eclipse.core.launcher.Main.run(Main.java:973)\nat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Created an attachment (id\u003d26800)\nThe package containing the source\n",
    "The exception doesn\u0027t happen for \n\n\tpublic void bar() {\n\t\tList\u003cInteger\u003e list\u003d new ArrayList\u003cInteger\u003e();\n\t\tfor (Iterator iter \u003d list.iterator(); iter\n\t\t\t\t.hasNext();) {\n\t\t\tInteger integer \u003d (Integer) iter.next();\n\t\t}\n\t}\n\nhowever the formatting of the result looks wired.\n\nTobias, can you please investigate. It might be a problem in AST rewriting or\ntext edits.",
    "For some reason, the LocalTextEditProcessor created during change generation \ntries to set the parent of a range marker twice while computing the texts of \nmove edits.",
    "The problem is in the MoveSourceEdit when the text to be moved is transformed\nvia the ISourceModifier. The code didn\u0027t correctly handle the case where two\nedits have to be moved under the same edit to be inserted to keep the tree\nconsistent.\n\nThe patch fixes another problem with splitting up edits when the overlap with\nexisting ones.",
    "Created an attachment (id\u003d26947)\nCode patch\n",
    "Created an attachment (id\u003d26948)\nAdditional test cases\n",
    "Daniel, can you please release the code. I don\u0027t have commit rights for text ;-)",
    "*** Bug 109850 has been marked as a duplicate of this bug. ***",
    "Fixed in HEAD.",
    "verified in 20050920-0010\n\nNo exception thrown anymore. The resulting code is a bit strangly formatted,\nwill open a new bug (AST rewrite problem)"
  ],
  "commentCreationDates": [
    "2005-09-02T16:01:10+02:00",
    "2005-09-02T16:43:56+02:00",
    "2005-09-02T16:47:16+02:00",
    "2005-09-02T17:34:36+02:00",
    "2005-09-08T15:47:31+02:00",
    "2005-09-08T15:48:45+02:00",
    "2005-09-08T15:49:07+02:00",
    "2005-09-08T15:50:57+02:00",
    "2005-09-19T10:46:30+02:00",
    "2005-09-19T10:46:53+02:00",
    "2005-09-20T18:51:22+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jface.text.Assert$AssertionFailedException",
      "message": "Assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.jface.text.Assert.isTrue",
          "source": "Assert.java:189"
        },
        {
          "method": "org.eclipse.jface.text.Assert.isTrue",
          "source": "Assert.java:174"
        },
        {
          "method": "org.eclipse.text.edits.TextEdit.internalSetParent",
          "source": "TextEdit.java:711"
        },
        {
          "method": "org.eclipse.text.edits.TextEdit.internalAdd",
          "source": "TextEdit.java:744"
        },
        {
          "method": "org.eclipse.text.edits.TextEdit.addChild",
          "source": "TextEdit.java:332"
        },
        {
          "method": "org.eclipse.text.edits.MoveSourceEdit.insert",
          "source": "MoveSourceEdit.java:351"
        },
        {
          "method": "org.eclipse.text.edits.MoveSourceEdit.insertEdits",
          "source": "MoveSourceEdit.java:334"
        },
        {
          "method": "org.eclipse.text.edits.MoveSourceEdit.applyTransformation",
          "source": "MoveSourceEdit.java:288"
        },
        {
          "method": "org.eclipse.text.edits.MoveSourceEdit.performSourceComputation",
          "source": "MoveSourceEdit.java:238"
        },
        {
          "method": "org.eclipse.text.edits.MoveSourceEdit.traverseSourceComputation",
          "source": "MoveSourceEdit.java:222"
        },
        {
          "method": "org.eclipse.text.edits.TextEditProcessor.computeSources",
          "source": "TextEditProcessor.java:201"
        },
        {
          "method": "org.eclipse.text.edits.TextEditProcessor.executeDo",
          "source": "TextEditProcessor.java:184"
        },
        {
          "method": "org.eclipse.text.edits.TextEdit.dispatchPerformEdits",
          "source": "TextEdit.java:700"
        },
        {
          "method": "org.eclipse.text.edits.TextEditProcessor.performEdits",
          "source": "TextEditProcessor.java:153"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.TextChange.perform",
          "source": "TextChange.java:359"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.ChangeCorrectionProposal.performChange",
          "source": "ChangeCorrectionProposal.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.performChange",
          "source": "CUCorrectionProposal.java:279"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.LinkedCorrectionProposal.performChange",
          "source": "LinkedCorrectionProposal.java:231"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.apply",
          "source": "CUCorrectionProposal.java:309"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.insertProposal",
          "source": "CompletionProposalPopup.java:512"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.selectProposalWithMask",
          "source": "CompletionProposalPopup.java:458"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.verifyKey",
          "source": "CompletionProposalPopup.java:837"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant$InternalListener.verifyKey",
          "source": "ContentAssistant.java:630"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$VerifyKeyListenersManager.verifyKey",
          "source": "TextViewer.java:414"
        },
        {
          "method": "org.eclipse.swt.custom.StyledTextListener.handleEvent",
          "source": "StyledTextListener.java:55"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:867"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:852"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:660"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleKeyDown",
          "source": "StyledText.java:5122"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$7.handleEvent",
          "source": "StyledText.java:4857"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:867"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:852"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:880"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:876"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.wmChar",
          "source": "Widget.java:1190"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3135"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3038"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3706"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1656"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2711"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "108672",
      "date": "2005-09-02T16:01:10+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "108672",
  "bugId": "108672",
  "date": "2005-09-02T16:01:10+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}