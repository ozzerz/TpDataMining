{
  "comments": [
    "trying to run mylar headless.  i\u0027m only using context.core, tasks.core and bugzilla.core. i\u0027ve got all the necessary eclipse.core.runtime stuff figured out, but as soon as i attempt to start mylar.context.core, mylar.context.core.ContextCorePlugin.start() gets blown up by:\n\n...\nCaused by: java.lang.NullPointerException\n        at org.eclipse.mylar.internal.context.core.MylarContextManager.getFileForContext(MylarContextManager.java:550)\n        at org.eclipse.mylar.internal.context.core.MylarContextManager.loadActivityMetaContext(MylarContextManager.java:116)\n        at org.eclipse.mylar.internal.context.core.MylarContextManager.\u003cinit\u003e(MylarContextManager.java:111)\n        at org.eclipse.mylar.context.core.ContextCorePlugin.start(ContextCorePlugin.java:126)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:993)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:987)\n        ... 13 more\n\nupon investigation, i have found that the only subclass of the mylar.context.core.AbstractContextStore is FileBasedContextStore, which is inconveniently located in mylar.tasks.ui.\n\nfrom org.eclipse.mylar.tasks.ui/plugin.xml:\n---\n    \u003cextension\n         point\u003d\"org.eclipse.mylar.context.core.bridges\"\u003e\n   \t  \t\u003ccontextStore class\u003d\"org.eclipse.mylar.internal.tasks.ui.FileBasedContextStore\"/\u003e\n    \u003c/extension\u003e\n---\n\nI get the feeling this needs to be moved somewhere that it is available headless.  i\u0027ll look into a solution after lunch.",
    "What you need to do is have your extension extend that extension point to provide its own context store the way that mylar.tasks.ui does.  Simply extend AbstracContextStore and point and the file that you would like it to use.  I changed the name of FileBasedContextStore to WorkspaceAwareContextStore to make its role more clear.  Once you have got this going it would be great if you could updated the following page with instructions:\n\nhttp://wiki.eclipse.org/index.php/Mylar_Integrator_Reference#Using_the_context.core_API",
    "Reopen if you can\u0027t get it going with the current extension point.",
    "Got it working, thanks Mik.\n\nWiki updated.\n\nWould it be better to call it WorkbenchAware? A headless eclipse still has the notion of a workspace...",
    "We support a headless configuration without eclipse.core.resources, hence one that is Workspace but not Workbench aware.  But this is a subtle point and the whole AbstractContextStore API will need a rev anyway (e.g. not to be dependent on java.io.File).\n\nThanks for updating the Wiki."
  ],
  "commentCreationDates": [
    "2006-07-27T21:05:12+02:00",
    "2006-07-27T23:24:35+02:00",
    "2006-07-27T23:25:22+02:00",
    "2006-07-27T23:45:47+02:00",
    "2006-07-28T00:06:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.mylar.internal.context.core.MylarContextManager.getFileForContext",
          "source": "MylarContextManager.java:550"
        },
        {
          "method": "org.eclipse.mylar.internal.context.core.MylarContextManager.loadActivityMetaContext",
          "source": "MylarContextManager.java:116"
        },
        {
          "method": "org.eclipse.mylar.internal.context.core.MylarContextManager.\u003cinit\u003e",
          "source": "MylarContextManager.java:111"
        },
        {
          "method": "org.eclipse.mylar.context.core.ContextCorePlugin.start",
          "source": "ContextCorePlugin.java:126"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextImpl.java:993"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:987"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "152047",
      "date": "2006-07-27T21:05:12+02:00",
      "product": "Mylyn",
      "component": "Bugzilla",
      "severity": "normal"
    }
  ],
  "groupId": "152047",
  "bugId": "152047",
  "date": "2006-07-27T21:05:12+02:00",
  "product": "Mylyn",
  "component": "Bugzilla",
  "severity": "normal"
}