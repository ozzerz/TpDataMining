{
  "comments": [
    "3.0 M7\n\nIf you open an extention point schema in read-only mode, then open another\nschema in edit mode the property page is read only.  Conversely, if you open in\nedit first a CCE is thrown (see stacktrace below)\n\nTest Steps:\n1. Open a plugin that is not in the workspace (from the plugins view)\n2. go to extension points tab\n3. Open schema\n4. double click on an attribute\n5. Open the schema of a plugin that is in the workspace\n6. view properties of an attribute\n7. Observe Property page: fields that should be combos show numbers and all\nfileds are read only\n\nThe problem is that the descriptors are not being updated when the object input\nchanges, the input type changes and is not reflected in the descriptors.  This\nmay be happening with other editors too, but i haven\u0027t checked.\n\nAdding the folling to AttributePropertySource seemd to fix it (although it is\noverkill):\npublic void setSourceObject(Object newSourceObject) {\n    descriptors \u003d null;\n    super.setSourceObject(newSourceObject);\n}\n\nStacktrace when loading Editable schema first:\n\nError Feb 25, 2004 20:02:08.290 Problems occurred when invoking code from\nplug-in: \"org.eclipse.core.runtime\".\njava.lang.ClassCastException\nat\norg.eclipse.pde.internal.ui.editor.schema.SchemaObjectPropertySource$ComboProvider.getText(SchemaObjectPropertySource.java:30)\nat\norg.eclipse.ui.views.properties.PropertySheetEntry.getValueAsString(PropertySheetEntry.java:395)\nat\norg.eclipse.ui.views.properties.PropertySheetViewer.updateEntry(PropertySheetViewer.java:1073)\nat\norg.eclipse.ui.views.properties.PropertySheetViewer.createItem(PropertySheetViewer.java:338)\nat\norg.eclipse.ui.views.properties.PropertySheetViewer.updateChildrenOf(PropertySheetViewer.java:1030)\nat\norg.eclipse.ui.views.properties.PropertySheetViewer.access$2(PropertySheetViewer.java:956)\nat\norg.eclipse.ui.views.properties.PropertySheetViewer$2.childEntriesChanged(PropertySheetViewer.java:292)\nat\norg.eclipse.ui.views.properties.PropertySheetEntry.fireChildEntriesChanged(PropertySheetEntry.java:245)\nat\norg.eclipse.ui.views.properties.PropertySheetEntry.refreshChildEntries(PropertySheetEntry.java:460)\nat\norg.eclipse.ui.views.properties.PropertySheetEntry.setValues(PropertySheetEntry.java:611)\nat\norg.eclipse.ui.views.properties.PropertySheetViewer.setInput(PropertySheetViewer.java:776)\nat\norg.eclipse.ui.views.properties.PropertySheetPage.selectionChanged(PropertySheetPage.java:377)\nat\norg.eclipse.pde.internal.ui.editor.schema.SchemaPropertySheet.selectionChanged(SchemaPropertySheet.java:98)\nat\norg.eclipse.pde.internal.ui.editor.PDEMultiPagePropertySheet.selectionChanged(PDEMultiPagePropertySheet.java:96)\nat\norg.eclipse.ui.views.properties.PropertySheet.selectionChanged(PropertySheet.java:185)\nat\norg.eclipse.ui.internal.AbstractSelectionService$3.run(AbstractSelectionService.java:153)\nat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:819)\nat org.eclipse.core.runtime.Platform.run(Platform.java:493)\nat\norg.eclipse.ui.internal.AbstractSelectionService.fireSelection(AbstractSelectionService.java:151)\nat\norg.eclipse.ui.internal.AbstractSelectionService$1.selectionChanged(AbstractSelectionService.java:66)\nat\norg.eclipse.pde.internal.ui.editor.PDEMultiSelectionProvider.setSelection(PDEMultiSelectionProvider.java:74)\nat\norg.eclipse.pde.internal.ui.editor.PDEMultiPageEditor.setSelection(PDEMultiPageEditor.java:598)\nat org.eclipse.pde.internal.ui.editor.PDEFormPage.setSelection(PDEFormPage.java:188)\nat\norg.eclipse.pde.internal.ui.editor.schema.ElementSection.selectionChanged(ElementSection.java:297)\nat\norg.eclipse.pde.internal.ui.editor.TreeSection$PartAdapter.selectionChanged(TreeSection.java:28)\nat org.eclipse.pde.internal.ui.parts.TreePart$1.selectionChanged(TreePart.java:49)\nat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:159)\nat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:819)\nat org.eclipse.core.runtime.Platform.run(Platform.java:493)\nat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:157)\nat\norg.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1310)\nat\norg.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:666)\nat\norg.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:690)\nat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:178)\nat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:173)\nat org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2348)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2029)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1550)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1526)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:265)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:257)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:104)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\nat org.eclipse.core.launcher.Main.run(Main.java:742)\nat org.eclipse.core.launcher.Main.main(Main.java:581)",
    "Please investigate if it still occurs in the new editor.",
    "Hi Wassim,\n\nThis problem does occur with the new editor. I\u0027ll investigate this a bit further :(",
    "Suggested fix seems to do the trick :)\n\nFixed and released to head :)",
    "Reopening...",
    "I suspect this may be causing Bug #64789.\n\nThe suggested fix was taked out of head.  As for why this bug is happening, it\u0027s\nsomething I\u0027ll have to take a look at. ",
    "This bug was certainly a doozy :-)\n\nFirst, combo boxes commonly refer to their string values by their indices.\nSimple enough.  The getText() method that threw our menacing exception here was\nexpecting to get that integer index from getPropertyValue() but instead was\ngiven the string value. \n\nWe only use this getText() method from SchemaObjectPropertySource when we open\nan editable schema first.  Thus, the bug fix is to return an integer when using\nSchemaObjectPropertySource and a string where otherwise needed.  Doing this fix\nensures that we can see the string values of all combo boxes whether in\nread/edit mode.  (Before the bug fix, we would see numerical indices in\nread-only combo boxes which doesn\u0027t help the user much).\n\nNote that we still have the problem where your properties view will stay in\nread-only mode if you open a read-only schema first.  By extension, your\nproperties view will be in edit mode if you open an editable schema first (the\nUI will entertain changes to a read-only doc but it will not modify the actual\ndocument).  This is not the problem defined in the bug report, nor is it\n(seemingly) a problem with the schema editor.  \n\nFixed and released to head as per over a week ago :)\n"
  ],
  "commentCreationDates": [
    "2004-02-25T11:46:09+01:00",
    "2004-05-03T08:19:11+02:00",
    "2004-05-04T06:06:37+02:00",
    "2004-05-28T02:57:42+02:00",
    "2004-06-02T23:35:37+02:00",
    "2004-06-03T18:48:30+02:00",
    "2004-08-24T22:04:17+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.ui.editor.schema.SchemaObjectPropertySource$ComboProvider.getText",
          "source": "SchemaObjectPropertySource.java:30"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.getValueAsString",
          "source": "PropertySheetEntry.java:395"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.updateEntry",
          "source": "PropertySheetViewer.java:1073"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.createItem",
          "source": "PropertySheetViewer.java:338"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.updateChildrenOf",
          "source": "PropertySheetViewer.java:1030"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.access$2",
          "source": "PropertySheetViewer.java:956"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer$2.childEntriesChanged",
          "source": "PropertySheetViewer.java:292"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.fireChildEntriesChanged",
          "source": "PropertySheetEntry.java:245"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.refreshChildEntries",
          "source": "PropertySheetEntry.java:460"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetEntry.setValues",
          "source": "PropertySheetEntry.java:611"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.setInput",
          "source": "PropertySheetViewer.java:776"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetPage.selectionChanged",
          "source": "PropertySheetPage.java:377"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.schema.SchemaPropertySheet.selectionChanged",
          "source": "SchemaPropertySheet.java:98"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.PDEMultiPagePropertySheet.selectionChanged",
          "source": "PDEMultiPagePropertySheet.java:96"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheet.selectionChanged",
          "source": "PropertySheet.java:185"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$3.run",
          "source": "AbstractSelectionService.java:153"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:819"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:493"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.fireSelection",
          "source": "AbstractSelectionService.java:151"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$1.selectionChanged",
          "source": "AbstractSelectionService.java:66"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.PDEMultiSelectionProvider.setSelection",
          "source": "PDEMultiSelectionProvider.java:74"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.PDEMultiPageEditor.setSelection",
          "source": "PDEMultiPageEditor.java:598"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.PDEFormPage.setSelection",
          "source": "PDEFormPage.java:188"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.schema.ElementSection.selectionChanged",
          "source": "ElementSection.java:297"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.TreeSection$PartAdapter.selectionChanged",
          "source": "TreeSection.java:28"
        },
        {
          "method": "org.eclipse.pde.internal.ui.parts.TreePart$1.selectionChanged",
          "source": "TreePart.java:49"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:159"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:819"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:493"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:157"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1310"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:666"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:690"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:178"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:173"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:309"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2029"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1550"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1526"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:265"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:257"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:104"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "53035",
      "date": "2004-02-25T11:46:09+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "53035",
  "bugId": "53035",
  "date": "2004-02-25T11:46:09+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}