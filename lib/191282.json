{
  "comments": [
    "I have a JPA project that does not contain any entities.  Choose a java file and edit the class name incorrectly by just typing in the source code to change the name.  This causes an NPE until you correct the class name:\n\njava.lang.NullPointerException\n\tat org.eclipse.jpt.core.internal.content.java.JavaPersistentType.includes(JavaPersistentType.java:790)\n\tat org.eclipse.jpt.core.internal.content.java.JpaCompilationUnit.getContentNode(JpaCompilationUnit.java:344)\n\tat org.eclipse.jpt.core.internal.JpaFile.getContentNode(JpaFile.java:330)\n\tat org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant.calculateSelection(TextEditorSelectionParticipant.java:88)\n\tat org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant.editorSelectionChanged(TextEditorSelectionParticipant.java:64)\n\tat org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant.access$2(TextEditorSelectionParticipant.java:63)\n\tat org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant$EditorSelectionListener.selectionChanged(TextEditorSelectionParticipant.java:166)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2550)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2502)\n\tat org.eclipse.jface.text.TextViewer$5.run(TextViewer.java:2481)",
    "Once I renamed the class back, I get this exception every time I switch to a different java class in the project:\n\njava.lang.NullPointerException\n\tat org.eclipse.jpt.core.internal.content.java.JavaEObject.getRoot(JavaEObject.java:72)\n\tat org.eclipse.jpt.core.internal.content.java.JavaEObject.getJpaFile(JavaEObject.java:68)\n\tat org.eclipse.jpt.ui.internal.views.JpaStructureView$StructureComposite.select(JpaStructureView.java:167)\n\tat org.eclipse.jpt.ui.internal.views.JpaStructureView$StructureComposite.access$2(JpaStructureView.java:151)\n\tat org.eclipse.jpt.ui.internal.views.JpaStructureView.select(JpaStructureView.java:76)\n\tat org.eclipse.jpt.ui.internal.selection.JpaStructureSelectionParticipant.selectionChanged(JpaStructureSelectionParticipant.java:37)\n\tat org.eclipse.jpt.ui.internal.selection.SelectionManager.fireSelectionChange(SelectionManager.java:178)\n\tat org.eclipse.jpt.ui.internal.selection.SelectionManager.select(SelectionManager.java:157)\n\tat org.eclipse.jpt.ui.internal.selection.SelectionManager.selectPart(SelectionManager.java:98)\n\tat org.eclipse.jpt.ui.internal.selection.SelectionManager.access$3(SelectionManager.java:95)\n\tat org.eclipse.jpt.ui.internal.selection.SelectionManager$PartListener.partActivated(SelectionManager.java:224)\n",
    "There seem to be a number of exceptions that will be encountered when the class name doesn\u0027t resolve.  Errors occur when moving the cursor, switching types, and any time there is a model sync.  After the class name is reverted to the correct name, all of these problems seem to go away.",
    "Created an attachment (id\u003d70914)\nproposed patch\n\nThis needs some review, but it seems to make sense given the IType info we have from the JDT in this situation",
    "This patch is not valid, the check for isResolved() is causing us to not find the default attributes in an orm.xml PersistentType",
    "Un-targeting as this is not a very likely thing for a user to do, and the user would be able to determine what went wrong if this issue is encountered.  Deferred to post 1.0.",
    "Created an attachment (id\u003d71045)\nproposed patch\n\nAttaching a patch with the null checks and exception catching I\u0027ve added so far to fix this bug.  It is touching a lot of different classes and I am not yet happy with the patch. I just don\u0027t want to lose what I have done so far, it could be useful when myself or someone else looks at this at a later date.",
    "Revisit for 1.0.1.",
    "Created an attachment (id\u003d77034)\nproposed patch - 1_0_maintenance stream\n\nThis patch changes the order that we initialize the JavaPersistentType.  Also updates the JpaCompilationUnitItemProvider to listen to changes in the types collection.",
    "Created an attachment (id\u003d77041)\nproposed patch - HEAD stream\n\n",
    "fixed in maintenance and head",
    "Reopening, the first NPE still occurs.  The bigger problem with multiple exceptions that won\u0027t go away even once the class is named correctly has been fixed.",
    "Created an attachment (id\u003d77888)\nanother patch - maintenance\n\nThis patch checks for a null textRange in JavaPersistentType.includes(int)",
    "This is ugly because once you stumble upon this error condition, we continue to falter until the underlying cause is undone.\n\nA low risk fix for this issue was found and is attached.  Tested and approved.\n\n",
    "applied patch to maintenance and HEAD"
  ],
  "commentCreationDates": [
    "2007-06-06T17:18:22+02:00",
    "2007-06-06T17:19:47+02:00",
    "2007-06-11T17:09:29+02:00",
    "2007-06-12T00:11:31+02:00",
    "2007-06-12T00:34:07+02:00",
    "2007-06-12T16:49:56+02:00",
    "2007-06-12T17:58:46+02:00",
    "2007-07-24T23:19:23+02:00",
    "2007-08-27T16:58:01+02:00",
    "2007-08-27T17:47:08+02:00",
    "2007-08-27T17:47:32+02:00",
    "2007-09-07T16:43:23+02:00",
    "2007-09-07T16:59:15+02:00",
    "2007-09-10T19:42:31+02:00",
    "2007-09-10T20:14:54+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaPersistentType.includes",
          "source": "JavaPersistentType.java:790"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JpaCompilationUnit.getContentNode",
          "source": "JpaCompilationUnit.java:344"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaFile.getContentNode",
          "source": "JpaFile.java:330"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant.calculateSelection",
          "source": "TextEditorSelectionParticipant.java:88"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant.editorSelectionChanged",
          "source": "TextEditorSelectionParticipant.java:64"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant.access$2",
          "source": "TextEditorSelectionParticipant.java:63"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.TextEditorSelectionParticipant$EditorSelectionListener.selectionChanged",
          "source": "TextEditorSelectionParticipant.java:166"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2550"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2502"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$5.run",
          "source": "TextViewer.java:2481"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191282",
      "date": "2007-06-06T17:18:22+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaEObject.getRoot",
          "source": "JavaEObject.java:72"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaEObject.getJpaFile",
          "source": "JavaEObject.java:68"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.views.JpaStructureView$StructureComposite.select",
          "source": "JpaStructureView.java:167"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.views.JpaStructureView$StructureComposite.access$2",
          "source": "JpaStructureView.java:151"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.views.JpaStructureView.select",
          "source": "JpaStructureView.java:76"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.JpaStructureSelectionParticipant.selectionChanged",
          "source": "JpaStructureSelectionParticipant.java:37"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.SelectionManager.fireSelectionChange",
          "source": "SelectionManager.java:178"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.SelectionManager.select",
          "source": "SelectionManager.java:157"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.SelectionManager.selectPart",
          "source": "SelectionManager.java:98"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.SelectionManager.access$3",
          "source": "SelectionManager.java:95"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.selection.SelectionManager$PartListener.partActivated",
          "source": "SelectionManager.java:224"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "191282",
      "date": "2007-06-06T17:19:47+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "major"
    }
  ],
  "groupId": "191282",
  "bugId": "191282",
  "date": "2007-06-06T17:18:22+02:00",
  "product": "Dali JPA Tools",
  "component": "General",
  "severity": "major"
}