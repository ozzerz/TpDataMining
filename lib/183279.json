{
  "comments": [
    "To Reproduce:\n-Create a new project that uses DB connection with PetClinic DDL\n-Generate Entities for all tables\n-Right-click persistence.xml and JPA Tools-\u003eSynchronize Classes\n\nPersistence.xml is synchronized, but the following exception occurs:\n\n\njava.util.ConcurrentModificationException\nat org.eclipse.emf.common.util.BasicEList$EIterator.checkModCount(BasicEList.java:1379)\nat org.eclipse.emf.common.util.BasicEList$EIterator.doNext(BasicEList.java:1327)\nat org.eclipse.emf.common.util.BasicEList$EIterator.next(BasicEList.java:1313)\nat org.eclipse.jpa.core.internal.platform.PersistenceUnitContext.buildJavaClassesContexts(PersistenceUnitContext.java:109)\nat org.eclipse.jpa.core.internal.platform.PersistenceUnitContext.\u003cinit\u003e(PersistenceUnitContext.java:65)\nat org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.buildPersistenceUnitContexts(BaseJpaProjectContext.java:126)\nat org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.buildPersistenceUnitContexts(BaseJpaProjectContext.java:118)\nat org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.initialize(BaseJpaProjectContext.java:68)\nat org.eclipse.jpa.core.internal.platform.BaseContext.refreshDefaults(BaseContext.java:50)\nat org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.refreshDefaults(BaseJpaProjectContext.java:146)\nat org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.refreshDefaults(BaseJpaProjectContext.java:142)\nat org.eclipse.jpa.core.internal.platform.BaseJpaPlatform.resynch(BaseJpaPlatform.java:163)\nat org.eclipse.jpa.core.internal.JpaProject$1.run(JpaProject.java:143)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "I haven\u0027t been seeing this recently, so may have been fixed by some other change.  Leaving open for now just in case.",
    "Updated to note this still occurs:\n\n-Create a new project that uses DB connection (using Derby DB)\n-Generate Entities for all tables\n-Right-click persistence.xml and JPA Tools-\u003eSynchronize Classes\n\nSame error as previously reported.\n",
    "Un-targeting due to lower severity.",
    "I am having a similar problem when generating entities and selecting to synchronize with persistence.xml.\n\njava.util.NoSuchElementException\n\tat java.util.AbstractList$Itr.next(AbstractList.java:442)\n\tat org.eclipse.jpt.ui.internal.generic.EntitiesGenerator$GenerateEntitiesRunnable.run(EntitiesGenerator.java:132)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1779)\n\tat org.eclipse.jpt.ui.internal.generic.EntitiesGenerator.generate(EntitiesGenerator.java:88)\n\tat org.eclipse.jpt.ui.internal.generic.EntitiesGenerator.generate(EntitiesGenerator.java:56)\n\tat org.eclipse.jpt.ui.internal.BaseJpaPlatformUi.generateEntities(BaseJpaPlatformUi.java:66)\n\tat org.eclipse.jpt.ui.internal.actions.GenerateEntitiesAction.execute(GenerateEntitiesAction.java:27)\n\tat com.ibm.etools.webtools.jpa.dali.GenerateEntitiesActionExt.launchWizard(GenerateEntitiesActionExt.java:26)\n\n\nIt looks to be happening here on the call to next in EntitiesGenerator line 132...\n\nif (synchronizePersistenceXml) {\n\t\t\t\t\t// we currently only support *one* persistence.xml file per project\n\t\t\t\t\tIJpaFile resource \u003d project.getPlatform().validPersistenceXmlFiles().next();\n\t\t\t\t\tif (resource !\u003d null) {\n\t\t\t\t\t\tSynchronizeClassesJob job \u003d new SynchronizeClassesJob(resource.getFile());\n\t\t\t\t\t\tjob.schedule();\n\t\t\t\t\t}\n\t\t\t\t}\n\nMy procedure is to run the Generate Entities wizard.\nSelect all entities and tell it to synchronize with persistence.xml, then click Finish. When I do this I get the above exception.\n\nIf I do the same thing and don\u0027t tell it to synchronize then it finishes correctly with no exception.\n",
    "I am still seeing this as well, and it seems a bit more severe to me in that the entities do not actually get synchronized to the persistence.xml after the exception.  I have to then go to the pu.xml and right-click and select Synchronize Classes from there.  ",
    "Created an attachment (id\u003d77276)\nproposed patch - 1_0_maintenance stream\n\nThis patch fixes the conflicting Jobs we had running.  It also adds a simple (ie dumb) progress monitor to the entity generation and it now runs in the background instead of on the UI thread. This fix makes sure our model is updated with the new classes before trying to add the classes to the persistence.xml\n\nbug #187295 could still affect whether the classes are updated in the persistence.xml, but this is a separate issue.",
    "Checked patch in to maintenance and head streams."
  ],
  "commentCreationDates": [
    "2007-04-19T22:38:55+02:00",
    "2007-05-16T18:17:55+02:00",
    "2007-05-29T17:59:21+02:00",
    "2007-05-31T00:47:25+02:00",
    "2007-06-19T17:45:47+02:00",
    "2007-07-13T16:39:23+02:00",
    "2007-08-29T19:33:59+02:00",
    "2007-08-29T19:49:24+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.ConcurrentModificationException",
      "elements": [
        {
          "method": "org.eclipse.emf.common.util.BasicEList$EIterator.checkModCount",
          "source": "BasicEList.java:1379"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList$EIterator.doNext",
          "source": "BasicEList.java:1327"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList$EIterator.next",
          "source": "BasicEList.java:1313"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.PersistenceUnitContext.buildJavaClassesContexts",
          "source": "PersistenceUnitContext.java:109"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.PersistenceUnitContext.\u003cinit\u003e",
          "source": "PersistenceUnitContext.java:65"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.buildPersistenceUnitContexts",
          "source": "BaseJpaProjectContext.java:126"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.buildPersistenceUnitContexts",
          "source": "BaseJpaProjectContext.java:118"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.initialize",
          "source": "BaseJpaProjectContext.java:68"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseContext.refreshDefaults",
          "source": "BaseContext.java:50"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.refreshDefaults",
          "source": "BaseJpaProjectContext.java:146"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseJpaProjectContext.refreshDefaults",
          "source": "BaseJpaProjectContext.java:142"
        },
        {
          "method": "org.eclipse.jpa.core.internal.platform.BaseJpaPlatform.resynch",
          "source": "BaseJpaPlatform.java:163"
        },
        {
          "method": "org.eclipse.jpa.core.internal.JpaProject$1.run",
          "source": "JpaProject.java:143"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "183279",
      "date": "2007-04-19T22:38:55+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "normal"
    },
    {
      "exceptionType": "java.util.NoSuchElementException",
      "elements": [
        {
          "method": "java.util.AbstractList$Itr.next",
          "source": "AbstractList.java:442"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.generic.EntitiesGenerator$GenerateEntitiesRunnable.run",
          "source": "EntitiesGenerator.java:132"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1797"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1779"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.generic.EntitiesGenerator.generate",
          "source": "EntitiesGenerator.java:88"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.generic.EntitiesGenerator.generate",
          "source": "EntitiesGenerator.java:56"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.BaseJpaPlatformUi.generateEntities",
          "source": "BaseJpaPlatformUi.java:66"
        },
        {
          "method": "org.eclipse.jpt.ui.internal.actions.GenerateEntitiesAction.execute",
          "source": "GenerateEntitiesAction.java:27"
        },
        {
          "method": "com.ibm.etools.webtools.jpa.dali.GenerateEntitiesActionExt.launchWizard",
          "source": "GenerateEntitiesActionExt.java:26"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "183279",
      "date": "2007-06-19T17:45:47+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "normal"
    }
  ],
  "groupId": "183279",
  "bugId": "183279",
  "date": "2007-04-19T22:38:55+02:00",
  "product": "Dali JPA Tools",
  "component": "General",
  "severity": "normal"
}