{
  "comments": [
    "If a connector project\u0027s output path is set to one of its source folders exporting it as a RAR file fails with the following exceptions.  This only occurs with connectors and is due to the unique requirement that .class artifacts be nested in jar files inside the rar file.  The .class files are duplicated because of the logic required to determine which nested archive each .class file belongs to.\n\norg.eclipse.core.commands.ExecutionException: Error exporting\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactExportOperation.execute(J2EEArtifactExportOperation.java:97)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:376)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:401)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:352)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:242)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:214)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:202)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1$CatchThrowableRunnableWithProgress.run(DataModelWizard.java:211)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\nCaused by: org.eclipse.jst.j2ee.commonarchivecore.internal.exception.SaveFailureException: test/Test.class\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.ZipStreamSaveStrategyImpl.save(ZipStreamSaveStrategyImpl.java:142)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save(SaveStrategyImpl.java:133)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.saveFiles(SaveStrategyImpl.java:145)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save(SaveStrategyImpl.java:100)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.save(ArchiveImpl.java:1083)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save(SaveStrategyImpl.java:114)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.ZipStreamSaveStrategyImpl.save(ZipStreamSaveStrategyImpl.java:121)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save(SaveStrategyImpl.java:123)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.saveFiles(SaveStrategyImpl.java:145)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save(SaveStrategyImpl.java:100)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.save(ArchiveImpl.java:1083)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleFileImpl.save(ModuleFileImpl.java:161)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.saveAsNoReopen(ArchiveImpl.java:1178)\n\tat org.eclipse.jst.j2ee.internal.jca.archive.operations.ConnectorComponentExportOperation.export(ConnectorComponentExportOperation.java:44)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactExportOperation.execute(J2EEArtifactExportOperation.java:89)\n\t... 10 more\nCaused by: java.util.zip.ZipException: duplicate entry: test/Test.class\n\tat java.util.zip.ZipOutputStream.putNextEntry(ZipOutputStream.java:188)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.ZipStreamSaveStrategyImpl.save(ZipStreamSaveStrategyImpl.java:136)\n\t... 24 more",
    "Created an attachment (id\u003d59822)\npatch\n\nThe fix is to use a Set rather than a List to ensure .class files are only added once.",
    "I approve this patch - tested myself.",
    "+1\n",
    "fix checked into both 1.5.4 and 2.0 streams",
    "Is there a workaround for this issue?",
    "There is no workaround.",
    "+1",
    "+1",
    "verified",
    "closing"
  ],
  "commentCreationDates": [
    "2007-02-26T21:39:26+01:00",
    "2007-02-26T21:40:57+01:00",
    "2007-03-21T14:31:31+01:00",
    "2007-03-21T16:19:29+01:00",
    "2007-03-21T18:34:05+01:00",
    "2007-03-21T22:11:47+01:00",
    "2007-03-21T22:58:35+01:00",
    "2007-03-22T19:14:35+01:00",
    "2007-03-22T19:15:40+01:00",
    "2007-05-03T18:14:32+02:00",
    "2007-05-03T18:14:45+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.commands.ExecutionException",
      "message": "Error exporting",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactExportOperation.execute",
          "source": "J2EEArtifactExportOperation.java:97"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run",
          "source": "DataModelPausibleOperationImpl.java:376"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation",
          "source": "DataModelPausibleOperationImpl.java:401"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation",
          "source": "DataModelPausibleOperationImpl.java:352"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute",
          "source": "DataModelPausibleOperationImpl.java:242"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl",
          "source": "DataModelPausibleOperationImpl.java:214"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue",
          "source": "DataModelPausibleOperationImpl.java:89"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute",
          "source": "DataModelPausibleOperationImpl.java:202"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1$CatchThrowableRunnableWithProgress.run",
          "source": "DataModelWizard.java:211"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.jst.j2ee.commonarchivecore.internal.exception.SaveFailureException",
        "message": "test/Test.class",
        "elements": [
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.ZipStreamSaveStrategyImpl.save",
            "source": "ZipStreamSaveStrategyImpl.java:142"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save",
            "source": "SaveStrategyImpl.java:133"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.saveFiles",
            "source": "SaveStrategyImpl.java:145"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save",
            "source": "SaveStrategyImpl.java:100"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.save",
            "source": "ArchiveImpl.java:1083"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save",
            "source": "SaveStrategyImpl.java:114"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.ZipStreamSaveStrategyImpl.save",
            "source": "ZipStreamSaveStrategyImpl.java:121"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save",
            "source": "SaveStrategyImpl.java:123"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.saveFiles",
            "source": "SaveStrategyImpl.java:145"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.save",
            "source": "SaveStrategyImpl.java:100"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.save",
            "source": "ArchiveImpl.java:1083"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleFileImpl.save",
            "source": "ModuleFileImpl.java:161"
          },
          {
            "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.saveAsNoReopen",
            "source": "ArchiveImpl.java:1178"
          },
          {
            "method": "org.eclipse.jst.j2ee.internal.jca.archive.operations.ConnectorComponentExportOperation.export",
            "source": "ConnectorComponentExportOperation.java:44"
          },
          {
            "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactExportOperation.execute",
            "source": "J2EEArtifactExportOperation.java:89"
          }
        ],
        "causedBy": {
          "exceptionType": "java.util.zip.ZipException",
          "message": "duplicate entry: test/Test.class",
          "elements": [
            {
              "method": "java.util.zip.ZipOutputStream.putNextEntry",
              "source": "ZipOutputStream.java:188"
            },
            {
              "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.ZipStreamSaveStrategyImpl.save",
              "source": "ZipStreamSaveStrategyImpl.java:136"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "175604",
      "date": "2007-02-26T21:39:26+01:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    }
  ],
  "groupId": "175604",
  "bugId": "175604",
  "date": "2007-02-26T21:39:26+01:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "major"
}