{
  "comments": [
    "i200412142000\n\n(see related bug 81201)\n\nI don\u0027t know what is the intended behavior for the plugin registry view in face\nof dynamic changes to the set of installed plug-ins.\n\nWith the current implementation, the PDE/UI view might choke trying to process\nchange events as they come. The root of the problem here is the fact that change\nevents are not batched, and they are sent after the fact. So listeners need to\nbe careful and not make any assumptions about the state of the extension\nregistry/framework when they are handling a single event. \n\nIn the case of the plugin registry, the safest thing to do would be to just to\ndiscard all the information kept about the plug-in registry when an event comes\nand to schedule a job to rebuild it asynchronously. If another event comes, that\njob should be cancelled and rescheduled for later on. At some point, bundle\nevents/registry change events will stop to come and the job will be able to\nrebuild the model.\n\nOr, as suggested by Pascal, PDE UI could stop using the IPluginRegistry API and\nprovide the same information by processing the extension registry and the set of\nbundles available through its BundleContext. I believe this is in the plan for\nPDE to become a BDE sometime in the future.",
    "I got this NPE after uninstalling a plug-in required by others and refreshing.\n\n!ENTRY org.eclipse.core.runtime 4 2 2004-12-15 15:32:01.23\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getFolderChildren(RegistryBrowserContentProvider.java:208)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.access$0(RegistryBrowserContentProvider.java:192)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider$PluginFolder.getChildren(RegistryBrowserContentProvider.java:42)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getChildren(RegistryBrowserContentProvider.java:129)\n\tat\norg.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.hasChildren(RegistryBrowserContentProvider.java:228)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:1208)\n\tat org.eclipse.ui.part.DrillDownAdapter.canExpand(DrillDownAdapter.java:107)\n\tat org.eclipse.ui.part.DrillDownAdapter.canGoInto(DrillDownAdapter.java:142)\n\tat\norg.eclipse.ui.part.DrillDownAdapter.updateNavigationButtons(DrillDownAdapter.java:338)\n\tat org.eclipse.ui.part.DrillDownAdapter.selectionChanged(DrillDownAdapter.java:328)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:163)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:161)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1667)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:935)\n\tat\norg.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:961)\n\tat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:209)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:204)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:364)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2803)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1569)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1540)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:285)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:220)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:710)\n\tat org.eclipse.core.launcher.Main.main(Main.java:694)",
    "*** Bug 88068 has been marked as a duplicate of this bug. ***",
    "Fixed",
    "If you uninstall a bundle, e.g. using the console \"uninstall\" command, the View still shows the bundle and throws Exceptions when user tries to expand the bundle folder in the view.\n\n!ENTRY org.eclipse.jface 4 2 2007-08-31 09:24:31.000\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.jface\".\n!STACK 0\njava.lang.IllegalStateException: Bundle \"update@plugins/com.example.ch.settlement.ui_1.0.68.jar\" has been uninstalled\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.checkValid(AbstractBundle.java:1199)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getEntry(AbstractBundle.java:1279)\n        at org.eclipse.pde.internal.runtime.registry.RegistryBrowserLabelProvider.getText(RegistryBrowserLabelProvider.java:177)\n        at org.eclipse.jface.viewers.StructuredViewer.buildLabel(StructuredViewer.java:2102)\n        at org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:258)\n        at org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:95)\n        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\n\nThe View should handle this appropriately, e.g. do not allow the TreeItem to be expanded.\n",
    "I\u0027d like to revisit this one.\nHowever, instead of removing the uninstalled bundle\u0027s children (and disallowing expansion) it would make sense to remove the bundle itself (from the browser tree).  Any thoughts?\n\nNote: the Registry Browser still needs more work to adapt to all of the possible dynamics - although we are being slightly held back by the (lack of) information provided in IExtensionDelta (see bug 130655)\n\nAs far as I can tell, stopped bundles aren\u0027t displaying properly either...\n\nReopening for now and adding Chris in for discussion.",
    "Addressed the most recent issue, but leaving open for the IExtensionDelta bug (see previous comment)",
    "Update:\nRequested APIs have been added, (bug 206936)\nA stable upgraded RegistryBrowser has been committed although still requires more work (especially to handle the changes made by bug 200570)",
    "Unfortunately I do not have time to continue this at the moment.\nIt is in a good state, although more features are required to mark this as complete. Specifically better behaviour in the registry view when extensions/extension points are added/removed.\n\nRe-assigning back to inbox. Who ever picks up this bug, feel free to contact me I _may_ be able to give a hand."
  ],
  "commentCreationDates": [
    "2004-12-15T21:15:42+01:00",
    "2004-12-15T21:23:01+01:00",
    "2006-03-01T03:05:03+01:00",
    "2006-04-10T22:23:42+02:00",
    "2007-08-31T13:36:19+02:00",
    "2007-08-31T19:26:55+02:00",
    "2007-09-02T18:38:36+02:00",
    "2007-11-15T17:51:46+01:00",
    "2007-11-30T15:58:24+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getFolderChildren",
          "source": "RegistryBrowserContentProvider.java:208"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.access$0",
          "source": "RegistryBrowserContentProvider.java:192"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider$PluginFolder.getChildren",
          "source": "RegistryBrowserContentProvider.java:42"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.getChildren",
          "source": "RegistryBrowserContentProvider.java:129"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserContentProvider.hasChildren",
          "source": "RegistryBrowserContentProvider.java:228"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable",
          "source": "AbstractTreeViewer.java:1208"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.canExpand",
          "source": "DrillDownAdapter.java:107"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.canGoInto",
          "source": "DrillDownAdapter.java:142"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.updateNavigationButtons",
          "source": "DrillDownAdapter.java:338"
        },
        {
          "method": "org.eclipse.ui.part.DrillDownAdapter.selectionChanged",
          "source": "DrillDownAdapter.java:328"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:163"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:161"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1667"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:935"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:961"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:209"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:204"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:364"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2803"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2448"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1569"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1540"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:285"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:220"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:710"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:694"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "81322",
      "date": "2004-12-15T21:23:01+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Bundle \"update@plugins/com.example.ch.settlement.ui_1.0.68.jar\" has been uninstalled",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.checkValid",
          "source": "AbstractBundle.java:1199"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.getEntry",
          "source": "AbstractBundle.java:1279"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.registry.RegistryBrowserLabelProvider.getText",
          "source": "RegistryBrowserLabelProvider.java:177"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.buildLabel",
          "source": "StructuredViewer.java:2102"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:258"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:95"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "81322",
      "date": "2007-08-31T13:36:19+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "81322",
  "bugId": "81322",
  "date": "2004-12-15T21:15:42+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}