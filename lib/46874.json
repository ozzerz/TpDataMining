{
  "comments": [
    "Build I200311181147\n\n- using existing workspace with a file association *.html -\u003e MS FrontPage\n- open an html file\n- no editor opens\n\n- log contains\n\n!MESSAGE java.lang.IllegalStateException\n!STACK 0\njava.lang.IllegalStateException\n\tat org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor\n(EditorManager.java:448)\n\tat org.eclipse.ui.internal.EditorManager.openEditor\n(EditorManager.java:421)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor\n(WorkbenchPage.java:1974)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$6\n(WorkbenchPage.java:1926)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:1913)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:84)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1908)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1896)\n\tat org.eclipse.ui.actions.OpenWithMenu.openEditor\n(OpenWithMenu.java:258)\n\tat org.eclipse.ui.actions.OpenWithMenu.access$0(OpenWithMenu.java:251)\n\tat org.eclipse.ui.actions.OpenWithMenu$2.handleEvent\n(OpenWithMenu.java:166)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:847)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2187)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1877)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1378)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:234)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:47)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:858)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:299)\n\tat org.eclipse.core.launcher.Main.run(Main.java:767)\n\tat org.eclipse.core.launcher.Main.main(Main.java:601)",
    "Could not reproduce trying to read an M4 workspace with an external editor \nassociation.\n\nCould check for invalid editor descriptors earlier in the editor registry \nrestoration code.\n",
    "It\u0027s happening with current workspace:\n- create a file association with an external editor\n- open a file using external editor\n- shut down\n- restart\n- open the file using external editor\n- NPE\n",
    "I should have said in comment #2 that this is happening with the I200311181147 \nbuild that I\u0027m using. It is not happening when I launch a runtime workbench \nfrom from workspace, however.\n\nLooking at the workbench pref_store.ini I see 2 descriptors for FrontPage (the \nexternal editor that\u0027s been giving me the problem), the second of which is \nbogus (openMode \u003d 0). I changed the openMode to 4 on the second descriptor and \nrestarted - now works fine. So this is the culprit.\n\n\u003cdescriptor\n   label\\\u003d\"Microsoft FrontPage HTML Document\"\n   openMode\\\u003d\"4\"\n   internal\\\u003d\"false\"\n   open_in_place\\\u003d\"false\"\n   program_name\\\u003d\"Microsoft FrontPage HTML Document\"\n/\u003e\\r\\n\n\u003cdescriptor\n   label\\\u003d\"Microsoft FrontPage HTML Document\"\n   openMode\\\u003d\"0\"\n   internal\\\u003d\"false\"\n   open_in_place\\\u003d\"false\"\n   program_name\\\u003d\"Microsoft FrontPage HTML Document\"\n/\u003e\\r\\n\n\n\u003cinfo name\\\u003d\"*\" extension\\\u003d\"html\"\u003e\\r\\n\n   \u003ceditor id\\\u003d\"Microsoft FrontPage HTML Document\"/\u003e\\r\\n\n   \u003cdeletedEditor id\\\u003d\"Microsoft FrontPage HTML Document\"/\u003e\\r\\n\n   \u003cdeletedEditor id\\\u003d\"Microsoft FrontPage HTML Document\"/\u003e\\r\\n\n\u003c/info\u003e\\r\\n\n\n\nWorkaround is to \ndelete .metadata\\.plugins\\org.eclipse.ui.workbench\\pref_store.ini\n",
    "Restore should skip any invalid descriptors.\n",
    "Fixed by adding a check to EditorDescriptor.loadValues.\nAlso changed the place where IllegalStateException was being thrown above to\nthrow a PartInitException instead.\n"
  ],
  "commentCreationDates": [
    "2003-11-18T20:18:04+01:00",
    "2003-11-18T21:42:13+01:00",
    "2003-11-18T22:32:18+01:00",
    "2003-11-18T23:35:03+01:00",
    "2003-11-20T20:04:32+01:00",
    "2004-05-14T04:43:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor",
          "source": "EditorManager.java:448"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditor",
          "source": "EditorManager.java:421"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:1974"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$6",
          "source": "WorkbenchPage.java:1926"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:1913"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1908"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1896"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.openEditor",
          "source": "OpenWithMenu.java:258"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu.access$0",
          "source": "OpenWithMenu.java:251"
        },
        {
          "method": "org.eclipse.ui.actions.OpenWithMenu$2.handleEvent",
          "source": "OpenWithMenu.java:166"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:847"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2187"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1877"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1378"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:234"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:299"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:767"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:601"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "46874",
      "date": "2003-11-18T20:18:04+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "46874",
  "bugId": "46874",
  "date": "2003-11-18T20:18:04+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}