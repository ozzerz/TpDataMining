{
  "comments": [
    "Version: 3.2.0\nBuild id: I20060428-1315\n\nThe first time you expand a category node in the site editor, the attached exception appear in the log and an empty node appears.  Collapsing and expanding the node again causes the correct nodes to appear.\n\n1. Open the attached site.xml\n2. expand the Jira node\n3. Observe: An empty node is shown\n4. collapse and expand the jira node again\n5. Observe: the features now show correctly\n\nI assigned this issue to platform UI since no PDE classes appear in the stacktrace\n\norg.eclipse.swt.SWTException: Widget is disposed\n    at org.eclipse.swt.SWT.error(SWT.java:3374)\n    at org.eclipse.swt.SWT.error(SWT.java:3297)\n    at org.eclipse.swt.SWT.error(SWT.java:3268)\n    at org.eclipse.swt.widgets.Widget.error(Widget.java:432)\n    at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:327)\n    at org.eclipse.swt.widgets.TreeItem.getItemCount(TreeItem.java:730)\n    at org.eclipse.jface.viewers.TreeViewer.getItemCount(TreeViewer.java:432)\n    at org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus(AbstractTreeViewer.java:2453)\n    at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:739)\n    at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:716)\n    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n    at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:690)\n    at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:872)\n    at org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand(AbstractTreeViewer.java:1234)\n    at org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded(AbstractTreeViewer.java:1246)\n    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:181)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:934)\n    at org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:6217)\n    at org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:3794)\n    at org.eclipse.swt.widgets.Composite.WM_NOTIFY(Composite.java:1166)\n    at org.eclipse.swt.widgets.Control.windowProc(Control.java:3298)\n    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4025)\n    at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n    at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1842)\n    at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1292)\n    at org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:5137)\n    at org.eclipse.swt.widgets.Control.windowProc(Control.java:3279)\n    at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:4734)\n    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4025)\n    at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n    at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1923)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\n    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n    at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n    at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n    at org.eclipse.core.launcher.Main.run(Main.java:977)\n    at org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d39849)\nsite.xml\n\n",
    "Brock, I am not able to reproduce this. Could you download the latest integration build (I20060505-1306) and check if this exception still occurs?  SWT fixed a bug in Tree for this build.\n\nAlso, which platform are you using?",
    "Sorry, still no go with I20060505-1306.  It only seems to show up once per session.\n\nI am using Windows XP",
    "Steve, could this be a bug in SWT?  I don\u0027t think anything was changed in TreeViewer or AbstractTreeViewer that could have caused this.  From looking at the code, a new TreeItem is created, then getData() and setData() is called without any problems on the new item, and then getItemCount() is called, which fails at the following line:\n\nif (!parent.checkData (this, true)) error (SWT.ERROR_WIDGET_DISPOSED);",
    "If AbstractTreeViewer.updatePlus() is accessing a tree item that has been disposed, and AbstractTreeViewer disposed of the item, then SWT doesn\u0027t have a bug.  If the disposed item was accessed by SWT internally, say in Tree.WM_LBUTTONDOWN, then SWT has a bug.\n\nThe only think I can think of is that the call to checkData() will send the SWT.SetData callback.  That method will return false if the item or the tree becomes is disposed.  Are you disposing items in SWT.SetData?",
    "(In reply to comment #3)\n\u003e Sorry, still no go with I20060505-1306.  It only seems to show up once per\n\u003e session.\n\u003e \n\u003e I am using Windows XP\n\nWassim, could it be that the label provider for the tree in the site editor causes changes to the tree while the label is being computed?",
    "I looked over the label provider code for the site outline.  Very straight forward.  Nothing in there would trigger recomputation of children, etc.",
    "(In reply to comment #7)\n\nDid you see anything that might end up in a dialog that reports progress and therefore spins the event loop?\n\n",
    "Yes there is a chance of that happening.  It may trigger feature model initialization if the outline happens to show up early on in the session.\n\nSo there is a chance a NullProgressMonitor gets created in the process.",
    "Consider for 3.2.1",
    "*** Bug 113155 has been marked as a duplicate of this bug. ***",
    "Boris if you are not planning to address this for 3.2.1 you should remove the tag. The release candidates start next week.",
    "I don\u0027t have a reproducible case for this, but I opened a bug for what I think is the general problem.\n\n*** This bug has been marked as a duplicate of 154571 ***"
  ],
  "commentCreationDates": [
    "2006-04-29T01:47:19+02:00",
    "2006-04-29T01:47:54+02:00",
    "2006-05-05T21:50:37+02:00",
    "2006-05-06T01:29:02+02:00",
    "2006-05-06T06:10:48+02:00",
    "2006-05-09T16:40:46+02:00",
    "2006-05-09T19:16:01+02:00",
    "2006-05-09T21:18:11+02:00",
    "2006-05-09T22:47:39+02:00",
    "2006-05-09T22:55:01+02:00",
    "2006-05-11T08:29:40+02:00",
    "2006-05-23T19:58:00+02:00",
    "2006-08-16T19:07:37+02:00",
    "2006-08-21T19:09:04+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3374"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3268"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:432"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:327"
        },
        {
          "method": "org.eclipse.swt.widgets.TreeItem.getItemCount",
          "source": "TreeItem.java:730"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.getItemCount",
          "source": "TreeViewer.java:432"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus",
          "source": "AbstractTreeViewer.java:2453"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:739"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:716"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:690"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.createChildren",
          "source": "TreeViewer.java:872"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand",
          "source": "AbstractTreeViewer.java:1234"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded",
          "source": "AbstractTreeViewer.java:1246"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:181"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:925"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:949"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:934"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.wmNotifyChild",
          "source": "Tree.java:6217"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_NOTIFY",
          "source": "Control.java:3794"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_NOTIFY",
          "source": "Composite.java:1166"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3298"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4025"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1842"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.callWindowProc",
          "source": "Tree.java:1292"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN",
          "source": "Tree.java:5137"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3279"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.windowProc",
          "source": "Tree.java:4734"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4025"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1923"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "139328",
      "duplicateId": "154571",
      "date": "2006-04-29T01:47:19+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "154571",
  "bugId": "139328",
  "duplicateId": "154571",
  "date": "2006-04-29T01:47:19+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}