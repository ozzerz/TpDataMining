{
  "comments": [
    "I tried to add an Aspect to java.awt.Label. I compile the aspect via:\najc -inpath /usr/local/j2sdk_nb/j2sdk1.4.2/jre/lib/rt.jar Timestamp.java\n\nHere is the aspect Timestamp.java:\n\naspect Timestamp {\n\n    private int java.awt.Label._ts_read \u003d 0;\n    private int java.awt.Label._ts_write \u003d 0;\n\n    pointcut writeOp():\n    call (void java.awt.Label.setText (String));\n\n    pointcut readOp():\n    call (String java.awt.Label.getText());\n\t\n    after (java.awt.Label b) returning: readOp() \u0026\u0026 target (b)\n    {\n\tb._ts_read++;\n    }\n    \n    after (java.awt.Label b) returning: writeOp() \u0026\u0026 target (b)\n    {\n\tb._ts_write++;\n\tSystem.out.println (b._ts_write);\n    }\n\n    public static void main (String[] args)\n    {\n\tjava.awt.Label b1 \u003d new java.awt.Label();\n\tb1.setText (\"abc\");\n    }\n}\n\nHere is the error message I get from ajc:\n\nnull\njava.lang.NullPointerException\n        at\norg.aspectj.ajdt.internal.core.builder.EclipseAdapterUtils.makeLocationContext(EclipseAdapterUtils.java:50)\n        at\norg.aspectj.ajdt.internal.core.builder.EclipseAdapterUtils.makeSourceLocation(EclipseAdapterUtils.java:120)\n        at\norg.aspectj.ajdt.internal.core.builder.EclipseAdapterUtils.makeMessage(EclipseAdapterUtils.java:129)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager$4.acceptResult(AjBuildManager.java:663)\n        at\norg.aspectj.ajdt.internal.compiler.AjCompilerAdapter.acceptResult(AjCompilerAdapter.java:178)\n        at\norg.aspectj.ajdt.internal.compiler.WeaverAdapter.finishedWith(WeaverAdapter.java:203)\n        at\norg.aspectj.ajdt.internal.compiler.WeaverAdapter.weaveCompleted(WeaverAdapter.java:167)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:570)\n        at\norg.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:239)\n        at\norg.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:114)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:600)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:160)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:94)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:280)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:217)\n        at org.aspectj.tools.ajc.Main.main(Main.java:79)\n\n\n1 fail|abort",
    "The NPE occurs whilst error reporting - if I sort out the NPE, I get the \nerrors shown below.  The NPE occurs whilst trying to determine a nice source \nrange against which to report the problem.  I\u0027m now trying to determine if \nthese new errors are reasonable ?? (i.e. what makes a member unresolvable...)\n\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:7 warning can not \nresolve this member: java.lang.String \norg.apache.crimson.tree.ParentNode.getNodeName() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:7 warning can not \nresolve this member: short org.apache.crimson.tree.ParentNode.getNodeType() \n[Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:7 warning can not \nresolve this member: void javax.swing.text.TextAction.actionPerformed\n(java.awt.event.ActionEvent) [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:7 warning can not \nresolve this member: java.lang.String \norg.apache.crimson.tree.ParentNode.getNodeName() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:7 warning can not \nresolve this member: void javax.swing.text.TextAction.actionPerformed\n(java.awt.event.ActionEvent) [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:7 warning can not \nresolve this member: short org.apache.crimson.tree.NamespacedNode.getNodeType\n() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:10 warning can \nnot resolve this member: void javax.swing.text.TextAction.actionPerformed\n(java.awt.event.ActionEvent) [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:10 warning can \nnot resolve this member: void javax.swing.text.TextAction.actionPerformed\n(java.awt.event.ActionEvent) [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:10 warning can \nnot resolve this member: java.lang.String \norg.apache.crimson.tree.ParentNode.getNodeName() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:10 warning can \nnot resolve this member: short org.apache.crimson.tree.ParentNode.getNodeType\n() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:10 warning can \nnot resolve this member: java.lang.String \norg.apache.crimson.tree.ParentNode.getNodeName() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\nC:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\Timestamp.java:10 warning can \nnot resolve this member: short \norg.apache.crimson.tree.NamespacedNode.getNodeType() [Xlint:unresolvableMember]\n(no source information available)\n\t\n\tsee also: C:\\Eclipse\\212\\eclipse\\aspectj_ws2\\tests\\bugs\\rt.jar\n\n13 warnings\n",
    "Andys definition - is this anywhere near right?\nAn unresolvable member is a member (method declaration) we have found in some \ninheritance hierarchy (its on some interface somewhere) that has no \nimplementation within that hierarchy, apparently due to the use of abstract \nclasses that provide no implementation for it.\nWithout the concrete implementation it can\u0027t be successfully \u0027resolved\u0027 and so \nwe can\u0027t match on it.",
    "This is the patch for the NPE (just capturing it here so anyone else can try \nit before we decide about committing it):\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nIndex: EclipseAdapterUtils.java\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nRCS \nfile: /home/technology/org.aspectj/modules/org.aspectj.ajdt.core/src/org/aspect\nj/ajdt/internal/core/builder/EclipseAdapterUtils.java,v\nretrieving revision 1.6\ndiff -u -r1.6 EclipseAdapterUtils.java\n--- EclipseAdapterUtils.java\t2 Apr 2004 12:47:35 -0000\t1.6\n+++ EclipseAdapterUtils.java\t22 Apr 2004 15:07:56 -0000\n@@ -40,7 +40,8 @@\n         int endPosition \u003d problem.getSourceEnd();\n         \n         if ((startPosition \u003e endPosition)\n-            || ((startPosition \u003c\u003d 0) \u0026\u0026 (endPosition \u003c\u003d 0)))\n+            || ((startPosition \u003c\u003d 0) \u0026\u0026 (endPosition \u003c\u003d 0))\n+            || compilationUnit\u003d\u003dnull)\n             //return Util.bind(\"problem.noSourceInformation\"); //$NON-NLS-1$\n         \treturn \"(no source information available)\";\n \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nI think I have convinced myself that the unresolvable member messages are \nfine - they are just a quirk of some of the classes in rt.jar.  It doesn\u0027t \naffect the actual woven result in this case.\n\nActually, if you change the pointcuts to set a scope in which to look for \nset/get join points:\n\n\tpointcut writeOp():within(java.awt.Label) \u0026\u0026\n\tcall (void java.awt.Label.setText (String));\n\n\tpointcut readOp():within(java.awt.Label) \u0026\u0026\n\tcall (String java.awt.Label.getText());\n\nthen the program runs faster and doesn\u0027t hit the NPE.\n",
    "I give up!  I can\u0027t create a minimal library equivalent to rt.jar that \ncontains an unresolvable member - so I can\u0027t create a testcase in CVS (since I \ncan\u0027t check in rt.jar!).  I am going to integrate the fix because it passes \nall the tests and fixes the case discussed in this bug:\n\najc -inpath /usr/local/j2sdk_nb/j2sdk1.4.2/jre/lib/rt.jar Timestamp.java\n\nDoes anyone know how to create a scenario resulting in an unresolvable member \nwarning?",
    "Fix checked in.  A related bug (causing the NPE on the same line) gave us the \ntestcase we needed to verify the fix is OK.",
    "*** Bug 60862 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2004-04-22T11:11:34+02:00",
    "2004-04-22T13:57:54+02:00",
    "2004-04-22T14:47:20+02:00",
    "2004-04-22T17:34:32+02:00",
    "2004-04-23T18:34:05+02:00",
    "2004-05-13T11:16:21+02:00",
    "2004-05-13T11:23:21+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.core.builder.EclipseAdapterUtils.makeLocationContext",
          "source": "EclipseAdapterUtils.java:50"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.EclipseAdapterUtils.makeSourceLocation",
          "source": "EclipseAdapterUtils.java:120"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.EclipseAdapterUtils.makeMessage",
          "source": "EclipseAdapterUtils.java:129"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$4.acceptResult",
          "source": "AjBuildManager.java:663"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.acceptResult",
          "source": "AjCompilerAdapter.java:178"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.WeaverAdapter.finishedWith",
          "source": "WeaverAdapter.java:203"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.WeaverAdapter.weaveCompleted",
          "source": "WeaverAdapter.java:167"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:570"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:239"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:600"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:160"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:94"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:280"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:79"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "59596",
      "date": "2004-04-22T11:11:34+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "59596",
  "bugId": "59596",
  "date": "2004-04-22T11:11:34+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}