{
  "comments": [
    "Leaking 2 fonts per WSDL editor open/close:\n\njava.lang.Error\n\tat org.eclipse.swt.graphics.Device.new_Object(Device.java(Compiled \nCode))\n\tat org.eclipse.swt.graphics.Font.\u003cinit\u003e(Font.java:143)\n\tat \norg.eclipse.wst.wsdl.ui.internal.graph.editparts.DrillDownEditPart.createFigure\n(DrillDownEditPart.java:57)\n\tat \norg.eclipse.wst.wsdl.ui.internal.xsd.graph.editparts.XSDSchemaDrillDownEditPart\n.createFigure(XSDSchemaDrillDownEditPart.java:23)\n\tat org.eclipse.gef.editparts.AbstractGraphicalEditPart.getFigure\n(AbstractGraphicalEditPart.java:435)\n\tat org.eclipse.gef.editparts.AbstractGraphicalEditPart.addChildVisual\n(AbstractGraphicalEditPart.java:197)\n\tat \norg.eclipse.wst.wsdl.ui.internal.gef.util.editparts.MultiContentPaneEditPart.ad\ndChildVisual(MultiContentPaneEditPart.java:102)\n\tat org.eclipse.gef.editparts.AbstractEditPart.addChild\n(AbstractEditPart.java:194)\n\tat org.eclipse.gef.editparts.AbstractEditPart.refreshChildren\n(AbstractEditPart.java:734)\n\tat \norg.eclipse.wst.wsdl.ui.internal.gef.util.editparts.MultiContentPaneEditPart.re\nfreshChildren(MultiContentPaneEditPart.java:81)\n\tat \norg.eclipse.wst.wsdl.ui.internal.graph.editparts.GroupEditPart.refreshChildren\n(GroupEditPart.java:477)\n\tat org.eclipse.gef.editparts.AbstractEditPart.refresh\n(AbstractEditPart.java:684)",
    "Created an attachment (id\u003d33446)\nPatch for DrillDownEditPart and TopLevelComponentEditPart\n\nInitially I implemented a quick fix for the font leaks in DrillDownEditPart.\n\nWhile testing using S-Leak I also noticed that the number of fonts consumed per editor opening is equal to the number of underlined labels in the editor. The XSD editor has the same problem and it\u0027s compounded when the schema has a large number of components, and multiple schemas are open. This could create a high load on OS resources for really large schemas, as well as potentially slowing down the editor.\n \nThe current code is allocating a new font for every graphic part instance instead of sharing it. In my patches I moved the code in static blocks - similar with how GraphicConstants allocates the fonts. A more sophisticated and safe approach could probably be to create a FontRegistry exposed by the plug-in class.\n \nThe patch is for both offending classes: DrillDownEditPart in the WSDL editor and TopLevelComponentEditPart in the XSD editor.\n\nPlease notify the XSD team as well.\n\nI am sure the code can be further improved.",
    "Valentin, thanks for looking into this.  There\u0027s a minor problem with the \u0027form\u0027 of the patch you\u0027ve provided. Since the patch your proposing spans a multiple plugins, you need to create a separate patch for each plugin.  Each patch should be created relative to the corresponing plugin folder so that to apply the patch the developer can simply select the plugin folder and perform \u0027apply patch\u0027.\n\nDo you mind recreating the patch(es) as described above?  You should then be able to obsolete the old patch.  \n\nthanks again for your help!\n",
    "Created an attachment (id\u003d33503)\nPatch for DrillDownEditPart\n\n",
    "Created an attachment (id\u003d33504)\nPatch for TopLevelComponentEditPart\n\n",
    "Seems like a good candidate for 1.5.1",
    "I believe this bug and patches may not be relevant for 1.5 anymore, given that the XSD and WSDL editors changed significantly. DrillDownEditPart does not seem to exist anymore and TopLevelComponentEditPart uses HyperLinkLabel which simulates an underlined font by drawing a line under the text.\n\nIf Rich and Keith concur, I propose we close this bug as obsolete or try to apply as part of a 1.0.* maintenance release. \n\nI believe Keith did some testing for leaks with the new XSD editor - we should probably do some for the new WSDL editor as well to find any new leaks that may have been introduced.",
    "As Valentin stated, this does not apply to 1.5.\nRetargetting to 1.0.3",
    "As this is of \"normal\" severity, and no adopter/client complaints, is this \nreally worth fixing in 1.0.3? (I\u0027m not saying its great to leave the code with this bug, but ... to minimize changes?). \n\nJeffrey, you may be more aware of magnitude, but ... if no client problem would show up (after days of use), I suggest just keeping this one.\n\nAlso, have these plugins \"changed anyway\" already from 1.0.2? If not, that\u0027s another reason to minimize. \n\nBut, feel free to fix if any of you consider it important. \n\n\n\n\n",
    "The impact is not significant. I agree to minimize changes, I\u0027ll move it off the 1.0.3 list. I\u0027ll profile again using 1.5.1 and update this bug. If no leak shows up in 1.5.1, I\u0027ll close this bug.",
    "No more leak using 1.5",
    "Close.",
    "This is part of a \"mass update\" where bugs showing \"fixed\" between 7/1/2006 and 9/27/2006 are assumed fixed in WTP 1.5.1. feel free to change the target milestone if you know a more accurate setting. "
  ],
  "commentCreationDates": [
    "2005-05-17T19:18:13+02:00",
    "2006-01-23T04:50:57+01:00",
    "2006-01-24T06:58:47+01:00",
    "2006-01-24T07:18:12+01:00",
    "2006-01-24T07:19:16+01:00",
    "2006-06-08T06:26:18+02:00",
    "2006-06-08T18:01:05+02:00",
    "2006-06-26T23:15:31+02:00",
    "2006-07-13T17:25:03+02:00",
    "2006-07-13T18:30:43+02:00",
    "2006-07-17T22:11:51+02:00",
    "2006-07-17T22:11:59+02:00",
    "2006-09-27T15:08:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Error",
      "elements": [
        {
          "method": "org.eclipse.swt.graphics.Device.new_Object",
          "source": "Device.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.graphics.Font.\u003cinit\u003e",
          "source": "Font.java:143"
        },
        {
          "method": "org.eclipse.wst.wsdl.ui.internal.graph.editparts.DrillDownEditPart.createFigure",
          "source": "DrillDownEditPart.java:57"
        },
        {
          "method": "org.eclipse.wst.wsdl.ui.internal.xsd.graph.editparts.XSDSchemaDrillDownEditPart.createFigure",
          "source": "XSDSchemaDrillDownEditPart.java:23"
        },
        {
          "method": "org.eclipse.gef.editparts.AbstractGraphicalEditPart.getFigure",
          "source": "AbstractGraphicalEditPart.java:435"
        },
        {
          "method": "org.eclipse.gef.editparts.AbstractGraphicalEditPart.addChildVisual",
          "source": "AbstractGraphicalEditPart.java:197"
        },
        {
          "method": "org.eclipse.wst.wsdl.ui.internal.gef.util.editparts.MultiContentPaneEditPart.addChildVisual",
          "source": "MultiContentPaneEditPart.java:102"
        },
        {
          "method": "org.eclipse.gef.editparts.AbstractEditPart.addChild",
          "source": "AbstractEditPart.java:194"
        },
        {
          "method": "org.eclipse.gef.editparts.AbstractEditPart.refreshChildren",
          "source": "AbstractEditPart.java:734"
        },
        {
          "method": "org.eclipse.wst.wsdl.ui.internal.gef.util.editparts.MultiContentPaneEditPart.refreshChildren",
          "source": "MultiContentPaneEditPart.java:81"
        },
        {
          "method": "org.eclipse.wst.wsdl.ui.internal.graph.editparts.GroupEditPart.refreshChildren",
          "source": "GroupEditPart.java:477"
        },
        {
          "method": "org.eclipse.gef.editparts.AbstractEditPart.refresh",
          "source": "AbstractEditPart.java:684"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "95606",
      "date": "2005-05-17T19:18:13+02:00",
      "product": "Web Tools",
      "component": "wst.wsdl",
      "severity": "normal"
    }
  ],
  "groupId": "95606",
  "bugId": "95606",
  "date": "2005-05-17T19:18:13+02:00",
  "product": "Web Tools",
  "component": "wst.wsdl",
  "severity": "normal"
}