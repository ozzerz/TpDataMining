{
  "comments": [
    "Build ID: EMF221\n\nSteps To Reproduce:\nTrying to load following schema that contains a circular reference caused StackOverflowError exception. Although the XSD was invalid, is it possilbe that instead of an inifinite loop, EMF can throw an exception?\n\nThe XSD(s) used in the test:\n**************** XSD: ibm3_14si25.xsd ******************** \n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003c!-- \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nTest Type  : Schema INVALID  ( \u003csimpleType\u003e )\nDescription: simpleTypes with circular references are not allowed\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d --\u003e\n\u003cxs:schema xmlns:xs\u003d\"http://www.w3.org/2001/XMLSchema\"\u003e\n\n\u003cxs:element name\u003d\"root\" type\u003d\"xs:string\"/\u003e\n\n\u003c!-- Invalid here: --\u003e\n\u003cxs:simpleType name\u003d\"myList\"\u003e\n\t\u003cxs:restriction base\u003d\"myList\"/\u003e\n\u003c/xs:simpleType\u003e\n\n\u003c/xs:schema\u003e\n***********************************************************************\n\nCaused by: java.lang.StackOverflowError\n\tat java.util.ArrayList.addAll(ArrayList.java:499)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.setAnnotations(XSDEcoreBuilder.java:2521)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:340)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType(XSDEcoreBuilder.java:246)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:382)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType(XSDEcoreBuilder.java:246)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:382)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType(XSDEcoreBuilder.java:246)\n        .... (redundant lines deleted) ....\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:382)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType(XSDEcoreBuilder.java:246)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:382)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType(XSDEcoreBuilder.java:246)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:382)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType(XSDEcoreBuilder.java:246)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType(XSDEcoreBuilder.java:382)\n\tat com.ibm.ws.bo.BOModelBuilder.computeEClassifier(BOModelBuilder.java:707)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.getEClassifier(XSDEcoreBuilder.java:236)\n\tat org.eclipse.xsd.ecore.XSDEcoreBuilder.generate(XSDEcoreBuilder.java:2247)\n\tat com.ibm.ws.bo.BOModelBuilder.generate(BOModelBuilder.java:319)\n\tat com.ibm.ws.bo.BOModelBuilder.build(BOModelBuilder.java:293)\n\tat com.ibm.ws.bo.BOModelHolder.loadModel(BOModelHolder.java:596)\n\tat com.ibm.ws.bo.service.BOXSDHelperImpl.loadXSD(BOXSDHelperImpl.java:58)\n\tat com.ibm.testsuite.adapters.wps.XMLDriverWPS61.loadXSD(XMLDriverWPS61.java:136)\n\tat com.ibm.testsuite.test.MDTestInfo.loadXSDs(MDTestInfo.java:462)\n\tat com.ibm.testsuite.test.MetaDataDrivenTest.test_XSDsAndOrXML(MetaDataDrivenTest.java:181)\n\t... 7 more\n\nMore information:",
    "Kevin,\n\nPassing an invalid schema to the XSDEcoreBuilder is a bad idea.  XSD supports validation so you can check where a schema is valid before you pass it to the builder as we do in the EMF tools.  It\u0027s a case of garbage in, garbage out.\n\nI\u0027ll leave the bug open but change it to an enhancement request to check for circular types.  We will consider it in the 2.4 stream only.\n\n",
    "Changes to handle this case more gracefully are committed to CVS for 2.4.",
    "Fixed in I200711272121."
  ],
  "commentCreationDates": [
    "2007-10-12T02:25:54+02:00",
    "2007-10-12T11:13:28+02:00",
    "2007-11-26T14:04:04+01:00",
    "2007-11-28T04:01:53+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StackOverflowError",
      "elements": [
        {
          "method": "java.util.ArrayList.addAll",
          "source": "ArrayList.java:499"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.setAnnotations",
          "source": "XSDEcoreBuilder.java:2521"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType",
          "source": "XSDEcoreBuilder.java:340"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType",
          "source": "XSDEcoreBuilder.java:246"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType",
          "source": "XSDEcoreBuilder.java:382"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType",
          "source": "XSDEcoreBuilder.java:246"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.computeEDataType",
          "source": "XSDEcoreBuilder.java:382"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDEcoreBuilder.getEDataType",
          "source": "XSDEcoreBuilder.java:246"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "206102",
      "date": "2007-10-12T02:25:54+02:00",
      "product": "MDT",
      "component": "XSD",
      "severity": "enhancement"
    }
  ],
  "groupId": "206102",
  "bugId": "206102",
  "date": "2007-10-12T02:25:54+02:00",
  "product": "MDT",
  "component": "XSD",
  "severity": "enhancement"
}