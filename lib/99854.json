{
  "comments": [
    "Testcase:\n\nString dog1 \u003d \"Max\", dog2 \u003d \"Bailey\", dog3 \u003d \"Harriet\";\n\nThe variables view are showing the 3 variables.\n\n1.  select dog1.  Go to the details pane.  Remove \"Max\".  Type \"this.valueOf\n(\u0027x\u0027);\"\n2.  ALT+Shift+D to display the expression.\n3.  Press ESC to dispose the popup window\n4.  Select dog2.  Go to the details pane.  Remove \"Bailey\".  Type \"this.valueOf\n(\u0027y\u0027\"  You should already have a close \")\" bracket.  Type the \"End\" key to go \nto the end of the line.  \n\nIt resulted in the exception.  It seems to happen after a display and then the \nselection is changed.\n\njava.lang.NullPointerException\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged\n(TextViewer.java:2301)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged\n(TextViewer.java:2252)\n\tat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2231)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2440)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1680)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:365)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Unable to reproduce. Does this happen consistently for you Samantha?",
    "It does not happen all the time, but I could get it to happen frequently.\n\nTry this:\n1. select a variable.  Go to details pane, select the text from detail pane (by \ndouble click), and hit backspace.\n2. type this.\n3. type CTRL + Space to bring up content assist\n4. type valueof(\n5. Content assist is gone, type \u0027y\u0027  (with the sigle quotes)\n6. press the END key\n7. type in ; \n\nThe exception happens when the semi-colon is entered.\n",
    "Moving to text for comment. There is no debug code in the stack trace.",
    "Mmh - looks like the installed listener is null.\n- which build?\n- any other plug-ins installed?\n- in which editor do you enter \"String dog1 \u003d \"Max\", dog2 \u003d \"Bailey\", dog3 \u003d\n\"Harriet\";\"?",
    "Using  Eclipse 3.1 RC2.\nEditing in Variables View\u0027s Detail Pane.\n\nI have my own debug adapters installed and the LPEX editor installed in \naddition to base eclipse.\n",
    "- which editor is open when you run into this NPE?\n- can you please try to reproduce on plain Eclipse SDK?",
    "It\u0027s reproducible with plain eclipse.\nThe java editor is opened when I run into this exception.\n\nI had a java debug session running.",
    "Can you verify that you are running on 3.1 RC2? The line numbers of your stack\ntrace do not match i.e. (TextViewer.java:2301) is at the last } of a method and\nnot on a valid code line.",
    "Strange...\nThe build id on my copy of eclipse...\n\nVersion: 3.1.0\nBuild id: I20050610-1757\n\nNot sure why I gave you a different stack trace before.  Sorry.  Here\u0027s one \nthat I just reproduced.\n\njava.lang.NullPointerException\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged\n(TextViewer.java:2296)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged\n(TextViewer.java:2252)\n\tat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2231)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:3100)\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2440)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1680)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:365)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Darin, is it possible that you remove a selection listener in a non-UI thread?",
    "Darin, can you help me on this? I can\u0027t follow the steps i.e. if I select e.g.\n\u0027dog1\u0027 in the Variables view I cannot use code assist in the details pane at\nall. Am I doing something wrong?",
    "select it in the \"Details\" pane of the variables view. Then \u0027remove\u0027 it means \nto use the backspace key to delete the text. Then use typing/code assist.",
    "Created an attachment (id\u003d23108)\npicture of variables view\n\nMy problem is that code assist is not working in the details pane at all if I\nselect e.g. \u0027dog1\u0027 and then delete the value.",
    "Created an attachment (id\u003d23111)\npicture\n\nHmmm... works for me....",
    "That\u0027s the code I use (breakpoint on line 8, JDK 1.5.0_03):\npublic class A {\n\tString dog1 \u003d \"Max\", dog2 \u003d \"Bailey\", dog3 \u003d \"Harriet\";\n\tpublic static void main(String[] args) {\n\t\tnew A().foo();\n\t}\n\t\n\tvoid foo() {\n\t\tString p\u003d \"\";\n\t}\n}\n",
    "With a fresh project it now works. I tried it in the workspace that I used in\nthe test pass where I replaced the JRE System Library with a user library that\nonly contains the rt.jar. Strange that this tricks the Debugger.\n\nI can now focus on the test case again...",
    "Looks like some different event flow is happening on Windows2000. However, I can\nnow see what\u0027s happening:\n1. one of the listeners (probably linked UI) is deregistering itself while being \n   notified\n2. we save memory by setting the list to null if the last listener is removed\n3. the loop runs into an NPE\n\nI will attach a patch that fixes this. Darin, can you review the patch and\napprove for 3.1 RC3?",
    "Created an attachment (id\u003d23114)\nPatch for TextViewer.java\n",
    "I can reproduce with the steps in comment 2. Semicolon does not need to be\npressed - the NPE already hits when \u0027end\u0027 is pressed and the selection changed\nevent hits.\n\n\u003e 1. one of the listeners (probably linked UI) is deregistering itself while \n\u003e being notified\n\nCorrect - the linked mode set up for the parentheses is left when the caret\nmoves outside of them.\n\nI reviewed the patch and verified it fixes the problem.",
    "Dirk, can you vote for this? Darin already went to bed ;-)",
    "Filed bug 100137  for the non-working code assist.",
    "+1 RC3.",
    "comitted to HEAD",
    "Verified in N20050616-0010"
  ],
  "commentCreationDates": [
    "2005-06-14T00:43:10+02:00",
    "2005-06-14T15:20:36+02:00",
    "2005-06-14T16:36:36+02:00",
    "2005-06-14T17:18:15+02:00",
    "2005-06-14T18:09:10+02:00",
    "2005-06-14T18:12:22+02:00",
    "2005-06-14T18:21:30+02:00",
    "2005-06-14T18:30:55+02:00",
    "2005-06-14T19:05:15+02:00",
    "2005-06-14T19:17:32+02:00",
    "2005-06-14T21:32:46+02:00",
    "2005-06-14T22:19:56+02:00",
    "2005-06-14T22:26:15+02:00",
    "2005-06-14T22:49:53+02:00",
    "2005-06-14T22:59:03+02:00",
    "2005-06-14T23:22:14+02:00",
    "2005-06-14T23:25:52+02:00",
    "2005-06-14T23:50:04+02:00",
    "2005-06-14T23:54:47+02:00",
    "2005-06-15T10:03:19+02:00",
    "2005-06-15T10:19:22+02:00",
    "2005-06-15T10:29:54+02:00",
    "2005-06-15T11:25:30+02:00",
    "2005-06-15T11:36:37+02:00",
    "2005-06-16T10:55:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2301"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2252"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2231"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2440"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java(Inlined  Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1680"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:365"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "99854",
      "date": "2005-06-14T00:43:10+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2296"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2252"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2231"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3100"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2440"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java(Inlined  Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1680"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:365"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 1,
      "commentIndex": 9,
      "bugId": "99854",
      "date": "2005-06-14T19:17:32+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "99854",
  "bugId": "99854",
  "date": "2005-06-14T00:43:10+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "normal"
}