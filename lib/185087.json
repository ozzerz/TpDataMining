{
  "comments": [
    "Build ID: I20070424-0930\n\nSteps To Reproduce:\n1. Try to synchronize a project\n\n\n\nMore information:\norg.eclipse.team.internal.ccvs.core.CVSException: \n\tat org.eclipse.team.internal.ccvs.core.CVSException.wrapException(CVSException.java:74)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.FolderSyncInfo.getFolderSyncInfo(FolderSyncInfo.java:306)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.setVariant(CVSResourceVariantTree.java:213)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:168)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:113)\n\tat org.eclipse.team.core.variants.ResourceVariantTree.access$0(ResourceVariantTree.java:1)\n\tat org.eclipse.team.core.variants.ResourceVariantTree$1.run(ResourceVariantTree.java:112)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\n\tat org.eclipse.team.core.variants.PersistantResourceVariantByteStore.run(PersistantResourceVariantByteStore.java:171)\n\tat org.eclipse.team.internal.core.subscribers.DescendantResourceVariantByteStore.run(DescendantResourceVariantByteStore.java:181)\n\tat org.eclipse.team.core.variants.ResourceVariantTree.collectChanges(ResourceVariantTree.java:110)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.collectChanges(CVSResourceVariantTree.java:87)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:90)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.refresh(CVSResourceVariantTree.java:326)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:54)\n\tat org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:162)\n\tat org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:126)\n\tat org.eclipse.team.core.subscribers.Subscriber.refresh(Subscriber.java:465)\n\tat org.eclipse.team.internal.ccvs.core.CVSWorkspaceSubscriber.refreshWithContentFetch(CVSWorkspaceSubscriber.java:434)\n\tat org.eclipse.team.internal.ccvs.ui.mappings.WorkspaceSubscriberContext.refresh(WorkspaceSubscriberContext.java:305)\n\tat org.eclipse.team.core.mapping.provider.SynchronizationContext.refresh(SynchronizationContext.java:109)\n\tat org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.doRefresh(RefreshModelParticipantJob.java:68)\n\tat org.eclipse.team.internal.ui.synchronize.RefreshParticipantJob.run(RefreshParticipantJob.java:309)\n\tat org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.run(RefreshModelParticipantJob.java:116)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\norg.eclipse.team.internal.ccvs.core.CVSException[-6]: java.io.EOFException\n\tat java.io.DataInputStream.readFully(Unknown Source)\n\tat java.io.DataInputStream.readUTF(Unknown Source)\n\tat java.io.DataInputStream.readUTF(Unknown Source)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.FolderSyncInfo.getFolderSyncInfo(FolderSyncInfo.java:296)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.setVariant(CVSResourceVariantTree.java:213)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:168)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:177)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges(AbstractResourceVariantTree.java:113)\n\tat org.eclipse.team.core.variants.ResourceVariantTree.access$0(ResourceVariantTree.java:1)\n\tat org.eclipse.team.core.variants.ResourceVariantTree$1.run(ResourceVariantTree.java:112)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\n\tat org.eclipse.team.core.variants.PersistantResourceVariantByteStore.run(PersistantResourceVariantByteStore.java:171)\n\tat org.eclipse.team.internal.core.subscribers.DescendantResourceVariantByteStore.run(DescendantResourceVariantByteStore.java:181)\n\tat org.eclipse.team.core.variants.ResourceVariantTree.collectChanges(ResourceVariantTree.java:110)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.collectChanges(CVSResourceVariantTree.java:87)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:90)\n\tat org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.refresh(CVSResourceVariantTree.java:326)\n\tat org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:54)\n\tat org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:162)\n\tat org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:126)\n\tat org.eclipse.team.core.subscribers.Subscriber.refresh(Subscriber.java:465)\n\tat org.eclipse.team.internal.ccvs.core.CVSWorkspaceSubscriber.refreshWithContentFetch(CVSWorkspaceSubscriber.java:434)\n\tat org.eclipse.team.internal.ccvs.ui.mappings.WorkspaceSubscriberContext.refresh(WorkspaceSubscriberContext.java:305)\n\tat org.eclipse.team.core.mapping.provider.SynchronizationContext.refresh(SynchronizationContext.java:109)\n\tat org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.doRefresh(RefreshModelParticipantJob.java:68)\n\tat org.eclipse.team.internal.ui.synchronize.RefreshParticipantJob.run(RefreshParticipantJob.java:309)\n\tat org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.run(RefreshModelParticipantJob.java:116)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "Moving to Platform/CVS",
    "It looks like there is invalid meta-data for a remote folder. From the location of the error, my guess is that either it is null or an empty string. Unfortunately, the error we are printing is not very informative. We need to improve it to contain the folder path and the invalid sync bytes (and check for null as well).\n\nHere\u0027s a few things you an try to see if it fixes the problem:\n\n1) Perform a Team\u003eUpdate and see if you can Synchronize after that\n\n2) Perform a Team\u003eDisconnect but indicate that you want to keep the meta-data files. Then perform a Team\u003eShare Project to reconnect. After that, try a sync and see if it works.",
    "Krzysztof, can you look into improving the error handling/message? The above trace contains two different traces. The second one is the more interesting one (so I\u0027ve repasted part of it below). It may be possible that the bytes are null or invalid so we should add a message to the CVSException that either contains the provided bytes or indicates that they are null. Also, it may be worthwhile to catch and wrap the exception in the caller so we can add the folder path.\n\nIt would also be nice if we could come up with a way to reproduce the problem even if it was just artificially so we could ensure that the new handling works. However, if that\u0027s not possible, we\u0027ll do it via code inspection.\n\nHere\u0027s the more relevant exceptions:\n\norg.eclipse.team.internal.ccvs.core.CVSException[-6]: java.io.EOFException\n        at java.io.DataInputStream.readFully(Unknown Source)\n        at java.io.DataInputStream.readUTF(Unknown Source)\n        at java.io.DataInputStream.readUTF(Unknown Source)\n        at\norg.eclipse.team.internal.ccvs.core.syncinfo.FolderSyncInfo.getFolderSyncInfo(FolderSyncInfo.java:296)\n        at\norg.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.setVariant(CVSResourceVariantTree.java:213)",
    "Created an attachment (id\u003d65890)\nProposal\n\nMichael, did you mean something like that?",
    "Your going in the right direction. I would like to see the following enhancements:\n\n1) In the getFolderSyncInfo method, I would like to see the syncBytes included in the message. The bytes are actually characters from a String so you can just create a string from the bytes and include them in the message using NLS.bind(). \n\n2) The getFolderSyncInfo should never be called with null bytes. You should just add a check to the start of the method that throws an exception if the bytes are null.\n\n3) When wrapping the exception in setVariant, we should use the full path of the local resource instead of just the name.",
    "Created an attachment (id\u003d66079)\nProposal 2\n\n1,2 done.\n3. The problem is with variant, which has invalid sync bytes, and it has no underlying resource... well, I do not see the path to display.",
    "I have released the patch to HEAD. If the workarounds mentioned in comment 2 did not help, please reopen. Otherwise, we\u0027ll leave this but fixed. If the problem occurs again, we will get more information from the error message.",
    "Cannot reproduce the test case. Code exists in HEAD."
  ],
  "commentCreationDates": [
    "2007-05-02T14:19:55+02:00",
    "2007-05-02T14:22:58+02:00",
    "2007-05-02T20:38:25+02:00",
    "2007-05-02T23:24:50+02:00",
    "2007-05-04T10:34:14+02:00",
    "2007-05-04T14:50:08+02:00",
    "2007-05-07T12:51:32+02:00",
    "2007-05-07T16:43:45+02:00",
    "2007-06-25T11:22:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.team.internal.ccvs.core.CVSException",
      "message": "",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ccvs.core.CVSException.wrapException",
          "source": "CVSException.java:74"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.FolderSyncInfo.getFolderSyncInfo",
          "source": "FolderSyncInfo.java:306"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.setVariant",
          "source": "CVSResourceVariantTree.java:213"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:168"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:113"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTree.access$0",
          "source": "ResourceVariantTree.java:1"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTree$1.run",
          "source": "ResourceVariantTree.java:112"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1797"
        },
        {
          "method": "org.eclipse.team.core.variants.PersistantResourceVariantByteStore.run",
          "source": "PersistantResourceVariantByteStore.java:171"
        },
        {
          "method": "org.eclipse.team.internal.core.subscribers.DescendantResourceVariantByteStore.run",
          "source": "DescendantResourceVariantByteStore.java:181"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTree.collectChanges",
          "source": "ResourceVariantTree.java:110"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.collectChanges",
          "source": "CVSResourceVariantTree.java:87"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh",
          "source": "AbstractResourceVariantTree.java:90"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.refresh",
          "source": "CVSResourceVariantTree.java:326"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh",
          "source": "AbstractResourceVariantTree.java:54"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh",
          "source": "ResourceVariantTreeSubscriber.java:162"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh",
          "source": "ResourceVariantTreeSubscriber.java:126"
        },
        {
          "method": "org.eclipse.team.core.subscribers.Subscriber.refresh",
          "source": "Subscriber.java:465"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.CVSWorkspaceSubscriber.refreshWithContentFetch",
          "source": "CVSWorkspaceSubscriber.java:434"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.mappings.WorkspaceSubscriberContext.refresh",
          "source": "WorkspaceSubscriberContext.java:305"
        },
        {
          "method": "org.eclipse.team.core.mapping.provider.SynchronizationContext.refresh",
          "source": "SynchronizationContext.java:109"
        },
        {
          "method": "org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.doRefresh",
          "source": "RefreshModelParticipantJob.java:68"
        },
        {
          "method": "org.eclipse.team.internal.ui.synchronize.RefreshParticipantJob.run",
          "source": "RefreshParticipantJob.java:309"
        },
        {
          "method": "org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.run",
          "source": "RefreshModelParticipantJob.java:116"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "185087",
      "date": "2007-05-02T14:19:55+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.io.EOFException",
      "elements": [
        {
          "method": "java.io.DataInputStream.readFully",
          "source": "Unknown Source"
        },
        {
          "method": "java.io.DataInputStream.readUTF",
          "source": "Unknown Source"
        },
        {
          "method": "java.io.DataInputStream.readUTF",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.FolderSyncInfo.getFolderSyncInfo",
          "source": "FolderSyncInfo.java:296"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.setVariant",
          "source": "CVSResourceVariantTree.java:213"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:168"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:177"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.collectChanges",
          "source": "AbstractResourceVariantTree.java:113"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTree.access$0",
          "source": "ResourceVariantTree.java:1"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTree$1.run",
          "source": "ResourceVariantTree.java:112"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1797"
        },
        {
          "method": "org.eclipse.team.core.variants.PersistantResourceVariantByteStore.run",
          "source": "PersistantResourceVariantByteStore.java:171"
        },
        {
          "method": "org.eclipse.team.internal.core.subscribers.DescendantResourceVariantByteStore.run",
          "source": "DescendantResourceVariantByteStore.java:181"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTree.collectChanges",
          "source": "ResourceVariantTree.java:110"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.collectChanges",
          "source": "CVSResourceVariantTree.java:87"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh",
          "source": "AbstractResourceVariantTree.java:90"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.refresh",
          "source": "CVSResourceVariantTree.java:326"
        },
        {
          "method": "org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh",
          "source": "AbstractResourceVariantTree.java:54"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh",
          "source": "ResourceVariantTreeSubscriber.java:162"
        },
        {
          "method": "org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh",
          "source": "ResourceVariantTreeSubscriber.java:126"
        },
        {
          "method": "org.eclipse.team.core.subscribers.Subscriber.refresh",
          "source": "Subscriber.java:465"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.CVSWorkspaceSubscriber.refreshWithContentFetch",
          "source": "CVSWorkspaceSubscriber.java:434"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.mappings.WorkspaceSubscriberContext.refresh",
          "source": "WorkspaceSubscriberContext.java:305"
        },
        {
          "method": "org.eclipse.team.core.mapping.provider.SynchronizationContext.refresh",
          "source": "SynchronizationContext.java:109"
        },
        {
          "method": "org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.doRefresh",
          "source": "RefreshModelParticipantJob.java:68"
        },
        {
          "method": "org.eclipse.team.internal.ui.synchronize.RefreshParticipantJob.run",
          "source": "RefreshParticipantJob.java:309"
        },
        {
          "method": "org.eclipse.team.internal.ui.synchronize.RefreshModelParticipantJob.run",
          "source": "RefreshModelParticipantJob.java:116"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "185087",
      "date": "2007-05-02T14:19:55+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.io.EOFException",
      "elements": [
        {
          "method": "java.io.DataInputStream.readFully",
          "source": "Unknown Source"
        },
        {
          "method": "java.io.DataInputStream.readUTF",
          "source": "Unknown Source"
        },
        {
          "method": "java.io.DataInputStream.readUTF",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.FolderSyncInfo.getFolderSyncInfo",
          "source": "FolderSyncInfo.java:296"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.setVariant",
          "source": "CVSResourceVariantTree.java:213"
        }
      ],
      "number": 2,
      "commentIndex": 3,
      "bugId": "185087",
      "date": "2007-05-02T23:24:50+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "blocker"
    }
  ],
  "groupId": "185087",
  "bugId": "185087",
  "date": "2007-05-02T14:19:55+02:00",
  "product": "Platform",
  "component": "CVS",
  "severity": "blocker"
}