{
  "comments": [
    "If emf model is saved with UTF16 charset and MSB set to on, \nResourceSetImpl.getResource causes the following exception.\n\n!ENTRY org.eclipse.ui 4 0 2006-07-26 18:24:04.434\n!MESSAGE Converter malfunction (UTF-16) -- please submit a bug report via null\n!STACK 0\njava.lang.InternalError: Converter malfunction (UTF-16) -- please submit a bug report via null\n\tat sun.nio.cs.StreamDecoder$ConverterSD.malfunction(StreamDecoder.java:275)\n\tat sun.nio.cs.StreamDecoder$ConverterSD.convertInto(StreamDecoder.java:291)\n\tat sun.nio.cs.StreamDecoder$ConverterSD.implRead(StreamDecoder.java:337)\n\tat sun.nio.cs.StreamDecoder.read(StreamDecoder.java:223)\n\tat java.io.InputStreamReader.read(InputStreamReader.java:208)\n\tat org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source)\n\tat org.apache.xerces.impl.XMLEntityScanner.skipString(Unknown Source)\n\tat org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)\n\tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat javax.xml.parsers.SAXParser.parse(Unknown Source)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:179)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1089)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:895)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(ResourceSetImpl.java:249)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:264)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:390)\n\tat org.eclipse.emf.edit.domain.AdapterFactoryEditingDomain.loadResource(AdapterFactoryEditingDomain.java:340)\n\n\nIn our application, the file is created by a browser using its javascript\nfirst, and then that file is passed to the emf application which runs under\neclipse workbench. Looks like JavaScript saves the document with UTF16 and\nMSB set to on, and this MSG flag seems to cause this problem...\n\n\n.",
    "There is nothing we can do about a failure like this.  It looks to me like the file is simply encoded in an invalid way and that any attempt to use JAXP to parse the file will produce this same failure.  I.e., the problem is in no way specific to EMF and I\u0027m quite sure that the following will fail the same way:\n\n        DocumentBuilderFactory dbf \u003d DocumentBuilderFactory.newInstance();\n        dbf.setNamespaceAware(true);\n        DocumentBuilder db \u003d dbf.newDocumentBuilder();\n        Document doc \u003d db.parse(\u003cinput-stream-for-this-test-case\u003e)); \n\nBTW, I have no idea what MSB set to on means...",
    "I have had the same feeling that the problem was jre\u0027s charset conversion\ntable. So after I tried updating jre to the latest one, this never happened\nany more(yet there could be some other issue,  but not related to emf ),\n so I\u0027m closing this any more.."
  ],
  "commentCreationDates": [
    "2006-07-26T11:26:13+02:00",
    "2006-07-26T14:23:37+02:00",
    "2006-07-27T03:17:10+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.InternalError",
      "message": "Converter malfunction (UTF-16) -- please submit a bug report via null",
      "elements": [
        {
          "method": "sun.nio.cs.StreamDecoder$ConverterSD.malfunction",
          "source": "StreamDecoder.java:275"
        },
        {
          "method": "sun.nio.cs.StreamDecoder$ConverterSD.convertInto",
          "source": "StreamDecoder.java:291"
        },
        {
          "method": "sun.nio.cs.StreamDecoder$ConverterSD.implRead",
          "source": "StreamDecoder.java:337"
        },
        {
          "method": "sun.nio.cs.StreamDecoder.read",
          "source": "StreamDecoder.java:223"
        },
        {
          "method": "java.io.InputStreamReader.read",
          "source": "InputStreamReader.java:208"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityScanner.load",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityScanner.skipString",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLVersionDetector.determineDocVersion",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "javax.xml.parsers.SAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load",
          "source": "XMLLoadImpl.java"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad",
          "source": "XMLResourceImpl.java:179"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1089"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:895"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad",
          "source": "ResourceSetImpl.java:249"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper",
          "source": "ResourceSetImpl.java:264"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource",
          "source": "ResourceSetImpl.java:390"
        },
        {
          "method": "org.eclipse.emf.edit.domain.AdapterFactoryEditingDomain.loadResource",
          "source": "AdapterFactoryEditingDomain.java:340"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "151810",
      "date": "2006-07-26T11:26:13+02:00",
      "product": "EMF",
      "component": "XML/XMI",
      "severity": "normal"
    }
  ],
  "groupId": "151810",
  "bugId": "151810",
  "date": "2006-07-26T11:26:13+02:00",
  "product": "EMF",
  "component": "XML/XMI",
  "severity": "normal"
}