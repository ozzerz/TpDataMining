{
  "comments": [
    "I use the jpls plug-in (www.sf.net/projects/jpls) to log via the\njava.util.logging API. When something is logged onto a ConsoleView and the\nWorkbench is going to perform the shutdown the following stack trace is printed \non the console where eclipse was started from. \n\n### Console trace ###\n\nException on Toolkit thread: java.lang.IllegalStateException: Job manager has\nbeen shut down.\njava.lang.IllegalStateException: Job manager has been shut down.\n\tat org.eclipse.core.internal.jobs.JobManager.schedule(JobManager.java:812)\n\tat org.eclipse.core.internal.jobs.InternalJob.schedule(InternalJob.java:350)\n\tat org.eclipse.core.runtime.jobs.Job.schedule(Job.java:423)\n\tat\norg.eclipse.ui.internal.console.IOConsolePartitioner.streamAppended(IOConsolePartitioner.java:449)\n\tat\norg.eclipse.ui.console.IOConsoleOutputStream.encodedWrite(IOConsoleOutputStream.java:208)\n\tat\norg.eclipse.ui.console.IOConsoleOutputStream.write(IOConsoleOutputStream.java:201)\n\tat org.eclipse.ui.console.MessageConsoleStream.print(MessageConsoleStream.java:43)\n\tat\norg.eclipse.ui.console.MessageConsoleStream.println(MessageConsoleStream.java:68)\n\tat de.its.eclipse.logging.console.ConsoleHandler.publish(ConsoleHandler.java:412)\n\tat java.util.logging.Logger.log(Logger.java:428)\n\tat java.util.logging.Logger.doLog(Logger.java:450)\n\tat java.util.logging.Logger.log(Logger.java:473)\n\tat java.util.logging.Logger.finer(Logger.java:1040)\n\tat sun.awt.X11.XToolkit.callTimeoutTasks(XToolkit.java:1300)\n\tat sun.awt.X11.XToolkit.run(XToolkit.java:462)\n\tat sun.awt.X11.XToolkit.run(XToolkit.java:438)\n\tat java.lang.Thread.run(Thread.java:595)\nException on Toolkit thread: java.lang.NoClassDefFoundError:\norg/eclipse/ui/internal/console/ConsoleManager$3\njava.lang.NoClassDefFoundError: org/eclipse/ui/internal/console/ConsoleManager$3\n\tat\norg.eclipse.ui.internal.console.ConsoleManager.warnOfContentChange(ConsoleManager.java:297)\n\tat\norg.eclipse.ui.console.IOConsoleOutputStream.encodedWrite(IOConsoleOutputStream.java:212)\n\tat\norg.eclipse.ui.console.IOConsoleOutputStream.write(IOConsoleOutputStream.java:201)\n\tat org.eclipse.ui.console.MessageConsoleStream.print(MessageConsoleStream.java:43)\n\tat\norg.eclipse.ui.console.MessageConsoleStream.println(MessageConsoleStream.java:68)\n\tat de.its.eclipse.logging.console.ConsoleHandler.publish(ConsoleHandler.java:412)\n\tat java.util.logging.Logger.log(Logger.java:428)\n\tat java.util.logging.Logger.doLog(Logger.java:450)\n\tat java.util.logging.Logger.log(Logger.java:473)\n\tat java.util.logging.Logger.finer(Logger.java:1040)\n\tat sun.awt.X11.XToolkit.callTimeoutTasks(XToolkit.java:1300)\n\tat sun.awt.X11.XToolkit.run(XToolkit.java:456)\n\tat sun.awt.X11.XToolkit.run(XToolkit.java:438)\n\tat java.lang.Thread.run(Thread.java:595)\n\nIt seems that the ConsoleManager uses a Job to write the messages onto the\nConsoleView but eclipse has stopped scheduling Jobs due to shutdown. The",
    "Console plugin is managed by debug",
    "It\u0027s up to the users of MessageConsole to stop writing to the streams when the workbench is closed \ndown. Please report this bug to the maintainers of the jpls plug-in.",
    "I\u0027m the developer of the jpls plug-in. I investigated what I can do to get\nnotified when the ConsoleView respectively the MessageConsoleStream is no longer\nvalid. I havn\u0027t found anything.\n\nThe IllegalStateException is raised when writing to the MessageConsoleStream.\nDue to the stack trace I assume the information is actually written onto the\nConsoleView using a Job. Using a job to for writing is an implementation detail\nof the MessageConsole API. It would hurt the \"information hiding\" paradigm when\nthe user of a MessageConsole must know how the writing is actually done what it\nneeds to for a successful completion.\n\nSo I think this error handling should be managed by the party that implements\nthe actual writing algorithm. \n\nI\u0027ve discovered the following solutions:\n\n1. A checked exception can be thrown when the write can not be performed.\nUnfortunately there are no exceptions defined for the MessageConsoleStream.This\nmeans the API must be extended. Maybe the current methods should be marked as\ndeprecated.\n\n2.The MessageConsole or the MessageConsoleStream supports notifying that it is\nno longer valid.\n\n3. The write will not be performed when the service is unavailable. But in my\nopinion this is the worst solution.",
    "What version of Eclipse are you using? In 3.1 MessageConsole is still available, but really only for \nbackwards compatibility. It extends IOConsole and you\u0027re probably better off using that class directly.",
    "Reopening.",
    "instead of calling print() and println() on a MessageConsoleStream use the write() methods if you want \nto receive IOExceptions (and you\u0027re using Eclipse 3.1).\n\nAdded isClosed() to IOConsoleStream to allow users to check if a stream is closed before writing to it.\nChanged IOConsolePartitioner.streamAppended() to throw an IOException if the document is null (the \nconsole is gone). IOConsoleStream catches the exception closes itself and rethrows\nAlso added a null check to ConsoleDocumentAdapter.repairLines()",
    "Darin, please verify",
    "Verified."
  ],
  "commentCreationDates": [
    "2005-03-15T10:28:28+01:00",
    "2005-03-15T15:59:43+01:00",
    "2005-03-15T17:07:39+01:00",
    "2005-03-16T06:26:15+01:00",
    "2005-03-16T17:36:05+01:00",
    "2005-03-16T18:17:52+01:00",
    "2005-03-16T19:12:13+01:00",
    "2005-03-16T19:12:33+01:00",
    "2005-03-22T20:19:24+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Job manager has been shut down.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.schedule",
          "source": "JobManager.java:812"
        },
        {
          "method": "org.eclipse.core.internal.jobs.InternalJob.schedule",
          "source": "InternalJob.java:350"
        },
        {
          "method": "org.eclipse.core.runtime.jobs.Job.schedule",
          "source": "Job.java:423"
        },
        {
          "method": "org.eclipse.ui.internal.console.IOConsolePartitioner.streamAppended",
          "source": "IOConsolePartitioner.java:449"
        },
        {
          "method": "org.eclipse.ui.console.IOConsoleOutputStream.encodedWrite",
          "source": "IOConsoleOutputStream.java:208"
        },
        {
          "method": "org.eclipse.ui.console.IOConsoleOutputStream.write",
          "source": "IOConsoleOutputStream.java:201"
        },
        {
          "method": "org.eclipse.ui.console.MessageConsoleStream.print",
          "source": "MessageConsoleStream.java:43"
        },
        {
          "method": "org.eclipse.ui.console.MessageConsoleStream.println",
          "source": "MessageConsoleStream.java:68"
        },
        {
          "method": "de.its.eclipse.logging.console.ConsoleHandler.publish",
          "source": "ConsoleHandler.java:412"
        },
        {
          "method": "java.util.logging.Logger.log",
          "source": "Logger.java:428"
        },
        {
          "method": "java.util.logging.Logger.doLog",
          "source": "Logger.java:450"
        },
        {
          "method": "java.util.logging.Logger.log",
          "source": "Logger.java:473"
        },
        {
          "method": "java.util.logging.Logger.finer",
          "source": "Logger.java:1040"
        },
        {
          "method": "sun.awt.X11.XToolkit.callTimeoutTasks",
          "source": "XToolkit.java:1300"
        },
        {
          "method": "sun.awt.X11.XToolkit.run",
          "source": "XToolkit.java:462"
        },
        {
          "method": "sun.awt.X11.XToolkit.run",
          "source": "XToolkit.java:438"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "88027",
      "date": "2005-03-15T10:28:28+01:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/ui/internal/console/ConsoleManager$3",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.console.ConsoleManager.warnOfContentChange",
          "source": "ConsoleManager.java:297"
        },
        {
          "method": "org.eclipse.ui.console.IOConsoleOutputStream.encodedWrite",
          "source": "IOConsoleOutputStream.java:212"
        },
        {
          "method": "org.eclipse.ui.console.IOConsoleOutputStream.write",
          "source": "IOConsoleOutputStream.java:201"
        },
        {
          "method": "org.eclipse.ui.console.MessageConsoleStream.print",
          "source": "MessageConsoleStream.java:43"
        },
        {
          "method": "org.eclipse.ui.console.MessageConsoleStream.println",
          "source": "MessageConsoleStream.java:68"
        },
        {
          "method": "de.its.eclipse.logging.console.ConsoleHandler.publish",
          "source": "ConsoleHandler.java:412"
        },
        {
          "method": "java.util.logging.Logger.log",
          "source": "Logger.java:428"
        },
        {
          "method": "java.util.logging.Logger.doLog",
          "source": "Logger.java:450"
        },
        {
          "method": "java.util.logging.Logger.log",
          "source": "Logger.java:473"
        },
        {
          "method": "java.util.logging.Logger.finer",
          "source": "Logger.java:1040"
        },
        {
          "method": "sun.awt.X11.XToolkit.callTimeoutTasks",
          "source": "XToolkit.java:1300"
        },
        {
          "method": "sun.awt.X11.XToolkit.run",
          "source": "XToolkit.java:456"
        },
        {
          "method": "sun.awt.X11.XToolkit.run",
          "source": "XToolkit.java:438"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "88027",
      "date": "2005-03-15T10:28:28+01:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "88027",
  "bugId": "88027",
  "date": "2005-03-15T10:28:28+01:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "normal"
}