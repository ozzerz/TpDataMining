{
  "comments": [
    "In some cases, the WSE does not open in external browser when forceLaunchOutsideIDE is set to true.  Instead, an error message is issued:\n\nWAB0561E Unable to launch Web Services Explorer.\norg.eclipse.ui.PartInitException: Could not launch external Web Browser for http://localhost:49373/wsexplorer/wsexplorer.jsp?org.eclipse.wst.ws.explorer\u003d2. Check the Web Browser preferences.\nat org.eclipse.ui.internal.browser.SystemBrowserInstance.openURL(Unknown Source)\nat org.eclipse.wst.ws.internal.explorer.WSExplorer.launch(Unknown Source)\nat org.eclipse.wst.ws.internal.explorer.WSExplorerLauncherCommand.execute(Unknown Source)",
    "The problem is in how we are using eclipse\u0027s IWebBrowser; the browser needs to be opened in the UI thread, for example, assume we have the following code:\n\nRunnable runnable \u003d new Runnable() {\n    public void run() {\n        // assume we have an instance of IWebBrowser called browser\n        browser.openURL(new URL(\"http://www.eclipse.org\"));\n    }\n}\n\nThread t \u003d new Thread(runnable); t.start();  // the browser will fail to open\nDisplay.getDefault().asyncExec(runnable);     // this will be ok",
    "Created an attachment (id\u003d56005)\npatch for wst.ws.explorer plugin\n\nHere is a proposed patch for this problem.",
    "Andrew, thanks for the patch. Targetted to 1.5.3.",
    "Ready for review and commit, thanks.",
    "Reviewed and committed to R1_5_maintenance and HEAD.\nReleased to R1_5_maintenance, tag v200701102233.\nReleased to HEAD, tag v200701102230.",
    "Verified in M200701181631 on SuSE9.  Closing.",
    "This problem is still reproducible on a specific case:\n\nWhen we try to get an external browser when none has been defined yet (i.e. the platform\u0027s first call to IWorkbenchBrowserSupport.getExternalBrowser()), this call fails if it\u0027s run from a non-UI thread.  The previous fix only pushed the IWebBrowser.openURL() call to the UI thread.  We need to do the same for getExternalBrowser().",
    "Thanks Andrew. Please resolve in WTP 1.5.4.",
    "Created an attachment (id\u003d59415)\npatch for wst.ws.explorer plugin\n\nApply this patch on top of previous patch.",
    "Ready for review and commit, thanks!",
    "Targetted to WTP 1.5.4.",
    "Requesting approval for fixing this in WTP 1.5.4.\n\nProblem:\n\nWhen the user tries to open the WSE in an external browser on Linux, it fails when the command is run from a non-UI thread because an external browser cannot be created.  This will affect subsequent uses of the external browser (not just limited to the WSE) since the default system browser entry will be missing from preferences.\n\nWorkaround:\n\nThe user must manually define an external browser in preferences, but the user might not realize this unless they open preferences.  Otherwise the user has to restart the workbench.\n\nSolution:\n\nThe WSE should take into consideration that it might be launched in a non-UI-thread and need to take appropriate steps to create the external browser using a UI-thread.\n\nTesting:\n\nThe fix has been tested on Windows, Redhat and SuSE linux.  I opened this bug on behalf of an adopter\u0027s test team and the fix has also been tested by them.\n\nRisk:\n\nOnly one file is changed and the change is just an extension of what was already fixed in WTP 1.5.3 (see comment #7)\n\nReviewed by:\nKathy Chan (kathy@ca.ibm.com)",
    "Just to clarify that attachment 56005 had already been committed and released to WTP 1.5.3.  What\u0027s new in WTP 1.5.4 is just attachment 59415.  I\u0027ve reviewed the patch and is bringing this for PMC approval for WTP 1.5.4.",
    "Reviewed and approved for WTP 1.5.4.\n\nBTW - There isn\u0027t much else left to move into OpenBrowserRunnable. Have you proven that IWorkbenchBrowserSupport.getBrowserSupport(), which we are still calling on the primary UI thread, does not need to also be moved in the UI Runnable?",
    "Hi Chris,\n\nI took a peek at the getBrowserSupport code, it returns the singleton instance of WorkbenchBroswerSupport, and the constructor for that is just a default empty constructor.  There\u0027s nothing too scary or UI-ish in there so I think we are covered.",
    "+1 Sounds pretty serious",
    "+1 Good explanation and review.",
    "Checked into R1_5_maintenance.  Released to R1.5.4 as v200703212342.  Will release to HEAD later on today.",
    "Checked into HEAD.  Released to WTP 2.0 as v200703220008. ",
    "Released to HEAD and R1_5_maintenance.",
    "(In reply to comment #17)\n\u003e +1 Good explanation and review.\n\u003e \n\n+1",
    "Verified in WTP 2.0. Closing."
  ],
  "commentCreationDates": [
    "2006-12-20T00:32:18+01:00",
    "2006-12-20T15:37:27+01:00",
    "2006-12-20T22:53:57+01:00",
    "2006-12-22T13:39:14+01:00",
    "2006-12-22T14:38:58+01:00",
    "2007-01-10T22:41:46+01:00",
    "2007-02-01T17:03:22+01:00",
    "2007-02-20T20:30:06+01:00",
    "2007-02-20T20:34:17+01:00",
    "2007-02-20T20:56:15+01:00",
    "2007-02-23T14:53:30+01:00",
    "2007-02-23T16:40:17+01:00",
    "2007-03-19T22:22:31+01:00",
    "2007-03-19T23:05:50+01:00",
    "2007-03-20T20:27:37+01:00",
    "2007-03-20T20:41:26+01:00",
    "2007-03-20T23:03:46+01:00",
    "2007-03-21T22:52:59+01:00",
    "2007-03-22T00:45:36+01:00",
    "2007-03-22T01:10:45+01:00",
    "2007-03-22T01:11:17+01:00",
    "2007-04-04T01:50:48+02:00",
    "2007-04-05T20:33:31+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.ui.PartInitException",
      "message": "Could not launch external Web Browser for http://localhost:49373/wsexplorer/wsexplorer.jsp?org.eclipse.wst.ws.explorer\u003d2. Check the Web Browser preferences.",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.browser.SystemBrowserInstance.openURL",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.ws.internal.explorer.WSExplorer.launch",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.ws.internal.explorer.WSExplorerLauncherCommand.execute",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "168620",
      "date": "2006-12-20T00:32:18+01:00",
      "product": "Web Tools",
      "component": "wst.ws",
      "severity": "normal"
    }
  ],
  "groupId": "168620",
  "bugId": "168620",
  "date": "2006-12-20T00:32:18+01:00",
  "product": "Web Tools",
  "component": "wst.ws",
  "severity": "normal"
}