{
  "comments": [
    "Deleting an open perspective should close it prior to deletion. As exemplified\nbelow, strange effects can occur if the perspective is not closed first.\n\nBTW: Deleting a perspective in the preferences is far from intuitive. I\u0027d rather\nrename Window \u003e Open Perspective \u003e Other... to Manage... and add a Delete button\nin the Select Perspective dialog.\n(see also http://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d6018 )\n\nEclipse Version: 2.0.1\nBuild id: 200208291828\n\n\nSteps to Reproduce:\n- Open Java Perspective\n- Window \u003e Save Perspective As ... : enter \"Java2\"\n- Window \u003e Preferences\n  - go to Workbench, Perspectives\n  - select \"Java2\" from list\n  - click Delete button\n  - click OK\nJava2 Perspective is still active, but doesn\u0027t\nappear in Window \u003e Open Perspective\n\n- Window \u003e Open Perspective \u003e Java\n- Switch back to Java2 Perspective (by using the Shortcut Bar)\nNote: Java2 reappears in Open Perspective submenu!\n\n- Window \u003e Close Perspective\n- Window \u003e Open Perspective \u003e Java2\nBang! NPE because of invalid (deleted) perspective.\nWorkbench Window Toolbar gets cleared, etc.\nEclipse restart required.\n\n!ENTRY org.eclipse.ui 4 4 Sep 04, 2002 10:54:23.737\n!MESSAGE Unhandled exception caught in event loop.\n!ENTRY org.eclipse.ui 4 0 Sep 04, 2002 10:54:23.757\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\nat org.eclipse.ui.internal.Perspective.loadPredefinedPersp(Perspective.java:616)\nat org.eclipse.ui.internal.Perspective.createPresentation(Perspective.java:233)\nat org.eclipse.ui.internal.Perspective.\u003cinit\u003e(Perspective.java:133)\nat org.eclipse.ui.internal.WorkbenchPage.createPerspective(WorkbenchPage.java:840)\nat org.eclipse.ui.internal.WorkbenchPage.busySetPerspective(WorkbenchPage.java:527)\nat org.eclipse.ui.internal.WorkbenchPage.access$6(WorkbenchPage.java:522)\nat org.eclipse.ui.internal.WorkbenchPage$11.run(WorkbenchPage.java:2234)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:66)\nat org.eclipse.ui.internal.WorkbenchPage.setPerspective(WorkbenchPage.java:2232)\nat\norg.eclipse.ui.internal.ChangeToPerspectiveMenu.run(ChangeToPerspectiveMenu.java:57)\nat org.eclipse.ui.actions.PerspectiveMenu.run(PerspectiveMenu.java:305)\nat org.eclipse.ui.actions.PerspectiveMenu$2.widgetSelected(PerspectiveMenu.java:93)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:87)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1622)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1368)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1256)\nat org.eclipse.ui.internal.Workbench.run(Workbench.java:1239)\nat\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:775)\nat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:247)\nat org.eclipse.core.launcher.Main.run(Main.java:703)\nat org.eclipse.core.launcher.Main.main(Main.java:539)",
    "Released fix in the HEAD stream.\nFix is in PerspectivesPreferencePage",
    "Reopening PR.  Following the original steps below, when I hit the Delete \nbutton, it disappears from the list, but then complains when I try to close the \npreferences dialog.  The error dialog may be confusing at this time, because \nthe user may have switched to another page.  Having to cancel may lose other \nchanges they\u0027ve made.\n\nRecommend complaining that the perspective cannot be deleted immediately, and \nleaving it in the list.  This is preferable to simply disabling the delete \nbutton, since this way you get an explanation.\n\n",
    "I agree completely with Nick\u0027s statement.\n\nThe complaining dialog could also ask whether Eclipse should simply close the \nperspective and then delete it.",
    "*** Bug 26720 has been marked as a duplicate of this bug. ***",
    "Reassigning bugs in component areas that are changing ownership.",
    "Is this still a problem in 3.3?\n\nPW\n",
    "The delete button now shows an \"Unable to delete perspective\" dialog when the perspective is still in use. This forces the user to leave the preference dialog, close the perspective(s) manually, reopen the dialog, select the perspective again, delete the perspective again.\n\nThe original request was to close the perspective before deleting it. Best would be if the dialog asked \"Are you sure you want to delete Perspective \u0027Java2\u0027? It has open instances.\" and then closes the perspective before deleting it.",
    "+1 for the suggested behaviour.",
    "Created an attachment (id\u003d79030)\nPatch to implement the suggested behaviour.\n\n",
    "Paul, you mentioned to me that I should wait for bug 203631 to be closed before providing a patch, as you can see, I didn\u0027t. Do you want me to respin a patch using the handler or are you fine with me using IWorkbenchPage\u0027s closePerspective method?",
    "Released to HEAD \u003e20071130\nPW\n",
    "In I20071211-0010\nPW\n"
  ],
  "commentCreationDates": [
    "2002-09-04T11:10:50+02:00",
    "2002-09-17T23:07:00+02:00",
    "2002-10-18T17:44:37+02:00",
    "2002-10-18T18:03:48+02:00",
    "2002-11-26T17:03:33+01:00",
    "2006-03-15T16:21:43+01:00",
    "2006-09-28T21:12:37+02:00",
    "2006-09-29T11:49:13+02:00",
    "2006-10-10T19:14:27+02:00",
    "2007-09-22T23:25:56+02:00",
    "2007-09-24T21:30:00+02:00",
    "2007-11-30T14:45:40+01:00",
    "2007-12-11T15:36:56+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.Perspective.loadPredefinedPersp",
          "source": "Perspective.java:616"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.createPresentation",
          "source": "Perspective.java:233"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.\u003cinit\u003e",
          "source": "Perspective.java:133"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.createPerspective",
          "source": "WorkbenchPage.java:840"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busySetPerspective",
          "source": "WorkbenchPage.java:527"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$6",
          "source": "WorkbenchPage.java:522"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$11.run",
          "source": "WorkbenchPage.java:2234"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:66"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setPerspective",
          "source": "WorkbenchPage.java:2232"
        },
        {
          "method": "org.eclipse.ui.internal.ChangeToPerspectiveMenu.run",
          "source": "ChangeToPerspectiveMenu.java:57"
        },
        {
          "method": "org.eclipse.ui.actions.PerspectiveMenu.run",
          "source": "PerspectiveMenu.java:305"
        },
        {
          "method": "org.eclipse.ui.actions.PerspectiveMenu$2.widgetSelected",
          "source": "PerspectiveMenu.java:93"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:87"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1622"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1368"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1256"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1239"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:775"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:247"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:703"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "23146",
      "date": "2002-09-04T11:10:50+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "23146",
  "bugId": "23146",
  "date": "2002-09-04T11:10:50+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}