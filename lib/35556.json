{
  "comments": [
    "Eclipse 2.1 RC3a\n\nWhen inlining a method I get (after some time of work) the following \nstacktrace. Is there any tracing I can turn on to find out which class it\u0027s \ncurrently working on?\n\n-- snip --\n\njava.lang.reflect.InvocationTargetException: java.lang.NullPointerException\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.flow.LocalFlowInfo.\u003cinit\u003e\n(LocalFlowInfo.java:21)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.flow.FlowAnalyzer.endVisitPreP\nostfixExpression(FlowAnalyzer.java:845)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.flow.FlowAnalyzer.endVisit\n(FlowAnalyzer.java:640)\n\tat org.eclipse.jdt.core.dom.PrefixExpression.accept0\n(PrefixExpression.java:178)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:1423)\n\tat org.eclipse.jdt.core.dom.MethodInvocation.accept0\n(MethodInvocation.java:95)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:1400)\n\tat org.eclipse.jdt.core.dom.ExpressionStatement.accept0\n(ExpressionStatement.java:81)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:1423)\n\tat org.eclipse.jdt.core.dom.Block.accept0(Block.java:81)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:1400)\n\tat org.eclipse.jdt.core.dom.IfStatement.accept0(IfStatement.java:95)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:1423)\n\tat org.eclipse.jdt.core.dom.Block.accept0(Block.java:81)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:1400)\n\tat org.eclipse.jdt.core.dom.IfStatement.accept0(IfStatement.java:95)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:1423)\n\tat org.eclipse.jdt.core.dom.Block.accept0(Block.java:81)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:1400)\n\tat org.eclipse.jdt.core.dom.MethodDeclaration.accept0\n(MethodDeclaration.java:178)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:1353)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.flow.InputFlowAnalyzer.doPerfo\nrm(InputFlowAnalyzer.java:117)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.flow.InputFlowAnalyzer.perform\n(InputFlowAnalyzer.java:109)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.CallInliner.flowAnalysis\n(CallInliner.java:143)\n\tat org.eclipse.jdt.internal.corext.refactoring.code.CallInliner.perform\n(CallInliner.java:154)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.InlineMethodRefactoring.checkI\nnput(InlineMethodRefactoring.java:220)\n\tat org.eclipse.jdt.internal.ui.refactoring.CheckConditionsOperation.run\n(CheckConditionsOperation.java:65)\n\tat org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run\n(CreateChangeOperation.java:100)\n\tat org.eclipse.jdt.internal.ui.refactoring.PerformChangeOperation.run\n(PerformChangeOperation.java:138)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:302)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:252)\n\tat org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.run\n(RefactoringWizardDialog2.java:266)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PerformRefactoringUtil.performRefactori\nng(PerformRefactoringUtil.java:53)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish\n(RefactoringWizard.java:363)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.UserInputWizardPage.performFinish\n(UserInputWizardPage.java:119)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish\n(RefactoringWizard.java:426)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.okPressed\n(RefactoringWizardDialog2.java:383)\n\tat org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:256)\n\tat org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:423)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:91)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1842)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1549)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:583)\n\tat org.eclipse.jface.window.Window.open(Window.java:563)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate\n(RefactoringStarter.java:70)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.activate\n(InlineMethodAction.java:128)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.run\n(InlineMethodAction.java:121)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.run\n(InlineMethodAction.java:82)\n\tat org.eclipse.jdt.ui.actions.InlineAction.tryInlineMethod\n(InlineAction.java:132)\n\tat org.eclipse.jdt.ui.actions.InlineAction.run(InlineAction.java:109)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:193)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:169)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat org.eclipse.ui.internal.WWinKeyBindingService.pressed\n(WWinKeyBindingService.java:214)\n\tat org.eclipse.ui.internal.WWinKeyBindingService$5.widgetSelected\n(WWinKeyBindingService.java:328)\n\tat org.eclipse.ui.internal.AcceleratorMenu$2.handleEvent\n(AcceleratorMenu.java:65)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1842)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1549)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)",
    "Here is the example, look like it\u0027s related to -(t) part. Just inline the \nnotNull method and you\u0027ll get the NPE.\n\n\n\nimport java.util.Calendar;\n\npublic class TestClass\n{\n  public static final void notNull(Object ref, String message)\n  {\n    assert ref !\u003d null : message;\n  }\n\n  public void toString(Object inValue)\n  {\n    notNull(inValue, \"inValue !\u003d null\"); //$NON-NLS-1$\n\n    Calendar c \u003d null;\n    int t \u003d 5;\n    c.add(Calendar.MINUTE, -(t)); \n  }\n}\n",
    "Problem is the -(t). The flow info is a local flow info but the expression (t) \ndoesn\u0027t resolve to a binding. In the case on a parenthesized expression we \nhave to use the inner expression to resolve the binding.\n\nFix is easy and low risk.",
    "Created an attachment (id\u003d4314)\nPatch that fixes the problem\n",
    "Since it isn\u0027t usual style putting () around local names I think we can ship \nwith the defect. An error is presented to the user in this case an no harm is \ndone to the workspace.",
    "I don\u0027t totally agree with you. While there is an error message, there is no \neasy way to find out which file caused the problem. If you are inlining a \nmethod for a whole workspace, it might be very hard to work around this issue.",
    "I agree that this isn\u0027t optimal. But here are my arguments:\n\n- we only fix a handfull bugs for RC4 and we have more severe ones\n- this one doesn\u0027t cause any harm to the workspace\n- code of the form (t) isn\u0027t very likely\n\nGiven this, we deceided not to fix for 2.1. But it should be addressed in one \nof the first build after 2.1 is out of the door. We should also consider this \nfor 2.1.1.",
    "Created an attachment (id\u003d4610)\nBetter patch that fixes the problem\n",
    "Bug fixed for 2.1.1 branch. Fix reviewed by Adam Kiezun and Martin Aeschlimann.",
    "Merged changes into HEAD",
    "Verified on build M-M20030530-200305301608"
  ],
  "commentCreationDates": [
    "2003-03-24T09:25:34+01:00",
    "2003-03-24T09:36:31+01:00",
    "2003-03-24T11:13:47+01:00",
    "2003-03-24T11:17:33+01:00",
    "2003-03-24T13:04:43+01:00",
    "2003-03-25T07:36:52+01:00",
    "2003-03-25T13:34:45+01:00",
    "2003-04-16T15:53:08+02:00",
    "2003-04-16T15:53:51+02:00",
    "2003-04-17T14:00:14+02:00",
    "2003-06-03T13:07:17+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.flow.LocalFlowInfo.\u003cinit\u003e",
          "source": "LocalFlowInfo.java:21"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.flow.FlowAnalyzer.endVisitPrePostfixExpression",
          "source": "FlowAnalyzer.java:845"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.flow.FlowAnalyzer.endVisit",
          "source": "FlowAnalyzer.java:640"
        },
        {
          "method": "org.eclipse.jdt.core.dom.PrefixExpression.accept0",
          "source": "PrefixExpression.java:178"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:1423"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodInvocation.accept0",
          "source": "MethodInvocation.java:95"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:1400"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ExpressionStatement.accept0",
          "source": "ExpressionStatement.java:81"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:1423"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:81"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:1400"
        },
        {
          "method": "org.eclipse.jdt.core.dom.IfStatement.accept0",
          "source": "IfStatement.java:95"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:1423"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:81"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:1400"
        },
        {
          "method": "org.eclipse.jdt.core.dom.IfStatement.accept0",
          "source": "IfStatement.java:95"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:1423"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:81"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:1400"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodDeclaration.accept0",
          "source": "MethodDeclaration.java:178"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:1353"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.flow.InputFlowAnalyzer.doPerform",
          "source": "InputFlowAnalyzer.java:117"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.flow.InputFlowAnalyzer.perform",
          "source": "InputFlowAnalyzer.java:109"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.CallInliner.flowAnalysis",
          "source": "CallInliner.java:143"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.CallInliner.perform",
          "source": "CallInliner.java:154"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.code.InlineMethodRefactoring.checkInput",
          "source": "InlineMethodRefactoring.java:220"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.CheckConditionsOperation.run",
          "source": "CheckConditionsOperation.java:65"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run",
          "source": "CreateChangeOperation.java:100"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PerformChangeOperation.run",
          "source": "PerformChangeOperation.java:138"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:302"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:252"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.run",
          "source": "RefactoringWizardDialog2.java:266"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PerformRefactoringUtil.performRefactoring",
          "source": "PerformRefactoringUtil.java:53"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish",
          "source": "RefactoringWizard.java:363"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.UserInputWizardPage.performFinish",
          "source": "UserInputWizardPage.java:119"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizard.performFinish",
          "source": "RefactoringWizard.java:426"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.okPressed",
          "source": "RefactoringWizardDialog2.java:383"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.buttonPressed",
          "source": "Dialog.java:256"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:423"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:91"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1842"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1549"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:583"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:563"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:70"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.activate",
          "source": "InlineMethodAction.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.run",
          "source": "InlineMethodAction.java:121"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.InlineMethodAction.run",
          "source": "InlineMethodAction.java:82"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.InlineAction.tryInlineMethod",
          "source": "InlineAction.java:132"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.InlineAction.run",
          "source": "InlineAction.java:109"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:193"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:169"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.ui.internal.WWinKeyBindingService.pressed",
          "source": "WWinKeyBindingService.java:214"
        },
        {
          "method": "org.eclipse.ui.internal.WWinKeyBindingService$5.widgetSelected",
          "source": "WWinKeyBindingService.java:328"
        },
        {
          "method": "org.eclipse.ui.internal.AcceleratorMenu$2.handleEvent",
          "source": "AcceleratorMenu.java:65"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1842"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1549"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "35556",
      "date": "2003-03-24T09:25:34+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "35556",
  "bugId": "35556",
  "date": "2003-03-24T09:25:34+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}