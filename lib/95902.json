{
  "comments": [
    "N20050519-0010\n\nI imported the binary plug-ins from N20050519-0010 into my existing workpspace\nwhich already contained older versions for those plug-ins and used \u0027File\u0027 search\nto find a plug-in ID. This did not work: search reported a list of all the\nimported manifest.mf files being out-of-sync with the workspace, see attached\npicture.\n\nThere might be other imported files being out of sync but I only touched the MFs\nso far today.",
    "Created an attachment (id\u003d21408)\nPicture showing sync errors after File search\n",
    "Here\u0027s one of the .log entries:\n\n!ENTRY org.eclipse.search 4 0 2005-05-19 09:07:45.938\n!MESSAGE Problems encountered during text search.\n!SUBENTRY 1 org.eclipse.search 4 2 2005-05-19 09:07:45.938\n!MESSAGE File \u0027org.eclipse.update.ui/META-INF/MANIFEST.MF\u0027 has been skipped:\nProblem while reading file (\u0027Resource is out of sync with the file system:\n/org.eclipse.update.ui/META-INF/MANIFEST.MF.\u0027).\n!STACK 1\norg.eclipse.core.internal.resources.ResourceException: Resource is out of sync\nwith the file system: /org.eclipse.update.ui/META-INF/MANIFEST.MF.\n\tat\norg.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:526)\n\tat org.eclipse.core.internal.resources.File.getContents(File.java:294)\n\tat org.eclipse.core.internal.resources.File.getContents(File.java:283)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.initializeReader(FileCharSequenceProvider.java:245)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.reset(FileCharSequenceProvider.java:237)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider.newCharSequence(FileCharSequenceProvider.java:39)\n\tat\norg.eclipse.search.internal.core.text.TextSearchVisitor.visit(TextSearchVisitor.java:169)\n\tat org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:50)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:81)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:119)\n\tat org.eclipse.core.internal.resources.Resource.accept(Resource.java:60)\n\tat\norg.eclipse.search.internal.core.text.TextSearchVisitor.process(TextSearchVisitor.java:97)\n\tat\norg.eclipse.search.internal.core.text.TextSearchEngine.search(TextSearchEngine.java:46)\n\tat org.eclipse.search.internal.ui.text.FileSearchQuery.run(FileSearchQuery.java:84)\n\tat\norg.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:93)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n",
    "I suspect this might be a resources issue.  John?",
    "This log says the files are out of sync, but there\u0027s no evidence here for how\nthe files became out of sync. I tried reproducing by reimporting several plugins\n(including org.eclipse.update.ui) but could not reproduce.\n\nIf you have plugins imported as binary with linked content, and then you replace\nthe eclipse version being targeted, I would expect all files to be out of sync\nat that point. However, I don\u0027t see how they could remain out of sync after\nre-importing.  Wassim, I assume when you import a plugin that already exists in\nthe workspace, you delete the existing project before performing the import? \nDani, is it reproducible?",
    "\u003eWassim, I assume when you import a plugin that already exists in\n\u003ethe workspace, you delete the existing project before performing the import? \n\nAbsolutely.  \n\nHowever, in the past (like a year ago), I have noticed that the delta for the \nnew projects (replacing the ones that were deleted) comes as a resource change \ndelta the content changed flag, not as addition deltas.\ndoes that make sense?",
    "I\u0027m always using binary import (no linking).\nMy set includes all pre-reqs of JDT UI - Text plug-ins (and some others)\n",
    "Re comment #5 - if a resource is deleted and then recreated within the same\nworkspace runnable, and no resource change event occurs in the middle, then it\nwill show up as a CHANGED delta with the REPLACED flag. Either way, it shouldn\u0027t\ncause files to be out of sync...",
    "Could not reproduce a problem with import.  I will therefore close as \nworksforme. \n\nJohn, if you feel there is something that needs to be addressed in Resources, \nthen reopen and move to your bucket.",
    "Wassim, for me this happens consistently with each PDE import as \u0027Binary\nprojects\u0027, so maybe I was unclear about how to trigger the bug. Here are the\nsimplest steps I could find:\n\n1. download and isntall N20050522-0010 or N20050519-0010 (WindowsXP in my case)\n2. start fresh workspace (same in my bug dev workspace)\n3. import \u0027org.eclipse.pde.ui\u0027 as \u0027Binary projects\u0027\n4. do a \u0027File Search\u0027 for \"text\" in *.mf files (leave all other options as is)\n\u003d\u003d\u003e search reports that the *.mf file is out of sync\n\nJust wondering: what steps did you try that it worked for you ;-)\n\nHere\u0027s the .log:\n!SESSION 2005-05-22 11:00:39.496 -----------------------------------------------\neclipse.buildId\u003dN20050522-0010\njava.version\u003d1.5.0_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_CH\nFramework arguments:  -showlocation\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -showlocation -data\nc:\\eclipse\\drops\\N20050522-0010\\workspace\n\n!ENTRY org.eclipse.search 4 0 2005-05-22 11:02:55.211\n!MESSAGE Problems encountered during text search.\n!SUBENTRY 1 org.eclipse.search 4 2 2005-05-22 11:02:55.211\n!MESSAGE File \u0027org.eclipse.pde.ui/META-INF/MANIFEST.MF\u0027 has been skipped,\nproblem while reading: (\u0027Resource is out of sync with the file system:\n/org.eclipse.pde.ui/META-INF/MANIFEST.MF.\u0027).\n!STACK 1\norg.eclipse.core.internal.resources.ResourceException: Resource is out of sync\nwith the file system: /org.eclipse.pde.ui/META-INF/MANIFEST.MF.\n\tat\norg.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:526)\n\tat org.eclipse.core.internal.resources.File.getContents(File.java:294)\n\tat org.eclipse.core.internal.resources.File.getContents(File.java:283)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.initializeReader(FileCharSequenceProvider.java:270)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.reset(FileCharSequenceProvider.java:263)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.\u003cinit\u003e(FileCharSequenceProvider.java:249)\n\tat\norg.eclipse.search.internal.core.text.FileCharSequenceProvider.newCharSequence(FileCharSequenceProvider.java:33)\n\tat\norg.eclipse.search.internal.core.text.TextSearchVisitor.visit(TextSearchVisitor.java:169)\n\tat org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:50)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:81)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat\norg.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:119)\n\tat org.eclipse.core.internal.resources.Resource.accept(Resource.java:60)\n\tat\norg.eclipse.search.internal.core.text.TextSearchVisitor.process(TextSearchVisitor.java:97)\n\tat\norg.eclipse.search.internal.core.text.TextSearchEngine.search(TextSearchEngine.java:46)\n\tat org.eclipse.search.internal.ui.text.FileSearchQuery.run(FileSearchQuery.java:84)\n\tat\norg.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:93)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n!SUBENTRY 2 org.eclipse.core.resources 4 274 2005-05-22 11:02:55.221\n!MESSAGE Resource is out of sync with the file system:\n/org.eclipse.pde.ui/META-INF/MANIFEST.MF.",
    "\u003eJust wondering: what steps did you try that it worked for you ;-)\nOne explanation could be that you tried in your dev workspace and have \u0027Refresh\nautomatically\u0027 enabled?",
    "you\u0027re right.  I had that option on.  With it off, the problem does occur \nconsistently.",
    "but of course, PDE is leaving the manifest.mf out of sync after a binary \nimport.\n\nWhen importing a JARd plugin as binary, the Bundle-Classpath header of the \nmanifest.mf has to get mangled by PDE to no longer refer to \u0027.\u0027.  This way, we \ncan preserve the code in a JAR format in the workspace.\n\nWe call osgi code to write back the modified manifest.mf.  OSGi of course \ndeals with java.io.File, because it is IFile-agnostic.\n\nThe problem here is that we were neglecting to refresh the corresponding IFile \nafter the runtime is done with the File."
  ],
  "commentCreationDates": [
    "2005-05-19T09:20:19+02:00",
    "2005-05-19T09:21:48+02:00",
    "2005-05-19T09:22:52+02:00",
    "2005-05-19T12:18:58+02:00",
    "2005-05-19T17:45:47+02:00",
    "2005-05-19T17:52:50+02:00",
    "2005-05-19T17:55:10+02:00",
    "2005-05-19T18:00:52+02:00",
    "2005-05-21T04:06:30+02:00",
    "2005-05-22T11:08:22+02:00",
    "2005-05-22T11:12:17+02:00",
    "2005-05-22T14:32:28+02:00",
    "2005-06-05T08:52:15+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.resources.ResourceException",
      "message": "Resource is out of sync with the file system: /org.eclipse.update.ui/META-INF/MANIFEST.MF.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.read",
          "source": "FileSystemResourceManager.java:526"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContents",
          "source": "File.java:294"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContents",
          "source": "File.java:283"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.initializeReader",
          "source": "FileCharSequenceProvider.java:245"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.reset",
          "source": "FileCharSequenceProvider.java:237"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider.newCharSequence",
          "source": "FileCharSequenceProvider.java:39"
        },
        {
          "method": "org.eclipse.search.internal.core.text.TextSearchVisitor.visit",
          "source": "TextSearchVisitor.java:169"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource$1.visitElement",
          "source": "Resource.java:50"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:81"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.iterate",
          "source": "ElementTreeIterator.java:119"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.accept",
          "source": "Resource.java:60"
        },
        {
          "method": "org.eclipse.search.internal.core.text.TextSearchVisitor.process",
          "source": "TextSearchVisitor.java:97"
        },
        {
          "method": "org.eclipse.search.internal.core.text.TextSearchEngine.search",
          "source": "TextSearchEngine.java:46"
        },
        {
          "method": "org.eclipse.search.internal.ui.text.FileSearchQuery.run",
          "source": "FileSearchQuery.java:84"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run",
          "source": "InternalSearchUI.java:93"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "95902",
      "date": "2005-05-19T09:22:52+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.core.internal.resources.ResourceException",
      "message": "Resource is out of sync with the file system: /org.eclipse.pde.ui/META-INF/MANIFEST.MF.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.read",
          "source": "FileSystemResourceManager.java:526"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContents",
          "source": "File.java:294"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContents",
          "source": "File.java:283"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.initializeReader",
          "source": "FileCharSequenceProvider.java:270"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.reset",
          "source": "FileCharSequenceProvider.java:263"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider$FileCharSequence.\u003cinit\u003e",
          "source": "FileCharSequenceProvider.java:249"
        },
        {
          "method": "org.eclipse.search.internal.core.text.FileCharSequenceProvider.newCharSequence",
          "source": "FileCharSequenceProvider.java:33"
        },
        {
          "method": "org.eclipse.search.internal.core.text.TextSearchVisitor.visit",
          "source": "TextSearchVisitor.java:169"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource$1.visitElement",
          "source": "Resource.java:50"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:81"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.iterate",
          "source": "ElementTreeIterator.java:119"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.accept",
          "source": "Resource.java:60"
        },
        {
          "method": "org.eclipse.search.internal.core.text.TextSearchVisitor.process",
          "source": "TextSearchVisitor.java:97"
        },
        {
          "method": "org.eclipse.search.internal.core.text.TextSearchEngine.search",
          "source": "TextSearchEngine.java:46"
        },
        {
          "method": "org.eclipse.search.internal.ui.text.FileSearchQuery.run",
          "source": "FileSearchQuery.java:84"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run",
          "source": "InternalSearchUI.java:93"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 1,
      "commentIndex": 9,
      "bugId": "95902",
      "date": "2005-05-22T11:08:22+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "95902",
  "bugId": "95902",
  "date": "2005-05-19T09:20:19+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}