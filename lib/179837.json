{
  "comments": [
    "Build ID: I20070323-1616\n\nSteps To Reproduce:\nI\u0027m not sure if this is two bugs or one - the NPE only occurs when I duplicate the underlying problem a second time.\n\nI do a Project-\u003eClean for a project that has external tool builders configured for it.\n\nThe first two builders seem to succeed, they are marked to run \"During a Clean\", and they run to completion, and show output in consoles.\n\nThe third builder does not run - its marked to run \"After a clean\".  It should run, and has in previous versions of eclipse.  The other builders in the list after it don\u0027t run either.  Nothing shows up in error log.\n\nWhen I trigger another Clean, then I get the NPE shown below in the error log\n\n\nMore information:\njava.lang.NullPointerException\nat org.eclipse.core.internal.events.ResourceDeltaFactory.computeDelta(ResourceDeltaFactory.java:47)\nat org.eclipse.core.internal.events.BuildManager.getDelta(BuildManager.java:579)\nat org.eclipse.core.internal.events.InternalBuilder.getDelta(InternalBuilder.java:93)\nat org.eclipse.core.resources.IncrementalProjectBuilder.getDelta(IncrementalProjectBuilder.java:231)\nat org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.buildStarted(ExternalToolBuilder.java:236)\nat org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.launchBuild(ExternalToolBuilder.java:173)\nat org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.clean(ExternalToolBuilder.java:285)\nat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:631)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:163)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)\nat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:248)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:251)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:216)\nat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:358)\nat org.eclipse.core.internal.resources.Project.internalBuild(Project.java:494)\nat org.eclipse.core.internal.resources.Project.build(Project.java:75)\nat org.eclipse.ui.internal.ide.dialogs.CleanDialog.doClean(CleanDialog.java:242)\nat org.eclipse.ui.internal.ide.dialogs.CleanDialog$1.runInWorkspace(CleanDialog.java:127)\nat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Created an attachment (id\u003d62289)\nsample project\n\nHere\u0027s a sample project, do a Project-\u003eClean on it and you\u0027ll see the \"after clean\" builder doesn\u0027t run.\n\nYou may have to comment out line 236 in ExternalToolBuilder to avoid the NPE to test the above project:\n        // buildDelta\u003d getDelta(getProject());\n",
    "Thanks Matthew. I will investigate later in the week or on the weekend.",
    "Logged bug 182638 for the NPE.\n\nBasically we should not be attempting to retrieve a delta during a clean.",
    "I have released a change to not attempt to determine a delta for builds other than  incremental or auto. \n\nI need to investigate more the apparent change in behavior from Eclipse 3.2.* to Eclipse 3.3 for the after clean builders",
    "From my investigation I believe the external tool builder support is functioning as designed after the fix for the getDelta NPE. \nI have logged bug 182781 against core resources for no triggering on FULL_BUILD (after a clean)",
    "verified."
  ],
  "commentCreationDates": [
    "2007-03-28T22:22:23+02:00",
    "2007-03-28T22:48:06+02:00",
    "2007-03-28T22:53:20+02:00",
    "2007-04-17T00:06:31+02:00",
    "2007-04-17T01:44:27+02:00",
    "2007-04-17T18:35:30+02:00",
    "2007-05-16T23:31:18+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.events.ResourceDeltaFactory.computeDelta",
          "source": "ResourceDeltaFactory.java:47"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.getDelta",
          "source": "BuildManager.java:579"
        },
        {
          "method": "org.eclipse.core.internal.events.InternalBuilder.getDelta",
          "source": "InternalBuilder.java:93"
        },
        {
          "method": "org.eclipse.core.resources.IncrementalProjectBuilder.getDelta",
          "source": "IncrementalProjectBuilder.java:231"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.buildStarted",
          "source": "ExternalToolBuilder.java:236"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.launchBuild",
          "source": "ExternalToolBuilder.java:173"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.clean",
          "source": "ExternalToolBuilder.java:285"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:631"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:163"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:199"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:248"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:251"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:216"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:358"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.internalBuild",
          "source": "Project.java:494"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.build",
          "source": "Project.java:75"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.CleanDialog.doClean",
          "source": "CleanDialog.java:242"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.CleanDialog$1.runInWorkspace",
          "source": "CleanDialog.java:127"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "179837",
      "date": "2007-03-28T22:22:23+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "179837",
  "bugId": "179837",
  "date": "2007-03-28T22:22:23+02:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}