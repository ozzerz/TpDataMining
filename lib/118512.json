{
  "comments": [
    "I20051129-1200\n\nI tried to create a Detail Formatter like the one in bug 75643 for java.util.AbstractMap. Selecting a HashMap in the Variables view gives the NPE below.\n\nThe problem can be solved by adding \"this.\" in front of size() and entrySet().\n\nError 2005-11-29 21:40:39.502 Exception processing async thread queue\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.getEnclosingLevel(ASTInstructionCompiler.java:388)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.getEnclosingLevel(ASTInstructionCompiler.java:401)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit(ASTInstructionCompiler.java:2698)\n\tat org.eclipse.jdt.core.dom.MethodInvocation.accept0(MethodInvocation.java:236)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit(ASTInstructionCompiler.java:2552)\n\tat org.eclipse.jdt.core.dom.InfixExpression.accept0(InfixExpression.java:363)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit(ASTInstructionCompiler.java:3713)\n\tat org.eclipse.jdt.core.dom.VariableDeclarationFragment.accept0(VariableDeclarationFragment.java:220)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit(ASTInstructionCompiler.java:3732)\n\tat org.eclipse.jdt.core.dom.VariableDeclarationStatement.accept0(VariableDeclarationStatement.java:265)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.Block.accept0(Block.java:135)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChild(ASTNode.java:2497)\n\tat org.eclipse.jdt.core.dom.MethodDeclaration.accept0(MethodDeclaration.java:501)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.TypeDeclaration.accept0(TypeDeclaration.java:483)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2520)\n\tat org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:212)\n\tat org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2450)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.createExpressionFromAST(ASTEvaluationEngine.java:389)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.getCompiledExpression(ASTEvaluationEngine.java:336)\n\tat org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.getCompiledExpression(ASTEvaluationEngine.java:306)\n\tat org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager.getCompiledExpression(JavaDetailFormattersManager.java:328)\n\tat org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager.resolveFormatter(JavaDetailFormattersManager.java:158)\n\tat org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager.access$1(JavaDetailFormattersManager.java:151)\n\tat org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager$4.run(JavaDetailFormattersManager.java:139)\n\tat org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run(JDIThread.java:2448)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Hmmm. works for me in the latest build.",
    "Indeed works with a 1.4 VM. But it doesn\u0027t work in an 1.5 project with an 1.5 VM.\n\nExact steps:\n- start eclipse I20060105-0800 with a 1.5 vm and a new workspace\n- create a java project with this class and set the breakpoint:\npackage p;\nimport java.util.HashMap;\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tnew Main().exec();\n\t}\n\tprivate void exec() {\n\t\tHashMap hm\u003d new HashMap();\n\t\thm.put(\"one\", \"1\"); // breakpoint\n\t\thm.put(\"two\", \"2\");\n\t}\n}\n\n- install the detail formatter from bug 75643 for java.util.AbstractMap\n- debug, then select \u0027hm\u0027 in the Variables view",
    "The NPE has been fixed (dup of bug 133636). However, when I try this on M6, I get a different error message:\n\nDetail formatter error:\n\t\tThe method entrySet() is undefined for the type HashMap\n\nIt works when using 1.4",
    "Works for me in RC2",
    "Verified."
  ],
  "commentCreationDates": [
    "2005-11-29T20:41:02+01:00",
    "2006-01-05T19:06:38+01:00",
    "2006-01-06T11:44:03+01:00",
    "2006-04-04T22:37:38+02:00",
    "2006-05-02T20:40:42+02:00",
    "2006-05-02T20:40:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.getEnclosingLevel",
          "source": "ASTInstructionCompiler.java:388"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.getEnclosingLevel",
          "source": "ASTInstructionCompiler.java:401"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit",
          "source": "ASTInstructionCompiler.java:2698"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodInvocation.accept0",
          "source": "MethodInvocation.java:236"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit",
          "source": "ASTInstructionCompiler.java:2552"
        },
        {
          "method": "org.eclipse.jdt.core.dom.InfixExpression.accept0",
          "source": "InfixExpression.java:363"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit",
          "source": "ASTInstructionCompiler.java:3713"
        },
        {
          "method": "org.eclipse.jdt.core.dom.VariableDeclarationFragment.accept0",
          "source": "VariableDeclarationFragment.java:220"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTInstructionCompiler.visit",
          "source": "ASTInstructionCompiler.java:3732"
        },
        {
          "method": "org.eclipse.jdt.core.dom.VariableDeclarationStatement.accept0",
          "source": "VariableDeclarationStatement.java:265"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.Block.accept0",
          "source": "Block.java:135"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChild",
          "source": "ASTNode.java:2497"
        },
        {
          "method": "org.eclipse.jdt.core.dom.MethodDeclaration.accept0",
          "source": "MethodDeclaration.java:501"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.TypeDeclaration.accept0",
          "source": "TypeDeclaration.java:483"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.acceptChildren",
          "source": "ASTNode.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnit.accept0",
          "source": "CompilationUnit.java:212"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.accept",
          "source": "ASTNode.java:2450"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.createExpressionFromAST",
          "source": "ASTEvaluationEngine.java:389"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.getCompiledExpression",
          "source": "ASTEvaluationEngine.java:336"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine.getCompiledExpression",
          "source": "ASTEvaluationEngine.java:306"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager.getCompiledExpression",
          "source": "JavaDetailFormattersManager.java:328"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager.resolveFormatter",
          "source": "JavaDetailFormattersManager.java:158"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager.access$1",
          "source": "JavaDetailFormattersManager.java:151"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.JavaDetailFormattersManager$4.run",
          "source": "JavaDetailFormattersManager.java:139"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run",
          "source": "JDIThread.java:2448"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "118512",
      "date": "2005-11-29T20:41:02+01:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "118512",
  "bugId": "118512",
  "date": "2005-11-29T20:41:02+01:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}