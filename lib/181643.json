{
  "comments": [
    "Build ID: wtp-0330\n\nSteps To Reproduce:\n1.Create a dynamic web project with JSF facet.\n2.Paste a component jar file (e.g, rte.jar from IBM RAD) into the WEB-INF/lib folder.\n3.Create a JSP page and drop an inputText component from the palette.\n4.In the source area, inside an attribute value\u0027s \"#{}\", press Ctrl+Space to use the content assist of the EL expression.\n\nAn exception will occur.\n\n\n\nMore information:\nInside the faces-config.xml in the jar, there is the following content:\n\t\u003ccomponent\u003e\n\t\t\u003ccomponent-type\u003ecom.ibm.odc.jsf.RichTextEditor\u003c/component-type\u003e\n\t\t\u003ccomponent-class\u003ecom.ibm.odc.jsf.components.components.rte.UIRichTextEditor\u003c/component-class\u003e\n\t\t\u003ccomponent-extension\u003e\n\t\t\t\u003ccomponent-family\u003ecom.ibm.odc.jsf.RichTextEditor\u003c/component-family\u003e\n\t\t\t\u003crenderer-type\u003eRichTextEditor\u003c/renderer-type\u003e\n\t\t\u003c/component-extension\u003e\n\t\u003c/component\u003e\n    \u003crender-kit\u003e\n\t\t\u003crenderer\u003e\n\t\t\t\u003ccomponent-family\u003ecom.ibm.odc.jsf.RichTextEditor\u003c/component-family\u003e\n\t\t\t\u003crenderer-type\u003eRichTextEditor\u003c/renderer-type\u003e\n\t\t\t\u003crenderer-class\u003ecom.ibm.odc.jsf.components.renderer.rte.RichTextRenderer\u003c/renderer-class\u003e\n\t\t\u003c/renderer\u003e  \n\t\u003c/render-kit\u003e\n\nThe exception is as follows,\njava.lang.ArrayStoreException\nat org.eclipse.emf.common.util.BasicEList.assign(BasicEList.java:191)\nat org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:645)\nat org.eclipse.emf.common.notify.impl.NotifyingListImpl.doAddUnique(NotifyingListImpl.java:331)\nat org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:315)\nat org.eclipse.emf.common.util.BasicEList.add(BasicEList.java:626)\nat org.eclipse.wst.common.internal.emf.utilities.ExtendedEcoreUtil.eSetOrAdd(ExtendedEcoreUtil.java:75)\nat org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue(Translator.java:605)\nat org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue(Translator.java:620)\nat org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue(Translator.java:611)\nat org.eclipse.wst.common.internal.emf.resource.Translator.setTextValueIfNecessary(Translator.java:453)\nat org.eclipse.wst.common.internal.emf.resource.CacheEventNode.commit(CacheEventNode.java:231)\nat org.eclipse.wst.common.internal.emf.resource.EMF2SAXDocumentHandler.endElement(EMF2SAXDocumentHandler.java:115)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.dtd.XMLNSDTDValidator.endNamespaceScope(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleEndElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.endElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\nat org.eclipse.wst.common.internal.emf.resource.EMF2SAXRenderer.doLoad(EMF2SAXRenderer.java:93)\nat org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad(TranslatorResourceImpl.java:142)\nat org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad(CompatibilityXMIResourceImpl.java:173)\nat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1164)\nat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:965)\nat org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.load(CompatibilityXMIResourceImpl.java:259)\nat org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load(TranslatorResourceImpl.java:388)\nat org.eclipse.jst.jsf.core.internal.provisional.jsfappconfig.JARFileJSFAppConfigProvider.getFacesConfigModel(JARFileJSFAppConfigProvider.java:86)\nat org.eclipse.jst.jsf.core.internal.provisional.jsfappconfig.JSFAppConfigManager.getFacesConfigModels(JSFAppConfigManager.java:405)\nat org.eclipse.jst.jsf.core.internal.provisional.jsfappconfig.JSFAppConfigManager.getManagedBeans(JSFAppConfigManager.java:440)",
    "The problem might be caused by the tags inside \u003ccomponent-extension\u003e. \nCopying the content into a loose faces-config.xml does not see the problem.\nSomething wrong in JARFileJSFAppConfigProvider?",
    "Created an attachment (id\u003d63535)\njar file\n\nDrop the attached jar file to WEB-INF\\lib will see the problem. (Maybe need to restart the workbench.)",
    "Looks like there may be some relation to 181341.\n\nNot to self: we need more test cases for faces-config loaded from jars (currently I\u0027m not sure if there are any).",
    "The main problem is fixed: we were using an SSE renderer to do faces-config model loading from jar files.  When I wrote our workaround for loading XML \"any\" elements (used by all extension elements), I didn\u0027t realize this, which is why jar-loaded models with extensions were having problems.\n\nThe fix was to change to the DOM renderer.  Unfortunately, the DOMSSE renderer that we sub-classed to do the extension workaround doesn\u0027t seem to to support jar entry loading, so we\u0027re stuck with the vanilla DOM renderer.  This results in a new limitation as it stands now that we cannot load into the EMF model (although there should be nothing stopping you from going to the DOM) meta-data extension data in faces-config files that live in jars:\n\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d183441\n\nWith the caveat split into a new bug, I\u0027m marking this resolved.\n\nI have also added regression tests to our jsf.core.tests suite based on jar file attachment on this bug.",
    "Xiaonan, can you please verify this fix in either 2.0 or 2.0.1RC3?"
  ],
  "commentCreationDates": [
    "2007-04-09T20:53:11+02:00",
    "2007-04-09T20:59:50+02:00",
    "2007-04-11T21:06:20+02:00",
    "2007-04-12T19:53:07+02:00",
    "2007-04-20T23:11:57+02:00",
    "2007-09-22T00:29:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayStoreException",
      "elements": [
        {
          "method": "org.eclipse.emf.common.util.BasicEList.assign",
          "source": "BasicEList.java:191"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList.addUnique",
          "source": "BasicEList.java:645"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.doAddUnique",
          "source": "NotifyingListImpl.java:331"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique",
          "source": "NotifyingListImpl.java:315"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList.add",
          "source": "BasicEList.java:626"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.utilities.ExtendedEcoreUtil.eSetOrAdd",
          "source": "ExtendedEcoreUtil.java:75"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue",
          "source": "Translator.java:605"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue",
          "source": "Translator.java:620"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue",
          "source": "Translator.java:611"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.Translator.setTextValueIfNecessary",
          "source": "Translator.java:453"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.CacheEventNode.commit",
          "source": "CacheEventNode.java:231"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2SAXDocumentHandler.endElement",
          "source": "EMF2SAXDocumentHandler.java:115"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.dtd.XMLNSDTDValidator.endNamespaceScope",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleEndElement",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.endElement",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2SAXRenderer.doLoad",
          "source": "EMF2SAXRenderer.java:93"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad",
          "source": "TranslatorResourceImpl.java:142"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad",
          "source": "CompatibilityXMIResourceImpl.java:173"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1164"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:965"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.load",
          "source": "CompatibilityXMIResourceImpl.java:259"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load",
          "source": "TranslatorResourceImpl.java:388"
        },
        {
          "method": "org.eclipse.jst.jsf.core.internal.provisional.jsfappconfig.JARFileJSFAppConfigProvider.getFacesConfigModel",
          "source": "JARFileJSFAppConfigProvider.java:86"
        },
        {
          "method": "org.eclipse.jst.jsf.core.internal.provisional.jsfappconfig.JSFAppConfigManager.getFacesConfigModels",
          "source": "JSFAppConfigManager.java:405"
        },
        {
          "method": "org.eclipse.jst.jsf.core.internal.provisional.jsfappconfig.JSFAppConfigManager.getManagedBeans",
          "source": "JSFAppConfigManager.java:440"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "181643",
      "date": "2007-04-09T20:53:11+02:00",
      "product": "Java Server Faces",
      "component": "JSF Tools",
      "severity": "normal"
    }
  ],
  "groupId": "181643",
  "bugId": "181643",
  "date": "2007-04-09T20:53:11+02:00",
  "product": "Java Server Faces",
  "component": "JSF Tools",
  "severity": "normal"
}