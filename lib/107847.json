{
  "comments": [
    "This is the same problem reported by bug 90980.  I\u0027ve looked through\nthe code and don\u0027t see any doPrivs (nor do they show up in the stack\ntrace below).  Perhaps the fix was dropped?   \n\nA fix for this in 3.1.1 or 3.1.2 would be quite helpful.\n\nHere is the stack trace:\n\njava.security.AccessControlException: Access denied\n(org.osgi.framework.ServicePermission\norg.osgi.service.url.URLStreamHandlerService get)\n\tat java.security.AccessController.checkPermission(AccessController.java:107)\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\n\tat\ncom.ibm.ws.security.core.SecurityManager.checkPermission(SecurityManager.java:188)\n\tat\norg.eclipse.osgi.framework.internal.core.Framework.checkGetServicePermission(Framework.java:1300)\n\tat\norg.eclipse.osgi.framework.internal.core.Framework.getServiceReferences(Framework.java:1174)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.getServiceReferences(BundleContextImpl.java:718)\n\tat\norg.osgi.util.tracker.ServiceTracker.getInitialReferences(ServiceTracker.java:305)\n\tat org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:264)\n\tat org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:218)\n\tat\norg.eclipse.osgi.framework.internal.protocol.URLStreamHandlerProxy.\u003cinit\u003e(URLStreamHandlerProxy.java:61)\n\tat\norg.eclipse.osgi.framework.internal.protocol.StreamHandlerFactory.createURLStreamHandler(StreamHandlerFactory.java:110)\n\tat java.net.URL.getURLStreamHandler(URL.java:1137)\n\tat java.net.URL.\u003cinit\u003e(URL.java:605)\n\tat java.net.URL.\u003cinit\u003e(URL.java:497)\n\tat java.net.URL.\u003cinit\u003e(URL.java:446)\n\tat com.acme.foo.TestUrlEJB.performTests(TestUrlEJB.java)",
    "I will investigate ...",
    "Created an attachment (id\u003d26413)\nProposed fix\n\nwraps doPriv around calls to ServiceTracker.open and System.getProperty",
    "I want to get confirmation from Tom Musta that this patch fixes his problem.  \n\nPascal, please review patch for 3.1.1 once Tom confirms the fix.  Thanks.",
    "I\u0027ve tested out the change made by Thomas and it works.",
    "Fix released in HEAD (3.2).  Waiting for review from Pascal for 3.1.1 \nmaintenance release.",
    "Aren\u0027t you now opening the Tracker twice when you have no SecurityManager installed?",
    "Yes, Michael we are.  Nice catch, thanks!  I will post a new patch.",
    "Created an attachment (id\u003d26445)\nBetter proposed fix\n\nModified fix to avoid opening the ServiceTracker object twice.",
    "This is good to go.",
    "Fixed in 3.1 maintenance branch and HEAD."
  ],
  "commentCreationDates": [
    "2005-08-24T16:23:11+02:00",
    "2005-08-24T16:58:08+02:00",
    "2005-08-24T19:04:07+02:00",
    "2005-08-24T19:05:41+02:00",
    "2005-08-24T22:35:27+02:00",
    "2005-08-24T23:09:38+02:00",
    "2005-08-25T12:49:02+02:00",
    "2005-08-25T15:14:38+02:00",
    "2005-08-25T15:27:59+02:00",
    "2005-08-26T15:56:04+02:00",
    "2005-08-26T16:48:49+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.security.AccessControlException",
      "message": "Access denied (org.osgi.framework.ServicePermission org.osgi.service.url.URLStreamHandlerService get)",
      "elements": [
        {
          "method": "java.security.AccessController.checkPermission",
          "source": "AccessController.java:107"
        },
        {
          "method": "java.lang.SecurityManager.checkPermission",
          "source": "SecurityManager.java:547"
        },
        {
          "method": "com.ibm.ws.security.core.SecurityManager.checkPermission",
          "source": "SecurityManager.java:188"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.checkGetServicePermission",
          "source": "Framework.java:1300"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.getServiceReferences",
          "source": "Framework.java:1174"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.getServiceReferences",
          "source": "BundleContextImpl.java:718"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker.getInitialReferences",
          "source": "ServiceTracker.java:305"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker.open",
          "source": "ServiceTracker.java:264"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker.open",
          "source": "ServiceTracker.java:218"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.protocol.URLStreamHandlerProxy.\u003cinit\u003e",
          "source": "URLStreamHandlerProxy.java:61"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.protocol.StreamHandlerFactory.createURLStreamHandler",
          "source": "StreamHandlerFactory.java:110"
        },
        {
          "method": "java.net.URL.getURLStreamHandler",
          "source": "URL.java:1137"
        },
        {
          "method": "java.net.URL.\u003cinit\u003e",
          "source": "URL.java:605"
        },
        {
          "method": "java.net.URL.\u003cinit\u003e",
          "source": "URL.java:497"
        },
        {
          "method": "java.net.URL.\u003cinit\u003e",
          "source": "URL.java:446"
        },
        {
          "method": "com.acme.foo.TestUrlEJB.performTests",
          "source": "TestUrlEJB.java"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "107847",
      "date": "2005-08-24T16:23:11+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "major"
    }
  ],
  "groupId": "107847",
  "bugId": "107847",
  "date": "2005-08-24T16:23:11+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "major"
}