{
  "comments": [
    "Description: Cascading parameter values can\u0027t be displayed properly in html viewer.\n\nSteps to reproduce:\n1. Preview attached design file in html viewer.\n2. Click on \"change parameter\" button in html viewer.\n3. Select the first parameter value and expect that the second parameter value in the same cascading parameter group could be displayed, but it is not displayed.",
    "Created an attachment (id\u003d32443)\ndesign file\n\n",
    "I can not use attached report but probably re-produce the issue using sample db. It is caused by date time data type. Using 2nd attached report, get this exception:\n\norg.eclipse.birt.core.exception.BirtException: Invalid type\n\tat org.eclipse.birt.core.data.DataTypeUtil.convert(DataTypeUtil.java:133)\n\tat org.eclipse.birt.data.engine.impl.ResultIterator$GroupUtil.groupKeyValuesEqual(ResultIterator.java:640)\n\tat org.eclipse.birt.data.engine.impl.ResultIterator$GroupUtil.findGroup(ResultIterator.java:590)\n\tat org.eclipse.birt.data.engine.impl.ResultIterator.findGroup(ResultIterator.java:534)\n\tat org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getSelectionListForCascadingGroup(GetParameterDefinitionTask.java:655)\n\tat org.eclipse.birt.report.soapengine.processor.DocumentProcessor.doRenderCascadingParameter(DocumentProcessor.java:215)\n\tat org.eclipse.birt.report.soapengine.processor.DocumentProcessor.process(DocumentProcessor.java:127)\n\tat org.eclipse.birt.report.soapengine.endpoint.BirtSoapBindingImpl.getUpdatedObjects(BirtSoapBindingImpl.java:49)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\n\nEngine/dte?",
    "Created an attachment (id\u003d32483)\n2nd report\n\n",
    "Fixed.",
    "Still existed.",
    "The bug about date type conversion in Data Engine is resolved. But there is still a bug in viewer. In org.eclipse.birt.report.soapengine.processor.DocumentProcessor, there is a class cast operation which is not valid: \nselections.setValue( index++, (String) item.getValue( ) ). \nA suggestion is changing it to: selections.setValue( index++, item.getValue( ).toString( ) ).\n\n",
    "fixed",
    "The problem still can be found in build 20060110.",
    "Using 2nd report I attached, i can not see any issue here.\nI can not run 1st report since it needs a db in your part.\n\nPlease try to re-produce the issue using sample db and see whether issue still exists.",
    "It works in sample database. I attached a design file with both sample database and jdbc database.",
    "Created an attachment (id\u003d32809)\ndesign file\n\n",
    "fixed",
    "open",
    "There is a date comparation error in Date Engine.",
    "In the original implementation the equalization of two object is by using ?Object.equals()? method. This is somewhat not ok for Date types because of locale issues. Now we test the identity of Date type by comparing their long naos values.\n\n",
    "Still existed.",
    "The new problem is that, when preview the report with web viewer, the cascading parameters which are not in top level cannot be properly populated.\n\nThe problem is caused by not correctly capturing the combobox selection change event when there is only one item in the combobox which host the value of a sub-cascading-parameter. Because of the missing of that event, the method ResultIterator.findGroup(Object[]) is proceeding with wrong argument.",
    "We probably need some help from engine.\n\nCurrently \"getSelectionListForCascadingGroup\" only returns the 1st available selection list based on the key value array. i.e., for a 3-parameter cascade parameter group, if provided key value pair has only one available value, it only returns one selection list.\n\nAs specified in the test case, the 2nd list may only have one value so that client side can not trigger a selection change event. Also it seems not easy to use other events to micmic this behavior.\n\nIs it possible for engine to return the selection list for all remaining parameters? i.e., in a cascade parameter group: county, state, city, if country is specified, engine returns 2 lists, list of states where country \u003d \"XXX\", list of city where state \u003d \"first value of state list\".",
    "fixed.",
    "Verified in build 20060121."
  ],
  "commentCreationDates": [
    "2006-01-04T03:30:58+01:00",
    "2006-01-04T03:32:20+01:00",
    "2006-01-04T20:58:51+01:00",
    "2006-01-04T20:59:33+01:00",
    "2006-01-05T07:54:27+01:00",
    "2006-01-06T03:01:44+01:00",
    "2006-01-06T05:00:53+01:00",
    "2006-01-06T23:42:41+01:00",
    "2006-01-10T05:56:40+01:00",
    "2006-01-10T21:13:19+01:00",
    "2006-01-11T01:29:04+01:00",
    "2006-01-11T01:35:20+01:00",
    "2006-01-11T01:52:49+01:00",
    "2006-01-11T02:07:27+01:00",
    "2006-01-11T03:30:54+01:00",
    "2006-01-11T07:35:55+01:00",
    "2006-01-13T06:42:15+01:00",
    "2006-01-13T10:19:39+01:00",
    "2006-01-13T22:39:54+01:00",
    "2006-01-14T00:32:34+01:00",
    "2006-01-23T07:00:50+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.birt.core.exception.BirtException",
      "message": "Invalid type",
      "elements": [
        {
          "method": "org.eclipse.birt.core.data.DataTypeUtil.convert",
          "source": "DataTypeUtil.java:133"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.ResultIterator$GroupUtil.groupKeyValuesEqual",
          "source": "ResultIterator.java:640"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.ResultIterator$GroupUtil.findGroup",
          "source": "ResultIterator.java:590"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.ResultIterator.findGroup",
          "source": "ResultIterator.java:534"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getSelectionListForCascadingGroup",
          "source": "GetParameterDefinitionTask.java:655"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.processor.DocumentProcessor.doRenderCascadingParameter",
          "source": "DocumentProcessor.java:215"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.processor.DocumentProcessor.process",
          "source": "DocumentProcessor.java:127"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.endpoint.BirtSoapBindingImpl.getUpdatedObjects",
          "source": "BirtSoapBindingImpl.java:49"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "122584",
      "date": "2006-01-04T20:58:51+01:00",
      "product": "BIRT",
      "component": "Report Viewer",
      "severity": "normal"
    }
  ],
  "groupId": "122584",
  "bugId": "122584",
  "date": "2006-01-04T03:30:58+01:00",
  "product": "BIRT",
  "component": "Report Viewer",
  "severity": "normal"
}