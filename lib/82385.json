{
  "comments": [
    "Config\nWindows XP\nEclipse 3.0\nJDK1.4.2 and Jdk1.5\n\n\nTo reproduce the bug use the RCP Browser demo plug-in/s\n\n1) Launch the Browser app\n2) Navigate to the following URL:\n\nhttp://java.sun.com/products/java-media/2D/samples/java2demo/Java2Demo-pi.html\n\nJDK 1.4.2 Results: Window no longer responds\n\nAn unexpected exception has been detected in native code outside the VM.\nUnexpected Signal : EXCEPTION_ACCESS_VIOLATION (0xc0000005) occurred at \nPC\u003d0x70A7DA4B\nFunction\u003dOrdinal176+0x3A\nLibrary\u003dC:\\WINDOWS\\system32\\SHLWAPI.dll\n\nCurrent Java thread:\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1473)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2429)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.examples.rcp.browser.BrowserApp.run\n(BrowserApp.java:47)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\nDynamic libraries:\n0x00400000 - 0x0040B000 \tC:\\jdk\\j2sdk1.4.2_06\\bin\\javaw.exe\n0x77F50000 - 0x77FF7000 \tC:\\WINDOWS\\System32\\ntdll.dll\n0x77E60000 - 0x77F46000 \tC:\\WINDOWS\\system32\\kernel32.dll\n0x77DD0000 - 0x77E5D000 \tC:\\WINDOWS\\system32\\ADVAPI32.dll\n0x78000000 - 0x78087000 \tC:\\WINDOWS\\system32\\RPCRT4.dll\n0x77D40000 - 0x77DCC000 \tC:\\WINDOWS\\system32\\USER32.dll\n0x7F000000 - 0x7F041000 \tC:\\WINDOWS\\system32\\GDI32.dll\n0x77C10000 - 0x77C63000 \tC:\\WINDOWS\\system32\\MSVCRT.dll\n0x08000000 - 0x08139000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\client\\jvm.dll\n0x76B40000 - 0x76B6C000 \tC:\\WINDOWS\\System32\\WINMM.dll\n0x10000000 - 0x10007000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\hpi.dll\n0x00820000 - 0x0082E000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\verify.dll\n0x00830000 - 0x00849000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\java.dll\n0x00850000 - 0x0085D000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\zip.dll\n0x02ED0000 - 0x02EDF000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\net.dll\n0x71AB0000 - 0x71AC4000 \tC:\\WINDOWS\\System32\\WS2_32.dll\n0x71AA0000 - 0x71AA8000 \tC:\\WINDOWS\\System32\\WS2HELP.dll\n0x02EE0000 - 0x02EE8000 \tC:\\jdk\\j2sdk1.4.2_06\\jre\\bin\\nio.dll\n0x02EF0000 - 0x02F3E000 \tC:\\eclipse\\eclipse3.0.1\n\\eclipse\\plugins\\org.eclipse.swt.win32_3.0.1\\os\\win32\\x86\\swt-win32-3063.dll\n0x771B0000 - 0x772D4000 \tC:\\WINDOWS\\system32\\ole32.dll\n0x77340000 - 0x773CB000 \tC:\\WINDOWS\\system32\\COMCTL32.dll\n0x763B0000 - 0x763F5000 \tC:\\WINDOWS\\system32\\comdlg32.dll\n0x70A70000 - 0x70AD9000 \tC:\\WINDOWS\\system32\\SHLWAPI.dll\n0x4F510000 - 0x4FD21000 \tC:\\WINDOWS\\system32\\SHELL32.dll\n0x77120000 - 0x771AB000 \tC:\\WINDOWS\\system32\\OLEAUT32.dll\n0x76390000 - 0x763AC000 \tC:\\WINDOWS\\System32\\IMM32.dll\n0x72FA0000 - 0x72FFA000 \tC:\\WINDOWS\\System32\\USP10.dll\n0x71950000 - 0x71A34000 \tC:\\WINDOWS\\WinSxS\\x86_Microsoft.Windows.Common-\nControls_6595b64144ccf1df_6.0.2600.1579_x-ww_7bbf8d08\\comctl32.dll\n0x5AD70000 - 0x5ADA4000 \tC:\\WINDOWS\\System32\\uxtheme.dll\n0x63000000 - 0x63014000 \tC:\\WINDOWS\\System32\\SynTPFcs.dll\n0x77C00000 - 0x77C07000 \tC:\\WINDOWS\\system32\\VERSION.dll\n0x74C80000 - 0x74CAC000 \tC:\\WINDOWS\\System32\\oleacc.dll\n0x55900000 - 0x55961000 \tC:\\WINDOWS\\System32\\MSVCP60.dll\n0x7C890000 - 0x7C911000 \tC:\\WINDOWS\\System32\\CLBCATQ.DLL\n0x77050000 - 0x77115000 \tC:\\WINDOWS\\System32\\COMRes.dll\n0x71700000 - 0x71849000 \tC:\\WINDOWS\\System32\\shdocvw.dll\n0x03F60000 - 0x03FF6000 \tC:\\WINDOWS\\system32\\WININET.dll\n0x762C0000 - 0x76348000 \tC:\\WINDOWS\\system32\\CRYPT32.dll\n0x762A0000 - 0x762B0000 \tC:\\WINDOWS\\system32\\MSASN1.dll\n0x76F90000 - 0x76FA0000 \tC:\\WINDOWS\\System32\\Secur32.dll\n0x75F40000 - 0x75F5F000 \tC:\\WINDOWS\\system32\\appHelp.dll\n0x75E90000 - 0x75F3D000 \tC:\\WINDOWS\\System32\\SXS.DLL\n0x76400000 - 0x76601000 \tC:\\WINDOWS\\System32\\msi.dll\n0x76170000 - 0x761F8000 \tC:\\WINDOWS\\System32\\shdoclc.dll\n0x1A400000 - 0x1A47B000 \tC:\\WINDOWS\\system32\\urlmon.dll\n0x74770000 - 0x747FF000 \tC:\\WINDOWS\\System32\\mlang.dll\n0x71AD0000 - 0x71AD8000 \tC:\\WINDOWS\\System32\\wsock32.dll\n0x71A50000 - 0x71A8B000 \tC:\\WINDOWS\\system32\\mswsock.dll\n0x71A90000 - 0x71A98000 \tC:\\WINDOWS\\System32\\wshtcpip.dll\n0x76EE0000 - 0x76F17000 \tC:\\WINDOWS\\System32\\RASAPI32.DLL\n0x76E90000 - 0x76EA1000 \tC:\\WINDOWS\\System32\\rasman.dll\n0x71C20000 - 0x71C6E000 \tC:\\WINDOWS\\System32\\NETAPI32.dll\n0x76EB0000 - 0x76EDB000 \tC:\\WINDOWS\\System32\\TAPI32.dll\n0x76E80000 - 0x76E8D000 \tC:\\WINDOWS\\System32\\rtutils.dll\n0x722B0000 - 0x722B5000 \tC:\\WINDOWS\\System32\\sensapi.dll\n0x75A70000 - 0x75B15000 \tC:\\WINDOWS\\system32\\USERENV.dll\n0x76F20000 - 0x76F45000 \tC:\\WINDOWS\\System32\\DNSAPI.dll\n0x76FB0000 - 0x76FB7000 \tC:\\WINDOWS\\System32\\winrnr.dll\n0x76F60000 - 0x76F8C000 \tC:\\WINDOWS\\system32\\WLDAP32.dll\n0x76FC0000 - 0x76FC5000 \tC:\\WINDOWS\\System32\\rasadhlp.dll\n0x63580000 - 0x63833000 \tC:\\WINDOWS\\System32\\mshtml.dll\n0x746F0000 - 0x74716000 \tC:\\WINDOWS\\System32\\msimtf.dll\n0x74720000 - 0x74764000 \tC:\\WINDOWS\\System32\\MSCTF.dll\n0x746C0000 - 0x746E7000 \tC:\\WINDOWS\\System32\\MSLS31.DLL\n0x76670000 - 0x76757000 \tC:\\WINDOWS\\System32\\SETUPAPI.dll\n0x76380000 - 0x76385000 \tC:\\WINDOWS\\System32\\msimg32.dll\n0x04890000 - 0x0489F000 \tC:\\Program Files\\IBM\\Bluetooth \nSoftware\\btkeyind.dll\n0x72D20000 - 0x72D29000 \tC:\\WINDOWS\\System32\\wdmaud.drv\n0x72D10000 - 0x72D18000 \tC:\\WINDOWS\\System32\\msacm32.drv\n0x77BE0000 - 0x77BF4000 \tC:\\WINDOWS\\System32\\MSACM32.dll\n0x77BD0000 - 0x77BD7000 \tC:\\WINDOWS\\System32\\midimap.dll\n0x6D590000 - 0x6D5A1000 \tC:\\Program Files\\Java\\jre1.5.0\\bin\\npjpi150.dll\n0x5EDD0000 - 0x5EDEA000 \tC:\\WINDOWS\\System32\\OLEPRO32.DLL\n0x6D400000 - 0x6D417000 \tC:\\Program Files\\Java\\jre1.5.0\\bin\\jpiexp32.dll\n0x6D450000 - 0x6D468000 \tC:\\Program Files\\Java\\jre1.5.0\\bin\\jpishare.dll\n0x76C90000 - 0x76CB2000 \tC:\\WINDOWS\\system32\\imagehlp.dll\n0x6D510000 - 0x6D58D000 \tC:\\WINDOWS\\system32\\DBGHELP.dll\n0x76BF0000 - 0x76BFB000 \tC:\\WINDOWS\\System32\\PSAPI.DLL\n\nHeap at VM Abort:\nHeap\n def new generation   total 576K, used 378K [0x10010000, 0x100b0000, \n0x104f0000)\n  eden space 512K,  67% used [0x10010000, 0x10065e40, 0x10090000)\n  from space 64K,  53% used [0x100a0000, 0x100a89c0, 0x100b0000)\n  to   space 64K,   0% used [0x10090000, 0x10090000, 0x100a0000)\n tenured generation   total 1408K, used 1272K [0x104f0000, 0x10650000, \n0x14010000)\n   the space 1408K,  90% used [0x104f0000, 0x1062e010, 0x1062e200, 0x10650000)\n compacting perm gen  total 7936K, used 7836K [0x14010000, 0x147d0000, \n0x18010000)\n   the space 7936K,  98% used [0x14010000, 0x147b70b0, 0x147b7200, 0x147d0000)\n\nLocal Time \u003d Fri Jan 07 10:47:55 2005\nElapsed Time \u003d 14\n#\n# The exception above was detected in native code outside the VM\n#\n# Java VM: Java HotSpot(TM) Client VM (1.4.2_06-b03 mixed mode)\n#\n# An error report file has been saved as hs_err_pid1700.log.\n# Please refer to the file for further information.\n#\njava.lang.NoClassDefFoundError: sun/plugin/JavaRunTime\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1473)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2429)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\n\n\n\n\nJDK 1.5 Results: VM crashes\n\n#\n# An unexpected error has been detected by HotSpot Virtual Machine:\n#\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc\u003d0x70a7da4b, pid\u003d2608, tid\u003d1888\n#\n# Java VM: Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode, sharing)\n# Problematic frame:\n# C  [SHLWAPI.dll+0xda4b]\n#\n# An error report file with more information is saved as hs_err_pid2608.log\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#",
    "Results from reproducing with IBM JRE 1.4\n\nJVMDG217: Dump Handler is Processing a Signal - Please Wait.\nJVMDG303: JVM Requesting Java core file\nJVMDG304: Java core file written to C:\\eclipse\\eclipse3.0.1\n\\eclipse\\javacore.20050107.105411.3576.txt\nJVMDG215: Dump Handler has Processed Exception Signal 11.\njava.lang.NoClassDefFoundError: sun/plugin/JavaRunTime\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1473)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2429)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.examples.rcp.browser.BrowserApp.run\n(BrowserApp.java:47)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n",
    "v\u003e20050107 should not crash anymore (and applet will not load).\n",
    "Can you please provide a patch file for this?  Possibly one I can apply to 3.0?",
    "Created an attachment (id\u003d17971)\nPatch File for class org.eclipse.swt.browser.Browser\n",
    "Created an attachment (id\u003d17972)\nPatch File for class org.eclipse.swt.browser.WebSite\n",
    "I looked at the way you fixed this bug and we found a better way to solve the\nproblem and maybe even use it to make IE based SWT Browser more robust. The\ncurrent approach should work 90% of time as it looks at every URL and tries\npreventing the navigation if a codebase strings match one of the culprit\ncontrols codebase signature. However the ActiveX object if it is already\ninstalled can be instantiated even if no codebase argument is specified. Hence\ncausing the crash. \n\nMy approach is to not allow the particular ActiveX object from getting created\nbased on there GUID. IE calls ProcessUrlAction with action equal to\nURLACTION_ACTIVEX_RUN when it instantiates any ActiveX Control. I check the GUID\nof the control to see if it the one that causes trouble and allow it not to be\ninstantiated. This approach should perform also better since the code will get\ncalled only when any ActiveX Object is getting created and not on every URL\nnavigation.\n\nYou might also want to support this through a resource file allowing users to\ncontrol all the ActiveX controls they want disabled. Also you can build policies\nsuch as - these are the controls I know are safer and should be allowed to run\ninside Eclipse, rest all should be disabled.\n\n\nI have attached the patch files and only implemented for Java Plugin. You might\nwant to do the same for Director Control.",
    "Jobi: thanks a lot for taking the time to prepare this patch. Yes, avoiding \nthese string comparisons should be more solid.\n\nReopening PR until the patch is tested. (note that this is an implementation \nchange only - no new crash is reported)\n\nIf you also have suggestion to workaround the PDF freeze issue (Reader \n6/Reader 7) - let us know. bug 56184.\n",
    "Patch in. Thanks Jobi, your name has been added to the SWT contributors list.\n\nIt can be accessed through \nhttp://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-swt-\nhome/external.html (and then first link \u0027people\u0027). Might take a few minutes \nfor the replication to update the list.",
    "Verified the following URLS don\u0027t crash with the new patch as well.\n\nhttp://java.sun.com/products/java-media/2D/samples/java2demo/Java2Demo-pi.html\nhttp://java.sun.com/products/plugin/1.5.0/demos/plugin/applets/MoleculeViewer/e\nxample1.html\nhttp://java.sun.com/products/plugin/1.4/demos/plugin/applets/MoleculeViewer/exa\nmple1.html\n\nhttp://www.kennethwoodruff.com/graphics/shockwave/balloons.dcr"
  ],
  "commentCreationDates": [
    "2005-01-07T15:51:22+01:00",
    "2005-01-07T15:56:03+01:00",
    "2005-01-07T22:25:47+01:00",
    "2005-01-10T18:01:20+01:00",
    "2005-02-15T21:29:35+01:00",
    "2005-02-15T21:30:13+01:00",
    "2005-02-15T21:33:58+01:00",
    "2005-02-15T22:36:47+01:00",
    "2005-04-12T22:47:48+02:00",
    "2005-04-12T22:56:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "sun/plugin/JavaRunTime",
      "elements": [
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1473"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2429"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "82385",
      "date": "2005-01-07T15:51:22+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "sun/plugin/JavaRunTime",
      "elements": [
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1473"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2429"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.examples.rcp.browser.BrowserApp.run",
          "source": "BrowserApp.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "82385",
      "date": "2005-01-07T15:56:03+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "82385",
  "bugId": "82385",
  "date": "2005-01-07T15:51:22+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}