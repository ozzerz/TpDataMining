{
  "comments": [
    "Hi,\n\nI have installed a Pre-Release of Mac OSX 10.4 (Tiger) on my Ibook.\n\nPopup Menus doesn\u0027t work on Eclipse 3.0. There is no text displayed in menu.\n\nI receive this stacktrace on the Console :\njava.lang.ArrayIndexOutOfBoundsException: -2\n\n\tat org.eclipse.swt.widgets.Menu.kEventMenuTargetItem(Menu.java:674)\n\n\tat org.eclipse.swt.widgets.Widget.menuProc(Widget.java:1018)\n\n\tat org.eclipse.swt.widgets.Display.menuProc(Display.java:2399)\n\n\tat org.eclipse.swt.internal.carbon.OS.PopUpMenuSelect(Native Method)\n\n\tat org.eclipse.swt.widgets.Menu._setVisible(Menu.java:190)\n\n\tat org.eclipse.swt.widgets.Display.runPopups(Display.java:2978)\n\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2509)\n\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:183)\n\n\tat org.eclipse.core.launcher.Main.run(Main.java:644)\n\n\tat org.eclipse.core.launcher.Main.main(Main.java:628)\n\nYou made a great Job !\n\nNicolas.",
    "*** Bug 70967 has been marked as a duplicate of this bug. ***",
    "McQ, can we get some of the guys from Apple to look into this?",
    "Um... Wouldn\u0027t Andre be a better choice for someone to ping Apple? ",
    "Hi,\n\nI found a solution but it\u0027s a trick not a real one. \nI observed that native method GetEventParameter return an array with -1 as first value. This value \nminus 1 represent index for another array then the result was an OutOfBound for this array. I observed \ntoo that in \"menubar\" the same value start at \"1\" and represent the position of the selected (the one \nunder the mouse) item in the menu. Then if the value returned by the native method is -1 I change it in \n1. Thus the Popup Menu appear correctly. \n\nI know that is not a real solution but it\u0027s work actually. I suppose that the problem comes from Mac \nOSX 10.4 (Tiger) but it\u0027s a Pre-release version thus it\u0027s probably not correclty implemented.\n\nNicolas.",
    "I\u0027ll report this bug to Apple.",
    "*** Bug 70725 has been marked as a duplicate of this bug. ***",
    "I\u0027ve attached a small patch that prevents the ArrayIndexOutOfBoundsException.\nIt works on Jaguar, Panther, and Tiger and I suggest to apply the patch even on the\n3.0 maintenance stream because it makes the code more defensive.",
    "Created an attachment (id\u003d13811)\nPatch for Menu.java\n",
    "SSQ and SN to investigate.",
    "Looks like SWT.Arm is broken for MenuItems on Mac OS X Tiger.  Need to either \nfind another way of doing this of get Apple to fix their bug.  In either case, \nwe\u0027ll put the results of the investigation in this problem report.",
    "Yes, the bug is on Apple\u0027s side (and I\u0027ve filed a bug).\n\nHowever, the simple check against negative numbers makes Eclipse actually usable on Tiger:\nit is much easier to debug Eclipse with Eclipse if context menus aren\u0027t empty :-)\n\n(I\u0027m already investigating the other annoying bug that some double buffering code in\nEclipse no longer works).",
    "SSQ, please release the work around so Andre can debug Tiger.",
    "The temporary workaround is released. ",
    "Andre, how is the bug on the Apple side?  I\u0027d like to remove the work around \nand restore the SWT.Arm functionality for Mac.",
    "The bug is filed and accepted, but don\u0027t expect a fix before Tiger ships.\n\nHowever, the workaround doesn\u0027t affect the SWT.Arm functionality at all.\nIt works fine, both on Panther as well as Tiger.\nI would not even call it workaround. It just prevents an IndexOutOfBoundsException in case a -1 is \nreturned from GetEventParameter().",
    "BTW, here is change:\n-\t\tif (index [0] !\u003d 0) lastTarget \u003d items [index [0] - 1];\n+\t\tif (index [0] \u003e 0) lastTarget \u003d items [index [0] - 1];\n\nI still think the second line is clearer (and not really a workaround).",
    "SSQ to remove the \"//TEMPORARY CODE\" comment.  Were we relying on an \nundocumented value or was the previous code just bogus?",
    "Closing."
  ],
  "commentCreationDates": [
    "2004-07-28T14:02:40+02:00",
    "2004-07-28T22:40:16+02:00",
    "2004-07-28T22:41:24+02:00",
    "2004-07-29T16:02:50+02:00",
    "2004-07-29T17:06:30+02:00",
    "2004-08-03T14:39:21+02:00",
    "2004-08-03T14:40:58+02:00",
    "2004-08-09T12:28:03+02:00",
    "2004-08-09T12:28:55+02:00",
    "2004-08-09T17:04:32+02:00",
    "2004-08-09T17:07:54+02:00",
    "2004-08-09T17:35:46+02:00",
    "2004-09-15T16:36:15+02:00",
    "2004-09-15T18:28:31+02:00",
    "2004-09-27T20:16:27+02:00",
    "2004-09-27T21:47:50+02:00",
    "2004-09-27T21:53:19+02:00",
    "2004-09-28T01:04:02+02:00",
    "2004-11-12T05:40:46+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-2",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.Menu.kEventMenuTargetItem",
          "source": "Menu.java:674"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.menuProc",
          "source": "Widget.java:1018"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.menuProc",
          "source": "Display.java:2399"
        },
        {
          "method": "org.eclipse.swt.internal.carbon.OS.PopUpMenuSelect",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Menu._setVisible",
          "source": "Menu.java:190"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runPopups",
          "source": "Display.java:2978"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2509"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:183"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:644"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:628"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "70966",
      "date": "2004-07-28T14:02:40+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "critical"
    }
  ],
  "groupId": "70966",
  "bugId": "70966",
  "date": "2004-07-28T14:02:40+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "critical"
}