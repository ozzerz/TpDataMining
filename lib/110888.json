{
  "comments": [
    "Repro:\n1. Add the attached annotation jar (NewTest.jar) to a project, and add it to the\nfactory path\n2. Add a usage of @annotation to a java file in the project\n3. In the generated file (genpkg.GenFile), make an edit that doesn\u0027t remove its\nown annotation usage and keeps the file error free (changing the int value works\nnicely), then save the file.\n4. Build the project (if auto build is off)\n\n\nBug:\nThe build cranks away for a bit, then you get an error dialog \"An internal error\noccurred during: \"Building workspace\".  The console shows the following:\n\nUnexpected failure running APT GenType.java\njava.lang.StackOverflowError\n\tat org.eclipse.core.internal.resources.Resource.hashCode(Resource.java:1016)\n\tat java.util.HashMap.hash(Unknown Source)\n\tat java.util.HashMap.get(Unknown Source)\n\tat\norg.eclipse.jdt.internal.core.JavaModelManager.getPerProjectInfo(JavaModelManager.java:1335)\n\tat\norg.eclipse.jdt.internal.core.JavaModelManager.getPerProjectInfoCheckExistence(JavaModelManager.java:1350)\n\tat\norg.eclipse.jdt.internal.core.JavaProject.getPerProjectInfo(JavaProject.java:1785)\n\tat org.eclipse.jdt.internal.core.JavaProject.getRawClasspath(JavaProject.java:1842)\n\tat org.eclipse.jdt.internal.core.JavaProject.getRawClasspath(JavaProject.java:1828)\n\tat org.eclipse.jdt.internal.core.JavaProject.isOnClasspath(JavaProject.java:2244)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.isOnClassPath(PackageExplorerContentProvider.java:470)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:328)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren(PackageExplorerContentProvider.java:462)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren(PackageExplorerContentProvider.java:457)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:425)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren(PackageExplorerContentProvider.java:462)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren(PackageExplorerContentProvider.java:457)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:425)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren(PackageExplorerContentProvider.java:462)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren(PackageExplorerContentProvider.java:457)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:425)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren(PackageExplorerContentProvider.java:462)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren(PackageExplorerContentProvider.java:457)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta(PackageExplorerContentProvider.java:425)\n\tat\norg.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.elementChanged(PackageExplorerContentProvider.java:105)\n\tat org.eclipse.jdt.internal.core.DeltaProcessor$3.run(DeltaProcessor.java:1432)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:783)\n\tat\norg.eclipse.jdt.internal.core.DeltaProcessor.notifyListeners(DeltaProcessor.java:1422)\n\tat\norg.eclipse.jdt.internal.core.DeltaProcessor.firePostChangeDelta(DeltaProcessor.java:1270)\n\tat org.eclipse.jdt.internal.core.DeltaProcessor.fire(DeltaProcessor.java:1245)\n\tat\norg.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:758)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat\norg.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)\n\tat\norg.eclipse.jdt.internal.core.PackageFragment.createCompilationUnit(PackageFragment.java:135)\n\tat\norg.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:243)\n\tat\norg.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:53)\n\tat anno.AnnoProcessor.process(AnnoProcessor.java:25)\n\tat\norg.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:309)\n\tat\norg.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:536)\n\tat\norg.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:442)\n\tat\norg.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:192)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:87)\n\tat\norg.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:46)\n\tat\norg.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:121)\n\tat\norg.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:85)\n\tat\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:259)\n\tat\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:291)\n\tat\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:291)\n\tat\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:291)\netc...\n\n\n\nI\u0027m not sure what to recommend here, especially given that 3.2 will likely\neliminate the issue, but perhaps there is something graceful we can do in the\nmeantime.  There is also an erroneous dirty file mark, a bug which will be filed\nseparately.",
    "Created an attachment (id\u003d27598)\nAnnotation jar to use for repro case\n",
    "checked into CVS Oct 17 at about 6:40pm",
    "Fixed long ago.  The original repro case and similar have no problems.  Marking as Verified.\n"
  ],
  "commentCreationDates": [
    "2005-09-28T03:30:38+02:00",
    "2005-09-28T03:32:30+02:00",
    "2005-10-18T03:40:18+02:00",
    "2006-05-16T23:53:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StackOverflowError",
      "elements": [
        {
          "method": "org.eclipse.core.internal.resources.Resource.hashCode",
          "source": "Resource.java:1016"
        },
        {
          "method": "java.util.HashMap.hash",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.HashMap.get",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getPerProjectInfo",
          "source": "JavaModelManager.java:1335"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getPerProjectInfoCheckExistence",
          "source": "JavaModelManager.java:1350"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getPerProjectInfo",
          "source": "JavaProject.java:1785"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getRawClasspath",
          "source": "JavaProject.java:1842"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getRawClasspath",
          "source": "JavaProject.java:1828"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.isOnClasspath",
          "source": "JavaProject.java:2244"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.isOnClassPath",
          "source": "PackageExplorerContentProvider.java:470"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta",
          "source": "PackageExplorerContentProvider.java:328"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren",
          "source": "PackageExplorerContentProvider.java:462"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren",
          "source": "PackageExplorerContentProvider.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta",
          "source": "PackageExplorerContentProvider.java:425"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren",
          "source": "PackageExplorerContentProvider.java:462"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren",
          "source": "PackageExplorerContentProvider.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta",
          "source": "PackageExplorerContentProvider.java:425"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren",
          "source": "PackageExplorerContentProvider.java:462"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren",
          "source": "PackageExplorerContentProvider.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta",
          "source": "PackageExplorerContentProvider.java:425"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processAffectedChildren",
          "source": "PackageExplorerContentProvider.java:462"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.handleAffectedChildren",
          "source": "PackageExplorerContentProvider.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.processDelta",
          "source": "PackageExplorerContentProvider.java:425"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.elementChanged",
          "source": "PackageExplorerContentProvider.java:105"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor$3.run",
          "source": "DeltaProcessor.java:1432"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor.notifyListeners",
          "source": "DeltaProcessor.java:1422"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor.firePostChangeDelta",
          "source": "DeltaProcessor.java:1270"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor.fire",
          "source": "DeltaProcessor.java:1245"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:758"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:782"
        },
        {
          "method": "org.eclipse.jdt.internal.core.PackageFragment.createCompilationUnit",
          "source": "PackageFragment.java:135"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild",
          "source": "GeneratedFileManager.java:243"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close",
          "source": "JavaSourceFilePrintWriter.java:53"
        },
        {
          "method": "anno.AnnoProcessor.process",
          "source": "AnnoProcessor.java:25"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode",
          "source": "APTDispatchRunnable.java:309"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT",
          "source": "APTDispatchRunnable.java:536"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT",
          "source": "APTDispatchRunnable.java:442"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run",
          "source": "APTDispatchRunnable.java:192"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT",
          "source": "APTDispatch.java:87"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild",
          "source": "APTDispatch.java:46"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify",
          "source": "AptCompilationParticipant.java:121"
        },
        {
          "method": "org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify",
          "source": "AptCompilationParticipant.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants",
          "source": "AbstractImageBuilder.java:259"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants",
          "source": "AbstractImageBuilder.java:291"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants",
          "source": "AbstractImageBuilder.java:291"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants",
          "source": "AbstractImageBuilder.java:291"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "110888",
      "date": "2005-09-28T03:30:38+02:00",
      "product": "JDT",
      "component": "APT",
      "severity": "normal"
    }
  ],
  "groupId": "110888",
  "bugId": "110888",
  "date": "2005-09-28T03:30:38+02:00",
  "product": "JDT",
  "component": "APT",
  "severity": "normal"
}