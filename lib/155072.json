{
  "comments": [
    "After updating from Eclipse 3.1.2+CDT to Eclipse 3.2 with CDT 3.1:  Now, whenever I first start up Eclipse, then try to browse into an existing project (created in Eclipse 3.1 prior to Eclipse 3.2 update) using either the navigator or C/C++ project browser, I immediately get an error dialog box indicating \u0027An internal error occurred during: \"Save Project Preferences\".  Attempted to beginRule: R/, does not match outer scope rule: P/Seeker\u0027.  (please note, the project name and directory is \"Seeker\", in this case)\n\nThis behavior is extremely consistent.  Doesn\u0027t matter if I close and open Eclipse again and again, try to change the project preferences and apply the preference changes anew, etc.  I cannot seem to get rid of this error no matter what I do.\n\nHave never seen anything behavior like this in any prior version of Eclipse or CDT I have used (dating back to Eclipse 2.x)\n\nAlso, it\u0027s possible this is an Eclipse platform error, so I apologize if I have entered this bug in the wrong category.  However, from the Eclipse error messages, there is really no way for me to know what the source of the error is, so...",
    "Forgot to mention, I am running Eclipse 3.2 on Redhat Linux 2.6.9, 32-bit, Gtk.  Using Sun jre version 1.5.0_08",
    "In the log file (your-workspace/.metadata/.log) you should find a stack-trace related to the error message. It will help to tell where the problem comes from.\nCan you provide it?",
    "Here is an example stack trace for this problem (from .log file):\n----------\n\n!ENTRY org.eclipse.core.jobs 4 2 2006-08-23 16:02:53.279\n!MESSAGE An internal error occurred during: \"Save Project Preferences\".\n!STACK 0\njava.lang.IllegalArgumentException: Attempted to beginRule: R/, does not match outer scope rule: P/Seeker\n\tat org.eclipse.core.runtime.Assert.isLegal(Assert.java:62)\n\tat org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:116)\n\tat org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:225)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:80)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:219)\n\tat org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)\n\tat org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1684)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1732)\n\tat org.eclipse.core.internal.resources.ProjectPreferences.save(ProjectPreferences.java:581)\n\tat org.eclipse.core.internal.preferences.EclipsePreferences.flush(EclipsePreferences.java:352)\n\tat org.eclipse.core.internal.resources.ProjectPreferences.flush(ProjectPreferences.java:379)\n\tat org.eclipse.cdt.internal.core.pdom.PDOMManager$SavePrefs.run(PDOMManager.java:227)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "We saw these early in the 3.1 development cycle. I\u0027ll take a look and see how this all works on upgrade scenarios such as this.",
    "By the way, a few additional factoids I forgot to note, which may be of interest.  In addition to the CDT plugin, I am also running the latest version of the Perforce plugin.  These (CDT and Perforce) are the only plugins I have installed.  All of the projects in my Eclipse workspace are \"team shared\" C/C++ projects under Perforce.",
    "Ok, thanks!\n",
    "I am having a hard time reproducing this scenario. I had a suspicion that it was due to the preference change that can occur when migrating from CDT 3.0 to CDT 3.1.\n\nOne idea is that it\u0027s Perforce. Are files read only when not checked out from Perforce? It could be possible that we are trying to update a file in the .settings folder and it isn\u0027t writable. Could you try again checking out all the files in .settings first?",
    "On second thought, or third by now or something... Something has locked the project while the preference store is trying to update the settings file. And the project is locked every time, which causes the PDOMManager to try and try again to update the preference file. This generally only happens when you have ctags set at the indexer which is gone now in CDT 3.1.\n\nOne option would be to go back to 3.0.2 and change the indexer for the project to be No Indexer. And then try CDT 3.1 again. This should skip the conversion.",
    "Ok, thanks for the suggestions.  I will experiment a bit.\n\nIn answer to your first question.  Yes, Perforce does set all files to be read-only until they are \"checked out\".  I remember intially suspecting this, so manually set all .cdtproject and .project files to be writable; however, this did not solve the problem.  But, it never occurred to me to monkey around with the .settings files/directories.  It would be easy enough to try this.\n\nAlso, re: suggestion on the indexer:  Is there any way I can do this without reverting to 3.0.2?  That is, can I change the indexer somehow within 3.2 and effect the same behavior?  (or, can I just edit the Eclipse project files with a text editor to remove the offending data??)",
    "You should be able to change the indexer setting after Eclipse has started up. However you say you are still getting the exception when you try to do that. One option would be to create a new project and copy your source over to it and then plug it back into your source control. You definitely need to replace your .cdtproject file and add in the new files created in the .settings folder.",
    "Time is running out for 3.1.1. Since we haven\u0027t had any other reports of this I\u0027ll have to move it off the 3.1.1 gating list. We can try and get a fix out for 3.1.2 once we understand what\u0027s really happening.",
    "Tried a few experiments, to no avail.\n\n1. Manually changed .settings files to \"ugo+rw\", then tried to change project settings.  Still getting same error.\n\n2. Tried setting all projects to \"No Indexer\" (from within 3.2).  Still getting same error.\n\nI don\u0027t have a copy of 3.0.2, and currently don\u0027t have time to re-install, delete projects, then recreate all, so will likely not be able to do that.\n\nSince at this point I am just shooting in the dark, will just leave it be for now.  Thus far, this error does not seem to be fatal to Eclipse 3.2 usage, but is somewhat of an annoyance.  Luckily after the first attempt to open a project and first issuance of this error message during a code editing session, the error dialog does not seem to appear again, so...\n",
    "I\u0027m having a very similar problem. New install of Eclipse 3.2 + CDT + Perforce + JDT; new project created with this install.\n\nI had previously thought about the read-only issue and made sure my files (.p*,.c*,.settings/*) were writeable.\n\nIn my case everything is Ok except that I can\u0027t set the indexer to be anything; whenever I do so, I get the same error box and similar stack trace in .log:\n\n!ENTRY org.eclipse.core.jobs 4 2 2006-09-18 19:30:16.750\n!MESSAGE An internal error occurred during: \"Save Project Preferences\".\n!STACK 0\njava.lang.IllegalArgumentException: Attempted to beginRule: R/, does not match outer scope rule: P/WrSP\n        at org.eclipse.core.runtime.Assert.isLegal(Assert.java:62)\n        at org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:116)\n        at org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:225)\n        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:80)\n        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:219)\n        at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)\n        at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1684)\n        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1732)\n        at org.eclipse.core.internal.resources.ProjectPreferences.save(ProjectPreferences.java:581)\n        at org.eclipse.core.internal.preferences.EclipsePreferences.flush(EclipsePreferences.java:352)\n        at org.eclipse.core.internal.resources.ProjectPreferences.flush(ProjectPreferences.java:379)\n        at org.eclipse.cdt.internal.core.pdom.PDOMManager$SavePrefs.run(PDOMManager.java:227)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n",
    "Noticing that the stack trace referred to a method \"checkIn\", I disabled the Perforce plug-in and everything works. Having enabled the indexer, I re-enabled Perforce.\n\nIt\u0027s clumsy and not at all obvious but manageable.\n",
    "Interesting observations.  I tried playing with some of this, and here are some additional behavioral observations.\n\nI tried disabling the Perforce plugin, then went and set all CDT projects to \"No Indexer\".  Then, re-enabled the Perforce plugin.  At this point, it appears the error messages go away (but, of course, I also have no indexing available).\n\nNext, after having re-enabled the Perforce plug-in, I try to reset all CDT projects to \"Full Indexing\".  Blam!  The error messages start flowing again.\n\nSo, it does appear that there may be some kind of strange interaction here between the Perforce plugin and the CDT indexing function.\n\nNext, a word of warning:  Before you attempt the above...  The bad news. After having performed the above procedure, all of my Perforce workspace perspectives are wrecked (more like obliterated).  Looks I will likely have to completely uninstall and re-install (at least) Perforce (and possibly more...)\n",
    "Ok, I re-read Mark\u0027s comments, and I think I misinterpreted...\n\nI believe he *has* found the magic sequence to eliminate the error messages.\n\nI tried the following, and it appears to get rid of the problem.\n\n1. Disable Perforce plugin\n\n2. Set CDT Indexer to \"No Indexer\" for all projects.  Apply.\n\n3. Exit Eclipse. Start Eclipse.\n\n4. Set CDT Indexer to \"Full Indexing\" for all projects.  Apply.\n\n5. Re-enable Perforce plugin.\n\nAt this point, I find that Indexing is enabled, and the error messages are gone.  However, my Perforce perspective windows are hosed.\n\nSo, final step:\n\n6. Go to the menu \"Show View\".  Select all items under Perforce, and activate.\n\nAlso, I should additionally note that there is a new update for the Perforce plugin (now version .3644).  I have now also updated to the latest Perforce version, and behavior still seems to be ok, after having following the above procedure.  (I updated from version .3606)\n",
    "*** Bug 167726 has been marked as a duplicate of this bug. ***",
    "I have been able to reproduce this with Perforce. Changing the managed build settings works fine so it\u0027s something with how I\u0027m saving the indexer settings. I\u0027ll take a look and make sure I\u0027m doing things right.",
    "Things work fine when I\u0027m on the UI thread. The problem is with the Job which is conflicting with something else that has locked the Project.",
    "Got rid of the rule in the SavePrefs job and that seems to have fixed it. Not sure why I put it there in the first place so this still needs a little more testing. Interactions with Perforce work well now. Fixed in 3.1.2.\n\nI\u0027m not sure if this is a problem in 4.0. The PDOMManager has changed a lot. More testing required there as well."
  ],
  "commentCreationDates": [
    "2006-08-24T19:44:14+02:00",
    "2006-08-25T01:52:03+02:00",
    "2006-08-25T10:40:40+02:00",
    "2006-08-25T21:30:43+02:00",
    "2006-08-25T21:33:22+02:00",
    "2006-08-25T21:37:12+02:00",
    "2006-08-25T21:46:05+02:00",
    "2006-09-06T22:34:09+02:00",
    "2006-09-06T22:47:56+02:00",
    "2006-09-13T07:32:02+02:00",
    "2006-09-13T16:08:36+02:00",
    "2006-09-14T18:26:46+02:00",
    "2006-09-19T02:32:45+02:00",
    "2006-09-19T04:41:24+02:00",
    "2006-09-19T04:57:19+02:00",
    "2006-09-19T20:41:48+02:00",
    "2006-09-19T20:57:33+02:00",
    "2007-01-23T16:02:55+01:00",
    "2007-01-23T16:04:09+01:00",
    "2007-01-23T16:32:38+01:00",
    "2007-01-30T20:56:07+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: R/, does not match outer scope rule: P/Seeker",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isLegal",
          "source": "Assert.java:62"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:116"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:225"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:80"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:219"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:96"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1684"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1732"
        },
        {
          "method": "org.eclipse.core.internal.resources.ProjectPreferences.save",
          "source": "ProjectPreferences.java:581"
        },
        {
          "method": "org.eclipse.core.internal.preferences.EclipsePreferences.flush",
          "source": "EclipsePreferences.java:352"
        },
        {
          "method": "org.eclipse.core.internal.resources.ProjectPreferences.flush",
          "source": "ProjectPreferences.java:379"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMManager$SavePrefs.run",
          "source": "PDOMManager.java:227"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "155072",
      "date": "2006-08-25T21:30:43+02:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: R/, does not match outer scope rule: P/WrSP",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isLegal",
          "source": "Assert.java:62"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:116"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:225"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:80"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:219"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:96"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1684"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1732"
        },
        {
          "method": "org.eclipse.core.internal.resources.ProjectPreferences.save",
          "source": "ProjectPreferences.java:581"
        },
        {
          "method": "org.eclipse.core.internal.preferences.EclipsePreferences.flush",
          "source": "EclipsePreferences.java:352"
        },
        {
          "method": "org.eclipse.core.internal.resources.ProjectPreferences.flush",
          "source": "ProjectPreferences.java:379"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMManager$SavePrefs.run",
          "source": "PDOMManager.java:227"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 13,
      "bugId": "155072",
      "date": "2006-09-19T04:41:24+02:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    }
  ],
  "groupId": "155072",
  "bugId": "155072",
  "date": "2006-08-24T19:44:14+02:00",
  "product": "CDT",
  "component": "cdt-core",
  "severity": "normal"
}