{
  "comments": [
    "Eclipse 3.1 RC2.\n\nWalking a class inheritance tree by ctrl+clicking.  I have binary-imported the \no.e.jdt.ui plugin.  I started at \no.e.jdt.ui.internal.preferences.ImportOrganizePreferencePage, then walked up \nthe tree of classes it extends.  In PropertyAndPreferencePage, I ctrl+click \nPreferencePage, and then I get an error dialog saying \u0027An internal error \noccurred during: \"Override indicator installation job\".\u0027  The editor view is \nblank except for an error message saying \"Unable to create this part due to an \ninternal error.  Reason for the failure: an unexpected exception was thrown.\"  \nDetails gives the stack trace below.\n\nExiting Eclipse and restarting let me get one level deeper; then if I continue \nwalking (this time by ctrl+click on DialogPage), same error happens.\n\nExiting and restarting yet again let me get all the way in to DialogPage.  And \nthat\u0027s where the inheritance tree ends, and the problem goes away.\n\nAnd now it won\u0027t repro, even if I close all those files, exit, restart, and \nrepeat the process.  Oh well!  Here\u0027s the bug report anyway.\n\n\njava.lang.NullPointerException\n\tat org.eclipse.jface.text.AbstractDocument.computeIndexInPositionList\n(AbstractDocument.java:466)\n\tat org.eclipse.jface.text.AbstractDocument.addPosition\n(AbstractDocument.java:350)\n\tat org.eclipse.jface.text.AbstractDocument.addPosition\n(AbstractDocument.java:358)\n\tat org.eclipse.jface.text.source.AnnotationModel.addPosition\n(AnnotationModel.java:315)\n\tat org.eclipse.jface.text.source.AnnotationModel.addAnnotation\n(AnnotationModel.java:278)\n\tat org.eclipse.jface.text.source.AnnotationModel.replaceAnnotations\n(AnnotationModel.java:256)\n\tat org.eclipse.jface.text.source.AnnotationModel.replaceAnnotations\n(AnnotationModel.java:226)\n\tat \norg.eclipse.jdt.internal.ui.text.folding.DefaultJavaFoldingStructureProvider.ini\ntialize(DefaultJavaFoldingStructureProvider.java:488)\n\tat \norg.eclipse.jdt.internal.ui.text.folding.DefaultJavaFoldingStructureProvider.pro\njectionEnabled(DefaultJavaFoldingStructureProvider.java:424)\n\tat \norg.eclipse.jface.text.source.projection.ProjectionViewer.fireProjectionEnabled\n(ProjectionViewer.java:480)\n\tat \norg.eclipse.jface.text.source.projection.ProjectionViewer.enableProjection\n(ProjectionViewer.java:528)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.setVisibleDocument\n(JavaSourceViewer.java:602)\n\tat org.eclipse.jface.text.TextViewer.setDocument(TextViewer.java:2479)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument\n(SourceViewer.java:476)\n\tat org.eclipse.jface.text.source.projection.ProjectionViewer.setDocument\n(ProjectionViewer.java:369)\n\tat org.eclipse.jface.text.source.SourceViewer.setDocument\n(SourceViewer.java:436)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.initializeSourceViewer\n(AbstractTextEditor.java:2882)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl\n(AbstractTextEditor.java:2649)\n\tat org.eclipse.ui.texteditor.StatusTextEditor.createPartControl\n(StatusTextEditor.java:53)\n\tat \norg.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl\n(AbstractDecoratedTextEditor.java:314)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.createPartControl\n(JavaEditor.java:2643)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor.createPartControl\n(ClassFileEditor.java:666)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper\n(EditorReference.java:585)\n\tat org.eclipse.ui.internal.EditorReference.createPart\n(EditorReference.java:365)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart\n(WorkbenchPartReference.java:551)\n\tat org.eclipse.ui.internal.EditorReference.getEditor\n(EditorReference.java:214)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched\n(WorkbenchPage.java:2321)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor\n(WorkbenchPage.java:2254)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$9\n(WorkbenchPage.java:2246)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2232)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:2227)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:2208)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor\n(EditorUtility.java:263)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor\n(EditorUtility.java:140)\n\tat org.eclipse.jdt.internal.ui.actions.OpenActionUtil.open\n(OpenActionUtil.java:49)\n\tat org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:169)\n\tat org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:141)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:226)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:198)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaElementHyperlink.open\n(JavaElementHyperlink.java:55)\n\tat org.eclipse.jface.text.hyperlink.HyperlinkManager.mouseUp\n(HyperlinkManager.java:388)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:136)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:844)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3058)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2691)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1716)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1680)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:365)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "- how did you import? (linked)?\n- did you also import the required plug-ins or just JDT UI?\n- did you import from RC2 or some other build?\n- was this on a \"normal\" Java editor or was there some other editor(s) involved?\n",
    "Did you install RC2 to a fresh workspace or over an existing install? Please\nalso attach the full .log.",
    "Bug 70366 is about the same problem. We basically have two holes:\n\n1) we use a simply (non-synchronized) Document instance instead of a \n   PartiallySynchronized document.\n2) we chose the editor based on the content tpye but the document creation is \n   still bound to the file extension \"java\".\n\nI have a simple fix for both problems. Patch will follow.\n",
    "Created an attachment (id\u003d23702)\nPatch for problem 1) against ClassFileDocumentProvider.java\n",
    "Created an attachment (id\u003d23703)\nPatch for problem 2) against JDT UI\u0027s plugin.xml\n",
    "Philppe and Dirk, please cast your votes.",
    "The only risk I see is that the class file editor now synchronizes. Dani, if you\ncan confirm that the Class file editor always uses the internal lock object and\nthat the object doesn\u0027t leak +1 for RC4.",
    "\u003eand that the object doesn\u0027t leak +1 for RC4.\nwhich object?",
    "The object using for internal synchronization (e.g. that no other components use\nit to synchronize things)",
    "That\u0027s the case since the class file document provider so far has no knowledge\nof ISynchronizable and only that interface gives access to the getter and setter\nof the lock object. Only those clients that are designed to work with that lock\nobject will access and use it, as it is done in the compilation unit editor.",
    "Is there a chance some 3rd party code would run inside the lock ? If so, what\nabout new deadlock situations ?",
    "Not possible. This is all internal code.",
    "+1 for RC4",
    "Reviewed by Tobias and Tom.",
    "Created an attachment (id\u003d23774)\n.log file\n\nYou guys are way ahead of me :-)  But just for completeness, here are the\nanswers to Daniel\u0027s questions:\n\n - I imported by going to the Plugins view, right-clicking the plugin, and\nselecting Import / Binary Project.\n\n - I only imported jdt.ui, not the required plugins.\n\n - I imported from RC2.\n\n - So far as I know this was a \"normal\" Java editor.  No non-SDK plugins were\ninstalled.\n\n - RC2 was installed to a fresh directory.  The workspace I was using had been\ncreated initially with 3.1 M6 or M7 (I don\u0027t remember) and also used with RC1.\n\n - I\u0027ve attached a zip of the .log file.\n\nThanks again!",
    "Verified fixed.\n\nTried the following scenarios:\n- opening class files with or without attached source\n- opening text files with the class file editor (additional file association)\n- opening binary files with the class file editor (additional file association)\n- opening class files (w/wo source) in with the Java editor\n\nEverything works the same way as before - eg. opening class files with the text\nbased editor is not possible, as the java/class content type does not inherit\nfrom the text content type. Opening class files displays either the outline or\nthe attached source file (if there is attached source)."
  ],
  "commentCreationDates": [
    "2005-06-22T01:48:58+02:00",
    "2005-06-22T07:52:23+02:00",
    "2005-06-22T07:58:32+02:00",
    "2005-06-22T10:11:18+02:00",
    "2005-06-22T10:12:50+02:00",
    "2005-06-22T10:13:32+02:00",
    "2005-06-22T10:16:49+02:00",
    "2005-06-22T10:53:49+02:00",
    "2005-06-22T10:58:20+02:00",
    "2005-06-22T11:04:29+02:00",
    "2005-06-22T11:12:10+02:00",
    "2005-06-22T11:16:11+02:00",
    "2005-06-22T11:18:29+02:00",
    "2005-06-22T11:20:44+02:00",
    "2005-06-22T11:31:40+02:00",
    "2005-06-22T21:45:38+02:00",
    "2005-06-24T12:47:33+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.AbstractDocument.computeIndexInPositionList",
          "source": "AbstractDocument.java:466"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.addPosition",
          "source": "AbstractDocument.java:350"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.addPosition",
          "source": "AbstractDocument.java:358"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationModel.addPosition",
          "source": "AnnotationModel.java:315"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationModel.addAnnotation",
          "source": "AnnotationModel.java:278"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationModel.replaceAnnotations",
          "source": "AnnotationModel.java:256"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationModel.replaceAnnotations",
          "source": "AnnotationModel.java:226"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.folding.DefaultJavaFoldingStructureProvider.initialize",
          "source": "DefaultJavaFoldingStructureProvider.java:488"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.folding.DefaultJavaFoldingStructureProvider.projectionEnabled",
          "source": "DefaultJavaFoldingStructureProvider.java:424"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.fireProjectionEnabled",
          "source": "ProjectionViewer.java:480"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.enableProjection",
          "source": "ProjectionViewer.java:528"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.setVisibleDocument",
          "source": "JavaSourceViewer.java:602"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.setDocument",
          "source": "TextViewer.java:2479"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
          "source": "SourceViewer.java:476"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.setDocument",
          "source": "ProjectionViewer.java:369"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.setDocument",
          "source": "SourceViewer.java:436"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.initializeSourceViewer",
          "source": "AbstractTextEditor.java:2882"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl",
          "source": "AbstractTextEditor.java:2649"
        },
        {
          "method": "org.eclipse.ui.texteditor.StatusTextEditor.createPartControl",
          "source": "StatusTextEditor.java:53"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl",
          "source": "AbstractDecoratedTextEditor.java:314"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.createPartControl",
          "source": "JavaEditor.java:2643"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor.createPartControl",
          "source": "ClassFileEditor.java:666"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:585"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:365"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:551"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.getEditor",
          "source": "EditorReference.java:214"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2321"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2254"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$9",
          "source": "WorkbenchPage.java:2246"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:2232"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2227"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2208"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:263"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:140"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.actions.OpenActionUtil.open",
          "source": "OpenActionUtil.java:49"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.OpenAction.run",
          "source": "OpenAction.java:169"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.OpenAction.run",
          "source": "OpenAction.java:141"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:226"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:198"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaElementHyperlink.open",
          "source": "JavaElementHyperlink.java:55"
        },
        {
          "method": "org.eclipse.jface.text.hyperlink.HyperlinkManager.mouseUp",
          "source": "HyperlinkManager.java:388"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:136"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:844"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3058"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2691"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1716"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1680"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:365"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "101174",
      "date": "2005-06-22T01:48:58+02:00",
      "product": "JDT",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "101174",
  "bugId": "101174",
  "date": "2005-06-22T01:48:58+02:00",
  "product": "JDT",
  "component": "Text",
  "severity": "normal"
}