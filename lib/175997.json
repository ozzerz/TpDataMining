{
  "comments": [
    "Build ID: M20070212-1330\n\nSteps To Reproduce:\n1. Create to projects A and B where B depends on A. In project A exists a class AClass that implements an Interface IF. \nThat Interface is part of an ext.jar library that is included in the java build path of project A. But this ext.jar is neither beeing exported by project A nor it is part of the java build path of project B.\nCreate a class BClass in Project B that calls a method of AClass.\n\n2. Everything can be compiled without errors (in eclipse and directly with javac).\n\n3. If you call BClass in a JUnit-Test in project B inside of eclipse, everything works. But if this JUnit-Test is executed outside of eclipse you get an error like this:\n\n------------------\njava.lang.NoClassDefFoundError: IF at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:620) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) at java.net.URLClassLoader.defineClass(URLClassLoader.java:260) at java.net.URLClassLoader.access$100(URLClassLoader.java:56) at java.net.URLClassLoader$1.run(URLClassLoader.java:195) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268) at java.lang.ClassLoader.loadClass(ClassLoader.java:251) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at AClass.\u003cclinit\u003e(AClass.java:35) at\n....\n------------------\n\nInside eclipse the same error should occur.\n\nMore information:",
    "Looks like a classpath issue outside of Eclipse.\nNothing we can do about it.\nClosing as INVALID.",
    "Reopen with new information.",
    "From a personal email:\n\nThe user expects a failure inside Eclipse as well.\nHere are the settings:\nthe bug I described is not outside of Eclipse, it\u0027s inside of Eclipse:\n\nAs I wrote in my bug description I wrote a test contained in project B for a method in project B that calls a method of project A. The method of project A needs implements an interface outside of both projects.\n\nThe interface is contained in an external jar file \"ext.jar\". This file is included in the classpath of project A but not of project B! Project B is configured that that it depends on project A. But project A doesn\u0027t export \"ext.jar\".\n\nWith this configuration inside eclipse, project B should not have access to \"ext.jar\" and I should get the same error inside of eclipse as outside of eclipse, because the class initializer can\u0027t find the interface.\n\nI know that\u0027s not easy to understand because here\u0027s the error that I don\u0027t get an error ;-)\n\nI tried no to make a very simple standalone example:\nI made a workspace containing 3 projects:\n\n* project_iface:\n\n-------------\nimport java.util.List;\n\npublic interface IFtest {\n        public String doTest();\n\n}\n-------------\n\n* project_A:\n\n-------------\npublic class Impl_A implements IFtest {\n\n        public String doTest() {\n                return \"Impl_A.doTest()\";\n        }\n\n}\n-------------\n\n* project_B:\n\n-------------\npublic class Impl_B {\n\n        static public String doTest() {\n                Impl_A impl_A \u003d new Impl_A();\n                return impl_A.doTest();\n        }\n\n        /**\n         * @param args\n         */\n        public static void main(String[] args) {\n                System.out.println(doTest());\n        }\n}\n-------------\n\nproject_A exports only it\u0027s own class \"Impl_A\":\nAnd project_A depends on project_iface:\nproject_B only depends on project_A (not on project_iface):\n\nThen if I call \"Run As -\u003e Java Application\" on class Impl_B in project_B the classpath for this call should be the classpath of project_B and this classpath should contain the classes contained in project_B, the classes and jars the the including projects are exporting (i.e. the classes of project_A) and the libraries directly included in project_B (i.e. none). If I do exactly this call outside of eclipse, I get the error message as describe in my bug description:\n \njava -classpath U:\\workspaces\\ppmextractors_test\\project_A\\classes;U:\\workspaces\\ppmextractors_test\\project_B\\classes Impl_B\n \nBut in eclipse I don\u0027t get this bug. And now, I saw that I don\u0027t get this bug, because inside of eclipse the automatically generated default classpath used for running class Impl_B was wrong. The project_iface was part of the classpath although it is not included in project_B:\n\nA complete workspace can be sent on demand.",
    "The path to project_iface is added to the -classpath while launching the Java Application. IMO, it works as designed as this allow to run the application without any failure.\n\nMove to JDT/Debug to decide whether what to do with this bug\n",
    "By default we allow all buildpath entries in the runtime classpath, there is a way to force exclusion rules though (per launch configuration):\n\n1. open the launch configuration dialog and select the configuration for launching B (in this example)\n\n2. go to the classpath tab and select the classpath entry for the project B\n\n3. Click the Edit.. button\n\n4. check the preference \u0027Only include exported entries\u0027\n\nIf I do the previous steps I can no longer launch B as you describe.\n\nWe should look into making the preference more exposed and indicate somehow that all build path entries are added to the runtime classpath by default.",
    "The per launch configuration of the build path could not be the solution. We use JUnit-Tests and everytime a test fails we have to create a new launch configuration to check the preference \u0027Only include exported entries\u0027.\n\nThere should be a project configuration option for including only exported entries into the classpath.\n"
  ],
  "commentCreationDates": [
    "2007-03-01T10:43:04+01:00",
    "2007-03-01T18:40:25+01:00",
    "2007-03-02T13:48:58+01:00",
    "2007-03-02T13:53:11+01:00",
    "2007-06-21T11:29:20+02:00",
    "2007-07-25T17:53:24+02:00",
    "2007-08-02T15:53:43+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "IF",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:620"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:124"
        },
        {
          "method": "java.net.URLClassLoader.defineClass",
          "source": "URLClassLoader.java:260"
        },
        {
          "method": "java.net.URLClassLoader.access$100",
          "source": "URLClassLoader.java:56"
        },
        {
          "method": "java.net.URLClassLoader$1.run",
          "source": "URLClassLoader.java:195"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.net.URLClassLoader.findClass",
          "source": "URLClassLoader.java:188"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:306"
        },
        {
          "method": "sun.misc.Launcher$AppClassLoader.loadClass",
          "source": "Launcher.java:268"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:251"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:319"
        },
        {
          "method": "AClass.\u003cclinit\u003e",
          "source": "AClass.java:35"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "175997",
      "date": "2007-03-01T10:43:04+01:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "enhancement"
    }
  ],
  "groupId": "175997",
  "bugId": "175997",
  "date": "2007-03-01T10:43:04+01:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "enhancement"
}