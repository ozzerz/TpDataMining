{
  "comments": [
    "I20061031-0656\n\nI had a Test case in jdt.ui.tests using a class defined in a package in jdt.ui which was not exported in the MANIFEST.MF. The test failed with a NoClassDefFoundException. It took a while to realize what the cause of the NCDFE was. \nWould it be possible to add a compiler waring to warn the user, when he is using a class contained in a not exported package?\n\nthx",
    "By default, you should get an error if you try to use a class from another project that comes from a non-exported package.\n\nAre you sure the jdt.ui.test\u0027s compiler preferences for \u0027Fobidden references\u0027 is not turned down to IGNORE.\n\nIf not, then please supply a concrete case.",
    "Forbidden references is set to Error in jdt.ui.tests\nDiscouraged reference is set to Ignore (no warning when set to warning)\n\nTest case:\n1. Take jdt.ui and jdt.ui.tests from HEAD\n2. Open file org.eclipse.jdt.ui/META-INF/MANIFEST.MF\n3. Remove line:\norg.eclipse.jdt.internal.ui.preferences.cleanup;x-internal:\u003dtrue,\n4. Save, wait for recompile\n5. Open org.eclipse.jdt.ui.tests.quickfix.CleanUpTest\nHint: No error, no warning\n6. Run As\u003eJUnit Test\nIs:\njava.lang.NoClassDefFoundError: org/eclipse/jdt/internal/ui/preferences/cleanup/CleanUpProfileVersioner\n\tat org.eclipse.jdt.ui.tests.quickfix.CleanUpTest.setUp(CleanUpTest.java:123)\n...",
    "Benno,\nA non-exported package means that it is NOT listed in the Export-Package of the manifest.mf.\n\nWhat you have here is an exported package that is marked as internal.\norg.eclipse.jdt.internal.ui.preferences.cleanup;x-internal:\u003dtrue\n\nThis means that clients using this package get a discouraged access violation (not forbidden).\n\nObserve how in the jdt.ui.tests\u0027s project preferences, the severity of Discouraged access lowered to IGNORE.",
    "(In reply to comment #3)\n\u003e Benno,\n\u003e A non-exported package means that it is NOT listed in the Export-Package of the\n\u003e manifest.mf.\n\nYes, that\u0027s what I said in step 3:\n_Remove_ line:\norg.eclipse.jdt.internal.ui.preferences.cleanup;x-internal:\u003dtrue,\n\nIf you remove this line, then you get no Error/Warning in CleanUpTest.\nIf you do not remove this line but set \u0027Discouraged reference\u0027 to Error, then you get no Error in CleanUpTest.\n\nI\u0027m not sure, what is wrong here, but it is certainly confusing.",
    "The problem is probably that the org.eclipse.jdt.ui.tests plugin only has a plugin.xml, but no manifest.mf.\n\nEven though, I would expect to get access restriction errors when setting Discouraged References to Error, since the referenced jdt.ui plugin has a manifest.",
    "comment 5 is correct in that the problem is that the jdt.ui.tests plug-in has no MANIFEST.MF.\n\nOld-style plug-ins (ones lacking a MANIFEST.MF) do not take advantage of access rules.  It should be converted to a real bundle.",
    "comment 5 is correct in that the problem is that the jdt.ui.tests plug-in has no MANIFEST.MF.\n\nOld-style plug-ins (ones lacking a MANIFEST.MF) do not take advantage of access rules.  It should be converted to a real bundle.",
    "re-closing."
  ],
  "commentCreationDates": [
    "2006-11-01T11:49:02+01:00",
    "2006-11-01T15:15:24+01:00",
    "2006-11-01T15:40:21+01:00",
    "2006-11-01T15:50:37+01:00",
    "2006-11-01T16:08:06+01:00",
    "2006-11-01T18:16:59+01:00",
    "2006-11-01T18:31:30+01:00",
    "2006-11-01T18:32:29+01:00",
    "2006-11-01T18:33:06+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/jdt/internal/ui/preferences/cleanup/CleanUpProfileVersioner",
      "elements": [
        {
          "method": "org.eclipse.jdt.ui.tests.quickfix.CleanUpTest.setUp",
          "source": "CleanUpTest.java:123"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "163048",
      "date": "2006-11-01T15:40:21+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "163048",
  "bugId": "163048",
  "date": "2006-11-01T11:49:02+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}