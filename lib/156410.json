{
  "comments": [
    "When attempting to programmatically close my RCP application via WorkBench.close(), I get an ArrayIndexOutofBoundsException.  The relevent stack is:\njava.lang.ArrayIndexOutOfBoundsException\n\tat org.eclipse.ui.internal.Workbench$13.run(Workbench.java:769)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.ui.internal.Workbench.saveAllEditors(Workbench.java:735)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:655)\n\tat org.eclipse.ui.internal.Workbench.access$8(Workbench.java:639)\n\tat org.eclipse.ui.internal.Workbench$14.run(Workbench.java:839)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:837)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:812)\n\nThe reason seems to be that by the time close gets called, there are no available workbench windows but line 769 in the workbench class does not check for this state.",
    "*** Bug 160727 has been marked as a duplicate of this bug. ***",
    "*** Bug 160536 has been marked as a duplicate of this bug. ***",
    "3.2.2?",
    "Created an attachment (id\u003d52161)\npatch\n\n",
    "Created an attachment (id\u003d52162)\nTest plug-in to show this\n\n",
    "Why not simply bail out earlier? when you get the return value from getWorkbenchWindows() and determine that it is an empty array, return immediately; no windows, no possible dirty parts!",
    "(In reply to comment #6)\n\u003e no windows, no possible dirty parts!\n\nThis is not necessarily true since we support Saveables that are dirty even if there are no dirty parts.\n\nThe workbench window is used as a parent shell for dialogs, and for running the save operation with progress.  We cannot just return early if there is no workbench window.\n\nTod, can I take this one?",
    "Feel free Boris. It is certianly something I would support for 3.2.2 so long as the code doesn\u0027t become more risky with other changes.\n\nMy current patch would be a +1 for me for 3.2.2",
    "I tried this patch, and although it alleviated the exception it seem to not actually close the workbench.",
    "Created an attachment (id\u003d53058)\nnew patch\n\nAaron, could you please try the new patch and confirm that it fixes the problem? Thanks.",
    "Boris, I have tried this patch on windows and linux_x86 and confirmed that it resolves this issue.  Thanks very much\n\nAaron Coady",
    "Tod, do you approve the new patch for 3.2.2?",
    "Created an attachment (id\u003d53072)\nequivalent to \"new patch\", to be applied to R3_2_maintenance\n\nThe \"new patch\" cannot be applied to R3_2_maintenance directly, so I created this one.",
    "The patch looks good to me.  +1",
    "Released to R3_2_maintenance \u003e20061107.",
    "Released to HEAD as well.",
    "*** Bug 166317 has been marked as a duplicate of this bug. ***",
    "Boris has this been verified yet?",
    "(In reply to comment #18)\n\u003e Boris has this been verified yet?\n\nSee comment #11, Aaron has confirmed that the change resolves his issue.  I have tested the patch at the time I released it, but not as part of a build yet.",
    "Verified on Windows XP using M20070112-1200."
  ],
  "commentCreationDates": [
    "2006-09-06T19:59:12+02:00",
    "2006-10-17T21:14:30+02:00",
    "2006-10-17T21:15:05+02:00",
    "2006-10-17T21:50:26+02:00",
    "2006-10-17T22:43:16+02:00",
    "2006-10-17T22:44:51+02:00",
    "2006-10-17T22:53:49+02:00",
    "2006-10-17T23:06:13+02:00",
    "2006-10-18T13:25:38+02:00",
    "2006-10-18T14:19:06+02:00",
    "2006-11-01T13:29:43+01:00",
    "2006-11-01T15:26:58+01:00",
    "2006-11-01T15:33:26+01:00",
    "2006-11-01T17:12:20+01:00",
    "2006-11-07T18:14:17+01:00",
    "2006-11-07T18:34:25+01:00",
    "2006-11-08T15:09:16+01:00",
    "2006-11-30T17:36:01+01:00",
    "2007-01-09T14:16:24+01:00",
    "2007-01-09T15:57:44+01:00",
    "2007-01-15T21:49:12+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.Workbench$13.run",
          "source": "Workbench.java:769"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.saveAllEditors",
          "source": "Workbench.java:735"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:655"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$8",
          "source": "Workbench.java:639"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$14.run",
          "source": "Workbench.java:839"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:837"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:812"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "156410",
      "date": "2006-09-06T19:59:12+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "156410",
  "bugId": "156410",
  "date": "2006-09-06T19:59:12+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}