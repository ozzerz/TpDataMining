{
  "comments": [
    "Updating Eclipse, somehow downloaded corrupted zip file.  Update displayes an \nerror.  I click \"finish\" in the wizard, without exitting Eclipse.  This time \nit does not redownload files again, which is nice, but stops installation on \nthe same file, every time.  The workaround is to exit eclipse and try again, \nbut it will redownload everything.  It would be nice if only the corrupted \nfile was redownloaded.\n\nThe following was in the log (errror dialog displayed similar message, but \nwithout stack trace):\n\n!ENTRY org.eclipse.update.ui 4 0 May 27, 2004 20:29:39.426\n!MESSAGE jzentry \u003d\u003d 0,\n jzfile \u003d 48131680,\n total \u003d 5,\n name \u003d C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\eclipse\\.update\\1085687001355\n\\1085687001404\\eclipse9682.tmp,\n i \u003d 5,\n message \u003d invalid LOC header (bad signature)\n!STACK 0\njava.lang.InternalError: jzentry \u003d\u003d 0,\n jzfile \u003d 48131680,\n total \u003d 5,\n name \u003d C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\eclipse\\.update\\1085687001355\n\\1085687001404\\eclipse9682.tmp,\n i \u003d 5,\n message \u003d invalid LOC header (bad signature)\n\tat java.util.zip.ZipFile$2.nextElement(ZipFile.java:321)\n\tat java.util.jar.JarFile$1.nextElement(JarFile.java:211)\n\tat org.eclipse.update.internal.security.JarVerifier.readJarFile\n(JarVerifier.java:182)\n\tat org.eclipse.update.internal.security.JarVerifier.verifyIntegrity\n(JarVerifier.java:321)\n\tat org.eclipse.update.internal.security.JarVerifier.verify\n(JarVerifier.java:249)\n\tat org.eclipse.update.internal.security.JarVerifier.verify\n(JarVerifier.java:233)\n\tat org.eclipse.update.internal.security.JarVerifier.verify\n(JarVerifier.java:222)\n\tat org.eclipse.update.core.Feature.verifyReferences(Feature.java:933)\n\tat org.eclipse.update.core.Feature.install(Feature.java:353)\n\tat org.eclipse.update.internal.core.SiteFile.install(SiteFile.java:111)\n\tat org.eclipse.update.core.Feature.install(Feature.java:386)\n\tat org.eclipse.update.internal.core.SiteFile.install(SiteFile.java:78)\n\tat org.eclipse.update.internal.core.ConfiguredSite.install\n(ConfiguredSite.java:121)\n\tat org.eclipse.update.internal.core.ConfiguredSite.install\n(ConfiguredSite.java:85)\n\tat org.eclipse.update.internal.operations.InstallOperation.execute\n(InstallOperation.java:73)\n\tat org.eclipse.update.internal.operations.BatchInstallOperation.execute\n(BatchInstallOperation.java:81)\n\tat org.eclipse.update.internal.ui.wizards.InstallWizard$1.run\n(InstallWizard.java:144)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)",
    "In addition to this problem, if an attempt is made to delete the directory in\n/tmp containing the downloaded files, Eclipse doesn\u0027t gracefully handle this,\ninstead throwing an IOException when an attempt is made to install a file.\n\nEclipse\u0027s auto update needs to handle download failures correctly.",
    "Does file locking still happen in the latest nightly builds?\nI have released some code last week that should close the input stream when \njar verification is done (successfully or with error).\nThe code will make it into this week\u0027s integration build.",
    "Graham, see comment #2"
  ],
  "commentCreationDates": [
    "2004-05-28T02:51:34+02:00",
    "2004-12-06T15:34:28+01:00",
    "2004-12-06T16:19:12+01:00",
    "2004-12-06T16:20:05+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.InternalError",
      "message": "jzentry \u003d\u003d 0,  jzfile \u003d 48131680,  total \u003d 5,  name \u003d C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\eclipse\\.update\\1085687001355 \\1085687001404\\eclipse9682.tmp,  i \u003d 5,  message \u003d invalid LOC header (bad signature)",
      "elements": [
        {
          "method": "java.util.zip.ZipFile$2.nextElement",
          "source": "ZipFile.java:321"
        },
        {
          "method": "java.util.jar.JarFile$1.nextElement",
          "source": "JarFile.java:211"
        },
        {
          "method": "org.eclipse.update.internal.security.JarVerifier.readJarFile",
          "source": "JarVerifier.java:182"
        },
        {
          "method": "org.eclipse.update.internal.security.JarVerifier.verifyIntegrity",
          "source": "JarVerifier.java:321"
        },
        {
          "method": "org.eclipse.update.internal.security.JarVerifier.verify",
          "source": "JarVerifier.java:249"
        },
        {
          "method": "org.eclipse.update.internal.security.JarVerifier.verify",
          "source": "JarVerifier.java:233"
        },
        {
          "method": "org.eclipse.update.internal.security.JarVerifier.verify",
          "source": "JarVerifier.java:222"
        },
        {
          "method": "org.eclipse.update.core.Feature.verifyReferences",
          "source": "Feature.java:933"
        },
        {
          "method": "org.eclipse.update.core.Feature.install",
          "source": "Feature.java:353"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteFile.install",
          "source": "SiteFile.java:111"
        },
        {
          "method": "org.eclipse.update.core.Feature.install",
          "source": "Feature.java:386"
        },
        {
          "method": "org.eclipse.update.internal.core.SiteFile.install",
          "source": "SiteFile.java:78"
        },
        {
          "method": "org.eclipse.update.internal.core.ConfiguredSite.install",
          "source": "ConfiguredSite.java:121"
        },
        {
          "method": "org.eclipse.update.internal.core.ConfiguredSite.install",
          "source": "ConfiguredSite.java:85"
        },
        {
          "method": "org.eclipse.update.internal.operations.InstallOperation.execute",
          "source": "InstallOperation.java:73"
        },
        {
          "method": "org.eclipse.update.internal.operations.BatchInstallOperation.execute",
          "source": "BatchInstallOperation.java:81"
        },
        {
          "method": "org.eclipse.update.internal.ui.wizards.InstallWizard$1.run",
          "source": "InstallWizard.java:144"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "64482",
      "date": "2004-05-28T02:51:34+02:00",
      "product": "Platform",
      "component": "Update",
      "severity": "normal"
    }
  ],
  "groupId": "64482",
  "bugId": "64482",
  "date": "2004-05-28T02:51:34+02:00",
  "product": "Platform",
  "component": "Update",
  "severity": "normal"
}