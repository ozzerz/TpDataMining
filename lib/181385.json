{
  "comments": [
    "Build: 2.0M6-200704060120\n\nSteps to reproduce: \n1. Create a Web 2.5 project. \n2. Right click on the Web 2.5 project and choose \"New --\u003e Servlet\". \n3. Fill the necessary fields and click Finish. \n4. The wizard crashes with the following error: \n\norg.eclipse.core.runtime.CoreException: Extended Operation failure: org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish(DataModelWizard.java:182)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:690)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:362)\n        .................................\norg.eclipse.core.runtime.CoreException[0]: java.lang.NullPointerException\n\tat org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.createServlet(AddServletOperation.java:223)\n\tat org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.generateServletMetaData(AddServletOperation.java:173)\n\tat org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.doExecute(AddServletOperation.java:109)\n\tat org.eclipse.wst.common.componentcore.internal.operation.ArtifactEditProviderOperation.execute(ArtifactEditProviderOperation.java:100)\n\t.................................\n\nAs a result the Servlet class is generated, but it is not registered in the web.xml descriptor.",
    "Created an attachment (id\u003d66870)\npatch\n\nThis patch makes the Servet wizard to work with Servlet 2.5. \n\nThe code is refactor in a way that when a Servlet 2.2, 2.3 or 2.4 is created the old J2EE model is used, but when a Servlet 2.5 is created the new Java EE 5 model is used. This is done by utilizing the new IModelProvider concept. \n\nThere is one place that needs review: the ArtifactEditProviderOperation.validateEdit() method. This method executes some validation on the ArtifactEdit of the model. Since EE 5 models does not have ArtifactEdit, no such validation is done in my patch. ",
    "Well, I think the patch is correct, but there is something that I still miss. \n\nI can create Servlet 2.5 without getting any error. I am sure that the new servlet is added to the model, because I am not allowed by the wizard to create second servlet with the same name. But there is nothing written in the web.xml file. \n\nI thought that modifying the model with the setter method will automatically reflect on the web.xml file (isn\u0027t this the idea of EMF?). What do I miss here?",
    "I have used the I200705110028 build.",
    "Hi,\n\nYou have made many good changes here - (The open Java editor change is much\nbetter)\n\nBut I don\u0027t think we can use the same DataModel and operation because they are\nrelying on the ArtifactEdit for load/save of the models - I also don\u0027t want to\nhave a bunch of switches littered all over the operation.\n\nNeeraj on my team is currently looking at keeping the same data model provider,\nbut using an alternate operation.",
    "Well, I found that if I call the WebResourceImpl.save(options) method, then the model is saved in the web.xml deployment descriptor. \n\nThe problem is that at the moment there is no easy (and standard) way of doing this. I see that there is an IModelProvider.modify() method that is supposed to be related to saving the model, but it is still not implemented in any of the IModelProvider implementation classes.\n\nCan you provide some details on the programming pattern of saving the model?",
    "I want to raise this issue as hot bug. \nI hope we will have working solution for RC0. I see that from functional perspective everything is there. Only a key API has to be defined and implemented properly. \nThe fix is important for us, because we are going to adopt WTP 2.0 RC0 in the current development code line of the SAP NetWeaver Developer Studio and we want to minimize the number of major regressions. ",
    "Hi,\n\nYou are correct, we are implementing the modify() now to get this working.\nIt was just a point in time. - we intend to release a working example soon.",
    "fix has beeen released to CVS.",
    "I have tried the S-2.0RC0-200705170212 build, but the behavior when creating new web 2.5 servlet is the same: \n\njava.lang.ClassCastException: org.eclipse.jst.javaee.web.internal.impl.WebAppDeploymentDescriptorImpl\n\tat org.eclipse.jst.j2ee.internal.web.operations.NewServletClassDataModelProvider.validateDisplayName(NewServletClassDataModelProvider.java:563)\n\tat org.eclipse.jst.j2ee.internal.web.operations.NewServletClassDataModelProvider.validate(NewServletClassDataModelProvider.java:361)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.validate(DataModelImpl.java:376)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.isValid(DataModelImpl.java:422)\n\tat org.eclipse.jst.servlet.ui.internal.wizard.AddServletWizard.canFinish(AddServletWizard.java:92)\n\nAdditionally, when invoking the New Servlet wizard I see in the console the following exception:\n\njava.lang.RuntimeException: Invalid Artifact Edit access (model version not supp\norted)\n        at org.eclipse.wst.common.componentcore.ArtifactEdit.verifyOperationSupp\norted(ArtifactEdit.java:319)\n        at org.eclipse.jst.j2ee.web.componentcore.util.WebArtifactEdit.getJ2EEVe\nrsion(WebArtifactEdit.java:313)",
    "Well, it seems that the changes in the CVS are not yet reflected in the build. \nI have tried to code from the CVS and the servlet 2.5 creation is just perfect. ",
    "There is new build - S-2.0RC0-200705170529. \nEverything is fine there. ",
    "Closing as verified."
  ],
  "commentCreationDates": [
    "2007-04-06T10:31:01+02:00",
    "2007-05-11T17:00:00+02:00",
    "2007-05-11T17:02:47+02:00",
    "2007-05-11T17:08:45+02:00",
    "2007-05-11T18:12:05+02:00",
    "2007-05-14T13:38:58+02:00",
    "2007-05-14T13:44:55+02:00",
    "2007-05-14T15:36:44+02:00",
    "2007-05-16T16:40:52+02:00",
    "2007-05-17T09:06:59+02:00",
    "2007-05-17T11:33:19+02:00",
    "2007-05-17T12:46:16+02:00",
    "2007-06-06T16:13:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Extended Operation failure: org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation",
      "elements": [
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish",
          "source": "DataModelWizard.java:182"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:690"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:362"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "181385",
      "date": "2007-04-06T10:31:01+02:00",
      "product": "Web Tools",
      "component": "jst.servlet",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.createServlet",
          "source": "AddServletOperation.java:223"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.generateServletMetaData",
          "source": "AddServletOperation.java:173"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.AddServletOperation.doExecute",
          "source": "AddServletOperation.java:109"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.operation.ArtifactEditProviderOperation.execute",
          "source": "ArtifactEditProviderOperation.java:100"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "181385",
      "date": "2007-04-06T10:31:01+02:00",
      "product": "Web Tools",
      "component": "jst.servlet",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jst.javaee.web.internal.impl.WebAppDeploymentDescriptorImpl",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.NewServletClassDataModelProvider.validateDisplayName",
          "source": "NewServletClassDataModelProvider.java:563"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.web.operations.NewServletClassDataModelProvider.validate",
          "source": "NewServletClassDataModelProvider.java:361"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.validate",
          "source": "DataModelImpl.java:376"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.isValid",
          "source": "DataModelImpl.java:422"
        },
        {
          "method": "org.eclipse.jst.servlet.ui.internal.wizard.AddServletWizard.canFinish",
          "source": "AddServletWizard.java:92"
        }
      ],
      "number": 2,
      "commentIndex": 9,
      "bugId": "181385",
      "date": "2007-05-17T09:06:59+02:00",
      "product": "Web Tools",
      "component": "jst.servlet",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Invalid Artifact Edit access (model version not supp orted)",
      "elements": [
        {
          "method": "org.eclipse.wst.common.componentcore.ArtifactEdit.verifyOperationSupported",
          "source": "ArtifactEdit.java:319"
        },
        {
          "method": "org.eclipse.jst.j2ee.web.componentcore.util.WebArtifactEdit.getJ2EEVersion",
          "source": "WebArtifactEdit.java:313"
        }
      ],
      "number": 3,
      "commentIndex": 9,
      "bugId": "181385",
      "date": "2007-05-17T09:06:59+02:00",
      "product": "Web Tools",
      "component": "jst.servlet",
      "severity": "critical"
    }
  ],
  "groupId": "181385",
  "bugId": "181385",
  "date": "2007-04-06T10:31:01+02:00",
  "product": "Web Tools",
  "component": "jst.servlet",
  "severity": "critical"
}