{
  "comments": [
    "I20070206-0010.\n\nSaveablesList holds on and uses savables (models) that are no longer available because the have been reported as being closed (removeModel has been calles).\n\nThe SaveablesList correctly removes such models from the modelMap but might keep a reference as key of modelRefCounts. Later, those keys are used to return the open models (see getOpenModels()).\n\nTest Case:\n1. open a shared file\n2. open the same shared file a second time\n3. make it dirty\n4. close the first editor\n5. Team \u003e Compare With \u003e Latest from HEAD\n\n\u003d\u003d\u003e NPE:\n\njava version \"1.5.0_10\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_10-b03)\nJava HotSpot(TM) Client VM (build 1.5.0_10-b03, mixed mode)\n!SESSION 2007-02-07 10:45:46.658 -----------------------------------------------\neclipse.buildId\u003dI20070206-0010\njava.version\u003d1.5.0_10\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_CH\nFramework arguments:  -launcher C:\\eclipse\\drops\\I20070206-0010\\eclipse -name Eclipse 600 -product org.eclipse.sdk.ide -pdelaunch\nCommand-line arguments:  -launcher C:\\eclipse\\drops\\I20070206-0010\\eclipse -name Eclipse 600 -product org.eclipse.sdk.ide -data C:\\eclipse\\workspaces\\Development_3_3\\plugins/../eoe -dev file:C:/eclipse/workspaces/Development_3_3/plugins/.metadata/.plugins/org.eclipse.pde.core/eoe (Sun)/dev.properties -pdelaunch -os win32 -ws win32 -arch x86 -consolelog -clean\n\n!ENTRY org.eclipse.core.resources 2 10035 2007-02-07 10:45:49.599\n!MESSAGE A workspace crash was detected. The previous session did not exit normally.\n\n!ENTRY org.eclipse.ui.ide 4 2 2007-02-07 10:58:05.658\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.ide\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.ui.texteditor.AbstractTextEditor$TextEditorSavable.isDirty(AbstractTextEditor.java:6421)\n\tat org.eclipse.ui.internal.Workbench.getFilteredSaveables(Workbench.java:3366)\n\tat org.eclipse.ui.internal.Workbench.saveAll(Workbench.java:3339)\n\tat org.eclipse.ui.ide.IDE$1.run(IDE.java:1089)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.ui.ide.IDE.saveAllEditors(IDE.java:1077)\n\tat org.eclipse.team.internal.ccvs.ui.actions.CVSAction$6.run(CVSAction.java:588)\n\tat org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:152)\n\tat org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:117)\n\tat org.eclipse.swt.widgets.Display.syncExec(Display.java:3905)\n\tat org.eclipse.team.internal.ccvs.ui.actions.CVSAction.saveAllEditors(CVSAction.java:583)\n\tat org.eclipse.team.internal.ccvs.ui.actions.CVSAction.beginExecution(CVSAction.java:219)\n\tat org.eclipse.team.internal.ccvs.ui.actions.WorkspaceAction.beginExecution(WorkspaceAction.java:56)\n\tat org.eclipse.team.internal.ccvs.ui.actions.CVSAction.run(CVSAction.java:114)\n\tat org.eclipse.ui.actions.ActionDelegate.runWithEvent(ActionDelegate.java:70)\n\tat org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:243)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3490)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3104)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2264)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2228)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2103)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:457)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:452)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1124)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1099)",
    "This is something we need to fix for M5.",
    "Created an attachment (id\u003d58437)\nFix\n\nBoris, this fix ensures that closed models are only used as key and actions on the open models happen on models that have not been reported as closed.\n\nThe fix requires from the closed saveable to return correct values for equals(Object) and hashCode() but does no longer call any operations on closed models.",
    "Patch released \u003e20070207.",
    "Thanks Boris.",
    "Verified in I20070207-1327."
  ],
  "commentCreationDates": [
    "2007-02-07T10:08:12+01:00",
    "2007-02-07T10:08:44+01:00",
    "2007-02-07T10:22:43+01:00",
    "2007-02-07T13:33:32+01:00",
    "2007-02-07T15:01:56+01:00",
    "2007-02-07T22:09:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor$TextEditorSavable.isDirty",
          "source": "AbstractTextEditor.java:6421"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.getFilteredSaveables",
          "source": "Workbench.java:3366"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.saveAll",
          "source": "Workbench.java:3339"
        },
        {
          "method": "org.eclipse.ui.ide.IDE$1.run",
          "source": "IDE.java:1089"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.ide.IDE.saveAllEditors",
          "source": "IDE.java:1077"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.actions.CVSAction$6.run",
          "source": "CVSAction.java:588"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.syncExec",
          "source": "Synchronizer.java:152"
        },
        {
          "method": "org.eclipse.ui.internal.UISynchronizer.syncExec",
          "source": "UISynchronizer.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.syncExec",
          "source": "Display.java:3905"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.actions.CVSAction.saveAllEditors",
          "source": "CVSAction.java:583"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.actions.CVSAction.beginExecution",
          "source": "CVSAction.java:219"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.actions.WorkspaceAction.beginExecution",
          "source": "WorkspaceAction.java:56"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.actions.CVSAction.run",
          "source": "CVSAction.java:114"
        },
        {
          "method": "org.eclipse.ui.actions.ActionDelegate.runWithEvent",
          "source": "ActionDelegate.java:70"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:243"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3490"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3104"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2264"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2228"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2103"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:457"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:452"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1099"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "173250",
      "date": "2007-02-07T10:08:12+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "173250",
  "bugId": "173250",
  "date": "2007-02-07T10:08:12+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "critical"
}