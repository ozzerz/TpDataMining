{
  "comments": [
    "While running some code on M7, I ran across the following exception:\n\njava.lang.NullPointerException\nat org.eclipse.osgi.framework.internal.core.ServiceReferenceImpl.isAssignableTo\n(ServiceReferenceImpl.java:245)\nat org.eclipse.osgi.framework.internal.core.BundleContextImpl.isAssignableTo\n(BundleContextImpl.java:1326)\nat \norg.eclipse.osgi.framework.internal.core.FilteredServiceListener.serviceChanged\n(FilteredServiceListener.java:65)\nat org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent\n(BundleContextImpl.java:1219)\nat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent\n(EventManager.java:186)\nat org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous\n(ListenerQueue.java:139)\nat \norg.eclipse.osgi.framework.internal.core.Framework.publishServiceEventPrivilege\nd(Framework.java:1496)\nat org.eclipse.osgi.framework.internal.core.Framework.publishServiceEvent\n(Framework.java:1471)\nat org.eclipse.osgi.framework.internal.core.ServiceRegistrationImpl.unregister\n(ServiceRegistrationImpl.java:153)\nat org.eclipse.osgi.framework.internal.core.BundleContextImpl.close\n(BundleContextImpl.java:121)\nat org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker\n(BundleHost.java:404)\nat org.eclipse.osgi.framework.internal.core.AbstractBundle.uninstallWorker\n(AbstractBundle.java:839)\nat org.eclipse.osgi.framework.internal.core.AbstractBundle.uninstall\n(AbstractBundle.java:819)\nat org.osgi.test.eclipse.TestView$2.run(TestView.java:209)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)",
    "Turns out that this is a pretty nasty bug.  The ServiceRegistrationImpl object \nis null\u0027ing out the service field which needs to be used later to evaluate \npackage consistency when delivering the UNREGISTERED ServiceEvent.\n\nAlso related to this is the fact that the package consistency check is not \nworking properly if the bundle which registered the service object does not \ndirectly have access to the service class.\n\nThis is a must fix for RC1.\n\nWill attach a patch ...",
    "Created an attachment (id\u003d21343)\nproposed fix\n\nJeff please approve for RC1. thanks.",
    "ship it!\n",
    "Fix is in HEAD."
  ],
  "commentCreationDates": [
    "2005-05-18T01:34:49+02:00",
    "2005-05-18T18:00:34+02:00",
    "2005-05-18T18:05:38+02:00",
    "2005-05-18T18:09:41+02:00",
    "2005-05-18T18:15:58+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceReferenceImpl.isAssignableTo",
          "source": "ServiceReferenceImpl.java:245"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.isAssignableTo",
          "source": "BundleContextImpl.java:1326"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FilteredServiceListener.serviceChanged",
          "source": "FilteredServiceListener.java:65"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1219"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java:186"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous",
          "source": "ListenerQueue.java:139"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.publishServiceEventPrivileged",
          "source": "Framework.java:1496"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.publishServiceEvent",
          "source": "Framework.java:1471"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceRegistrationImpl.unregister",
          "source": "ServiceRegistrationImpl.java:153"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.close",
          "source": "BundleContextImpl.java:121"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:404"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.uninstallWorker",
          "source": "AbstractBundle.java:839"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.uninstall",
          "source": "AbstractBundle.java:819"
        },
        {
          "method": "org.osgi.test.eclipse.TestView$2.run",
          "source": "TestView.java:209"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "95687",
      "date": "2005-05-18T01:34:49+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    }
  ],
  "groupId": "95687",
  "bugId": "95687",
  "date": "2005-05-18T01:34:49+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "normal"
}