{
  "comments": [
    "It looks like recently in the class org.eclipse.wst.server.ui.internal.actions.RunOnServerActionDelegate a chunk of code in the method \"run(IProgressMonitor)\" that runs a wizard is being encapsulated by a new Thread that is causing Invalid thread access.\n\nWe have replicated this succesfully w/ WTP 1.5RC2 (\u0026 drivers), eclipse 3.2RC4 linux x86, and our custom module type / adapter.\n\nShouldn\u0027t this be Display.asyncExec\u0027d?\n\nHere is the stack trace (w/ some tracing):\n\norg.eclipse.wst.server.ui FINER   18/05/06 15:34.21.612 client\u003d Client[org.eclipse.jst.server.cactus.client]\norg.eclipse.wst.server.ui FINER   18/05/06 15:34.21.612 client\u003d Client[org.eclipse.wst.server.ui.web]\norg.eclipse.wst.server.ui FINER   18/05/06 15:34.21.612 client\u003d Client[org.eclipse.jst.server.jndi]\norg.eclipse.wst.server.ui FINER   18/05/06 15:34.21.613 Launchable clients: [Lorg.eclipse.wst.server.core.internal.IClient;@16de87\norg.eclipse.wst.server.core FINEST    18/05/06 15:35.30.592 stop notify timeout\nException in thread \"Server launch shortcut\" org.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:3374)\n\tat org.eclipse.swt.SWT.error(SWT.java:3297)\n\tat org.eclipse.swt.SWT.error(SWT.java:3268)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:434)\n\tat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:252)\n\tat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:338)\n\tat org.eclipse.jface.window.Window.createShell(Window.java:482)\n\tat org.eclipse.jface.window.Window.create(Window.java:425)\n\tat org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1124)\n\tat org.eclipse.jface.window.Window.open(Window.java:785)\n\tat org.eclipse.wst.server.ui.internal.actions.RunOnServerActionDelegate$1.run(RunOnServerActionDelegate.java:285)",
    "Created an attachment (id\u003d41939)\ndiff between working and broken versions of delegate\n\nI\u0027ve added the diff from a version that is know to work vs. the most recent which isn\u0027t.\n\nYou can see the entire source for the \"working\" version here:\nhttp://pastebin.com/725323\n\nAnd the broken one here:\nhttp://pastebin.com/725321",
    "Marshall\u0027s stack trace shows line 285 is the culprit. Surrounding lines are (283-288): \n\n SelectClientWizard wizard \u003d new SelectClientWizard(clients);\n ClosableWizardDialog dialog \u003d new ClosableWizardDialog(shell, wizard);\n dialog.open();\n client \u003d wizard.getSelectedClient();\n if (client \u003d\u003d null)\n     return;\n\nThis code is included in the new thread (lines 245-347)",
    "This was already fixed. (on the 16th, should be in RC3)",
    "Tim, was the fix for this also added to the 1.0.3 stream?",
    "Yes. 1.0.2 didn\u0027t have this problem. The fix that introduced this problem in 1.5 (avoiding a hang) is also in the 1.0.3 stream, but avoids this regression.",
    "Closing."
  ],
  "commentCreationDates": [
    "2006-05-18T22:52:41+02:00",
    "2006-05-18T22:58:13+02:00",
    "2006-05-22T19:52:23+02:00",
    "2006-05-23T22:19:58+02:00",
    "2006-05-25T02:55:28+02:00",
    "2006-05-25T05:53:38+02:00",
    "2006-06-27T22:58:54+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3374"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3268"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:434"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:252"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:338"
        },
        {
          "method": "org.eclipse.jface.window.Window.createShell",
          "source": "Window.java:482"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:425"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.create",
          "source": "Dialog.java:1124"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:785"
        },
        {
          "method": "org.eclipse.wst.server.ui.internal.actions.RunOnServerActionDelegate$1.run",
          "source": "RunOnServerActionDelegate.java:285"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "142631",
      "date": "2006-05-18T22:52:41+02:00",
      "product": "Web Tools",
      "component": "wst.server",
      "severity": "major"
    }
  ],
  "groupId": "142631",
  "bugId": "142631",
  "date": "2006-05-18T22:52:41+02:00",
  "product": "Web Tools",
  "component": "wst.server",
  "severity": "major"
}