{
  "comments": [
    "When starting the runtime workbench with the antrunner the JVM running Ant\ncrashes on an Ant input task.\n\nTested with the following (trivial) buildfile:\n\u003cproject name\u003d\"test\" default\u003d\"ask-application\"\u003e\n    \u003ctarget name\u003d\"ask-application\"\u003e\n        \u003cinput\n            message\u003d\"please enter application\"\n            addproperty\u003d\"app\"\n        /\u003e\n    \u003c/target\u003e\n\u003c/project\u003e\n\nJVM version: java.fullversion\u003dJ2RE 1.4.1 IBM build cxia321411-20031011 (JIT\nenabled: jitc)\n\nOutput in terminal where Eclipse had been started:\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.IllegalMonitorStateException: JVMLK002:\ncurrent thread not owner)\n*** SWT nested exception\nReason:\nJVMLK002: current thread not owner\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.IllegalMonitorStateException: JVMLK002:\ncurrent thread not owner)\n*** SWT nested exception\nReason:\nJVMLK002: current thread not owner\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.IllegalMonitorStateException: JVMLK002:\ncurrent thread not owner)\n*** SWT nested exception\nReason:\nJVMLK002: current thread not owner\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.IllegalMonitorStateException: JVMLK002:\ncurrent thread not owner)\n*** SWT nested exception\nReason:\nJVMLK002: current thread not owner\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.IllegalMonitorStateException: JVMLK002:\ncurrent thread not owner)\n*** SWT nested exception\nReason:\nJVMLK002: current thread not owner\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.IllegalMonitorStateException: JVMLK002:\ncurrent thread not owner)\n*** SWT nested exception\nReason:\nJVMLK002: current thread not owner\n\nThe Eclipse console contains the following (truncated) output:\nInput(Project.java:1139)\n\tat org.apache.tools.ant.DemuxInputStream.read(DemuxInputStream.java:63)\n\tat org.apache.tools.ant.Project.defaultInput(Project.java:1115)\n\tat org.apache.tools.ant.Task.handleInput(Task.java:306)\n\tat org.apache.tools.ant.UnknownElement.handleInput(UnknownElement.java:210)\n\tat org.apache.tools.ant.Project.demuxInput(Project.java:1139)\n\tat org.apache.tools.ant.DemuxInputStream.read(DemuxInputStream.java:63)\n\tat org.apache.tools.ant.Project.defaultInput(Project.java:1115)\n\tat org.apache.tools.ant.Task.handleInput(Task.java:306)\n\tat org.apache.tools.ant.UnknownElement.handleInput(UnknownElement.java:210)\n\tat org.apache.tools.ant.Project.demuxInput(Project.java:1139)\n\tat org.apache.tools.ant.DemuxInputStream.read(DemuxInputStream.java:63)\n\tat org.apache.tools.ant.Project.defaultInput(Project.java:1115)\n\tat org.apache.tools.ant.Task.handleInput(Task.java:306)\n\tat \n\n\u003clot of repetiotions of the above lines\u003e\n\norg.apache.tools.ant.input.DefaultInputHandler.handleInput(DefaultInputHandler.java:58)\n\tat org.apache.tools.ant.taskdefs.Input.execute(Input.java:119)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:301)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:328)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n\tat\norg.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:624)\n\tat\norg.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:528)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)\n\tat java.lang.reflect.Method.invoke(Method.java:386)\n\tat org.eclipse.ant.core.AntRunner.run(AntRunner.java:479)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:277)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:239)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)\n\tat java.lang.reflect.Method.invoke(Method.java:386)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:267)\n\tat org.eclipse.core.launcher.Main.run(Main.java:692)\n\tat org.eclipse.core.launcher.Main.main(Main.java:676)\n\nTotal time: 1 second",
    "Moving to platform/ant.",
    "Please indicate which build of Eclipse you are using?\nHelp\u003eAbout Eclipse Platform\u003eBuild Id\nDoes the build work successfully from the commandline using the same Ant \nversion and same VM?",
    "I am running Eclipse 3.0M8 (Build id: 200403261517).\n\nWhen invoking the Eclipse Ant through the commandline (using the same JVM) Ant\ncorrectly shows:\n\nask-application:\n    [input] please enter application\n\nand waits for input.\n\nI suppose Eclipse somehow catches this situation to be able to show a graphical\nwindow asking for input.\n",
    "Thanks for the feedback.\nAll that Eclipse is using is the -inputhandler functionality of Ant itself to \nprovide the GUI for the input. At the commandline you are using the default \ninput handler.",
    "OK.\n\nSo, is the inputhandler Eclipse provides to Ant broke OR\nis the way Ant 1.6.1 handes inputhandlers :-) broke?",
    "That is what I have to look into :-)\nI will go grab the IBM VM this afternoon.\nAny help is appreciated.",
    "I am not sure what you have available, but I used the IBM JVM packaged with\nWebSphere 5.1 (packaged with WSAD 5.1.1).",
    "Just to match sure all the variables are the same can you give me the full \nversion / build number of the VM?\n\nDoes the problem exist if you use another VM such as Sun JDK 1.4.2?",
    "/opt/IBM/WebSphereStudio/ApplicationDeveloper/v5.1/runtimes/base_v51/java/jre/bin/java\n-fullversion\njava full version \"J2RE 1.4.1 IBM build cxia321411-20031011\"\n\nI have not been able to test with other JVM\u0027s, like Sun (does Sun have a JVM for\nLinux?!?)",
    "OK, got two Sun\u0027s JVM for Linux. Both gave the same result as the IBM JVM\npreviously. I tested with:\n\n/usr/java/j2re1.4.2_01/bin/java -version\njava version \"1.4.2_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_01-b06)\nJava HotSpot(TM) Client VM (build 1.4.2_01-b06, mixed mode)\n\n/usr/java/j2re1.4.2_01/bin/java -fullversion\njava full version \"1.4.2_01-b06\"\n\nand\n\n/usr/java/j2sdk1.4.1_04/bin/java -version\njava version \"1.4.1_04\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.1_04-b01)\nJava HotSpot(TM) Client VM (build 1.4.1_04-b01, mixed mode)\n\n/usr/java/j2sdk1.4.1_04/bin/java -fullversion\njava full version \"1.4.1_04-b01\"\n\n",
    "Thanks for the info.\n\nWe definately have a bug using the antRunner application entry point and the \ninput task.\n\nWe are incorrectly setting the default input stream of the Ant project to the \ndemux input stream and not the original System.in. This results in a stack \noverflow situation.",
    "Fixed in InternalAntRunner.run(List)",
    "Please verify Jared.\nThanks for your help Fitzgerald.",
    "Verified code."
  ],
  "commentCreationDates": [
    "2004-04-21T22:17:36+02:00",
    "2004-04-22T05:39:34+02:00",
    "2004-04-22T16:49:36+02:00",
    "2004-04-22T21:39:02+02:00",
    "2004-04-22T21:49:49+02:00",
    "2004-04-22T23:01:16+02:00",
    "2004-04-22T23:17:35+02:00",
    "2004-04-22T23:19:32+02:00",
    "2004-04-22T23:21:19+02:00",
    "2004-04-23T21:42:02+02:00",
    "2004-04-23T21:57:28+02:00",
    "2004-04-24T00:56:23+02:00",
    "2004-04-24T01:07:53+02:00",
    "2004-04-24T01:08:36+02:00",
    "2004-04-28T05:10:33+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalMonitorStateException",
      "message": "JVMLK002: current thread not owner) *** SWT nested exception Reason: JVMLK002: current thread not owner  The Eclipse console contains the following (truncated) output: Input(Project.java:1139)",
      "elements": [
        {
          "method": "org.apache.tools.ant.DemuxInputStream.read",
          "source": "DemuxInputStream.java:63"
        },
        {
          "method": "org.apache.tools.ant.Project.defaultInput",
          "source": "Project.java:1115"
        },
        {
          "method": "org.apache.tools.ant.Task.handleInput",
          "source": "Task.java:306"
        },
        {
          "method": "org.apache.tools.ant.UnknownElement.handleInput",
          "source": "UnknownElement.java:210"
        },
        {
          "method": "org.apache.tools.ant.Project.demuxInput",
          "source": "Project.java:1139"
        },
        {
          "method": "org.apache.tools.ant.DemuxInputStream.read",
          "source": "DemuxInputStream.java:63"
        },
        {
          "method": "org.apache.tools.ant.Project.defaultInput",
          "source": "Project.java:1115"
        },
        {
          "method": "org.apache.tools.ant.Task.handleInput",
          "source": "Task.java:306"
        },
        {
          "method": "org.apache.tools.ant.UnknownElement.handleInput",
          "source": "UnknownElement.java:210"
        },
        {
          "method": "org.apache.tools.ant.Project.demuxInput",
          "source": "Project.java:1139"
        },
        {
          "method": "org.apache.tools.ant.DemuxInputStream.read",
          "source": "DemuxInputStream.java:63"
        },
        {
          "method": "org.apache.tools.ant.Project.defaultInput",
          "source": "Project.java:1115"
        },
        {
          "method": "org.apache.tools.ant.Task.handleInput",
          "source": "Task.java:306"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "59513",
      "date": "2004-04-21T22:17:36+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "59513",
  "bugId": "59513",
  "date": "2004-04-21T22:17:36+02:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}