{
  "comments": [
    "This is using the GTK in the Eclipse 2.1.1 200306061550 build.\nThe problem seems to be in Table.getItemHeight();\n\nWe have a wizard that creates a PropertySheetPage and PropertySheetViewer, and\nthen calls setRootEntry before the controls are displayed.  We get the following\nexception:\n\njava.lang.IllegalArgumentException: Argument not valid\n        at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n        at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n        at org.eclipse.swt.SWT.error(SWT.java:2318)\n        at org.eclipse.swt.SWT.error(SWT.java:2262)\n        at org.eclipse.swt.graphics.Image.init(Image.java:716)\n        at org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:156)\n        at org.eclipse.swt.custom.TableTreeItem.\u003cinit\u003e(TableTreeItem.java:186)\n        at org.eclipse.swt.custom.TableTreeItem.\u003cinit\u003e(TableTreeItem.java:98)\n        at\norg.eclipse.ui.views.properties.PropertySheetViewer.createItem(PropertySheetViewer.java:327)\n        at\norg.eclipse.ui.views.properties.PropertySheetViewer.updateChildrenOf(PropertySheetViewer.java:1030)\n        at\norg.eclipse.ui.views.properties.PropertySheetViewer.setInput(PropertySheetViewer.java:778)\n        at\norg.eclipse.ui.views.properties.PropertySheetViewer.setRootEntry(PropertySheetViewer.java:813)\n        at\norg.eclipse.ui.views.properties.PropertySheetPage.setRootEntry(PropertySheetPage.java:425)\n\nThe problem comes from the fact that in TableTreeItem\u0027s constructor, the\nfollowing snippet is called:\n\nif (parent.sizeImage \u003d\u003d null) {\n\t\t\tint itemHeight \u003d parent.getItemHeight();\n\nIn the GTK, parent.getItemHeight() returns 0.  parent is the TableTree.  I\nbelieve that Table.getItemHeight() should return the default value of 15 in this\ncase.  It would only return that value if the table has no children.  However,\nthe table has one child- the TableTreeItem that is being constructed, and thus\nthe height of the Table is 0.  This same scenario works on Windows and Linux-Motif.",
    "Chrix, didn\u0027t we fix this already in HEAD?  It is under consideration for \n2.1.1.",
    "Hi.  Just to help with the consideration process:  Without a fix for this,  \nseveral wizards in WSAD are broken in our upcoming release.  Thanks",
    "Yes, it is similar to bug 36993 (gtk_widget_realize)",
    "To the reporter and WSAD people: which version of GTK are you using?\nWhen working on bug 36993, I found the problem was only occuring with GTK 2.2, \nnot RH8.0 GTK 2.0.6. If you found otherwise, please let us know.\nCan you try a fix? The fix requires to add 1 line to the Table.java file in \nSWT. If the fix is good, it will help deciding whether to include it in 2.1.1 \nor not. Let me know if you can add the line to the SWT source or if you want \nme to email a 2.1.1 patched swt.jar for testing this fix.\n\nChris\n\n\n\nDetails about the fix in bug 36993.\nIf it is decided to port this fix to the 2.1.1 branch, we need to add the line \nmarked with /* PATCH */ in the Table.java file on GTK.\n\npublic int getItemHeight () {\n\tcheckWidget();\n\t// FIXME\n\t// I (bgs) am not sure what to do with this.\n\t// In GTK2, rows may have different heights, so asking\n\t// this question will only make sense given the item.\n\tif (itemCount \u003d\u003d 0) return 15;\n\tGdkRectangle rect \u003d new GdkRectangle ();\n\tint path \u003d OS.gtk_tree_path_new_first ();\nOS.gtk_widget_realize (handle); /* PATCH */\n\tOS.gtk_tree_view_get_cell_area (handle, path, 0, rect);\n\tOS.gtk_tree_path_free (path);\n\treturn rect.height;\n}",
    "I have emailed a patched swt plugin to Carl Anderson. Please let us know if \nthis fixes it. Also please specify the version of GTK you are using. We cannot \nrequest putting this patch into 2.1.1 until we know this is actually fixing \nthis problem.\n",
    "KH: please advise for 2.1.1",
    "The patch provided by Christophe has fixed this problem.\nThis problem was occurring on Red Hat Linux v8, which ships with GTK 2.0.6.",
    "Approved by KH.\nPatch described in comment 4 has been put in the 2.1 maintainance branch (2.1.1)\nAvailable in 2.1.1 version v\u003e20030624",
    "Marking fix for target milestone 2.1.1\nAdding Jim Des Rivieres",
    "Verified the patch didn\u0027t make it into 2.1.1 RC3 25 jun 2003 14:00\nSWT release tag updated and a new build has been requested",
    "This was fixed a *LONG* time ago.  Thanks!!!"
  ],
  "commentCreationDates": [
    "2003-06-16T21:43:30+02:00",
    "2003-06-18T23:09:00+02:00",
    "2003-06-18T23:45:51+02:00",
    "2003-06-19T16:21:17+02:00",
    "2003-06-20T20:55:06+02:00",
    "2003-06-23T16:52:16+02:00",
    "2003-06-23T16:57:22+02:00",
    "2003-06-23T18:06:51+02:00",
    "2003-06-24T22:44:21+02:00",
    "2003-06-25T17:00:42+02:00",
    "2003-06-27T21:19:03+02:00",
    "2004-09-16T18:00:42+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Argument not valid",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2318"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2262"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.init",
          "source": "Image.java:716"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.\u003cinit\u003e",
          "source": "Image.java:156"
        },
        {
          "method": "org.eclipse.swt.custom.TableTreeItem.\u003cinit\u003e",
          "source": "TableTreeItem.java:186"
        },
        {
          "method": "org.eclipse.swt.custom.TableTreeItem.\u003cinit\u003e",
          "source": "TableTreeItem.java:98"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.createItem",
          "source": "PropertySheetViewer.java:327"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.updateChildrenOf",
          "source": "PropertySheetViewer.java:1030"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.setInput",
          "source": "PropertySheetViewer.java:778"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.setRootEntry",
          "source": "PropertySheetViewer.java:813"
        },
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetPage.setRootEntry",
          "source": "PropertySheetPage.java:425"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "38975",
      "date": "2003-06-16T21:43:30+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "blocker"
    }
  ],
  "groupId": "38975",
  "bugId": "38975",
  "date": "2003-06-16T21:43:30+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "blocker"
}