{
  "comments": [
    "The included test program causes a NullPointerException when I have AspectJ nature set for my Eclipse Project. I am using Eclipse 3.2 M3 and AJDT downloaded from here: http://www.eclipse.org/downloads/download.php?file\u003d/technology/ajdt/32/dev/update/ajdt_1.3.0.20051117105200_archive.zip.\n\nimport java.util.Arrays;\n\nimport junit.framework.TestCase;\n\n/**\n * @author Pekka Enberg\n */\npublic class TestVarargs extends TestCase {\n    public void testVarargs() throws Exception {\n        Arrays.asList(String.class, Integer.class, Long.class);\n    }\n}\n\nThis is the error:\n\njava.lang.NullPointerException\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound(Scope.java:2999)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.leastContainingTypeArgument(Scope.java:2961)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.leastContainingInvocation(Scope.java:2879)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound(Scope.java:3019)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound(Scope.java:2979)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.resolveSubstituteConstraints(ParameterizedGenericMethodBinding.java:245)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.inferFromArgumentTypes(ParameterizedGenericMethodBinding.java:167)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.computeCompatibleMethod(ParameterizedGenericMethodBinding.java:63)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.computeCompatibleMethod(Scope.java:352)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.findMethod(Scope.java:1159)\nat org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.getMethod(Scope.java:2165)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveMethodBinding(MessageSend.java:480)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType(MessageSend.java:347)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolve(Expression.java:829)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:422)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:178)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:400)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1088)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1137)\nat org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:305)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:514)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:809)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:254)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:163)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nNullPointerException thrown: null",
    "Looks like a bug in the underlying compiler - we took a cut of the eclipse compiler for 3.1 and I can see the code in that area appears to have changed since we took a cut.  The NPE is because we are traversing an array of length 4 with only 3 things in it - representing the 3 parameters to the method.\n\nIt is length 4 because of the way the compiler chooses to double its capacity as it processes.\n\nyou can get rid of the error by passing a 4th parameter ;)",
    "Right - we probably need to upgrade to the latest JDT compiler version (3.1.1) but we aren\u0027t going to do that for 1.5.0 final.  So, I\u0027ve put in a fix to sort out the growing of the array, it now grows by 1 and fills each slot rather than doubling in size when it gets full and other consumers downstream then not being able to rely on its size to indicate how much of it is full.\n\nFix is checked in . waiting on build.\n\nthanks for the clear bug report :)",
    "fix available."
  ],
  "commentCreationDates": [
    "2005-12-14T08:53:43+01:00",
    "2005-12-14T11:06:11+01:00",
    "2005-12-14T11:48:03+01:00",
    "2005-12-14T13:36:42+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound",
          "source": "Scope.java:2999"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.leastContainingTypeArgument",
          "source": "Scope.java:2961"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.leastContainingInvocation",
          "source": "Scope.java:2879"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound",
          "source": "Scope.java:3019"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.lowerUpperBound",
          "source": "Scope.java:2979"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.resolveSubstituteConstraints",
          "source": "ParameterizedGenericMethodBinding.java:245"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.inferFromArgumentTypes",
          "source": "ParameterizedGenericMethodBinding.java:167"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.computeCompatibleMethod",
          "source": "ParameterizedGenericMethodBinding.java:63"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.computeCompatibleMethod",
          "source": "Scope.java:352"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.findMethod",
          "source": "Scope.java:1159"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.getMethod",
          "source": "Scope.java:2165"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveMethodBinding",
          "source": "MessageSend.java:480"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType",
          "source": "MessageSend.java:347"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolve",
          "source": "Expression.java:829"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements",
          "source": "AbstractMethodDeclaration.java:422"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements",
          "source": "MethodDeclaration.java:178"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:400"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1088"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1137"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:305"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:514"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:809"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:254"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:163"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:117"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "120826",
      "date": "2005-12-14T08:53:43+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    }
  ],
  "groupId": "120826",
  "bugId": "120826",
  "date": "2005-12-14T08:53:43+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "major"
}