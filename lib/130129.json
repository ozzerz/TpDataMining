{
  "comments": [
    "I\u0027ve been running with Eclipse 3.1.2 for a short while now, but I\u0027ve just started getting \"Save failed: null\" errors intermittently when saving an Ant build script. One change I made recently was to untick \"Provide proposals for user defined tasks\" (for performance reasons).\n\nHere\u0027s the stack trace from the log:\n!ENTRY org.eclipse.ui 2 0 2006-03-02 14:55:54.310\n!MESSAGE Save Failed\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.ant.internal.ui.model.AntModel.setDefiningTaskNodeText(AntModel.java:1655)\n    at org.eclipse.ant.internal.ui.model.AntDefiningTaskNode.setLength(AntDefiningTaskNode.java:178)\n    at org.eclipse.ant.internal.ui.model.AntModel.computeLength(AntModel.java:965)\n    at org.eclipse.ant.internal.ui.model.AntModel.setCurrentElementLength(AntModel.java:1051)\n    at org.eclipse.ant.internal.ui.editor.utils.ProjectHelper$ElementHandler.onEndElement(ProjectHelper.java:133)\n    at org.apache.tools.ant.helper.ProjectHelper2$RootHandler.endElement(ProjectHelper2.java:493)\n    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:633)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement(XMLNSDocumentScannerImpl.java:719)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImp$    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:368)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)\n    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)\n    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1242)\n    at org.eclipse.ant.internal.ui.editor.utils.ProjectHelper.parse(ProjectHelper.java:568)\n    at org.eclipse.ant.internal.ui.editor.utils.ProjectHelper.parse(ProjectHelper.java:642)\n    at org.eclipse.ant.internal.ui.model.AntModel.parseDocument(AntModel.java:312)\n    at org.eclipse.ant.internal.ui.model.AntModel.reconcile(AntModel.java:260)\n    at org.eclipse.ant.internal.ui.model.AntModel.updateMarkers(AntModel.java:1539)\n    at org.eclipse.ant.internal.ui.editor.AntEditor.doSave(AntEditor.java:1171)\n    at org.eclipse.ui.internal.SaveableHelper$1.run(SaveableHelper.java:95)\n    at org.eclipse.ui.internal.SaveableHelper$2.run(SaveableHelper.java:116)\n    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:346)\n    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)\n    at org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:624)\n    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n    at org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:621)\n    at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2134)\n    at org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation(SaveableHelper.java:122)\n    at org.eclipse.ui.internal.SaveableHelper.savePart(SaveableHelper.java:100)\n    at org.eclipse.ui.internal.EditorManager.savePart(EditorManager.java:1154)\n    at org.eclipse.ui.internal.WorkbenchPage.savePart(WorkbenchPage.java:2714)\n    at org.eclipse.ui.internal.WorkbenchPage.saveEditor(WorkbenchPage.java:2727)\n    at org.eclipse.ui.internal.SaveAction.run(SaveAction.java:69)\n    at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n    at org.eclipse.jface.commands.ActionHandler.execute(ActionHandler.java:117)\n    at org.eclipse.core.commands.Command.execute(Command.java:311)\n    at org.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:396)\n    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:459)\n    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:781)\n    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:828)\n    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:550)\n    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:493)\n    at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:117)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n    at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1252)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1020)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1045)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1030)\n    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1057)\n    at org.eclipse.swt.widgets.Widget.gtk_key_press_event(Widget.java:621)\n    at org.eclipse.swt.widgets.Control.gtk_key_press_event(Control.java:1964)\n    at org.eclipse.swt.widgets.Composite.gtk_key_press_event(Composite.java:560)\n    at org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1365)\n    at org.eclipse.swt.widgets.Display.windowProc(Display.java:3442)\n    at org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)\n    at org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:4777)\n    at org.eclipse.swt.widgets.Display.eventProc(Display.java:1067)\n    at org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)\n    at org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1158)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2570)\n    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\n    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\n    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n    at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n    at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:585)\n    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n    at org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n    at org.eclipse.core.launcher.Main.run(Main.java:973)\n    at org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Thank you for the bug report. \nDo you have a build file that reproduces the problem to speed testing?",
    "I can reproduce.\nOn the latest code the stack trace translates to an NPE on line 1661.",
    "Test buildfile with \"Provide proposals for\nuser defined tasks\" disabled (note that task does not need to exist):\n\u003cproject default\u003d\"go\"\u003e\n\t\u003ctaskdef name\u003d\"nestedTest\" classname\u003d\"org.eclipse.an.tests.ui.support.tasks.NestElementTask\" /\u003e\n\t\u003ctarget name\u003d\"go\"\u003e\n\t\t\u003cnestedTest\u003e\n\t\t   \u003cnestedelement works\u003d\"\" /\u003e\n\t\t\u003c/nestedTest\u003e\n\t\u003c/target\u003e \n\u003c/project\u003e\n\nTo reproduce:\nOpen editor with preference disabled.\nMake a noop edit in the buildfile.",
    "Changes to AntDefiningTaskNode to not calculate unnecessary information (and lead to the NPE) when the user does not want proposals for user defined tasks for performance reasons etc.",
    "verified"
  ],
  "commentCreationDates": [
    "2006-03-02T14:58:44+01:00",
    "2006-03-02T15:47:50+01:00",
    "2006-03-06T17:18:33+01:00",
    "2006-03-06T17:38:03+01:00",
    "2006-03-06T17:39:12+01:00",
    "2006-03-06T23:52:20+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.setDefiningTaskNodeText",
          "source": "AntModel.java:1655"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntDefiningTaskNode.setLength",
          "source": "AntDefiningTaskNode.java:178"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.computeLength",
          "source": "AntModel.java:965"
        },
        {
          "method": "org.eclipse.ant.internal.ui.model.AntModel.setCurrentElementLength",
          "source": "AntModel.java:1051"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.utils.ProjectHelper$ElementHandler.onEndElement",
          "source": "ProjectHelper.java:133"
        },
        {
          "method": "org.apache.tools.ant.helper.ProjectHelper2$RootHandler.endElement",
          "source": "ProjectHelper2.java:493"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement",
          "source": "AbstractSAXParser.java:633"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement",
          "source": "XMLNSDocumentScannerImpl.java:719"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "130129",
      "date": "2006-03-02T14:58:44+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "130129",
  "bugId": "130129",
  "date": "2006-03-02T14:58:44+01:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}