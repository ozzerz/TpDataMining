{
  "comments": [
    "If there\u0027s a lock preventing parsing a jar file that has an aop.xml definition in it, the AspectJ weaver produces this output (using JDK 1.5.0_06). It\u0027s unfortunate that this read fails though certainly not critical. To reproduce, try opening such a jar file in a tool like 7-zip that locks the file on Windows:\n\n[StandardClassLoader@830122] warning parse definitions failed -- (IOException) Stream closed\nStream closed\njava.io.IOException: Stream closed\n\tat java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)\n\tat java.io.BufferedInputStream.fill(BufferedInputStream.java:189)\n\tat java.io.BufferedInputStream.read(BufferedInputStream.java:235)\n\tat org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read(Unknown Source)\n\tat org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)\n\tat org.apache.xerces.impl.XMLEntityManager.startEntity(Unknown Source)\n\tat org.apache.xerces.impl.XMLEntityManager.startDTDEntity(Unknown Source)\n\tat org.apache.xerces.impl.XMLDTDScannerImpl.setInputSource(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n\tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat org.aspectj.weaver.loadtime.definition.DocumentParser.parse(DocumentParser.java:108)\n\tat org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.parseDefinitions(ClassLoaderWeavingAdaptor.java:212)\n\tat org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.initialize(ClassLoaderWeavingAdaptor.java:133)\n\tat org.aspectj.weaver.loadtime.Aj$ExplicitlyInitializedClassLoaderWeavingAdaptor.initialize(Aj.java:151)\n\tat org.aspectj.weaver.loadtime.Aj$ExplicitlyInitializedClassLoaderWeavingAdaptor.getWeavingAdaptor(Aj.java:156)\n\tat org.aspectj.weaver.loadtime.Aj$WeaverContainer.getWeaver(Aj.java:122)\n\tat org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:73)\n\tat org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:55)\n\tat sun.instrument.TransformerManager.transform(TransformerManager.java:122)\n\tat sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:155)\n\tat java.lang.ClassLoader.defineClass1(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n\tat org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:198)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:386)",
    "Locking the jar file didn\u0027t cause this. However I only get the error in an odd development configuration (in an Eclipse workspace to build AspectJ) so it\u0027s most likely some error in my configuration. I\u0027ll reopen if I can reproduce it and verify it\u0027s a bug. My apologies.",
    "This error is happening if I have the compiled classes for the loadtime module on the classpath in addition to the usual -javaagent option. This issue isn\u0027t very important although it\u0027s surprising to me."
  ],
  "commentCreationDates": [
    "2006-11-29T17:36:55+01:00",
    "2006-11-29T17:43:41+01:00",
    "2006-11-29T17:54:30+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.io.IOException",
      "message": "Stream closed",
      "elements": [
        {
          "method": "java.io.BufferedInputStream.getBufIfOpen",
          "source": "BufferedInputStream.java:145"
        },
        {
          "method": "java.io.BufferedInputStream.fill",
          "source": "BufferedInputStream.java:189"
        },
        {
          "method": "java.io.BufferedInputStream.read",
          "source": "BufferedInputStream.java:235"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityManager.startEntity",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLEntityManager.startDTDEntity",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDTDScannerImpl.setInputSource",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.xerces.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.aspectj.weaver.loadtime.definition.DocumentParser.parse",
          "source": "DocumentParser.java:108"
        },
        {
          "method": "org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.parseDefinitions",
          "source": "ClassLoaderWeavingAdaptor.java:212"
        },
        {
          "method": "org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.initialize",
          "source": "ClassLoaderWeavingAdaptor.java:133"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj$ExplicitlyInitializedClassLoaderWeavingAdaptor.initialize",
          "source": "Aj.java:151"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj$ExplicitlyInitializedClassLoaderWeavingAdaptor.getWeavingAdaptor",
          "source": "Aj.java:156"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj$WeaverContainer.getWeaver",
          "source": "Aj.java:122"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj.preProcess",
          "source": "Aj.java:73"
        },
        {
          "method": "org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform",
          "source": "ClassPreProcessorAgentAdapter.java:55"
        },
        {
          "method": "sun.instrument.TransformerManager.transform",
          "source": "TransformerManager.java:122"
        },
        {
          "method": "sun.instrument.InstrumentationImpl.transform",
          "source": "InstrumentationImpl.java:155"
        },
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:620"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:124"
        },
        {
          "method": "java.net.URLClassLoader.defineClass",
          "source": "URLClassLoader.java:260"
        },
        {
          "method": "java.net.URLClassLoader.access$100",
          "source": "URLClassLoader.java:56"
        },
        {
          "method": "java.net.URLClassLoader$1.run",
          "source": "URLClassLoader.java:195"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.net.URLClassLoader.findClass",
          "source": "URLClassLoader.java:188"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:306"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:251"
        },
        {
          "method": "org.apache.catalina.startup.Bootstrap.init",
          "source": "Bootstrap.java:198"
        },
        {
          "method": "org.apache.catalina.startup.Bootstrap.main",
          "source": "Bootstrap.java:386"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166225",
      "date": "2006-11-29T17:36:55+01:00",
      "product": "AspectJ",
      "component": "LTWeaving",
      "severity": "enhancement"
    }
  ],
  "groupId": "166225",
  "bugId": "166225",
  "date": "2006-11-29T17:36:55+01:00",
  "product": "AspectJ",
  "component": "LTWeaving",
  "severity": "enhancement"
}