{
  "comments": [
    "I get the exception below when using the SWT_AWT bridge from my RCP application. After changing the embeddedFrameClass to one of my own, the subsequent call to new_Frame() fails. \n\nThis is happening because SWT_AWT.new_Frame() calls Class.forName() with the SWT plugin\u0027s classloader which, of course, does not know about my application\u0027s plugin. So, my class cannot be seen. \n\nThe only workaround I can find is to construct a fragment containing my Frame implementation and inject it into the SWT plugin. I shouldn\u0027t have to do this. \n\nI suggest, at minimum, changing the new_Frame() to use the current thread\u0027s context class loader, i.e. \n\nclazz \u003d Class.forName(className, true, Thread.currentThread().getContextClassLoader());\n\nOr perhaps a way to pass in the actual class object for the frame, rather than a name?\n\nNicer still might be some sort of extension point, but I suppose that would complicate things with respect to non-RCP usage of the SWT API. \n\n...\nCaused by: java.lang.ClassNotFoundException: com.sas.rcp.swing.MyFrame\n\tat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:405)\n\tat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:350)\n\tat org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:78)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n\tat java.lang.Class.forName0(Native Method)\n\tat java.lang.Class.forName(Class.java:141)\n\tat org.eclipse.swt.awt.SWT_AWT.new_Frame(SWT_AWT.java:122)\n\t... 38 more",
    "Please could you provide a testcase that shows the problem? I understand what is happening and I want to make sure that \n\n   Class.forName(className, true, Thread.currentThread().getContextClassLoader());\n\nwould fix the problem. \n\n",
    "I\u0027m attaching a rather contrived example that shows the problem. To run, import the plugin into a standard Eclipse environment, and launch with it. Click on Sample Menu -\u003e Sample Action. The action implementation sets embeddedFrameClass and tries to create a frame. ",
    "Created an attachment (id\u003d36504)\nExample plug-in demonstrating the problem\n\n",
    "Created an attachment (id\u003d42285)\nPatch for the problem\n\n"
  ],
  "commentCreationDates": [
    "2005-12-02T19:30:45+01:00",
    "2006-03-16T21:40:43+01:00",
    "2006-03-17T17:20:05+01:00",
    "2006-03-17T17:21:12+01:00",
    "2006-05-23T19:30:41+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassNotFoundException",
      "message": "com.sas.rcp.swing.MyFrame",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:405"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:350"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:78"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:235"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:302"
        },
        {
          "method": "java.lang.Class.forName0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.forName",
          "source": "Class.java:141"
        },
        {
          "method": "org.eclipse.swt.awt.SWT_AWT.new_Frame",
          "source": "SWT_AWT.java:122"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "119086",
      "date": "2005-12-02T19:30:45+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "119086",
  "bugId": "119086",
  "date": "2005-12-02T19:30:45+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}