{
  "comments": [
    "Build ID: 3.2.2\n\nSteps To Reproduce:\nThis is only reproduceable under load, with several reports being simultaneously rendered.  The reports must include a date column.\n\nMore information:\nI\u0027ve attached a partial stack trace below.  DataTypeUtil has a static array of SimpleDateFormat objects that it uses to try to parse date fields coming in from the database.  But the JavaDoc for SimpleDateFormat (or DateFormat, rather) clearly indicates that the object is not threadsafe:\n\nDate formats are not synchronized. It is recommended to create separate format instances for each thread. If multiple threads access a format concurrently, it must be synchronized externally.\n\nI\u0027ve hacked my personal version of DataTypeUtil to store the DateFormat arrays in a ThreadLocal so that they are cached (and thus fast...) but are per-thread.\n\n\n\nINFO   | jvm 1    | 2007/03/13 13:33:29 | SEVERE: An error happened while\nrunning the report. Cause:\nINFO   | jvm 1    | 2007/03/13 13:33:29 | java.lang.NumberFormatException: Not a\nnumber: \nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.math.BigDecimal.bad(BigDecimal.java:3894)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.math.BigDecimal.\u003cinit\u003e(BigDecimal.java:604)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.math.BigDecimal.\u003cinit\u003e(BigDecimal.java:1038)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.DigitList.getBigDecimalICU(DigitList.java:254)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.DecimalFormat.parse(DecimalFormat.java:1523)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.DecimalFormat.parse(DecimalFormat.java:1403)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.SimpleDateFormat.parseInt(SimpleDateFormat.java:1708)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1439)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.SimpleDateFormat.parse(SimpleDateFormat.java:1112)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.DateFormat.parse(DateFormat.java:545)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\ncom.ibm.icu.text.DateFormat.parse(DateFormat.java:486)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.core.data.DataTypeUtil.toDateISO8601(DataTypeUtil.java:990)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.core.data.DataTypeUtil.toDate(DataTypeUtil.java:954)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.core.data.DataTypeUtil.toDate(DataTypeUtil.java:419)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.core.data.DataTypeUtil.convert(DataTypeUtil.java:125)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.data.engine.expression.ExprEvaluateUtil.evaluateExpression(ExprEvaluateUtil.java:67)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.data.engine.impl.BindingColumnsEvalUtil.evaluateValue(BindingColumnsEvalUtil.java:190)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.data.engine.impl.BindingColumnsEvalUtil.getColumnsValue(BindingColumnsEvalUtil.java:147)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.data.engine.impl.ResultIterator.prepareCurrentRow(ResultIterator.java:338)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.data.engine.impl.ResultIterator.next(ResultIterator.java:192)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.data.dte.DteResultSet.next(DteResultSet.java:196)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.executor.ListingElementExecutor.hasNextChild(ListingElementExecutor.java:273)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.hasNextChild(LocalizedReportItemExecutor.java:55)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutChildren(HTMLBlockStackingLM.java:60)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren(HTMLTableLM.java:74)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:159)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:139)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:80)\nINFO   | jvm 1    | 2007/03/13 13:33:29 | \tat\norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:194)",
    "Created an attachment (id\u003d61378)\nPatch to DataTypeUtil.java to make SimpleDateFormats thread local, and thus threadsafe\n\n",
    "Passing over to BIRT",
    "Hi there,\n\nI believe that you\u0027ve used an old version of BIRT.\n\nThe thread-unsafe problem of BIRT\u0026#12288;DataTypeUtil is a known problem and has been fixed in latest BIRT build. You can try any BIRT build after 2.2M4 and found there are no longer problems.\n\nThanks.\nLin"
  ],
  "commentCreationDates": [
    "2007-03-20T14:10:31+01:00",
    "2007-03-20T14:11:22+01:00",
    "2007-03-22T12:39:58+01:00",
    "2007-03-23T03:13:50+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NumberFormatException",
      "message": "Not a number:  INFO   | jvm 1    | 2007/03/13 13:33:29 |",
      "elements": [
        {
          "method": "com.ibm.icu.math.BigDecimal.bad",
          "source": "BigDecimal.java:3894"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "178244",
      "date": "2007-03-20T14:10:31+01:00",
      "product": "BIRT",
      "component": "Data",
      "severity": "normal"
    }
  ],
  "groupId": "178244",
  "bugId": "178244",
  "date": "2007-03-20T14:10:31+01:00",
  "product": "BIRT",
  "component": "Data",
  "severity": "normal"
}