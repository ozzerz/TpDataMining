{
  "comments": [
    "Create a remote project(e.g. jikes) and parse it. Then, close the project and\nshutdown eclipse. A stacktrace is printed in the server. Even though the server\nis restarted successfully (and the client can connect), parsing again would\nnever finish.Need to kill \"server.linux\" and restart it again.\n----------------Here is the stacktrace--------------\nServer Started Successfully\n4030\nServer running on: hack\njava.io.IOException: Connection reset by peer\n        at java.net.SocketOutputStream.socketWrite(Native Method)\n        at java.net.SocketOutputStream.write(SocketOutputStream.java(Compiled\nCode))\n        at java.io.OutputStreamWriter.write(OutputStreamWriter.java(Compiled\nCode))\n        at java.io.BufferedWriter.flushBuffer(BufferedWriter.java(Compiled\nCode))\n        at java.io.BufferedWriter.write(BufferedWriter.java(Compiled Code))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.flushData(XMLgenerator.java:104)\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.endTag(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.endTag(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.generate(XMLgenerator.java:470)\n        at org.eclipse.cdt.dstore.core.util.Sender.sendDocument(Sender.java:110)\n        at\norg.eclipse.cdt.dstore.core.server.ServerUpdateHandler.sendUpdates(ServerUpdateHandler.java(Compiled\nCode))\n        at\norg.eclipse.cdt.dstore.core.model.UpdateHandler.handle(UpdateHandler.java:29)\n        at org.eclipse.cdt.dstore.core.model.Handler.run(Handler.java:89)\njava.io.IOException: Connection reset by peer\njava.lang.NullPointerException\n        at\norg.eclipse.cdt.dstore.core.util.XMLgenerator.flushData(XMLgenerator.java:104)\n        at org.eclipse.cdt.dstore.core.util.Sender.sendDocument(Sender.java:111)\n        at\norg.eclipse.cdt.dstore.core.server.ServerUpdateHandler.removeSenderWith(ServerUpdateHandler.java:120)\n        at\norg.eclipse.cdt.dstore.core.server.ConnectionEstablisher.finished(ConnectionEstablisher.java:116)\n        at\norg.eclipse.cdt.dstore.core.server.ServerReceiver.handleDocument(ServerReceiver.java:39)\n        at\norg.eclipse.cdt.dstore.core.util.Receiver.handleInput(Receiver.java:90)\n        at org.eclipse.cdt.dstore.core.util.Receiver.run(Receiver.java:64)\njava.lang.NullPointerException\njava.lang.OutOfMemoryError\nServer Finished\nServer Started Successfully\n4030\nServer running on: hack",
    "Does this happen if you don\u0027t parse it?  Does it happen if the project is \nsmaller than jikes?  Do you shutdown during parse activity or after?",
    "\u003e\u003eDoes this happen if you don\u0027t parse it?  \nNo. This does not happen if the project is not parsed\n\n\u003e\u003eDoes it happen if the project is smaller than jikes?  \nIt does not happen with small projects(e.g. the sample payroll in\norg.eclipse.cdt.cpp.docs.user/sample/payroll)\n\n\u003e\u003eDo you shutdown during parse activity or after?\nI close the project once I see that the CPU usage in the server is close to\nzero(I assume that the parse has finished). But after closing the project,\nserver does not display \"Server Finished\" and CPU usage in the client goes up to\n100%. Sthutting down eclipse under these conditions would cause the exceptions.\nHowever, If I wait long enough after closing the project(~1 minute), the CPU\nusage in the client finally goes down to zero and the \"Server Finished\" message\nis displayed in the server;then, shutting down eclipse would not cause the\nexceptions. ",
    "Okay, it sounds to me like we\u0027re still processing the parse, but instead of the \nparser doing stuff, the client is receiving a lot of information (XML) across \nthe wire while we try to shutdown.  We tell the client to end and it severs it\u0027s \nconnection before the server has had a chance to finish it\u0027s send.  I thought \nthat the client waits for an exit ACK before severing the connection, but \napparently that isn\u0027t the case.      ",
    "We handle this exception and print the stack trace that you see below.  The \nhandling is used for detecting when a connection is lost so that we gracefully \nterminate.  Although the XML generator didn\u0027t expect to get here in this \nscenario, this should not cause any problems.   I\u0027ve removed the print so that \nthis doesn\u0027t give the appearance of a drastic problem."
  ],
  "commentCreationDates": [
    "2002-03-26T21:13:13+01:00",
    "2002-03-26T21:19:48+01:00",
    "2002-03-26T22:59:11+01:00",
    "2002-03-26T23:09:59+01:00",
    "2002-03-27T16:47:47+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.io.IOException",
      "message": "Connection reset by peer",
      "elements": [
        {
          "method": "java.net.SocketOutputStream.socketWrite",
          "source": "Native Method"
        },
        {
          "method": "java.net.SocketOutputStream.write",
          "source": "SocketOutputStream.java(Compiled Code)"
        },
        {
          "method": "java.io.OutputStreamWriter.write",
          "source": "OutputStreamWriter.java(Compiled Code)"
        },
        {
          "method": "java.io.BufferedWriter.flushBuffer",
          "source": "BufferedWriter.java(Compiled Code)"
        },
        {
          "method": "java.io.BufferedWriter.write",
          "source": "BufferedWriter.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.flushData",
          "source": "XMLgenerator.java:104"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.endTag",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.endTag",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.generate",
          "source": "XMLgenerator.java:470"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.Sender.sendDocument",
          "source": "Sender.java:110"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.server.ServerUpdateHandler.sendUpdates",
          "source": "ServerUpdateHandler.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.model.UpdateHandler.handle",
          "source": "UpdateHandler.java:29"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.model.Handler.run",
          "source": "Handler.java:89"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "12317",
      "date": "2002-03-26T21:13:13+01:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.cdt.dstore.core.util.XMLgenerator.flushData",
          "source": "XMLgenerator.java:104"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.Sender.sendDocument",
          "source": "Sender.java:111"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.server.ServerUpdateHandler.removeSenderWith",
          "source": "ServerUpdateHandler.java:120"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.server.ConnectionEstablisher.finished",
          "source": "ConnectionEstablisher.java:116"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.server.ServerReceiver.handleDocument",
          "source": "ServerReceiver.java:39"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.Receiver.handleInput",
          "source": "Receiver.java:90"
        },
        {
          "method": "org.eclipse.cdt.dstore.core.util.Receiver.run",
          "source": "Receiver.java:64"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "12317",
      "date": "2002-03-26T21:13:13+01:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    }
  ],
  "groupId": "12317",
  "bugId": "12317",
  "date": "2002-03-26T21:13:13+01:00",
  "product": "CDT",
  "component": "cdt-core",
  "severity": "normal"
}