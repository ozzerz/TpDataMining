{
  "comments": [
    "I loaded the WST from the Europa site into I20070606-0010. I then double-clicked on an about.html file in the Packages Explorer in the Java Browsing perspective with resulted in the opening of the HTML editor from WST. The following exception was logged.\n\njava.util.NoSuchElementException\nat java.util.AbstractList$Itr.next(AbstractList.java:442)\nat org.eclipse.jdt.internal.ui.browsing.JavaBrowsingPart.getSingleElementFromSelection(JavaBrowsingPart.java:1078)\nat org.eclipse.jdt.internal.ui.browsing.JavaBrowsingPart.setSelectionFromEditor(JavaBrowsingPart.java:1157)\nat org.eclipse.jdt.internal.ui.browsing.JavaBrowsingPart.selectionChanged(JavaBrowsingPart.java:715)\nat org.eclipse.ui.internal.AbstractSelectionService.firePostSelection(AbstractSelectionService.java:179)\nat org.eclipse.ui.internal.AbstractSelectionService$2.selectionChanged(AbstractSelectionService.java:71)\nat org.eclipse.wst.sse.ui.StructuredTextEditor$6.run(StructuredTextEditor.java:905)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged(StructuredTextEditor.java:903)\nat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged(StructuredTextEditor.java:961)\nat org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged(StructuredTextEditor.java:884)\nat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2546)\nat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2498)\nat org.eclipse.jface.text.TextViewer$5.run(TextViewer.java:2477)\nat org.eclipse.swt.widgets.Display.runTimer(Display.java:3745)\nat org.eclipse.swt.widgets.Display.messageProc(Display.java:2967)\nat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\nat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2264)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3291)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\nat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\nat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:615)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1144)",
    "We have this code sequence:\n\nif (!(selection instanceof IStructuredSelection) || selection.isEmpty())\n  return null;\n\nIterator iter\u003d ((IStructuredSelection)selection).iterator();\nObject firstElement\u003d iter.next();\n\nwhich fails getting the first element. This means that the selection we get from the HTML editor is broken for whatever reason.",
    "It is likely that the weak reference holding our selected structures was garbage collected, and our implementation of isEmpty() isn\u0027t strict enough when this happens.",
    "Raising severity to major, as this makes us a bad workbench citizen.",
    "Could be the cause for bug 174919; not sure yet.",
    "Changed isEmpty() to more pessimistic and from WeakReferences to SoftReferences in StructuredTextEditor.",
    "Verified with 2.0.1RC3-20070919095523.",
    "I think we should reopen this bug since isEmpty() returns the wrong answer in case the caret is in the end of the document. (returns true instead of false).\n\n(this cause wrong behavior in org.eclipse.debug.internal.ui.actions.LaunchShortcutAction at line 90 - disabling all launch shortcuts in case the caret is at the end of the document)"
  ],
  "commentCreationDates": [
    "2007-06-06T20:20:09+02:00",
    "2007-06-07T10:19:49+02:00",
    "2007-06-07T14:04:17+02:00",
    "2007-06-07T14:09:24+02:00",
    "2007-06-07T18:53:17+02:00",
    "2007-09-03T07:47:19+02:00",
    "2007-09-19T19:28:29+02:00",
    "2007-09-25T13:26:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.NoSuchElementException",
      "elements": [
        {
          "method": "java.util.AbstractList$Itr.next",
          "source": "AbstractList.java:442"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.browsing.JavaBrowsingPart.getSingleElementFromSelection",
          "source": "JavaBrowsingPart.java:1078"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.browsing.JavaBrowsingPart.setSelectionFromEditor",
          "source": "JavaBrowsingPart.java:1157"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.browsing.JavaBrowsingPart.selectionChanged",
          "source": "JavaBrowsingPart.java:715"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.firePostSelection",
          "source": "AbstractSelectionService.java:179"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$2.selectionChanged",
          "source": "AbstractSelectionService.java:71"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$6.run",
          "source": "StructuredTextEditor.java:905"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged",
          "source": "StructuredTextEditor.java:903"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged",
          "source": "StructuredTextEditor.java:961"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged",
          "source": "StructuredTextEditor.java:884"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2546"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2498"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$5.run",
          "source": "TextViewer.java:2477"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3745"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2967"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:2264"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3291"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191327",
      "date": "2007-06-06T20:20:09+02:00",
      "product": "Web Tools",
      "component": "wst.html",
      "severity": "major"
    }
  ],
  "groupId": "191327",
  "bugId": "191327",
  "date": "2007-06-06T20:20:09+02:00",
  "product": "Web Tools",
  "component": "wst.html",
  "severity": "major"
}