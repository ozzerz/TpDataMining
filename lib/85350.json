{
  "comments": [
    "i200502150800\n\nGot the following exception running Core UI application startup performance\ntests (the test just exits once the workbench is alive, so it is a very short\nsession). I did not verify the source code, but it seems the runtime plug-in may\nhave already been stopped when the job in question started doing its work.\n\njava.lang.NoClassDefFoundError: org/eclipse/core/runtime/jobs/ILock\n\tat\norg.eclipse.ui.views.markers.internal.TableContentProvider.cancelPendingChanges(TableContentProvider.java:342)\n\tat\norg.eclipse.ui.views.markers.internal.TableView.haltTableUpdates(TableView.java:94)\n\tat\norg.eclipse.ui.views.markers.internal.MarkerView.internalRefresh(MarkerView.java:188)\n\tat org.eclipse.ui.views.markers.internal.MarkerView.access$3(MarkerView.java:181)\n\tat org.eclipse.ui.views.markers.internal.MarkerView$3.run(MarkerView.java:281)\n\tat\norg.eclipse.ui.views.markers.internal.RestartableJob$2.run(RestartableJob.java:85)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)",
    "I am not sure that this is possible as runtime is a prerequiite of this. \nPascal is there a chance runtime got unloaded?",
    "Shutting down eclipse is a cooperative effort where we expect plug-ins to do\ntheir cleanup. If the plug-in that scheduled the job did not unscheduled it on\nshutdown this kind of problem could occur.\n\nHowever I must admit that I\u0027m a bit surprised by the NoClassDefFoundError on\nILock which could mean that the job manager did not stop all the jobs and that\nruntime has been stopped...\nCC\u0027ing John on this last point.",
    "When runtime shuts down, it does the following with respect to jobs:\n\n - Sets a flag preventing any new job being scheduled\n - Throws away all jobs that are sleeping or waiting to run\n - Asks all currently running jobs to cancel (setting the cancel flag on the\nprogress monitor)\n - Discards all references to the currently running jobs.\n\nWe don\u0027t join the running jobs, or kill their threads.  \n\nI think we should at least be logging a warning if jobs are still running at the\nmoment of shutdown.",
    "For what its worth. We also run into this problem when Eclipse terminates. We are attaching a debugger using a plugin. When Eclipse is terminated\nwhile our debugger is still up, visible in the Debug view, we get\n\n    The class \"com.tasking.debug.cdt.core.command.DacuiMsgDeleteLogicalThread\"\n    cannot be loaded because the system is shutting down and the plug-in\n    \"com.tasking.debug.cdt.core\" has already been stopped.\n\nThe debugger is stored in the DebugPlugin, and that plugin terminates the\ndebugger object after our own plugin has been shut down.\n\nOn the other hand, when we try to stop our debugger in the local plugin.stop(), other problems occur, like these 2 exceptions:\n\n--------------------------------------------------------------------------------\njava.lang.NullPointerException\n  at org.eclipse.debug.core.Launch.getLaunchManager(Launch.java:529)\n  at org.eclipse.debug.core.Launch.fireTerminate(Launch.java:424)\n  at org.eclipse.debug.core.Launch.handleDebugEvents(Launch.java:597)\n  at org.eclipse.debug.core.DebugPlugin$EventNotifier.run(DebugPlugin.java:1081)\n  at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n  at org.eclipse.core.runtime.Platform.run(Platform.java:783)\n  at org.eclipse.debug.core.DebugPlugin$EventNotifier.dispatch(DebugPlugin.java:1113)\n  at org.eclipse.debug.core.DebugPlugin$EventDispatchJob.run(DebugPlugin.java:343)\n  at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\n--------------------------------------------------------------------------------\njava.lang.IllegalStateException: Job manager has been shut down.\n  at org.eclipse.core.internal.jobs.JobManager.schedule(JobManager.java:841)\n  at org.eclipse.core.internal.jobs.InternalJob.schedule(InternalJob.java:352)\n  at org.eclipse.core.runtime.jobs.Job.schedule(Job.java:403)\n  at org.eclipse.debug.core.DebugPlugin.setDispatching(DebugPlugin.java:979)\n  at org.eclipse.debug.core.DebugPlugin.access$7(DebugPlugin.java:971)\n  at org.eclipse.debug.core.DebugPlugin$EventNotifier.dispatch(DebugPlugin.java:1117)\n  at org.eclipse.debug.core.DebugPlugin$EventDispatchJob.run(DebugPlugin.java:343)\n  at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n",
    "Marcel the issue you are seeing is a different one with the debugger trying to schedule jobs after shutdown. Please log a bug to Debug.",
    "This job was removed during 3.2 development. I added a further check for a running workbench to it\u0027s replacement to be doubly sure.",
    "Verified by code inspection in 20060113-1200"
  ],
  "commentCreationDates": [
    "2005-02-15T23:12:19+01:00",
    "2005-02-16T12:43:32+01:00",
    "2005-02-16T14:07:57+01:00",
    "2005-02-16T15:25:21+01:00",
    "2005-12-01T12:13:08+01:00",
    "2005-12-01T14:41:39+01:00",
    "2006-02-02T15:50:07+01:00",
    "2006-02-13T19:48:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/core/runtime/jobs/ILock",
      "elements": [
        {
          "method": "org.eclipse.ui.views.markers.internal.TableContentProvider.cancelPendingChanges",
          "source": "TableContentProvider.java:342"
        },
        {
          "method": "org.eclipse.ui.views.markers.internal.TableView.haltTableUpdates",
          "source": "TableView.java:94"
        },
        {
          "method": "org.eclipse.ui.views.markers.internal.MarkerView.internalRefresh",
          "source": "MarkerView.java:188"
        },
        {
          "method": "org.eclipse.ui.views.markers.internal.MarkerView.access$3",
          "source": "MarkerView.java:181"
        },
        {
          "method": "org.eclipse.ui.views.markers.internal.MarkerView$3.run",
          "source": "MarkerView.java:281"
        },
        {
          "method": "org.eclipse.ui.views.markers.internal.RestartableJob$2.run",
          "source": "RestartableJob.java:85"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "85350",
      "date": "2005-02-15T23:12:19+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.debug.core.Launch.getLaunchManager",
          "source": "Launch.java:529"
        },
        {
          "method": "org.eclipse.debug.core.Launch.fireTerminate",
          "source": "Launch.java:424"
        },
        {
          "method": "org.eclipse.debug.core.Launch.handleDebugEvents",
          "source": "Launch.java:597"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin$EventNotifier.run",
          "source": "DebugPlugin.java:1081"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin$EventNotifier.dispatch",
          "source": "DebugPlugin.java:1113"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin$EventDispatchJob.run",
          "source": "DebugPlugin.java:343"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "85350",
      "date": "2005-12-01T12:13:08+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Job manager has been shut down.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.schedule",
          "source": "JobManager.java:841"
        },
        {
          "method": "org.eclipse.core.internal.jobs.InternalJob.schedule",
          "source": "InternalJob.java:352"
        },
        {
          "method": "org.eclipse.core.runtime.jobs.Job.schedule",
          "source": "Job.java:403"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin.setDispatching",
          "source": "DebugPlugin.java:979"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin.access$7",
          "source": "DebugPlugin.java:971"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin$EventNotifier.dispatch",
          "source": "DebugPlugin.java:1117"
        },
        {
          "method": "org.eclipse.debug.core.DebugPlugin$EventDispatchJob.run",
          "source": "DebugPlugin.java:343"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 2,
      "commentIndex": 4,
      "bugId": "85350",
      "date": "2005-12-01T12:13:08+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "85350",
  "bugId": "85350",
  "date": "2005-02-15T23:12:19+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}