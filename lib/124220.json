{
  "comments": [
    "Publishing to WAS 6.0 completes but the (dynamic) web app is installed on the server. There is no evidence that the web app was actually installed. The WAS Admin console does not list it. Nothing was posted to the eclipse error log.\n\nThis is a large web app in a large workspace.\n\nI am using the recent integration build: I200601130122\n\nI believe this is a critical bug for 1.0.1 and will request priority via the mailing list.",
    "Added to Hot List at the request of Jim D\u0027Anjou. Set to P2.",
    "I installed 1.0.1 maintenance build wtp-M200601170000 and confirmed that the problem exists on there as well.",
    "There was no error in previous version. Now I am downloading M200601170000 to find what is wrong. \n\nJim is it same for small web apps? \n(I am usually testing the plugin with basic test web apps)\n\n",
    "I have not tried it on a small app, Sinan. If I have any news to report I will post it.",
    "I created simple dynamic web app with M200601170000. And added it to WebSphere Runtime. When publish finished the web app was listed in WAS administration console.\n(Also I tested the situation with importing mid-size web app).\n\nIt may be because of  WebSphere setup. Because applications are published using IBM\u0027s com.ibm.websphere.ant.tasks.WsAdmin utility:\n\n\u003ctaskdef classpathref\u003d\"toolpath\" name\u003d\"wsadmin\" classname\u003d\"com.ibm.websphere.ant.tasks.WsAdmin\" /\u003e\n\t    \u003cwsadmin  \n\t\t\twashome\u003d\"${was.home}\" \t\t\t\t\n\t\t\tproperties\u003d\"${wasProfile}/properties/wsadmin.properties\" \n\t\t\tcommand\u003d\"$AdminApp install ${project.working.dir}/${module.name}.war {-appname ${module.name} -contextroot  ${module.name} -usedefaultbindings}\" \n\t\t\tfailonerror\u003d\"true\"\u003e\n\t\t\u003c/wsadmin\u003e\n\t    \u003cwsadmin  \n\t\t  washome\u003d\"${was.home}\" \n\t\t  properties\u003d\"${wasProfile}/properties/wsadmin.properties\" \n\t\t  command\u003d\"$AdminControl invoke [$AdminControl queryNames type\u003dApplicationManager,*] startApplication ${module.name}\" \n\t\t  failonerror\u003d\"true\"\u003e\n\t    \u003c/wsadmin\u003e\t\n",
    "\nI created a fresh workspace and tried to publish the same web app. If failed repeatedly with the log error below\n\nI have reopened the bug.\n\nI tried publishing a trivial (empty web app) to WAS and it worked. I could not add dependencies to make it bigger because of bug https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d124729\n\n\nLogged error:\nPublish failed using Ant publisher\n\norg.eclipse.core.runtime.CoreException[0]: java.lang.Exception: Error renaming C:\\ws\\eval10b\\.metadata\\.plugins\\org.eclipse.jst.server.core\\tmp60982.gif to C:\\ws\\eval10b\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.ibm.XXX.wtpserverWeb\\org.eclipse.jst.server.websphere.core\\com.ibm.team.core.repository.wtpserverWeb\\ui\\scripts\\dojo\\src\\widget\\templates\\buttons\\insertunorderedlist.gif\n\tat org.eclipse.jst.server.core.PublishUtil.copyFile(PublishUtil.java:127)\n\tat org.eclipse.jst.server.core.PublishUtil.copyFile(PublishUtil.java:155)\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java:277)\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java:277)\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java:277)\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java:277)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.AbstractModuleAssembler.copyModule(AbstractModuleAssembler.java:126)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.WarModuleAssembler.assemble(WarModuleAssembler.java:28)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.assembleModule(AntPublisher.java:103)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.publish(AntPublisher.java:90)\n\tat org.eclipse.jst.server.generic.core.internal.GenericServerBehaviour.publishModule(GenericServerBehaviour.java:90)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModule(ServerBehaviourDelegate.java:658)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules(ServerBehaviourDelegate.java:738)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:596)\n\tat org.eclipse.wst.server.core.internal.Server.doPublish(Server.java:800)\n\tat org.eclipse.wst.server.core.internal.Server.publish(Server.java:789)\n\tat org.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:145)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n",
    "I can\u0027t create the same problem. Is it possible to send an web application which cause a problem?\nHave you tested the same deployment to another app server (JBoss or WebLogic )?",
    "FYI.  I found that I had to set the Eclipse default JDK to the WebSphere JDK, otherwise starting/stopping/deploying would fail.  Apperently the IBM JDK is close  but not quite 1.4 compatible.  So when it would try to do tasks, they would fail in strange ways.   I tried just setting the debug config for websphere to use the IBM JDK (as an the alternate JRE), but it didnt seem to always stick.  In particular when doing *deploy on server* - on the fly, it seemed to want to use the default JRE.  ",
    "Thanks to the hint from in comment #8 from Bob I have more information that I think goes to the heart of the problem. My WAS web project name is different than the deploy name (in /.settings/.component file)\n\nThe publishing script which creates the WAR file for WAS failed because the folder that it was looking for had the deploy name but the folder that was created had the project name.\n\nHere is the build info:\n\nBUILD FAILED\nC:\\eclipse\\plugins\\org.eclipse.jst.server.websphere.core_1.0.0\\serverdef\\scripts\\websphere.6.x.xml:24: C:\\ws\\eval10\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.xxx.WASServer.app\\org.eclipse.jst.server.websphere.core\\WASServerDeployName not found.\n\ncom.xxx.WASServer.app is the project name and\nWASServerDeployName is the deploy name\n\nThe folder the script at line 24 was trying to Jar was named\ncom.xxx.WASServer.app but the script was looking for folder: WASServerDeployName \n\nThe actual project and deploy names were modified for this report but the issue is the same.\n\nI recall some similar problems reported during my testing of 1.0 candidate code.\n\nI would recommend adding a test case for a web app where the project name and the deploy name differ.\n\nThanks....Jim",
    "For this bug \"project.name\" (PROP_PROJECT_NAME) is added to AntPublisher and It is used in websphere.6.serverdef.\n\nAnd it is versioned with tag v20060127_0840 and released into 1.0.1 and 1.5",
    "I am waiting for a maintenance build to verify.",
    "I tested WAS publishing using this week\u0027s maintenance build: wtp-M200602010238.\nHere is the console output for the publishing failure. Reopening bug. \n\nIf I can find more useful information, I will report it here.\n\nBuildfile: c:\\apollo\\wtp-evalSDK\\eclipse\\plugins\\org.eclipse.jst.server.websphere.core_1.0.0.v20060131b\\serverdef\\scripts\\websphere.6.x.xml\ndeploy.j2ee.web:\n     [echo] Module Working Day  C:/ws/eval10/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/com.ibm.x.wtpserverWeb Project Working Dir\u003dC:/ws/eval10/.metadata/.plugins/org.eclipse.wst.server.core/tmp3 Message Dir\u003dC:/ws/eval10/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/WebServices Module Name WebServices\n      [jar] Building jar: C:\\ws\\eval10\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp3\\WebServices.war\n  [wsadmin] WASX7209I: Connected to process \"server1\" on node danjouNode02 using SOAP connector;  The type of process is: UnManagedProcess\n  [wsadmin] WASX7015E: Exception running command: \"$AdminApp uninstall WebServices\"; exception information:\n  [wsadmin] com.ibm.ws.scripting.ScriptingException: WASX7280E: An application with name \"WebServices\" does not exist.\n  [wsadmin] Java Result: 103\n  [wsadmin] WASX7209I: Connected to process \"server1\" on node danjouNode02 using SOAP connector;  The type of process is: UnManagedProcess\n  [wsadmin] WASX7015E: Exception running command: \"$AdminApp install C:/ws/eval10/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/WebServices.war {-appname WebServices -contextroot  WebServices -usedefaultbindings}\"; exception information:\n  [wsadmin] java.lang.ClassCastException: java.lang.ClassCastException: com.ibm.etools.j2ee.commonarchivecore.impl.ArchiveImpl\n\nBUILD FAILED\nC:\\apollo\\wtp-evalSDK\\eclipse\\plugins\\org.eclipse.jst.server.websphere.core_1.0.0.v20060131b\\serverdef\\scripts\\websphere.6.x.xml:35: Java returned: 103\n\nTotal time: 44 seconds\n",
    "I did some more investigation. A WAR file was created in C:/ws/eval10/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/. The failure is caused when WAS tries to install using the ANT script command in line 35 of the WST publishing script (websphere.6.x.xml). The same error occurs if you try to manually install this WAR file to WAS directly. The problem is that the WAR file is not constructed correctly . Under WEB-INF the /classes directory is missing. All the .class files are in the root of the WAR file instead of /WEB-INF/classes. \n\nI think if this gets corrected, the publish will work.",
    "Sinan, will you be able to fix this problem as per Jim\u0027s diagnosis? I\u0027d like this in 1.0.1. Thx.",
    "It turns out that blocking bug 126291 was also impacting proper publishing to Websphere. I have a workaround resolution to that bug and as a result I was able to successfully publish. I consider this bug fixed now.",
    "Verified",
    "(In reply to comment #16)\n\u003e Verified\n\nHi, I am getting an error similar to what was reported in this bug id. I downloaded the latest lomboz plugin (Feb 2006) with all included dependecies. I am able to start up my IBM Websphere v 6 from within Lomboz but when I try to deploy a very simple dynamic web project (just added an index.jsp to Web Content folder, all else is default), I get the error below. I noticed that my war file does NOT get created in the tmp01 folder. Any ideas would be appreciated.\n\nBuildfile: c:\\eclipse\\plugins\\org.eclipse.jst.server.websphere.core_1.0.0.v20060131b\\serverdef\\scripts\\websphere.6.x.xml\ndeploy.j2ee.web:\n     [echo] Module Working Day  C:/Documents and Settings/dheeraj.asnani/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/TestWeb Project Working Dir\u003dC:/Documents and Settings/dheeraj.asnani/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0 Message Dir\u003dC:/Documents and Settings/dheeraj.asnani/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/TestWeb Module Name TestWeb\n     [echo] Created war file\n  [wsadmin] WASX7209I: Connected to process \"server1\" on node ACCUSH3130F7SNode02 using SOAP connector;  The type of process is: UnManagedProcess\n  [wsadmin] WASX7015E: Exception running command: \"$AdminApp uninstall TestWeb\"; exception information:\n  [wsadmin] com.ibm.ws.scripting.ScriptingException: WASX7280E: An application with name \"TestWeb\" does not exist.\n  [wsadmin] Java Result: 103\n  [wsadmin] WASX7209I: Connected to process \"server1\" on node ACCUSH3130F7SNode02 using SOAP connector;  The type of process is: UnManagedProcess\n  [wsadmin] WASX7015E: Exception running command: \"$AdminApp install C:/Documents and Settings/dheeraj.asnani/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/TestWeb.war {-appname TestWeb -contextroot  TestWeb -usedefaultbindings}\"; exception information:\n  [wsadmin] com.ibm.bsf.BSFException: error while eval\u0027ing Jacl expression:\n  [wsadmin] can\u0027t find accessible method \"install\" with 4 argument(s) for class \"com.ibm.ws.scripting.AdminAppClient\"\n  [wsadmin] while executing\n  [wsadmin] \"$AdminApp install C:/Documents and Settings/dheeraj.asnani/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/TestWeb.war {-appname TestWeb...\"\n\nBUILD FAILED\nC:\\eclipse\\plugins\\org.eclipse.jst.server.websphere.core_1.0.0.v20060131b\\serverdef\\scripts\\websphere.6.x.xml:38: Java returned: 103\n\nTotal time: 47 seconds\n\n",
    "Closing old bugs."
  ],
  "commentCreationDates": [
    "2006-01-17T23:09:45+01:00",
    "2006-01-18T13:29:49+01:00",
    "2006-01-18T18:16:00+01:00",
    "2006-01-19T15:48:31+01:00",
    "2006-01-19T16:38:40+01:00",
    "2006-01-19T20:55:12+01:00",
    "2006-01-20T22:40:15+01:00",
    "2006-01-24T08:05:51+01:00",
    "2006-01-24T12:30:05+01:00",
    "2006-01-24T23:17:52+01:00",
    "2006-01-27T20:53:29+01:00",
    "2006-01-31T23:41:43+01:00",
    "2006-02-02T18:16:43+01:00",
    "2006-02-02T21:16:30+01:00",
    "2006-02-03T14:07:58+01:00",
    "2006-02-03T18:14:34+01:00",
    "2006-02-03T18:15:16+01:00",
    "2006-03-23T18:52:54+01:00",
    "2006-11-21T19:31:21+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Error renaming C:\\ws\\eval10b\\.metadata\\.plugins\\org.eclipse.jst.server.core\\tmp60982.gif to C:\\ws\\eval10b\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.ibm.XXX.wtpserverWeb\\org.eclipse.jst.server.websphere.core\\com.ibm.team.core.repository.wtpserverWeb\\ui\\scripts\\dojo\\src\\widget\\templates\\buttons\\insertunorderedlist.gif",
      "elements": [
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.copyFile",
          "source": "PublishUtil.java:127"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.copyFile",
          "source": "PublishUtil.java:155"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java:277"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java:277"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java:277"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java:277"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AbstractModuleAssembler.copyModule",
          "source": "AbstractModuleAssembler.java:126"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.WarModuleAssembler.assemble",
          "source": "WarModuleAssembler.java:28"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.assembleModule",
          "source": "AntPublisher.java:103"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.publish",
          "source": "AntPublisher.java:90"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.GenericServerBehaviour.publishModule",
          "source": "GenericServerBehaviour.java:90"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModule",
          "source": "ServerBehaviourDelegate.java:658"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules",
          "source": "ServerBehaviourDelegate.java:738"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish",
          "source": "ServerBehaviourDelegate.java:596"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:800"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:789"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 6,
      "bugId": "124220",
      "date": "2006-01-20T22:40:15+01:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "critical"
    }
  ],
  "groupId": "124220",
  "bugId": "124220",
  "date": "2006-01-17T23:09:45+01:00",
  "product": "Web Tools",
  "component": "jst.server",
  "severity": "critical"
}