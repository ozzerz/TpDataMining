{
  "comments": [
    "Currently we test equality for \n\n  @Override\n  public boolean equals(Object object)\n  {\n    return xmlGregorianCalendar.equals(object);\n  }\n\nbut that produces a failure like this on the Sun JDK\n\norg.eclipse.emf.ecore.xml.type.internal.XMLCalendar\n\njava.lang.ClassCastException: org.eclipse.emf.ecore.xml.type.internal.XMLCalendar\nat com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.compare(XMLGregorianCalendarImpl.java:1404)\nat com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.equals(XMLGregorianCalendarImpl.java:1641)\nat org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.equals(XMLCalendar.java:224)\n\nThis implementation will avoid that:\n\n  public boolean equals(Object object)\n  {\n    return \n      object instanceof XMLCalendar ? \n         xmlGregorianCalendar.equals(((XMLCalendar)object).xmlGregorianCalendar) :\n         object instanceof XMLGregorianCalendar \u0026\u0026 xmlGregorianCalendar.equals(object);\n  }\n\nbut will still failure if equals is called directly on an XMLGegorianCalendar implemented by the JDK with an XMLCalendar instance provided by us.  It\u0027s of course never valid to throw an exception during an equals test and to implement the comparison properly, it should be comparing all the \"fields\" while assuming nothing about the underlying implementation class.",
    "The change is committed to CVS.",
    "Fixed in I200706061821."
  ],
  "commentCreationDates": [
    "2007-06-06T13:22:33+02:00",
    "2007-06-06T14:19:33+02:00",
    "2007-06-07T09:18:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.emf.ecore.xml.type.internal.XMLCalendar",
      "elements": [
        {
          "method": "com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.compare",
          "source": "XMLGregorianCalendarImpl.java:1404"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.equals",
          "source": "XMLGregorianCalendarImpl.java:1641"
        },
        {
          "method": "org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.equals",
          "source": "XMLCalendar.java:224"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191219",
      "date": "2007-06-06T13:22:33+02:00",
      "product": "EMF",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "191219",
  "bugId": "191219",
  "date": "2007-06-06T13:22:33+02:00",
  "product": "EMF",
  "component": "Core",
  "severity": "normal"
}