{
  "comments": [
    "Build ID: 3.2.2.r322_v20070119-RQghndJN8IM0MsK\n\nSteps To Reproduce:\nUsing UML2 Tooling sometimes references to none existing elements get saved using -1 as element fragment (that is a bug too - but I havn\u0027t really understand when or why that happens). Reading such file causes an ArrayIndexOutOfBoundsException in following method:\n\norg.eclipse.emf.ecore.resource.impl.ResourceImpl:\n  protected EObject getEObjectForURIFragmentRootSegment(String uriFragmentRootSegment)\n  {\n    int position \u003d  0;\n    if (uriFragmentRootSegment.length() \u003e 0)\n    {\n      try\n      {\n        position \u003d Integer.parseInt(uriFragmentRootSegment);\n      }\n      catch (NumberFormatException exception)\n      {\n        throw new WrappedException(exception);\n      }\n    }\n\n    List contents \u003d getContents();\n    if (position \u003c contents.size())\n    {\n      return (EObject)contents.get(position);\n    }\n    else\n    {\n      return null;\n    }\n  }\n\nThe exception gets thrown in case the position can be read but is actually illegal (negative). \nThe non-wrapped exception causes an interruption of the reading process. All other - even severe - exceptions get added to the errors-list - this one not.\n\n\nMore information:",
    "Stack Trace:\n\n!ENTRY com.intershop.enfinity.studio.gmf 4 -1 2007-06-07 10:11:51.046\n!MESSAGE An exception occured: -1\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException: -1\n\tat org.eclipse.emf.common.util.BasicEList.get(BasicEList.java:514)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObjectForURIFragmentRootSegment(ResourceImpl.java:642)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObject(ResourceImpl.java:692)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObject(ResourceImpl.java:671)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.handleForwardReferences(XMLHandler.java:989)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLHandler.endDocument(XMLHandler.java:1071)\n\tat org.eclipse.uml2.uml.internal.resource.UMLHandler.endDocument(UMLHandler.java:43)\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endDocument(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.endEntity(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLEntityManager.endEntity(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.skipSpaces(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$TrailingMiscDispatcher.dispatch(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat javax.xml.parsers.SAXParser.parse(Unknown Source)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java:180)\n\tat org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourceImpl.java:179)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1094)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:900)\n\tat com.intershop.enfinity.studio.gmf.editor.ResourceChangeEditorSupport.handleChangedResources(ResourceChangeEditorSupport.java:95)\n\tat com.intershop.enfinity.studio.gmf.editor.ResourceChangeEditorSupport.partActivated(ResourceChangeEditorSupport.java:72)\n\tat com.intershop.enfinity.studio.gmf.editor.EObjectEditorModel.partActivated(EObjectEditorModel.java:367)\n\tat com.intershop.enfinity.studio.gmf.editor.EObjectEditorModel$1.partActivated(EObjectEditorModel.java:146)\n\tat org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:72)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)\n\tat org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:70)\n\tat org.eclipse.ui.internal.PartService.firePartActivated(PartService.java:73)\n\tat org.eclipse.ui.internal.PartService.setActivePart(PartService.java:171)\n\tat org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(WorkbenchPagePartList.java:56)\n\tat org.eclipse.ui.internal.PartList.setActivePart(PartList.java:126)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3207)\n\tat org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:2750)\n\tat org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:256)\n\tat org.eclipse.ui.internal.EditorPane.requestActivation(EditorPane.java:89)\n\tat org.eclipse.ui.internal.PartPane.setFocus(PartPane.java:302)\n\tat org.eclipse.ui.internal.EditorPane.setFocus(EditorPane.java:117)\n\tat org.eclipse.ui.internal.PartStack.presentationSelectionChanged(PartStack.java:798)\n\tat org.eclipse.ui.internal.PartStack.access$1(PartStack.java:781)\n\tat org.eclipse.ui.internal.PartStack$1.selectPart(PartStack.java:123)\n\tat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:126)\n\tat org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)\n\tat org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)\n\tat org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)\n\tat org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$2.handleEvent(DefaultTabFolder.java:84)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:952)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:937)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:709)\n\tat org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3171)\n\tat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1953)\n\tat org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:288)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1930)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1894)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:422)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)\n",
    "This should be fixed already in 2.3. Significant API changes were required to fix this so fixing in in 2.2 is not a good option.  The referenced duplicate bugzilla shows code to work around the issue, which, in the absence of a test case, I will assume is caused by the same problem.\n\n*** This bug has been marked as a duplicate of bug 153577 ***"
  ],
  "commentCreationDates": [
    "2007-06-07T10:21:13+02:00",
    "2007-06-07T10:23:28+02:00",
    "2007-06-07T13:05:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-1",
      "elements": [
        {
          "method": "org.eclipse.emf.common.util.BasicEList.get",
          "source": "BasicEList.java:514"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObjectForURIFragmentRootSegment",
          "source": "ResourceImpl.java:642"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObject",
          "source": "ResourceImpl.java:692"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObject",
          "source": "ResourceImpl.java:671"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.handleForwardReferences",
          "source": "XMLHandler.java:989"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLHandler.endDocument",
          "source": "XMLHandler.java:1071"
        },
        {
          "method": "org.eclipse.uml2.uml.internal.resource.UMLHandler.endDocument",
          "source": "UMLHandler.java:43"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endDocument",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.endEntity",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLEntityManager.endEntity",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.skipSpaces",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$TrailingMiscDispatcher.dispatch",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.XMLParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "javax.xml.parsers.SAXParser.parse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load",
          "source": "XMLLoadImpl.java:180"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad",
          "source": "XMLResourceImpl.java:179"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1094"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:900"
        },
        {
          "method": "com.intershop.enfinity.studio.gmf.editor.ResourceChangeEditorSupport.handleChangedResources",
          "source": "ResourceChangeEditorSupport.java:95"
        },
        {
          "method": "com.intershop.enfinity.studio.gmf.editor.ResourceChangeEditorSupport.partActivated",
          "source": "ResourceChangeEditorSupport.java:72"
        },
        {
          "method": "com.intershop.enfinity.studio.gmf.editor.EObjectEditorModel.partActivated",
          "source": "EObjectEditorModel.java:367"
        },
        {
          "method": "com.intershop.enfinity.studio.gmf.editor.EObjectEditorModel$1.partActivated",
          "source": "EObjectEditorModel.java:146"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList$1.run",
          "source": "PartListenerList.java:72"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList.fireEvent",
          "source": "PartListenerList.java:57"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList.firePartActivated",
          "source": "PartListenerList.java:70"
        },
        {
          "method": "org.eclipse.ui.internal.PartService.firePartActivated",
          "source": "PartService.java:73"
        },
        {
          "method": "org.eclipse.ui.internal.PartService.setActivePart",
          "source": "PartService.java:171"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged",
          "source": "WorkbenchPagePartList.java:56"
        },
        {
          "method": "org.eclipse.ui.internal.PartList.setActivePart",
          "source": "PartList.java:126"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:3207"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.requestActivation",
          "source": "WorkbenchPage.java:2750"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.requestActivation",
          "source": "PartPane.java:256"
        },
        {
          "method": "org.eclipse.ui.internal.EditorPane.requestActivation",
          "source": "EditorPane.java:89"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.setFocus",
          "source": "PartPane.java:302"
        },
        {
          "method": "org.eclipse.ui.internal.EditorPane.setFocus",
          "source": "EditorPane.java:117"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.presentationSelectionChanged",
          "source": "PartStack.java:798"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.access$1",
          "source": "PartStack.java:781"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack$1.selectPart",
          "source": "PartStack.java:123"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent",
          "source": "TabbedStackPresentation.java:126"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:267"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:276"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1",
          "source": "DefaultTabFolder.java:1"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$2.handleEvent",
          "source": "DefaultTabFolder.java:84"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:952"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:937"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:709"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder.setSelection",
          "source": "CTabFolder.java:3171"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder.onMouse",
          "source": "CTabFolder.java:1953"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder$1.handleEvent",
          "source": "CTabFolder.java:288"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1930"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1894"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:422"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "191431",
      "duplicateId": "153577",
      "date": "2007-06-07T10:23:28+02:00",
      "product": "EMF",
      "component": "XML/XMI",
      "severity": "normal"
    }
  ],
  "groupId": "153577",
  "bugId": "191431",
  "duplicateId": "153577",
  "date": "2007-06-07T10:21:13+02:00",
  "product": "EMF",
  "component": "XML/XMI",
  "severity": "normal"
}