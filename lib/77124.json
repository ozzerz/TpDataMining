{
  "comments": [
    "This actually occurs in WSAD 5.1.2, which uses Eclipse 2.1.3.  I\u0027m using Barry\nSearle\u0027s antextras.jar tasks, from his Oct 7th technology preview release.  I\u0027ve\ninstalled the 5 updates available for WSAD 5.1.2 as of 10/27/04.\n\nI have a workspace with a simple Java application that contains a simple JUnit\ntest, and a simple web application (it has nothing but a single .jsp in it that\ndoesn\u0027t have anything but the default generated contents), and a simple project\nthat contains an Ant build.xml script.\n\nI use some of Barry Searle\u0027s antextras tasks to import projects into the \nworkspace, build the workspace, and export an ear file.\n\nHere\u0027s the script:\n\n--------\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"iso-8859-1\" ?\u003e\n\u003cproject name\u003d\"WSADAntTest\" default\u003d\"test\" basedir\u003d\".\"\u003e\n    \u003ctarget name\u003d\"init\"\u003e \n        \u003ctstamp/\u003e\n    \u003c/target\u003e\n    \u003ctarget name\u003d\"prepareWorkspace\" depends\u003d\"init\"\u003e\n    \t\u003cworkspacePreferenceSet \n    \t  preferenceType\u003d\"classpathVariable\" \n    \t  preferencename\u003d\"JUNIT_JAR\" \n          preferencevalue\u003d\"C:/Program Files/IBM/WebSphere Studio/Application\nDeveloper/v5.1.2/eclipse/plugins/org.junit_3.8.1/junit.jar\"\n          overwrite\u003d\"true\"\n          failonerror\u003d\"true\" /\u003e\n    \u003c/target\u003e\n    \u003ctarget name\u003d\"importProjects\" depends\u003d\"prepareWorkspace\"\u003e\n  \t    \u003cprojectSetImport \n  \t        ProjectSetFileName\u003d\"${basedir}/projectSet.psf\" \n        \tpropertyImportedProjectNames\u003d\"ImportedProjectNames\" \n        \tfailonerror\u003d\"true\"  \n        \tautoDeleteExistingProjects\u003d\"false\" \n        \tUSERID\u003d\"${USERID}\" PASSWORD\u003d\"${PASSWORD}\" /\u003e\n    \u003c/target\u003e\n    \u003ctarget name\u003d\"workspaceBuild\" depends\u003d\"importProjects\"\u003e\n        \u003cworkspaceBuild \n          BuildType\u003d\"full\"\n          debugcompilation\u003d\"false\" \n          failonerror\u003d\"true\" \n          quiet\u003d\"false\" \n          showerrors\u003d\"true\" \n          summary\u003d\"true\"\n          severitylevel\u003d\"WARNING\"\n          propertycountname\u003d\"ErrorCount\"\n          propertymessagesname\u003d\"ErrorMessages\"  /\u003e\n    \u003c/target\u003e\n    \u003ctarget name\u003d\"package\" depends\u003d\"workspaceBuild\"\u003e\n\t\t\u003cjar\n\t\t  jarfile\u003d\"${basedir}/../JavaProject.jar\" \n\t\t  basedir\u003d\"${basedir}/../JavaProject\" /\u003e\n        \u003cearExport EARProjectName\u003d\"WebProjectEAR\"\nEARExportFile\u003d\"${basedir}/../WebProject.ear\" \n          ExportSource\u003d\"false\" overwrite\u003d\"true\" /\u003e\n    \u003c/target\u003e\n    \u003ctarget name\u003d\"test\" depends\u003d\"package\"\u003e\n\t\t\u003cjunit fork\u003d\"yes\" haltonfailure\u003d\"yes\"\u003e\n\t\t\t\u003cformatter type\u003d\"plain\" usefile\u003d\"no\" /\u003e\n\t\t\t\u003ctest name\u003d\"org.slco.wsadanttest.TestClassTest\" /\u003e\n\t\t\t\u003cclasspath\u003e\n\t\t\t\t\u003cfileset dir\u003d\"${basedir}/..\"\u003e\n\t\t\t\t\t\u003cinclude name\u003d\"**/*.jar\" /\u003e\n\t\t\t\t\u003c/fileset\u003e\n\t\t\t\u003c/classpath\u003e\n\t\t\u003c/junit\u003e\n    \u003c/target\u003e\n\u003c/project\u003e\n--------\n\nIf I right-click on the script and select \"Run Ant...\" to run the \"test\" target,\nit fails in the junit task with the exception:\n\n--------\ntest:\n       [junit] java.lang.NoClassDefFoundError: com/ibm/crypto/provider/IBMJCA\n(wrong name: org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner)\n       [junit] \tat java.lang.ClassLoader.defineClass0(Native Method)\n       [junit] \tat java.lang.ClassLoader.defineClass(ClassLoader.java:703)\n       [junit] \tat\njava.security.SecureClassLoader.defineClass(SecureClassLoader.java:133)\n       [junit] \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:320)\n       [junit] \tat java.net.URLClassLoader.access$400(URLClassLoader.java:93)\n       [junit] \tat java.net.URLClassLoader$ClassFinder.run(URLClassLoader.java:678)\n       [junit] \tat java.security.AccessController.doPrivileged(Native Method)\n       [junit] \tat java.net.URLClassLoader.findClass(URLClassLoader.java:239)\n       [junit] \tat java.lang.ClassLoader.loadClass(ClassLoader.java:516)\n       [junit] \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:460)\n       [junit] \tat java.lang.ClassLoader.loadClass(ClassLoader.java:448)\n       [junit] Exception in thread \"main\" \n       [junit] BUILD FAILED: file:C:/Documents and Settings/tlacy/My\nDocuments/CVS_WORK/AutomatedBuild/Ant/build.xml:52: Test\norg.slco.wsadanttest.TestClassTest failed\n--------\n\nIf I run the script under WSAD headless (using Barry Searle\u0027s runant.bat), the\nscript works fine.  If I change the \"fork\" attribute in the junit task to \"no\",\nit works fine.\n\nI *think* it was working fine before I added the web application (when it just\nhad the java application and the junit test.  But I couldn\u0027t say for sure.",
    "Thank you for taking the time to log a bug report.\nTwo notes: This is likely to be user configuration error and not a bug in \nEclipse. I know little about the extensions etc provided in WSAD. Have you \ntried asking on a WSAD mailing list?\n\nIF you are not forking you are running in the same VM as Eclipse. When forked \nthe classpath for the Junit test appears to not be correct. I would run the \nbuild headless with -debug and compare to running it in Eclipse with -debug to \ncompare the classpaths and correct as necessary. \nAs well check what classpath items are set in the runant.bat?\n",
    "Please reopen if you have any details related to an Eclipse Ant integration \nbug. Thanks."
  ],
  "commentCreationDates": [
    "2004-10-27T17:38:15+02:00",
    "2004-10-27T18:38:21+02:00",
    "2004-11-29T16:22:12+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "com/ibm/crypto/provider/IBMJCA (wrong name: org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner)        [junit]",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass0",
          "source": "Native Method"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "77124",
      "date": "2004-10-27T17:38:15+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "77124",
  "bugId": "77124",
  "date": "2004-10-27T17:38:15+02:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}