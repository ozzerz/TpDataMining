{
  "comments": [
    "Using today\u0027s integration build, I get a NPE restarting an existing workspace.\nThe workspace can be restarted without a problem using I20031105 build.\njava.lang.reflect.InvocationTargetException\n\tat\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:861)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:299)\n\tat org.eclipse.core.launcher.Main.run(Main.java:767)\n\tat org.eclipse.core.launcher.Main.main(Main.java:601)\nCaused by: java.lang.NullPointerException\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.openWelcomeEditors(IDEWorkbenchAdvisor.java:704)\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.postStartup(IDEWorkbenchAdvisor.java:260)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1362)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:234)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47)\n\tat\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:858)\n\t... 8 more",
    "Trying to open a new workspace leads the same issue.\n!SESSION ----------------------------------------------------------------------\n!ENTRY org.eclipse.core.launcher 4 0 nov. 18, 2003 14:19:55.203\n!MESSAGE Exception launching the Eclipse Platform:\n!STACK\njava.lang.reflect.InvocationTargetException\n\tat\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:861)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:299)\n\tat org.eclipse.core.launcher.Main.run(Main.java:767)\n\tat org.eclipse.core.launcher.Main.main(Main.java:601)\nCaused by: java.lang.NullPointerException\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.openWelcomeEditors(IDEWorkbenchAdvisor.java:704)\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.postStartup(IDEWorkbenchAdvisor.java:260)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1362)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:234)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47)\n\tat\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:858)\n\t... 8 more\n\n\nMy command line is:\nD:\\eclipse1118\\eclipse\\eclipse.exe -os win32 -ws win32 -arch x86 -vm\nD:\\jdks\\jdk1.4.1_05\\bin\\java.exe  -noupdate -data D:\\workspaces\\test1118\n-showlocation -debug -vmargs -Xmx312M",
    "There seems to be two problems here.\n\n1. The platform configuration info has no features in it.  It generates a fake \none for the primary feature mentioned in the welcome.ini, but it has a null \nversion id.\n\n2. In IDEWorkbenchPlugin.readFeatureInfos(), we skip any features that have a \nnull version id or null plugin id, so our list of AboutInfos is empty and \ngetPrimaryInfo() returns null.  IDEWorkbenchAdvisor.openWelcomeEditors() does \nnot check for this.\n\nDejan or Wassim, do you know what\u0027s going on with (1)?\n",
    "I just tried I20031118 on a new workspace, and it comes up OK.",
    "I saw this earlier on Tod\u0027s machine running N20031118, when running the target.\n",
    "In Tod\u0027s setup, we were creating a new workspace.\n\nUsing I20031118, I am able to open my old workspace as well (although the \nWelcome page appears again due to the new preference check).\n",
    "Nick, does anything look suspicious in my command line? I tried several times \nand it is always failing the same way.",
    "The command above has \u0027-noupdate\u0027. This command should not be used because it \ndisables the reconciler, so it cannot compute features. Why are you using -\nnoupdate in your context?",
    "Here is the contents of my platform.cfg file in the .config directory once it\nfailed.\n\n# Tue Nov 18 15:31:27 EST 2003\nversion\u003d2.1\n\nstamp\u003d1546122953\nstamp.features\u003d733172825\nstamp.plugins\u003d2006229648\n\nfeature.default.id\u003dorg.eclipse.platform\n\nfeature.0.id\u003dorg.eclipse.platform\nfeature.0.primary\u003dtrue\nfeature.0.application\u003dorg.eclipse.ui.ide.workbench\n\nsite.0.url\u003dplatform:/base/\nsite.0.stamp\u003d1277119700\nsite.0.stamp.features\u003d733172825\nsite.0.stamp.plugins\u003d2006229648\nsite.0.updateable\u003dtrue\nsite.0.policy\u003dUSER-EXCLUDE\neof\u003deof\n",
    "We don\u0027t put state in the workspace any more, so old or new workspace should \nnot matter. What matters is the \u0027.config\u0027 directory in the install location \n(eclipse). It contains the state and it is initially created by full \nreconciliation. If you use \u0027-noupdate\u0027, you are blocking the reconciler from \nrunning, and it cannot find out what features are installed.",
    "The first time I got it I had -noupdate on the command line and this created the\nplatform.cfg file that I pasted before. Once the boggus platform.cfg file is\ncreated, all subsequent lanches will fail with the NPE.\nRemoving -noupdate after deleting the .config directory fixed it.\nIf the tests are failing, it means that they are using this -noupdate option\nsomehow.",
    "I didn\u0027t change my command line for months. So something changed lately related \nto this -noupdate option.",
    "This option is internal (check the Eclipse Help - not officially listed in \nthe \u0027Run Eclipse doc). It was used for rare cases where reconciliation was not \nneeded, and for driving Eclipse by PDE directly. I also think that -noupdate \nwas used by MacOS team until they got the real native launcher up and running \n(because now they can react to return code 23 that means that Eclipse needs to \nbe restarted).\n\nGenerally, you should not run Eclipse with -noupdate from the command line. I \nthink that if \u0027-noupdate\u0027 is present but there is no .config, we will \nreconcile and create it, but if there is .config, we will not test if it is \nbogus/out of date. Otherwise, we would notice that the state in .config is out \nof whack with the reality (i.e. features in the file system) and reconciler \nwould kick in.\n\nSince M4 (I think) state is not in the workspace so old/new workspace issues \ndo not apply any more. Every time you remove old and install a new driver, you \nwipe out the state and we create a fresh state again (as we should, because \nupdate config is now linked with the product, not with your data).",
    "If -noupdate is present and there is no .config, it doesn\u0027t work. You will get \nthe NPE.",
    "Ack. I was wrong then - it simply turns the reconciler off at all times.\n\nBottom line: -noupdate was an internal arg used to solve transient issues with \nEclipse startup in special scenarios. It is not a supported and documented \nargument, and it can lead to problems because it disables the normal startup \nhandshake between Eclipse and Update Core. It should not be used to start \nEclipse in normal scenarios.\n\nAs you figured out yourself, you can recover by removing the method from the \ncommand line and deleting .config so that the correct one can be recreated.",
    "Added a null check to IDEWorkbenchAdvisor.openWelcomeEditors() and a couple of \nother places.\n\nNote that many of the test suites in I20031118 failed due to this, so they must \nbe passing -noupdate.  I\u0027ve filed bug 46881 for this issue.\n\n",
    "And by \u0027method\u0027 I meant \u0027argument\u0027 :-).",
    "I get the same problem and I don\u0027t use the -noupdate flag.",
    "What are your command line args?\nIf you delete the .config directory in your install, does it work (copy it \nfirst so you can paste it here if needed)?\n",
    "I use launch with: ./eclipse -vm $JRE -debug -dev bin -data $TARGET_DIR -vmargs $VMARGS\n\nDeleting the .config directory has no effect.",
    "Do you have access to the directory where eclipse is installed? If we cannot \nwrite there, we will go to user home to create .config directory.",
    "Yep, I have full access to the Eclipse install dir. The following is the platform.cfg file that\u0027s written:\n\n# Tue Nov 18 14:55:43 PST 2003\nversion\u003d2.1\n \nstamp\u003d-1065994517091\nstamp.features\u003d1357080369\nstamp.plugins\u003d-1066810350932\n \nfeature.default.id\u003dorg.eclipse.platform\n \nfeature.0.id\u003dorg.eclipse.platform\nfeature.0.primary\u003dtrue\nfeature.0.application\u003dorg.eclipse.ui.ide.workbench\n \nsite.0.url\u003dplatform:/base/\nsite.0.stamp\u003d1066848417323\nsite.0.stamp.features\u003d1357080369\nsite.0.stamp.plugins\u003d-1066810350932\nsite.0.updateable\u003dtrue\nsite.0.policy\u003dUSER-EXCLUDE\neof\u003deof\n",
    "Is there a problem with features in this e-build? Maybe the reconciler chokes \non feature manifests?",
    "Downloaded 1118 - looks good. Open \u0027Help\u003eSoftware Updates\u003eManage \nConfiguration...\u0027 - all the features show up correctly.",
    "Dejan, what effect does -dev bin have on the reconciler?\n\nJared, do you get the problem when creating a new workspace as well, or just \nwhen opening a new workspace?\nDoes the problem still occur if you delete the .config dir and run without -\ndev bin?\n\n",
    "-dev bin is a class loading statement that allows plug-in classes to be in \nthe \u0027bin\u0027 directory in addition to the listed libraries. Reconciliation \nhappens before plug-in registry loads plug-in information, so I don\u0027t think it \nmatters.\n\nNote that Update team didn\u0027t touch Update code for a while (we played in the \nbranch), so something happened in the last week that made startup sequence \nunhappy.",
    "I concur with this. Something has been changed in the last week. Before I could \nstart my workspaces using -noupdate. See also bug 46954. It might be related.",
    "To clarify, the NPE is in UI code and was not getting hit before.  It is \ngetting hit now due to a change in UI code.  This is fixed in I20031119.\n\nHowever, I\u0027m still trying to understand Jared\u0027s case.  I thought -dev bin had \nan effect on the reconciler, e.g. giving you a free -noupdate.\nI seem to recall being told that if I used -dev bin I also had to specify -\nupdate.\n",
    "Bing - that\u0027s it. Using \u0027-dev\u0027 gives you free \u0027-noupdate\u0027 because the \nassumption is that -dev\u0027 is only used for selfhosting. Once you do that, your \nfeature information is useless. ",
    "If you must use -dev, add -update to your command line. According to \nPlatformConfiguration.java:\n\n//we have detected feature changes ... see if we need to reconcile\n\tboolean update \u003d !cmdNoUpdate || cmdUpdate;\n\ne.g. in case that both -noupdate and -update are found, -update is assumed."
  ],
  "commentCreationDates": [
    "2003-11-18T19:09:53+01:00",
    "2003-11-18T19:22:29+01:00",
    "2003-11-18T19:43:37+01:00",
    "2003-11-18T19:49:41+01:00",
    "2003-11-18T19:50:12+01:00",
    "2003-11-18T20:01:55+01:00",
    "2003-11-18T20:17:33+01:00",
    "2003-11-18T20:29:21+01:00",
    "2003-11-18T20:33:48+01:00",
    "2003-11-18T20:36:48+01:00",
    "2003-11-18T20:38:08+01:00",
    "2003-11-18T20:39:32+01:00",
    "2003-11-18T20:46:27+01:00",
    "2003-11-18T20:53:11+01:00",
    "2003-11-18T20:58:41+01:00",
    "2003-11-18T21:08:51+01:00",
    "2003-11-18T21:09:22+01:00",
    "2003-11-18T21:39:46+01:00",
    "2003-11-18T22:08:19+01:00",
    "2003-11-18T22:55:31+01:00",
    "2003-11-18T23:07:34+01:00",
    "2003-11-18T23:18:29+01:00",
    "2003-11-18T23:31:59+01:00",
    "2003-11-18T23:33:48+01:00",
    "2003-11-19T03:09:13+01:00",
    "2003-11-19T14:47:26+01:00",
    "2003-11-19T14:53:06+01:00",
    "2003-11-19T15:41:39+01:00",
    "2003-11-19T15:46:22+01:00",
    "2003-11-19T16:23:01+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:861"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:299"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:767"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:601"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.openWelcomeEditors",
            "source": "IDEWorkbenchAdvisor.java:704"
          },
          {
            "method": "org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.postStartup",
            "source": "IDEWorkbenchAdvisor.java:260"
          },
          {
            "method": "org.eclipse.ui.internal.Workbench.runUI",
            "source": "Workbench.java:1362"
          },
          {
            "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
            "source": "Workbench.java:234"
          },
          {
            "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
            "source": "PlatformUI.java:139"
          },
          {
            "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
            "source": "IDEApplication.java:47"
          },
          {
            "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
            "source": "InternalBootLoader.java:858"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "46860",
      "date": "2003-11-18T19:09:53+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:861"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:299"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:767"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:601"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.openWelcomeEditors",
            "source": "IDEWorkbenchAdvisor.java:704"
          },
          {
            "method": "org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.postStartup",
            "source": "IDEWorkbenchAdvisor.java:260"
          },
          {
            "method": "org.eclipse.ui.internal.Workbench.runUI",
            "source": "Workbench.java:1362"
          },
          {
            "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
            "source": "Workbench.java:234"
          },
          {
            "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
            "source": "PlatformUI.java:139"
          },
          {
            "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
            "source": "IDEApplication.java:47"
          },
          {
            "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
            "source": "InternalBootLoader.java:858"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 1,
      "bugId": "46860",
      "date": "2003-11-18T19:22:29+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "blocker"
    }
  ],
  "groupId": "46860",
  "bugId": "46860",
  "date": "2003-11-18T19:09:53+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "blocker"
}