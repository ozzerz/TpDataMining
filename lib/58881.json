{
  "comments": [
    "Eclipse Release 2.1.3 (10 Mar 2004)\nJava SDK 1.4.2\n\nAny attempt to launch the debugger will cause the following error message to be \ndisplayed: \"Cannot find a free socket for the debugger\".\n\nHere is the log:\n\n!SESSION apr 16, 2004 18:00:08.546 ---------------------------------------------\njava.version\u003d1.4.2_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dit_IT\nCommand-line arguments: -os win32 -ws win32 -arch x86 -install \nfile:C:/Projects/eclipse/\n!ENTRY org.eclipse.debug.ui 4 120 apr 16, 2004 18:00:08.556\n!MESSAGE Error logged from Debug UI: \n!STACK 1\norg.eclipse.core.runtime.CoreException: Cannot find a free socket for the \ndebugger\n\tat org.eclipse.jdt.launching.AbstractVMRunner.abort\n(AbstractVMRunner.java:44)\n\tat org.eclipse.jdt.internal.launching.StandardVMDebugger.run\n(StandardVMDebugger.java:126)\n\tat \norg.eclipse.jdt.internal.launching.JavaLocalApplicationLaunchConfigurationDelega\nte.launch(JavaLocalApplicationLaunchConfigurationDelegate.java:111)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch\n(LaunchConfiguration.java:156)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch\n(DebugUIPlugin.java:676)\n\tat org.eclipse.debug.ui.DebugUITools.buildAndLaunch\n(DebugUITools.java:538)\n\tat org.eclipse.debug.ui.DebugUITools$2.run(DebugUITools.java:487)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)\n!ENTRY org.eclipse.jdt.launching 4 118 apr 16, 2004 18:00:08.556\n!MESSAGE Cannot find a free socket for the debugger",
    "I suppose the output of \u0027netstat\u0027 command may be helpful.\n\nBefore launching debugger:\n  Proto  local                  remote                   Status\n  TCP    AMHTD39P:1183          ominh61.omnitel.it:7777  ESTABLISHED\n  TCP    AMHTD39P:1188          omimexo33.omnitel.it:1226  ESTABLISHED\n  TCP    AMHTD39P:1197          ominh61.omnitel.it:7777  ESTABLISHED\n  TCP    AMHTD39P:1201          omimexo33.omnitel.it:1226  ESTABLISHED\n  TCP    AMHTD39P:1251          ominc55.omnitel.it:netbios-ssn  ESTABLISHED\n  TCP    AMHTD39P:1252          ominc54.omnitel.it:microsoft-ds  TIME_WAIT\n\nAfter failed attempt:\n  Proto  local                  remote                   Status\n  TCP    AMHTD39P:1183          ominh61.omnitel.it:7777  ESTABLISHED\n  TCP    AMHTD39P:1188          omimexo33.omnitel.it:1226  ESTABLISHED\n  TCP    AMHTD39P:1197          ominh61.omnitel.it:7777  ESTABLISHED\n  TCP    AMHTD39P:1201          omimexo33.omnitel.it:1226  ESTABLISHED\n  TCP    AMHTD39P:1251          ominc55.omnitel.it:netbios-ssn  ESTABLISHED\n  TCP    AMHTD39P:1252          ominc54.omnitel.it:microsoft-ds  TIME_WAIT\n  TCP    AMHTD39P:1260          AMHTD39P.omnitel.it:1101  TIME_WAIT\n  TCP    AMHTD39P:1261          AMHTD39P.omnitel.it:1101  TIME_WAIT\n  TCP    AMHTD39P:1262          AMHTD39P.omnitel.it:1101  TIME_WAIT\n  TCP    AMHTD39P:1263          AMHTD39P.omnitel.it:1101  TIME_WAIT\n  TCP    AMHTD39P:1264          AMHTD39P.omnitel.it:1101  TIME_WAIT\n  TCP    AMHTD39P:1265          AMHTD39P.omnitel.it:1102  TIME_WAIT\n  TCP    AMHTD39P:1266          AMHTD39P.omnitel.it:1102  TIME_WAIT\n  TCP    AMHTD39P:1267          AMHTD39P.omnitel.it:1102  TIME_WAIT\n  TCP    AMHTD39P:1268          AMHTD39P.omnitel.it:1102  TIME_WAIT\n  TCP    AMHTD39P:1269          AMHTD39P.omnitel.it:1102  TIME_WAIT\n",
    "See similar bugs: bug 31786 and bug 38781. Do you have firewall running that \nis not allowing the debugger to connect on random ports?",
    "I have no firewall on my notebook. As I am on a LAN, I can access the internet \nonly through a set of corporate proxies which make also some TCP/IP filtering, \nbut I dont\u0027t think they are involved when I am working offline, on my local \nrepository.",
    "I started a VM in debug mode manually and connected to it successfully,\nvia a remote debug session",
    "Created an attachment (id\u003d9853)\norg.eclipse.jdt.launching_2.1.1 plugin patch\n\nExtract zip file to Eclipse directory",
    "I think I\u0027ve found a workaround, finally.\n\nI changed line 124 in class \norg.eclipse.jdt.internal.launching.StandardVMDebugger from:\n\nint port\u003d SocketUtil.findUnusedLocalPort(\"\", 5000, 15000); //$NON-NLS-1$\n\nto:\n\nint port\u003d SocketUtil.findFreePort();\n\nafter replacing source file for class org.eclipse.jdt.launching.SocketUtil with \nthe one from build 3.0M8. Now it works.\nAttached patch file contains updated archieve launching.jar.\n",
    "This is already fixed in the 3.0 stream:\n\nint port\u003d SocketUtil.findFreePort();\nif (port \u003d\u003d -1) {\n\tabort(LaunchingMessages.getString\n(\"StandardVMDebugger.Could_not_find_a_free_socket_for_the_debugger_1\"), null, \nIJavaLaunchConfigurationConstants.ERR_NO_SOCKET_AVAILABLE); //$NON-NLS-1$\n}",
    "Verified."
  ],
  "commentCreationDates": [
    "2004-04-16T19:15:25+02:00",
    "2004-04-19T11:12:24+02:00",
    "2004-04-20T22:02:59+02:00",
    "2004-04-21T10:39:01+02:00",
    "2004-04-21T12:23:46+02:00",
    "2004-04-22T16:52:03+02:00",
    "2004-04-22T16:54:33+02:00",
    "2004-04-22T18:22:15+02:00",
    "2004-04-22T18:22:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Cannot find a free socket for the  debugger",
      "elements": [
        {
          "method": "org.eclipse.jdt.launching.AbstractVMRunner.abort",
          "source": "AbstractVMRunner.java:44"
        },
        {
          "method": "org.eclipse.jdt.internal.launching.StandardVMDebugger.run",
          "source": "StandardVMDebugger.java:126"
        },
        {
          "method": "org.eclipse.jdt.internal.launching.JavaLocalApplicationLaunchConfigurationDelegate.launch",
          "source": "JavaLocalApplicationLaunchConfigurationDelegate.java:111"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:156"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:676"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.buildAndLaunch",
          "source": "DebugUITools.java:538"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools$2.run",
          "source": "DebugUITools.java:487"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "58881",
      "date": "2004-04-16T19:15:25+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "58881",
  "bugId": "58881",
  "date": "2004-04-16T19:15:25+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}