{
  "comments": [
    "To reproduce:\nCreate a new project in the workspace\nRight click on the project in Navigator view, choose Move...\nUncheck \"Use default location\".\nChoose a directory outside the workspace\nClick OK.\n\nResult:\nInternal Error, see details below\n\nExpected Result:\nProject moved with no errors\n\nNotes:\n1) IProject.move() gives the same results as using the GUI\n2) This happens in 3.2.0 as well, but not in earlier releases\n\n\nDetails of internal error:\n\neclipse.buildId\u003dM20060921-0945\njava.version\u003d1.4.2_11\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86\n\nError\nMon Oct 09 15:34:31 PDT 2006\nInternal Error\n\norg.eclipse.core.runtime.CoreException: File not found: C:\\Documents and Settings\\demo\\flarg\\.project.\n\tat org.eclipse.core.internal.filesystem.Policy.error(Policy.java:60)\n\tat org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:327)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:609)\n\tat org.eclipse.core.internal.resources.File.getContents(File.java:290)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.descriptionChanged(FileSystemResourceManager.java:235)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.internalWrite(FileSystemResourceManager.java:454)\n\tat org.eclipse.core.internal.resources.Project.writeDescription(Project.java:1094)\n\tat org.eclipse.core.internal.resources.Project.writeDescription(Project.java:1075)\n\tat org.eclipse.core.internal.resources.ResourceTree.movedProjectSubtree(ResourceTree.java:666)\n\tat org.eclipse.core.internal.resources.ResourceTree.standardMoveProject(ResourceTree.java:1043)\n\tat org.eclipse.core.internal.resources.Project.move(Project.java:795)\n\tat org.eclipse.ui.actions.MoveProjectAction$1.execute(MoveProjectAction.java:103)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:101)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:113)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\norg.eclipse.core.runtime.CoreException[271]: java.io.FileNotFoundException: C:\\Documents and Settings\\demo\\flarg\\.project (The system cannot find the file specified)\n\tat java.io.FileInputStream.open(Native Method)\n\tat java.io.FileInputStream.\u003cinit\u003e(Unknown Source)\n\tat org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:318)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:609)\n\tat org.eclipse.core.internal.resources.File.getContents(File.java:290)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.descriptionChanged(FileSystemResourceManager.java:235)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.internalWrite(FileSystemResourceManager.java:454)\n\tat org.eclipse.core.internal.resources.Project.writeDescription(Project.java:1094)\n\tat org.eclipse.core.internal.resources.Project.writeDescription(Project.java:1075)\n\tat org.eclipse.core.internal.resources.ResourceTree.movedProjectSubtree(ResourceTree.java:666)\n\tat org.eclipse.core.internal.resources.ResourceTree.standardMoveProject(ResourceTree.java:1043)\n\tat org.eclipse.core.internal.resources.Project.move(Project.java:795)\n\tat org.eclipse.ui.actions.MoveProjectAction$1.execute(MoveProjectAction.java:103)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:101)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:113)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)",
    "Created an attachment (id\u003d51658)\nDetails of internal error\n\n",
    "I can reproduce in 3.2.1 Win2K and 3.3 M3 on Vista.  The target directory must contain spaces.",
    "Actually, it has nothing to do with spaces.  The error occurs when you move a project to a directory that already exists. Moving to a directory that does not yet exist is successful.",
    "Target M4.",
    "Created an attachment (id\u003d53829)\nWork in progress - needs testing on other platforms\n\n",
    "Experimenting with 3.1, I found this behaviour:\n\n- Moving a file or folder to a directory where a corresponding file or directory already exists on disk: fails with exception that destination already exists\n- Moving a project to a location that already exists on disk: No complaints, and project is overlayed on top of any existing files/directories at the destination location.  If there are overlapping files in the destination, they are overwritten with the moved files, and there is no prompt.\n\nThis behaviour is actually much worse than the 3.2 behaviour, because it actually deletes content on disk without prompting.  The different behaviour between folders and projects is also not good.  I think reasonable behaviour should be:\n\n - Fail in the file/folder move cases. This is the current behaviour, and is consistent with 3.1 behaviour and with the spec of IResource#move.\n - In the project case, don\u0027t fail if the project directory exists, but fail if any other files/folders exist in that directory. I.e., only move if the destination directory is empty or non-existent. This is consistent with the IResource#move spec.  If the UI wants to add an additional check and prompt for overwriting the destination, they can do so.",
    "Created an attachment (id\u003d53918)\nNew patch\n\nThis is a better fix.  All existing test suites pass with these changes. One of the problems is that I equated \"FORCE\" on the move API with \"OVERWRITE\" in the file system API.  This was incorrect, since FORCE deals with the synchronization state of the source resource for the move, and OVERWRITE deals with content at the destination of the move.  Content at the destination should never be overwritten according to the IResource API contract.",
    "Fix and automated tests released.",
    "*** Bug 178416 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2006-10-10T00:38:16+02:00",
    "2006-10-10T00:39:09+02:00",
    "2006-11-13T20:35:47+01:00",
    "2006-11-13T22:22:35+01:00",
    "2006-11-14T17:09:13+01:00",
    "2006-11-14T17:09:35+01:00",
    "2006-11-14T17:30:48+01:00",
    "2006-11-15T17:05:07+01:00",
    "2006-11-15T18:08:35+01:00",
    "2007-04-23T22:32:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "File not found: C:\\Documents and Settings\\demo\\flarg\\.project.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.filesystem.Policy.error",
          "source": "Policy.java:60"
        },
        {
          "method": "org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream",
          "source": "LocalFile.java:327"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.read",
          "source": "FileSystemResourceManager.java:609"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContents",
          "source": "File.java:290"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.descriptionChanged",
          "source": "FileSystemResourceManager.java:235"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.internalWrite",
          "source": "FileSystemResourceManager.java:454"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.writeDescription",
          "source": "Project.java:1094"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.writeDescription",
          "source": "Project.java:1075"
        },
        {
          "method": "org.eclipse.core.internal.resources.ResourceTree.movedProjectSubtree",
          "source": "ResourceTree.java:666"
        },
        {
          "method": "org.eclipse.core.internal.resources.ResourceTree.standardMoveProject",
          "source": "ResourceTree.java:1043"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.move",
          "source": "Project.java:795"
        },
        {
          "method": "org.eclipse.ui.actions.MoveProjectAction$1.execute",
          "source": "MoveProjectAction.java:103"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:101"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:113"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "160251",
      "date": "2006-10-10T00:38:16+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "major"
    },
    {
      "exceptionType": "java.io.FileNotFoundException",
      "message": "C:\\Documents and Settings\\demo\\flarg\\.project (The system cannot find the file specified)",
      "elements": [
        {
          "method": "java.io.FileInputStream.open",
          "source": "Native Method"
        },
        {
          "method": "java.io.FileInputStream.\u003cinit\u003e",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream",
          "source": "LocalFile.java:318"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.read",
          "source": "FileSystemResourceManager.java:609"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContents",
          "source": "File.java:290"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.descriptionChanged",
          "source": "FileSystemResourceManager.java:235"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.internalWrite",
          "source": "FileSystemResourceManager.java:454"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.writeDescription",
          "source": "Project.java:1094"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.writeDescription",
          "source": "Project.java:1075"
        },
        {
          "method": "org.eclipse.core.internal.resources.ResourceTree.movedProjectSubtree",
          "source": "ResourceTree.java:666"
        },
        {
          "method": "org.eclipse.core.internal.resources.ResourceTree.standardMoveProject",
          "source": "ResourceTree.java:1043"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.move",
          "source": "Project.java:795"
        },
        {
          "method": "org.eclipse.ui.actions.MoveProjectAction$1.execute",
          "source": "MoveProjectAction.java:103"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:101"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:113"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "160251",
      "date": "2006-10-10T00:38:16+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "major"
    }
  ],
  "groupId": "160251",
  "bugId": "160251",
  "date": "2006-10-10T00:38:16+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "major"
}