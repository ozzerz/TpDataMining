{
  "comments": [
    "According to the java language spec (section 13.1), an anonymous class inside an anonymous class \nshould be named Foo$n$n, not Foo$n as is done by the eclipse compiler (the class name should be the \n*immediately* enclosing class, $, number). This causes Class.getSimpleName() to throw an \nexception, which can cause all kinds of interesting problems in logging and debugging code.\n\n\u003cpre\u003e\npublic class EclipseBug {\n\tpublic static void main(String[] s) {\n\t\tnew Object() {\n\t\t\t{\n\t\t\t\tnew Object() {\n\t\t\t\t\t{\n\t\t\t\t\t\tSystem.out.println(this.getClass().getName());\n\t\t\t\t\t\tSystem.out.println(this.getClass().getSimpleName());\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n}\n//\u003c/pre\u003e\n\n\n/ibs/bin$ java EclipseBug\ncommon.EclipseBug$2\nException in thread \"main\" java.lang.InternalError: Malformed class name\n        at java.lang.Class.getSimpleName(Class.java:1129)\n        at common.EclipseBug$2.\u003cinit\u003e(EclipseBug.java:10)\n        at common.EclipseBug$1.\u003cinit\u003e(EclipseBug.java:7)\n        at common.EclipseBug.\u003cclinit\u003e(EclipseBug.java:5)\n\nWhereas compiled with javac, the result is\n\n/Users/alf/temp$ java EclipseBug\nEclipseBug$1$1\n\n(getSimpleName() returns a blank string)",
    "This is true only if the compliance is 1.5. Below 1.5, the actual naming is fine.",
    "Created an attachment (id\u003d27697)\nProposed fix\n",
    "Proposed fix looks good.",
    "Added ComplianceTest_13/_14/_15#test102.\nFixed",
    "*** Bug 114266 has been marked as a duplicate of this bug. ***",
    "Verified for 3.1.2 in M20060109-0800.",
    "Verified for 3.2M4 in I20051215-1506"
  ],
  "commentCreationDates": [
    "2005-09-06T19:33:53+02:00",
    "2005-09-06T19:57:17+02:00",
    "2005-09-29T22:48:05+02:00",
    "2005-10-17T15:51:36+02:00",
    "2005-10-17T16:27:49+02:00",
    "2005-10-29T00:37:47+02:00",
    "2006-01-09T15:36:47+01:00",
    "2006-01-10T15:30:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.InternalError",
      "message": "Malformed class name",
      "elements": [
        {
          "method": "java.lang.Class.getSimpleName",
          "source": "Class.java:1129"
        },
        {
          "method": "common.EclipseBug$2.\u003cinit\u003e",
          "source": "EclipseBug.java:10"
        },
        {
          "method": "common.EclipseBug$1.\u003cinit\u003e",
          "source": "EclipseBug.java:7"
        },
        {
          "method": "common.EclipseBug.\u003cclinit\u003e",
          "source": "EclipseBug.java:5"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "108856",
      "date": "2005-09-06T19:33:53+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "108856",
  "bugId": "108856",
  "date": "2005-09-06T19:33:53+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}