{
  "comments": [
    "While testing some complex types I noticed a problem with the wsdl. The values I fill in get transfered to the source view but when I flipped back to the form view they were not there.\n\nTor reproduce the problem load the wsdl into the WSE. Then fill in values in the form view, switch to the source view. Now flip back to the form view none of the values are there.",
    "Created an attachment (id\u003d43199)\ncomplex type that has the problem\n\n",
    "Did this problem exist in WTP 1.0?",
    "Back to using the target milestone field to indicate intended as well as actual target miletones/RCs. This bug is a candidate for 1.5 RC5.",
    "Gil, you stated via email this is not a regression, and has existed in the WSE back to, and even prior to, WTP 0.7. Lowering priority, and deferring for investigation in the maintenance release.",
    "Created an attachment (id\u003d44141)\nCorrected wsdl document\n\nThe first attached file is not a valid WSDL document. I am seeing the same behaviour of the input fields being cleared when switching between the source and form view on that invalid WSDL, but I also get an error message like \"content of source view failed schema validation...\"\n\nThis attachment is the corrected, valid version of the wsdl.",
    "Thanks Mark!",
    "I\u0027m resolving this as invalid because the WSDL attached was invalid.  I could reproduce the problem with that invalid WSDL, but was seeing error messages along the way which is expected.\n\nUsing the corrected WSDL I am not seeing this problem.",
    "Reopening because using the sun JRE and this corrected WSDL I am still seeing the problem.  When I switch from the form view to source view all that is in the source view is \"null null\", and when I switch back to the form view everything is empty.  Strangely I am not seeing this problem using an IBM JRE.",
    "This is a SWAG on my part, but check Tomcat\u0027s catalina log under .metadata/.plugins/org.apache.tomcat for exceptions. This could be a Crimson/Xerces collision in the Sun JRE. We\u0027ve seen this before. Another test of the theory is to disable Crimson and use Xerces instead. Try launching Eclipse this way:\n\nEclipse\n-vmargs\n-Djava.endorsed.dirs\u003d???\\eclipse\\plugins\\org.apache.xerces_2.8.0.v200606131651\n\nwhere ??? is the root path to your Eclipse image.",
    "Good suggestion Chris. Im curious what part of the wsdl is causing the problem. Does this happen with a regular Addressbook.wsdl? If so this tells us alot. If it doesnt I wonder if we could start removing some of the interesting types we are testing and find out which one is the big da wolf. As this wsdl is an Addressbook plus interesting types.",
    "The problem seems to be that this an RPC style WSDL.  Changing the binding of this  WSDL to be a doc/literal type fixes the problem of the empty source view.  This is only happening on a Sun JRE.\n\nI created a Bottom up webservice from a simple \"Hello\" bean.  I created one RPC/encoded style, and one doc/literal style webservice.  When testing the RPC style webservice the source page contains \"null\" when you switch to it from the form view.  So this does not appear to be a problem with the complex types as the current summary suggests.  The JRE I am using is jre1.5.0_07\n\nRPC/encoded webservices work fine when using an IBM Java 5 JRE.\n\nI checked in the tomcat catalina logs and I did not see any exceptions.  When I start eclipse like \"eclipse -vm \"C:\\Program Files\\Java\\jre1.5.0_07\\bin\\jav\na.exe\" -vmargs -Djava.endorsed.dirs\u003dD:\\wtp-builds\\1.5\\eclipse\\plugins\\org.apache\n.xerces_2.8.0.v200606131651\" I still see the same problem so I don\u0027t think it is the crimson/xerces problem that Chris mentioned in Comment 9.\n\nSo to summarize RPC/encoded style webservices do not appear to work correctly in the WSE when running on a SUN JRE.",
    "This still needs more investigation but it appears that the root of this problem is in XMLUtils.serialize(Element e,boolean omitXMLDeclaration)\n\nUsing a Sun JRE when we call serializer.transform(domSource, new\tStreamResult(baos)) an exception is thrown.. The exception looks like:\nERROR:  \u0027Namespace for prefix \u0027xsi\u0027 has not been declared.\u0027\njavax.xml.transform.TransformerException: java.lang.RuntimeException: Namespace for prefix \u0027xsi\u0027 has not been declared.\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:647)\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:279)\n\tat org.eclipse.wst.ws.internal.explorer.platform.util.XMLUtils.serialize(XMLUtils.java:51)\n....\n\n\n\nI am not yet sure if this exception is a bug with the XSLT Transform or if we are calling something incorrectly.\n\nThe Sun JRE\u0027s use com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl as the Implementaion of Transform.  The IBM JRE\u0027s use org.apache.xalan.transformer.TransformerImpl.  According to http://xml.apache.org/xalan-j/faq.html#faq-N100D6 \"JDK/JRE 1.4, and JDK/JRE 5.0 is packaged with an old version of Xalan-Java\". \n\nSo Right now I think that the IBM JRE I was using contained a newer implementation of javax.xml.transform.Transformer than the Sun JRE",
    "I am seeing this same problem as far back ast WTP 0.7.\n\nAs a workaround to solve this problem I downloaded the Xalan  xalan-j_2_7_0-bin-2jars.zip, and put the 5 jars in folder (e.g. D:\\xalanjars).  Then I started eclipse like: eclipse -vm \"C:\\Program Files\\Java\\jre1.5.0_07\\bin\\java.exe\" -vmargs -Djava.endorsed.dirs\u003dD:\\xalanjars.  This confirms that using a newer version of xalan fixes this problem.\n\nI\u0027m not sure how exactly we should resolve this bug besides including xalan as third party jar.  Gil, Chris - any ideas?\n\n",
    "Created an attachment (id\u003d46825)\npatch for org.eclipse.wst.ws.explorer\n\nTry out this patch",
    "Some JREs were complaining about not being able to find the namespace declaration for the xsi prefix.  So when the element was serialized an exception would be thrown by the JRE and null was returned from the serialize method.\n\nTo fix this when we are serializing the elements to be displayed in the form view I check to see if the string we get back is null.  If it is null then an exception was probably thrown by the JRE which gets caught and suppressed by the XMLUtils.serialize method.  So if the string returned is null I add the \"http://www.w3.org/2001/XMLSchema-instance\" namespace to the element and then serialize that element again.\n\nThe downside to this fix is that it adds some extra namespace attributes to elements in the soap message.",
    "Patch looks good. Something for the future..... you may consider changing the implemenation of XMLUtils so that it does not suppress the transform exception. This will give u better error reporting.",
    "The defect has been reviewed and committed.",
    "Released to HEAD and R1_5_maintenance as v200607270039.  This will be in the 07/28 WTP 1.5.1 M-build.",
    "I\u0027ve verified that this is in wtp I20060727",
    "Closed."
  ],
  "commentCreationDates": [
    "2006-06-01T04:26:33+02:00",
    "2006-06-01T04:28:18+02:00",
    "2006-06-01T14:41:06+02:00",
    "2006-06-01T20:50:15+02:00",
    "2006-06-09T14:58:42+02:00",
    "2006-06-12T16:14:58+02:00",
    "2006-06-12T16:35:55+02:00",
    "2006-06-12T16:52:39+02:00",
    "2006-07-13T16:09:20+02:00",
    "2006-07-19T22:01:52+02:00",
    "2006-07-19T23:50:34+02:00",
    "2006-07-20T23:02:21+02:00",
    "2006-07-22T01:03:17+02:00",
    "2006-07-24T18:50:29+02:00",
    "2006-07-26T17:40:30+02:00",
    "2006-07-26T17:54:19+02:00",
    "2006-07-26T18:16:34+02:00",
    "2006-07-26T23:18:09+02:00",
    "2006-07-27T02:47:05+02:00",
    "2006-07-27T23:25:54+02:00",
    "2006-07-31T15:03:09+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Namespace for prefix \u0027xsi\u0027 has not been declared.",
      "elements": [
        {
          "method": "com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform",
          "source": "TransformerImpl.java:647"
        },
        {
          "method": "com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform",
          "source": "TransformerImpl.java:279"
        },
        {
          "method": "org.eclipse.wst.ws.internal.explorer.platform.util.XMLUtils.serialize",
          "source": "XMLUtils.java:51"
        }
      ],
      "number": 0,
      "commentIndex": 12,
      "bugId": "144824",
      "date": "2006-07-22T01:03:17+02:00",
      "product": "Web Tools",
      "component": "wst.ws",
      "severity": "normal"
    }
  ],
  "groupId": "144824",
  "bugId": "144824",
  "date": "2006-06-01T04:26:33+02:00",
  "product": "Web Tools",
  "component": "wst.ws",
  "severity": "normal"
}