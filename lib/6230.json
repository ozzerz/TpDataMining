{
  "comments": [
    "public static void main(String[] argv) {\n\tDisplay display \u003d new Display();\n\tImage image \u003d new Image(display, 200, 200);\n\tGC gc \u003d new GC(display);\n\tgc.copyArea(image, 0, 0);\n\tImageLoader loader \u003d new ImageLoader();\n\tloader.data \u003d new ImageData[] { image.getImageData() };\n\tloader.save(\"foo.bmp\", SWT.IMAGE_BMP);\n//\tloader.save(\"foo.jpg\", SWT.IMAGE_JPEG);\n\tgc.dispose();\n\timage.dispose();\n}\n\n\nAs written this code produces the following exception on Windows and Motif when\nthe display has 32-bit colour depth:\n\norg.eclipse.swt.SWTException: Unsupported color depth\n\tat org.eclipse.swt.SWT.error(SWT.java:1877)\n\tat org.eclipse.swt.SWT.error(SWT.java:1809)\n\tat org.eclipse.swt.internal.image.WinBMPFileFormat.unloadIntoByteStream\n(WinBMPFileFormat.java:570)\n\tat org.eclipse.swt.internal.image.FileFormat.unloadIntoStream\n(FileFormat.java:98)\n\tat org.eclipse.swt.internal.image.FileFormat.save(FileFormat.java:62)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:188)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:228)\n\tat ScreenshotTest.main(ScreenshotTest.java:13)\nException in thread \"main\" \n\nCommenting out the IMAGE_BMP line and uncommenting IMAGE_JPEG gives the \nfollowing on win32:\n\norg.eclipse.swt.SWTException: i/o error \n(java.lang.ArrayIndexOutOfBoundsException: -128)\n\tat org.eclipse.swt.SWT.error(SWT.java:1877)\n\tat org.eclipse.swt.internal.image.FileFormat.unloadIntoStream\n(FileFormat.java:102)\n\tat org.eclipse.swt.internal.image.FileFormat.save(FileFormat.java:82)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:188)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:228)\n\tat ScreenshotTest.main(ScreenshotTest.java:14)\n*** Stack trace of contained exception ***\njava.lang.ArrayIndexOutOfBoundsException: -128\n\tat org.eclipse.swt.internal.image.JPEGFileFormat.convertMultiRGBToYCbCr\n(JPEGFileFormat.java:341)\n\tat org.eclipse.swt.internal.image.JPEGFileFormat.convertImageToYCbCr\n(JPEGFileFormat.java:305)\n\tat org.eclipse.swt.internal.image.JPEGFileFormat.unloadIntoByteStream\n(JPEGFileFormat.java:1880)\n\tat org.eclipse.swt.internal.image.FileFormat.unloadIntoStream\n(FileFormat.java:98)\n\tat org.eclipse.swt.internal.image.FileFormat.save(FileFormat.java:82)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:188)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:228)\n\tat ScreenshotTest.main(ScreenshotTest.java:14)\nException in thread \"main\"",
    "- 32 bit BMP should work since M5\n",
    "Fixed version v\u003e20030210\n\n- JPEG should be fixed too, version v\u003e20030210\n\nClosing PR."
  ],
  "commentCreationDates": [
    "2001-11-22T15:44:19+01:00",
    "2003-02-10T15:11:11+01:00",
    "2003-02-10T20:20:42+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Unsupported color depth",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1877"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1809"
        },
        {
          "method": "org.eclipse.swt.internal.image.WinBMPFileFormat.unloadIntoByteStream",
          "source": "WinBMPFileFormat.java:570"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.unloadIntoStream",
          "source": "FileFormat.java:98"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.save",
          "source": "FileFormat.java:62"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:188"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:228"
        },
        {
          "method": "ScreenshotTest.main",
          "source": "ScreenshotTest.java:13"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "6230",
      "date": "2001-11-22T15:44:19+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-128)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1877"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.unloadIntoStream",
          "source": "FileFormat.java:102"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.save",
          "source": "FileFormat.java:82"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:188"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:228"
        },
        {
          "method": "ScreenshotTest.main",
          "source": "ScreenshotTest.java:14"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "6230",
      "date": "2001-11-22T15:44:19+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-128",
      "elements": [
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.convertMultiRGBToYCbCr",
          "source": "JPEGFileFormat.java:341"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.convertImageToYCbCr",
          "source": "JPEGFileFormat.java:305"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.unloadIntoByteStream",
          "source": "JPEGFileFormat.java:1880"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.unloadIntoStream",
          "source": "FileFormat.java:98"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.save",
          "source": "FileFormat.java:82"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:188"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:228"
        },
        {
          "method": "ScreenshotTest.main",
          "source": "ScreenshotTest.java:14"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "6230",
      "date": "2001-11-22T15:44:19+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "6230",
  "bugId": "6230",
  "date": "2001-11-22T15:44:19+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}