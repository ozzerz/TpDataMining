{
  "comments": [
    "If you close a MultiPageEditorPart from its setFocus() method (because the \nfile it\u0027s editing has been deleted, for instance), an error occurs:\n\norg.eclipse.swt.SWTException: Widget is disposed\n\nStack trace:\n   java/lang/Throwable.\u003cinit\u003e()V\n   java/lang/Throwable.\u003cinit\u003e(Ljava/lang/String;)V\n   org/eclipse/swt/SWTException.\u003cinit\u003e(ILjava/lang/String;)V\n   org/eclipse/swt/SWTException.\u003cinit\u003e(I)V\n   org/eclipse/swt/SWT.error(ILjava/lang/Throwable;)V\n   org/eclipse/swt/SWT.error(I)V\n   org/eclipse/swt/custom/CTabItem.getDisplay()\nLorg/eclipse/swt/widgets/Display;\n   org/eclipse/swt/widgets/Widget.isValidThread()Z\n   org/eclipse/swt/widgets/Widget.checkWidget()V\n   org/eclipse/swt/widgets/Widget.getData()Ljava/lang/Object;\n   org/eclipse/ui/part/MultiPageEditorPart.getEditor(I)\nLorg/eclipse/ui/IEditorPart;\n   org/eclipse/ui/part/MultiPageEditorPart.getActiveEditor()\nLorg/eclipse/ui/IEditorPart;\n   com/ibm/etools/ctc/flow/ui/MicroflowMultiPageEditor.getActiveEditor()\nLorg/eclipse/ui/IEditorPart;\n   org/eclipse/ui/part/MultiPageSelectionProvider.getSelection()\nLorg/eclipse/jface/viewers/ISelection;\n   org/eclipse/ui/internal/AbstractSelectionService.partActivated\n(Lorg/eclipse/ui/IWorkbenchPart;)V\n   org/eclipse/ui/internal/WorkbenchPage.firePartActivated\n(Lorg/eclipse/ui/IWorkbenchPart;)V\n   org/eclipse/ui/internal/WorkbenchPage.setActivePart\n(Lorg/eclipse/ui/IWorkbenchPart;)V\n   org/eclipse/ui/internal/WorkbenchPage.requestActivation\n(Lorg/eclipse/ui/IWorkbenchPart;)V\n   org/eclipse/ui/internal/PartPane.requestActivation()V\n   org/eclipse/ui/internal/EditorPane.requestActivation()V\n   org/eclipse/ui/internal/PartPane.handleEvent\n(Lorg/eclipse/swt/widgets/Event;)V\n   org/eclipse/swt/widgets/EventTable.sendEvent\n(Lorg/eclipse/swt/widgets/Event;)V\n. . .\n\nTo work around this, I overrode \u0027getActiveEditor()\u0027 to check if the container \nis disposed, and return null if it is. This seems to fix the problem.",
    "Fix released to the HEAD stream. (MulitPageEditorPart).",
    "The fix to the MultiPageEditorPart::getActiveEditor() method was causing a \nNullPointerException to occur during platform startup if an instance of my \neditor was open at startup.\n\nI overrode the method as follows to fix my problem:\n\nprotected IEditorPart getActiveEditor()\n{\n  /* fix */\n  if (getContainer() \u003d\u003d null || getContainer().isDisposed())\n    return null;\n  /* end fix */\n  int index \u003d getActivePage();\n  if (index !\u003d -1)\n    return getEditor(index);\n  return null;\n}",
    "Fixed by changing getActivePage and getActiveEditor as follows:\n\nprotected int getActivePage() {\n\tCTabFolder tabFolder \u003d getTabFolder();\n\tif (tabFolder !\u003d null \u0026\u0026 !tabFolder.isDisposed())\n\t\treturn tabFolder.getSelectionIndex();\n\treturn -1;\n}\n\nprotected IEditorPart getActiveEditor() {\n\tint index \u003d getActivePage();\n\tif (index !\u003d -1)\n\t\treturn getEditor(index);\n\treturn null;\n}\n\n\nFixed in \u003eI20030128\n",
    "*** Bug 30166 has been marked as a duplicate of this bug. ***",
    "*** Bug 30031 has been marked as a duplicate of this bug. ***",
    "Hello, \n  I\u0027ve just noticed that MultiPageEditor.getEditor(int pageIndex) might be\nvunerable to same problem. Runnning Eclispe 3M8.\n\nprotected IEditorPart getEditor(int pageIndex) {\n\tItem item \u003d getItem(pageIndex);\n\tif (item !\u003d null) {\n\t\tObject data \u003d item.getData();\n\t\tif (data instanceof IEditorPart) {\n\t\t\treturn (IEditorPart) data;\n\t\t}\n\t}\n\treturn null;\n}\n\nprivate CTabItem getItem(int pageIndex) {\n\treturn getTabFolder().getItem(pageIndex);\n}\n\nprivate CTabFolder getTabFolder() {\n\treturn container;\n}\n\nHere\u0027s the original stack trace which caused me to investigate this one:\n Eclipse 3M8:\nSearch-\u003eFile Search\n\n\nError Apr 05, 2004 20:22:28.38 An internal error\noccurred during: \"Searching for occurrences of\n\"dsadasdas\"\".\norg.eclipse.swt.SWTException: Invalid thread access\nat org.eclipse.swt.SWT.error(SWT.java:2625)\nat org.eclipse.swt.SWT.error(SWT.java:2555)\nat org.eclipse.swt.widgets.Widget.error(Widget.java:354)\nat\norg.eclipse.swt.widgets.Widget.checkWidget(Widget.java:284)\nat org.eclipse.swt.widgets.Widget.getData(Widget.java:384)\nat\norg.eclipse.ui.part.MultiPageEditorPart.getEditor(MultiPageEditorPart.java:289)\nat\norg.xmen.multipageeditor.XMLEditor.getAdapter(XMLEditor.java:136)\nat\norg.eclipse.search2.internal.ui.text.AnnotationManager.getAnnotationModel(AnnotationManager.java:249)\nat\norg.eclipse.search2.internal.ui.text.AnnotationManager.removeAnnotations(AnnotationManager.java:206)\nat\norg.eclipse.search2.internal.ui.text.AnnotationManager.removeAnnotations(AnnotationManager.java:194)\nat\norg.eclipse.search2.internal.ui.text.AnnotationManager.removeAnnotations(AnnotationManager.java:140)\nat\norg.eclipse.search2.internal.ui.text.AnnotationManager.searchResultChanged(AnnotationManager.java:112)\nat\norg.eclipse.search.ui.text.AbstractTextSearchResult.fireChange(AbstractTextSearchResult.java:154)\nat\norg.eclipse.search.ui.text.AbstractTextSearchResult.removeAll(AbstractTextSearchResult.java:96)\nat\norg.eclipse.search.internal.ui.text.FileSearchQuery.run(FileSearchQuery.java:53)\nat\norg.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:68)\nat\norg.eclipse.core.internal.jobs.Worker.run(Worker.java:62)",
    "This looks like a bug in XMLEditor itself.  It\u0027s trying to reference a disposed\neditor in its getAdapter() method.\n"
  ],
  "commentCreationDates": [
    "2002-07-27T00:16:43+02:00",
    "2002-10-02T22:43:28+02:00",
    "2002-12-30T19:27:27+01:00",
    "2003-01-29T16:18:22+01:00",
    "2003-01-29T16:19:59+01:00",
    "2003-02-13T15:44:04+01:00",
    "2004-04-05T20:22:24+02:00",
    "2004-04-06T18:07:13+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2625"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2555"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:354"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:284"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.getData",
          "source": "Widget.java:384"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.getEditor",
          "source": "MultiPageEditorPart.java:289"
        },
        {
          "method": "org.xmen.multipageeditor.XMLEditor.getAdapter",
          "source": "XMLEditor.java:136"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.AnnotationManager.getAnnotationModel",
          "source": "AnnotationManager.java:249"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.AnnotationManager.removeAnnotations",
          "source": "AnnotationManager.java:206"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.AnnotationManager.removeAnnotations",
          "source": "AnnotationManager.java:194"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.AnnotationManager.removeAnnotations",
          "source": "AnnotationManager.java:140"
        },
        {
          "method": "org.eclipse.search2.internal.ui.text.AnnotationManager.searchResultChanged",
          "source": "AnnotationManager.java:112"
        },
        {
          "method": "org.eclipse.search.ui.text.AbstractTextSearchResult.fireChange",
          "source": "AbstractTextSearchResult.java:154"
        },
        {
          "method": "org.eclipse.search.ui.text.AbstractTextSearchResult.removeAll",
          "source": "AbstractTextSearchResult.java:96"
        },
        {
          "method": "org.eclipse.search.internal.ui.text.FileSearchQuery.run",
          "source": "FileSearchQuery.java:53"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run",
          "source": "InternalSearchUI.java:68"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:62"
        }
      ],
      "number": 0,
      "commentIndex": 6,
      "bugId": "21988",
      "date": "2004-04-05T20:22:24+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "21988",
  "bugId": "21988",
  "date": "2002-07-27T00:16:43+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}