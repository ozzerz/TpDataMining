{
  "comments": [
    "In latest 3.1 integration builds the eclipse textrunner doesn\u0027t work if you\nselect a 1.3 level jvm for running the test. It crashes for a dependency from\nIdentityHashMap (java 1.4).\n\nAlthough eclipse need a 1.4 jre, selecting a 1.3 jre from the run/debug\nconfiguration should be possible: this is a show stopper for anyone needs to\ncompile projects using jre 1.3.\n\nbuild 200412140010\n\njava.lang.NoClassDefFoundError: java/util/IdentityHashMap\n\tat\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:448)\n\tat\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:343)\n\tat\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:195)",
    "Moving to JDT UI for comment",
    "The fix is to use a normal HashMap and to compute the key as follows:\n\nInteger key\u003d new Integer(System.identityHashcode(test));\n\n",
    "Created an attachment (id\u003d16590)\nPatch\n\nErich, can you please have a look at the patch ?",
    "Using a Integer as a key based on System#identityHashcode is bogus since the\nequals is call on the key as well. If two test produce the same identity hash\ncode  then we can\u0027t distinguish them anymore.\n\nBetter is to use a normal hashtable and to assume that test implement hashcode\nand equals correctly (if they implement them at all).\n\nOther possibility is to copy custom hashtable from viewers and provide a comparator.",
    "Created an attachment (id\u003d16631)\nNew path\n",
    "Erich and I decided to copy custom hash table and to provide a comparator.",
    "Fix released for M4.",
    "verified in I200412160010.from20041216_1310"
  ],
  "commentCreationDates": [
    "2004-12-14T10:19:49+01:00",
    "2004-12-14T11:42:27+01:00",
    "2004-12-14T18:24:37+01:00",
    "2004-12-14T18:25:15+01:00",
    "2004-12-15T10:06:51+01:00",
    "2004-12-15T10:07:14+01:00",
    "2004-12-15T11:51:20+01:00",
    "2004-12-16T08:24:29+01:00",
    "2004-12-16T16:01:50+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "java/util/IdentityHashMap",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:448"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:343"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main",
          "source": "RemoteTestRunner.java:195"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "80912",
      "date": "2004-12-14T10:19:49+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "blocker"
    }
  ],
  "groupId": "80912",
  "bugId": "80912",
  "date": "2004-12-14T10:19:49+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "blocker"
}