{
  "comments": [
    "Hi - we had been having a lot of trouble with getting an NPE similar to this one\n(in ResourceSetImpl.getResource() ) while accessing the wtp artifact edits for\nweb.xml in a web application. They seem to be caused by some threading issues in\nthe underlying EMF classes. We have removed a lot of our calls to the web\nartifact edits, thinking that it would help, and now I am seeing an NPE in the\nsame place, which happens during a workspace auto build job. It happens most\noften when I open a workspace with our views open, which do make unavoidable\ncalls to the web artifact edit. All of these failures are intermittent, and seem\nto happen more often on faster hardware.\n\nI\u0027m open to any suggestions on how to avoid these threading conflicts; by\ndebugging into the EMF code it looks like the same instance of ResourceSetImpl\ngets initialized almost-simultaneously by more than one thread. This can lead to\nResourceSetImple.getResources() getting called almost-simultaneously on that\ninstance from multiple threads, and since this method lazily initializes the\nresources, it can lead to the list of resources getting out of sync. But I don\u0027t\nsee anything that we can lock on to avoid it. (when debugging the threads\naccessing this were usually the build job, our views getting initialized, and\nthe jsp indexing job)\n\nAlso, we are on 1.0M8, which I know is slightly out-of-date. We\u0027re trying to\nadopt a more recent build; but I wanted to bring this up since it\u0027s causing such\nserious problems for us. I can\u0027t tell yet if it\u0027s been addressed in the head\nrevision.\n\nHere is the current NPE that I am seeing, from the AutoBuild job:\n\n*** ERROR ***: Wed Nov 09 22:38:09 MST 2005    java.lang.NullPointerException\n    \tat\norg.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:316)\n    \tat\norg.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource(ProjectResourceSetImpl.java:262)\n    \tat\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.getResource(ResourceSetWorkbenchEditSynchronizer.java:257)\n    \tat\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.processResource(ResourceSetWorkbenchEditSynchronizer.java:215)\n    \tat\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.addedResource(ResourceSetWorkbenchEditSynchronizer.java:211)\n    \tat\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.visit(ResourceSetWorkbenchEditSynchronizer.java:177)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:68)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n    \tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)\n    \tat\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acceptDelta(ResourceSetWorkbenchEditSynchronizer.java:128)\n    \tat\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.resourceChanged(ResourceSetWorkbenchEditSynchronizer.java:81)\n    \tat\norg.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)\n    \tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n    \tat org.eclipse.core.runtime.Platform.run(Platform.java:783)\n    \tat\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)\n    \tat\norg.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)\n    \tat\norg.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:180)\n    \tat\norg.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:914)\n    \tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:147)\n    \tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)\n    \tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)",
    "Bumping up the severity to make sure this will get addressed for 1.0. It looks like it may be related to bug 115830, I will try to look for both as soon as we can move up to M9.",
    "I am pushing this bug to R1.5 on 3.2 and also adding dependency on 113708.\n\nIf scenarios are still blocked on this, I could put in some temp try-catches in our code to re-attempt after delaying on a thread.....    its a hack, but the right fix is to make ResourceSets thread safe...  and 113708 is attempting to do this on the new 3.2 based EMF.....",
    "changing target from 1.5 M1 to 1.5 M5 to reflect new numbering system as we join Collisto. ",
    "Moving to M6",
    "Closing this defect as a related defect:\n\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d133187\n\nWas resolved and the fix is being dropped to 1.5 stream as well.",
    "Verified the functionality works.",
    "Closing as verified."
  ],
  "commentCreationDates": [
    "2005-11-10T15:03:33+01:00",
    "2005-11-28T15:56:50+01:00",
    "2005-12-07T16:14:18+01:00",
    "2005-12-28T15:29:24+01:00",
    "2006-03-02T03:27:23+01:00",
    "2006-04-20T16:15:20+02:00",
    "2006-09-26T19:07:47+02:00",
    "2006-09-26T20:50:41+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource",
          "source": "ResourceSetImpl.java:316"
        },
        {
          "method": "org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource",
          "source": "ProjectResourceSetImpl.java:262"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.getResource",
          "source": "ResourceSetWorkbenchEditSynchronizer.java:257"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.processResource",
          "source": "ResourceSetWorkbenchEditSynchronizer.java:215"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.addedResource",
          "source": "ResourceSetWorkbenchEditSynchronizer.java:211"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.visit",
          "source": "ResourceSetWorkbenchEditSynchronizer.java:177"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:68"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:77"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:49"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acceptDelta",
          "source": "ResourceSetWorkbenchEditSynchronizer.java:128"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.resourceChanged",
          "source": "ResourceSetWorkbenchEditSynchronizer.java:81"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$2.run",
          "source": "NotificationManager.java:276"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:270"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:144"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastPostChange",
          "source": "Workspace.java:180"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:914"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:147"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "115821",
      "date": "2005-11-10T15:03:33+01:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "critical"
    }
  ],
  "groupId": "115821",
  "bugId": "115821",
  "date": "2005-11-10T15:03:33+01:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "critical"
}