{
  "comments": [
    "Build ID: 200702161600\n\nSteps To Reproduce:\n1.Create C project\n2.create main.c with this code:\n\n#include \u003cstdio.h\u003e\n\nvoid func1(void);\n\nint mian(void)\n{\n    while (1)\n    {\n        func1();\n    }\n    return 0;\n}\n\nvoid func1(void)\n{\n    int i \u003d 0;\n    for (i\u003d0; i\u003c10;i++)\n    {\n        printf(\"%i\", i);\n    }\n\n}\n3.right click on main in the outline view and select \"Open Call Hierarchy\" an error dialog pop up.\n\n\n\nMore information:\n!ENTRY org.eclipse.core.jobs 4 2 2007-02-23 13:43:42.031\n!MESSAGE An internal error occurred during: \"Child Node Computation\".\n!STACK 0\njava.lang.ClassCastException: org.eclipse.cdt.internal.core.pdom.dom.c.PDOMCParameter\n\tat org.eclipse.cdt.internal.core.index.composite.c.CompositeCFunction.getParameters(CompositeCFunction.java:36)\n\tat org.eclipse.cdt.internal.core.model.ext.CElementHandle.extractParameterTypes(CElementHandle.java:259)\n\tat org.eclipse.cdt.internal.core.model.ext.FunctionHandle.\u003cinit\u003e(FunctionHandle.java:29)\n\tat org.eclipse.cdt.internal.core.model.ext.CElementHandleFactory.create(CElementHandleFactory.java:60)\n\tat org.eclipse.cdt.internal.ui.viewsupport.IndexUI.getCElementForName(IndexUI.java:161)\n\tat org.eclipse.cdt.internal.ui.viewsupport.IndexUI.findAnyDeclaration(IndexUI.java:170)\n\tat org.eclipse.cdt.internal.ui.viewsupport.IndexUI.findRepresentative(IndexUI.java:99)\n\tat org.eclipse.cdt.internal.ui.callhierarchy.CHQueries.findCalls(CHQueries.java:84)\n\tat org.eclipse.cdt.internal.ui.callhierarchy.CHContentProvider.asyncronouslyComputeRefersTo(CHContentProvider.java:128)\n\tat org.eclipse.cdt.internal.ui.callhierarchy.CHContentProvider.asyncronouslyComputeChildren(CHContentProvider.java:99)\n\tat org.eclipse.cdt.internal.ui.viewsupport.AsyncTreeContentProvider.runJob(AsyncTreeContentProvider.java:212)\n\tat org.eclipse.cdt.internal.ui.viewsupport.AsyncTreeContentProvider.access$0(AsyncTreeContentProvider.java:207)\n\tat org.eclipse.cdt.internal.ui.viewsupport.AsyncTreeContentProvider$1.run(AsyncTreeContentProvider.java:52)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Thanks for reporting this, the call-hierarchy for plain C in 4.0M5 is completely broken. \n\nTo avoid the problem you can do one of the following:\n* work with a single project (close all other projects)\n* use C++, only: (in the project properties add a file-type for *.c)\n* or use CDT 4.0M4, instead.\n\nAndrew, please have a look, the root cause is a NPE when accessing composite bindings.",
    "I\u0027ll take a look\n",
    "Created an attachment (id\u003d59680)\nfix plus regression test\n\n",
    "I\u0027ve applied the above patch to HEAD\n\nMarking as FIXED",
    "Setting to milestone 4.0 so we can generate a report of all bugs fixed in 4.0."
  ],
  "commentCreationDates": [
    "2007-02-23T13:20:17+01:00",
    "2007-02-23T13:57:14+01:00",
    "2007-02-23T14:46:42+01:00",
    "2007-02-23T16:52:26+01:00",
    "2007-02-23T16:53:50+01:00",
    "2007-05-14T02:34:58+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.cdt.internal.core.pdom.dom.c.PDOMCParameter",
      "elements": [
        {
          "method": "org.eclipse.cdt.internal.core.index.composite.c.CompositeCFunction.getParameters",
          "source": "CompositeCFunction.java:36"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.ext.CElementHandle.extractParameterTypes",
          "source": "CElementHandle.java:259"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.ext.FunctionHandle.\u003cinit\u003e",
          "source": "FunctionHandle.java:29"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.ext.CElementHandleFactory.create",
          "source": "CElementHandleFactory.java:60"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.viewsupport.IndexUI.getCElementForName",
          "source": "IndexUI.java:161"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.viewsupport.IndexUI.findAnyDeclaration",
          "source": "IndexUI.java:170"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.viewsupport.IndexUI.findRepresentative",
          "source": "IndexUI.java:99"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.callhierarchy.CHQueries.findCalls",
          "source": "CHQueries.java:84"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.callhierarchy.CHContentProvider.asyncronouslyComputeRefersTo",
          "source": "CHContentProvider.java:128"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.callhierarchy.CHContentProvider.asyncronouslyComputeChildren",
          "source": "CHContentProvider.java:99"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.viewsupport.AsyncTreeContentProvider.runJob",
          "source": "AsyncTreeContentProvider.java:212"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.viewsupport.AsyncTreeContentProvider.access$0",
          "source": "AsyncTreeContentProvider.java:207"
        },
        {
          "method": "org.eclipse.cdt.internal.ui.viewsupport.AsyncTreeContentProvider$1.run",
          "source": "AsyncTreeContentProvider.java:52"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "175267",
      "date": "2007-02-23T13:20:17+01:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "major"
    }
  ],
  "groupId": "175267",
  "bugId": "175267",
  "date": "2007-02-23T13:20:17+01:00",
  "product": "CDT",
  "component": "cdt-core",
  "severity": "major"
}