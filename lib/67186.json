{
  "comments": [
    " ",
    "Sorry, hit the return key to early.\n\n3.0 RC2\n\n- put a breakpoint in the constructor of the R21EditorStackPresentation\n- launch runtime workbench (new workspace)\n- create a project, some files and open some perspectives and editors\n- switch to the R21 presentation\n- close and reopen Eclipse\n- close all perspectives\n-\u003e breakpoint is hit\n\n\nHere is the stack:\n\nThread [main] (Suspended (breakpoint at line 303 in \nR21EditorStackPresentation))\n\tR21EditorStackPresentation.\u003cinit\u003e(Composite, IStackPresentationSite) \nline: 303\n\tR21PresentationFactory.createEditorPresentation(Composite, \nIStackPresentationSite) line: 28\n\tPresentationFactoryUtil.createPresentation\n(AbstractPresentationFactory, int, Composite, IStackPresentationSite, \nIPresentationSerializer, IMemento) line: 38\n\tEditorStack(PartStack).createControl(Composite) line: 364\n\tEditorSashContainer(PartSashContainer).addChild\n(PartSashContainer$RelationshipInfo) line: 332\n\tEditorSashContainer(PartSashContainer).add(LayoutPart, int, int, int, \nLayoutPart) line: 962\n\tEditorSashContainer(PartSashContainer).add(LayoutPart, int, float, \nLayoutPart) line: 262\n\tEditorSashContainer(PartSashContainer).addEnhanced(LayoutPart, int, \nfloat, LayoutPart) line: 223\n\tEditorSashContainer(PartSashContainer).add(LayoutPart) line: 195\n\tEditorSashContainer.createDefaultWorkbook() line: 85\n\tEditorSashContainer.getActiveWorkbook() line: 124\n\tEditorSashContainer.updateTabList() line: 336\n\tEditorSashContainer.setActiveWorkbook(EditorStack, boolean) line: 316\n\tEditorSashContainer.childRemoved(LayoutPart) line: 79\n\tEditorSashContainer(PartSashContainer).remove(LayoutPart) line: 595\n\tEditorSashContainer.removeEditor(EditorPane) line: 197\n\tEditorAreaHelper.closeEditor(EditorPane) line: 111\n\tEditorAreaHelper.closeEditor(IEditorPart) line: 101\n\tEditorManager.closeEditor(IEditorReference) line: 202\n\tWorkbenchPage.closeEditors(IEditorReference[], boolean) line: 916\n\tWorkbenchPage.closeAllEditors(boolean) line: 863\n\tWorkbenchPage.closeAllPerspectives() line: 1099\n\tPerspectiveSwitcher$7.widgetSelected(SelectionEvent) line: 633\n\tTypedListener.handleEvent(Event) line: 89\n\tEventTable.sendEvent(Event) line: 82\n\tMenuItem(Widget).sendEvent(Event) line: 796\n\tDisplay.runDeferredEvents() line: 2732\n\tDisplay.readAndDispatch() line: 2398\n\tWorkbench.runEventLoop(Window$IExceptionHandler, Display) line: 1362\n\tWorkbench.runUI() line: 1333\n\tWorkbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 252\n\tPlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 141\n\tIDEApplication.run(Object) line: 96\n\tPlatformActivator$1.run(Object) line: 334\n\tEclipseStarter.run(Object) line: 272\n\tEclipseStarter.run(String[], Runnable) line: 128\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not \navailable [native method]\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25\n\tMethod.invoke(Object, Object[]) line: 324\n\tMain.basicRun(String[]) line: 185\n\tMain.run(String[]) line: 638\n\tMain.main(String[]) line: 622\n",
    "Furthermore this presentation is never disposed",
    "There is currently some support in the workbench to create a default workbook \nwhen there are no more of them.  So this is the expected behaviour.  But never \ncalling dispose is a problem.  \n\nI get the following exception after performing the steps above.\n!ENTRY org.eclipse.ui 4 0 Jun 15, 2004 09:36:50.701\n!MESSAGE Widget is disposed\n!STACK 0\norg.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2691)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.SWT.error(SWT.java:2587)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:381)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283)\n\tat \norg.eclipse.ui.internal.presentations.r21.widgets.CTabFolder.setSelectionForegr\nound(CTabFolder.java:1515)\n\tat \norg.eclipse.ui.internal.presentations.R21EditorStackPresentation.drawGradient\n(R21EditorStackPresentation.java:480)\n\tat \norg.eclipse.ui.internal.presentations.R21EditorStackPresentation.updateGradient\n(R21EditorStackPresentation.java:467)\n\tat \norg.eclipse.ui.internal.presentations.R21EditorStackPresentation.access$5\n(R21EditorStackPresentation.java:440)\n\tat \norg.eclipse.ui.internal.presentations.R21EditorStackPresentation$9.shellDeactiv\nated(R21EditorStackPresentation.java:245)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:167)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:801)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE\n(Decorations.java:1472)\n\tat org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1325)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2955)\n\tat org.eclipse.swt.widgets.Decorations.windowProc\n(Decorations.java:1429)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3298)\n\tat org.eclipse.swt.internal.win32.OS.BringWindowToTop(Native Method)\n\tat org.eclipse.swt.widgets.Decorations.bringToTop(Decorations.java:206)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:744)\n\tat org.eclipse.jface.window.Window.open(Window.java:644)\n\tat org.eclipse.ui.internal.OpenPreferencesAction.run\n(OpenPreferencesAction.java:72)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:915)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:866)\n\tat org.eclipse.jface.action.ActionContributionItem$7.handleEvent\n(ActionContributionItem.java:785)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2732)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2398)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1362)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1333)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:252)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:96)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:334)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:272)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:128)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:638)\n\tat org.eclipse.core.launcher.Main.main(Main.java:622)",
    "Please see bug 66895. It contains a patch for this.",
    "updateTabList should just refer to the activeEditorWorkbook field rather than\ncalling getActiveWorkbook().\n",
    "Gunnar, why would you say this is critical. What are the side-effects for \nyou?  Does this stop you from working?",
    "No, I just discovered this during fixing 66895 and I was wondering why a new \ninstance is created and why this is never disposed.",
    "Verified that this no longer happens in 3.1, for either the default presentation\nor the R2.1 presentation.",
    "Marking as verified.\n"
  ],
  "commentCreationDates": [
    "2004-06-15T11:10:36+02:00",
    "2004-06-15T11:14:12+02:00",
    "2004-06-15T11:15:53+02:00",
    "2004-06-15T15:41:09+02:00",
    "2004-06-15T16:34:35+02:00",
    "2004-06-15T17:15:20+02:00",
    "2004-06-15T22:30:25+02:00",
    "2004-06-16T08:43:19+02:00",
    "2005-04-27T20:48:49+02:00",
    "2005-04-27T20:48:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2691"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2587"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:381"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:283"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.r21.widgets.CTabFolder.setSelectionForeground",
          "source": "CTabFolder.java:1515"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.R21EditorStackPresentation.drawGradient",
          "source": "R21EditorStackPresentation.java:480"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.R21EditorStackPresentation.updateGradient",
          "source": "R21EditorStackPresentation.java:467"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.R21EditorStackPresentation.access$5",
          "source": "R21EditorStackPresentation.java:440"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.R21EditorStackPresentation$9.shellDeactivated",
          "source": "R21EditorStackPresentation.java:245"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:167"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:820"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:801"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:1472"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_ACTIVATE",
          "source": "Shell.java:1325"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2955"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1429"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3298"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.BringWindowToTop",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.bringToTop",
          "source": "Decorations.java:206"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:744"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:644"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:72"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:915"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:866"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionContributionItem.java:785"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2732"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2398"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1362"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1333"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:252"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:334"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:272"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:128"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:638"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:622"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "67186",
      "date": "2004-06-15T15:41:09+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "67186",
  "bugId": "67186",
  "date": "2004-06-15T11:10:36+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}