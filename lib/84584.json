{
  "comments": [
    "Build: I20050202\n\nPropertyManagerTest#testConcurrentDeletion was failing intermittently.  This\ntest creates several threads that read and write properties while a project is\nbeing deleted.\n\nThe failure occurred because the new property manager implementation was opening\na stream on a property index after the corresponding project had already been\ndeleted from the tree.  When the deletion tries to delete the metadata location\nfor the project, it fails because a file stream is open.\n\nThe fix is to:\n\n1) Delete the properties for a resource after deleting the resource from the tree\n2) Check for resource existence in the tree before setting any property.\n\nCombined, these two measures ensure that property indexes cannot be written\nafter the resource has been deleted, and prevents the concurrency failure.",
    "For the record, here is the test failure:\n\njunit.framework.AssertionFailedError: 1.99.0:\norg.eclipse.core.internal.resources.ResourceException: Problems encountered\nwhile deleting resources.\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat org.eclipse.core.tests.harness.CoreTest.fail(CoreTest.java:67)\n\tat\norg.eclipse.core.tests.internal.properties.PropertyManagerTest.testConcurrentDelete(PropertyManagerTest.java:123)\n...",
    "Fix released. Also fixed up some tests in PropertyManagerTest that did not\ncreate resources before setting properties on them (property manager previously\ndidn\u0027t care about this distinction)."
  ],
  "commentCreationDates": [
    "2005-02-07T16:35:24+01:00",
    "2005-02-07T16:52:45+01:00",
    "2005-02-07T17:23:30+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.resources.ResourceException",
      "message": "Problems encountered while deleting resources.",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "org.eclipse.core.tests.harness.CoreTest.fail",
          "source": "CoreTest.java:67"
        },
        {
          "method": "org.eclipse.core.tests.internal.properties.PropertyManagerTest.testConcurrentDelete",
          "source": "PropertyManagerTest.java:123"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "84584",
      "date": "2005-02-07T16:52:45+01:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "84584",
  "bugId": "84584",
  "date": "2005-02-07T16:35:24+01:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}