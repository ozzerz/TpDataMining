{
  "comments": [
    "Expanding a folder that doesn\u0027t have read permissions will cause a ClassCastException.  \n\nError Log:\nAn internal error occurred during: \"Check existence\".\njava.lang.ClassCastException: org.eclipse.rse.core.filters.SystemFilterReference cannot be cast to org.eclipse.rse.subsystems.files.core.subsystems.IRemoteFile\n\tat org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.internalGetChildren(SystemViewRemoteFileAdapter.java:559)\n\tat org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.getChildren(SystemViewRemoteFileAdapter.java:553)\n\tat org.eclipse.rse.internal.ui.view.SystemView$CheckExistenceJob.run(SystemView.java:5772)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\nSteps to Reproduce:\n1. Create a new folder.\n2. Change it\u0027s permissions so it doesn\u0027t have read permissions.  (In the shell type one of: chmod 000 foldername, chmod 111 foldername, or chmod 333 foldername)\n3. Try to expand the folder in the Remote Systems View.\n\n-----------Enter bugs above this line-----------\nTM 2.0.1 Testing\ninstallation : eclipse-SDK-3.3\nRSE install  : RSE 2.0.1\njava.runtime : Sun 1.5.0_11-b03\nos.name:     : Windows XP, Service Pack 2\n------------------------------------------------",
    "The problem was that in the SystemView.CheckExistsJob we were assuming that the parent model object (as set in the context) to query would have the same adapter as the child.  In this case, the parent model object ended up being a filter so the wrong adapter was used.\n\nI\u0027ve committed the fix to cvs.",
    "Here is the changed code, from SystemView v1.153:\n\n// need to use the model object to get the adapter (since it could be a filter)\nISystemViewElementAdapter adapter \u003d\n    (ISystemViewElementAdapter)_context.getModelObject()\n        .getAdapter(ISystemViewElementAdapter.class);\n\nWould that also work properly if the parent is the subsystem itself?",
    "If the parent is a subsystem, then we would get the adapter for the subsystem for use in querying the children so I don\u0027t see a problem with that.",
    "Verified fixed in I20071108."
  ],
  "commentCreationDates": [
    "2007-10-05T19:08:40+02:00",
    "2007-10-05T20:29:19+02:00",
    "2007-10-09T12:56:36+02:00",
    "2007-10-09T15:14:17+02:00",
    "2007-11-08T16:26:20+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.rse.core.filters.SystemFilterReference cannot be cast to org.eclipse.rse.subsystems.files.core.subsystems.IRemoteFile",
      "elements": [
        {
          "method": "org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.internalGetChildren",
          "source": "SystemViewRemoteFileAdapter.java:559"
        },
        {
          "method": "org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.getChildren",
          "source": "SystemViewRemoteFileAdapter.java:553"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemView$CheckExistenceJob.run",
          "source": "SystemView.java:5772"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "205592",
      "date": "2007-10-05T19:08:40+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "205592",
  "bugId": "205592",
  "date": "2007-10-05T19:08:40+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}