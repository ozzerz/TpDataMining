{
  "comments": [
    "Debug a launch to termination\nWindow-\u003ePreferences--\u003eLaunch History\nRemove the recent debug launch\nHit Apply\nHit Restore Defaults\nHit Ok\n\njava.lang.ClassCastException: java.lang.String\n\tat \norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.pr\nopertyChange(LaunchConfigurationManager.java:813)\n\tat \norg.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.fireProperty\nChangeEvent(AbstractUIPlugin.java:247)\n\tat org.eclipse.ui.plugin.AbstractUIPlugin$1.propertyChange\n(AbstractUIPlugin.java:188)\n\tat org.eclipse.core.runtime.Preferences.firePropertyChangeEvent\n(Preferences.java:505)\n\tat org.eclipse.core.runtime.Preferences.setToDefault\n(Preferences.java:1189)\n\tat \norg.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.setToDefault\n(AbstractUIPlugin.java:415)\n\tat org.eclipse.jface.preference.FieldEditor.store(FieldEditor.java:573)\n\tat \norg.eclipse.debug.internal.ui.preferences.LaunchHistoryPreferencePage.performOk\n(LaunchHistoryPreferencePage.java:192)\n\tat org.eclipse.jface.preference.PreferencePage.performApply\n(PreferencePage.java:375)\n\tat org.eclipse.jface.preference.PreferencePage$2.widgetSelected\n(PreferencePage.java:247)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java(Compiled \nCode))\n\tat org.eclipse.jface.window.Window.open(Window.java:538)\n\tat org.eclipse.ui.internal.OpenPreferencesAction.run\n(OpenPreferencesAction.java:47)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:590)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java(Compiled Code))\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java(Compiled Code))\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1068)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:739)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:200)\n\tat org.eclipse.core.launcher.Main.run(Main.java:643)\n\tat org.eclipse.core.launcher.Main.main(Main.java:476)",
    "*** Bug 17734 has been marked as a duplicate of this bug. ***",
    "This looks like a bug with IntegerFieldEditor.  \nTest case:\nSet breakpoint in \nLaunchConfigurationManager in propertyChange().\nKey in change to max history size field, \nclick Apply.\nNote that \u0027new value\u0027 is an Integer, as expected.\nNow, click \u0027Restore Defaults\u0027 \nbutton, then Apply.\nNote that \u0027new value\u0027 is now a String, not expected.\n\nMoving to UI.",
    "This is the way the preferences work, although it is understandably confusing.\nSince the preferences are not actually individually typed, the type of object \nin the callback depends on which call is used to change the value.  With \nsetValue(String, int) the value is an Integer or null.  With setToDefault\n(String) the value is a String or null.  See the method specs on Preferences.\nListeners need to be prepared to handle both Integer and String values (and \nnull).  Alternatively, listeners can always ignore the values in the event and \nget the new value from the preferences.\n\nThere are several places that need fixing up:\nCompare:\norg.eclipse.compare.internal.Utilities.getValue(PropertyChangeEvent, boolean)\n\nDebug:\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.p\nropertyChange(PropertyChangeEvent)\n\nJDT Debug:\norg.eclipse.jdt.internal.debug.ui.actions.ToggleStepFilterAction.propertyChange\n(PropertyChangeEvent)\norg.eclipse.jdt.internal.debug.ui.JavaDebugOptionsManager.propertyChange\n(PropertyChangeEvent) (2 matches)\n\nUI:\norg.eclipse.ui.internal.WorkbenchActionBuilder.propertyChange\n(PropertyChangeEvent)\n\nTeam:\norg.eclipse.team.internal.ccvs.ui.CVSUIPlugin.propertyChange\n(PropertyChangeEvent)\n\nI\u0027ll file separate PRs for these.\nTeams should double-check all senders of \norg.eclipse.jface.util.PropertyChangeEvent.getNewValue() and getOldValue().\n\nReassigning this one back to Debug.\n",
    "The new runtime-level Preferences mechanism has the same pattern.\nShould double-check refs to \norg.eclipse.core.runtime.Preferences.PropertyChangeEvent as well as the JFace \none.\n",
    "Filed the following bugs for each of the components above:\nCompare: bug 17889\nJDT-Debug: bug 17890\nTeam: bug 17891\nPlatform-UI: bug 17892\n",
    "Fixed.",
    "Please verify.",
    "Verified."
  ],
  "commentCreationDates": [
    "2002-05-22T20:42:58+02:00",
    "2002-05-24T18:12:29+02:00",
    "2002-05-24T21:13:17+02:00",
    "2002-05-27T03:54:02+02:00",
    "2002-05-27T04:05:43+02:00",
    "2002-05-27T04:50:54+02:00",
    "2002-05-28T02:48:38+02:00",
    "2002-05-28T02:48:49+02:00",
    "2002-05-29T03:11:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "java.lang.String",
      "elements": [
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationManager.propertyChange",
          "source": "LaunchConfigurationManager.java:813"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.firePropertyChangeEvent",
          "source": "AbstractUIPlugin.java:247"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$1.propertyChange",
          "source": "AbstractUIPlugin.java:188"
        },
        {
          "method": "org.eclipse.core.runtime.Preferences.firePropertyChangeEvent",
          "source": "Preferences.java:505"
        },
        {
          "method": "org.eclipse.core.runtime.Preferences.setToDefault",
          "source": "Preferences.java:1189"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.setToDefault",
          "source": "AbstractUIPlugin.java:415"
        },
        {
          "method": "org.eclipse.jface.preference.FieldEditor.store",
          "source": "FieldEditor.java:573"
        },
        {
          "method": "org.eclipse.debug.internal.ui.preferences.LaunchHistoryPreferencePage.performOk",
          "source": "LaunchHistoryPreferencePage.java:192"
        },
        {
          "method": "org.eclipse.jface.preference.PreferencePage.performApply",
          "source": "PreferencePage.java:375"
        },
        {
          "method": "org.eclipse.jface.preference.PreferencePage$2.widgetSelected",
          "source": "PreferencePage.java:247"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:538"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:47"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:590"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1068"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:739"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:200"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:643"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:476"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "16970",
      "date": "2002-05-22T20:42:58+02:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "critical"
    }
  ],
  "groupId": "16970",
  "bugId": "16970",
  "date": "2002-05-22T20:42:58+02:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "critical"
}