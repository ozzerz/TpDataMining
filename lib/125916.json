{
  "comments": [
    "AspectJ gets a fatal error when weaving spring.jar version 1.2.4 (ajcore file attached).  Am able to weave same aspects using AspectJ 1.2.1 and am able to weave using same aspects and an earlier version of spring.jar (1.1.3dev).",
    "Created an attachment (id\u003d33884)\najcore file\n\n",
    "The JVM it fails with is 1.4.2.  It does work, however, with JVM 1.5.0.",
    "There are multiple exceptions in the trace.\n\nThe first exception is:\n\njava.lang.IllegalStateException: Expecting raw type org.aspectj.weaver.TypeFactory.createParameterizedType(TypeFactory.java:42)\norg.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.classTypeSignature2TypeX(BcelGenericSignatureToTypeXConverter.java:82)\n\nwhich I *think* I fixed recently for another bug.  The other exceptions are:\n\njava.lang.RuntimeException: Can\u0027t find type java.lang.annotation.Annotation\norg.aspectj.weaver.World.handleRequiredMissingTypeDuringResolution(World.java:241)\norg.aspectj.weaver.World.resolve(World.java:219)\n\njava.lang.RuntimeException: Can\u0027t find type org.hibernate.usertype.UserType\norg.aspectj.weaver.World.handleRequiredMissingTypeDuringResolution(World.java:241)\norg.aspectj.weaver.World.resolve(World.java:219)\n\njava.lang.RuntimeException: Can\u0027t find type net.sf.cglib.proxy.MethodInterceptor\norg.aspectj.weaver.World.handleRequiredMissingTypeDuringResolution(World.java:241)\norg.aspectj.weaver.World.resolve(World.java:219)\n\njava.lang.RuntimeException: Can\u0027t find type java.lang.Enum\norg.aspectj.weaver.World.handleRequiredMissingTypeDuringResolution(World.java:241)\norg.aspectj.weaver.World.resolve(World.java:219)\n\n\nIt looks like some elements of spring 1.2.4 contain Java5 code - perhaps they aren\u0027t utilised if spring is executed on a 1.4 VM but they are still in the jar.  So if we try and weave the entire jar on a 1.4 vm we still attempt to resolve the dependencies for these 1.5 related entities.\n\nI\u0027ll probably have to leave Adrian to explore it further...",
    "During 1.5.1a/1.5.2 development I fixed numerous cases of \"Expecting raw type\" - have you tried weaving spring with a more recent AspectJ?  The \u0027cantFindType\u0027 xlint option can currently be set to \u0027ignore\u0027 for skipping errors about missing types if you *know* that the code for which the types cannot be found will not be executed.  cantfindtype may get deprecated shortly though, replaced with a more robust mechanism.",
    "I currently get errors weaving spring.jar w/Spring 2.0.4, JDK 1.5 and both AspectJ 1.5.3a and the latest dev build:\n\n[iajc]  -- (ClassCastException) org.aspectj.weaver.MissingResolvedTypeWithKnownSignature\n     [iajc] org.aspectj.weaver.MissingResolvedTypeWithKnownSignature\n     [iajc] java.lang.ClassCastException: org.aspectj.weaver.MissingResolvedTypeWithKnownSignature\n     [iajc] \tat org.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.typeArgument2TypeX(BcelGenericSignatureToTypeXConverter.java:187)\n     [iajc] \tat org.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.classTypeSignature2TypeX(BcelGenericSignatureToTypeXConverter.java:94)\n     [iajc] \tat org.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.fieldTypeSignature2TypeX(BcelGenericSignatureToTypeXConverter.java:131)\n     [iajc] \tat org.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.typeSignature2TypeX(BcelGenericSignatureToTypeXConverter.java:217)\n     [iajc] \tat org.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.typeSignature2TypeX(BcelGenericSignatureToTypeXConverter.java:202)\n     [iajc] \tat org.aspectj.weaver.bcel.BcelMethod.unpackGenericSignature(BcelMethod.java:365)\n     [iajc] \tat org.aspectj.weaver.bcel.BcelMethod.getGenericParameterTypes(BcelMethod.java:312)\netc.\n\nLet me know if there is anything I can provide to help but I think you can reproduce it simply by trying to weave the latest spring.jar.",
    "diagnose in 1.5.4 timeframe"
  ],
  "commentCreationDates": [
    "2006-01-31T20:27:01+01:00",
    "2006-01-31T20:27:45+01:00",
    "2006-01-31T23:57:03+01:00",
    "2006-02-01T08:44:11+01:00",
    "2006-07-11T10:02:36+02:00",
    "2007-05-05T17:10:36+02:00",
    "2007-10-23T18:10:16+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.aspectj.weaver.MissingResolvedTypeWithKnownSignature      [iajc]",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.BcelGenericSignatureToTypeXConverter.typeArgument2TypeX",
          "source": "BcelGenericSignatureToTypeXConverter.java:187"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "125916",
      "date": "2007-05-05T17:10:36+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "125916",
  "bugId": "125916",
  "date": "2006-01-31T20:27:01+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}