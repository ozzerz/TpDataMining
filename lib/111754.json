{
  "comments": [
    "Sometimes after entering anything in open type dialog, the dialog cannot be\nclosed any more, neither with OK, Cancel or the Window close cross.\n\nI have to kill Eclipse with task manager.\n\nThis does happen only occasionally and I cannot always reproduce it, but there\nseems to be something very wrong.",
    "Found a way to always reproduce it:\n\nSelect another Java source buffer with the buffer selector \u003e\u003e\n(which takes abnormally long, about 10s), this step is necessary.\n\nAfterwards do C-S-T, after the Type is found (and not before), the dialog cannot\nbe closed any more.",
    "With source buffer you mean Javae editor?\n\nCan you start Eclipse form a console and press CTRL + break in the console when\nthis happens?",
    "Juergen, I can\u0027t reproduce the problem. Can you please provide more detailed\nsteps (best a zipped workspace with some files revealing the problem).\nAdditionally can you please answer the following questions:\n\n- is Eclipse frozen or does the dialog not close. If you press the Cancel or OK\n  button does the button responed to the click or is the UI frozen. If it is \n  frozen can you please create a VM dump. This will help a lot to track down the\n  problem.\n\n- is the anything in the log file ?\n\n- are you using a different XML library (for example xerces) than the one\n  provided by the JDK. There is a know issue here which prevents the dialog\n  from closing in this case (see bug 106447)",
    "After I rebootet XP I could not reproduce the bug for some time and then not\nalways. I have a feeling it has something to do with the Clearcase plugin.\nAnyway, the vm dump will show. But how do I create it in Windows XP?",
    "Start Eclipse using the following command from a Windows command prompt,\nreplacing eclipse_install and jdk_install with the path to the corresponding\ninstallations on disk:\n\nC:\\eclipse_install\\eclipse.exe -vm C:\\jdk_install\\bin\\java.exe -vmargs -Xms30M\n-Xmx200M\n\nwhen the situation occurs simple activate the command window and press\nCtrl+Break. This will print the VM dump to the command window. Please make sure\nyou increase the height of the screen buffer size via the properties dialog of\nthe command window (Layout tab) so that the dump will not be clipped.",
    "Closing as works for me since I can\u0027t reproduce the bug. Juergen, if you can\nprovide the requested information please reopen.",
    "Created an attachment (id\u003d30219)\nthreaddump\n\nD:\\eclipse\u003eD:\\eclipse\\eclipse.exe -data D:\\GBOBWorkspace -vm\nD:\\jdk1.5.0_05\\bin\\java.exe -vmargs -XX:+UseParallelGC -server",
    "OK, I could reproduce it (and had started eclipse from a console window, too 8-)\n\nI\u0027ll attach the thread dump.\n\nAlso, in the logs is the stacktrace below, I don\u0027t know if it has anything todo\nwith the problem. It is kind of strange, because there are the weblogic classes.\nClasspath DOS env variable is definitely empty, I ran eclipse.exe\n\n\n!ENTRY org.eclipse.ui 4 4 2005-11-18 13:46:10.523\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 2005-11-18 13:46:10.523\n!MESSAGE org/apache/xalan/processor/TransformerFactoryImpl\n!STACK 0\njava.lang.NoClassDefFoundError: org/apache/xalan/processor/TransformerFactoryImpl\n\tat\nweblogic.xml.jaxp.RegistryTransformerFactory.\u003cinit\u003e(RegistryTransformerFactory.java:62)\n\tat\nweblogic.xml.jaxp.RegistrySAXTransformerFactory.\u003cinit\u003e(RegistrySAXTransformerFactory.java:12)\n\tat sun.reflect.GeneratedConstructorAccessor10.newInstance(Unknown Source)\n\tat\nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n\tat java.lang.Class.newInstance0(Class.java:350)\n\tat java.lang.Class.newInstance(Class.java:303)\n\tat javax.xml.transform.FactoryFinder.newInstance(FactoryFinder.java:100)\n\tat javax.xml.transform.FactoryFinder.findJarServiceProvider(FactoryFinder.java:278)\n\tat javax.xml.transform.FactoryFinder.find(FactoryFinder.java:185)\n\tat javax.xml.transform.TransformerFactory.newInstance(TransformerFactory.java:103)\n\tat\norg.eclipse.jdt.internal.corext.util.TypeInfoHistory.save(TypeInfoHistory.java:374)\n\tat\norg.eclipse.jdt.internal.corext.util.TypeInfoHistory.save(TypeInfoHistory.java:337)\n\tat\norg.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog2.close(TypeSelectionDialog2.java:177)\n\tat\norg.eclipse.jdt.internal.ui.dialogs.OpenTypeSelectionDialog2.close(OpenTypeSelectionDialog2.java:94)\n\tat org.eclipse.jface.dialogs.Dialog.okPressed(Dialog.java:856)\n\tat\norg.eclipse.ui.dialogs.SelectionStatusDialog.okPressed(SelectionStatusDialog.java:142)\n\tat org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:409)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:809)\n\tat org.eclipse.jface.window.Window.open(Window.java:787)\n\tat\norg.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog2.open(TypeSelectionDialog2.java:173)\n\tat org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run(OpenTypeAction.java:57)\n\tat org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run(OpenTypeAction.java:78)\n\tat org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)\n\tat org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:223)\n\tat org.eclipse.jface.commands.ActionHandler.execute(ActionHandler.java:117)\n\tat org.eclipse.core.commands.Command.execute(Command.java:311)\n\tat\norg.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:396)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:459)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:781)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:828)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:550)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:493)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:117)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:917)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:880)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:876)\n\tat org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1190)\n\tat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3135)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3038)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Juergen,\n\nthanks for providing the additional information.\n\nAs outlined in bug 106447 the problem is a misconfiguration of the XML parser\nyou are using. The class org/apache/xalan/processor/TransformerFactoryImpl can\u0027t\nbe found.\n\nI can\u0027t do anything against the misconfiguration, however I added protection\ncode to the dialog that it closes even if this situation occurs. The protection\ncode went into 3.2 M3.",
    "But how can I as user misconfigure the XML parser? Eclipse JDT is supposed to\ncome with all the plugins it needs, so if the parser fails, it is a bug in the\neclipse product (either for not delivering a parser or not configuring it right).\n\nBut if it is a misconfigurion induced by me, it is still a bug of Eclipse,\nbecause the plugin system is supposed to shield the plugins from each other, so\nmy user plugins are not to affect JDT plugins.",
    "No, since Eclipse 3.0 we don\u0027t have our own XML parser anymore. We take the one\nthat is part of the JDK installation. \n\nThere are two ways to overrule the default parser:\n\n- installing one in the JDK (see bug 106447)\n- a plug-in contributed to Eclipse installs again a misconfigured XML parser.\n\nFrom the stack trace it looks like that their is an XML parser from weblogic\nthat causes the problem. And this is not under Eclipse SDK control.\n\nDo you have an additional weblogic plug-in installed ?",
    "Regarding your point: \"the plugin system is supposed to shield\"\n\nThis is not possible since the plug of a XML parser happens on JDK level over\nwhich we don\u0027t have control. We only shield plug-ins against each other.",
    "(In reply to comment #11)\n\nI did not have a weblogic plug-in installed, but I was remote debugging a WLS\nEJB and running a local WLS client (from a Java project with weblogic.jar in the\nclasspath) in the console. \nIf that is the reason for another XML parser being drawn in, this is a too easy\nway to break JDT and should be fixed.",
    "As you can see the from the stack trace produced by Eclipse the weblogic XML\nparser is available inside the Eclipse VM.\n\nIf you don\u0027t have an additional plug-in install in Eclipse then the only way\nthat parser can end up in the Eclipse VM is by installing it into the JDK location.\n\nCan you try the following: \n\n- a fresh Eclipse install without additional plug-ins\n- a fresh VM install or a different VM that is not used to debug your \n  application\n\nIf then there is still the web logic XML parser available in the Eclipse VM\nthere is really something strange.",
    "weblogic.jar is nowhere on the eclipse classpath, only on the classpath of a java project within eclipse.\n\nI could imagine that on running the project once, weblogic.jar somehow sets the system property javax.xml.transform.TransformerFactory which javax.xml.transform.TransformerFactory.newInstance() uses. And afterwards if the eclipse gui code gets called, it gets the wrong transformer.\n\nSo we have the situation that a JDT project can break the eclipse runtime.\n\nMaybe the gui code should check that it uses the correct transformer:\n\nsavingTransformer\n{\n   OpenTypeDialog();\n}"
  ],
  "commentCreationDates": [
    "2005-10-06T14:37:48+02:00",
    "2005-10-06T14:45:07+02:00",
    "2005-10-08T17:12:22+02:00",
    "2005-10-11T14:44:08+02:00",
    "2005-10-11T19:00:15+02:00",
    "2005-10-11T19:36:44+02:00",
    "2005-10-31T11:30:00+01:00",
    "2005-11-18T12:55:23+01:00",
    "2005-11-18T12:55:42+01:00",
    "2005-11-18T13:22:17+01:00",
    "2005-11-18T17:50:48+01:00",
    "2005-11-18T18:04:19+01:00",
    "2005-11-18T18:06:30+01:00",
    "2005-11-18T18:13:59+01:00",
    "2005-11-18T19:00:01+01:00",
    "2005-11-21T13:06:50+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/apache/xalan/processor/TransformerFactoryImpl",
      "elements": [
        {
          "method": "weblogic.xml.jaxp.RegistryTransformerFactory.\u003cinit\u003e",
          "source": "RegistryTransformerFactory.java:62"
        },
        {
          "method": "weblogic.xml.jaxp.RegistrySAXTransformerFactory.\u003cinit\u003e",
          "source": "RegistrySAXTransformerFactory.java:12"
        },
        {
          "method": "sun.reflect.GeneratedConstructorAccessor10.newInstance",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "DelegatingConstructorAccessorImpl.java:27"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Constructor.java:494"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:350"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:303"
        },
        {
          "method": "javax.xml.transform.FactoryFinder.newInstance",
          "source": "FactoryFinder.java:100"
        },
        {
          "method": "javax.xml.transform.FactoryFinder.findJarServiceProvider",
          "source": "FactoryFinder.java:278"
        },
        {
          "method": "javax.xml.transform.FactoryFinder.find",
          "source": "FactoryFinder.java:185"
        },
        {
          "method": "javax.xml.transform.TransformerFactory.newInstance",
          "source": "TransformerFactory.java:103"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.TypeInfoHistory.save",
          "source": "TypeInfoHistory.java:374"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.TypeInfoHistory.save",
          "source": "TypeInfoHistory.java:337"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog2.close",
          "source": "TypeSelectionDialog2.java:177"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.OpenTypeSelectionDialog2.close",
          "source": "OpenTypeSelectionDialog2.java:94"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.okPressed",
          "source": "Dialog.java:856"
        },
        {
          "method": "org.eclipse.ui.dialogs.SelectionStatusDialog.okPressed",
          "source": "SelectionStatusDialog.java:142"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.buttonPressed",
          "source": "Dialog.java:409"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:556"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3080"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2713"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:809"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:787"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog2.open",
          "source": "TypeSelectionDialog2.java:173"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run",
          "source": "OpenTypeAction.java:57"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run",
          "source": "OpenTypeAction.java:78"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:246"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:223"
        },
        {
          "method": "org.eclipse.jface.commands.ActionHandler.execute",
          "source": "ActionHandler.java:117"
        },
        {
          "method": "org.eclipse.core.commands.Command.execute",
          "source": "Command.java:311"
        },
        {
          "method": "org.eclipse.core.commands.ParameterizedCommand.execute",
          "source": "ParameterizedCommand.java:396"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:459"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:781"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:828"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:550"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3",
          "source": "WorkbenchKeyboard.java:493"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent",
          "source": "WorkbenchKeyboard.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:917"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:867"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:852"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:880"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:876"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.wmChar",
          "source": "Widget.java:1190"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3135"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3038"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3706"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1656"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2711"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 8,
      "bugId": "111754",
      "date": "2005-11-18T12:55:42+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "111754",
  "bugId": "111754",
  "date": "2005-10-06T14:37:48+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "critical"
}