{
  "comments": [
    "Created an attachment (id\u003d76448)\nRCP application that demonstrates the problem\n\nBuild ID: I20070621-1340\n\nSteps To Reproduce:\n1. Run the attached RCP app\n2. Click the only button\n\nAn editor and error log should appear.\n\n3. Click on \u0027item\u0027 in the editor\n\nThe following exception appears in the log:\n\njava.lang.ArrayIndexOutOfBoundsException: 1\nat org.eclipse.jface.viewers.ColumnViewer$2.canEdit(ColumnViewer.java:236)\nat org.eclipse.jface.viewers.ColumnViewerEditor.activateCellEditor(ColumnViewerEditor.java:147)\nat org.eclipse.jface.viewers.ColumnViewerEditor.handleEditorActivationEvent(ColumnViewerEditor.java:367)\nat org.eclipse.jface.viewers.ColumnViewer.triggerEditorActivationEvent(ColumnViewer.java:637)\nat org.eclipse.jface.viewers.ColumnViewer.handleMouseDown(ColumnViewer.java:621)\nat org.eclipse.jface.viewers.ColumnViewer.access$0(ColumnViewer.java:617)\nat org.eclipse.jface.viewers.ColumnViewer$1.mouseDown(ColumnViewer.java:108)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:178)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\nat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\nat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat columnviewer.Application.start(Application.java:14)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1144)\n\n\nMore information:\nThe issue here is that the ColumnViewer\u0027s EditingSupport has a fixed columnIndex, which becomes wrong if a preceding column is disposed.",
    "Created an attachment (id\u003d76472)\nFix\n\nWe need to clear all legacy editing supports",
    "Is this a 3.3.1 candidate?",
    "Created an attachment (id\u003d76572)\nPatch without needless DisposeEvent\n\n",
    "Created an attachment (id\u003d76573)\nmylyn/context/zip\n\n",
    "Created an attachment (id\u003d76574)\nPatch with Test-Case\n\n",
    "Created an attachment (id\u003d76575)\nmylyn/context/zip\n\n",
    "Created an attachment (id\u003d76817)\nMore fixes\n\n\u003d\u003e Fix against AIOB-Exceptions\n\u003d\u003e Added check-method that only Legacy-Support-Instances are cleared",
    "Created an attachment (id\u003d76818)\nmylyn/context/zip\n\n",
    "+1 for 3.3.1 (and HEAD)",
    "Released to R3_3_maintenance \u003e\u003d 20070831",
    "Integration for 3.4 is done in bug #201905",
    "Sideeffects in complete Suite:\n- Widget Diposed on WinXP\n- NPE on OS-X",
    "Ok. Current state CVS 3_3_maint-state is that we fixed the ArrayIndexOutOfBoundsException. The real fix (clearing the editors) to the problem produced failing tests.\n\nRemoving target for now because we might (very likely) miss 3.3.1 cut off",
    "What would be if we would recreate the editor every time when we are in legacy mode?",
    "Created an attachment (id\u003d77833)\nPatcht\n\nThis way tests on WinXP passes",
    "And the OS-X seems to be green too (well the suite is not green but the failing tests can have nothing to do with the change with the patch)",
    "Created an attachment (id\u003d77891)\nPatch for 3.3.1\n\n",
    "The patch looks good, so +1 from me for 3.3.1 but we would need a separate bugzilla for it, and we should run the test suite on Windows, GTK, and the Mac to make sure there are no surprises. :)",
    "Right, this is the bug for 3.3.1. Sorry for causing confusion.",
    "Released to 3_3_1_maint \u003e\u003d 20070907",
    "... and marking fixed",
    "+1 from me but this methods need comments - it is not at all clear why this is being done just from the code.",
    "(In reply to comment #22)\n\u003e +1 from me but this methods need comments - it is not at all clear why this is\n\u003e being done just from the code.\n\u003e \n\n/**\n * Clear all cell-editors setup for backwards compatibility in\n * {@link #setupEditingSupport(int, ViewerColumn)}. This has to be done\n * whenever a column is disposed because the index cached when the anonymous\n * class is created has to be readjusted\n */\n\n?",
    "That looks fine Tom.",
    "added comment in CVS",
    "Bug200558 test had an unused private class that I deleted as it was generating build warnings.",
    "- Verified in M20070913-1500\n- Integration in CVS-HEAD is done in bug #201905"
  ],
  "commentCreationDates": [
    "2007-08-20T16:18:47+02:00",
    "2007-08-20T19:55:28+02:00",
    "2007-08-21T19:56:48+02:00",
    "2007-08-21T20:41:01+02:00",
    "2007-08-21T20:41:03+02:00",
    "2007-08-21T21:01:02+02:00",
    "2007-08-21T21:01:04+02:00",
    "2007-08-23T23:03:40+02:00",
    "2007-08-23T23:03:42+02:00",
    "2007-08-31T15:08:26+02:00",
    "2007-08-31T15:36:57+02:00",
    "2007-08-31T15:39:42+02:00",
    "2007-08-31T19:38:17+02:00",
    "2007-08-31T20:11:58+02:00",
    "2007-09-06T16:18:42+02:00",
    "2007-09-06T19:30:48+02:00",
    "2007-09-06T20:50:22+02:00",
    "2007-09-07T17:40:58+02:00",
    "2007-09-07T17:47:12+02:00",
    "2007-09-07T17:51:22+02:00",
    "2007-09-07T17:57:37+02:00",
    "2007-09-07T17:57:54+02:00",
    "2007-09-07T19:04:46+02:00",
    "2007-09-07T19:18:14+02:00",
    "2007-09-07T21:34:32+02:00",
    "2007-09-07T21:46:25+02:00",
    "2007-09-11T20:12:46+02:00",
    "2007-09-17T23:55:53+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "1",
      "elements": [
        {
          "method": "org.eclipse.jface.viewers.ColumnViewer$2.canEdit",
          "source": "ColumnViewer.java:236"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnViewerEditor.activateCellEditor",
          "source": "ColumnViewerEditor.java:147"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnViewerEditor.handleEditorActivationEvent",
          "source": "ColumnViewerEditor.java:367"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnViewer.triggerEditorActivationEvent",
          "source": "ColumnViewer.java:637"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnViewer.handleMouseDown",
          "source": "ColumnViewer.java:621"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnViewer.access$0",
          "source": "ColumnViewer.java:617"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnViewer$1.mouseDown",
          "source": "ColumnViewer.java:108"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:178"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3682"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3293"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "columnviewer.Application.start",
          "source": "Application.java:14"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "200558",
      "date": "2007-08-20T16:18:47+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "200558",
  "bugId": "200558",
  "date": "2007-08-20T16:18:47+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}