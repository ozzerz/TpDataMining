{
  "comments": [
    "I20031119\n\nThe preview doesn\u0027t work when introducing a factory method on this example:\n\npublic class HelloWorld {\n\tprivate static HelloWorld instance;\n\t\n\tpublic static void main(String [] args) {\n\t\tinstance\u003d new HelloWorld();\n\t\tinstance.run();\n\t}\n\t\n\tprivate HelloWorld() {\n\t}\n\t\n\tprivate void run() {\n\t}\n}\n\nThe factory method is introduced correctly, though. It must have something to do\nwith the constructor being private; if it is public, the preview appears as\nexpected.",
    "It seems to be a general problem with private constructors, I\u0027ve been able to\nreproduce it on other examples.",
    "Silvio, do you have an exception in the log?",
    "Here\u0027s the message:\n\n!ENTRY org.eclipse.ui 4 4 Nov 19, 2003 12:07:35.771\n!MESSAGE Unhandled event loop exception\n!ENTRY org.eclipse.ui 4 0 Nov 19, 2003 12:07:35.771\n!MESSAGE Assertion failed: \n!STACK 0\norg.eclipse.jface.text.Assert$AssertionFailedException: Assertion failed: \n\tat org.eclipse.jface.text.Assert.isTrue(Assert.java:175)\n\tat org.eclipse.jface.text.Assert.isTrue(Assert.java:160)\n\tat org.eclipse.text.edits.TextEdit.getCoverage(TextEdit.java:399)\n\tat \norg.eclipse.jdt.internal.corext.textmanipulation.GroupDescription.getTextRange\n(GroupDescription.java:68)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.changes.TextChange$EditChange.getTex\ntRange(TextChange.java:58)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider$OffsetCompa\nrator.getOffset(ChangeElementContentProvider.java:58)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider$OffsetCompa\nrator.compare(ChangeElementContentProvider.java:49)\n\tat java.util.Arrays.mergeSort(Arrays.java:1278)\n\tat java.util.Arrays.sort(Arrays.java:1219)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.getSortedTe\nxtEditChanges(ChangeElementContentProvider.java:157)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.createChild\nren(ChangeElementContentProvider.java:127)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.getChildren\n(ChangeElementContentProvider.java:76)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.hasChildren\n(ChangeElementContentProvider.java:92)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable\n(AbstractTreeViewer.java:1152)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus\n(AbstractTreeViewer.java:1596)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem\n(AbstractTreeViewer.java:384)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$1.run\n(AbstractTreeViewer.java:363)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren\n(AbstractTreeViewer.java:349)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$5.run\n(AbstractTreeViewer.java:808)\n\tat org.eclipse.jface.viewers.StructuredViewer.preservingSelection\n(StructuredViewer.java:810)\n\tat org.eclipse.jface.viewers.CheckboxTreeViewer.preservingSelection\n(CheckboxTreeViewer.java:352)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged\n(AbstractTreeViewer.java:798)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.ChangeElementTreeViewer.inputChanged\n(ChangeElementTreeViewer.java:50)\n\tat org.eclipse.jface.viewers.ContentViewer.setInput\n(ContentViewer.java:238)\n\tat org.eclipse.jface.viewers.StructuredViewer.setInput\n(StructuredViewer.java:1004)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.setTreeViewerInput\n(PreviewWizardPage.java:308)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.createStandardPreviewP\nage(PreviewWizardPage.java:233)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.createControl\n(PreviewWizardPage.java:205)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.previewPressed\n(RefactoringWizardDialog2.java:431)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.access$3\n(RefactoringWizardDialog2.java:416)\n\tat org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2\n$1.widgetSelected(RefactoringWizardDialog2.java:547)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:847)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2187)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1877)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:583)\n\tat org.eclipse.jface.window.Window.open(Window.java:563)\n\tat \norg.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate\n(RefactoringStarter.java:56)\n\tat org.eclipse.jdt.ui.actions.IntroduceFactoryAction.run\n(IntroduceFactoryAction.java:103)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun\n(SelectionDispatchAction.java:196)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.run\n(SelectionDispatchAction.java:172)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:542)\n\tat org.eclipse.jface.action.ActionContributionItem.access$4\n(ActionContributionItem.java:494)\n\tat org.eclipse.jface.action.ActionContributionItem$6.handleEvent\n(ActionContributionItem.java:466)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:847)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2187)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1877)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1405)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1381)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:237)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:47)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:858)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:299)\n\tat org.eclipse.core.launcher.Main.run(Main.java:767)\n\tat org.eclipse.core.launcher.Main.main(Main.java:601)\n",
    "The problem is that introduce factory adds a group description for making the \nconstructor private although no edit is provided. Empty group description \naren\u0027t handled by the preview well.\n\nPossible fixes: \n\n- preview ignores empty group descriptions.\n- introduce factory doesn\u0027t create a group description in the case where\n  the visibility of the constructor doesn\u0027t change.\n\nNot critical for M5 since it only happens with private constructors. Replacing \nprivate constructors with a factory isn\u0027t very common.\n",
    "The preview page should handle this case better.",
    "Fixed for \u003e I20031202"
  ],
  "commentCreationDates": [
    "2003-11-19T10:00:03+01:00",
    "2003-11-19T10:07:13+01:00",
    "2003-11-19T10:12:16+01:00",
    "2003-11-19T11:11:21+01:00",
    "2003-11-19T12:56:31+01:00",
    "2003-11-21T18:31:06+01:00",
    "2003-12-03T13:52:13+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jface.text.Assert$AssertionFailedException",
      "message": "Assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.jface.text.Assert.isTrue",
          "source": "Assert.java:175"
        },
        {
          "method": "org.eclipse.jface.text.Assert.isTrue",
          "source": "Assert.java:160"
        },
        {
          "method": "org.eclipse.text.edits.TextEdit.getCoverage",
          "source": "TextEdit.java:399"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.textmanipulation.GroupDescription.getTextRange",
          "source": "GroupDescription.java:68"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.changes.TextChange$EditChange.getTextRange",
          "source": "TextChange.java:58"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider$OffsetComparator.getOffset",
          "source": "ChangeElementContentProvider.java:58"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider$OffsetComparator.compare",
          "source": "ChangeElementContentProvider.java:49"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1278"
        },
        {
          "method": "java.util.Arrays.sort",
          "source": "Arrays.java:1219"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.getSortedTextEditChanges",
          "source": "ChangeElementContentProvider.java:157"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.createChildren",
          "source": "ChangeElementContentProvider.java:127"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.getChildren",
          "source": "ChangeElementContentProvider.java:76"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementContentProvider.hasChildren",
          "source": "ChangeElementContentProvider.java:92"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable",
          "source": "AbstractTreeViewer.java:1152"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus",
          "source": "AbstractTreeViewer.java:1596"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:384"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:363"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:349"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$5.run",
          "source": "AbstractTreeViewer.java:808"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:810"
        },
        {
          "method": "org.eclipse.jface.viewers.CheckboxTreeViewer.preservingSelection",
          "source": "CheckboxTreeViewer.java:352"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged",
          "source": "AbstractTreeViewer.java:798"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.ChangeElementTreeViewer.inputChanged",
          "source": "ChangeElementTreeViewer.java:50"
        },
        {
          "method": "org.eclipse.jface.viewers.ContentViewer.setInput",
          "source": "ContentViewer.java:238"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setInput",
          "source": "StructuredViewer.java:1004"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.setTreeViewerInput",
          "source": "PreviewWizardPage.java:308"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.createStandardPreviewPage",
          "source": "PreviewWizardPage.java:233"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.PreviewWizardPage.createControl",
          "source": "PreviewWizardPage.java:205"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.previewPressed",
          "source": "RefactoringWizardDialog2.java:431"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2.access$3",
          "source": "RefactoringWizardDialog2.java:416"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.RefactoringWizardDialog2$1.widgetSelected",
          "source": "RefactoringWizardDialog2.java:547"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:847"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2187"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1877"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:583"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:563"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate",
          "source": "RefactoringStarter.java:56"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.IntroduceFactoryAction.run",
          "source": "IntroduceFactoryAction.java:103"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun",
          "source": "SelectionDispatchAction.java:196"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.run",
          "source": "SelectionDispatchAction.java:172"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:542"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$4",
          "source": "ActionContributionItem.java:494"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:466"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:847"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2187"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1877"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1405"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1381"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:237"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:299"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:767"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:601"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "46923",
      "date": "2003-11-19T11:11:21+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "46923",
  "bugId": "46923",
  "date": "2003-11-19T10:00:03+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}