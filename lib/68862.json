{
  "comments": [
    "build 3.0 + JDT/JDK_1_5\n\n1) create a Java project \u0027P\u0027\n2) create a class \u0027X.java\u0027\npublic class X\u003cT\u003e {\n\tT t;\n}\nclass T {\n}\n3) create a package \u0027p\u0027\n4) Inside package explorer try to move \u0027X.java\u0027 to \u0027p\u0027\n\na ClassCastException occurs\n\njava.lang.ClassCastException\n\tat \norg.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.reportDeclar\nation(TypeReferenceLocator.java:327)\n\tat \norg.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.reportDeclar\nation(TypeReferenceLocator.java:308)\n\tat \norg.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportR\neference(TypeReferenceLocator.java:166)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching\n(MatchLocator.java:1500)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching\n(MatchLocator.java:1590)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching\n(MatchLocator.java:1456)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.process\n(MatchLocator.java:1120)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches\n(MatchLocator.java:748)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches\n(MatchLocator.java:776)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches\n(MatchLocator.java:879)\n\tat \norg.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches\n(JavaSearchParticipant.java:94)\n\tat org.eclipse.jdt.core.search.SearchEngine.searchDeclarations\n(SearchEngine.java:1060)\n\tat \norg.eclipse.jdt.core.search.SearchEngine.searchDeclarationsOfReferencedTypes\n(SearchEngine.java:1204)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getTy\npeReferencesIn(ReferenceFinderUtil.java:63)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getTy\npeReferencesIn(ReferenceFinderUtil.java:55)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getTy\npesReferencedIn(ReferenceFinderUtil.java:46)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.addImport\nToSourcePackageTypes(MoveCuUpdateCreator.java:224)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.addUpdate\ns(MoveCuUpdateCreator.java:141)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.addUpdate\ns(MoveCuUpdateCreator.java:127)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.createCha\nngeManager(MoveCuUpdateCreator.java:91)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$MoveFilesF\noldersAndCusPolicy.createChangeManager(ReorgPolicyFactory.java:1760)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$MoveFilesF\noldersAndCusPolicy.checkFinalConditions(ReorgPolicyFactory.java:1859)\n\tat ...",
    "Works for me with latest. Can you still reproduce ?",
    "I can reproduce with latest.\n\nI forgot to say that the compliance level must be 1.5. The problem does not \noccur with 1.4",
    "I have the compliance level set to 1.5 as well. I would need more details.",
    "My fault: missed the declaration of secondary type T.",
    "Changed TypeReferenceLocator.reportDeclartion(ASTNode, ...) to report the \nerasure of the type binding instead of the type variable binding.\n\nAdded regression test JavaSearchTests.testDeclarationOfReferencedTypes09()"
  ],
  "commentCreationDates": [
    "2004-06-29T16:00:18+02:00",
    "2004-06-29T21:30:59+02:00",
    "2004-06-29T21:51:40+02:00",
    "2004-06-29T22:01:14+02:00",
    "2004-06-30T11:51:14+02:00",
    "2004-06-30T12:46:10+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.reportDeclaration",
          "source": "TypeReferenceLocator.java:327"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.reportDeclaration",
          "source": "TypeReferenceLocator.java:308"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeReferenceLocator.matchReportReference",
          "source": "TypeReferenceLocator.java:166"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:1500"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:1590"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:1456"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.process",
          "source": "MatchLocator.java:1120"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:748"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:776"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:879"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches",
          "source": "JavaSearchParticipant.java:94"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchDeclarations",
          "source": "SearchEngine.java:1060"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchDeclarationsOfReferencedTypes",
          "source": "SearchEngine.java:1204"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getTypeReferencesIn",
          "source": "ReferenceFinderUtil.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getTypeReferencesIn",
          "source": "ReferenceFinderUtil.java:55"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getTypesReferencedIn",
          "source": "ReferenceFinderUtil.java:46"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.addImportToSourcePackageTypes",
          "source": "MoveCuUpdateCreator.java:224"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.addUpdates",
          "source": "MoveCuUpdateCreator.java:141"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.addUpdates",
          "source": "MoveCuUpdateCreator.java:127"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.MoveCuUpdateCreator.createChangeManager",
          "source": "MoveCuUpdateCreator.java:91"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$MoveFilesFoldersAndCusPolicy.createChangeManager",
          "source": "ReorgPolicyFactory.java:1760"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.reorg.ReorgPolicyFactory$MoveFilesFoldersAndCusPolicy.checkFinalConditions",
          "source": "ReorgPolicyFactory.java:1859"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "68862",
      "date": "2004-06-29T16:00:18+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "68862",
  "bugId": "68862",
  "date": "2004-06-29T16:00:18+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}