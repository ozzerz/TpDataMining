{
  "comments": [
    "I opened the new integration build for 11/18/03 on a new workspace and started \ntaking files from CVS.  Afterwards, I was looking at my error log and came \nacross an error that said, \"Deadlock detected.  All locks owned by thread \nWorker-6 will be suspended.\"\n\nJust thought I would let you guys know :)\n(Stack trace below)\n\n\njava.lang.IllegalStateException\nat org.eclipse.core.internal.jobs.DeadlockDetector.reportDeadlock\n(DeadlockDetector.java:388)\nat org.eclipse.core.internal.jobs.LockManager.addLockWaitThread\n(LockManager.java:100)\nat org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:151)\nat org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:98)\nat org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:74)\nat org.eclipse.core.internal.resources.WorkManager.checkIn\n(WorkManager.java:109)\nat org.eclipse.core.internal.resources.Workspace.prepareOperation\n(Workspace.java:1516)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1549)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1579)\nat \norg.eclipse.team.internal.ccvs.core.util.SyncFileWriter.createCVSSubdirectory\n(SyncFileWriter.java:378)\nat org.eclipse.team.internal.ccvs.core.util.SyncFileWriter.writeFolderSync\n(SyncFileWriter.java:196)\nat \norg.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.commitCache\n(EclipseSynchronizer.java:906)\nat org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer$1.run\n(EclipseSynchronizer.java:521)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1554)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1579)\nat org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.flush\n(EclipseSynchronizer.java:519)\nat org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock$ThreadInfo.flush\n(ReentrantLock.java:179)\nat \norg.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock$ThreadInfo.popRule\n(ReentrantLock.java:105)\nat org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock.release\n(ReentrantLock.java:289)\nat \norg.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.endBatching\n(EclipseSynchronizer.java:505)\nat org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.run\n(EclipseSynchronizer.java:1383)\nat \norg.eclipse.team.internal.ccvs.ui.operations.CheckoutProjectOperation.checkout\n(CheckoutProjectOperation.java:153)\nat \norg.eclipse.team.internal.ccvs.ui.operations.CheckoutMultipleProjectsOperation.\ncheckout(CheckoutMultipleProjectsOperation.java:52)\nat org.eclipse.team.internal.ccvs.ui.operations.CheckoutOperation.checkout\n(CheckoutOperation.java:46)\nat org.eclipse.team.internal.ccvs.ui.operations.CheckoutOperation.execute\n(CheckoutOperation.java:31)\nat org.eclipse.team.internal.ccvs.ui.operations.CVSOperation.run\n(CVSOperation.java:128)\nat \norg.eclipse.team.internal.ccvs.ui.operations.CVSNonblockingRunnableContext.run\n(CVSNonblockingRunnableContext.java:47)\nat \norg.eclipse.team.internal.ccvs.ui.operations.CVSNonblockingRunnableContext$2.ru\nnInWorkspace(CVSNonblockingRunnableContext.java:67)\nat org.eclipse.core.internal.resources.InternalWorkspaceJob.run\n(InternalWorkspaceJob.java:37)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)",
    "This thread looks OK to me (i.e. we obtain our locks in the proper order). \nThere may be another thread that violated the lock ordering. Moving to Core. \nWould it be possible to get the trace of all threads involved in the deadlock?",
    "Unfortunately that was the only trace I had in my log pertaining to this \ndeadlock event :(\n\nSorry!",
    "Sorry, my last question was a question to Platform Core and not to the \nreporter of the bug. I was asking if it was possible to have the Job mechanism \nwrite the traces for all threads involved in the deadlock to the log and not \njust the one that Core decides to terminate (since that thread may be innocent)",
    "\n\n*** This bug has been marked as a duplicate of 46894 ***"
  ],
  "commentCreationDates": [
    "2003-11-18T20:29:35+01:00",
    "2003-11-18T20:50:45+01:00",
    "2003-11-18T22:22:37+01:00",
    "2003-11-19T14:10:01+01:00",
    "2003-11-19T22:41:52+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.DeadlockDetector.reportDeadlock",
          "source": "DeadlockDetector.java:388"
        },
        {
          "method": "org.eclipse.core.internal.jobs.LockManager.addLockWaitThread",
          "source": "LockManager.java:100"
        },
        {
          "method": "org.eclipse.core.internal.jobs.OrderedLock.doAcquire",
          "source": "OrderedLock.java:151"
        },
        {
          "method": "org.eclipse.core.internal.jobs.OrderedLock.acquire",
          "source": "OrderedLock.java:98"
        },
        {
          "method": "org.eclipse.core.internal.jobs.OrderedLock.acquire",
          "source": "OrderedLock.java:74"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:109"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1516"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1549"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1579"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.util.SyncFileWriter.createCVSSubdirectory",
          "source": "SyncFileWriter.java:378"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.util.SyncFileWriter.writeFolderSync",
          "source": "SyncFileWriter.java:196"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.commitCache",
          "source": "EclipseSynchronizer.java:906"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer$1.run",
          "source": "EclipseSynchronizer.java:521"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1554"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1579"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.flush",
          "source": "EclipseSynchronizer.java:519"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock$ThreadInfo.flush",
          "source": "ReentrantLock.java:179"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock$ThreadInfo.popRule",
          "source": "ReentrantLock.java:105"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock.release",
          "source": "ReentrantLock.java:289"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.endBatching",
          "source": "EclipseSynchronizer.java:505"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.run",
          "source": "EclipseSynchronizer.java:1383"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CheckoutProjectOperation.checkout",
          "source": "CheckoutProjectOperation.java:153"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CheckoutMultipleProjectsOperation.checkout",
          "source": "CheckoutMultipleProjectsOperation.java:52"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CheckoutOperation.checkout",
          "source": "CheckoutOperation.java:46"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CheckoutOperation.execute",
          "source": "CheckoutOperation.java:31"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CVSOperation.run",
          "source": "CVSOperation.java:128"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CVSNonblockingRunnableContext.run",
          "source": "CVSNonblockingRunnableContext.java:47"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.operations.CVSNonblockingRunnableContext$2.runInWorkspace",
          "source": "CVSNonblockingRunnableContext.java:67"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:37"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:62"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "46878",
      "duplicateId": "46894",
      "date": "2003-11-18T20:29:35+01:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "46894",
  "bugId": "46878",
  "duplicateId": "46894",
  "date": "2003-11-18T20:29:35+01:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}