{
  "comments": [
    "(please see thread with same subject in emf newsgroup)\n\nCurrently I\u0027m getting this exception:\n\n    Exception in thread \"main\" java.lang.NullPointerException\n        at org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap(XMLSaveImpl.java:2272)\n        at org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures(XMLSaveImpl.java:1351)\n        at org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.writeTopObject(XMLSaveImpl.java:650)\n        at org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.traverse(XMLSaveImpl.java:549)\n        at org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.save(XMLSaveImpl.java:193)\n        at org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.save(XMLResourceImpl.java:280)\n        at TestSerialization.main(TestSerialization.java:48)\n\nIt seems that it can happen when a Resource\u0027s content has length\u003d\u003d1, because XMLSaveImpl.traverse(List contents) won\u0027t set a currentNode in that case. Here\u0027s the code that produces it, consisting mainly of EMF demo snippets:\n\n            // load from XML, mostly taken from EclipseCon2006_EMF_XML_Binding.pdf page 36\n            ResourceSet resourceSet \u003d new ResourceSetImpl();\n            final ExtendedMetaData extendedMetaData \u003d new BasicExtendedMetaData(\n                    resourceSet.getPackageRegistry());\n            resourceSet.getLoadOptions().put(XMLResource.OPTION_EXTENDED_META_DATA,\n                    extendedMetaData);\n            XMLMap xmlMap \u003d new XMLMapImpl();\n            xmlMap.setNoNamespacePackage(AplusplusPackage.eINSTANCE);\n            resourceSet.getLoadOptions().put(XMLResource.OPTION_XML_MAP, xmlMap);\n            resourceSet.getResourceFactoryRegistry().getExtensionToFactoryMap()\n                    .put(Resource.Factory.Registry.DEFAULT_EXTENSION,\n                            new AplusplusResourceFactoryImpl());\n\n            Resource resource \u003d resourceSet.getResource(URI\n                    .createFileURI(\"/home/jfrantzius/Documents/eclipse_workspaces/sgw2/APlusPlus_20061114_stripped_trang/src/10038_2004_128_JobSheet_150.xml\"), true);\n            DocumentRoot documentRoot \u003d (DocumentRoot) resource.getContents().get(0);\n            JobSheet jobSheet \u003d documentRoot.getJobSheet();\n            System.out.println(jobSheet);\n           \n            // output XML, taken from EclipseCon2006_EMF_XML_Binding.pdf page 19\n            Document document \u003d ((XMLResource)resource).save(null,null,null);\n            TransformerFactory transformerFactory \u003d TransformerFactory.newInstance();\n            try {\n                Transformer transformer \u003d transformerFactory.newTransformer();\n                transformer.transform(new DOMSource(document), new StreamResult(System.out));\n            } catch (TransformerConfigurationException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } catch (TransformerException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }",
    "The fix is committed to CVS.",
    "Fixed in I200611230000."
  ],
  "commentCreationDates": [
    "2006-11-20T19:24:58+01:00",
    "2006-11-20T19:47:21+01:00",
    "2006-11-27T03:49:58+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveElementFeatureMap",
          "source": "XMLSaveImpl.java:2272"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.saveFeatures",
          "source": "XMLSaveImpl.java:1351"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.writeTopObject",
          "source": "XMLSaveImpl.java:650"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.traverse",
          "source": "XMLSaveImpl.java:549"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLSaveImpl.save",
          "source": "XMLSaveImpl.java:193"
        },
        {
          "method": "org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.save",
          "source": "XMLResourceImpl.java:280"
        },
        {
          "method": "TestSerialization.main",
          "source": "TestSerialization.java:48"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "165202",
      "date": "2006-11-20T19:24:58+01:00",
      "product": "EMF",
      "component": "XML/XMI",
      "severity": "normal"
    }
  ],
  "groupId": "165202",
  "bugId": "165202",
  "date": "2006-11-20T19:24:58+01:00",
  "product": "EMF",
  "component": "XML/XMI",
  "severity": "normal"
}