{
  "comments": [
    "Run a report with a chart and a script on the chart: A NPE is thrown. \n\nThis is a regression caused by fix for bug206712 in report engine. Here is the \ncode that causes the exception:\n\t\tString OnRenderScriptText \u003d handle.getOnRender( );\n\t\tif ( null !\u003d OnRenderScriptText )\n\t\t{\n\t\t\tString id \u003d ModuleUtil.getScriptUID( handle.getPropertyHandle( \nIReportItemModel.ON_RENDER_METHOD ) );\n\t\t\tScriptExpression scriptExpr \u003d new ScriptExpression( OnRenderScriptText,\n\t\t\t\t\tid );\n\t\t\titem.setOnRender( scriptExpr );\n\t\t}\n\nHere is the stack trace:\n\n\njava.lang.NullPointerException\n\tat \norg.eclipse.birt.report.model.api.util.XPathUtil.getResourceKeyDefn(XPathUtil.java:548)\n\tat \norg.eclipse.birt.report.model.api.util.XPathUtil.serializeToXPath(XPathUtil.java:282)\n\tat \norg.eclipse.birt.report.model.api.util.XPathUtil.getXPath(XPathUtil.java:125)\n\tat \norg.eclipse.birt.report.model.api.ModuleUtil.getScriptUID(ModuleUtil.java:946)\n\tat \norg.eclipse.birt.report.engine.parser.EngineIRVisitor.setupReportItem(EngineIRVisitor.java:1634)\n\tat \norg.eclipse.birt.report.engine.parser.EngineIRVisitor.visitExtendedItem(EngineIRVisitor.java:1417)\n\tat \norg.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitExtendedItem(DesignVisitor.java:1235)\n\tat \norg.eclipse.birt.report.model.elements.ExtendedItem.apply(ExtendedItem.java:135)\n\tat \norg.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123)\n\tat \norg.eclipse.birt.report.engine.parser.EngineIRVisitor.visitReportDesign(EngineIRVisitor.java:338)\n\tat \norg.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitReportDesign(DesignVisitor.java:1175)\n\tat \norg.eclipse.birt.report.model.elements.ReportDesign.apply(ReportDesign.java:89)\n\tat \norg.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123)\n\tat \norg.eclipse.birt.report.engine.parser.EngineIRVisitor.translate(EngineIRVisitor.java:250)\n\tat \norg.eclipse.birt.report.engine.parser.ReportParser.parse(ReportParser.java:178)\n\tat \norg.eclipse.birt.report.engine.api.impl.ReportRunnable.getReportIR(ReportRunnable.java:199)\n\tat \norg.eclipse.birt.report.engine.executor.ExecutionContext.getReport(ExecutionContext.java:678)\n\tat \norg.eclipse.birt.report.engine.executor.ReportExecutor.\u003cinit\u003e(ReportExecutor.java:78)\n\tat \norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:87)\n\tat \norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:66)\n\tat \norg.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(ReportEngineService.java:778)\n\tat \norg.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(ReportEngineService.java:648)\n\tat \norg.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(BirtViewerReportService.java:834)\n\tat \norg.eclipse.birt.report.service.actionhandler.BirtGetPageAllActionHandler.__execute(BirtGetPageAllActionHandler.java:135)\n\tat \norg.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(AbstractBaseActionHandler.java:89)\n\tat \norg.eclipse.birt.report.soapengine.processor.AbstractBaseDocumentProcessor.__executeAction(AbstractBaseDocumentProcessor.java:47)\n\tat \norg.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.executeAction(AbstractBaseComponentProcessor.java:159)\n\tat \norg.eclipse.birt.report.soapengine.processor.BirtDocumentProcessor.handleGetPageAll(BirtDocumentProcessor.java:183)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat \norg.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.process(AbstractBaseComponentProcessor.java:111)\n\tat \norg.eclipse.birt.report.soapengine.endpoint.BirtSoapBindingImpl.getUpdatedObjects(BirtSoapBindingImpl.java:66)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat \norg.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)\n\tat \norg.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)\n\tat org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)\n\tat \norg.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)\n\tat org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\n\tat org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\n\tat org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:453)\n\tat org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)\n\tat org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)\n\tat \norg.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.doPost(BirtSoapMessageDispatcherServlet.java:209)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:616)\n\tat \norg.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tat \norg.eclipse.equinox.http.registry.internal.ServletManager$ServletWrapper.service(ServletManager.java:180)\n\tat \norg.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)\n\tat \norg.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:109)\n\tat \norg.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:59)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tat \norg.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:280)\n\tat org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)\n\tat org.mortbay.jetty.servlet.ServletHandler.dispatch(ServletHandler.java:677)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1530)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1482)\n\tat org.mortbay.http.HttpServer.service(HttpServer.java:909)\n\tat org.mortbay.http.HttpConnection.service(HttpConnection.java:820)\n\tat org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:986)\n\tat org.mortbay.http.HttpConnection.handle(HttpConnection.java:837)\n\tat org.mortbay.http.SocketListener.handleConnection(SocketListener.java:245)\n\tat org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)\n\tat org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)",
    "Hi,David Michonneau.\nCan you attach your design file?\n\nXingjie He can\u0027t reproduce this bug.\n\nThanks.",
    "Created an attachment (id\u003d84337)\nreport to reproduce the issue\n\n",
    "*** Bug 211831 has been marked as a duplicate of this bug. ***",
    "*** Bug 211832 has been marked as a duplicate of this bug. ***",
    "The definedBy field of the property definition may be null. So need to avoid NPE."
  ],
  "commentCreationDates": [
    "2007-11-30T19:03:44+01:00",
    "2007-12-03T08:30:17+01:00",
    "2007-12-03T17:31:59+01:00",
    "2007-12-04T03:56:14+01:00",
    "2007-12-04T04:06:08+01:00",
    "2007-12-04T05:18:49+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.birt.report.model.api.util.XPathUtil.getResourceKeyDefn",
          "source": "XPathUtil.java:548"
        },
        {
          "method": "org.eclipse.birt.report.model.api.util.XPathUtil.serializeToXPath",
          "source": "XPathUtil.java:282"
        },
        {
          "method": "org.eclipse.birt.report.model.api.util.XPathUtil.getXPath",
          "source": "XPathUtil.java:125"
        },
        {
          "method": "org.eclipse.birt.report.model.api.ModuleUtil.getScriptUID",
          "source": "ModuleUtil.java:946"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.EngineIRVisitor.setupReportItem",
          "source": "EngineIRVisitor.java:1634"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.EngineIRVisitor.visitExtendedItem",
          "source": "EngineIRVisitor.java:1417"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitExtendedItem",
          "source": "DesignVisitor.java:1235"
        },
        {
          "method": "org.eclipse.birt.report.model.elements.ExtendedItem.apply",
          "source": "ExtendedItem.java:135"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor.apply",
          "source": "DesignVisitor.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.EngineIRVisitor.visitReportDesign",
          "source": "EngineIRVisitor.java:338"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitReportDesign",
          "source": "DesignVisitor.java:1175"
        },
        {
          "method": "org.eclipse.birt.report.model.elements.ReportDesign.apply",
          "source": "ReportDesign.java:89"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor.apply",
          "source": "DesignVisitor.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.EngineIRVisitor.translate",
          "source": "EngineIRVisitor.java:250"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.ReportParser.parse",
          "source": "ReportParser.java:178"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ReportRunnable.getReportIR",
          "source": "ReportRunnable.java:199"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.getReport",
          "source": "ExecutionContext.java:678"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.\u003cinit\u003e",
          "source": "ReportExecutor.java:78"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
          "source": "RunAndRenderTask.java:87"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:66"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "ReportEngineService.java:778"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "ReportEngineService.java:648"
        },
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "BirtViewerReportService.java:834"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtGetPageAllActionHandler.__execute",
          "source": "BirtGetPageAllActionHandler.java:135"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "AbstractBaseActionHandler.java:89"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.processor.AbstractBaseDocumentProcessor.__executeAction",
          "source": "AbstractBaseDocumentProcessor.java:47"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.executeAction",
          "source": "AbstractBaseComponentProcessor.java:159"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.processor.BirtDocumentProcessor.handleGetPageAll",
          "source": "BirtDocumentProcessor.java:183"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.processor.AbstractBaseComponentProcessor.process",
          "source": "AbstractBaseComponentProcessor.java:111"
        },
        {
          "method": "org.eclipse.birt.report.soapengine.endpoint.BirtSoapBindingImpl.getUpdatedObjects",
          "source": "BirtSoapBindingImpl.java:66"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.apache.axis.providers.java.RPCProvider.invokeMethod",
          "source": "RPCProvider.java:397"
        },
        {
          "method": "org.apache.axis.providers.java.RPCProvider.processMessage",
          "source": "RPCProvider.java:186"
        },
        {
          "method": "org.apache.axis.providers.java.JavaProvider.invoke",
          "source": "JavaProvider.java:323"
        },
        {
          "method": "org.apache.axis.strategies.InvocationStrategy.visit",
          "source": "InvocationStrategy.java:32"
        },
        {
          "method": "org.apache.axis.SimpleChain.doVisiting",
          "source": "SimpleChain.java:118"
        },
        {
          "method": "org.apache.axis.SimpleChain.invoke",
          "source": "SimpleChain.java:83"
        },
        {
          "method": "org.apache.axis.handlers.soap.SOAPService.invoke",
          "source": "SOAPService.java:453"
        },
        {
          "method": "org.apache.axis.server.AxisServer.invoke",
          "source": "AxisServer.java:281"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServlet.doPost",
          "source": "AxisServlet.java:699"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.doPost",
          "source": "BirtSoapMessageDispatcherServlet.java:209"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:616"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:689"
        },
        {
          "method": "org.eclipse.equinox.http.registry.internal.ServletManager$ServletWrapper.service",
          "source": "ServletManager.java:180"
        },
        {
          "method": "org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest",
          "source": "ServletRegistration.java:90"
        },
        {
          "method": "org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias",
          "source": "ProxyServlet.java:109"
        },
        {
          "method": "org.eclipse.equinox.http.servlet.internal.ProxyServlet.service",
          "source": "ProxyServlet.java:59"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:689"
        },
        {
          "method": "org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service",
          "source": "HttpServerManager.java:280"
        },
        {
          "method": "org.mortbay.jetty.servlet.ServletHolder.handle",
          "source": "ServletHolder.java:428"
        },
        {
          "method": "org.mortbay.jetty.servlet.ServletHandler.dispatch",
          "source": "ServletHandler.java:677"
        },
        {
          "method": "org.mortbay.jetty.servlet.ServletHandler.handle",
          "source": "ServletHandler.java:568"
        },
        {
          "method": "org.mortbay.http.HttpContext.handle",
          "source": "HttpContext.java:1530"
        },
        {
          "method": "org.mortbay.http.HttpContext.handle",
          "source": "HttpContext.java:1482"
        },
        {
          "method": "org.mortbay.http.HttpServer.service",
          "source": "HttpServer.java:909"
        },
        {
          "method": "org.mortbay.http.HttpConnection.service",
          "source": "HttpConnection.java:820"
        },
        {
          "method": "org.mortbay.http.HttpConnection.handleNext",
          "source": "HttpConnection.java:986"
        },
        {
          "method": "org.mortbay.http.HttpConnection.handle",
          "source": "HttpConnection.java:837"
        },
        {
          "method": "org.mortbay.http.SocketListener.handleConnection",
          "source": "SocketListener.java:245"
        },
        {
          "method": "org.mortbay.util.ThreadedServer.handle",
          "source": "ThreadedServer.java:357"
        },
        {
          "method": "org.mortbay.util.ThreadPool$PoolThread.run",
          "source": "ThreadPool.java:534"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "211626",
      "date": "2007-11-30T19:03:44+01:00",
      "product": "BIRT",
      "component": "Report",
      "severity": "critical"
    }
  ],
  "groupId": "211626",
  "bugId": "211626",
  "date": "2007-11-30T19:03:44+01:00",
  "product": "BIRT",
  "component": "Report",
  "severity": "critical"
}