{
  "comments": [
    "I get this message from an error in a recent dev build of AspectJ with load-time weaving. I don\u0027t know how there is a null source location associated with this message, but either it shouldn\u0027t be there or MessageUtil line 806 should use this patch:\n\nIndex: src/org/aspectj/bridge/MessageUtil.java\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nRCS file: /home/technology/org.aspectj/modules/bridge/src/org/aspectj/bridge/MessageUtil.java,v\nretrieving revision 1.11\ndiff -u -r1.11 MessageUtil.java\n--- src/org/aspectj/bridge/MessageUtil.java\t1 Jun 2006 09:36:37 -0000\t1.11\n+++ src/org/aspectj/bridge/MessageUtil.java\t31 Jul 2006 22:32:16 -0000\n@@ -803,7 +803,7 @@\n \t\twriter.println(baseMessage);\n \t\tfor (Iterator iter \u003d message.getExtraSourceLocations().iterator(); iter.hasNext();) {\n \t\t    ISourceLocation element \u003d (ISourceLocation) iter.next();\n-\t\t    writer.print(\"\\tsee also: \" + element.toString());\n+\t\t    writer.print(\"\\tsee also: \" + element);\n \t\t    if (iter.hasNext()) {\n \t\t        writer.println();\n \t\t    }\n\nNPE follows:\n\njava.lang.NullPointerException\n\tat org.aspectj.bridge.MessageUtil.addExtraSourceLocations(MessageUtil.java:806)\n\tat org.aspectj.bridge.MessageUtil.renderMessage(MessageUtil.java:793)\n\tat org.aspectj.bridge.Message.toString(Message.java:177)\n\tat org.aspectj.bridge.MessageWriter.render(MessageWriter.java:73)\n\tat org.aspectj.weaver.tools.WeavingAdaptor$WeavingAdaptorMessageHandler.render(WeavingAdaptor.java:471)\n\tat org.aspectj.bridge.MessageWriter.handleMessage(MessageWriter.java:41)\n\tat org.aspectj.weaver.tools.WeavingAdaptor$WeavingAdaptorMessageHandler.handleMessage(WeavingAdaptor.java:425)\n\tat org.aspectj.weaver.bcel.BcelTypeMunger.error(BcelTypeMunger.java:378)\n\tat org.aspectj.weaver.bcel.BcelTypeMunger.enforceDecpRule1_abstractMethodsImplemented(BcelTypeMunger.java:273)\n\tat org.aspectj.weaver.bcel.BcelTypeMunger.mungeNewParent(BcelTypeMunger.java:194)\n\tat org.aspectj.weaver.bcel.BcelTypeMunger.munge(BcelTypeMunger.java:106)\n\tat org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:450)\n\tat org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:115)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1613)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1564)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1341)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1163)\n\tat org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes(WeavingAdaptor.java:288)\n\tat org.aspectj.weaver.tools.WeavingAdaptor.weaveClass(WeavingAdaptor.java:214)\n\tat org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:76)\n\tat org.aspectj.ext.ltw13.ClassPreProcessorAdapter.preProcess(ClassPreProcessorAdapter.java:65)\n\tat org.codehaus.aspectwerkz.hook.impl.ClassPreProcessorHelper.defineClass0Pre(ClassPreProcessorHelper.java:107)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:539)\n...\n\nNOTE: I\u0027m using Alex Vasseur\u0027s adaptor to invoke AspectJ LTW from a 1.4 VM, but with recursion protection added. I don\u0027t think that should change the expected behavior of Aj.",
    "Hmmm ... I\u0027d rather see a testcase for the problem that leads to this...",
    "It was triggered by the current problems in LTW with ITD\u0027s. The system gets confused because of loading order for an ITD and it produces invalid bytecode so it dumps the bytecode in an abort. This bug meant that while producing the message output it hit an NPE, thereby obscuring the real error. With the patch I submitted I saw the real error message instead. \n\nCreating a test for this means forcing the weaver to crash, which shouldn\u0027t be possible, of course. With the ITD bug in place it\u0027s surely possible but it is dependent on order of loading in a large system (simple attempts fail)\n\nI have temporarily fixed the original crash by working around the bug by using maps instead of ITD\u0027s. With that change the woven bytecode is valid and the bug doesn\u0027t happen.",
    "reworked suggestion integrated. you have caught me in a good mood today."
  ],
  "commentCreationDates": [
    "2006-08-01T00:31:46+02:00",
    "2006-08-01T09:25:42+02:00",
    "2006-08-01T10:04:33+02:00",
    "2006-08-08T15:47:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.bridge.MessageUtil.addExtraSourceLocations",
          "source": "MessageUtil.java:806"
        },
        {
          "method": "org.aspectj.bridge.MessageUtil.renderMessage",
          "source": "MessageUtil.java:793"
        },
        {
          "method": "org.aspectj.bridge.Message.toString",
          "source": "Message.java:177"
        },
        {
          "method": "org.aspectj.bridge.MessageWriter.render",
          "source": "MessageWriter.java:73"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor$WeavingAdaptorMessageHandler.render",
          "source": "WeavingAdaptor.java:471"
        },
        {
          "method": "org.aspectj.bridge.MessageWriter.handleMessage",
          "source": "MessageWriter.java:41"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor$WeavingAdaptorMessageHandler.handleMessage",
          "source": "WeavingAdaptor.java:425"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.error",
          "source": "BcelTypeMunger.java:378"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.enforceDecpRule1_abstractMethodsImplemented",
          "source": "BcelTypeMunger.java:273"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.mungeNewParent",
          "source": "BcelTypeMunger.java:194"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.munge",
          "source": "BcelTypeMunger.java:106"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:450"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:115"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1613"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:1564"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:1341"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1163"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes",
          "source": "WeavingAdaptor.java:288"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor.weaveClass",
          "source": "WeavingAdaptor.java:214"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj.preProcess",
          "source": "Aj.java:76"
        },
        {
          "method": "org.aspectj.ext.ltw13.ClassPreProcessorAdapter.preProcess",
          "source": "ClassPreProcessorAdapter.java:65"
        },
        {
          "method": "org.codehaus.aspectwerkz.hook.impl.ClassPreProcessorHelper.defineClass0Pre",
          "source": "ClassPreProcessorHelper.java:107"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "152388",
      "date": "2006-08-01T00:31:46+02:00",
      "product": "AspectJ",
      "component": "LTWeaving",
      "severity": "normal"
    }
  ],
  "groupId": "152388",
  "bugId": "152388",
  "date": "2006-08-01T00:31:46+02:00",
  "product": "AspectJ",
  "component": "LTWeaving",
  "severity": "normal"
}