{
  "comments": [
    "build I200411240800 + jdtcore head\n\n1) create X.java\npublic class X\u003cT1\u003e {\n\tpublic \u003cM1\u003e X() {\n\t}\n\tclass Y\u003cT2\u003e {\n\t\tpublic \u003cM2\u003e Y() {\n\t\t}\n\t}\n\tvoid foo() {\n\t\tnew \u003cObject\u003eX\u003cObject\u003e().new \u003cObject\u003eY\u003cObject\u003e();\n\t}\n}\n2) close and reopen the editor\n\na ClassCastException occurs\n\njava.lang.ClassCastException\n\tat org.eclipse.jdt.core.dom.ASTNode.checkNewChild(ASTNode.java:1865)\n\tat org.eclipse.jdt.core.dom.ASTNode$NodeList.add(ASTNode.java:1242)\n\tat java.util.AbstractList.add(AbstractList.java:89)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2102)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1484)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2299)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:570)\n\tat\norg.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:175)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2478)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1226)\n\tat\norg.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:220)\n\tat org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:729)\n\tat org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:574)\n\tat\norg.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST(ASTProvider.java:565)\n\tat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST(ASTProvider.java:494)",
    "The problem seems to be inside\nconvert(org.eclipse.jdt.internal.compiler.ast.QualifiedAllocationExpression\nallocation) at line 2102. convert() is called instead of convertType().",
    "I will investigate. Thanks, David for your investigation.",
    "Yes, that was it.\nFixed and released in HEAD.\nRegression test added in ASTConverter15Test.test0087",
    "Verified (in I20041214-2000) that the test ensures that buiding an ast on the\ngiven cu doesn\u0027t throw a ClassCastException."
  ],
  "commentCreationDates": [
    "2004-11-30T15:21:56+01:00",
    "2004-11-30T15:25:04+01:00",
    "2004-11-30T18:24:32+01:00",
    "2004-11-30T20:19:53+01:00",
    "2004-12-15T17:40:13+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.checkNewChild",
          "source": "ASTNode.java:1865"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode$NodeList.add",
          "source": "ASTNode.java:1242"
        },
        {
          "method": "java.util.AbstractList.add",
          "source": "AbstractList.java:89"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2102"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1484"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2299"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:570"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations",
          "source": "ASTConverter.java:175"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2478"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1226"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnitResolver.convert",
          "source": "CompilationUnitResolver.java:220"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.internalCreateAST",
          "source": "ASTParser.java:729"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.createAST",
          "source": "ASTParser.java:574"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST",
          "source": "ASTProvider.java:565"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST",
          "source": "ASTProvider.java:494"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "79775",
      "date": "2004-11-30T15:21:56+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "79775",
  "bugId": "79775",
  "date": "2004-11-30T15:21:56+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}