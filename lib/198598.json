{
  "comments": [
    "Build ID: I20070625-1500\n\nSteps To Reproduce:\n1. Unzip Eclipse 3.3 package in by root on a shared directory\n2. Change permission to eclipse/configuration directory to read only to others\n3. Logon to a user other then root, try start eclipse.\n\nI got the following error\n\n!SESSION 2007-08-01 17:52:49.488 -----------------------------------------------\neclipse.buildId\u003dI20070625-1500\njava.fullversion\u003dJ2RE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260-20070628_13045 (JIT enabled)\nJ9VM - 20070628_13045_lHdSMR\nJIT  - dev_20070628_1800\nGC   - 20070601_AA\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86\n\n!ENTRY org.eclipse.osgi 4 0 2007-08-01 17:52:50.038\n!MESSAGE Error reading configuration: /opt/eclipse/configuration/org.eclipse.osgi/.manager/.fileTableLock (Permission denied)\n!STACK 0\njava.io.FileNotFoundException: /opt/eclipse/configuration/org.eclipse.osgi/.manager/.fileTableLock (Permission denied)\n\tat java.io.RandomAccessFile.open(Native Method)\n\tat java.io.RandomAccessFile.\u003cinit\u003e(RandomAccessFile.java:218)\n\tat org.eclipse.core.runtime.internal.adaptor.Locker_JavaNio.lock(Locker_JavaNio.java:32)\n\tat org.eclipse.osgi.storagemanager.StorageManager.lock(StorageManager.java:388)\n\tat org.eclipse.osgi.storagemanager.StorageManager.open(StorageManager.java:695)\n\tat org.eclipse.osgi.internal.baseadaptor.BaseStorage.initFileManager(BaseStorage.java:162)\n\tat org.eclipse.osgi.internal.baseadaptor.BaseStorage.initialize(BaseStorage.java:139)\n\tat org.eclipse.osgi.baseadaptor.BaseAdaptor.initializeStorage(BaseAdaptor.java:124)\n\tat org.eclipse.osgi.framework.internal.core.Framework.initialize(Framework.java:174)\n\tat org.eclipse.osgi.framework.internal.core.Framework.\u003cinit\u003e(Framework.java:147)\n\tat org.eclipse.osgi.framework.internal.core.OSGi.createFramework(OSGi.java:90)\n\tat org.eclipse.osgi.framework.internal.core.OSGi.\u003cinit\u003e(OSGi.java:31)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:283)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:172)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:591)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1144)",
    "What distro and version of linux are you using?\nWhat is your command line to launch eclipse?\nDo you have a custom config.ini or are you just using the default one?\n\nPlease run with \"eclipse -console -noexit\" and run the \u0027props\u0027 command and attach the values printed to the console.\n\nI tried this on RedHat 4 update 2 and it works in my environment.",
    "Created an attachment (id\u003d75252)\nosgi\u003e props\n\noutput of eclipse osgi\u003e props",
    "It is ran on Red Hat Enterprise Linux ES release 4 (Nahant Update 5)\n\nIt is just the classic package I download from eclipse.org.\nI did not update anything after unzip.\n\nI cd into the directory and run ./eclipse to launch eclipse.",
    "I got access to Conan\u0027s linux machine.  It turns out the user launching eclipse is part of the \"root\" group and the install location for eclipse is configured to be read-write for the \"root\" group.  This caused our test for canWrite to pass for the install area.  From there it is assumed that the \"configuration\" directory in the install area is also read-write by the user so it is used as the configuration.  But in this case the configuration directory was set to read-only for the user.\n\nSetting the install area to read-only works around the issue.  I think in this scenario the install area *should* be read-only to the normal user.  That makes this a invalid configuration.  I am not going to close as invalid because I think we need to do 2 things to improve this.\n\n1)  When computing the default configuration directory we should probably do the canWrite operation in the actual configuration under the install area instead of just on the parent directory.\n\n2)  We need to improve the error message somehow.  The error message is being propagated up from a very low level of the code and really does not mean anything to the end user to help them figure out this is a configuration setup issue.\n\nReducing severity because this is a configuration setup issue and there is a work around.",
    "Created an attachment (id\u003d81751)\npatch\n\nProposed fix to check the actual default configuration directory for canWrite",
    "Will release fix after M3.",
    "Patch released for 3.4 M4."
  ],
  "commentCreationDates": [
    "2007-08-02T00:26:40+02:00",
    "2007-08-02T16:36:51+02:00",
    "2007-08-02T19:20:31+02:00",
    "2007-08-02T19:22:48+02:00",
    "2007-08-03T00:05:49+02:00",
    "2007-10-31T19:18:25+01:00",
    "2007-10-31T19:19:05+01:00",
    "2007-11-05T17:47:13+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.io.FileNotFoundException",
      "message": "/opt/eclipse/configuration/org.eclipse.osgi/.manager/.fileTableLock (Permission denied)",
      "elements": [
        {
          "method": "java.io.RandomAccessFile.open",
          "source": "Native Method"
        },
        {
          "method": "java.io.RandomAccessFile.\u003cinit\u003e",
          "source": "RandomAccessFile.java:218"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.Locker_JavaNio.lock",
          "source": "Locker_JavaNio.java:32"
        },
        {
          "method": "org.eclipse.osgi.storagemanager.StorageManager.lock",
          "source": "StorageManager.java:388"
        },
        {
          "method": "org.eclipse.osgi.storagemanager.StorageManager.open",
          "source": "StorageManager.java:695"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.BaseStorage.initFileManager",
          "source": "BaseStorage.java:162"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.BaseStorage.initialize",
          "source": "BaseStorage.java:139"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.BaseAdaptor.initializeStorage",
          "source": "BaseAdaptor.java:124"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.initialize",
          "source": "Framework.java:174"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.\u003cinit\u003e",
          "source": "Framework.java:147"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.createFramework",
          "source": "OSGi.java:90"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.\u003cinit\u003e",
          "source": "OSGi.java:31"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.startup",
          "source": "EclipseStarter.java:283"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:172"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:591"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "198598",
      "date": "2007-08-02T00:26:40+02:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "198598",
  "bugId": "198598",
  "date": "2007-08-02T00:26:40+02:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}