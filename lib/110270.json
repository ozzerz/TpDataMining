{
  "comments": [
    "The test failed with a NPE.\n\nHere is the stack trace.\n\njava.lang.NullPointerException\nat\norg.eclipse.jdt.core.dom.CompilationUnit.setLineEndTable(CompilationUnit.java:199)\nat\norg.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:252)\nat org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:810)\nat org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:588)\nat\norg.eclipse.jdt.core.tests.dom.ConverterTestSetup.runConversion(ConverterTestSetup.java:133)\nat\norg.eclipse.jdt.core.tests.dom.ASTConverterBindingsTest.checkBindingEqualityForProject(ASTConverterBindingsTest.java:518)\nat\norg.eclipse.jdt.core.tests.dom.ASTConverterBindingsTest.test0001(ASTConverterBindingsTest.java:493)\nat\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.runTest(SuiteOfTestCases.java:99)\nat\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.superRun(SuiteOfTestCases.java:83)\nat\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$1.protect(SuiteOfTestCases.java:71)\nat\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.run(SuiteOfTestCases.java:80)\nat org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:313)\nat org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:199)\nat org.eclipse.test.CoreTestApplication.runTests(CoreTestApplication.java:35)\nat org.eclipse.test.CoreTestApplication.run(CoreTestApplication.java:31)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:377)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:164)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)\n\nI don\u0027t see why a NPE is thrown if the argument is null.\nvoid setLineEndTable(int[] lineEndTable) {\n\tif (lineEndTable \u003d\u003d null) {\n\t\tthrow new NullPointerException();\n\t}\n\t// alternate root is *not* considered a structural property\n\t// but we protect them nevertheless\n\tcheckModifiable();\n\tthis.lineEndTable \u003d lineEndTable;\n}\n\nThere is no need to throw a NPE. if the argument is null, an empty array should\nbe set as the lineEndTable. Then\norg.eclipse.jdt.core.dom.CompilationUnit.lineNumber(int position) would work as\nspecified.",
    "Created an attachment (id\u003d27369)\nProposed fix\n\nWith this patch, no NPE will be thrown anymore.",
    "Seems a bit of a hack to allow convert null values.\nWhy is someone setting a null table in there ? Is this platform dependant ?",
    "Normal senders should at least pass an empty table (Scanner.EMPTY_LINE_ENDS)",
    "I think there must be a path in the code where the parsed unit doesn\u0027t retrieve\nthe lineEnds from scanner before reaching this point.",
    "This would be possible if the scanner didn\u0027t record the line ends.\nWe might want to add an empty array when the line ends are persisted. What is\nsuspicious is the fact that this test suddendly failed without any changes from\nour side.\nAlso the patch is not a hack. The NPE is not specified and doesn\u0027t add anything.\n",
    "Created an attachment (id\u003d27404)\nProposed fix\n",
    "Created an attachment (id\u003d27613)\nNew patch\n",
    "This patch ensures that null is never passed to the setLineEndTable(). If null\nis about to be passed, we convert it to an empty array.",
    "Created an attachment (id\u003d27615)\nNew patch\n\nI moved the logic on the compilation result class.",
    "Fixed and released in HEAD.\nTests should not fail anymore with NPE.",
    "Verified for 3.2 M3 using build I20051025-0800+v_619"
  ],
  "commentCreationDates": [
    "2005-09-22T01:12:05+02:00",
    "2005-09-22T01:50:26+02:00",
    "2005-09-22T09:18:12+02:00",
    "2005-09-22T09:21:32+02:00",
    "2005-09-22T09:25:06+02:00",
    "2005-09-22T12:57:26+02:00",
    "2005-09-22T20:51:51+02:00",
    "2005-09-28T15:55:59+02:00",
    "2005-09-28T15:57:10+02:00",
    "2005-09-28T16:15:53+02:00",
    "2005-09-28T17:00:29+02:00",
    "2005-10-30T12:01:02+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnit.setLineEndTable",
          "source": "CompilationUnit.java:199"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnitResolver.convert",
          "source": "CompilationUnitResolver.java:252"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.internalCreateAST",
          "source": "ASTParser.java:810"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.createAST",
          "source": "ASTParser.java:588"
        },
        {
          "method": "org.eclipse.jdt.core.tests.dom.ConverterTestSetup.runConversion",
          "source": "ConverterTestSetup.java:133"
        },
        {
          "method": "org.eclipse.jdt.core.tests.dom.ASTConverterBindingsTest.checkBindingEqualityForProject",
          "source": "ASTConverterBindingsTest.java:518"
        },
        {
          "method": "org.eclipse.jdt.core.tests.dom.ASTConverterBindingsTest.test0001",
          "source": "ASTConverterBindingsTest.java:493"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.runTest",
          "source": "SuiteOfTestCases.java:99"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.superRun",
          "source": "SuiteOfTestCases.java:83"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$1.protect",
          "source": "SuiteOfTestCases.java:71"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.run",
          "source": "SuiteOfTestCases.java:80"
        },
        {
          "method": "org.eclipse.test.EclipseTestRunner.run",
          "source": "EclipseTestRunner.java:313"
        },
        {
          "method": "org.eclipse.test.EclipseTestRunner.run",
          "source": "EclipseTestRunner.java:199"
        },
        {
          "method": "org.eclipse.test.CoreTestApplication.runTests",
          "source": "CoreTestApplication.java:35"
        },
        {
          "method": "org.eclipse.test.CoreTestApplication.run",
          "source": "CoreTestApplication.java:31"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:377"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:164"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "110270",
      "date": "2005-09-22T01:12:05+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "110270",
  "bugId": "110270",
  "date": "2005-09-22T01:12:05+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}