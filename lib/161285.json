{
  "comments": [
    "Agent Controller does not appear to be available (IWAT0016E) when FIRST connecting to an Agent Controller with security enabled.\n\nUsing the TPTP-4.3.0-200610160100 build, connecting to an Agent Controller (e.g. test execution, test connection, etc.) with security enabled for the first time (e.g. no security certificates for the target host), the Agent Controller does not appear to be available:\n\nIWAT0016E The Agent Controller is not available on host cindyjin.Make sure that:\n* the Agent Controller is installed.\n* the Agent Controller is configured to communicate with your machine.\n* you have the correct host name and port number for the Agent Controller.\n\nConnecting for the second and subsequent times works.\n\nNote: The error message is not well formatted (e.g. space(s) after the period).",
    "Increasing severity since blocking Test project test cases.",
    "Is this really happening on All platforms?\n\nPlease attach servicelog file (set logging level\u003dDEBUG, type\u003dSimple), as this may show the same problem reported in bug 159677.",
    "(In reply to comment #2)\n\nWe have seen this behavior on:\n\n-Windows XP -\u003e Windows XP \n-Windows XP -\u003e Linux (x86)\n\n",
    "Created an attachment (id\u003d52274)\nService log (Linux x86)\n\n",
    "Created an attachment (id\u003d52275)\n.log (Windows XP)\n\n",
    "Retarget to 4.4.  This is a blocker to the adoption of the new AC\u0027s backwards compatibility on Linux (125103).",
    "(In reply to comment #6)\n\u003e Retarget to 4.4.  This is a blocker to the adoption of the new AC\u0027s backwards\n\u003e compatibility on Linux (125103).\n\nKarla/Kevin, we have seen this behaviour on Windows (XP -\u003e XP) - see comment #3.  This should be fixed in 4.3 i3 ",
    "\nI resolved a number of non-target specific issues when attempting to solve the linux security problems.\n\nThey dealt with some race condtions among the threads used for security. I believe they will resolve this issue on windows. \n\nWhen you say XP-\u003eXP ... I assume you mean that only the remote case is failing... I this the case? (I\u0027m sure I have tested both cases in the past but its possible that the remote case was overlooked, since this is a case where only the first connect fails)\n\n",
    "(In reply to comment #8)\n\nYes, we have seen this behavior in the remote case between Windows XP -\u003e Windows XP.\n",
    "\nI have been unable to get this to fail for the 1009 build. \nThe test case I am using is remote profile using secure AC.\n\nI am not doubting that you are seeing a failure... this just make verifying\nmy fixes problematic.",
    "Have you tried just the simple case - test connection?  It seemed to be consistent in the TPTP-4.3.0-200610160100 build.",
    "\n\nI did try \"Test Connection\" ... I did see a case where the very first connection seemed to fail... but I tried this with a number of new AC executable runs and I was not able to duplicate the failure. ",
    "Created an attachment (id\u003d52872)\nsecurity fix\n\n\nThis attachment contains a zip file... the zip files contains 1 dll that I beleive will fix the security bug you are seeing.\n\nExtract into AC/bin (WinXP only)",
    "(In reply to comment #13)\n\u003e Created an attachment (id\u003d52872) [edit]\n\u003e security fix\n\u003e This attachment contains a zip file... the zip files contains 1 dll that I\n\u003e beleive will fix the security bug you are seeing.\n\u003e Extract into AC/bin (WinXP only)\n\nSo the IWAT0016E error message does not appear in the local scenario (Windows XP), however, I get the following exception when testing a connection using a fresh workspace:\n\njava.lang.NullPointerException\n\tat org.eclipse.hyades.internal.execution.security.User.login(User.java:113)\n\tat org.eclipse.hyades.internal.execution.local.control.NodeImpl.authenticateUser(NodeImpl.java:512)\n\tat org.eclipse.hyades.security.internal.util.BaseConnectUtil.authenticateUser(BaseConnectUtil.java:631)\n\tat org.eclipse.hyades.security.internal.util.ConnectUtilUI.promptAuthentication(ConnectUtilUI.java:146)\n\tat org.eclipse.hyades.security.internal.util.BaseConnectUtil.promptAuthentication(BaseConnectUtil.java:256)\n\tat org.eclipse.hyades.security.internal.util.BaseConnectUtil.connect(BaseConnectUtil.java:240)\n\tat org.eclipse.hyades.security.internal.util.BaseConnectUtil.connect(BaseConnectUtil.java:538)\n\tat org.eclipse.hyades.security.internal.util.BaseConnectUtil.connect(BaseConnectUtil.java:199)\n\tat org.eclipse.hyades.trace.ui.HyadesUtil.testConnection(HyadesUtil.java:599)\n\tat org.eclipse.hyades.trace.ui.internal.core.TraceHostUI$1.run(TraceHostUI.java:576)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.hyades.trace.ui.internal.core.TraceHostUI.testConnection(TraceHostUI.java:502)\n\tat org.eclipse.hyades.trace.ui.internal.core.TraceHostUI.widgetSelected(TraceHostUI.java:743)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:65)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)\n\nTesting the connection again with the same user name and password works.\n\n",
    "(In reply to comment #14)\n\nBTW, I was using the TPTP-4.3.0-200610240100 driver with the Agent Controller patched with your DLL.",
    "\nyes... I see that exception in my log file as well... I have done a number\nof test connects... but yet only see a single exception... this must be from\nthe failure that I noted.\n\nare you seeing consistent first connect failure?",
    "Resetting target to 4.3i3 as this issue is found on Windows.\n\nKevin - this bug is not on the list I sent for approval to the PMC list. Once a fix is found/confirmed we\u0027ll ask for approval.",
    "(In reply to comment #16)\n\u003e yes... I see that exception in my log file as well... I have done a number\n\u003e of test connects... but yet only see a single exception... this must be from\n\u003e the failure that I noted.\n\u003e are you seeing consistent first connect failure?\n\nYes.",
    "\nThe fix I was suggesting for this bug is platform independent. \nFor linux it removes the seg-fault, but there are still some new AC issues when security is enabled. When I use my fix I get by the seg-fault but threads produced quickly consume 100% of the CPU. Using the IBM jdk this causes a heap stack overflow. Jrockit does not have the heap overflow but the java threads seem to consuming an awful large amount of cycles considering they should nly being doing an accept on a socket. Again, we still have new AC security issues, I\u0027m just trying to update the bug with what I have seen. This needs further investigation!\n\nFor windows I have only seen security fail once. (In many attempts)",
    "\nClosing bug... I have not been able to reproduce this since I updated my fix.\nPaul said to close the bug and he will verify the build and reopen if he has any issues.",
    "Verified in TPTP-4.3.0-200611070100.\n\nClosing."
  ],
  "commentCreationDates": [
    "2006-10-17T19:21:21+02:00",
    "2006-10-17T20:35:50+02:00",
    "2006-10-18T08:48:39+02:00",
    "2006-10-18T21:57:56+02:00",
    "2006-10-18T23:22:43+02:00",
    "2006-10-18T23:23:11+02:00",
    "2006-10-24T18:58:11+02:00",
    "2006-10-27T14:47:43+02:00",
    "2006-10-27T17:35:11+02:00",
    "2006-10-27T17:52:34+02:00",
    "2006-10-27T18:47:31+02:00",
    "2006-10-27T19:04:22+02:00",
    "2006-10-27T19:08:37+02:00",
    "2006-10-27T19:45:38+02:00",
    "2006-10-27T21:11:04+02:00",
    "2006-10-27T21:12:26+02:00",
    "2006-10-27T21:54:35+02:00",
    "2006-10-27T23:02:24+02:00",
    "2006-10-30T23:00:55+01:00",
    "2006-10-31T16:39:14+01:00",
    "2006-11-03T16:48:57+01:00",
    "2006-11-13T19:55:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.internal.execution.security.User.login",
          "source": "User.java:113"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.NodeImpl.authenticateUser",
          "source": "NodeImpl.java:512"
        },
        {
          "method": "org.eclipse.hyades.security.internal.util.BaseConnectUtil.authenticateUser",
          "source": "BaseConnectUtil.java:631"
        },
        {
          "method": "org.eclipse.hyades.security.internal.util.ConnectUtilUI.promptAuthentication",
          "source": "ConnectUtilUI.java:146"
        },
        {
          "method": "org.eclipse.hyades.security.internal.util.BaseConnectUtil.promptAuthentication",
          "source": "BaseConnectUtil.java:256"
        },
        {
          "method": "org.eclipse.hyades.security.internal.util.BaseConnectUtil.connect",
          "source": "BaseConnectUtil.java:240"
        },
        {
          "method": "org.eclipse.hyades.security.internal.util.BaseConnectUtil.connect",
          "source": "BaseConnectUtil.java:538"
        },
        {
          "method": "org.eclipse.hyades.security.internal.util.BaseConnectUtil.connect",
          "source": "BaseConnectUtil.java:199"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.HyadesUtil.testConnection",
          "source": "HyadesUtil.java:599"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.core.TraceHostUI$1.run",
          "source": "TraceHostUI.java:576"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.core.TraceHostUI.testConnection",
          "source": "TraceHostUI.java:502"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.core.TraceHostUI.widgetSelected",
          "source": "TraceHostUI.java:743"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.internal.OpenPreferencesAction.run",
          "source": "OpenPreferencesAction.java:65"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:539"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 14,
      "bugId": "161285",
      "date": "2006-10-27T21:11:04+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Agents",
      "severity": "blocker"
    }
  ],
  "groupId": "161285",
  "bugId": "161285",
  "date": "2006-10-17T19:21:21+02:00",
  "product": "TPTP Agent Controller",
  "component": "Platform.Agents",
  "severity": "blocker"
}