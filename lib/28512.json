{
  "comments": [
    "Build 20021216\n\nWhen running test suites in headless mode, a NPE is reported in some UI \nlistener:\n\njava.lang.NullPointerException\n\tat org.eclipse.ui.internal.WorkbenchPlugin$1.resourceChanged\n(WorkbenchPlugin.java:167)\n\tat org.eclipse.core.internal.events.NotificationManager$1.run\n(NotificationManager.java:137)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:852)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.core.internal.events.NotificationManager.notify\n(NotificationManager.java:152)\n\tat org.eclipse.core.internal.events.NotificationManager.broadcastChanges\n(NotificationManager.java:67)\n\tat org.eclipse.core.internal.resources.Workspace.broadcastChanges\n(Workspace.java:153)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation\n(Workspace.java:869)\n\tat org.eclipse.core.internal.resources.Project.build(Project.java:91)\n\tat org.eclipse.jdt.tests.core.CodeCorrectionTests.setUp\n(CodeCorrectionTests.java:69)\n\tat junit.framework.TestCase.runBare(TestCase.java:125)",
    "This is because the PDE JUnit core test application is in a plugin that \nrequires org.eclipse.ui.  So the UI plug-in gets activated, when it is not \nitself the main application.  We can add a null check here for this case (this \nis in new code), but PDE JUnit should really be structured so that when \nrunning core tests, the UI is not activated at all.\n",
    "This can be achieved by declaring the pre-reqs optional.\n\nThe cleaner solution is to either split the plugins in more than one. However, \na single optional plugin is already difficult enought to maintain...",
    "I\u0027ve moved the workbench resource listener to Workbench from WorkbenchPlugin, \nso the NPE will not happen.  However, PDE JUnit should include org.eclipse.ui \nas an optional plug-in.  Moving to JDT for this.\n",
    "*** Bug 28372 has been marked as a duplicate of this bug. ***",
    "People are now able to use pde.junit so this cannot be a P1. \nIn addition pde.junit is not part of the SDK.",
    "In the 3.0 stream there is now a pde.junit.runtime plug-in that partially \naddresses this problem (the development pre-reqs are separate from the run-\ntime).\n\nThe pde.junit.runtime in 3.0 M5 still pre-reqs UI plug-ins:\n   \u003crequires\u003e\n      \u003cimport plugin\u003d\"org.eclipse.ui.views\"/\u003e\n      \u003cimport plugin\u003d\"org.eclipse.ui\"/\u003e\n      \u003cimport plugin\u003d\"org.eclipse.core.resources\"/\u003e\n      \u003cimport plugin\u003d\"org.eclipse.update.ui.forms\"/\u003e\n      \u003cimport plugin\u003d\"org.eclipse.core.runtime.compatibility\"/\u003e\n   \u003c/requires\u003e\n\nGiven the separation of the run-time plug-in most of these pre-reqs could now \nbe declared as optional. PDE JUnit could check that the pre-req plug-ins from \nthe plug-in which contributes an application are available.\n\nMoving to PDE UI",
    "Erich, you must have accidentally pasted the wrong \u003crequires\u003e element in \ncomment #5.\n\nThe dependency list of pde.junit.runtime is pasted below.  The org.eclipse.ui \nis optional to allow running in headless mode.\nThe org.eclipse.runtime.compatibility dependency is also optional, so that \npeople can run tests against a pre-3.0 target platform.\n\n  \u003crequires\u003e\n      \u003cimport plugin\u003d\"org.eclipse.jdt.junit.runtime\"/\u003e\n      \u003cimport plugin\u003d\"org.eclipse.ui\" optional\u003d\"true\"/\u003e\n      \u003cimport plugin\u003d\"org.junit\"/\u003e\n      \u003cimport plugin\u003d\"org.eclipse.core.runtime.compatibility\" optional\u003d\"true\"/\u003e\n   \u003c/requires\u003e\n",
    "oops I was indeed looking at a stale plugin.xml.\nwhat you describe makes perfect sense - sorry for the noise\n\n"
  ],
  "commentCreationDates": [
    "2002-12-17T14:48:19+01:00",
    "2002-12-17T15:57:53+01:00",
    "2002-12-17T20:30:08+01:00",
    "2002-12-17T23:25:08+01:00",
    "2002-12-18T14:36:28+01:00",
    "2003-01-15T14:14:50+01:00",
    "2004-01-03T22:42:02+01:00",
    "2004-01-04T08:46:33+01:00",
    "2004-01-05T10:11:42+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin$1.resourceChanged",
          "source": "WorkbenchPlugin.java:167"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$1.run",
          "source": "NotificationManager.java:137"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:852"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:152"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:67"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastChanges",
          "source": "Workspace.java:153"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:869"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.build",
          "source": "Project.java:91"
        },
        {
          "method": "org.eclipse.jdt.tests.core.CodeCorrectionTests.setUp",
          "source": "CodeCorrectionTests.java:69"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:125"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "28512",
      "date": "2002-12-17T14:48:19+01:00",
      "product": "PDE",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "28512",
  "bugId": "28512",
  "date": "2002-12-17T14:48:19+01:00",
  "product": "PDE",
  "component": "UI",
  "severity": "major"
}