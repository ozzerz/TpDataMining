{
  "comments": [
    "Hi!\n\nI am using Eclipse 3.2RC7.\nThe following code \npublic class TestIt {\n   public void a() {\n      Object a \u003d null;\n      for (Object o : a.getClass()()) {\n\n      }\n   }\n}\n\nproduces an unexpected error during organize imports: AST must not be null.\n\nIs this a bug or a feature?\n\nI simple create a class with the given code, paste the code, and press the shortcut for \"Organize imports\".\n\nBest regards\nVolker",
    "Reproduced.\nI am investigating.\nStack trace is:\njava.lang.NullPointerException\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1520)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1715)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2366)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:511)\n\tat org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:179)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2659)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1242)\n\tat org.eclipse.jdt.core.dom.CompilationUnitResolver.convert(CompilationUnitResolver.java:253)\n\tat org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:856)\n\tat org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:630)\n\tat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$1.run(ASTProvider.java:605)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST(ASTProvider.java:600)",
    "This is a case where the recovery cannot recover the collection of the foreach statement.\nI suggest deleting the foreach statement in this case.\nDavid, is this fine for you or you believe you can end up with a non-null expression for the collection (a.getClass()() in this case) ?",
    "Philippe,\n\nDo you want it for 3.2.1 ?",
    "Fixed the ast converter to handle null collection when the recovery cannot recover the collection expression of foreach statement.\nThe statement is purely removed from the resulting DOM/AST tree.\nAdd regression test: org.eclipse.jdt.core.tests.dom.ASTConverter15Test.test0222.\nDavid, once you fix the recovery, update this test to reflect that the foreach statement is still there.",
    "Created an attachment (id\u003d45573)\nProposed fix for recovery and regenerated parser files\n\n",
    "Released for 3.3 M1.\n\nTest updated: ASTConverter15Test#test0222()",
    "Verified for 3.3 M1 using build I20060804-0010."
  ],
  "commentCreationDates": [
    "2006-06-27T13:10:34+02:00",
    "2006-06-29T16:48:53+02:00",
    "2006-06-29T16:56:17+02:00",
    "2006-06-29T17:01:55+02:00",
    "2006-06-29T18:13:37+02:00",
    "2006-06-30T12:03:34+02:00",
    "2006-06-30T12:36:18+02:00",
    "2006-08-04T17:40:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1520"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1715"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2366"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:511"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations",
          "source": "ASTConverter.java:179"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2659"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1242"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnitResolver.convert",
          "source": "CompilationUnitResolver.java:253"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.internalCreateAST",
          "source": "ASTParser.java:856"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.createAST",
          "source": "ASTParser.java:630"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$1.run",
          "source": "ASTProvider.java:605"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST",
          "source": "ASTProvider.java:600"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "148797",
      "date": "2006-06-29T16:48:53+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "148797",
  "bugId": "148797",
  "date": "2006-06-27T13:10:34+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}