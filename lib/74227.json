{
  "comments": [
    "This bug shows up consistently when using the eMF code generator (both 1.x and \n2.0), in Eclipse (both 2.x and 3.0), preventing the code generator from \ncompleting. It appears to be caused by JDOM not working properly with \ninitializers in anonymous classes.  \n\nThe eMF scenario in which it occurs is when regenerating an eMF model from \nannotated Java.  Ed Merks from IBM\u0027s eMF development (merks@ca.ibm.com) was \nable to narrow down the problem to this small example:\n\npackage org.example;\n\npublic interface Sample {\n\n    Object x \u003d new Object()\n    {\n        {\n            System.err.println(\"**\");\n        }\n   \n    };\n}\n\nI get the following exception and stack trace:\n\n\u003e\u003e\u003e org.eclipse.jdt.core.jdom.DOMException: Attempt to add child to node that \ncannot have children\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMNode.basicAddChild\n(DOMNode.java:344)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.AbstractDOMBuilder.addChild\n(AbstractDOMBuilder.java:129)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMBuilder.addChild\n(DOMBuilder.java:139)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMBuilder.acceptInitializer\n(DOMBuilder.java:99)\n\u003e\u003e\u003e     at \norg.eclipse.jdt.internal.compiler.DocumentElementParser.consumeClassBodyDeclara\ntion(DocumentElementParser.java:131)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.compiler.parser.Parser.consumeRule\n(Parser.java:2695)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.compiler.parser.Parser.parse\n(Parser.java:5370)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.compiler.DocumentElementParser.parseType\n(DocumentElementParser.java:1204)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMBuilder.createType\n(DOMBuilder.java:266)\n\u003e\u003e\u003e     at org.eclipse.jdt.core.jdom.DOMFactory.createType(DOMFactory.java:157)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMType.getDetailedNode\n(DOMType.java:389)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMNode.becomeDetailed\n(DOMNode.java:390)\n\u003e\u003e\u003e     at org.eclipse.jdt.internal.core.jdom.DOMMember.getComment\n(DOMMember.java:218)\n\u003e\u003e\u003e     at \norg.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.analyzeType\n(JavaEcoreBuilder.java:739)\n\u003e\u003e\u003e     at \norg.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.analyzeCompilationUni\nt(JavaEcoreBuilder.java:719)\n\u003e\u003e\u003e     at org.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.traverse\n(JavaEcoreBuilder.java:701)\n\u003e\u003e\u003e     at org.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.traverse\n(JavaEcoreBuilder.java:677)\n\u003e\u003e\u003e     at org.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.traverse\n(JavaEcoreBuilder.java:681)\n\u003e\u003e\u003e     at org.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.traverse\n(JavaEcoreBuilder.java:681)\n\u003e\u003e\u003e     at org.eclipse.emf.codegen.ecore.java2ecore.JavaEcoreBuilder.run\n(JavaEcoreBuilder.java:269)\n\u003e\u003e\u003e     at \norg.eclipse.emf.codegen.ecore.genmodel.presentation.EMFProjectWizard$40.execute\n(EMFProjectWizard.java:2693)\n\u003e\u003e\u003e     at org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:91)\n\u003e\u003e\u003e     at org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1673)\n\u003e\u003e\u003e     at org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:105)\n\u003e\u003e\u003e     at org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:303)\n\u003e\u003e\u003e     at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:253)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:752)\n\u003e\u003e\u003e     at \norg.eclipse.emf.codegen.ecore.genmodel.presentation.EMFProjectWizard$PackagePag\ne.refreshPackagesTable(EMFProjectWizard.java:2735)\n\u003e\u003e\u003e     at \norg.eclipse.emf.codegen.ecore.genmodel.presentation.EMFProjectWizard$PackagePag\ne.setVisible(EMFProjectWizard.java:2138)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog.updateForPage\n(WizardDialog.java:937)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog.access$2\n(WizardDialog.java:920)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog$4.run(WizardDialog.java:911)\n\u003e\u003e\u003e     at org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:69)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog.showPage\n(WizardDialog.java:909)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog.nextPressed\n(WizardDialog.java:680)\n\u003e\u003e\u003e     at org.eclipse.jface.wizard.WizardDialog.buttonPressed\n(WizardDialog.java:300)\n\u003e\u003e\u003e     at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:506)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\n\u003e\u003e\u003e     at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\u003e\u003e\u003e     at org.eclipse.jface.window.Window.open(Window.java:648)\n\u003e\u003e\u003e     at \norg.eclipse.emf.codegen.ecore.genmodel.presentation.GenModelActionBarContributo\nr$ReloadAction.run(GenModelActionBarContributor.java:165)\n\u003e\u003e\u003e     at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\n\u003e\u003e\u003e     at \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:915)\n\u003e\u003e\u003e     at org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:866)\n\u003e\u003e\u003e     at org.eclipse.jface.action.ActionContributionItem$7.handleEvent\n(ActionContributionItem.java:785)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2772)\n\u003e\u003e\u003e     at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2431)\n\u003e\u003e\u003e     at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\u003e\u003e\u003e     at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\u003e\u003e\u003e     at org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:254)\n\u003e\u003e\u003e     at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\u003e\u003e\u003e     at org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:96)\n\u003e\u003e\u003e     at org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:335)\n\u003e\u003e\u003e     at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n\u003e\u003e\u003e     at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n\u003e\u003e\u003e     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\u003e\u003e\u003e     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\u003e\u003e\u003e     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\u003e\u003e\u003e     at java.lang.reflect.Method.invoke(Unknown Source)\n\u003e\u003e\u003e     at org.eclipse.core.launcher.Main.basicRun(Main.java:183)\n\u003e\u003e\u003e     at org.eclipse.core.launcher.Main.run(Main.java:644)\n\u003e\u003e\u003e     at org.eclipse.core.launcher.Main.main(Main.java:628)\n\u003e\u003e\u003e\n\u003e",
    "JDOM has been deprecated. Please use the DOM AST support and the AST rewrite\nsupport instead."
  ],
  "commentCreationDates": [
    "2004-09-18T15:05:11+02:00",
    "2005-01-24T17:51:16+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jdt.core.jdom.DOMException",
      "message": "Attempt to add child to node that  cannot have children \u003e\u003e\u003e",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.jdom.DOMNode.basicAddChild",
          "source": "DOMNode.java:344"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "74227",
      "date": "2004-09-18T15:05:11+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "74227",
  "bugId": "74227",
  "date": "2004-09-18T15:05:11+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}