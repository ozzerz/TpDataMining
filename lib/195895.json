{
  "comments": [
    "Build ID: I20070621-1340\n\nSteps To Reproduce:\n1. Open a project containing at least one @NamedQuery whose query string is not a simple string literal but an expression, such as: @NamedQuery(name\u003d\"findStuff\", query\u003d\"SELECT stuff \" + \"FROM Stuff stuff \" + \"WHERE stuff.thing \u003d ?\")\n2. Enable JPA support by adding the Java Persistence facet to the project.\n\n- OR -\n\n1. Open an Eclipse JPA-enabled project for which Eclipse JPA does work.\n2. Add a @NamedQuery with the above form, or modify an existing one by splitting the string literal similarly.\n\nMore information:\nA ClassCastException is reported, and JPA support does not function for the project. The message is \"org.eclipse.jdt.core.dom.InfixExpression\", or sometimes \"org.eclipse.jdt.core.dom.QualifiedName\" in the second case:\n\njava.lang.ClassCastException: org.eclipse.jdt.core.dom.InfixExpression\n\tat org.eclipse.jpt.core.internal.jdtutility.StringExpressionConverter.convert_(StringExpressionConverter.java:1)\n\tat org.eclipse.jpt.core.internal.jdtutility.AbstractExpressionConverter.convert(AbstractExpressionConverter.java:40)\n\tat org.eclipse.jpt.core.internal.jdtutility.ConversionDeclarationAnnotationElementAdapter.getValue(ConversionDeclarationAnnotationElementAdapter.java:95)\n\tat org.eclipse.jpt.core.internal.jdtutility.MemberAnnotationElementAdapter.getValue(MemberAnnotationElementAdapter.java:43)\n\tat org.eclipse.jpt.core.internal.jdtutility.ShortCircuitAnnotationElementAdapter.getValue(ShortCircuitAnnotationElementAdapter.java:47)\n\tat org.eclipse.jpt.core.internal.content.java.mappings.JavaAbstractQuery.updateFromJava(JavaAbstractQuery.java:553)\n[...]\n\n(The traceback is the same for either case; only the message ever varies.)\n\nNote that writing these queries using \"+\" expressions is very helpful to me, as some are quite involved and they need to be split into multiple lines to be readable. It doesn\u0027t seem to mess up any other tools (IIRC, according to the Java standard, the concatenation of two string literals is still a constant expression and therefore allowable in an annotation).",
    "*** Bug 195804 has been marked as a duplicate of this bug. ***",
    "\n\n*** This bug has been marked as a duplicate of bug 198934 ***"
  ],
  "commentCreationDates": [
    "2007-07-09T21:54:05+02:00",
    "2007-07-12T22:37:25+02:00",
    "2007-08-06T15:41:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.core.dom.InfixExpression",
      "elements": [
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.StringExpressionConverter.convert_",
          "source": "StringExpressionConverter.java:1"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.AbstractExpressionConverter.convert",
          "source": "AbstractExpressionConverter.java:40"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.ConversionDeclarationAnnotationElementAdapter.getValue",
          "source": "ConversionDeclarationAnnotationElementAdapter.java:95"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.MemberAnnotationElementAdapter.getValue",
          "source": "MemberAnnotationElementAdapter.java:43"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.ShortCircuitAnnotationElementAdapter.getValue",
          "source": "ShortCircuitAnnotationElementAdapter.java:47"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.mappings.JavaAbstractQuery.updateFromJava",
          "source": "JavaAbstractQuery.java:553"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "195895",
      "duplicateId": "198934",
      "date": "2007-07-09T21:54:05+02:00",
      "product": "Dali JPA Tools",
      "component": "Framework",
      "severity": "major"
    }
  ],
  "groupId": "198934",
  "bugId": "195895",
  "duplicateId": "198934",
  "date": "2007-07-09T21:54:05+02:00",
  "product": "Dali JPA Tools",
  "component": "Framework",
  "severity": "major"
}