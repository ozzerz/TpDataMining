{
  "comments": [
    "I20071017-1638 (after bug 57515)\n\nCCE in LaunchConfigurationQueryParticipant when searching for references to a method.\n\nThe problem is that LaunchConfigurationQueryParticipant#isValid(..) is true for all REFERENCES searches, but LaunchConfigurationQueryParticipant.search(..) afterwards casts to IType without checks.\n\nI\u0027ve updated the error message in HEAD to tell that the participant will undergo a death penalty for the current session.\n\n\n!ENTRY org.eclipse.jdt.ui 4 0 2007-10-18 15:00:53.250\n!MESSAGE An error occurred during participant search\n!STACK 0\njava.lang.ClassCastException: org.eclipse.jdt.internal.core.SourceMethod cannot be cast to org.eclipse.jdt.core.IType\n\tat org.eclipse.jdt.internal.debug.ui.search.LaunchConfigurationQueryParticipant.search(LaunchConfigurationQueryParticipant.java:95)\n\tat org.eclipse.jdt.internal.ui.search.JavaSearchQuery$2.run(JavaSearchQuery.java:163)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run(JavaSearchQuery.java:169)\n\tat org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:94)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "*** Bug 207192 has been marked as a duplicate of this bug. ***",
    "fixed in HEAD\n\nWe should not do any searching if we cannot resolve an IType. Added support to resolve declared types if a method, etc, is selected.",
    "please verify Darin W",
    "(In reply to comment #2)\n\u003e We should not do any searching if we cannot resolve an IType. Added support to\n\u003e resolve declared types if a method, etc, is selected.\n\nThat\u0027s not what I would expect. I could understand if a Java launch configuration is found when I search for references to a main(String[]) method, but returning the launch config for any method is a bit overkill.\n\nIf you really want to keep the main(String[]) case, you should also support it as a PatternQuerySpecification (e.g. open the Java Search dialog with another selection, and then type in the method pattern).\n\nI would revert to 1.1 and change isValid(..) to :\n\n\tprivate boolean isValid(QuerySpecification query) {\n\t\tswitch(query.getLimitTo()) {\n\t\t\tcase IJavaSearchConstants.REFERENCES:\n\t\t\tcase IJavaSearchConstants.ALL_OCCURRENCES:\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t\t..",
    "*** Bug 207288 has been marked as a duplicate of this bug. ***",
    "Verified CCE. Markus could open a new bug for the case of showing references when a non-main method is selected."
  ],
  "commentCreationDates": [
    "2007-10-18T15:01:39+02:00",
    "2007-10-23T18:18:58+02:00",
    "2007-10-23T18:38:40+02:00",
    "2007-10-23T18:39:09+02:00",
    "2007-10-23T19:35:25+02:00",
    "2007-10-24T15:41:41+02:00",
    "2007-10-26T19:01:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.core.SourceMethod cannot be cast to org.eclipse.jdt.core.IType",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.debug.ui.search.LaunchConfigurationQueryParticipant.search",
          "source": "LaunchConfigurationQueryParticipant.java:95"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.search.JavaSearchQuery$2.run",
          "source": "JavaSearchQuery.java:163"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run",
          "source": "JavaSearchQuery.java:169"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run",
          "source": "InternalSearchUI.java:94"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "206747",
      "date": "2007-10-18T15:01:39+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "206747",
  "bugId": "206747",
  "date": "2007-10-18T15:01:39+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}