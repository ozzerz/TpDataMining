{
  "comments": [
    "3.2M5\n\nOn the following test case, the finally block is executed twice:\n[try]null[finally]\n[npe]null[finally]\nException in thread \"main\" java.lang.NullPointerException\n        at X.save(X.java:22)\n        at X.main(X.java:26)\n\npublic class X {\n\tpublic void save() {\n\t\ttry {\n\t\t\tObject warnings \u003d null;\n\t\t\tObject contexts \u003d null;\n\t\t\ttry {\n\t\t\t\tSystem.out.print(\"[try]\");\n\t\t\t\tSystem.out.print(warnings); \n\t\t\t\treturn;\n\t\t\t} catch (NullPointerException npe) {\n\t\t\t\tSystem.out.print(\"[npe]\");\n\t\t\t\tSystem.out.print(contexts); \n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tSystem.out.print(\"[e]\");\n\t\t\treturn;\n\t\t} finally { \n\t\t\tint var \u003d 0;\n\t\t\tSystem.out.println(\"[finally]\");\n\t\t\tObject o \u003d null;\n\t\t\to.toString();\n\t\t}\n\t}\n\tpublic static void main(String[] args) {\n\t\tnew X().save();\n\t}\n}",
    "The problem arises from the nested try with no finally block. Exception handlers are not properly closed then.\n\nThe range for NPE handler is far too long:\n\n  // Method descriptor #6 ()V\n  // Stack: 2, Locals: 7\n  public void save();\n      0  aconst_null\n      1  astore_1 [warnings]\n      2  aconst_null\n      3  astore_2 [contexts]\n      4  getstatic System.out : PrintStream [15]\n      7  ldc \u003cString \"[try]\"\u003e [21]\n      9  invokevirtual PrintStream.print(String) : void [23]\n     12  getstatic System.out : PrintStream [15]\n     15  aload_1 [warnings]\n     16  invokevirtual PrintStream.print(Object) : void [29]\n     19  iconst_0\n     20  istore 5 [var]\n     22  getstatic System.out : PrintStream [15]\n     25  ldc \u003cString \"[finally]\"\u003e [32]\n     27  invokevirtual PrintStream.println(String) : void [34]\n     30  aconst_null\n     31  astore 6 [o]\n     33  aload 6 [o]\n     35  invokevirtual Object.toString() : String [37]\n     38  pop\n     39  return\n     40  astore_3 [npe]\n     41  getstatic System.out : PrintStream [15]\n     44  ldc \u003cString \"[npe]\"\u003e [41]\n     46  invokevirtual PrintStream.print(String) : void [23]\n     49  getstatic System.out : PrintStream [15]\n     52  aload_2 [contexts]\n     53  invokevirtual PrintStream.print(Object) : void [29]\n     56  iconst_0\n     57  istore 5 [var]\n     59  getstatic System.out : PrintStream [15]\n     62  ldc \u003cString \"[finally]\"\u003e [32]\n     64  invokevirtual PrintStream.println(String) : void [34]\n     67  aconst_null\n     68  astore 6\n     70  aload 6\n     72  invokevirtual Object.toString() : String [37]\n     75  pop\n     76  return\n     77  astore_1 [e]\n     78  getstatic System.out : PrintStream [15]\n     81  ldc \u003cString \"[e]\"\u003e [43]\n     83  invokevirtual PrintStream.print(String) : void [23]\n     86  iconst_0\n     87  istore 5 [var]\n     89  getstatic System.out : PrintStream [15]\n     92  ldc \u003cString \"[finally]\"\u003e [32]\n     94  invokevirtual PrintStream.println(String) : void [34]\n     97  aconst_null\n     98  astore 6\n    100  aload 6\n    102  invokevirtual Object.toString() : String [37]\n    105  pop\n    106  return\n    107  astore 4\n    109  iconst_0\n    110  istore 5 [var]\n    112  getstatic System.out : PrintStream [15]\n    115  ldc \u003cString \"[finally]\"\u003e [32]\n    117  invokevirtual PrintStream.println(String) : void [34]\n    120  aconst_null\n    121  astore 6\n    123  aload 6\n    125  invokevirtual Object.toString() : String [37]\n    128  pop\n    129  aload 4\n    131  athrow\n      Exception Table:\n        [pc: 4, pc: 40] -\u003e 40 when : java.lang.NullPointerException\n        [pc: 0, pc: 19] -\u003e 77 when : java.lang.Exception\n        [pc: 39, pc: 56] -\u003e 77 when : java.lang.Exception\n        [pc: 76, pc: 77] -\u003e 77 when : java.lang.Exception\n        [pc: 0, pc: 19] -\u003e 107 when : any\n        [pc: 40, pc: 56] -\u003e 107 when : any\n        [pc: 77, pc: 86] -\u003e 107 when : any",
    "Added GenericTypeTest#test045",
    "Now consider all surrounding try \u0026 synchronized statements in subroutines collections, and properly interact with their exception handlers (enter/exit).\n\nFixed",
    "Verified for 3.2 M6 using build I20060327-0010"
  ],
  "commentCreationDates": [
    "2006-02-24T09:29:35+01:00",
    "2006-02-24T09:30:45+01:00",
    "2006-02-24T09:39:59+01:00",
    "2006-02-25T22:12:06+01:00",
    "2006-03-27T17:04:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "X.save",
          "source": "X.java:22"
        },
        {
          "method": "X.main",
          "source": "X.java:26"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "129306",
      "date": "2006-02-24T09:29:35+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "129306",
  "bugId": "129306",
  "date": "2006-02-24T09:29:35+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}