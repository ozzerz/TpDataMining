{
  "comments": [
    "RC1\n\nRefactoring uses IWorkspace#validateEdit to check if files can be modified. \nThis is done in a modal context thread. I change our code so that we now pass \nin a shell to allow CVS to present a dialog to the user (see bug 65315). But \nthis result in an invalid thread access. See stack trace below. Comment on \nvalidateEdit states that the method can be called from any thread.\n\nPlease let me know if Team is going to fix this for RC2. I have to make an API \nchange request to fix 65315, which only makes sense if this bug gets fixed.\n\norg.eclipse.swt.SWTException: Invalid thread access\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat org.eclipse.swt.SWTException.\u003cinit\u003e(SWTException.java:73)\n\tat org.eclipse.swt.SWT.error(SWT.java:2691)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.SWT.error(SWT.java:2587)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:381)\n\tat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:245)\n\tat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:323)\n\tat org.eclipse.jface.window.Window.createShell(Window.java:393)\n\tat org.eclipse.jface.window.Window.create(Window.java:347)\n\tat org.eclipse.jface.dialogs.Dialog.create(Dialog.java:925)\n\tat org.eclipse.jface.window.Window.open(Window.java:637)\n\tat org.eclipse.jface.dialogs.MessageDialog.openQuestion\n(MessageDialog.java:342)\n\tat \norg.eclipse.team.internal.ccvs.ui.FileModificationValidator.promptEdit\n(FileModificationValidator.java:184)\n\tat \norg.eclipse.team.internal.ccvs.ui.FileModificationValidator.promptToEditFiles\n(FileModificationValidator.java:166)\n\tat org.eclipse.team.internal.ccvs.ui.FileModificationValidator.edit\n(FileModificationValidator.java:125)\n\tat \norg.eclipse.team.internal.ccvs.ui.FileModificationValidator.validateEdit\n(FileModificationValidator.java:52)\n\tat \norg.eclipse.team.internal.core.FileModificationValidatorManager.validateEdit\n(FileModificationValidatorManager.java:70)\n\tat org.eclipse.core.internal.resources.Workspace$5.run\n(Workspace.java:1883)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java)\n\tat org.eclipse.core.internal.resources.Workspace.validateEdit\n(Workspace.java:1890)\n\tat org.eclipse.ltk.internal.core.refactoring.Resources.makeCommittable\n(Resources.java:108)\n\tat \norg.eclipse.ltk.core.refactoring.participants.ValidateEditChecker.check\n(ValidateEditChecker.java:87)\n\tat \norg.eclipse.ltk.core.refactoring.participants.CheckConditionsContext.check\n(CheckConditionsContext.java:103)\n\tat \norg.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFi\nnalConditions(ProcessorBasedRefactoring.java:161)\n\tat org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run\n(CheckConditionsOperation.java:84)\n\tat org.eclipse.ltk.core.refactoring.CreateChangeOperation.run\n(CreateChangeOperation.java:114)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1673)\n\tat org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run\n(WorkbenchRunnableAdapter.java:58)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)",
    "\n\n*** This bug has been marked as a duplicate of 65302 ***"
  ],
  "commentCreationDates": [
    "2004-06-04T14:26:21+02:00",
    "2004-06-04T14:34:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "org.eclipse.swt.SWTException.\u003cinit\u003e",
          "source": "SWTException.java:73"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2691"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2587"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:381"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:245"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:323"
        },
        {
          "method": "org.eclipse.jface.window.Window.createShell",
          "source": "Window.java:393"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:347"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.create",
          "source": "Dialog.java:925"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:637"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openQuestion",
          "source": "MessageDialog.java:342"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.FileModificationValidator.promptEdit",
          "source": "FileModificationValidator.java:184"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.FileModificationValidator.promptToEditFiles",
          "source": "FileModificationValidator.java:166"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.FileModificationValidator.edit",
          "source": "FileModificationValidator.java:125"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.FileModificationValidator.validateEdit",
          "source": "FileModificationValidator.java:52"
        },
        {
          "method": "org.eclipse.team.internal.core.FileModificationValidatorManager.validateEdit",
          "source": "FileModificationValidatorManager.java:70"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace$5.run",
          "source": "Workspace.java:1883"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.validateEdit",
          "source": "Workspace.java:1890"
        },
        {
          "method": "org.eclipse.ltk.internal.core.refactoring.Resources.makeCommittable",
          "source": "Resources.java:108"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.participants.ValidateEditChecker.check",
          "source": "ValidateEditChecker.java:87"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.participants.CheckConditionsContext.check",
          "source": "CheckConditionsContext.java:103"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions",
          "source": "ProcessorBasedRefactoring.java:161"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run",
          "source": "CheckConditionsOperation.java:84"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.CreateChangeOperation.run",
          "source": "CreateChangeOperation.java:114"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1673"
        },
        {
          "method": "org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run",
          "source": "WorkbenchRunnableAdapter.java:58"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "65698",
      "duplicateId": "65302",
      "date": "2004-06-04T14:26:21+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "major"
    }
  ],
  "groupId": "65302",
  "bugId": "65698",
  "duplicateId": "65302",
  "date": "2004-06-04T14:26:21+02:00",
  "product": "Platform",
  "component": "Team",
  "severity": "major"
}