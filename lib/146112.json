{
  "comments": [
    "Connection refused when executing tests locally using hte new Agent Controller.\n\nWhen using the TPTP-4.2.0-200606080100 driver to execute tests (e.g. JUnit and manual) locally (Windows XP, no firewall and ALL network access mode for the Agent Controller), the following exception is thrown.  Coincendentally, remote test execution (Windows XP --\u003e Windows XP) works fine.\n\norg.eclipse.core.runtime.CoreException: IWAT4039E The Test Execution Harness reported the following problems:Connection refused on host localhost.\n\tat org.eclipse.hyades.test.core.launch.delegates.AbstractLaunchConfigurationDelegate2.launch(AbstractLaunchConfigurationDelegate2.java:178)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:639)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:565)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:754)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:944)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\norg.eclipse.hyades.execution.core.DaemonConnectException\n\tat org.eclipse.hyades.execution.local.NodeImpl._connect(NodeImpl.java:232)\n\tat org.eclipse.hyades.execution.local.NodeImpl.connect(NodeImpl.java:360)\n\tat org.eclipse.hyades.execution.local.NodeImpl.connect(NodeImpl.java:347)\n\tat org.eclipse.hyades.execution.harness.TestExecutionHarness$4.run(TestExecutionHarness.java:2430)\n\tat java.lang.Thread.run(Thread.java:788)\nCaused by: org.eclipse.hyades.internal.execution.local.control.NoSuchApplicationException\n\tat org.eclipse.hyades.internal.execution.local.control.ProcessImpl.launch(ProcessImpl.java:168)\n\tat org.eclipse.hyades.execution.local.NodeImpl._connect(NodeImpl.java:217)\n\t... 4 more\n\neclipse.buildId\u003dI20060602-1317\njava.fullversion\u003dJ2RE 1.5.0 IBM J9 2.3 Windows XP x86-32 j9vmwi3223ifx-20060124 (JIT enabled)\nJ9VM - 20051027_03723_lHdSMR\nJIT  - 20051027_1437_r8\nGC   - 20051020_AA\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -clean -data D:\\AC_Hyades_WSAD_Drivers\\TPTP-4.2.0-200606080100\\eclipse\\workspace",
    "\nI have not been able to duplicate this error.",
    "This seems to be a very sporadic symptom.  If required, I can provide access to the offending machine.",
    "I couldn\u0027t reproduce it either.  \n\nIf you have a log file (preferably with the level set to DEBUG) from when this happened, that might be helpful.  A serviceconfig.xml file might be useful too.  Although it sounds like you\u0027re using fairly standard settings there might be some minor difference between our settings and yours.",
    "Created an attachment (id\u003d44135)\nWorkspace used with the TPTP-4.2.0-200606080100 driver.\n\n",
    "Created an attachment (id\u003d44136)\nAgnet Controller used from the TPTP-4.2.0-200606080100 driver.\n\n",
    "(In reply to comment #3)\n\nSee attached.",
    "\nUpdating bugzilla with some of the e-mail\u0027s I have had with Paul.\n\nfrom the servicelog.log it looks like the process controller did not have\nwrite permssion to C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local\nSettings\\Temp).\n\nPaul tested this and he also tested modifying the java location directory and\nit still looked like the PC was reporting that it did not have write permission to the directory. But when he tested this with the IAC he did have\nwrite permission.\n\nThe question is why the PC can\u0027t write to the dir... is it being run by someone else? what is different in the configuration and setup?\n\n\n",
    "Created an attachment (id\u003d44325)\nDirectory status test program\n\nThe attached program uses the same technique to test the working directory as is used in the Agent Controller.  It takes the directory name on the command line.  Can you run this program on the machine where the problem is appearing.\n\nThe bug may be in our directory validation routine, in which case we could just debug the attached program.",
    "(In reply to comment #8)\n\nResult:\n\nC:\\\u003eteststat \"C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp\"\nPCUtil: Error - Dir C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\n\\Temp is not writeable by owner\nC:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp is an invalid\ndirectory, errCode \u003d 6011\n\nC:\\\u003eteststat C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp\nPCUtil: Invalid dir\u003dC:\\Documents\nC:\\Documents is an invalid directory, errCode \u003d 6009",
    "Created an attachment (id\u003d44332)\nDirectory status test program\n\nThanks a lot for your quick response.\n\nThe failure reported indicates that when we call the _stat function on Windows it returns with a bit set indicating that the given directory is a valid directory, but it doesn\u0027t have the bit set indicating that it\u0027s writeable.\n\nIt may be that we\u0027re making an invalid assumption about the behavior of _stat.  Is there anything unusual about the file system you\u0027re using on that machine?\n\nI\u0027ve modified the program to display the whole bitfield in this case.  Can you run the attached version and tell me what it says?",
    "(In reply to comment #10)\n\nC:\\\u003eteststat \"C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp\"\nPCUtil: Error - Dir C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\n\\Temp is not writeable by owner, modes \u003d 16749\nC:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp is an invalid\ndirectory, errCode \u003d 6011",
    "Created an attachment (id\u003d44424)\nDirectory status test program\n\nThe _stat function reported the directory mode as 16749 (in octal 040555).\n\nIt decodes as follows:\n\nS_IFDIR  040000  It is a directory\nS_IREAD  000400  It is readable\nS_IEXEC  000100  It is executable\nS_IRGRP  000040  It is readable by group\nS_IXGRP  000010  It is executable by group\nS_IROTH  000004  It is readable by others\nS_IXOTH  000001  It is executable by others\n\nI suppose there\u0027s a possibility that _stat is giving us unreliable information in this case for some reason.  I\u0027ve made one last revision of the program that does several additional tests to see if the directory is writeable.  Can you give it one last try?",
    "C:\\\u003eteststat \"C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp\"\nPCUtil: Error - Dir C:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\n\\Temp is not writeable by owner, modes \u003d 16749\n_access reports the directory is not writeable\nGetFileAttributes reports that the directory is read-only, result\u003d17Temporary wr\niteable file was successfully created\nC:\\Documents and Settings\\chng1me.T40-92U-V46\\Local Settings\\Temp is an invalid\ndirectory, errCode \u003d 6011",
    "This is a bit odd.  There was a flaw in my last revision of the test program -- it wasn\u0027t actually creating the temporary file in the directory to be tested -- but it looks like that doesn\u0027t matter.\n\nI found that if I go to a command prompt in my c:\\ directory and type \"attrib +r temp\" my \"c:\\temp\" directory gets marked as read-only.  I can still copy files to the directory, but I can\u0027t remove it.  And my test program reports exactly the results you are seeing, even after I fix it to create the temporary file in the right place.\n\nI\u0027m not entirely sure why we are checking to see if the directory is writeable in the first place, but it seems that the check is flawed.",
    "Consider for 4.2.1",
    "Reassign to Kevin for 4.2.1 fixing.",
    "\nI have modfied  the process controller to not be as restrictive when launching a process. We now require on read access.",
    "Verified in TPTP-4.3.0-200611160100.\n\nClosing."
  ],
  "commentCreationDates": [
    "2006-06-08T22:40:41+02:00",
    "2006-06-09T20:55:29+02:00",
    "2006-06-09T20:59:54+02:00",
    "2006-06-10T00:11:46+02:00",
    "2006-06-12T15:11:46+02:00",
    "2006-06-12T15:13:04+02:00",
    "2006-06-12T15:13:28+02:00",
    "2006-06-13T01:07:57+02:00",
    "2006-06-13T21:21:07+02:00",
    "2006-06-13T21:41:16+02:00",
    "2006-06-13T22:19:00+02:00",
    "2006-06-14T16:55:51+02:00",
    "2006-06-14T19:05:26+02:00",
    "2006-06-14T19:12:25+02:00",
    "2006-06-14T19:53:39+02:00",
    "2006-06-16T00:03:14+02:00",
    "2006-06-30T00:01:10+02:00",
    "2006-07-24T21:52:22+02:00",
    "2006-11-20T19:00:18+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "IWAT4039E The Test Execution Harness reported the following problems:Connection refused on host localhost.",
      "elements": [
        {
          "method": "org.eclipse.hyades.test.core.launch.delegates.AbstractLaunchConfigurationDelegate2.launch",
          "source": "AbstractLaunchConfigurationDelegate2.java:178"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:639"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:565"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:754"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin$6.run",
          "source": "DebugUIPlugin.java:944"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "146112",
      "date": "2006-06-08T22:40:41+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "major"
    },
    {
      "exceptionType": "org.eclipse.hyades.execution.core.DaemonConnectException",
      "elements": [
        {
          "method": "org.eclipse.hyades.execution.local.NodeImpl._connect",
          "source": "NodeImpl.java:232"
        },
        {
          "method": "org.eclipse.hyades.execution.local.NodeImpl.connect",
          "source": "NodeImpl.java:360"
        },
        {
          "method": "org.eclipse.hyades.execution.local.NodeImpl.connect",
          "source": "NodeImpl.java:347"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.TestExecutionHarness$4.run",
          "source": "TestExecutionHarness.java:2430"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:788"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.hyades.internal.execution.local.control.NoSuchApplicationException",
        "elements": [
          {
            "method": "org.eclipse.hyades.internal.execution.local.control.ProcessImpl.launch",
            "source": "ProcessImpl.java:168"
          },
          {
            "method": "org.eclipse.hyades.execution.local.NodeImpl._connect",
            "source": "NodeImpl.java:217"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 0,
      "bugId": "146112",
      "date": "2006-06-08T22:40:41+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "major"
    }
  ],
  "groupId": "146112",
  "bugId": "146112",
  "date": "2006-06-08T22:40:41+02:00",
  "product": "TPTP Agent Controller",
  "component": "Platform.Communication",
  "severity": "major"
}