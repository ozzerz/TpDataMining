{
  "comments": [
    "If I add junit.jar to my project using a classpath variable, junit fails to run\na test case with the following stack trace.  Everything works fine if I add\njunit.jar as an external jar.\n\n\njava.lang.NoClassDefFoundError: junit/framework/TestListener\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:488)\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:106)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:243)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:51)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:190)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:183)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:294)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:281)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:250)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:310)\nException in thread \"main\"",
    "Forgot to mention - this is on 2.1 build 200302181130\n",
    "Which launcher do you use to start your test case ?",
    "I\u0027m not sure what you mean by \"which launcher\", but I do:\n\njunit.jar is in project as ECLIPSE_HOME/plugins/org.junit_3.8.1/junit.jar\nRun-\u003eRun...\nCreate a new JUnit config\nSet the test class to be my test class\nleave everything else as default\nClick Run",
    "Bug still exist on I20030218. The args passed to the VM are:\n\nD:\\apps\\jdk\\jdk1.3.1_01\\bin\\javaw.exe -classpath \nD:/apps/Eclipse/latest/plugins/org.eclipse.jdt.junit_2.1.0/junitsupport.jar;D:\\d\nata\\devel\\Workspaces\\Eclipse\\plugins\\Test;D:\\apps\\Eclipse\\latest \norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner -port 6932 -classNames \nTest\n\n",
    "This means the class path variable wsn\u0027t passed to the java.exe",
    "*** Bug 32590 has been marked as a duplicate of this bug. ***",
    "This is true for any jar you specify in the Java Build Path as a classpath \nvariable (e.g. swt.jar).\n\nThis is still broken in RC1.\n\nI am increasing the priority because this is a serious regression from M5.",
    "Tried to reproduce for the JUnit scenario in RC1 and it worked fine.\n\nSteps with which I tried to reproduce the problem in a fresh workspace.\n\n1) define a Class Path Variable JUNIT that points to the junit.jar in \norg.eclipse.junit\n\n2) create a project ZZZJUnit\nadd JUNIT as a variable to the build path\n\n3) create a Test case with a method testSuccess() that succeeds\n\n4) Run\u003eRun As\u003eJUnit\n\nThe test succeeds and the VM Args are:\n\nD:\\jdk1.4.1\\bin\\javaw.exe -classpath \nd:/eclipse/ws0321/plugins/org.eclipse.jdt.junit/bin;d:/eclipse/ws0321/plugins/or\ng.eclipse.jdt.junit/junitsupport.jar;D:\\eclipse\\20021105\\eclipse\\empty-runtime-\nworkspace-1\\ZZZJUnit;D:\\eclipse\\ws0321\\plugins\\org.junit\\junit.jar \norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner -port 6249 -classNames \nMyTest\n\nThe class path variable is properly resolved see the junit.jar entry above.",
    "I\u0027ve tried the same scenario in my existing workspace and it worked OK. \nVeronica can you pls try my steps above and confirm whether they work. \nIs the class path variable properly resolved for building, i.e., you don\u0027t get \ncompile errors.\nWhat is different in your set-up. \n\nAdding Darin since the JUnit launch config code hasn\u0027t changed for a while and \nthe run-time class path is computed with the help of jdt-launching.",
    "There is a bug reported where the variable resolution does not work properly if \nthe variable is only a prefix to the jar. See bug 32633.",
    "If I follow your steps Erich, everything works fine.  However, my scenario \nwhere the junit.jar is referenced as an extension of the ECLIPSE_HOME variable \nstill fails.\n\nWith the following classpath, everything compiles correctly but at run time I \nget the error \"java.lang.NoClassDefFoundError: junit/framework/TestListener\":\n\nFailure case:\n1)Import org.eclipse.swt, org.eclipse.swt.win32, and org.eclipse.swt.tests into \nyour workspace frm CVS.\n2)Copy org.eclipse.swt/.classpath_win32 to .classpath and recompile\n3)Select AllTests from org.eclipse.swt.tests and select Runs As -\u003e JUnit Test.\n\nClasspath:\n\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cclasspath\u003e\n    \u003cclasspathentry kind\u003d\"var\" path\u003d\"JRE_LIB\" sourcepath\u003d\"JRE_SRC\"/\u003e\n    \u003cclasspathentry kind\u003d\"src\" path\u003d\"/org.eclipse.swt\"/\u003e\n    \u003cclasspathentry kind\u003d\"src\" path\u003d\"JUnit Tests\"/\u003e\n    \u003cclasspathentry kind\u003d\"var\" \npath\u003d\"ECLIPSE_HOME/plugins/org.junit_3.8.1/junit.jar\"/\u003e\n    \u003cclasspathentry kind\u003d\"output\" path\u003d\"bin\"/\u003e\n\u003c/classpath\u003e\n\nRuntime parameters:\n\nD:\\Eclipse2.0\\vm\\jre\\bin\\javaw.exe -classpath \nD:/Eclipse2.0/ide/eclipse/plugins/org.eclipse.jdt.junit_2.1.0/junitsupport.jar;D\n:\\Eclipse2.0\\ide\\eclipse\\workspace\\org.eclipse.swt\\bin;D:\\Eclipse2.0\n\\ide\\eclipse\\workspace\\org.eclipse.swt.tests\\bin;D:\\Eclipse2.0\\ide\\eclipse \norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner -port 9195 -classNames \norg.eclipse.swt.tests.junit.AllTests",
    "I think Darin is correct and this is the same thing as bug 32633.",
    "Yes, this sounds the same.\n\n*** This bug has been marked as a duplicate of 32633 ***"
  ],
  "commentCreationDates": [
    "2003-02-20T16:32:43+01:00",
    "2003-02-20T16:47:44+01:00",
    "2003-02-20T17:05:52+01:00",
    "2003-02-20T18:14:27+01:00",
    "2003-02-20T19:08:36+01:00",
    "2003-02-20T19:09:03+01:00",
    "2003-02-24T18:38:06+01:00",
    "2003-02-24T21:22:52+01:00",
    "2003-02-24T21:32:32+01:00",
    "2003-02-24T21:36:13+01:00",
    "2003-02-24T21:40:02+01:00",
    "2003-02-24T22:06:10+01:00",
    "2003-02-24T22:08:21+01:00",
    "2003-02-24T22:09:14+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "junit/framework/TestListener",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:488"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:106"
        },
        {
          "method": "java.net.URLClassLoader.defineClass",
          "source": "URLClassLoader.java:243"
        },
        {
          "method": "java.net.URLClassLoader.access$100",
          "source": "URLClassLoader.java:51"
        },
        {
          "method": "java.net.URLClassLoader$1.run",
          "source": "URLClassLoader.java:190"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.net.URLClassLoader.findClass",
          "source": "URLClassLoader.java:183"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:294"
        },
        {
          "method": "sun.misc.Launcher$AppClassLoader.loadClass",
          "source": "Launcher.java:281"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:250"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:310"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "32356",
      "duplicateId": "32633",
      "date": "2003-02-20T16:32:43+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "32633",
  "bugId": "32356",
  "duplicateId": "32633",
  "date": "2003-02-20T16:32:43+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "critical"
}