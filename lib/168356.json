{
  "comments": [
    "The search page (Search -\u003e Search -\u003e Task Search) fails if repository configuration is not cached and a network connection can not be established. Since JiraQueryPage.createControl() is not executed completly setControl() is not invoked and the layout of the search page is corrupted (some of the Jira controls remain if a different repository is selected).\n\n-- Error Log --\nDate: Sun Dec 17 12:42:08 EST 2006\nMessage: Error occurred while constructing search page for https://www.limewire.org/jira [jira]\nSeverity: Info\nPlugin ID: org.eclipse.mylar.core\nStack Trace:\norg.tigris.jira.core.service.exceptions.ServiceUnavailableException: www.limewire.org\nat org.tigris.jira.internal.core.service.soap.SoapJiraService$StandardLoginToken.getCurrentValue(SoapJiraService.java:575)\nat org.tigris.jira.internal.core.service.soap.SoapJiraService.getServerInfo(SoapJiraService.java:159)\nat org.tigris.jira.core.service.CachedRpcJiraServer.initializeServerInfo(CachedRpcJiraServer.java:409)\nat org.tigris.jira.core.service.CachedRpcJiraServer.getServerInfo(CachedRpcJiraServer.java:458)\nat org.tigris.jira.core.service.CachedRpcJiraServer.initializeProjects(CachedRpcJiraServer.java:192)\nat org.tigris.jira.core.service.CachedRpcJiraServer.getProjects(CachedRpcJiraServer.java:234)\nat org.eclipse.mylar.internal.jira.core.ui.wizards.JiraQueryPage$23.getElements(JiraQueryPage.java:824)\nat org.eclipse.jface.viewers.StructuredViewer.getRawChildren(StructuredViewer.java:936)\nat org.eclipse.jface.viewers.StructuredViewer.getFilteredChildren(StructuredViewer.java:870)\nat org.eclipse.jface.viewers.StructuredViewer.getSortedChildren(StructuredViewer.java:993)\nat org.eclipse.jface.viewers.AbstractListViewer.inputChanged(AbstractListViewer.java:336)\nat org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:251)\nat org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1570)\nat org.eclipse.mylar.internal.jira.core.ui.wizards.JiraQueryPage.createProjectsViewer(JiraQueryPage.java:844)\nat org.eclipse.mylar.internal.jira.core.ui.wizards.JiraQueryPage.createControl(JiraQueryPage.java:243)\nat org.eclipse.mylar.internal.tasks.ui.TaskSearchPage.createPage(TaskSearchPage.java:126)\nat org.eclipse.mylar.internal.tasks.ui.TaskSearchPage.displayQueryPage(TaskSearchPage.java:184)\nat org.eclipse.mylar.internal.tasks.ui.TaskSearchPage.setVisible(TaskSearchPage.java:249)\nat org.eclipse.search.internal.ui.SearchDialog.turnToPage(SearchDialog.java:520)\nat org.eclipse.search.internal.ui.SearchDialog.access$1(SearchDialog.java:494)\nat org.eclipse.search.internal.ui.SearchDialog$7.widgetSelected(SearchDialog.java:402)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1097)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3226)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2898)\nat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\nat org.eclipse.jface.window.Window.open(Window.java:796)\nat org.eclipse.search.internal.ui.OpenSearchDialogAction.run(OpenSearchDialogAction.java:54)\nat org.eclipse.search.internal.ui.OpenSearchDialogAction.run(OpenSearchDialogAction.java:45)\nat org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:253)\nat org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1097)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3226)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2898)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1945)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1909)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:425)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod(EclipseAppContainer.java:522)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:147)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:170)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:339)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:283)\nat org.eclipse.core.launcher.Main.run(Main.java:984)\nat org.eclipse.core.launcher.Main.main(Main.java:959)",
    "Created an attachment (id\u003d55834)\nScreenshot of search dialog\n\n",
    "Yes, the dialog is currently fragile to a connector failing to load it (bug 165733).\n\nMarking helpwanted for now, see \"Support Expectations\" at: http://www.eclipse.org/mylar/users.php",
    "Moving the setControl() call doesn\u0027t work. Unfortunately there doesn\u0027t seem to be an easy fix for the layout corruption. ",
    "I wonder if we can wrap the whole JIRA page into try catch block for now and set control to some dummy panel if it throw an exception",
    "I think we would need to dispose all controls that have been created up to the point where the exception is raised, (i.e. iterate over all children of parent). Adding a dummy control then and disabling the Search button should work.",
    "Don\u0027t think disposing is needed, because those controls will be disposed on regular page disposal anyways.",
    "Created an attachment (id\u003d55934)\nPatch that disposes controls\n\nPossibly not the cleanest approach but it might be good enough as a workaround for now.",
    "Created an attachment (id\u003d55935)\nmylar/context/zip\n\n",
    "Patch applied and verified, nice work Steffen.  I tested by killing my connection during a settings update, and the result was a nicely formatted error link, with all of the other pages rendering correctly.  So as far as my testing checked, you have also resolved bug 165733 with this fix.",
    "*** Bug 165733 has been marked as a duplicate of this bug. ***",
    "The problem with the patch is that connectors need to invoke setControl() before the exception occurs otherwise the widget can not be disposed. \n\nI was thinking of adding a another Composite and use that as the parent widget that is passed to searchPage.createControl(). I could not get it to layout correctly on the first attempt but I think we should fix that for the next milestone. The Eclipse SearchDialog class uses such a wrapper Composite to make the dialog robust against failures of search pages.",
    "Good idea.  I suggest reopening bug 165733 for that, as it is already assigned to you.  But yes, let\u0027s hold off until post 1.0.1 for that change."
  ],
  "commentCreationDates": [
    "2006-12-17T17:51:25+01:00",
    "2006-12-17T17:52:28+01:00",
    "2006-12-19T02:26:32+01:00",
    "2006-12-20T01:07:05+01:00",
    "2006-12-20T01:29:40+01:00",
    "2006-12-20T01:37:14+01:00",
    "2006-12-20T02:32:12+01:00",
    "2006-12-20T03:09:44+01:00",
    "2006-12-20T03:09:47+01:00",
    "2006-12-20T22:58:21+01:00",
    "2006-12-20T23:00:19+01:00",
    "2006-12-20T23:30:53+01:00",
    "2006-12-21T01:42:47+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.tigris.jira.core.service.exceptions.ServiceUnavailableException",
      "message": "www.limewire.org",
      "elements": [
        {
          "method": "org.tigris.jira.internal.core.service.soap.SoapJiraService$StandardLoginToken.getCurrentValue",
          "source": "SoapJiraService.java:575"
        },
        {
          "method": "org.tigris.jira.internal.core.service.soap.SoapJiraService.getServerInfo",
          "source": "SoapJiraService.java:159"
        },
        {
          "method": "org.tigris.jira.core.service.CachedRpcJiraServer.initializeServerInfo",
          "source": "CachedRpcJiraServer.java:409"
        },
        {
          "method": "org.tigris.jira.core.service.CachedRpcJiraServer.getServerInfo",
          "source": "CachedRpcJiraServer.java:458"
        },
        {
          "method": "org.tigris.jira.core.service.CachedRpcJiraServer.initializeProjects",
          "source": "CachedRpcJiraServer.java:192"
        },
        {
          "method": "org.tigris.jira.core.service.CachedRpcJiraServer.getProjects",
          "source": "CachedRpcJiraServer.java:234"
        },
        {
          "method": "org.eclipse.mylar.internal.jira.core.ui.wizards.JiraQueryPage$23.getElements",
          "source": "JiraQueryPage.java:824"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getRawChildren",
          "source": "StructuredViewer.java:936"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getFilteredChildren",
          "source": "StructuredViewer.java:870"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getSortedChildren",
          "source": "StructuredViewer.java:993"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractListViewer.inputChanged",
          "source": "AbstractListViewer.java:336"
        },
        {
          "method": "org.eclipse.jface.viewers.ContentViewer.setInput",
          "source": "ContentViewer.java:251"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setInput",
          "source": "StructuredViewer.java:1570"
        },
        {
          "method": "org.eclipse.mylar.internal.jira.core.ui.wizards.JiraQueryPage.createProjectsViewer",
          "source": "JiraQueryPage.java:844"
        },
        {
          "method": "org.eclipse.mylar.internal.jira.core.ui.wizards.JiraQueryPage.createControl",
          "source": "JiraQueryPage.java:243"
        },
        {
          "method": "org.eclipse.mylar.internal.tasks.ui.TaskSearchPage.createPage",
          "source": "TaskSearchPage.java:126"
        },
        {
          "method": "org.eclipse.mylar.internal.tasks.ui.TaskSearchPage.displayQueryPage",
          "source": "TaskSearchPage.java:184"
        },
        {
          "method": "org.eclipse.mylar.internal.tasks.ui.TaskSearchPage.setVisible",
          "source": "TaskSearchPage.java:249"
        },
        {
          "method": "org.eclipse.search.internal.ui.SearchDialog.turnToPage",
          "source": "SearchDialog.java:520"
        },
        {
          "method": "org.eclipse.search.internal.ui.SearchDialog.access$1",
          "source": "SearchDialog.java:494"
        },
        {
          "method": "org.eclipse.search.internal.ui.SearchDialog$7.widgetSelected",
          "source": "SearchDialog.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1097"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3226"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2898"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.search.internal.ui.OpenSearchDialogAction.run",
          "source": "OpenSearchDialogAction.java:54"
        },
        {
          "method": "org.eclipse.search.internal.ui.OpenSearchDialogAction.run",
          "source": "OpenSearchDialogAction.java:45"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:253"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:229"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1097"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3226"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2898"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1945"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1909"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:425"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod",
          "source": "EclipseAppContainer.java:522"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:147"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:170"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:339"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:283"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:984"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:959"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "168356",
      "date": "2006-12-17T17:51:25+01:00",
      "product": "Mylyn",
      "component": "Jira",
      "severity": "minor"
    }
  ],
  "groupId": "168356",
  "bugId": "168356",
  "date": "2006-12-17T17:51:25+01:00",
  "product": "Mylyn",
  "component": "Jira",
  "severity": "minor"
}