{
  "comments": [
    "When going through a bottom-up Java bean Web service scenario, on the Service \nConfiguration page, after I hit Next, I got a number of problems:\n\nProblem #1:\n\nCaused by: java.lang.IllegalArgumentException\n\tat org.eclipse.wst.server.core.internal.ResourceManager.getServer\n(ResourceManager.java:743)\n\tat org.eclipse.wst.server.core.ServerCore.findServer\n(ServerCore.java:649)\n\tat \norg.eclipse.jst.ws.internal.consumption.ui.command.data.ServerInstToIServerTrans\nformer.transform(ServerInstToIServerTransformer.java:31)\n\tat \norg.eclipse.wst.command.internal.env.core.data.DataFlowManager.invokeMethod\n(DataFlowManager.java:246)\n\n\nIn ServerWidgetBinding, the datamapping,\n\n      dataRegistry.addMapping\n(ServerExtensionDefaultingCommand.class, \"ServiceServerInstanceId\", \nServerDeployableConfigurationCommand.class,\"ServiceExistingServer\", new \nServerInstToIServerTransformer());\n\nWhen ServerInstToServerTransformer was called to map ServiceServerInstanceId, \nit was null (no server exist yet).  When ServerCore.findServer was called with \nnull, it throws the IllegalArgumentException.\n\nFix #1:\n\nChange ServerInstToServerTransformer to check for null:\n\nif (existingServerInstId !\u003d null) {\n    \tserverInst \u003d ServerCore.findServer(existingServerInstId);\n    }\n\nProblem #2:\n\nThe wizard is still not able to create a Tomcat 5.0 server:\n\nIWAB0213E Error in starting server.\n    org.eclipse.core.runtime.CoreException: Could not save the Tomcat server \nconfiguration: null.\n    at \norg.eclipse.jst.server.tomcat.core.internal.TomcatServer.saveConfiguration\n(TomcatServer.java:116)\n    at org.eclipse.wst.server.core.internal.ServerWorkingCopy.save\n(ServerWorkingCopy.java:223)\n    at org.eclipse.wst.server.core.internal.ServerWorkingCopy.saveAll\n(ServerWorkingCopy.java:235)\n    at org.eclipse.jst.ws.internal.common.ServerUtils.createServer\n(ServerUtils.java:284)\n    at \norg.eclipse.jst.ws.internal.consumption.command.common.ServerDeployableConfigura\ntionCommand.execute(ServerDeployableConfigurationCommand.java:116)\n    at \norg.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.runCommand\n(CommandFragmentEngine.java:322)\n\nI bypassed the problem by creating a Tomcat server manually first before \nrunning the wizard.\n\nI\u0027ll open a sepeparate defect for this problem.\n\nProblem #3:\n\nIWAB0534E Unable to add EAR project to Server Configuration.\n    java.lang.ClassCastException\n    at org.eclipse.jst.ws.internal.common.ResourceUtils.getWebProjectURL\n(ResourceUtils.java:660)\n    at \norg.eclipse.jst.ws.internal.consumption.command.common.ServerDeployableConfigura\ntionCommand.execute(ServerDeployableConfigurationCommand.java:137)\n    at \norg.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.runCommand\n(CommandFragmentEngine.java:322)\n\nIn ResourceUtils, \n \ngetWebProjectURL(IProject project, String serverFactoryId, IServer server)\n\n\n// URL url \u003d ((IURLProvider) serverInstance.getDelegate()).getModuleRootURL\n(module);\nDuring the renaming, it was changed to:\nURL url \u003d ((IURLProvider) serverInstance).getModuleRootURL(module);\n\n- ClassCastException:  servreInstance is Tomcat 5.0\n\nFix #3:\n\nChange to \n\nURL url \u003d ((IURLProvider)serverInstance.getAdapter\n(IURLProvider.class)).getModuleRootURL(module);\n\nProblem #4:\n\nWhen hitting Next on page 3, \n\nIWAB0014E Unexpected exception occured.\n  null\n      java.lang.ClassCastException\n      at org.eclipse.jst.ws.internal.common.ResourceUtils.getWebProjectURL\n(ResourceUtils.java:755)\n      at \norg.eclipse.jst.ws.internal.common.ResourceUtils.getEncodedWebProjectURL\n(ResourceUtils.java:771)\n      at \norg.eclipse.jst.ws.internal.axis.creation.ui.task.DefaultsForServerJavaWSDLComma\nnd.execute(DefaultsForServerJavaWSDLCommand.java:205)\n      at \norg.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.runCommand\n(CommandFragmentEngine.java:322)\n      at \norg.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.visitTop\n(CommandFragmentEngine.java:288)\n      at \norg.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.moveForwardToNex\ntStop(CommandFragmentEngine.java:208)\n      at org.eclipse.wst.command.env.ui.widgets.SimpleCommandEngineManager$4.run\n(SimpleCommandEngineManager.java:206)\n\nIn ResourceUtils.getWebProjectURL(IProject project),\n\nchange to \n\n\nURL url \u003d ((IURLProvider)serverInstance.getAdapter\n(IURLProvider.class)).getModuleRootURL(module);\n\nWith these changes, I can get to page 4 to call the Axis emitter.",
    "Created an attachment (id\u003d17656)\npatch for jsp.ws.consumption.ui\n",
    "Created an attachment (id\u003d17657)\nPatch for jst.ws.\n",
    "Patches committed.",
    "Verified in M3.",
    "Changed Version field given new release numbering.\n"
  ],
  "commentCreationDates": [
    "2005-02-03T15:56:19+01:00",
    "2005-02-03T15:56:55+01:00",
    "2005-02-03T15:57:20+01:00",
    "2005-02-03T19:36:30+01:00",
    "2005-03-09T19:46:44+01:00",
    "2005-06-15T07:32:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "elements": [
        {
          "method": "org.eclipse.wst.server.core.internal.ResourceManager.getServer",
          "source": "ResourceManager.java:743"
        },
        {
          "method": "org.eclipse.wst.server.core.ServerCore.findServer",
          "source": "ServerCore.java:649"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.command.data.ServerInstToIServerTransformer.transform",
          "source": "ServerInstToIServerTransformer.java:31"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.data.DataFlowManager.invokeMethod",
          "source": "DataFlowManager.java:246"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "84339",
      "date": "2005-02-03T15:56:19+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Could not save the Tomcat server  configuration: null.",
      "elements": [
        {
          "method": "org.eclipse.jst.server.tomcat.core.internal.TomcatServer.saveConfiguration",
          "source": "TomcatServer.java:116"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ServerWorkingCopy.save",
          "source": "ServerWorkingCopy.java:223"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ServerWorkingCopy.saveAll",
          "source": "ServerWorkingCopy.java:235"
        },
        {
          "method": "org.eclipse.jst.ws.internal.common.ServerUtils.createServer",
          "source": "ServerUtils.java:284"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.command.common.ServerDeployableConfigurationCommand.execute",
          "source": "ServerDeployableConfigurationCommand.java:116"
        },
        {
          "method": "org.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.runCommand",
          "source": "CommandFragmentEngine.java:322"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "84339",
      "date": "2005-02-03T15:56:19+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.jst.ws.internal.common.ResourceUtils.getWebProjectURL",
          "source": "ResourceUtils.java:660"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.command.common.ServerDeployableConfigurationCommand.execute",
          "source": "ServerDeployableConfigurationCommand.java:137"
        },
        {
          "method": "org.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.runCommand",
          "source": "CommandFragmentEngine.java:322"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "84339",
      "date": "2005-02-03T15:56:19+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.jst.ws.internal.common.ResourceUtils.getWebProjectURL",
          "source": "ResourceUtils.java:755"
        },
        {
          "method": "org.eclipse.jst.ws.internal.common.ResourceUtils.getEncodedWebProjectURL",
          "source": "ResourceUtils.java:771"
        },
        {
          "method": "org.eclipse.jst.ws.internal.axis.creation.ui.task.DefaultsForServerJavaWSDLCommand.execute",
          "source": "DefaultsForServerJavaWSDLCommand.java:205"
        },
        {
          "method": "org.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.runCommand",
          "source": "CommandFragmentEngine.java:322"
        },
        {
          "method": "org.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.visitTop",
          "source": "CommandFragmentEngine.java:288"
        },
        {
          "method": "org.eclipse.wst.command.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop",
          "source": "CommandFragmentEngine.java:208"
        },
        {
          "method": "org.eclipse.wst.command.env.ui.widgets.SimpleCommandEngineManager$4.run",
          "source": "SimpleCommandEngineManager.java:206"
        }
      ],
      "number": 3,
      "commentIndex": 0,
      "bugId": "84339",
      "date": "2005-02-03T15:56:19+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    }
  ],
  "groupId": "84339",
  "bugId": "84339",
  "date": "2005-02-03T15:56:19+01:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "normal"
}