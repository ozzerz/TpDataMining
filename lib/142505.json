{
  "comments": [
    "Stack trace shown below.  It seems like this implementation of IFileManagerExtended is specific to the IAC?  When calling the putFile() method with a non-absolute target path, the File Transfer service is supposed to put the file in the temp dir, and this works properly when run with the other Agent Controllers.  When run with IAC, FileManagerLocal is used instead, and it doesn\u0027t properly copy the file to the temp dir.\n\nTo reproduce this, import the attached Team Project Set, and then (without starting an agent controller), run the test: \n\norg.eclipse.tptp.test.testservices.tests/junit/Test.FilesystemServiceTest.testsuite\n\nThe test will fail with an error.  The exception shown below is observable in the workspace.)\n\njava.lang.NullPointerException\nat org.eclipse.hyades.execution.local.file.FileManagerLocal.createFile(FileManagerLocal.java:35)\nat org.eclipse.hyades.execution.local.file.FileManagerLocal.putFile(FileManagerLocal.java(Compiled Code))\nat org.eclipse.hyades.execution.local.file.FileManagerLocal.putFile(FileManagerLocal.java:200)\nat org.eclipse.hyades.test.core.testservices.resources.FilesystemResourceProviderService.getTempFile(FilesystemResourceProviderService.java:121)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\nat java.lang.reflect.Method.invoke(Method.java:391)\nat org.eclipse.hyades.execution.local.testservices.AbstractTestService.run(AbstractTestService.java:51)\nat org.eclipse.hyades.execution.local.testservices.TestServiceAgentListener.handleCommand(TestServiceAgentListener.java:78)\nat org.eclipse.hyades.internal.execution.local.control.AgentImpl.handleCommand(AgentImpl.java:676)\nat org.eclipse.hyades.internal.execution.local.control.ProcessImpl.handleCommand(ProcessImpl.java:744)\nat org.eclipse.hyades.internal.execution.local.control.NodeImpl$InnerCommandHandler.incommingCommand(NodeImpl.java:672)\nat org.eclipse.hyades.internal.execution.local.control.NodeImpl.incommingCommand(NodeImpl.java:489)\nat org.eclipse.hyades.internal.execution.local.control.LocalConnectionImpl.incommingCommand(LocalConnectionImpl.java:135)\nat org.eclipse.hyades.internal.execution.local.control.LocalConnectionImpl.objectReceived(LocalConnectionImpl.java:153)\nat org.eclipse.tptp.platform.agentcontroller.internal.impl.DirectControlConnectionImpl$WorkerThread.run(DirectControlConnectionImpl.java:142)",
    "Created an attachment (id\u003d41894)\nTeam Project Set file for testservices test project\n\n",
    "Fix checked into CVS 2006/05/19 11:33 EDT.\n- Use system property \"java.io.tmpdir\" whenever relative path is being used\n",
    "The file is now copied, but the path to the copied file (which is returned from the putFile() call) is wrong.\n\nThe same testcase described in the original description still fails.  Instead of reporting an error (from an exception being thrown), it now reports a failure (because the assertion fails due to the file not being copied to the returned location.)",
    "Joe, how do you get the location of the file copied? There is no such method inside the FileManagerLocal class for getting such information. All the putFile() calls are returning void.",
    "The location of the absolutized target paths are passed back in the parameter that the relative paths were passed in.  \n\n\t/**\n\t * Transfer files identified by local names into files identified by remote\n\t * names, basically upload files from local to remote.\n\t * \n\t * @param localIdentifiers\n\t *            the names identifying the local files to be copied from\n\t * @param remoteIdentifiers\n\t *            the names identifying the remote files to be copied to,\n\t *            supports relative paths in addition to absolute paths,\n\t *            resolving the relative paths into absolute paths as required,\n\t *            this argument serves as an in and out argument returning the\n\t *            resolved relative file identifiers back (as absolute paths on\n\t *            the remote system)\n\t * @throws IOException,\n\t *             ServerNotAvailableException\n\t */\n\tpublic void putFile(FileIdentifierList localIdentifiers,\n\t\t\tFileIdentifierList remoteIdentifiers) throws IOException,\n\t\t\tServerNotAvailableException;\n",
    "Created an attachment (id\u003d42699)\nIAC file server patch\n\nJoe, can you try this patch out to see if it solves the problem?",
    "Created an attachment (id\u003d42700)\nIAC file server patch (jar version)\n\nHere is the hexl.jar for your convinence.",
    "Created an attachment (id\u003d42706)\nIAC file server patch (update 1)\n\nThe last patch did not fix the getFile() method.",
    "Created an attachment (id\u003d42707)\nIAC file server patch (jar version, update 1)\n\nThe last jar did not fix the getFile() method.",
    "Samson --\n\nI tested your latest patched jar file, and it does fix the problem.  This dropped off of my radar until the test failed again with the first i4 driver, so I assume you haven\u0027t checked the fix in yet.  Hopefully this can still be approved for 4.2 -- I confirm that the fix corrects the problem.",
    "Fix approved and checked in 2006/06/06 18:09 EDT\n"
  ],
  "commentCreationDates": [
    "2006-05-18T17:05:56+02:00",
    "2006-05-18T17:06:38+02:00",
    "2006-05-19T17:30:36+02:00",
    "2006-05-26T06:06:45+02:00",
    "2006-05-26T13:53:46+02:00",
    "2006-05-26T14:03:50+02:00",
    "2006-05-26T14:39:22+02:00",
    "2006-05-26T14:40:15+02:00",
    "2006-05-26T16:20:33+02:00",
    "2006-05-26T16:21:40+02:00",
    "2006-06-06T21:00:36+02:00",
    "2006-06-07T00:13:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.execution.local.file.FileManagerLocal.createFile",
          "source": "FileManagerLocal.java:35"
        },
        {
          "method": "org.eclipse.hyades.execution.local.file.FileManagerLocal.putFile",
          "source": "FileManagerLocal.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.hyades.execution.local.file.FileManagerLocal.putFile",
          "source": "FileManagerLocal.java:200"
        },
        {
          "method": "org.eclipse.hyades.test.core.testservices.resources.FilesystemResourceProviderService.getTempFile",
          "source": "FilesystemResourceProviderService.java:121"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.hyades.execution.local.testservices.AbstractTestService.run",
          "source": "AbstractTestService.java:51"
        },
        {
          "method": "org.eclipse.hyades.execution.local.testservices.TestServiceAgentListener.handleCommand",
          "source": "TestServiceAgentListener.java:78"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.AgentImpl.handleCommand",
          "source": "AgentImpl.java:676"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.ProcessImpl.handleCommand",
          "source": "ProcessImpl.java:744"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.NodeImpl$InnerCommandHandler.incommingCommand",
          "source": "NodeImpl.java:672"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.NodeImpl.incommingCommand",
          "source": "NodeImpl.java:489"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.LocalConnectionImpl.incommingCommand",
          "source": "LocalConnectionImpl.java:135"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.local.control.LocalConnectionImpl.objectReceived",
          "source": "LocalConnectionImpl.java:153"
        },
        {
          "method": "org.eclipse.tptp.platform.agentcontroller.internal.impl.DirectControlConnectionImpl$WorkerThread.run",
          "source": "DirectControlConnectionImpl.java:142"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "142505",
      "date": "2006-05-18T17:05:56+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "normal"
    }
  ],
  "groupId": "142505",
  "bugId": "142505",
  "date": "2006-05-18T17:05:56+02:00",
  "product": "TPTP Agent Controller",
  "component": "Platform.Communication",
  "severity": "normal"
}