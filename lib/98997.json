{
  "comments": [
    "Will attach log",
    "Created an attachment (id\u003d22618)\nSee only the most recent log entries\n",
    "Please provide a bit more info.\nhttp://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-text-home/development/bug-incomplete.htm",
    "\u003ePlease provide a bit more info.\n\nI can\u0027t attach the text file due to its content. It was called \"ll.txt\".\n\n- Eclipse 3.1 RC1\n\n./eclipse -vmargs -showversion\njava version \"1.4.2_06\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_06-b03)\nJava HotSpot(TM) Client VM (build 1.4.2_06-b03, mixed mode)\n\n\nIs the exception in the log helpful?\n\njava.nio.BufferOverflowException\n\tat java.nio.charset.CoderResult.throwException(CoderResult.java:259)\n\tat java.lang.StringCoding$CharsetSE.encode(StringCoding.java:340)\n\tat java.lang.StringCoding.encode(StringCoding.java:374)\n\tat java.lang.String.getBytes(String.java:573)\n\tat \norg.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.commitFileBufferCo\nntent(ResourceTextFileBuffer.java:295)\n\tat org.eclipse.core.internal.filebuffers.ResourceFileBuffer.commit\n(ResourceFileBuffer.java:317)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider.commitFileBuffer\n(TextFileDocumentProvider.java:774)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider$2.execute\n(TextFileDocumentProvider.java:725)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.\nrun(TextFileDocumentProvider.java:128)\n\tat org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute\n(WorkspaceModifyDelegatingOperation.java:68)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:98)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1719)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:110)\n\tat org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run\n(WorkspaceOperationRunner.java:73)\n\tat org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run\n(WorkspaceOperationRunner.java:63)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation\n(TextFileDocumentProvider.java:443)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider.saveDocument\n(TextFileDocumentProvider.java:702)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.performSave\n(AbstractTextEditor.java:3735)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.doSave\n(AbstractTextEditor.java:3524)\n\tat org.eclipse.ui.internal.SaveableHelper$1.run(SaveableHelper.java:95)\n\tat org.eclipse.ui.internal.SaveableHelper$2.run\n(SaveableHelper.java:116)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:346)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)\n\tat org.eclipse.jface.window.ApplicationWindow$1.run\n(ApplicationWindow.java:624)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:69)\n\tat org.eclipse.jface.window.ApplicationWindow.run\n(ApplicationWindow.java:621)\n\tat org.eclipse.ui.internal.WorkbenchWindow.run\n(WorkbenchWindow.java:2132)\n\tat org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation\n(SaveableHelper.java:122)\n\tat org.eclipse.ui.internal.SaveableHelper.savePart\n(SaveableHelper.java:100)\n\tat org.eclipse.ui.internal.EditorManager.savePart\n(EditorManager.java:1149)\n\tat org.eclipse.ui.internal.WorkbenchPage.savePart\n(WorkbenchPage.java:2661)\n\tat org.eclipse.ui.internal.WorkbenchPage.saveEditor\n(WorkbenchPage.java:2674)\n\tat org.eclipse.ui.internal.SaveAction.run(SaveAction.java:69)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n\tat org.eclipse.jface.commands.ActionHandler.execute\n(ActionHandler.java:117)\n\tat org.eclipse.core.commands.Command.execute(Command.java:311)\n\tat org.eclipse.core.commands.ParameterizedCommand.execute\n(ParameterizedCommand.java:396)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand\n(WorkbenchKeyboard.java:459)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press\n(WorkbenchKeyboard.java:781)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent\n(WorkbenchKeyboard.java:828)\n\tat \norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings\n(WorkbenchKeyboard.java:550)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3\n(WorkbenchKeyboard.java:493)\n\tat \norg.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent\n(WorkbenchKeyboard.java:117)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:1211)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1015)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1040)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1025)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1052)\n\tat org.eclipse.swt.widgets.Widget.gtk_key_press_event(Widget.java:616)\n\tat org.eclipse.swt.widgets.Control.gtk_key_press_event\n(Control.java:1961)\n\tat org.eclipse.swt.widgets.Composite.gtk_key_press_event\n(Composite.java:560)\n\tat org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1354)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3386)\n\tat org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)\n\tat org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:4749)\n\tat org.eclipse.swt.widgets.Display.eventProc(Display.java:1026)\n\tat org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native \nMethod)\n\tat org.eclipse.swt.internal.gtk.OS.g_main_context_iteration\n(OS.java:1139)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2528)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1694)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1658)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:366)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:375)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:162)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)\n\n",
    "- The text file is 30 Mbyte.\n- VM arguments used \"-Xmx500m\", so this should be plenty to handle a 30Mbyte\n  text file.\n\n\nAnything else?",
    "I was able to reproduce the out of memory problem:\n\n1. Open a 30 mbyte text file\n2. Create new empty text file\n3. Copy \u0026 paste contents from 30mbyte text file to new empty file using ctrl-a\n   + ctrl-v\n",
    "To reproduce the exception. There is a, say 20%, chance of reproducing the \nexceptions using these.\n\n1. Load 30 mbyte text file\n2. Delete several large random sections in the text editor\n3. ctrl-S\n\nObserved: it takes a very long time to delete text segments in large files. \nThe GUI is unresponsive while doing so and no progress requester is shown.\n",
    "Reverted summary: you tried to put two bugs into one ;-)\nThere\u0027s already bug 75086 which asks for better handling of large files.\n",
    "The exception happens inside the String class and is not spec\u0027ed. I wouldn\u0027t be\nsure that -Xmx500m is enough to work with a 30MB file (see also bug 75086).",
    "\u003eThe exception happens inside the String class and is not spec\u0027ed. I wouldn\u0027t be\n\u003esure that -Xmx500m is enough to work with a 30MB file (see also bug 75086).\n\nShouldn\u0027t there be some sort of specification here(in principle at least) to\nhold up the observed behaviour against to tell whether the program is behaving\nas intended or not?\n\nE.g. \"1 terrabyte is enough VM heap memory regardless of text file size\". :-)\n\n?yvind",
    "The real cause for this is a bug in the encoder in the JRE:\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id\u003d4949631\n\nUse 5.0 b14 or newer."
  ],
  "commentCreationDates": [
    "2005-06-08T18:28:29+02:00",
    "2005-06-08T18:29:51+02:00",
    "2005-06-08T18:33:47+02:00",
    "2005-06-08T18:40:57+02:00",
    "2005-06-08T18:44:09+02:00",
    "2005-06-08T18:45:54+02:00",
    "2005-06-08T18:52:59+02:00",
    "2005-06-08T19:05:58+02:00",
    "2005-06-08T19:07:06+02:00",
    "2005-06-08T19:18:32+02:00",
    "2006-03-27T17:20:11+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.nio.BufferOverflowException",
      "elements": [
        {
          "method": "java.nio.charset.CoderResult.throwException",
          "source": "CoderResult.java:259"
        },
        {
          "method": "java.lang.StringCoding$CharsetSE.encode",
          "source": "StringCoding.java:340"
        },
        {
          "method": "java.lang.StringCoding.encode",
          "source": "StringCoding.java:374"
        },
        {
          "method": "java.lang.String.getBytes",
          "source": "String.java:573"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.commitFileBufferContent",
          "source": "ResourceTextFileBuffer.java:295"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceFileBuffer.commit",
          "source": "ResourceFileBuffer.java:317"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.commitFileBuffer",
          "source": "TextFileDocumentProvider.java:774"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$2.execute",
          "source": "TextFileDocumentProvider.java:725"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.run",
          "source": "TextFileDocumentProvider.java:128"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute",
          "source": "WorkspaceModifyDelegatingOperation.java:68"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:98"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:110"
        },
        {
          "method": "org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run",
          "source": "WorkspaceOperationRunner.java:73"
        },
        {
          "method": "org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run",
          "source": "WorkspaceOperationRunner.java:63"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation",
          "source": "TextFileDocumentProvider.java:443"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.saveDocument",
          "source": "TextFileDocumentProvider.java:702"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.performSave",
          "source": "AbstractTextEditor.java:3735"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.doSave",
          "source": "AbstractTextEditor.java:3524"
        },
        {
          "method": "org.eclipse.ui.internal.SaveableHelper$1.run",
          "source": "SaveableHelper.java:95"
        },
        {
          "method": "org.eclipse.ui.internal.SaveableHelper$2.run",
          "source": "SaveableHelper.java:116"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:346"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:291"
        },
        {
          "method": "org.eclipse.jface.window.ApplicationWindow$1.run",
          "source": "ApplicationWindow.java:624"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.window.ApplicationWindow.run",
          "source": "ApplicationWindow.java:621"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.run",
          "source": "WorkbenchWindow.java:2132"
        },
        {
          "method": "org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation",
          "source": "SaveableHelper.java:122"
        },
        {
          "method": "org.eclipse.ui.internal.SaveableHelper.savePart",
          "source": "SaveableHelper.java:100"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.savePart",
          "source": "EditorManager.java:1149"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.savePart",
          "source": "WorkbenchPage.java:2661"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.saveEditor",
          "source": "WorkbenchPage.java:2674"
        },
        {
          "method": "org.eclipse.ui.internal.SaveAction.run",
          "source": "SaveAction.java:69"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:996"
        },
        {
          "method": "org.eclipse.jface.commands.ActionHandler.execute",
          "source": "ActionHandler.java:117"
        },
        {
          "method": "org.eclipse.core.commands.Command.execute",
          "source": "Command.java:311"
        },
        {
          "method": "org.eclipse.core.commands.ParameterizedCommand.execute",
          "source": "ParameterizedCommand.java:396"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:459"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:781"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:828"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:550"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3",
          "source": "WorkbenchKeyboard.java:493"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent",
          "source": "WorkbenchKeyboard.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:1211"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1015"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1040"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1025"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:1052"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.gtk_key_press_event",
          "source": "Widget.java:616"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.gtk_key_press_event",
          "source": "Control.java:1961"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.gtk_key_press_event",
          "source": "Composite.java:560"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.windowProc",
          "source": "Widget.java:1354"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3386"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS._gtk_main_do_event",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.gtk_main_do_event",
          "source": "OS.java:4749"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.eventProc",
          "source": "Display.java:1026"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS._g_main_context_iteration",
          "source": "Native  Method"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.g_main_context_iteration",
          "source": "OS.java:1139"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2528"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1694"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1658"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:366"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:375"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:162"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "98997",
      "date": "2005-06-08T18:40:57+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "major"
    }
  ],
  "groupId": "98997",
  "bugId": "98997",
  "date": "2005-06-08T18:28:29+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "major"
}