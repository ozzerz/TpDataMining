{
  "comments": [
    "M6\n\nGot the above message while saveing a Java file. Following entry was in log:\n\njava.lang.NegativeArraySizeException\n\tat \norg.eclipse.core.internal.registry.RegistryCacheReader.readBasicSubElements\n(RegistryCacheReader.java:260)\n\tat \norg.eclipse.core.internal.registry.RegistryCacheReader.loadConfigurationElement\ns(RegistryCacheReader.java:325)\n\tat \norg.eclipse.core.internal.registry.Extension.getConfigurationElements\n(Extension.java:85)\n\tat \norg.eclipse.core.internal.registry.ExtensionPoint.getConfigurationElements\n(ExtensionPoint.java:94)\n\tat \norg.eclipse.ui.texteditor.AbstractMarkerAnnotationModel.installMarkerUpdaters\n(AbstractMarkerAnnotationModel.java:290)\n\tat \norg.eclipse.ui.texteditor.AbstractMarkerAnnotationModel.updateMarkers\n(AbstractMarkerAnnotationModel.java:552)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.filebuffers.CompilationUnitDocumentProvi\nder2.commitWorkingCopy(CompilationUnitDocumentProvider2.java:835)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.filebuffers.CompilationUnitDocumentProvi\nder2$2.execute(CompilationUnitDocumentProvider2.java:860)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.\nrun(TextFileDocumentProvider.java:93)\n\tat org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute\n(WorkspaceModifyDelegatingOperation.java:67)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:91)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1555)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:105)\n\tat org.eclipse.ui.editors.text.WorkspaceOperationRunner.run\n(WorkspaceOperationRunner.java:72)\n\tat org.eclipse.ui.editors.text.WorkspaceOperationRunner.run\n(WorkspaceOperationRunner.java:62)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation\n(TextFileDocumentProvider.java:387)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider.saveDocument\n(TextFileDocumentProvider.java:598)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.performSave\n(AbstractTextEditor.java:3140)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.performSave\n(CompilationUnitEditor.java:872)\n\tat org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.doSave\n(CompilationUnitEditor.java:936)\n\tat org.eclipse.ui.internal.EditorManager$10.run\n(EditorManager.java:1081)\n\tat org.eclipse.ui.internal.EditorManager$8.run(EditorManager.java:936)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:302)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:252)\n\tat org.eclipse.jface.window.ApplicationWindow$1.run\n(ApplicationWindow.java:550)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:84)\n\tat org.eclipse.jface.window.ApplicationWindow.run\n(ApplicationWindow.java:547)\n\tat org.eclipse.ui.internal.WorkbenchWindow.run\n(WorkbenchWindow.java:1612)\n\tat org.eclipse.ui.internal.EditorManager.runProgressMonitorOperation\n(EditorManager.java:942)\n\tat org.eclipse.ui.internal.EditorManager.savePart\n(EditorManager.java:1086)\n\tat org.eclipse.ui.internal.WorkbenchPage.savePart\n(WorkbenchPage.java:2368)\n\tat org.eclipse.ui.internal.WorkbenchPage.saveEditor\n(WorkbenchPage.java:2380)\n\tat org.eclipse.ui.internal.SaveAction.run(SaveAction.java:72)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat org.eclipse.ui.internal.commands.ActionHandler.execute\n(ActionHandler.java:40)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand\n(WorkbenchKeyboard.java:390)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press\n(WorkbenchKeyboard.java:763)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent\n(WorkbenchKeyboard.java:803)\n\tat \norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings\n(WorkbenchKeyboard.java:486)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$0\n(WorkbenchKeyboard.java:421)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent\n(WorkbenchKeyboard.java:215)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:692)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:846)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:871)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:856)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1712)\n\tat org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3036)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2939)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:2836)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1369)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1990)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1506)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1482)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:246)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:47)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n\tat org.eclipse.core.launcher.Main.run(Main.java:742)\n\tat org.eclipse.core.launcher.Main.main(Main.java:581)",
    "Looks like a core bug.\n\nDirk saw this in a workspace that was up and running for hours. After that, save\nworked again without problems.",
    "Hmm, this is somewhere in the code for lazy loading of config elements.  Looks \nlike the .registy file was out of date somehow or there is an actual bug in the \ncode that does the indexing and reading.\n",
    "Would you have a reproduceable test case or a workspace that exposes this \nproblem?",
    "No.\n\nThe surprising thing is that the next save worked without any problem.",
    "Please re-open if the problem re-occur.",
    "... but setting this to works for me is a little strange this there seems to \nbe a real bug. ",
    "Following your advise I\u0027m reopening it.",
    "Just a note here that random disk or IO errors will give this kind of \nbehaviour.  If you have a case where you suspect this, running with -\nnoLazyRegistryCacheLoading will cause the whole registry to be loaded at \nstartup.  Also, deleting the .registry file (in the configuration area) will \nclear out any corrupted registry data)\n\nHaving said that, we will review the code in question to see if there is the \npossibility of negative numbers coming in but suspect it is not.  I doubt that \nwe even ever write negatives.",
    "*** Bug 50870 has been marked as a duplicate of this bug. ***",
    "One real danger here is related to multiple instances of Eclipse writing to the\nsame cache and lazily loading the registry:\n\nImagine this scenario (there is already a registry cache on disk):\n1 - instance A starts\n2 - instance B starts \n3 - from instance B, the configuration is changed (e.g. by the reconciler)\n4 - instance B shuts down, writing a new cache file with added/removed/update\nplugins\n5 - during instance A execution, a lazily loaded extension must be fully\nfetched. Since the data in the file is completely different, the offset points\nto some invalid data.",
    "See also bug 49112.  Dani and Olivier are reporting frequent OutOfMemoryErrors\nwhen running with multiple workspaces.  They both frequently apply patches to\ntheir workspaces along the lines of Rafael\u0027s comment #10.",
    "An obvious approach here would be to protect access to shared files using Java\nNew I/O lock facilities, but we have seen (bug 44735) many PRs about file\nlocking just not working on many different setups (NFS and LVM on Linux, HP-UX,\nand others). ",
    "This is very probably a different effect for the problem described in bug 49112.\n\n*** This bug has been marked as a duplicate of 49112 ***"
  ],
  "commentCreationDates": [
    "2004-01-07T10:57:28+01:00",
    "2004-01-07T12:19:31+01:00",
    "2004-01-08T16:49:27+01:00",
    "2004-01-13T16:32:48+01:00",
    "2004-01-13T18:40:46+01:00",
    "2004-01-14T03:28:08+01:00",
    "2004-01-14T09:57:50+01:00",
    "2004-01-14T14:25:23+01:00",
    "2004-01-26T02:51:29+01:00",
    "2004-01-29T16:05:47+01:00",
    "2004-01-29T21:01:55+01:00",
    "2004-01-30T18:55:07+01:00",
    "2004-01-30T19:04:42+01:00",
    "2004-02-10T18:31:47+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NegativeArraySizeException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.registry.RegistryCacheReader.readBasicSubElements",
          "source": "RegistryCacheReader.java:260"
        },
        {
          "method": "org.eclipse.core.internal.registry.RegistryCacheReader.loadConfigurationElements",
          "source": "RegistryCacheReader.java:325"
        },
        {
          "method": "org.eclipse.core.internal.registry.Extension.getConfigurationElements",
          "source": "Extension.java:85"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionPoint.getConfigurationElements",
          "source": "ExtensionPoint.java:94"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractMarkerAnnotationModel.installMarkerUpdaters",
          "source": "AbstractMarkerAnnotationModel.java:290"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractMarkerAnnotationModel.updateMarkers",
          "source": "AbstractMarkerAnnotationModel.java:552"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.filebuffers.CompilationUnitDocumentProvider2.commitWorkingCopy",
          "source": "CompilationUnitDocumentProvider2.java:835"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.filebuffers.CompilationUnitDocumentProvider2$2.execute",
          "source": "CompilationUnitDocumentProvider2.java:860"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.run",
          "source": "TextFileDocumentProvider.java:93"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute",
          "source": "WorkspaceModifyDelegatingOperation.java:67"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "WorkspaceModifyOperation.java:91"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1555"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:105"
        },
        {
          "method": "org.eclipse.ui.editors.text.WorkspaceOperationRunner.run",
          "source": "WorkspaceOperationRunner.java:72"
        },
        {
          "method": "org.eclipse.ui.editors.text.WorkspaceOperationRunner.run",
          "source": "WorkspaceOperationRunner.java:62"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation",
          "source": "TextFileDocumentProvider.java:387"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.saveDocument",
          "source": "TextFileDocumentProvider.java:598"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.performSave",
          "source": "AbstractTextEditor.java:3140"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.performSave",
          "source": "CompilationUnitEditor.java:872"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.doSave",
          "source": "CompilationUnitEditor.java:936"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$10.run",
          "source": "EditorManager.java:1081"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$8.run",
          "source": "EditorManager.java:936"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:302"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:252"
        },
        {
          "method": "org.eclipse.jface.window.ApplicationWindow$1.run",
          "source": "ApplicationWindow.java:550"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.jface.window.ApplicationWindow.run",
          "source": "ApplicationWindow.java:547"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.run",
          "source": "WorkbenchWindow.java:1612"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.runProgressMonitorOperation",
          "source": "EditorManager.java:942"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.savePart",
          "source": "EditorManager.java:1086"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.savePart",
          "source": "WorkbenchPage.java:2368"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.saveEditor",
          "source": "WorkbenchPage.java:2380"
        },
        {
          "method": "org.eclipse.ui.internal.SaveAction.run",
          "source": "SaveAction.java:72"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.ui.internal.commands.ActionHandler.execute",
          "source": "ActionHandler.java:40"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:390"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:763"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:803"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:486"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$0",
          "source": "WorkbenchKeyboard.java:421"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent",
          "source": "WorkbenchKeyboard.java:215"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:692"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:846"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:871"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:856"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1716"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1712"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_CHAR",
          "source": "Control.java:3036"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2939"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2836"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1369"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1990"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1506"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1482"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:246"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "49622",
      "duplicateId": "49112",
      "date": "2004-01-07T10:57:28+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "major"
    }
  ],
  "groupId": "50992",
  "bugId": "49622",
  "duplicateId": "49112",
  "date": "2004-01-07T10:57:28+01:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "major"
}