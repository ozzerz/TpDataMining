{
  "comments": [
    "I was working on a markerAnnotationSpecification extensionpoint and removed \nall references to the textPreferenceValue and textPreferenceKey (this was on \nthe specification for the breakpoint annotation type in Debug UI).\n\nI then restarted a workspace with an editor open that had two breakpoints. The \neditor failed to open and I had the following in the .log\n\njava.lang.NullPointerException\nat java.util.Hashtable.put(Hashtable.java:398)\nat org.eclipse.core.runtime.Preferences.setDefault(Preferences.java:684)\nat \norg.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.setDefault\n(AbstractUIPlugin.java:428)\nat \norg.eclipse.ui.texteditor.MarkerAnnotationPreferences.initializeDefaultValues\n(MarkerAnnotationPreferences.java:59)\nat org.eclipse.jdt.internal.ui.JavaPlugin.initializeDefaultPreferences\n(JavaPlugin.java:413)\nat org.eclipse.ui.plugin.AbstractUIPlugin.initializeDefaultPluginPreferences\n(AbstractUIPlugin.java:645)\nat org.eclipse.core.runtime.Plugin.getPluginPreferences(Plugin.java:415)\nat \norg.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.initialize\n(AbstractUIPlugin.java:190)\nat org.eclipse.ui.plugin.AbstractUIPlugin.getPreferenceStore\n(AbstractUIPlugin.java:582)\nat org.eclipse.jdt.internal.ui.JavaPlugin.startup(JavaPlugin.java:244)\nat org.eclipse.core.internal.compatibility.PluginActivator.start\n(PluginActivator.java:49)\nat org.eclipse.osgi.framework.internal.core.BundleContext$1.run\n(BundleContext.java:1185)\nat java.security.AccessController.doPrivileged(Native Method)\nat org.eclipse.osgi.framework.internal.core.BundleContext.startActivator\n(BundleContext.java:1178)\nat org.eclipse.osgi.framework.internal.core.BundleContext.start\n(BundleContext.java:1110)\nat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker\n(BundleHost.java:458)\nat org.eclipse.osgi.framework.internal.core.Bundle.start(Bundle.java:328)\nat \norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtensi\non(ConfigurationElement.java:133)\nat \norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtensi\non(ConfigurationElement.java:125)\nat \norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtensi\non(ConfigurationElement.java:114)\nat org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:160)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\nat org.eclipse.ui.internal.WorkbenchPlugin.createExtension\n(WorkbenchPlugin.java:157)\nat org.eclipse.ui.internal.EditorManager$3.run(EditorManager.java:638)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\nat org.eclipse.core.runtime.Platform.run(Platform.java:457)\nat org.eclipse.ui.internal.EditorManager.createPart(EditorManager.java:636)\nat org.eclipse.ui.internal.EditorManager.openInternalEditor\n(EditorManager.java:623)\nat org.eclipse.ui.internal.EditorManager.access$6(EditorManager.java:614)\nat org.eclipse.ui.internal.EditorManager$7.run(EditorManager.java:896)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\nat org.eclipse.core.runtime.Platform.run(Platform.java:457)\nat org.eclipse.ui.internal.EditorManager.busyRestoreEditor\n(EditorManager.java:838)\nat org.eclipse.ui.internal.EditorManager$6.run(EditorManager.java:831)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\nat org.eclipse.ui.internal.EditorManager.restoreEditor(EditorManager.java:827)\nat org.eclipse.ui.internal.EditorManager.restoreState(EditorManager.java:732)\nat org.eclipse.ui.internal.WorkbenchPage.restoreState(WorkbenchPage.java:2263)\nat org.eclipse.ui.internal.WorkbenchWindow.restoreState\n(WorkbenchWindow.java:1337)\nat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1325)\nat org.eclipse.ui.internal.Workbench.access$8(Workbench.java:1293)\nat org.eclipse.ui.internal.Workbench$11.run(Workbench.java:1215)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\nat org.eclipse.core.runtime.Platform.run(Platform.java:457)\nat org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState\n(Workbench.java:1171)\nat org.eclipse.ui.internal.Workbench.init(Workbench.java:870)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1459)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:246)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:85)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\nat org.eclipse.core.launcher.Main.run(Main.java:742)\nat org.eclipse.core.launcher.Main.main(Main.java:581)",
    "fixed \u003e 20040119\n\nThere are four attributes in the markerAnnotationSpecification which used to be\nmandatory:\n- colorPreferenceKey\n- colorPreferenceValue\n- showInOverviewRulerKey\n- showInTextKey (for squiggly lines)\n\nBesides these four, the annotationType attribute is mandatory and marked as such\nin the extension point schema. The reason for the other attributes not being\nmandatory is that annotations can inherit properties from parent specifications,\nwhich cannot be expressed in the schema. However, an annotation type for which\nthese are not defined (by either itself or its parent spec) will not show up in\nthe preference page and cannot be configured by the user, so you should probably\nleave these keys in your specification, even though most users will never want\nto display the current instruction pointer or breakpoints as squiggly lines (but\nyou never know...).\n\nI updated the schema comments accordingly. I also updated the\nMarkerAnnotationPreferences class to check for the above four attributes which\nmust be present for an annotation preference to be included in the List returned\nfrom ::getAnnotationPreferences(). This will prevent the NPE shown in comment 0.\n\nBesides that, the AnnotationPreference javadoc was updated to explicitely state\nthat any getter may return null.",
    "verified in build I200402122000"
  ],
  "commentCreationDates": [
    "2004-01-16T05:14:30+01:00",
    "2004-01-19T16:39:47+01:00",
    "2004-02-13T15:57:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.util.Hashtable.put",
          "source": "Hashtable.java:398"
        },
        {
          "method": "org.eclipse.core.runtime.Preferences.setDefault",
          "source": "Preferences.java:684"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.setDefault",
          "source": "AbstractUIPlugin.java:428"
        },
        {
          "method": "org.eclipse.ui.texteditor.MarkerAnnotationPreferences.initializeDefaultValues",
          "source": "MarkerAnnotationPreferences.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.JavaPlugin.initializeDefaultPreferences",
          "source": "JavaPlugin.java:413"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.initializeDefaultPluginPreferences",
          "source": "AbstractUIPlugin.java:645"
        },
        {
          "method": "org.eclipse.core.runtime.Plugin.getPluginPreferences",
          "source": "Plugin.java:415"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$CompatibilityPreferenceStore.initialize",
          "source": "AbstractUIPlugin.java:190"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.getPreferenceStore",
          "source": "AbstractUIPlugin.java:582"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.JavaPlugin.startup",
          "source": "JavaPlugin.java:244"
        },
        {
          "method": "org.eclipse.core.internal.compatibility.PluginActivator.start",
          "source": "PluginActivator.java:49"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContext$1.run",
          "source": "BundleContext.java:1185"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContext.startActivator",
          "source": "BundleContext.java:1178"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContext.start",
          "source": "BundleContext.java:1110"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:458"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.start",
          "source": "Bundle.java:328"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:133"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:125"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:114"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin$1.run",
          "source": "WorkbenchPlugin.java:160"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin.createExtension",
          "source": "WorkbenchPlugin.java:157"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$3.run",
          "source": "EditorManager.java:638"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.createPart",
          "source": "EditorManager.java:636"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openInternalEditor",
          "source": "EditorManager.java:623"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.access$6",
          "source": "EditorManager.java:614"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$7.run",
          "source": "EditorManager.java:896"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.busyRestoreEditor",
          "source": "EditorManager.java:838"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$6.run",
          "source": "EditorManager.java:831"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.restoreEditor",
          "source": "EditorManager.java:827"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.restoreState",
          "source": "EditorManager.java:732"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.restoreState",
          "source": "WorkbenchPage.java:2263"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.restoreState",
          "source": "WorkbenchWindow.java:1337"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.restoreState",
          "source": "Workbench.java:1325"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$8",
          "source": "Workbench.java:1293"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$11.run",
          "source": "Workbench.java:1215"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState",
          "source": "Workbench.java:1171"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.init",
          "source": "Workbench.java:870"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1459"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:246"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "50119",
      "date": "2004-01-16T05:14:30+01:00",
      "product": "Platform",
      "component": "Text",
      "severity": "major"
    }
  ],
  "groupId": "50119",
  "bugId": "50119",
  "date": "2004-01-16T05:14:30+01:00",
  "product": "Platform",
  "component": "Text",
  "severity": "major"
}