{
  "comments": [
    "build 20030909\n1) open new workspace\n2) import all plugin as binary\n3) import org.eclipse.jdt.ui and org.eclipse.jdt.core as source\n3) create the following class in org.eclipse.jdt.core\n------------------------------------\npackage org.eclipse.jdt.internal.ui;\npublic class X {\n  int f1;\n}\n------------------------------------\n4) open org.eclipse.jdt.internal.ui.JavaPlugin\n5) modify the startup method with the following code\n-------------------------------------\npublic void startup() throws CoreException {\n  super.startup();\n  X x \u003d new X();\n  x.f1 \u003d 5;\n  registerAdapters();\n  ...\n}\n-------------------------------------\n6) compile \nthere is no error of compilation\n7) lauch eclipse with these modifications\n8) open the java perspective\nan error window appear and the .log file contain the following stacktrace\n\njava.lang.IllegalAccessError: tried to access field \norg.eclipse.jdt.internal.ui.X.f1 from class \norg.eclipse.jdt.internal.ui.JavaPlugin\n\tat org.eclipse.jdt.internal.ui.JavaPlugin.startup(JavaPlugin.java:236)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor$1.run\n(PluginDescriptor.java:736)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1016)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation\n(PluginDescriptor.java:748)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation\n(PluginDescriptor.java:188)\n\tat org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin\n(PluginClassLoader.java:109)\n\tat \norg.eclipse.core.internal.plugins.PluginClassLoader.internalFindClassParentsSelf\n(PluginClassLoader.java:181)\n\tat \norg.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassParentsSelf\n(DelegatingURLClassLoader.java:490)\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java:882)\n\tat ...\n\nThere is no error in source and compiler seems to compile fine. I think it \ncould be a classloader problem because the problem does not appear if the files \nare in the same project.",
    "David, sorry, but you cannot do what you are trying to do. In Eclipse, each\nplugin has its own classloader to load its classes. Two classes declared in the\nsame package but loaded by different classloaders are not effectively in the\nsame package (w.r.t. access control during runtime). ",
    "*** Bug 22753 has been marked as a duplicate of this bug. ***",
    "*** Bug 37647 has been marked as a duplicate of this bug. ***",
    "I fully understand and agree with the fact that \nplugins must have separate class loaders. \n\nBut it would be great that for testing purpose\nonly we could bypass this scheme.\n\nI logged an enhancement request :\n(Because it is what it is)\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d44709\n"
  ],
  "commentCreationDates": [
    "2003-09-10T12:31:10+02:00",
    "2003-09-10T16:09:45+02:00",
    "2003-09-25T19:57:52+02:00",
    "2003-10-06T15:21:54+02:00",
    "2003-10-12T05:30:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalAccessError",
      "message": "tried to access field  org.eclipse.jdt.internal.ui.X.f1 from class  org.eclipse.jdt.internal.ui.JavaPlugin",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.ui.JavaPlugin.startup",
          "source": "JavaPlugin.java:236"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor$1.run",
          "source": "PluginDescriptor.java:736"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1016"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:748"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:188"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:109"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.internalFindClassParentsSelf",
          "source": "PluginClassLoader.java:181"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.findClassParentsSelf",
          "source": "DelegatingURLClassLoader.java:490"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java:882"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "42853",
      "date": "2003-09-10T12:31:10+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "42853",
  "bugId": "42853",
  "date": "2003-09-10T12:31:10+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}