{
  "comments": [
    "Build ID: I20061214-1445\n\nSteps To Reproduce:\n1. Switch to compiler compliance level 6.0.\n\n2. Create the following class in a Java project\n\u003e CompilerErrorTest.java \u003e\u003e\u003e\npublic class CompilerErrorTest {\n  static class Worker {\n    Worker(long i) {}\n  }\n  void doit() {\n    final Object o \u003d new Object();\n    Worker w \u003d new Worker(0) {\n      public void work() {\n        o.toString();\n      }\n    };\n  }\n}\n\u003c CompilerErrorTest.java \u003c\u003c\u003c\n\n3. Try to compile it and enjoy the compiler error\n####\nSeverity and Description\tPath\tResource\tLocation\tCreation Time\tId\nInternal compiler error\njava.lang.ArrayIndexOutOfBoundsException: 4\n\tat org.eclipse.jdt.internal.compiler.codegen.StackMapFrameCodeStream.getLocal(StackMapFrameCodeStream.java:771)\n\tat org.eclipse.jdt.internal.compiler.codegen.StackMapFrameCodeStream.aload(StackMapFrameCodeStream.java:93)\n\tat org.eclipse.jdt.internal.compiler.codegen.CodeStream.load(CodeStream.java:5247)\n\tat org.eclipse.jdt.internal.compiler.codegen.CodeStream.load(CodeStream.java:5147)\n\tat org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.generateSyntheticFieldInitializationsIfNecessary(ConstructorDeclaration.java:226)\n\tat org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.internalGenerateCode(ConstructorDeclaration.java:286)\n\tat org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.generateCode(ConstructorDeclaration.java:179)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:530)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:564)\n\tat org.eclipse.jdt.internal.compiler.ast.QualifiedAllocationExpression.generateCode(QualifiedAllocationExpression.java:145)\n\tat org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.generateCode(LocalDeclaration.java:109)\n\tat org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode(AbstractMethodDeclaration.java:229)\n\tat org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode(AbstractMethodDeclaration.java:176)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:530)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:581)\n\tat org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode(CompilationUnitDeclaration.java:215)\n\tat org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:605)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:415)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:301)\n\tat org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile(BatchImageBuilder.java:213)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:238)\n\tat org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:59)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:254)\n\tat org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:175)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:621)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:163)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:194)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:243)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:246)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:299)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:331)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:156)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:222)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\ttest/src\tCompilerErrorTest.java\tline 0\t1167763331453\t35\n####\n\nMore information:\nThe compiler error vanishes when the constructor Worker has no parameter or when the parameter is a long or double value.\n\nSwitching the compiler compliance level remove also the compiler error.",
    "\n\n*** This bug has been marked as a duplicate of bug 168665 ***",
    "Verified for 3.2.2 using build M20070112-1200.\n"
  ],
  "commentCreationDates": [
    "2007-01-02T18:51:51+01:00",
    "2007-01-02T20:44:38+01:00",
    "2007-01-16T11:53:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "4",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.codegen.StackMapFrameCodeStream.getLocal",
          "source": "StackMapFrameCodeStream.java:771"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.codegen.StackMapFrameCodeStream.aload",
          "source": "StackMapFrameCodeStream.java:93"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.codegen.CodeStream.load",
          "source": "CodeStream.java:5247"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.codegen.CodeStream.load",
          "source": "CodeStream.java:5147"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.generateSyntheticFieldInitializationsIfNecessary",
          "source": "ConstructorDeclaration.java:226"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.internalGenerateCode",
          "source": "ConstructorDeclaration.java:286"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.generateCode",
          "source": "ConstructorDeclaration.java:179"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode",
          "source": "TypeDeclaration.java:530"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode",
          "source": "TypeDeclaration.java:564"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.QualifiedAllocationExpression.generateCode",
          "source": "QualifiedAllocationExpression.java:145"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.generateCode",
          "source": "LocalDeclaration.java:109"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode",
          "source": "AbstractMethodDeclaration.java:229"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.generateCode",
          "source": "AbstractMethodDeclaration.java:176"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode",
          "source": "TypeDeclaration.java:530"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.generateCode",
          "source": "TypeDeclaration.java:581"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode",
          "source": "CompilationUnitDeclaration.java:215"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:605"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:415"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:301"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile",
          "source": "BatchImageBuilder.java:213"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:238"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build",
          "source": "BatchImageBuilder.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll",
          "source": "JavaBuilder.java:254"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.build",
          "source": "JavaBuilder.java:175"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:621"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:163"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:194"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:243"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:246"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:299"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:331"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:156"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:222"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "169358",
      "duplicateId": "168665",
      "date": "2007-01-02T18:51:51+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "168665",
  "bugId": "169358",
  "duplicateId": "168665",
  "date": "2007-01-02T18:51:51+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}