{
  "comments": [
    "build I20040621-0800\n\n- launched target IDE\n- launched another target IDE\n- while the second was launching, exited the first\n- got the following NPE\n\nFile.list() can return null.  It should check for this.\n\nThe launch config I was using does not clear the workspace, but does clear the\nconfig area.\n\nThread [System Bundle Shutdown] (Suspended (exception NullPointerException))\n\tFileManager.cleanup() line: 361\n\tFileManager.close() line: 407\n\tPlatformActivator.stop(BundleContext) line: 192\n\tBundleContextImpl$2.run() line: 994\n\tAccessController.doPrivileged(PrivilegedExceptionAction) line: not available\n[native method]\n\tBundleContextImpl.stop() line: 990\n\tBundleHost.stopWorker(boolean) line: 502\n\tBundleHost(AbstractBundle).suspend(boolean) line: 539\n\tFramework.suspendBundle(AbstractBundle, boolean) line: 1029\n\tStartLevelManager.decFWSL(int) line: 627\n\tStartLevelManager.doSetStartLevel(int, AbstractBundle) line: 281\n\tStartLevelManager.shutdown() line: 254\n\tSystemBundle.suspend() line: 201\n\tFramework.shutdown() line: 466\n\tSystemBundle$1.run() line: 182\n\tThread.run() line: 534",
    "managerRoot was:\nd:\\eclipse-new\\plugins\\.metadata\\.plugins\\org.eclipse.pde.core\\New\nTarget\\org.eclipse.core.runtime\\.manager\n\nso it was in the config area, which PDE wiped out when I launched the second one.\n\nPDE should probably check that another target is not running before wiping out\nthe config area.\n",
    "Note that I only hit this in the debugger because I had set an NPE breakpoint.\nIt looks like OSGi handles this reasonably cleanly by just broadcasting an event\nwith the exception and continuing to shut down.\n\n",
    "Here is another related NPE.\nTo reproduce:\n- initialize an installation\n- run with eclipse -configuration c:\\MyConfig\n\nIn this case the configuration in c:\\MyConfig will be linked with the \ninitialized one, which will cause the runtime area from the shared location to \nbe used. When trying to save, the close() methods NPE because instanceFile and \ninstanceLocker has not been initialized (probably because the creation of the \ntemporary file failed throwing an exception).\nWhen shtting down eclipse, the error obtained.\n\nThis should be considered for 3.0.1.\n\n        at java.lang.Thread.run(Thread.java:534)\nCaused by: java.lang.NullPointerException\n        at org.eclipse.osgi.service.datalocation.FileManager.close\n(FileManager.java:411)\n        at org.eclipse.core.internal.runtime.PlatformActivator.stop\n(PlatformActivator.java\n:192)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run\n(BundleContextI\nmpl.java:994)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop\n(BundleContextIm\npl.java:990)\n        ... 10 more",
    "Created an attachment (id\u003d14260)\nFix the problems\n\nJeff, DJ, please review.",
    "Patch reviewed and committed.\n\nPascal to apply same patched in HEAD.\n",
    "Released in HEAD"
  ],
  "commentCreationDates": [
    "2004-06-23T20:17:08+02:00",
    "2004-06-23T20:18:42+02:00",
    "2004-06-23T20:21:13+02:00",
    "2004-08-30T17:38:09+02:00",
    "2004-08-30T17:55:03+02:00",
    "2004-08-31T16:34:06+02:00",
    "2004-08-31T19:16:41+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.osgi.service.datalocation.FileManager.close",
          "source": "FileManager.java:411"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator.stop",
          "source": "PlatformActivator.java :192"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
          "source": "BundleContextI mpl.java:994"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop",
          "source": "BundleContextIm pl.java:990"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "68349",
      "date": "2004-08-30T17:38:09+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    }
  ],
  "groupId": "68349",
  "bugId": "68349",
  "date": "2004-06-23T20:17:08+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "normal"
}