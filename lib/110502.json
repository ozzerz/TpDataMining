{
  "comments": [
    "In the facet-based New Web Project wizard, in the panel that allows the user \nto add the project to an EAR, we\u0027re getting the following stack intermittently \nwhile trying to populate the combo box of EAR projects in the workspace.\n\nHaven\u0027t confirmed yet whether this only occurs when there are other WTP \nprojects in the workspace.\n\nThe various com.bea classes should map to org.eclipse.wst.common.features \nclasses\n\njava.lang.NullPointerException\n    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify\n(BasicNotifierImpl.java:229)\n    at \norg.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification\n(NotifyingListImpl.java:251)\n    at org.eclipse.emf.common.notify.impl.NotifyingListImpl.clear\n(NotifyingListImpl.java:846)\n    at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load\n(ResourceImpl.java:951)\n    at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load\n(ResourceImpl.java:832)\n    at org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load\n(TranslatorResourceImpl.java:382)\n    at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getAndLoadLo\ncalResource(EditModel.java:747)\n    at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource\n(EditModel.java:677)\n    at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryRe\nsource(EditModel.java:1507)\n    at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryRo\notObject(EditModel.java:1488)\n    at \norg.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryR\nootObject(ModuleStructuralModel.java:75)\n    at \norg.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRo\not(StructureEdit.java:495)\n    at \norg.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules\n(StructureEdit.java:523)\n    at \norg.eclipse.wst.common.componentcore.internal.resources.FlexibleProject.getComp\nonents(FlexibleProject.java:40)\n    at com.bea.wlw.features.base.EarSelectionPanel.populateEarList\n(EarSelectionPanel.java:175)\n    at com.bea.wlw.features.base.EarSelectionPanel.\u003cinit\u003e\n(EarSelectionPanel.java:104)\n    at com.bea.wlw.features.base.WebFeatureInstallPage.createControl\n(WebFeatureInstallPage.java:65)\n    at \ncom.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.handleSelectedFeatures\nChangedEvent(AddRemoveFeaturesWizard.java:538)\n    at \ncom.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.createPageControls\n(AddRemoveFeaturesWizard.java:230)\n    at org.eclipse.jface.wizard.WizardDialog.createPageControls\n(WizardDialog.java:611)\n    at org.eclipse.jface.wizard.WizardDialog.setWizard(WizardDialog.java:965)\n    at org.eclipse.jface.wizard.WizardDialog.updateForPage\n(WizardDialog.java:1016)\n    at org.eclipse.jface.wizard.WizardDialog.access$2(WizardDialog.java:1013)\n    at org.eclipse.jface.wizard.WizardDialog$4.run(WizardDialog.java:1003)\n    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n    at org.eclipse.jface.wizard.WizardDialog.showPage(WizardDialog.java:1001)\n    at \norg.eclipse.ui.internal.dialogs.NewWizardSelectionPage.advanceToNextPageOrFinis\nh(NewWizardSelectionPage.java:71)\n    at org.eclipse.ui.internal.dialogs.NewWizardNewPage$2.doubleClick\n(NewWizardNewPage.java:372)\n    at org.eclipse.jface.viewers.StructuredViewer$1.run\n(StructuredViewer.java:720)\n    at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\n    at org.eclipse.core.runtime.Platform.run(Platform.java:783)\n    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\n    at org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick\n(StructuredViewer.java:718)\n    at org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect\n(StructuredViewer.java:950)\n    at org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected\n(StructuredViewer.java:1057)\n    at org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent\n(OpenStrategy.java:219)\n    at org.eclipse.jface.util.OpenStrategy.access$0(OpenStrategy.java:216)",
    "Here\u0027s another occurence of the NPE coming from the structural component \nbuilder.\n\n     [java] java.lang.NullPointerException\n     [java]     at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify\n(BasicNotifierImpl.java:229)\n     [java]     at \norg.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification\n(NotifyingListImpl.java:251)\n     [java]     at org.eclipse.emf.common.notify.impl.NotifyingListImpl.clear\n(NotifyingListImpl.java:846)\n     [java]     at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load\n(ResourceImpl.java:951)\n     [java]     at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load\n(ResourceImpl.java:832)\n     [java]     at \norg.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load\n(TranslatorResourceImpl.java:382)\n     [java]     at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getAndLoadLo\ncalResource(EditModel.java:747)\n     [java]     at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource\n(EditModel.java:677)\n     [java]     at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryRe\nsource(EditModel.java:1507)\n     [java]     at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryRo\notObject(EditModel.java:1488)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryR\nootObject(ModuleStructuralModel.java:75)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRo\not(StructureEdit.java:495)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules\n(StructureEdit.java:523)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.builder.ProjectComponentsBuilderD\nataModelProvider.populateFullModuleBuilderDataModelList\n(ProjectComponentsBuilderDataModelProvider.java:204)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.builder.ProjectComponentsBuilderD\nataModelProvider.populateModuleBuilderDataModelList\n(ProjectComponentsBuilderDataModelProvider.java:88)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.builder.ProjectComponentsBuilderD\nataModelProvider.propertySet(ProjectComponentsBuilderDataModelProvider.java:66)\n     [java]     at \norg.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.internalSetP\nroperty(DataModelImpl.java:181)\n     [java]     at \norg.eclipse.wst.common.frameworks.internal.datamodel.DataModelImpl.setProperty\n(DataModelImpl.java:171)\n     [java]     at \norg.eclipse.wst.common.componentcore.internal.builder.ComponentStructuralBuilde\nr.build(ComponentStructuralBuilder.java:79)\n     [java]     at org.eclipse.core.internal.events.BuildManager$2.run\n(BuildManager.java:593)\n     [java]     at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\n     [java]     at org.eclipse.core.runtime.Platform.run(Platform.java:783)\n     [java]     at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:168)\n     [java]     at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:202)\n     [java]     at org.eclipse.core.internal.events.BuildManager$1.run\n(BuildManager.java:231)\n     [java]     at org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\n     [java]     at org.eclipse.core.runtime.Platform.run(Platform.java:783)\n     [java]     at org.eclipse.core.internal.events.BuildManager.basicBuild\n(BuildManager.java:234)\n     [java]     at org.eclipse.core.internal.events.BuildManager.basicBuildLoop\n(BuildManager.java:253)\n     [java]     at org.eclipse.core.internal.events.BuildManager.build\n(BuildManager.java:282)\n     [java]     at org.eclipse.core.internal.events.AutoBuildJob.doBuild\n(AutoBuildJob.java:139)\n     [java]     at org.eclipse.core.internal.events.AutoBuildJob.run\n(AutoBuildJob.java:200)\n",
    "EMF is not thread safe.  In the past when I\u0027ve debugged similar null pointer\nexceptions, the result was always the same; The model was being accessed by two\nthreads and one of the threads disposed the editmodel. During the dispose, the\nsecond thread fires a notification, but the adapters have been removed during\nthe eNotify loop thus causing the null pointer exception.  Could threading be\nyour problem?",
    "The code in question makes a call to FlexibleProject.getComponents() which in \nturn accesses the EMF model. Since the the flexible project api is supposed to \nbe hiding EMF, do you think some synchronization should be added to the \nFlexibleProject implementation?\n",
    "Yeah some additional sync code may be required.  I added a bunch in\nEMFWorkbenchContext a while back to fix 104786.  I don\u0027t suppose you have a\nJUnit testcase which can reproduce this?  Without one, this could be nearly\nimpossible to fix.  You\u0027re not running on old code, are you?  I ask because the\nline number in the second exception for\norg.eclipse.wst.common.componentcore.internal.builder.ProjectComponentsBuilderD\nataModelProvider.populateFullModuleBuilderDataModelList\n(ProjectComponentsBuilderDataModelProvider.java:204) doesn\u0027t match up with the\ncode, and that file hasn\u0027t changed in a while.",
    "All of these stacks come from the WTP I-build of 8/23 which I think was after \nyour new syncronization code was released.  If not, that might be the \nproblem.  (We\u0027re planning to integrate M8 soon.)\n\nHere\u0027s a stack coming from getComponents(), in this case getComponents() is \nactually calling dispose() itself and blowing up.\n\n     [java] java.lang.NullPointerException\n     [java] \tat org.eclipse.emf.ecore.util.EcoreUtil.getAdapter\n(EcoreUtil.java:144)\n     [java] \tat \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.preUnload\n(EMF2DOMRenderer.java:243)\n     [java] \tat \norg.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.doUnload\n(TranslatorResourceImpl.java:185)\n     [java] \tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.unload\n(ResourceImpl.java:1101)\n     [java] \tat \norg.eclipse.wst.common.internal.emf.resource.ReferencedXMIResourceImpl.unloadIf\nNecessary(ReferencedXMIResourceImpl.java:135)\n     [java] \tat \norg.eclipse.wst.common.internal.emf.resource.ReferencedXMIResourceImpl.releaseF\nromRead(ReferencedXMIResourceImpl.java:188)\n     [java] \tat \norg.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.releaseFrom\nRead(TranslatorResourceImpl.java:343)\n     [java] \tat \norg.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.release\n(ModuleStructuralModel.java:64)\n     [java] \tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.release\n(EditModel.java:979)\n     [java] \tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.releaseResou\nrces(EditModel.java:1001)\n     [java] \tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.dispose\n(EditModel.java:161)\n     [java] \tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.releaseAcces\ns(EditModel.java:966)\n     [java] \tat \norg.eclipse.wst.common.componentcore.internal.StructureEdit.dispose\n(StructureEdit.java:467)\n     [java] \tat \norg.eclipse.wst.common.componentcore.internal.resources.FlexibleProject.getComp\nonents(FlexibleProject.java:50)\n     [java] \tat com.bea.wlw.features.base.EarSelectionPanel.populateEarList\n(EarSelectionPanel.java:175)\n     [java] \tat com.bea.wlw.features.base.EarSelectionPanel.\u003cinit\u003e\n(EarSelectionPanel.java:104)\n     [java] \tat \ncom.bea.wlw.ejb.ui.wizards.NewEJBProjectWizardPage.createControl\n(NewEJBProjectWizardPage.java:65)\n     [java] \tat \ncom.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.handleSelectedFeatures\nChangedEvent(AddRemoveFeaturesWizard.java:538)\n     [java] \tat \ncom.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.createPageControls\n(AddRemoveFeaturesWizard.java:230)\n     [java] \tat org.eclipse.jface.wizard.WizardDialog.createPageControls\n(WizardDialog.java:611)\n     [java] \tat org.eclipse.jface.wizard.WizardDialog.setWizard\n(WizardDialog.java:965)\n     [java] \tat org.eclipse.jface.wizard.WizardDialog.updateForPage\n(WizardDialog.java:1016)\n     [java] \tat org.eclipse.jface.wizard.WizardDialog.access$2\n(WizardDialog.java:1013)\n     [java] \tat org.eclipse.jface.wizard.WizardDialog$4.run\n(WizardDialog.java:1003)\n     [java] \tat org.eclipse.swt.custom.BusyIndicator.showWhile\n(BusyIndicator.java:69)\n     [java] \tat org.eclipse.jface.wizard.WizardDialog.showPage\n(WizardDialog.java:1001)\n     [java] \tat \norg.eclipse.ui.internal.dialogs.NewWizardSelectionPage.advanceToNextPageOrFinis\nh(NewWizardSelectionPage.java:71)\n     [java] \tat \norg.eclipse.ui.internal.dialogs.NewWizardNewPage$2.doubleClick\n(NewWizardNewPage.java:372)\n     [java] \tat org.eclipse.jface.viewers.StructuredViewer$1.run\n(StructuredViewer.java:720)\n     [java] \tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\n     [java] \tat org.eclipse.core.runtime.Platform.run(Platform.java:783)\n     [java] \tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n",
    "We have not seen these NPE\u0027s since adopting M8.  Thanks!",
    "This bug is being moved to the \"closed\" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug."
  ],
  "commentCreationDates": [
    "2005-09-24T00:33:44+02:00",
    "2005-09-24T00:37:28+02:00",
    "2005-09-26T19:44:24+02:00",
    "2005-09-26T19:49:04+02:00",
    "2005-09-26T20:17:55+02:00",
    "2005-09-26T21:23:39+02:00",
    "2005-10-03T17:33:27+02:00",
    "2006-09-23T03:07:32+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify",
          "source": "BasicNotifierImpl.java:229"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.dispatchNotification",
          "source": "NotifyingListImpl.java:251"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.clear",
          "source": "NotifyingListImpl.java:846"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:951"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:832"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load",
          "source": "TranslatorResourceImpl.java:382"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getAndLoadLocalResource",
          "source": "EditModel.java:747"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource",
          "source": "EditModel.java:677"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryResource",
          "source": "EditModel.java:1507"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryRootObject",
          "source": "EditModel.java:1488"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryRootObject",
          "source": "ModuleStructuralModel.java:75"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRoot",
          "source": "StructureEdit.java:495"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules",
          "source": "StructureEdit.java:523"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.resources.FlexibleProject.getComponents",
          "source": "FlexibleProject.java:40"
        },
        {
          "method": "com.bea.wlw.features.base.EarSelectionPanel.populateEarList",
          "source": "EarSelectionPanel.java:175"
        },
        {
          "method": "com.bea.wlw.features.base.EarSelectionPanel.\u003cinit\u003e",
          "source": "EarSelectionPanel.java:104"
        },
        {
          "method": "com.bea.wlw.features.base.WebFeatureInstallPage.createControl",
          "source": "WebFeatureInstallPage.java:65"
        },
        {
          "method": "com.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.handleSelectedFeaturesChangedEvent",
          "source": "AddRemoveFeaturesWizard.java:538"
        },
        {
          "method": "com.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.createPageControls",
          "source": "AddRemoveFeaturesWizard.java:230"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.createPageControls",
          "source": "WizardDialog.java:611"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.setWizard",
          "source": "WizardDialog.java:965"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.updateForPage",
          "source": "WizardDialog.java:1016"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.access$2",
          "source": "WizardDialog.java:1013"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog$4.run",
          "source": "WizardDialog.java:1003"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.showPage",
          "source": "WizardDialog.java:1001"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.NewWizardSelectionPage.advanceToNextPageOrFinish",
          "source": "NewWizardSelectionPage.java:71"
        },
        {
          "method": "org.eclipse.ui.internal.dialogs.NewWizardNewPage$2.doubleClick",
          "source": "NewWizardNewPage.java:372"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$1.run",
          "source": "StructuredViewer.java:720"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick",
          "source": "StructuredViewer.java:718"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect",
          "source": "StructuredViewer.java:950"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected",
          "source": "StructuredViewer.java:1057"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent",
          "source": "OpenStrategy.java:219"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$0",
          "source": "OpenStrategy.java:216"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "110502",
      "date": "2005-09-24T00:33:44+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "critical"
    }
  ],
  "groupId": "110502",
  "bugId": "110502",
  "date": "2005-09-24T00:33:44+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "critical"
}