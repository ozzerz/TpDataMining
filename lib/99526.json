{
  "comments": [
    "The following exception occurs for every folder mentioned in the classpath of\nthe debug configuraiton.\n\n!MESSAGE Unable to access archive\n/home/venku/projects/Testing/JavaSlicer/Slicer/Throw\n!STACK 0\njava.util.zip.ZipException: Is a directory\n        at java.util.zip.ZipFile.open(Native Method)\n        at java.util.zip.ZipFile.\u003cinit\u003e(ZipFile.java:112)\n        at java.util.zip.ZipFile.\u003cinit\u003e(ZipFile.java:72)\n        at\norg.eclipse.debug.internal.core.sourcelookup.SourceLookupUtils.getZipFile(SourceLookupUtils.java:67)\n        at\norg.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.getArchive(ExternalArchiveSourceContainer.java:193)\n        at\norg.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.findSourceElements(ExternalArchiveSourceContainer.java:79)\n        at org.eclipse.debug.core.sourcelookup.containers.CompositeS",
    "When a breakpoint is hit during the debug session, the mentioned exception occurs.",
    "The exact version of eclispe is 3.1RC2.  This exception does not occur on 3.1RC1.",
    "I\u0027m not able to reproduce this problem. Where is the class folder added to te \nclasspath - i.e. from the build path, from the launch config class path, or \nthe launch config source path (all work for me).",
    "Well, I created a new debug session with no source attachments.  Not even in the\nprojects.  I added a folder to the class path via \"advanced-\u003eadd external\nfolder\" and it generated the following entry in the .launch file.\n\n\u003clistEntry value\u003d\"\u0026lt;?xml version\u003d\u0026quot;1.0\u0026quot;\nencoding\u003d\u0026quot;UTF-8\u0026quot;?\u0026gt;\u0026#10;\u0026lt;runtimeClasspathEntry type\u003d\u0026quot;2\u0026quot;\npath\u003d\u0026quot;3\u0026quot; externalArchive\u003d\u0026quot;/home/\nvenku/projects/Testing/JavaSlicer/Slicer/Home\u0026quot;/\u0026gt;\u0026#10;\"/\u003e\n\nHowever, when trying to view the source it printed out the following into the\nlog file.\n\n!SUBENTRY 1 org.eclipse.debug.core 4 120 2005-06-14 18:39:27.385\n!MESSAGE Source lookup error\n!SUBENTRY 2 org.eclipse.debug.core 4 120 2005-06-14 18:39:27.386\n!MESSAGE Unable to access archive\n/home/venku/projects/Testing/JavaSlicer/Slicer/Home\n!STACK 0\njava.util.zip.ZipException: Is a directory\n        at java.util.zip.ZipFile.open(Native Method)\n        at java.util.zip.ZipFile.\u003cinit\u003e(ZipFile.java:112)\n        at java.util.zip.ZipFile.\u003cinit\u003e(ZipFile.java:72)\n        at\norg.eclipse.debug.internal.core.sourcelookup.SourceLookupUtils.getZipFile(SourceLookupUtils.java:67)\n        at\norg.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.getArchive(ExternalArchiveSourceContainer.java:193)\n        at\norg.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.findSourceElements(ExternalArchiveSourceContainer.java:79)\n        at\norg.eclipse.debug.core.sourcelookup.containers.CompositeSourceContainer.findSourceElements(CompositeSourceContainer.java:78)\n        at\norg.eclipse.debug.core.sourcelookup.containers.CompositeSourceContainer.findSourceElements(CompositeSourceContainer.java:45)\n        at\norg.eclipse.debug.core.sourcelookup.AbstractSourceLookupParticipant.findSourceElements(AbstractSourceLookupParticipant.java:67)\n        at\norg.eclipse.debug.core.sourcelookup.AbstractSourceLookupDirector$SourceLookupQuery.run(AbstractSourceLookupDirector.java:126)\n        at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1038)\n        at org.eclipse.core.runtime.Platform.run(Platform.java:775)\n        at\norg.eclipse.debug.core.sourcelookup.AbstractSourceLookupDirector.doSourceLookup(AbstractSourceLookupDirector.java:461)\n        at\norg.eclipse.debug.core.sourcelookup.AbstractSourceLookupDirector.getSourceElement(AbstractSourceLookupDirector.java:711)\n        at\norg.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:138)\n        at org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:658)\n        at\norg.eclipse.debug.internal.ui.views.launch.LaunchView$SourceLookupJob.run(LaunchView.java:176)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\n\nAfter this run, I installed 3.1RC1 on top of 3.1RC2 and the debug session worked\nfine.  In fact, it even worked with \"variable string\" based classpaths defying\nthe (unfixed) bug 77773.\n",
    "Fixed in JavaSourceLookupUtil and PackageFragmentRootSourceContainer. \nIncorrectly creating archive source containers for folders/directories.",
    "Please verify, Kevin.",
    "verified",
    "I tried 3.1RC3 and the fix worked but it did result in a new failure.  The\nsource files in the project are not being found.  I turned on the debug flags\nvia .options file and only the following archives were searched for the source\nfile when a breakpoint was reached.  The source lookup path was set by using the\n\"Restore default\".\n\n[reading    java/io/PrintStream.class]\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/rt.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/rt.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/rt.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/sunrsasign.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/sunrsasign.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/sunrsasign.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/jsse.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/jsse.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/jsse.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/jce.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/jce.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/jce.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/charsets.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/charsets.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/charsets.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/ext/sunjce_provider.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/ext/sunjce_provider.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/ext/sunjce_provider.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/ext/dnsns.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/ext/dnsns.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/ext/dnsns.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/ext/ldapsec.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/ext/ldapsec.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/ext/ldapsec.jar\nThread[Worker-17,5,main] OPENING class file Test.class [in \u003cdefault\u003e [in\n/usr/local/jdk1.4.2/jre/lib/ext/localedata.jar [in test]]]\n(Thread[Worker-17,5,main]) [JavaModelManager.getZipFile(IPath)] Creating ZipFile\non /usr/local/jdk1.4.2/jre/lib/ext/localedata.jar\n(Thread[Worker-17,5,main]) [JavaModelManager.closeZipFile(ZipFile)] Closing\nZipFile on /usr/local/jdk1.4.2/jre/lib/ext/localedata.jar\n\n\n",
    "Created an attachment (id\u003d23509)\nAn example workspace that causes the error\n",
    "Created an attachment (id\u003d23510)\nAn example workspace that causes the error\n\nI have removed a .index file as that was 6MB.",
    "I tried to debug and found something weird in\norg.eclipse.debug.internal.core.sourcelookup.containers.ContainerSourceContainer.findSourceElements(String)\n\nAt line 121 in ContainerSourceContainer.java\n\nosFile\u003d\"/home/venku/workspace/installations/eclipse/workspace/test/Test.java\"\ncanonicalPath\u003d\"/workspace/installations/eclipse/workspace/test/Test.java\"\ncanonicalSegments\u003d\"[workspace, installations, eclipse, workspace, test, Test.java]\"\nworkspacePath\u003d\"workspace/installations/eclipse/workspace/test/Test.java\"\n\nSubsequent invocation fRoot.findFilesForLocation(workspacePath) at line 121\nreturns an empty array as there is no such location as mentioned by workspacePath.\n\nOn my Linux box I start eclispe with \"eclipse -data\n/home/venku/workspace/eclipse\" where \"/home/venku/workspace\" is a symbolic link\not \"/workspace\".  So, canonicalPath.getDevice() should return the device on\nwhich \"/\" is hosted.  Instead it returns null which I think is incorrect.\n",
    "The new problem is a different bug - a new bug report should be opened for the \nproblem. Marking this bug as fixed.",
    "Verified."
  ],
  "commentCreationDates": [
    "2005-06-12T09:51:31+02:00",
    "2005-06-12T09:55:21+02:00",
    "2005-06-12T10:04:24+02:00",
    "2005-06-14T17:33:56+02:00",
    "2005-06-15T01:47:41+02:00",
    "2005-06-15T22:14:52+02:00",
    "2005-06-15T22:15:54+02:00",
    "2005-06-15T22:44:39+02:00",
    "2005-06-18T23:14:37+02:00",
    "2005-06-18T23:36:47+02:00",
    "2005-06-18T23:37:21+02:00",
    "2005-06-19T01:02:58+02:00",
    "2005-06-20T15:18:30+02:00",
    "2005-06-20T15:18:44+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.zip.ZipException",
      "message": "Is a directory",
      "elements": [
        {
          "method": "java.util.zip.ZipFile.open",
          "source": "Native Method"
        },
        {
          "method": "java.util.zip.ZipFile.\u003cinit\u003e",
          "source": "ZipFile.java:112"
        },
        {
          "method": "java.util.zip.ZipFile.\u003cinit\u003e",
          "source": "ZipFile.java:72"
        },
        {
          "method": "org.eclipse.debug.internal.core.sourcelookup.SourceLookupUtils.getZipFile",
          "source": "SourceLookupUtils.java:67"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.getArchive",
          "source": "ExternalArchiveSourceContainer.java:193"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.findSourceElements",
          "source": "ExternalArchiveSourceContainer.java:79"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "99526",
      "date": "2005-06-12T09:51:31+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "critical"
    },
    {
      "exceptionType": "java.util.zip.ZipException",
      "message": "Is a directory",
      "elements": [
        {
          "method": "java.util.zip.ZipFile.open",
          "source": "Native Method"
        },
        {
          "method": "java.util.zip.ZipFile.\u003cinit\u003e",
          "source": "ZipFile.java:112"
        },
        {
          "method": "java.util.zip.ZipFile.\u003cinit\u003e",
          "source": "ZipFile.java:72"
        },
        {
          "method": "org.eclipse.debug.internal.core.sourcelookup.SourceLookupUtils.getZipFile",
          "source": "SourceLookupUtils.java:67"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.getArchive",
          "source": "ExternalArchiveSourceContainer.java:193"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.containers.ExternalArchiveSourceContainer.findSourceElements",
          "source": "ExternalArchiveSourceContainer.java:79"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.containers.CompositeSourceContainer.findSourceElements",
          "source": "CompositeSourceContainer.java:78"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.containers.CompositeSourceContainer.findSourceElements",
          "source": "CompositeSourceContainer.java:45"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.AbstractSourceLookupParticipant.findSourceElements",
          "source": "AbstractSourceLookupParticipant.java:67"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.AbstractSourceLookupDirector$SourceLookupQuery.run",
          "source": "AbstractSourceLookupDirector.java:126"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1038"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:775"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.AbstractSourceLookupDirector.doSourceLookup",
          "source": "AbstractSourceLookupDirector.java:461"
        },
        {
          "method": "org.eclipse.debug.core.sourcelookup.AbstractSourceLookupDirector.getSourceElement",
          "source": "AbstractSourceLookupDirector.java:711"
        },
        {
          "method": "org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup",
          "source": "SourceLookupFacility.java:138"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.lookupSource",
          "source": "DebugUITools.java:658"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView$SourceLookupJob.run",
          "source": "LaunchView.java:176"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "99526",
      "date": "2005-06-15T01:47:41+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "critical"
    }
  ],
  "groupId": "99526",
  "bugId": "99526",
  "date": "2005-06-12T09:51:31+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "critical"
}