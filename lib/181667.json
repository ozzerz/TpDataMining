{
  "comments": [
    "Problem I. \nCopying a file does not work.\n\nTry copying a file to a new directory in the RSE Tree View..\nA new file is created in the destination, but it is empty.\n\n\nProblem II. \nCopying a file to a directory when a file with same name already exists.\nTo reproduce:\n1. Copy a file from RSE Tree from one directory to another\n2. Copy the same file again, but select rename and give it another name\n3. Click OK\n\nNow the following error message is shown.\n   RSEF1306E\n     1st level - Copy of the file or folder C:\\C\\xyz123.txt failed\n     2nd level - The file system reported the copy operation failed. You may\n                 not have authority to the target folder, or it may be in use\n\nIn the end, the file is created in the new directory with new name.\nHowever, the file is empty. The contents are not copied over - (Problem I).\n\nNote: I tried copying a directory (with text files in it) to a diffent directory. This time, the directory is copied over, and the files inside it are also copied over correctly (with it\u0027s contents)\n\n-----------Enter bugs above this line-----------\nRSE 2.0M4 Testing\ninstallation : eclipse-platform-3.3M6 (I20070323-1616)\nRSE install  : installed from eclipse + rse zipped drivers.\njava.runtime : Sun 1.6.0-b105\nos.name:     : Windows VISTA 6.0\n------------------------------------------------\nsystemtype   : Local connection\ntargetos     : \ntargetuname  : \ntargetvm     : \n------------------------------------------------",
    "Can you be more specific please?\n\n* What RSE version did you try (M6 on Vista / Sun 1.6.0)?\n* What connection type did you use (FTP, SSH, DStore)?\n* What subsystems were used as source and destination? (Dstore -\u003e Local)?\n\nThanks",
    "(In reply to comment #1)\n\u003e Can you be more specific please?\n\u003e \n\u003e * What RSE version did you try (M6 on Vista / Sun 1.6.0)?\n\u003e * What connection type did you use (FTP, SSH, DStore)?\n\u003e * What subsystems were used as source and destination? (Dstore -\u003e Local)?\n\u003e \n\u003e Thanks\n\u003e \n\ninstallation : eclipse-platform-3.3M6 (I20070323-1616)\nRSE install  : RSE-SDK-I20070405-0600.zip TM 2.0M6\njava.runtime : Sun 1.6.0-b105\nos.name:     : Windows VISTA 6.0\n\nConnection type is \"Local\".\n\nSource and destination are also \"Local\".\n\nHope this helps.\n",
    "Has anyone hit this on something other than Vista?  ",
    "The reason copying isn\u0027t working is because of the /O parameter in the xcopy command.  /O is for copying file ownership and ACL information.  I tried it in the command prompt and get the error \"Access is Denied\".  If I remove the /O parameter copying works properly.  \n\nYou have to be an administrator to have /O work.  If you run Eclipse as an administrator then copying of files works correctly with /O.\n\nWith Vista they have depreciated xcopy and say to use robocopy now.   \n\nI tried robocopy in the command line to copy file ownership and it doesn\u0027t copy either when using the parameter /COPY:SO to copy Security(NTFS, ACL) and Ownership information.",
    "There are additional problems with copying when using datastore with a Vista machine. \n\nWhen copying files within the connection, you get the following error:\n\n\"Copy of the file or folder new.txt failed\"\n\"The file system reported the copy operation failed. You may not have authority to the target folder, or it may be in use\"\n\nCopying from Local to the Vista DStore works fine.\n\nCopying from Vista DStore to Local gives the following error:\n\n\"Invalid transfer operation\"\n\"The source C:\\C\\AAA.RPGLE, \n cannot be transferred into the target D:\\kevin\"\n\nNothing is shown in the .log.\n\nCopying from Vista DStore to Local was working on a build from 2 weeks ago though.  ",
    "The copying of files within a Vista dstore connection has errors because in UniversalFileSystemMiner.doCopyCommand() the xcopy command has the /O paramater.",
    "Kevin, thanks for the analysis - I can see why it fails with the /O parameter.\n\nI think that RSE is typically more a tool for users than administrators. We cannot handle all subtleties of ownership, ACLs, access permissions etc anyways - at least not right now. If keeping such subtle properties is required, administrators will need to use the command line instead (at least for now).\n\nOn most modern systems (including particularly NTFS based systems), ownership and ACL are handled by inheriting from parent containers. Therefore, I see no big issue with just removing the /O parameter - new ACLs will be inherited. \n\nWe should remove the /O parameter from the xcopy commands in both dstore server and local client. For UNIX, though, we will retain the -p parameter since it is more tolerant than /O.\n\nSetting P2 since this is a simple fix and should be done for M7.",
    "I\u0027ve removed the /O from the LocalFileService call to xcopy and the UniversalFileSystemMiner calls to xcopy.  For dstore, this will require an server update (or at least an update of the miners).  Is there anything else or can I close this now?",
    "There is still the issue with:\n\nCopying from Vista DStore to Local gives the following error:\n\n\"Invalid transfer operation\"\n\"The source C:\\C\\AAA.RPGLE, \n cannot be transferred into the target D:\\kevin\"\n\nNothing is shown in the .log.  Not sure if this happens on any windows dstore as this was working before.",
    "I had expected that this was also due to /O in the LocalFileService, since transferring remote -\u003e local copies to a tempfile first and then transfers to the final destination ... but I did not test this.\nCould somebody verify?",
    "I\u0027m getting a different error message now when copying from vista dstore to local. \n\n\"An internal error occurred during: \"Transfer Operation\"\".  Details button is disabled.\n\n.log is 100kb large and has this:\n\n!ENTRY org.eclipse.core.jobs 4 2 2007-04-27 09:53:20.160\n!MESSAGE An internal error occurred during: \"Transfer Operation\".\n!STACK 0\njava.lang.StackOverflowError\n\tat java.lang.Character.codePointAt(Unknown Source)\n\tat java.util.regex.Pattern$Single.match(Unknown Source)\n\tat java.util.regex.Pattern$Branch.match(Unknown Source)\n\tat java.util.regex.Pattern$Start.match(Unknown Source)\n\tat java.util.regex.Matcher.search(Unknown Source)\n\tat java.util.regex.Matcher.find(Unknown Source)\n\tat org.eclipse.rse.services.clientserver.PathUtility.normalizeWindows(PathUtility.java:47)\n\tat org.eclipse.rse.services.clientserver.PathUtility.normalizeUnknown(PathUtility.java:154)\n\tat org.eclipse.rse.internal.services.dstore.files.DStoreHostFile.init(DStoreHostFile.java:269)\n\tat org.eclipse.rse.internal.services.dstore.files.DStoreHostFile.\u003cinit\u003e(DStoreHostFile.java:46)\n\tat org.eclipse.rse.internal.subsystems.files.dstore.DStoreFile.getParentRemoteFile(DStoreFile.java:119)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\tat org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding(RemoteFile.java:1132)\n\nLast line is just repeated a ton.  I tried this on a Windows XP server as well and same thing happens.\n\nThe other copying errors have been fixed.",
    "I\u0027ve made a fix to resolve the infinite recursion.  The problem was on windows dstore when getting the parent remote file we were getting c:\\\\ as the parent of c:\\\\.  Kevin, please try with my latest changes in cvs and let me know if that resolves this.",
    "With the latest changes it has been resolved.",
    "Marking this fixed since it\u0027s now resolved."
  ],
  "commentCreationDates": [
    "2007-04-09T23:44:06+02:00",
    "2007-04-10T15:57:59+02:00",
    "2007-04-10T16:18:44+02:00",
    "2007-04-11T21:31:25+02:00",
    "2007-04-26T17:13:58+02:00",
    "2007-04-26T21:30:19+02:00",
    "2007-04-26T23:16:48+02:00",
    "2007-04-27T09:27:07+02:00",
    "2007-04-27T15:04:12+02:00",
    "2007-04-27T15:06:54+02:00",
    "2007-04-27T15:45:48+02:00",
    "2007-04-27T16:46:45+02:00",
    "2007-04-27T18:17:34+02:00",
    "2007-04-27T19:12:32+02:00",
    "2007-04-27T19:35:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StackOverflowError",
      "elements": [
        {
          "method": "java.lang.Character.codePointAt",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.regex.Pattern$Single.match",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.regex.Pattern$Branch.match",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.regex.Pattern$Start.match",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.regex.Matcher.search",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.regex.Matcher.find",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.rse.services.clientserver.PathUtility.normalizeWindows",
          "source": "PathUtility.java:47"
        },
        {
          "method": "org.eclipse.rse.services.clientserver.PathUtility.normalizeUnknown",
          "source": "PathUtility.java:154"
        },
        {
          "method": "org.eclipse.rse.internal.services.dstore.files.DStoreHostFile.init",
          "source": "DStoreHostFile.java:269"
        },
        {
          "method": "org.eclipse.rse.internal.services.dstore.files.DStoreHostFile.\u003cinit\u003e",
          "source": "DStoreHostFile.java:46"
        },
        {
          "method": "org.eclipse.rse.internal.subsystems.files.dstore.DStoreFile.getParentRemoteFile",
          "source": "DStoreFile.java:119"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        },
        {
          "method": "org.eclipse.rse.subsystems.files.core.subsystems.RemoteFile.getEncoding",
          "source": "RemoteFile.java:1132"
        }
      ],
      "number": 0,
      "commentIndex": 11,
      "bugId": "181667",
      "date": "2007-04-27T16:46:45+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "181667",
  "bugId": "181667",
  "date": "2007-04-09T23:44:06+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}