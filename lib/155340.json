{
  "comments": [
    "Publishing of a web project to tomcat (5.5.17) fails with error message \"Could not publish to the server.\". The button \"Details \u003e\u003e\" is disabled. Found the following stack trace in the log:\n\n!ENTRY org.eclipse.wst.server.core 4 0 2006-08-27 21:06:25.328\n!MESSAGE Could not publish to the server.\n!STACK 0\njava.lang.ClassCastException: org.eclipse.wst.common.componentcore.internal.resources.VirtualArchiveComponent\n\tat org.eclipse.wst.common.componentcore.internal.resources.VirtualArchiveComponent.getUnderlyingDiskFile(VirtualArchiveComponent.java:220)\n\tat org.eclipse.wst.common.componentcore.internal.resources.VirtualArchiveComponent.exists(VirtualArchiveComponent.java:164)\n\tat org.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.getReferences(VirtualComponent.java:309)\n\tat org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getReferences(J2EEModuleVirtualComponent.java:51)\n\tat org.eclipse.wst.web.internal.deployables.ComponentDeployable.getUtilMembers(ComponentDeployable.java:299)\n\tat org.eclipse.jst.j2ee.internal.deployables.J2EEFlexProjDeployable.members(J2EEFlexProjDeployable.java:142)\n\tat org.eclipse.wst.server.core.internal.ModulePublishInfo.fillCache(ModulePublishInfo.java:212)\n\tat org.eclipse.wst.server.core.internal.ModulePublishInfo.getDelta(ModulePublishInfo.java:261)\n\tat org.eclipse.wst.server.core.internal.ServerPublishInfo.getDelta(ServerPublishInfo.java:250)\n\tat org.eclipse.wst.server.core.internal.Server.getPublishedResourceDelta(Server.java:967)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.getPublishedResourceDelta(ServerBehaviourDelegate.java:491)\n\tat org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.getPublishedResourceDelta(TomcatServerBehaviour.java:742)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:555)\n\tat org.eclipse.wst.server.core.internal.Server.doPublish(Server.java:803)\n\tat org.eclipse.wst.server.core.internal.Server.publish(Server.java:791)\n\tat org.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:145)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Moving to correct component.",
    "I\u0027m not able to reproduce this on windows for 083006 WTP 1.5.1 build.  Does this only happen on linux and can you retry on the latest driver?  If it is still reproducible, can you attach a simple web project which we can use to replicate the problem?\n\nThanks!",
    "Created an attachment (id\u003d49084)\nProposed patch\n\n",
    "This case should not happen in WTP standalone, however adopters may be adding their own adapters to override the default behaviour and return the wrong value, so I added the instance check to male this path safe.\n\nThis patch is ready for review.",
    "approve",
    "Conditional approval\n\nSet the initial value of the \"osPath\" variable to null and not an empty String (no need to create the extra object).  If the osPath is still null at the end of the method (just before creating the File) then return null.",
    "Created an attachment (id\u003d49091)\nProposed patch 2\n\nUpdated patch with Dan\u0027s suggestions.",
    "This is released for the 083106 WTP 1.5.1 build.",
    "Verified."
  ],
  "commentCreationDates": [
    "2006-08-27T21:36:38+02:00",
    "2006-08-29T20:18:36+02:00",
    "2006-08-30T16:27:32+02:00",
    "2006-08-30T20:30:12+02:00",
    "2006-08-30T20:31:42+02:00",
    "2006-08-30T21:02:41+02:00",
    "2006-08-30T21:29:16+02:00",
    "2006-08-30T21:40:03+02:00",
    "2006-08-30T21:41:25+02:00",
    "2006-09-26T19:12:00+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.wst.common.componentcore.internal.resources.VirtualArchiveComponent",
      "elements": [
        {
          "method": "org.eclipse.wst.common.componentcore.internal.resources.VirtualArchiveComponent.getUnderlyingDiskFile",
          "source": "VirtualArchiveComponent.java:220"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.resources.VirtualArchiveComponent.exists",
          "source": "VirtualArchiveComponent.java:164"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.getReferences",
          "source": "VirtualComponent.java:309"
        },
        {
          "method": "org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getReferences",
          "source": "J2EEModuleVirtualComponent.java:51"
        },
        {
          "method": "org.eclipse.wst.web.internal.deployables.ComponentDeployable.getUtilMembers",
          "source": "ComponentDeployable.java:299"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.deployables.J2EEFlexProjDeployable.members",
          "source": "J2EEFlexProjDeployable.java:142"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ModulePublishInfo.fillCache",
          "source": "ModulePublishInfo.java:212"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ModulePublishInfo.getDelta",
          "source": "ModulePublishInfo.java:261"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ServerPublishInfo.getDelta",
          "source": "ServerPublishInfo.java:250"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.getPublishedResourceDelta",
          "source": "Server.java:967"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.getPublishedResourceDelta",
          "source": "ServerBehaviourDelegate.java:491"
        },
        {
          "method": "org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.getPublishedResourceDelta",
          "source": "TomcatServerBehaviour.java:742"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish",
          "source": "ServerBehaviourDelegate.java:555"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:803"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:791"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "155340",
      "date": "2006-08-27T21:36:38+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "major"
    }
  ],
  "groupId": "155340",
  "bugId": "155340",
  "date": "2006-08-27T21:36:38+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "major"
}