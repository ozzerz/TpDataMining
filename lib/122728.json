{
  "comments": [
    "When trying to run ajdoc on a moderate size code base (266 classes / interfaces / aspects), ajdoc crashes. Here\u0027s what happens:\n\nD:\\work\\napa\\jnapa\\core\u003eajdoc -source 1.5 -classpath D:\\work\\napa\\jnapa\\core\\lib\\aspectjrt.jar;D:\\work\\napa\\jnapa\\core\\l\nib\\dom4j-1.5.2.jar;D:\\work\\napa\\jnapa\\core\\lib\\groovy-all-1.0-jsr-03.jar -d D:\\work\\napa\\jnapa\\core\\build\\doc\\internal -\nauthor -package -argfile D:\\work\\napa\\jnapa\\core\\jnapafilelist34352.lst\n\u003e Calling ajc...\nD:\\work\\napa\\jnapa\\commons\\utils\\src\\fi\\napa\\util\\aspects\\CachingAspect.aj:72 [warning] advice defined in fi.napa.util.a\nspects.CachingAspect has not been applied [Xlint:adviceDidNotMatch]\n\n\n1 warning\n\u003e Building signature files...\nAn internal error occured in ajdoc\nPlease copy the following text into an email message and send it,\nalong with any additional information you can add to:\n\n       aspectj-dev@eclipse.org\n\n\njava.lang.IndexOutOfBoundsException: Index: 3, Size: 3\njava.lang.IndexOutOfBoundsException: Index: 3, Size: 3\n        at java.util.ArrayList.RangeCheck(ArrayList.java:546)\n        at java.util.ArrayList.get(ArrayList.java:321)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processMembers(StubFileGenerator.java:124)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration(StubFileGenerator.java:99)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processMembers(StubFileGenerator.java:113)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration(StubFileGenerator.java:99)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processFile(StubFileGenerator.java:61)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.doFiles(StubFileGenerator.java:38)\n        at org.aspectj.tools.ajdoc.Main.main(Main.java:157)\n\n  The file jnapafilelist34352.lst contains only file entries w/ absolute paths, e.g. \nD:\\work\\napa\\jnapa\\core\\src\\fi\\napa\\core\\tableprocessing\\transfer\\mapping\\Transformation.java\n\nI am using ajc and ajdoc 1.5.0 release version. I\u0027ll be happy to provide any other information that may help in solving this issue.\n\nD:\\work\\napa\\jnapa\\core\u003eajdoc -v\najdoc version 1.5.0\n\nD:\\work\\napa\\jnapa\\core\u003eajc -v\nAspectJ Compiler 1.5.0 built on Tuesday Dec 20, 2005 at 12:05:54 GMT",
    "I suppose this is the same bug, so I\u0027ll add this as a comment. I tried to run ajdoc on the same source files w/ a little different settings. It still crashes:\n\nD:\\work\\napa\\jnapa\\core\u003eajdoc -source 1.5 -classpath D:\\work\\napa\\jnapa\\core\\lib\\aspectjrt.jar;D:\\work\\napa\\jnapa\\core\\l\nib\\dom4j-1.5.2.jar;D:\\work\\napa\\jnapa\\core\\lib\\groovy-all-1.0-jsr-03.jar -d D:\\work\\napa\\jnapa\\core\\build\\doc\\internal -\nauthor -package -sourcepath D:\\work\\napa\\jnapa\\core\\gen_src;D:\\work\\napa\\jnapa\\core\\src;D:\\work\\napa\\jnapa\\commons\\utils\n\\src fi.napa.legacy.nativeaccess fi.napa fi.napa.core fi.napa.core.geometry fi.napa.core.geometry.basic fi.napa.core.geo\nmetry.legacy fi.napa.core.loadingconditions fi.napa.core.loadingconditions.lightweight fi.napa.core.loadingconditions.li\nghtweight.legacy fi.napa.core.project fi.napa.core.project.legacy fi.napa.core.referencesystem fi.napa.core.referencesys\ntem.legacy fi.napa.core.shipmodel fi.napa.core.shipmodel.legacy fi.napa.core.steel fi.napa.core.steel.legacy fi.napa.cor\ne.steel.opt fi.napa.core.tableprocessing fi.napa.core.tableprocessing.legacy fi.napa.core.tableprocessing.transfer fi.na\npa.core.tableprocessing.transfer.bootstrap fi.napa.core.tableprocessing.transfer.link fi.napa.core.tableprocessing.trans\nfer.link.napa fi.napa.core.tableprocessing.transfer.link.rdbms fi.napa.core.tableprocessing.transfer.mapping fi.napa.cor\ne.topology fi.napa.core.topology.legacy fi.napa.legacy fi.napa.legacy.jservicefunctions fi.napa.legacy.jservicefunctions\n.invoker fi.napa.util fi.napa.util.aspects\n\u003e Calling ajc...\nD:\\work\\napa\\jnapa\\commons\\utils\\src\\fi\\napa\\util\\aspects\\CachingAspect.aj:72 [warning] advice defined in fi.napa.util.a\nspects.CachingAspect has not been applied [Xlint:adviceDidNotMatch]\n\n\n1 warning\n\u003e Building signature files...\nAn internal error occured in ajdoc\nPlease copy the following text into an email message and send it,\nalong with any additional information you can add to:\n\n       aspectj-dev@eclipse.org\n\n\njava.lang.IndexOutOfBoundsException: Index: 4, Size: 4\njava.lang.IndexOutOfBoundsException: Index: 4, Size: 4\n        at java.util.ArrayList.RangeCheck(ArrayList.java:546)\n        at java.util.ArrayList.get(ArrayList.java:321)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processMembers(StubFileGenerator.java:124)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration(StubFileGenerator.java:99)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processMembers(StubFileGenerator.java:113)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration(StubFileGenerator.java:99)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.processFile(StubFileGenerator.java:61)\n        at org.aspectj.tools.ajdoc.StubFileGenerator.doFiles(StubFileGenerator.java:38)\n        at org.aspectj.tools.ajdoc.Main.main(Main.java:157)\n\n",
    "Yes, this is the same bug. \n\nThe problem is that we\u0027re blowing up in the following loop during the processing of enums:\n\t\t\t\t\t\n\t\t\t\t\t\nif (member.getKind().equals(IProgramElement.Kind.ENUM_VALUE)){\n  if (((IProgramElement)members.get(members.indexOf(member)+1)). \u003c--- PROBLEM\n           getKind().equals(IProgramElement.Kind.ENUM_VALUE)){\n     .....\n  }\n}\n\n\nI\u0027ve therefore been able to recreate this bug with just the following enum:\n\n--------------------------------\npackage pack;\n\npublic enum MyEnum {\n\t\n\tA;\n\t\n}\n--------------------------------\n\nand running ajdoc against this.",
    "Created an attachment (id\u003d32513)\npatch containing fix and test\n\nApply this patch to the ajdoc project.\n\nThe fix involves adding an extra check to see if there are any more members before checking whether the next member is also an enum.",
    "Created an attachment (id\u003d32518)\npatch containing fix and test\n\nooops - forgot to add the new testcase EnumTest to the ajdoc test suite. This patch does that and this is the only difference between the two.\n\nApply to the ajdoc project.",
    "fix checked in.",
    "fixes available."
  ],
  "commentCreationDates": [
    "2006-01-05T08:21:00+01:00",
    "2006-01-05T09:00:50+01:00",
    "2006-01-05T09:17:37+01:00",
    "2006-01-05T10:56:46+01:00",
    "2006-01-05T13:23:19+01:00",
    "2006-01-09T13:32:53+01:00",
    "2006-01-18T07:46:48+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IndexOutOfBoundsException",
      "message": "Index: 3, Size: 3",
      "elements": [
        {
          "method": "java.util.ArrayList.RangeCheck",
          "source": "ArrayList.java:546"
        },
        {
          "method": "java.util.ArrayList.get",
          "source": "ArrayList.java:321"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processMembers",
          "source": "StubFileGenerator.java:124"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration",
          "source": "StubFileGenerator.java:99"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processMembers",
          "source": "StubFileGenerator.java:113"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration",
          "source": "StubFileGenerator.java:99"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processFile",
          "source": "StubFileGenerator.java:61"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.doFiles",
          "source": "StubFileGenerator.java:38"
        },
        {
          "method": "org.aspectj.tools.ajdoc.Main.main",
          "source": "Main.java:157"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "122728",
      "date": "2006-01-05T08:21:00+01:00",
      "product": "AspectJ",
      "component": "AJDoc",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.IndexOutOfBoundsException",
      "message": "Index: 4, Size: 4",
      "elements": [
        {
          "method": "java.util.ArrayList.RangeCheck",
          "source": "ArrayList.java:546"
        },
        {
          "method": "java.util.ArrayList.get",
          "source": "ArrayList.java:321"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processMembers",
          "source": "StubFileGenerator.java:124"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration",
          "source": "StubFileGenerator.java:99"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processMembers",
          "source": "StubFileGenerator.java:113"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processTypeDeclaration",
          "source": "StubFileGenerator.java:99"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.processFile",
          "source": "StubFileGenerator.java:61"
        },
        {
          "method": "org.aspectj.tools.ajdoc.StubFileGenerator.doFiles",
          "source": "StubFileGenerator.java:38"
        },
        {
          "method": "org.aspectj.tools.ajdoc.Main.main",
          "source": "Main.java:157"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "122728",
      "date": "2006-01-05T09:00:50+01:00",
      "product": "AspectJ",
      "component": "AJDoc",
      "severity": "blocker"
    }
  ],
  "groupId": "122728",
  "bugId": "122728",
  "date": "2006-01-05T08:21:00+01:00",
  "product": "AspectJ",
  "component": "AJDoc",
  "severity": "blocker"
}