{
  "comments": [
    "The Ant Editor tests should be converted over to running as PDE JUnit tests to \nfully and correctly test the editor.",
    "I added the requires org.eclipse.ui.externaltools to the plugin.xml of the \nplugin and the tests now run. But there are two failures that do not occur \nwhen the tests are run without the workspace.\n\nPlantyContentOutlineTest.testCreationOfOutlineTree\t\nPlantyContentOutlineTest.testOutlinePreparingHandler",
    "The Ant editor tests pass. They need to be run as a PDE JUnit test suite.\nNow we just need a whole bunch more of them...",
    "I got three failures when I ran AntEditorTests on IBM1.3.1 (did not try other \nVMs).\n\njunit.framework.AssertionFailedError\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat junit.framework.Assert.assertTrue(Assert.java:20)\n\tat junit.framework.Assert.assertTrue(Assert.java:27)\n\tat \norg.eclipse.ui.externaltools.internal.ant.editor.test.AntEditorContentOutlineTes\nts.testWithEmptyBuildFile(AntEditorContentOutlineTests.java:243)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests\n(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run\n(RemoteTestRunner.java:270)\n\tat org.eclipse.pde.internal.junit.ui.RemotePluginTestRunner.main\n(RemotePluginTestRunner.java:30)\n\tat org.eclipse.pde.internal.junit.ui.UITestApplication.runEventLoop\n(UITestApplication.java:35)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1254)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:431)\n\tat EclipseRuntimeLauncher.main(EclipseRuntimeLauncher.java:24)\n\n\n\njunit.framework.AssertionFailedError: expected:\u003c1\u003e but was:\u003c43\u003e\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat junit.framework.Assert.failNotEquals(Assert.java:282)\n\tat junit.framework.Assert.assertEquals(Assert.java:64)\n\tat junit.framework.Assert.assertEquals(Assert.java:201)\n\tat junit.framework.Assert.assertEquals(Assert.java:207)\n\tat \norg.eclipse.ui.externaltools.internal.ant.editor.test.AntEditorContentOutlineTes\nts.testParsingOfNonValidFile(AntEditorContentOutlineTests.java:213)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests\n(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run\n(RemoteTestRunner.java:270)\n\tat org.eclipse.pde.internal.junit.ui.RemotePluginTestRunner.main\n(RemotePluginTestRunner.java:30)\n\tat org.eclipse.pde.internal.junit.ui.UITestApplication.runEventLoop\n(UITestApplication.java:35)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1254)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:431)\n\tat EclipseRuntimeLauncher.main(EclipseRuntimeLauncher.java:24)\n\n\n\njunit.framework.AssertionFailedError: expected:\u003c3\u003e but was:\u003c9\u003e\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat junit.framework.Assert.failNotEquals(Assert.java:282)\n\tat junit.framework.Assert.assertEquals(Assert.java:64)\n\tat junit.framework.Assert.assertEquals(Assert.java:201)\n\tat junit.framework.Assert.assertEquals(Assert.java:207)\n\tat \norg.eclipse.ui.externaltools.internal.ant.editor.test.AntEditorContentOutlineTes\nts.testOutlinePreparingHandler(AntEditorContentOutlineTests.java:72)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests\n(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run\n(RemoteTestRunner.java:270)\n\tat org.eclipse.pde.internal.junit.ui.RemotePluginTestRunner.main\n(RemotePluginTestRunner.java:30)\n\tat org.eclipse.pde.internal.junit.ui.UITestApplication.runEventLoop\n(UITestApplication.java:35)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1254)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:431)\n\tat EclipseRuntimeLauncher.main(EclipseRuntimeLauncher.java:24)\n\n",
    "They work on JDK1.4.1, but they should also work on 1.3.1.",
    "Likely because of bug 33069.",
    "Christof even when switching to the experimental SAXParser usage of bug 33069, \nwe appear to be getting incorrect positions for tags that begin and end on the \nsame line.\nThe Ant editor tests are in project org.eclipse.ant.test.ui. They must be run \nas a PDE JUnit test suite (main suite is AntEditorTests).\nAny help is appreciated as always.",
    "Created an attachment (id\u003d3805)\nFixes a few problems in OutlinePrepatingHandler\n\n- adds missing part of startEntity(..) from earlier patch (bug 33069,\nattachment 3774)\n- fixes \"search for \u0027\u003c\u0027\" start position in computeStartLocation(..)\n  (the Xerces Locator is better w.r.t. providing column numbers, this triggered\nthe bug in the \u0027column \u003e 0\u0027 else-branch)\n- adds two checks for the line numbers which can be -1 in case of an empty file\n\n\n(patch is against current HEAD, i.e. without the patches from bug 33069)\n",
    "With the two patches of attachment 3774 and attachment 3805 the tests show the\nfollowing failures in AntEditorContentOutlineTests:\n\n1) testOutlinePreparingHandler: the test expects endingColumn to point to the\nend of the start tag, but endingColumn points to the end of the end tag. The\ntest is wrong w.r.t. range indication, where we want the range indicator to go\nfrom startingLine to endingLine of the corresponding XmlElement.\n\n2) testParsingOfNonValidFile: endingColumn points to the end of line, the test\nexpects it to point to the start of it (which makes end \u003c start in this case) -\nnot sure what the Right Thing is here (endingColumn was set by\nfixEndLocations(..) in OutlinePreparingHandler).\n\n3) testWithEmptyBuildFile: looks like Xerces uses different error messages...\n\nAnother problem with an empty build file is that the exception passed to\ngenerateErrorElementHierarchy(..) in OutlinPreparingHandler lacks a systemId,\nwhich is used as the name for the root node in this case (and as the filePath of\nthe error nodes -\u003e NPE on left-click in the outline).\n",
    "Created an attachment (id\u003d3807)\nFixes 1) and 2) of previous comment.\n",
    "Thanks for the help again.\nSo it would seem that we either pass on 1.3.1 or on 1.4.1?\nSome of the fixes from comment #9 cause failures on 1.4.1.",
    "As well if I apply the patch for the external entities fix of bug 33069, the \ntests fail as well on 1.3.1. I am going to release with attachment 3774 and \nattachment 3805. And we can go from there...",
    "You\u0027re welcome.\n\nFrom my current experience I would acctually suggest to migrate to the Xerces\nparser, as this gives the same behaviour with different VMs (I assume you didn\u0027t\napply the patch for using Xerces when getting different results with 1.4.1).\nXerces also does a better job w.r.t. supplying column numbers via the Locator,\nthis would make the computeStart/End/ErrorLocation(..) methods in\nOutlinePreparingHandler more reliable. E.g., using the following build file\n\n\u003cproject\u003e\n\t\u003cproperty name\u003d\"test1\"/\u003e\u003cproperty name\u003d\"test2\"/\u003e\n\u003c/project\u003e\n\nand selecting \u0027test1\u0027 in the outline will select \u0027test2\u0027 in the source with JAXP\n (using 1.4.1) - this would be fixed by using Xerces (together with the fix to\ncomputeStartLocation(..) from attachment 3805).\n\nIs migration to Xerces an option?",
    "I am all for removing differences...is it as simple as applying the patch from \nbug 33069 that you flagged as experimental?",
    "It is. (Please note the problem 3) and the paragraph after that in comment #8.)\n\n(As a side note regarding error nodes: I\u0027m currently working on a patch for\nsupporting hovers for annotations in the ant editor, basically porting them over\nfrom jdt.ui - this might obsolete the current error nodes as the information\nfrom the error nodes would then be available from the hovers.)\n",
    "Tests are all green on 1.3.1 and 1.4.*\n",
    "Please verify DarinW.",
    "Verified."
  ],
  "commentCreationDates": [
    "2003-02-13T01:19:09+01:00",
    "2003-02-15T02:38:08+01:00",
    "2003-02-22T03:59:50+01:00",
    "2003-02-28T21:47:39+01:00",
    "2003-02-28T21:56:46+01:00",
    "2003-02-28T22:35:40+01:00",
    "2003-03-02T20:19:31+01:00",
    "2003-03-03T11:28:43+01:00",
    "2003-03-03T14:23:17+01:00",
    "2003-03-03T14:24:20+01:00",
    "2003-03-03T15:11:23+01:00",
    "2003-03-03T15:42:02+01:00",
    "2003-03-03T15:51:49+01:00",
    "2003-03-03T15:56:44+01:00",
    "2003-03-03T16:13:45+01:00",
    "2003-03-04T19:07:47+01:00",
    "2003-03-04T19:08:03+01:00",
    "2003-03-05T19:43:55+01:00"
  ],
  "traces": [
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:20"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:27"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ant.editor.test.AntEditorContentOutlineTests.testWithEmptyBuildFile",
          "source": "AntEditorContentOutlineTests.java:243"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:270"
        },
        {
          "method": "org.eclipse.pde.internal.junit.ui.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:30"
        },
        {
          "method": "org.eclipse.pde.internal.junit.ui.UITestApplication.runEventLoop",
          "source": "UITestApplication.java:35"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1254"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:431"
        },
        {
          "method": "EclipseRuntimeLauncher.main",
          "source": "EclipseRuntimeLauncher.java:24"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "31727",
      "date": "2003-02-28T21:47:39+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    },
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "message": "expected:\u003c1\u003e but was:\u003c43\u003e",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "junit.framework.Assert.failNotEquals",
          "source": "Assert.java:282"
        },
        {
          "method": "junit.framework.Assert.assertEquals",
          "source": "Assert.java:64"
        },
        {
          "method": "junit.framework.Assert.assertEquals",
          "source": "Assert.java:201"
        },
        {
          "method": "junit.framework.Assert.assertEquals",
          "source": "Assert.java:207"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ant.editor.test.AntEditorContentOutlineTests.testParsingOfNonValidFile",
          "source": "AntEditorContentOutlineTests.java:213"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:270"
        },
        {
          "method": "org.eclipse.pde.internal.junit.ui.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:30"
        },
        {
          "method": "org.eclipse.pde.internal.junit.ui.UITestApplication.runEventLoop",
          "source": "UITestApplication.java:35"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1254"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:431"
        },
        {
          "method": "EclipseRuntimeLauncher.main",
          "source": "EclipseRuntimeLauncher.java:24"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "31727",
      "date": "2003-02-28T21:47:39+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    },
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "message": "expected:\u003c3\u003e but was:\u003c9\u003e",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "junit.framework.Assert.failNotEquals",
          "source": "Assert.java:282"
        },
        {
          "method": "junit.framework.Assert.assertEquals",
          "source": "Assert.java:64"
        },
        {
          "method": "junit.framework.Assert.assertEquals",
          "source": "Assert.java:201"
        },
        {
          "method": "junit.framework.Assert.assertEquals",
          "source": "Assert.java:207"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ant.editor.test.AntEditorContentOutlineTests.testOutlinePreparingHandler",
          "source": "AntEditorContentOutlineTests.java:72"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:270"
        },
        {
          "method": "org.eclipse.pde.internal.junit.ui.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:30"
        },
        {
          "method": "org.eclipse.pde.internal.junit.ui.UITestApplication.runEventLoop",
          "source": "UITestApplication.java:35"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1254"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:431"
        },
        {
          "method": "EclipseRuntimeLauncher.main",
          "source": "EclipseRuntimeLauncher.java:24"
        }
      ],
      "number": 2,
      "commentIndex": 3,
      "bugId": "31727",
      "date": "2003-02-28T21:47:39+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "31727",
  "bugId": "31727",
  "date": "2003-02-13T01:19:09+01:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}