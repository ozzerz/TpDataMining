{
  "comments": [
    "3.1M6\n\n- run the snippet below and just close the window\n- this throws a widget is disposed error because although the Tree is not\nofficially disposed yet, its internal header control is (it is disposed before\nTree\u0027s onDispose() callback gets invoked)\n  -\u003e so if a client listens for TreeItem.dispose(), and receives this callback\nas a result of the parent Tree being disposed, then they can cause a Tree error\nto occur if they invoke any Tree api that references the header (this is a\ncommon reference to make)\n\n- unless the Tree\u0027s onDispose() code can be invoked before the header control\nhas been disposed, the only fix I can see for this is for every header reference\nto do an isDisposed() check (ugly)\n- Table should have a similar problem\n\nsnippet:\n\npublic static void main(String[] args) {\n\tDisplay display \u003d new Display();\n\tShell shell \u003d new Shell(display);\n\tshell.setBounds(10,10,200,200);\n\tfinal Tree tree \u003d new Tree(shell, SWT.NONE);\n\ttree.setBounds(10,10,100,100);\n\tfinal TreeItem root \u003d new TreeItem(tree, SWT.NONE);\n\troot.setText(\"root\");\n\tfor (int i \u003d 0; i \u003c 9; i++) {\n\t\tTreeItem item \u003d new TreeItem(tree, SWT.NONE);\n\t\titem.setText(\"item \" + i);\n\t\tSystem.out.println(\"created item \" + i);\n\t\titem.addDisposeListener(new DisposeListener() {\n\t\t\tpublic void widgetDisposed(DisposeEvent e) {\n\t\t\t\tSystem.out.println(\"disposing: \" + ((TreeItem)e.widget).getText());\n\t\t\t\tTreeItem item2 \u003d new TreeItem(tree, SWT.NONE);\n\t\t\t}\n\t\t});\n\t}\n\troot.setExpanded(true);\n\tshell.open();\n\twhile (!shell.isDisposed()) {\n\t\tif (!display.readAndDispatch()) display.sleep();\n\t}\n\tdisplay.dispose();\n}\n\nexception:\n\nException in thread \"main\" org.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2896)\n\tat org.eclipse.swt.SWT.error(SWT.java:2819)\n\tat org.eclipse.swt.SWT.error(SWT.java:2790)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:340)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:277)\n\tat org.eclipse.swt.widgets.Control.getVisible(Control.java:1033)\n\tat org.eclipse.swt.widgets.Tree.getHeaderHeight(Tree.java:615)\n\tat org.eclipse.swt.widgets.Tree.updateVerticalBar(Tree.java:3087)\n\tat org.eclipse.swt.widgets.Tree.createItem(Tree.java:308)\n\tat org.eclipse.swt.widgets.TreeItem.\u003cinit\u003e(TreeItem.java:97)\n\tat\ntreetable.TreeItemCreateInItemDisposeCallback$1.widgetDisposed(TreeItemCreateInItemDisposeCallback.java:31)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:100)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:740)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:761)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:744)\n\tat org.eclipse.swt.widgets.Widget.releaseWidget(Widget.java:616)\n\tat org.eclipse.swt.widgets.Item.releaseWidget(Item.java:139)\n\tat org.eclipse.swt.widgets.Widget.dispose(Widget.java:332)\n\tat org.eclipse.swt.widgets.TreeItem.dispose(TreeItem.java:565)\n\tat org.eclipse.swt.widgets.Tree.onDispose(Tree.java:1578)\n\tat org.eclipse.swt.widgets.Tree.handleEvents(Tree.java:894)\n\tat org.eclipse.swt.widgets.Tree$1.handleEvent(Tree.java:122)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\t\u003csnip\u003e",
    "Grant, try this in the latest. It might be fixed.",
    "Yes, this is now fixed in the latest.  Marking as FIXED.\n"
  ],
  "commentCreationDates": [
    "2005-04-06T18:16:58+02:00",
    "2005-08-12T01:23:21+02:00",
    "2005-08-12T15:23:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2896"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2819"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2790"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:340"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:277"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.getVisible",
          "source": "Control.java:1033"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.getHeaderHeight",
          "source": "Tree.java:615"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.updateVerticalBar",
          "source": "Tree.java:3087"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.createItem",
          "source": "Tree.java:308"
        },
        {
          "method": "org.eclipse.swt.widgets.TreeItem.\u003cinit\u003e",
          "source": "TreeItem.java:97"
        },
        {
          "method": "treetable.TreeItemCreateInItemDisposeCallback$1.widgetDisposed",
          "source": "TreeItemCreateInItemDisposeCallback.java:31"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:100"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:740"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:761"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:744"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.releaseWidget",
          "source": "Widget.java:616"
        },
        {
          "method": "org.eclipse.swt.widgets.Item.releaseWidget",
          "source": "Item.java:139"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.dispose",
          "source": "Widget.java:332"
        },
        {
          "method": "org.eclipse.swt.widgets.TreeItem.dispose",
          "source": "TreeItem.java:565"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.onDispose",
          "source": "Tree.java:1578"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.handleEvents",
          "source": "Tree.java:894"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree$1.handleEvent",
          "source": "Tree.java:122"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "90478",
      "date": "2005-04-06T18:16:58+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "90478",
  "bugId": "90478",
  "date": "2005-04-06T18:16:58+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}