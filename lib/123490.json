{
  "comments": [
    "I see this exception being thrown mutiple times in my JUnit tests when the tests delete the projects after each run as I cleanup the workspace after each test is run. Happens in both 1.0.1 and 1.5 code streams.\n\n*** ERROR ***: Wed Jan 11 14:31:53 EST 2006    Error updating dependencies for deleted J2EE project TargetProjectClient\n\n*** ERROR ***: Wed Jan 11 14:31:53 EST 2006    java.lang.NullPointerException\n    \tat org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorMetadata$RefCachingVirtualComponent.getReference(ProjectRefactorMetadata.java:312)\n    \tat org.eclipse.wst.common.componentcore.internal.operation.RemoveReferenceComponentOperation.removeReferencedComponents(RemoveReferenceComponentOperation.java:58)\n    \tat org.eclipse.wst.common.componentcore.internal.operation.RemoveReferenceComponentOperation.execute(RemoveReferenceComponentOperation.java:43)\n    \tat org.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation.execute(RemoveComponentFromEnterpriseApplicationOperation.java:37)\n    \tat org.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonDeleteOp.removeEARDependency(UpdateDependentEARonDeleteOp.java:71)\n    \tat org.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonDeleteOp.execute(UpdateDependentEARonDeleteOp.java:48)\n    \tat org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute(ExtendableOperationImpl.java:163)\n    \tat org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run(ExtendableOperationImpl.java:131)\n    \tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1714)\n    \tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1734)\n    \tat org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute(ExtendableOperationImpl.java:137)\n    \tat org.eclipse.jst.j2ee.refactor.operations.ProjectDeleteOperation.updateDependentEARProject(ProjectDeleteOperation.java:56)\n    \tat org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorOperation.updateDependentProjects(ProjectRefactorOperation.java:93)\n    \tat org.eclipse.jst.j2ee.refactor.operations.ProjectDeleteOperation.updateDependentProjects(ProjectDeleteOperation.java:44)\n    \tat org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorOperation.execute(ProjectRefactorOperation.java:58)\n    \tat org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute(ExtendableOperationImpl.java:163)\n    \tat org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run(ExtendableOperationImpl.java:131)\n    \tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1714)\n    \tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1734)\n    \tat org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute(ExtendableOperationImpl.java:137)\n    \tat org.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener$2.runInWorkspace(ProjectRefactoringListener.java:238)\n    \tat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\n    \tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Created an attachment (id\u003d33232)\nPatch for org.eclipse.jst.j2ee refactoring logic\n\nPatch for this NPE; includes a couple of other NPE checks as well as the fix for 124383.",
    "hey Chuck: the attached patch is for refactoring NPE checks (this bug) and 124383 (web library dependency handling)",
    "Patch sanity checked and committed for Robert.  Will tag tonight for the 1/19/06 WTP 1.0.1 committer build.  Should be in 1.5 after the 1.5 I for this week is declared.",
    "The current fix introduces a new NPE.  The hasWebLibDependency() method added to the UpdateDependentProjectOp class doesn\u0027t perform a null check on the \"ref\" argument.  Null is an expected return value for hadReference(), which is the source for this argument.  Adding a \"variable\" Web Library dependency is one way to cause this argument to be null.  Adding the null check to hasWebLibDependency() allows the delete and rename operations to succeed with on a project with this \"special\" dependency.\n\nI don\u0027t have the karma to reopen this bug.  I would appreciate it if someone with karma would do so.  I think this would be simpler than adding a new bug to be targeted to 1.0.1 and possibly added to the 1.0.1 Hot List.  Thanks.",
    "My apologies for the lapse; thanks for catching that Larry - patch coming soon...",
    "Created an attachment (id\u003d33647)\nPatch for UpdateDependentProjectOp\n\nAdds null check",
    "I\u0027ve added a patch for the null check, however, the NPE is unexpected in this case (the check is there so that the refactoring logic could handle project dependencies that only included .project refs and not .component refs); \n\nFor the NPE case (a web project with a virtual web library reference), a call to DependencyGraphManager.getInstance().getDependencyGraph().getReferencingComponents(project), it returning the input web IProject as one of the referencing components (i.e. the project has a reference to itself); Chuck, sending this one your way both because I\u0027ll need you to apply the patch and because I don\u0027t believe this is the intended behavior of DependencyGraphManager in this case.\n ",
    "Changes dropped.  pick up next M build",
    "Closing as verified"
  ],
  "commentCreationDates": [
    "2006-01-11T19:36:13+01:00",
    "2006-01-18T21:06:02+01:00",
    "2006-01-18T21:07:50+01:00",
    "2006-01-19T15:09:40+01:00",
    "2006-01-26T14:30:40+01:00",
    "2006-01-26T14:40:49+01:00",
    "2006-01-26T15:01:50+01:00",
    "2006-01-26T15:30:11+01:00",
    "2006-01-26T18:18:27+01:00",
    "2006-06-15T18:54:12+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorMetadata$RefCachingVirtualComponent.getReference",
          "source": "ProjectRefactorMetadata.java:312"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.operation.RemoveReferenceComponentOperation.removeReferencedComponents",
          "source": "RemoveReferenceComponentOperation.java:58"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.operation.RemoveReferenceComponentOperation.execute",
          "source": "RemoveReferenceComponentOperation.java:43"
        },
        {
          "method": "org.eclipse.jst.j2ee.application.internal.operations.RemoveComponentFromEnterpriseApplicationOperation.execute",
          "source": "RemoveComponentFromEnterpriseApplicationOperation.java:37"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonDeleteOp.removeEARDependency",
          "source": "UpdateDependentEARonDeleteOp.java:71"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.UpdateDependentEARonDeleteOp.execute",
          "source": "UpdateDependentEARonDeleteOp.java:48"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute",
          "source": "ExtendableOperationImpl.java:163"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run",
          "source": "ExtendableOperationImpl.java:131"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1714"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1734"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute",
          "source": "ExtendableOperationImpl.java:137"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectDeleteOperation.updateDependentEARProject",
          "source": "ProjectDeleteOperation.java:56"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorOperation.updateDependentProjects",
          "source": "ProjectRefactorOperation.java:93"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectDeleteOperation.updateDependentProjects",
          "source": "ProjectDeleteOperation.java:44"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.operations.ProjectRefactorOperation.execute",
          "source": "ProjectRefactorOperation.java:58"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.doExecute",
          "source": "ExtendableOperationImpl.java:163"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl$1.run",
          "source": "ExtendableOperationImpl.java:131"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1714"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1734"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ExtendableOperationImpl.execute",
          "source": "ExtendableOperationImpl.java:137"
        },
        {
          "method": "org.eclipse.jst.j2ee.refactor.listeners.ProjectRefactoringListener$2.runInWorkspace",
          "source": "ProjectRefactoringListener.java:238"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "123490",
      "date": "2006-01-11T19:36:13+01:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    }
  ],
  "groupId": "123490",
  "bugId": "123490",
  "date": "2006-01-11T19:36:13+01:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "major"
}