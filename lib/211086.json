{
  "comments": [
    "An exception is thrown when the ResultsViewControl is created in a dialog. This happens if the Results View preferences state that DisplayWindow should be a SingleWindow. The cause is the addition of a GridData() to the SingleWindowModeSection\u0027s main composite on line 69 of SingleWindowModeSection.java:\n\n            _composite.setLayoutData(new GridData(GridData.FILL_BOTH));\n\nThe reason this causes a problem is that the parent of the SingleWindowModeSection is ResultsViewControl._detailArea and its layout is a FillLayout. Children of this composite should therefore not have a GridData for layout data.\n\nTo fix this, line 69 of SingleWindowModeSection should be removed. I have tested this with all preference settings of the DisplayWindow and DisplayMode options in the SQL Results View Options, with the Results View running both as an Eclipse View and embedded in a dialog.\n\nThe .log entry when I create the results view in a dialog is this:\n\n!ENTRY org.eclipse.ui 4 0 2007-11-27 15:39:04.686\n!MESSAGE Unhandled event loop exception\n!STACK 0\njava.lang.ClassCastException: org.eclipse.swt.layout.GridData\n\tat org.eclipse.swt.layout.FillLayout.computeChildSize(FillLayout.java:141)\n\tat org.eclipse.swt.layout.FillLayout.computeSize(FillLayout.java:119)\n\tat org.eclipse.swt.widgets.Composite.computeSize(Composite.java:219)\n\tat org.eclipse.swt.custom.CTabFolderLayout.computeSize(CTabFolderLayout.java:53)\n\tat org.eclipse.swt.widgets.Composite.computeSize(Composite.java:219)\n\tat org.eclipse.swt.layout.GridData.computeSize(GridData.java:478)\n\tat org.eclipse.swt.layout.GridLayout.layout(GridLayout.java:214)\n\tat org.eclipse.swt.layout.GridLayout.computeSize(GridLayout.java:159)\n\tat org.eclipse.swt.widgets.Composite.computeSize(Composite.java:219)",
    "Created an attachment (id\u003d83953)\nProposed patch\n\nRemoves line 69 in SingleWindowModeSection.java",
    "Ldull - will you review and apply this patch. Thanks."
  ],
  "commentCreationDates": [
    "2007-11-27T16:57:51+01:00",
    "2007-11-28T08:34:37+01:00",
    "2007-12-07T09:24:31+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.swt.layout.GridData",
      "elements": [
        {
          "method": "org.eclipse.swt.layout.FillLayout.computeChildSize",
          "source": "FillLayout.java:141"
        },
        {
          "method": "org.eclipse.swt.layout.FillLayout.computeSize",
          "source": "FillLayout.java:119"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.computeSize",
          "source": "Composite.java:219"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolderLayout.computeSize",
          "source": "CTabFolderLayout.java:53"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.computeSize",
          "source": "Composite.java:219"
        },
        {
          "method": "org.eclipse.swt.layout.GridData.computeSize",
          "source": "GridData.java:478"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.layout",
          "source": "GridLayout.java:214"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeSize",
          "source": "GridLayout.java:159"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.computeSize",
          "source": "Composite.java:219"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "211086",
      "date": "2007-11-27T16:57:51+01:00",
      "product": "Data Tools",
      "component": "SQL Results View",
      "severity": "normal"
    }
  ],
  "groupId": "211086",
  "bugId": "211086",
  "date": "2007-11-27T16:57:51+01:00",
  "product": "Data Tools",
  "component": "SQL Results View",
  "severity": "normal"
}