{
  "comments": [
    "Create a new J2EE enterprise application project, add a web module to it, add a project utility JAR to the EAR project (under J2EE module), then add the utility JAR as a J2EE Module dependency (on the J2EE module tab). The utility JAR will be present in the root directory of the included WAR file, and it shouldn\u0027t be there. It causes problems with EAR deployment on Websphere 6.0.\n\nUsing WTP from Callisto RC4.",
    "Created an attachment (id\u003d43502)\nA sample EAR file showing the utility JAR inside the WAR\n\nThe utility JAR should not be in the WAR at all; all the WAR needs is a reference to it in its manifest file.",
    "Actually, I did a bit more testing and I\u0027m not sure the JAR at the WAR level is related to the problem I\u0027m having. I can no longer deploy to Websphere; I get the following error when attempting to publish. This is unrelated to spaces in the file name:\n\n  [wsadmin] *** ERROR ***: Mon Jun 05 16:55:45 CDT 2006    com.ibm.etools.j2ee.commonarchivecore.exception.OpenFailureException: IWAE0023E Unable to open module file \"TestWeb.war\" in EAR file \"C:\\Documents and Settings\\I264193\\Local Settings\\Temp\\app53935.ear\"\n  [wsadmin] !Stack_trace_of_nested_exce!\n  [wsadmin] com.ibm.etools.j2ee.commonarchivecore.exception.OpenFailureException: IWAE0006E Archive is not a valid WAR File because the deployment descriptor can not be found (case sensitive): WEB-INF/web.xml\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.CommonarchiveFactoryImpl.openSpecificArchive(CommonarchiveFactoryImpl.java:724)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.CommonarchiveFactoryImpl.openWARFile(CommonarchiveFactoryImpl.java:749)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.openNestedArchive(EARFileImpl.java:641)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.openNestedArchive(EARFileImpl.java:625)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.strategy.LoadStrategyImpl.openNestedArchive(LoadStrategyImpl.java:440)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.strategy.LoadStrategyImpl.createFile(LoadStrategyImpl.java:143)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.strategy.ZipFileLoadStrategyImpl.getFiles(ZipFileLoadStrategyImpl.java:77)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.strategy.LoadStrategyImpl.collectFiles(LoadStrategyImpl.java:270)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.ContainerImpl.getFiles(ContainerImpl.java:221)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.ContainerImpl.getFile(ContainerImpl.java:183)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.ModuleRefImpl.initModuleFileFromEAR(ModuleRefImpl.java:115)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.ModuleRefImpl.getModuleFile(ModuleRefImpl.java:98)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.getModuleFile(EARFileImpl.java:90)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.getDeploymentDescriptor(EARFileImpl.java:322)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.getDeploymentDescriptor(EARFileImpl.java:330)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.rollUpRoles(EARFileImpl.java:782)\n  [wsadmin] at com.ibm.etools.j2ee.commonarchivecore.impl.EARFileImpl.rollUpRoles(EARFileImpl.java:772)\n  [wsadmin] at com.ibm.websphere.management.application.client.ArchiveDeploymentInfo.\u003cinit\u003e(ArchiveDeploymentInfo.java:147)\n  [wsadmin] at com.ibm.ws.management.application.client.AppInstallHelper.getAppDeploymentInfo(AppInstallHelper.java:178)\n  [wsadmin] at com.ibm.ws.management.application.client.AppInstallHelper.getAppDeploymentInfoGenericRead(AppInstallHelper.java:230)\n  [wsadmin] at com.ibm.ws.management.application.client.DefaultBindingHelper.prepareTask(DefaultBindingHelper.java:207)\n  [wsadmin] at com.ibm.ws.scripting.AdminAppClient.createPreferences(AdminAppClient.java:2324)\n  [wsadmin] at com.ibm.ws.scripting.AdminAppClient.doInstall(AdminAppClient.java:1663)\n  [wsadmin] at com.ibm.ws.scripting.AdminAppClient.doInstall(AdminAppClient.java:1586)\n  [wsadmin] at com.ibm.ws.scripting.AdminAppClient.install(AdminAppClient.java:1199)\n  [wsadmin] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  [wsadmin] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n  [wsadmin] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n  [wsadmin] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n  [wsadmin] at java.lang.reflect.Method.invoke(Method.java:391)\n  [wsadmin] at tcl.lang.reflect.PkgInvoker.invokeMethod(PkgInvoker.java:125)\n  [wsadmin] at tcl.lang.JavaInvoke.call(JavaInvoke.java:263)\n  [wsadmin] at tcl.lang.JavaInvoke.callMethod(JavaInvoke.java:121)\n  [wsadmin] at tcl.lang.ReflectObject.cmdProc(ReflectObject.java:914)\n  [wsadmin] at tcl.lang.Parser.evalObjv(Parser.java:818)\n  [wsadmin] at tcl.lang.Parser.eval2(Parser.java:1221)\n  [wsadmin] at tcl.lang.Interp.eval(Interp.java:2189)\n  [wsadmin] at tcl.lang.Interp.eval(Interp.java:2243)\n  [wsadmin] at com.ibm.bsf.engines.jacl.JaclEngine.eval(Unknown Source)\n  [wsadmin] at com.ibm.bsf.BSFManager$5.run(Unknown Source)\n  [wsadmin] at java.security.AccessController.doPrivileged1(Native Method)\n  [wsadmin] at java.security.AccessController.doPrivileged(AccessController.java:351)\n  [wsadmin] at com.ibm.bsf.BSFManager.eval(Unknown Source)\n  [wsadmin] at com.ibm.ws.scripting.AbstractShell.executeCommands(AbstractShell.java:774)\n  [wsadmin] at com.ibm.ws.scripting.AbstractShell.run(AbstractShell.java:1685)\n  [wsadmin] at com.ibm.ws.scripting.WasxShell.main(WasxShell.java:855)\n",
    "For what it\u0027s worth, here is the version of Websphere I am running:\n\nWebSphere Platform 6.0 [BASE 6.0.2.0 o0526.07]\nOperating System is Windows XP, version 5.1\nJava version \u003d J2RE 1.4.2 IBM Windows 32 build cn142-20050609 (JIT enabled: jitc), Java Compiler \u003d jitc, Java VM name \u003d Classic VM\n\nThe publish mechanism works fine on WTP M6 and (I think) worked under Callisto RC2.",
    "Could not reproduce problem with another server - not clear to me at this point whether it is publishing incorrectly to WebSphere, or the server itself is having problems.",
    "Sinan,\n\nCan you please have a look at this.  It can be ONLY be addressed in 1.5.1 if there is really a problem. Too late for 1.5",
    "(In reply to comment #4)\n\u003e Could not reproduce problem with another server - not clear to me at this point\n\u003e whether it is publishing incorrectly to WebSphere, or the server itself is\n\u003e having problems.\n\u003e \n\nThe Websphere server only seems to have this problem when there is a J2EE utility JAR included as part of the EAR. I have been able to work around the problem (for now) by turning off the auto-publish feature and manually creating the EAR file through \"Export... EAR file\" from the workbench.",
    "Has any progress been made on this? I find this so annoying that I have reverted to WTP RC3 which does not have this problem.",
    "I am also facing this problem but with some modifications. I have utility JAR (hibernate domain objects) which is using libraries (hibernate libraries) defined in EAR project (library jars are stored in EarContent folder of EAR project). The utility jar has J2EE module dependency on these library jars. In final EAR the library jars are in root of EAR (which is correct) and also in root of utility jar (which is duplicity). By exporting of EAR from workbench the utility jar does not contain library jars but an empty directory called \"[]\" (which is also strange). \n\nEnvironment: JBoss 4.0.4GA, Eclipse 3.2, WTP 1.5.0.",
    "Still blocked on upgrading to anything greater than 1.5M3. A fellow co-worker now also has the same problem.",
    "I\u0027ve tried to recreate the same problem using WTP 1.5.2 (Lomboz 3.2 distribution) following these steps:\n\n1-Created a Dynamic Web Application Project (TestWeb)\n2-Created a Enterprise Application Project (Test) adding Testweb as a module\n3-Copied the TestUtility.jar into Test project directory\n4-Using Test-\u003eproperties-\u003eJ2EE Module Dependencies-\u003eAdd Jars the TestUtility.jar was added as a utility jar\n5-Added the Test project to WebSphere 6.0 Runtime.\n\nIt was successfully deployed. When I checked the deployed EAR under ..\\ibm\\WebSphere\\AppServer\\profiles\\default\\installedApps\\sanchezNode01Cell, \nthe TestUtility.jar file was under the root directory of the EAR (It wasn\u0027t under WAR directory) \n\nIs there any comment on the followed steps? \n\nIt works for me.\n\nTim,\n  I think you can reduce the severity of the Bug.\n\n\n(We are still checking the \"commonarchivecore\" and \"generic\" server modules. )\n",
    "Resolving as WORKS since Sinan was able to test successfully and there has been no response from the originator in over two months. This may be something that failed on previous levels of 1.5, and we can reopen if there is any additional information that this still occurs on 1.5.2 or above.",
    "Closing as part of mass query to clean up old resolved bugs in untargetted milestones."
  ],
  "commentCreationDates": [
    "2006-06-05T20:04:42+02:00",
    "2006-06-05T20:06:33+02:00",
    "2006-06-05T23:56:27+02:00",
    "2006-06-06T00:00:34+02:00",
    "2006-06-08T20:48:02+02:00",
    "2006-06-28T17:44:26+02:00",
    "2006-07-03T19:08:29+02:00",
    "2006-07-26T16:10:43+02:00",
    "2006-07-28T11:09:23+02:00",
    "2006-10-13T07:00:42+02:00",
    "2006-10-27T12:16:03+02:00",
    "2007-01-04T19:48:15+01:00",
    "2007-04-03T17:51:05+02:00"
  ],
  "traces": [
    {
      "exceptionType": "com.ibm.etools.j2ee.commonarchivecore.exception.OpenFailureException",
      "message": "IWAE0006E Archive is not a valid WAR File because the deployment descriptor can not be found (case sensitive): WEB-INF/web.xml   [wsadmin]",
      "elements": [
        {
          "method": "com.ibm.etools.j2ee.commonarchivecore.impl.CommonarchiveFactoryImpl.openSpecificArchive",
          "source": "CommonarchiveFactoryImpl.java:724"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "145399",
      "date": "2006-06-05T23:56:27+02:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "critical"
    }
  ],
  "groupId": "145399",
  "bugId": "145399",
  "date": "2006-06-05T20:04:42+02:00",
  "product": "Web Tools",
  "component": "jst.server",
  "severity": "critical"
}