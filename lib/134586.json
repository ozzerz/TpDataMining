{
  "comments": [
    "I am using AspectJ version: 1.5.1.20060131132251.  I don\u0027t know which number this relates to above.\n\n\nI think there is an error in handling generics inside generics.  This statement seems to be giving me trouble:\n\n\u003cT extends Enum\u003cT\u003e\u003e \n\nI create this ITD:\n\n  public \u003cT extends Enum\u003cT\u003e\u003e T Annotation.getEnum(String key, Class\u003cT\u003e enumClass) {\n    return null;\n  }\n\nand I get the exception copied below.\n\nBut, I create this ITD, and there is no exception (no nested generics):\n\n  public \u003cT extends Enum\u003e T Annotation.getEnum(String key, Class\u003cT\u003e enumClass) {\n    return null;\n  }\n\n\nThis is the error spit out by the first ITD:\n\n\norg.aspectj.apache.bcel.classfile.ClassFormatException\nat org.aspectj.apache.bcel.classfile.Utility.typeOfSignature(Utility.java:1293)\nat org.aspectj.apache.bcel.generic.Type.getTypeInternal(Type.java:166)\nat org.aspectj.apache.bcel.generic.Type.getType(Type.java:155)\nat org.aspectj.weaver.bcel.BcelWorld.makeBcelType(BcelWorld.java:208)\nat org.aspectj.weaver.bcel.BcelTypeMunger.makeMethodGen(BcelTypeMunger.java:611)\nat org.aspectj.weaver.bcel.BcelTypeMunger.mungeNewMethod(BcelTypeMunger.java:777)\nat org.aspectj.weaver.bcel.BcelTypeMunger.munge(BcelTypeMunger.java:87)\nat org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:423)\nat org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:105)\nat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1543)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1494)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1275)\nat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1097)\nat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:300)\nat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:178)\nat org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.aj:70)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:367)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:824)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:234)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:189)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:164)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\ntrouble in: \npublic abstract class org.eclipse.jdt.core.dom.Annotation extends org.eclipse.jdt.core.dom.Expression implements org.eclipse.jdt.core.dom.IExtendedModifier:\n  org.eclipse.jdt.core.dom.Name typeName\n  static Class class$0 [Synthetic]\n  public String ajc$interField$ca_ubc_cs_wrapper_AnnotationWrapper$qualifiedTypeName [RuntimeVisibleAnnotations]\n  abstract org.eclipse.jdt.core.dom.ChildPropertyDescriptor internalTypeNameProperty();\n\n  public final org.eclipse.jdt.core.dom.ChildPropertyDescriptor getTypeNameProperty():\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 42)\n                    INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.internalTypeNameProperty ()Lorg/eclipse/jdt/core/dom/ChildPropertyDescriptor;\n                    ARETURN\n  end public final org.eclipse.jdt.core.dom.ChildPropertyDescriptor getTypeNameProperty()\n\n  static final org.eclipse.jdt.core.dom.ChildPropertyDescriptor internalTypeNamePropertyFactory(Class):\n                    NEW org.eclipse.jdt.core.dom.ChildPropertyDescriptor   (line 52)\n                    DUP\n                    ALOAD_0     // java.lang.Class nodeClass\n                    LDC \"typeName\"\n                    GETSTATIC org.eclipse.jdt.core.dom.Annotation.class$0 Ljava/lang/Class;\n                    DUP\n                    IFNONNULL L0\n                    POP\n    catch java.lang.ClassNotFoundException -\u003e E0\n    |               LDC \"org.eclipse.jdt.core.dom.Name\"\n    |               INVOKESTATIC java.lang.Class.forName (Ljava/lang/String;)Ljava/lang/Class;\n    catch java.lang.ClassNotFoundException -\u003e E0\n                    DUP\n                    PUTSTATIC org.eclipse.jdt.core.dom.Annotation.class$0 Ljava/lang/Class;\n                    GOTO L0\n                E0: NEW java.lang.NoClassDefFoundError\n                    DUP_X1\n                    SWAP\n                    INVOKEVIRTUAL java.lang.Throwable.getMessage ()Ljava/lang/String;\n                    INVOKESPECIAL java.lang.NoClassDefFoundError.\u003cinit\u003e (Ljava/lang/String;)V\n                    ATHROW\n                L0: ICONST_1\n                    ICONST_0\n                    INVOKESPECIAL org.eclipse.jdt.core.dom.ChildPropertyDescriptor.\u003cinit\u003e (Ljava/lang/Class;Ljava/lang/String;Ljava/lang/Class;ZZ)V\n                    ARETURN\n  end static final org.eclipse.jdt.core.dom.ChildPropertyDescriptor internalTypeNamePropertyFactory(Class)\n\n  void \u003cinit\u003e(org.eclipse.jdt.core.dom.AST):\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 71)\n                    ALOAD_1     // org.eclipse.jdt.core.dom.AST ast\n                    INVOKESPECIAL org.eclipse.jdt.core.dom.Expression.\u003cinit\u003e (Lorg/eclipse/jdt/core/dom/AST;)V\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 59)\n                    ACONST_NULL\n                    PUTFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n                    RETURN   (line 72)\n  end void \u003cinit\u003e(org.eclipse.jdt.core.dom.AST)\n\n  public boolean isModifier():\n                    ICONST_0   (line 78)\n                    IRETURN\n  end public boolean isModifier()\n\n  public boolean isAnnotation():\n                    ICONST_1   (line 85)\n                    IRETURN\n  end public boolean isAnnotation()\n\n  public org.eclipse.jdt.core.dom.Name getTypeName():\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 94)\n                    GETFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n                    IFNONNULL L1\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 96)\n                    DUP\n                    ASTORE_1\n                    MONITORENTER\n    finally -\u003e E1\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 97)\n    |               GETFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n    |               IFNONNULL L0\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 98)\n    |               INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.preLazyInit ()V\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 99)\n    |               NEW org.eclipse.jdt.core.dom.SimpleName\n    |               DUP\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this\n    |               GETFIELD org.eclipse.jdt.core.dom.Annotation.ast Lorg/eclipse/jdt/core/dom/AST;\n    |               INVOKESPECIAL org.eclipse.jdt.core.dom.SimpleName.\u003cinit\u003e (Lorg/eclipse/jdt/core/dom/AST;)V\n    |               PUTFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 100)\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this\n    |               GETFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n    |               ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this\n    |               INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.internalTypeNameProperty ()Lorg/eclipse/jdt/core/dom/ChildPropertyDescriptor;\n    |               INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.postLazyInit (Lorg/eclipse/jdt/core/dom/ASTNode;Lorg/eclipse/jdt/core/dom/ChildPropertyDescriptor;)V\n    |           L0: ALOAD_1   (line 96)\n    |               MONITOREXIT\n    finally -\u003e E1\n                    GOTO L1\n    finally -\u003e E1\n    |           E1: ALOAD_1\n    |               MONITOREXIT\n    finally -\u003e E1\n                    ATHROW\n                L1: ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 104)\n                    GETFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n                    ARETURN\n  end public org.eclipse.jdt.core.dom.Name getTypeName()\n\n  public void setTypeName(org.eclipse.jdt.core.dom.Name):\n                    ALOAD_1     // org.eclipse.jdt.core.dom.Name typeName   (line 118)\n                    IFNONNULL L0\n                    NEW java.lang.IllegalArgumentException   (line 119)\n                    DUP\n                    INVOKESPECIAL java.lang.IllegalArgumentException.\u003cinit\u003e ()V\n                    ATHROW\n                L0: ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 121)\n                    INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.internalTypeNameProperty ()Lorg/eclipse/jdt/core/dom/ChildPropertyDescriptor;\n                    ASTORE_2\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 122)\n                    GETFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n                    ASTORE_3\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 123)\n                    ALOAD_3     // org.eclipse.jdt.core.dom.ASTNode oldChild\n                    ALOAD_1     // org.eclipse.jdt.core.dom.Name typeName\n                    ALOAD_2     // org.eclipse.jdt.core.dom.ChildPropertyDescriptor p\n                    INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.preReplaceChild (Lorg/eclipse/jdt/core/dom/ASTNode;Lorg/eclipse/jdt/core/dom/ASTNode;Lorg/eclipse/jdt/core/dom/ChildPropertyDescriptor;)V\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 124)\n                    ALOAD_1     // org.eclipse.jdt.core.dom.Name typeName\n                    PUTFIELD org.eclipse.jdt.core.dom.Annotation.typeName Lorg/eclipse/jdt/core/dom/Name;\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 125)\n                    ALOAD_3     // org.eclipse.jdt.core.dom.ASTNode oldChild\n                    ALOAD_1     // org.eclipse.jdt.core.dom.Name typeName\n                    ALOAD_2     // org.eclipse.jdt.core.dom.ChildPropertyDescriptor p\n                    INVOKEVIRTUAL org.eclipse.jdt.core.dom.Annotation.postReplaceChild (Lorg/eclipse/jdt/core/dom/ASTNode;Lorg/eclipse/jdt/core/dom/ASTNode;Lorg/eclipse/jdt/core/dom/ChildPropertyDescriptor;)V\n                    RETURN   (line 126)\n  end public void setTypeName(org.eclipse.jdt.core.dom.Name)\n\n  public boolean isNormalAnnotation():\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 136)\n                    INSTANCEOF org.eclipse.jdt.core.dom.NormalAnnotation\n                    IRETURN\n  end public boolean isNormalAnnotation()\n\n  public boolean isMarkerAnnotation():\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 147)\n                    INSTANCEOF org.eclipse.jdt.core.dom.MarkerAnnotation\n                    IRETURN\n  end public boolean isMarkerAnnotation()\n\n  public boolean isSingleMemberAnnotation():\n                    ALOAD_0     // org.eclipse.jdt.core.dom.Annotation this   (line 158)\n                    INSTANCEOF org.eclipse.jdt.core.dom.SingleMemberAnnotation\n                    IRETURN\n  end public boolean isSingleMemberAnnotation()\n\n  int memSize():\n                    BIPUSH 44   (line 165)\n                    IRETURN\n  end int memSize()\nend public abstract class org.eclipse.jdt.core.dom.Annotation\n\nwhen type munging with (BcelTypeMunger ResolvedTypeMunger(Method, java.lang.Enum\u003cT\u003e org.eclipse.jdt.core.dom.Annotation.getEnum(java.lang.String, java.lang.Class\u003cT\u003e)))\nwhen weaving type org.eclipse.jdt.core.dom.Annotation\nwhen weaving classes \nwhen weaving \nwhen batch building BuildConfig[F:\\Documents and Settings\\Andrew Eisenberg\\My Documents\\workspace\\.metadata\\.plugins\\org.eclipse.ajdt.core\\Wrapper 3.2M4.generated.lst] #Files\u003d7\n\n\nthanks,\n--andrew",
    "Just checked and after recreating it at AspectJ1.5.0 level I can confirm it was fixed in AspectJ1.5.1a which came out on 10th April."
  ],
  "commentCreationDates": [
    "2006-04-03T21:18:39+02:00",
    "2006-05-18T10:28:23+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.aspectj.apache.bcel.classfile.ClassFormatException",
      "elements": [
        {
          "method": "org.aspectj.apache.bcel.classfile.Utility.typeOfSignature",
          "source": "Utility.java:1293"
        },
        {
          "method": "org.aspectj.apache.bcel.generic.Type.getTypeInternal",
          "source": "Type.java:166"
        },
        {
          "method": "org.aspectj.apache.bcel.generic.Type.getType",
          "source": "Type.java:155"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.makeBcelType",
          "source": "BcelWorld.java:208"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.makeMethodGen",
          "source": "BcelTypeMunger.java:611"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.mungeNewMethod",
          "source": "BcelTypeMunger.java:777"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.munge",
          "source": "BcelTypeMunger.java:87"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:423"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:105"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1543"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:1494"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:1275"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1097"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:300"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java:178"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0",
          "source": "CompilerAdapter.aj:70"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:367"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:824"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:234"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:189"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:164"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:117"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "134586",
      "date": "2006-04-03T21:18:39+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "134586",
  "bugId": "134586",
  "date": "2006-04-03T21:18:39+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}