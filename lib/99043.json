{
  "comments": [
    "I\u0027 based my tesis in an plugin for debuger the language Ciao Prolog. I\u0027 have an \nprocess (the ciao shell) in excecution connected to the console provider for \neclipse (can I change it?). The ciao shell put an output special for surce \ndebuger an I tray to replace this line whit blank (\"\"). For this I create a \nConsoleLineTracker but when I replace this line eclipse has an error:\n\"Unhandled event loop exception\nReason:\nFailed to excecute runnable (java.langNullPointerException)\n***SWT nested exception\nReason:\njava.lang.NullPointerException\" \nwhy?\nThank for the time and sorry for my inglish.\n\n         Juan Angel Vanrell\nThis is my code of ConsoleLineTracker:\n\npublic class CiaoConsoleLineTracker implements IConsoleLineTracker{\n    private IConsole fConsole;\n    private CiaoInputProcessor fProcessor;\n    private boolean internalModification \u003d false;\n    private IDocument fDocument; \n    \n    public void init(IConsole console){\n        fConsole \u003d console;\n        fProcessor \u003d new CiaoInputProcessor();\n        fDocument \u003d console.getDocument();\n    }\n    \n    public void lineAppended(IRegion line){\n        String mode \u003d \"\";\n        String ciaoInput \u003d \"\";\n        try{\n            mode \u003d fConsole.getProcess().getLaunch().getLaunchConfiguration().\n            \tgetAttribute(IPrologLaunchConstants.PROLOG_LAUNCH_MODE,\"\");\n        }\n        catch(CoreException e){\n\t\t\t// Log the error to the Eclipse log.\n\t\t\tIStatus status \u003d new Status\n(IStatus.ERROR, \"CiaoProlog\", 0,\n\t\t\t\t\"Problems when attaching text to the console. \" \n+\n\t\t\t\t\"Mode of process not aviable\", e);\n\t\t\tCiaoPrologPlugin.log(status);\n        }\n        if(mode.equals(ILaunchManager.DEBUG_MODE)){\n            try{\n                ciaoInput \u003d fConsole.getDocument().get(line.getOffset\n(),line.getLength()); \n                fProcessor.makeProcess(ciaoInput);\n                if(fProcessor.modified){\n                \tDocumentEvent de \u003d new DocumentEvent(\n                            fDocument,line.getOffset(),line.getLength\n(),ciaoInput);\n                \tfDocument.stopListenerNotification();\n                    fDocument.\n                    \treplace(line.getOffset(),line.getLength(),ciaoInput);\n                }\n            }\n            catch(BadLocationException ble){\n    \t\t\t// Log the error to the Eclipse log.\n    \t\t\tIStatus status \u003d new Status\n(IStatus.ERROR, \"CiaoProlog\", 0,\n    \t\t\t\t\"Problems when attach text to the console.\", \nble);\n    \t\t\tCiaoPrologPlugin.log(status);\n            }\n        }\n    }\n\n    public void dispose(){\n        try {\n            fConsole.getProcess().getStreamsProxy().write(\"halt.\\n\");\n        }\n\t\tcatch (IOException ioe) {\n\t\t\t// Log the error to the Eclipse log.\n\t\t\tIStatus status \u003d new Status\n(IStatus.ERROR, \"CiaoProlog\", 0,\n\t\t\t   \"Problems ending the ciao shell.\", ioe);\n\t\t\tCiaoPrologPlugin.log(status);\t   \n\t\t}\n\n    }\n}",
    "Anything in your error log? There should be a stack trace for the NPE.\n",
    "Your code calls \"stopListenerNotification\" but does \nnot \"resumeListenerNotification\".",
    "(In reply to comment #1)\n\u003e Anything in your error log? There should be a stack trace for the NPE.\n\u003e \n\nThis is a copy of .log \nCan you help my?\nTanks \nJuan A. Vanrell\n\n!SESSION jun 10, 2005 15:09:43.520 ---------------------------------------------\neclipse.buildId\u003dunknown\njava.version\u003d1.4.2_08\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003des_MX\nCommand-line arguments: -application org.eclipse.ui.ide.workbench -pdelaunch\n\n!ENTRY org.eclipse.ui 4 4 jun 10, 2005 15:09:43.520\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 jun 10, 2005 15:09:43.520\n!MESSAGE Failed to execute runnable (java.lang.NullPointerException)\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable\n(java.lang.NullPointerException)\n\tat org.eclipse.swt.SWT.error(SWT.java:2691)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:109)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2750)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2435)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\n!ENTRY org.eclipse.ui 4 4 jun 10, 2005 15:09:43.520\n!MESSAGE *** SWT nested exception\n\n!ENTRY org.eclipse.ui 4 0 jun 10, 2005 15:09:43.520\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.jface.text.AbstractDocument.updateDocumentStructures(AbstractDocument.java:607)\n\tat\norg.eclipse.jface.text.AbstractDocument.fireDocumentChanged(AbstractDocument.java:704)\n\tat org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:998)\n\tat\norg.eclipse.debug.internal.ui.views.console.ConsoleDocumentPartitioner$3.run(ConsoleDocumentPartitioner.java:699)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:106)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2750)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2435)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)",
    "(In reply to comment #2)\n\u003e Your code calls \"stopListenerNotification\" but does \n\u003e not \"resumeListenerNotification\".\n\nYes, it?s my error, hay tray to clear the code, taht line is a test only.\nThis is the rigth code:\nThanks\n\n/*\n * Created on 20/05/2005\n *\n * TODO Universidad Nacional del Comahue - Neuqu?n, Argentina\n * \n */\npackage ar.unco.javanrell.ciaoProlog.ui;\n\nimport java.io.IOException;\nimport org.eclipse.core.runtime.CoreException;\n\nimport org.eclipse.jface.text.IRegion;\nimport org.eclipse.jface.text.IDocument;\nimport org.eclipse.jface.text.BadLocationException;\nimport org.eclipse.jface.text.DocumentEvent;\nimport org.eclipse.jface.text.DefaultPositionUpdater;\nimport org.eclipse.jface.text.IPositionUpdater;\nimport org.eclipse.core.runtime.IStatus;\nimport org.eclipse.core.runtime.Status;\nimport org.eclipse.debug.core.ILaunchManager;\nimport org.eclipse.debug.ui.console.IConsole;\nimport org.eclipse.debug.ui.console.IConsoleLineTracker;\n\nimport org.eclipse.debug.core.model.IFlushableStreamMonitor;\nimport org.eclipse.debug.internal.ui.views.console.ConsoleDocument;\nimport org.eclipse.jface.text.rules.DefaultPartitioner;\nimport org.eclipse.ui.console.ConsolePlugin;\n\nimport ar.unco.javanrell.ciaoProlog.CiaoPrologPlugin;\nimport ar.unco.javanrell.ciaoProlog.sourceDebuger.CiaoInputProcessor;\nimport br.usp.ime.prolog.launch.IPrologLaunchConstants;\n\n/**\n * @author Juan Angel Vanrell\n *\n */\npublic class CiaoConsoleLineTracker implements IConsoleLineTracker{\n    private IConsole fConsole;\n    private CiaoInputProcessor fProcessor;\n    private boolean internalModification \u003d false;\n    private IDocument fDocument; \n    \n    public void init(IConsole console){\n        fConsole \u003d console;\n        fProcessor \u003d new CiaoInputProcessor();\n        fDocument \u003d console.getDocument();\n    }\n    \n    public void lineAppended(IRegion line){\n        String mode \u003d \"\";\n        String ciaoInput \u003d \"\";\n        try{\n            mode \u003d fConsole.getProcess().getLaunch().getLaunchConfiguration().\n            \tgetAttribute(IPrologLaunchConstants.PROLOG_LAUNCH_MODE,\"\");\n        }\n        catch(CoreException e){\n\t\t\t// Log the error to the Eclipse log.\n\t\t\tIStatus status \u003d new Status(IStatus.ERROR, \"CiaoProlog\", 0,\n\t\t\t\t\"Problems when attaching text to the console. \" +\n\t\t\t\t\"Mode of process not aviable\", e);\n\t\t\tCiaoPrologPlugin.log(status);\n        }\n        if(mode.equals(ILaunchManager.DEBUG_MODE)){\n            try{\n                ciaoInput \u003d fDocument.get(line.getOffset(),line.getLength()); \n                fProcessor.makeProcess(ciaoInput);\n                if(fProcessor.modified){\n                \tfDocument.replace(\n                    \t\tline.getOffset(),line.getLength(),ciaoInput);\n                }\n            }\n            catch(BadLocationException ble){\n    \t\t\t// Log the error to the Eclipse log.\n    \t\t\tIStatus status \u003d new Status(IStatus.ERROR, \"CiaoProlog\", 0,\n    \t\t\t\t\"Problems when attach text to the console.\", ble);\n    \t\t\tCiaoPrologPlugin.log(status);\n            }\n        }\n    }\n\n    public void dispose(){\n/*        try {\n            fConsole.getProcess().getStreamsProxy().write(\"halt.\\n\");\n        }\n\t\tcatch (IOException ioe) {\n\t\t\t// Log the error to the Eclipse log.\n\t\t\tIStatus status \u003d new Status(IStatus.ERROR, \"CiaoProlog\", 0,\n\t\t\t   \"Problems ending the ciao shell.\", ioe);\n\t\t\tCiaoPrologPlugin.log(status);\t   \n\t\t}\n*/\n    }\n}\n",
    "Your stack trace references org.eclipse.debug.internal.ui.views.console.ConsoleDocumentPartitioner. That \nclass does not exist in 3.1. What version of Eclipse are you using? \n\nHave you tried running your code on another Operating System? Windows 98 is not one of the target \nenvironments for either 3.0 or 3.1.\n",
    "Also, I would not recommend that you try to directly manipulate a ProcessConsole\u0027s document in either \n3.0 or 3.1 version. The ProcessConsole assumes that its contents come from the streams that are \nassociated with it and uses information it gets from those streams to partition the document.",
    "I run in 3.02, 3.01 and 3.0 whit the identical result, in linux run so slow... \nI have only 190 MB of ram",
    "I run in 3.02, 3.01 and 3.0 whit the identical result, in linux run so slow... \nI have only 190 MB of ram",
    "please try 3.1. \nRC2 will be available later today.",
    "We don\u0027t currently support line trackers/pattern matchers that modify the \ncontents of a document. If this is still broken in 3.1, we should open an \nenhancement request to support this for consideration in 3.2.\n\nHowever, please try on 3.1RC2 to let us know if the problem still exists.",
    "how can disconect the eclipse console for connect my own console?\nI can\u0027t test in 3.1 because the console of eclipse add \\n to my program outputs\nfor this I try to create my own console.",
    "I can\u0027t test mi plugin in 3.1 because the console add \\n to the lines that my\nprocess output and this read the \\n (whit input) and crash.\nFor this I try to create my own console, but, can I disconect the eclipse console?? \nThanks\nJuan Angel Vanrell",
    "Have you tried using 3.1? It does not add \\n. It prints output to the console\nexactly as it receives it from the process (whether console wrapping is on or not).",
    "Sounds like you really want to filter output displayed in the console... There\u0027s\nan outstanding (deferred) feature request for that. See Bug 40705.",
    "(In reply to comment #14)\n\u003e Sounds like you really want to filter output displayed in the console... \nThere\u0027s\n\u003e an outstanding (deferred) feature request for that. See Bug 40705.\n\nI don\u0027t need filter an event, I need modificate this, my process output is like:\nCall:member(X,Y)?    In (...\\n\nI need cut the end of the line In... and nothing more.\nIn eclipse 3.02/01/0/2.1 the console works fine but in 3.1 attach \\n o \\r I \ntest it whit the debuger.\nThe plugin of Amzzi Prolog of eclipse uses your own console (a view), maybe for \nthis?\nThanks\nJuan Angel Vanrell. ",
    "I\u0027m not familiar with Amzi Prolog so I can\u0027t comment on their use of Eclipse\u0027s\nconsoles. Have you tried taking this issue up with them? \n\nI don\u0027t see where our console would be appending any \u0027\\n\u0027 characters to the\nprocess\u0027 output. Can you provide a test case based on Eclipse SDK plugins?",
    "I try to talk with they but the ansswer is: use Amzi, jaja\n\nI can send my plugin proyect for test but you need install the ciao program, I \ncan\u0027t see other solution for test the \\n append.\n",
    "From my reading, there are really two feature requests here:\n\n1. Allow line trackers and pattern matchers to modify the console\u0027s document\ndirectly (w/o breaking the partitioning)\n\n2. Provide some way of specifying attaching/connecting alternative consoles to a\nlaunch\n",
    "Currently deferred",
    "what is the version in which this is allowed??\nThanks\nJuan Angel Vanrell",
    "It\u0027s not allowed in any version. This is an outstanding enhancement request."
  ],
  "commentCreationDates": [
    "2005-06-08T21:27:58+02:00",
    "2005-06-08T22:13:00+02:00",
    "2005-06-09T23:10:19+02:00",
    "2005-06-10T20:17:52+02:00",
    "2005-06-10T20:23:58+02:00",
    "2005-06-10T20:42:57+02:00",
    "2005-06-10T20:48:25+02:00",
    "2005-06-10T20:50:42+02:00",
    "2005-06-10T20:52:52+02:00",
    "2005-06-10T20:54:34+02:00",
    "2005-06-14T16:11:05+02:00",
    "2005-06-24T22:41:46+02:00",
    "2005-06-27T02:02:50+02:00",
    "2005-06-27T02:44:41+02:00",
    "2005-06-30T18:23:16+02:00",
    "2005-07-01T17:28:13+02:00",
    "2005-07-07T18:47:47+02:00",
    "2005-07-07T19:36:46+02:00",
    "2005-07-18T22:15:14+02:00",
    "2005-07-29T16:20:58+02:00",
    "2005-08-16T22:38:46+02:00",
    "2005-08-16T22:52:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2691"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:109"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2750"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2435"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "99043",
      "date": "2005-06-10T20:17:52+02:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "enhancement"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.AbstractDocument.updateDocumentStructures",
          "source": "AbstractDocument.java:607"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentChanged",
          "source": "AbstractDocument.java:704"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.replace",
          "source": "AbstractDocument.java:998"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.console.ConsoleDocumentPartitioner$3.run",
          "source": "ConsoleDocumentPartitioner.java:699"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2750"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2435"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "99043",
      "date": "2005-06-10T20:17:52+02:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "enhancement"
    }
  ],
  "groupId": "99043",
  "bugId": "99043",
  "date": "2005-06-08T21:27:58+02:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "enhancement"
}