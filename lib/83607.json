{
  "comments": [
    "eclipse.buildId\u003dN20050122-0010\n\nWhile working on the Render problem, I hit this one.\n\njava.lang.ClassCastException:\norg/eclipse/ui/internal/progress/PendingUpdateAdapter incompatible with\norg/eclipse/debug/core/model/IVariable\n        at\norg.eclipse.debug.internal.ui.views.variables.ViewerState.encodeElement(ViewerState.java:41)\n        at\norg.eclipse.debug.internal.ui.views.AbstractViewerState.saveState(AbstractViewerState.java:66)\n        at\norg.eclipse.debug.internal.ui.views.AbstractViewerState.\u003cinit\u003e(AbstractViewerState.java:38)\n        at\norg.eclipse.debug.internal.ui.views.variables.VariablesView.getViewerState(VariablesView.java:1412)\n        at\norg.eclipse.debug.internal.ui.views.variables.VariablesView.setViewerInput(VariablesView.java:389)\n        at\norg.eclipse.debug.internal.ui.views.variables.VariablesView.selectionChanged(VariablesView.java:1267)\n        at\norg.eclipse.ui.internal.AbstractPartSelectionTracker$1.run(AbstractPartSelectionTracker.java:119)\n        at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1051)\n        at org.eclipse.core.runtime.Platform.run(Platform.java:747)\n        at\norg.eclipse.ui.internal.AbstractPartSelectionTracker.fireSelection(AbstractPartSelectionTracker.java:117)\n        at\norg.eclipse.ui.internal.PagePartSelectionTracker$1.selectionChanged(PagePartSelectionTracker.java:45)\n        at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:163)\n        at\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1051)\n        at org.eclipse.core.runtime.Platform.run(Platform.java:747)\n        at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:161)\n        at\norg.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1676)\n        at\norg.eclipse.jface.viewers.StructuredViewer.setSelection(StructuredViewer.java:1358)\n        at\norg.eclipse.debug.internal.ui.views.RemoteTreeViewer$SelectionJob.runInUIThread(RemoteTreeViewer.java:152)\n        at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:96)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n        at\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2854)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2518)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1584)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1550)\n        at\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:288)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n        at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:225)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:274)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n        at java.lang.reflect.Method.invoke(Method.java:391)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:255)\n        at org.eclipse.core.launcher.Main.run(Main.java:811)\n        at org.eclipse.core.launcher.Main.main(Main.java:795)",
    "Please investigate.",
    "Any idea how to reproduce this? The stack trace implies that getData() is returning a \nPendingUpdateAdapater when an IVariable was expected. I have not encountered this and I don\u0027t see  \nhow to make it happen. \nAlso note that the changes to solve the rendering problem meant ViewerState and AbstractViewerState \nhave changed slightly since this bug was filed (See bug #83453).",
    "I am wondering if it had to do with the breakpoints I was putting in the jobs\nthat had to do with the Render problem.  Not really certain.\n\nHow about this?\nI have many stack traces that show the PendingUpdateAdapter being added during\ngetChildren calls when selection has changed in the VariablesView or LaunchViewer.\nBefore the PendingUpdateAdapter is removed which only happens after the value is\nretrieved, couldn\u0027t the stack above execute since its triggered by something\ndifferent?",
    "Looking at the code I think the ClassCastException is still possible. I don\u0027t know how to make it happen \nthough. Added a type check to ViewerState before the cast and null checks AbstractViewerState in case \nviewer state returns null.",
    "Darin, please verify",
    "Verified. I also cannot make it the problem occurr, but a pending item is a \npossibility."
  ],
  "commentCreationDates": [
    "2005-01-25T14:02:13+01:00",
    "2005-01-25T15:52:23+01:00",
    "2005-01-26T23:16:54+01:00",
    "2005-01-27T01:54:28+01:00",
    "2005-02-01T21:33:58+01:00",
    "2005-02-01T21:34:49+01:00",
    "2005-02-07T17:51:31+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org/eclipse/ui/internal/progress/PendingUpdateAdapter incompatible with org/eclipse/debug/core/model/IVariable",
      "elements": [
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.ViewerState.encodeElement",
          "source": "ViewerState.java:41"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.AbstractViewerState.saveState",
          "source": "AbstractViewerState.java:66"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.AbstractViewerState.\u003cinit\u003e",
          "source": "AbstractViewerState.java:38"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.VariablesView.getViewerState",
          "source": "VariablesView.java:1412"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.VariablesView.setViewerInput",
          "source": "VariablesView.java:389"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.VariablesView.selectionChanged",
          "source": "VariablesView.java:1267"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractPartSelectionTracker$1.run",
          "source": "AbstractPartSelectionTracker.java:119"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1051"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractPartSelectionTracker.fireSelection",
          "source": "AbstractPartSelectionTracker.java:117"
        },
        {
          "method": "org.eclipse.ui.internal.PagePartSelectionTracker$1.selectionChanged",
          "source": "PagePartSelectionTracker.java:45"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:163"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1051"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:161"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1676"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:1358"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.RemoteTreeViewer$SelectionJob.runInUIThread",
          "source": "RemoteTreeViewer.java:152"
        },
        {
          "method": "org.eclipse.ui.progress.UIJob$1.run",
          "source": "UIJob.java:96"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:118"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2854"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2518"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1584"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1550"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:288"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:225"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:274"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:255"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:811"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:795"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "83607",
      "date": "2005-01-25T14:02:13+01:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "83607",
  "bugId": "83607",
  "date": "2005-01-25T14:02:13+01:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "normal"
}