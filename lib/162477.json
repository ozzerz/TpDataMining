{
  "comments": [
    "I updated from CVS today and ran the AtnaAgent as follows:\n\n                 // connect and send\n\t\tlogger.info(\"Sending SOAPMessage ......................... \");\n\t\tSOAPMessage response \u003d null;\n\t\ttry {\n\t\t\t //response \u003d conn.call(msg, url);\n\t\t\t\n\t\t\t AtnaAgent agent \u003d new AtnaAgent();\n\t\t\t agent.start(XDSSoapClientActivator.getContext());\n\t\t\t URI uri \u003d new URI(url);\n\t\t\t response \u003d agent.send(msg, uri, \"\");\n\t\t\t \n\t\t} catch (Exception e) {\n\t\t\tlogger.fatal(e);\n                            \n                        // temp print stack trace to view exception via Console\n                        e.printStackTrace();\n\t\t\tthrow e;\n\t\t}\n\n... where \u0027msg\u0027 is a SOAPMessage. The third argument is supposed to be a domain .. like \"nist\" or something ... but I didn\u0027t set that at the moment. Even when I tried that it still threw the null pointer.\n\nThe log I have is as follows (there does not seem to be logging events from the atna agent):\n\n[DEBUG][XDSSoapClientAXIS.java:142] \nSOAP REQUEST MESSAGE *********************************\n[DEBUG][XDSSoapClientAXIS.java:153] \u003csoapenv:Envelope xmlns:soapenv\u003d\"http://schemas.xmlsoap.org/soap/envelope/\" soapenv:actor\u003d\"some-uri\" soapenv:mustUnderstand\u003d\"1\"\u003e\u003csoapenv:Header/\u003e\u003csoapenv:Body SOAP-SEC:id\u003d\"Body\"\u003e\u003cAdhocQueryRequest xmlns:query\u003d\"urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0\" xmlns:rim\u003d\"urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0\"\u003e\n  \u003cquery:ResponseOption returnComposedObjects\u003d\"true\" returnType\u003d\"ObjectRef\"/\u003e\n  \u003crim:AdhocQuery id\u003d\"urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d\"\u003e\n    \u003crim:Slot name\u003d\"$XDSDocumentEntryPatientId\"\u003e\n      \u003crim:ValueList\u003e\n        \u003crim:Value\u003e\u0027NIST-test-10^^^\u0026amp;1.3.6.1.4.1.21367.2005.3.7\u0026amp;ISO\u0027\u003c/rim:Value\u003e\n      \u003c/rim:ValueList\u003e\n    \u003c/rim:Slot\u003e\n    \u003crim:Slot name\u003d\"$XDSDocumentEntryStatus\"\u003e\n      \u003crim:ValueList\u003e\n        \u003crim:Value\u003e(\u0027urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Approved\u0027)\u003c/rim:Value\u003e\n      \u003c/rim:ValueList\u003e\n    \u003c/rim:Slot\u003e\n  \u003c/rim:AdhocQuery\u003e\n\u003c/AdhocQueryRequest\u003e\u003c/soapenv:Body\u003e\u003c/soapenv:Envelope\u003e\n\n[DEBUG][XDSSoapClientAXIS.java:164] \n*****************************************************\n\n[INFO ][XDSSoapClientAXIS.java:189] Sending SOAPMessage ......................... \n[FATAL][XDSSoapClientAXIS.java:200] java.lang.NullPointerException\njava.lang.NullPointerException\n\tat org.eclipse.ohf.ihe.atna.agent.AtnaAgent$1.run(AtnaAgent.java:128)\n\tat org.eclipse.ohf.ihe.atna.agent.AtnaAgent.start(AtnaAgent.java:161)\n\tat org.eclipse.ohf.ihe.xds.soap.XDSSoapClientAXIS.send(XDSSoapClientAXIS.java:195)\n\tat org.eclipse.ohf.ihe.xds.consumer.Consumer.sendQuery(Consumer.java:587)\n\tat org.eclipse.ohf.ihe.xds.consumer.Consumer.invokeStoredQuery(Consumer.java:345)\n\tat org.eclipse.ohf.ihe.xds.consumer.test.StoredQueryTest.testStoredQueryForObjectRefs(StoredQueryTest.java:275)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:457)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:670)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)",
    "I have updated the code. You can use the following example. Make sure that you have your keystore and cacert.jks located on your c:/ drive and renamed according to the \"domain\" parameter. In the example below I have \"nist\" so your keystore would be renamed to \"nist\" and your cacert.jks renamed to nist.jks. Also the passwords for each of those should be \"changeit\" . This is an interim solution. Keystore and key management approaches may evolve.\n\nAtnaAgent agent \u003d new AtnaAgent(XDSSoapClientActivator.getContext());\nURI uri \u003d new URI(url);\nresponse \u003d agent.send(msg, uri, \"nist\");",
    "For both Pix/Pdq and XDS we need the method to support both non-secure and secure transport, and preferably the Agent can perform the correct one using the same send method due to prior configuration done through the client.\n\n* mllp and mllps send command using domain (use ibmpix if doing a mllps otherwise leave it blank \"\")\npublic String send(String request, URI uri, String domain)\n\nNon-secure:\npdqQuery.setMLLPAtnaAgent(TestConfiguration.MLLP_URI, \"\");\n\nSecure:\npdqQuery.setMLLPAtnaAgent(TestConfiguration.MLLPS_URI, TestConfiguration.MLLP_DOMAIN);\n\nClient:\nresponse \u003d agent.send(hl7, uri, domain);\n\n\nWith the recent updates I continue to get this error, even while running non-secure MLLP.\n\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.ohf.ihe.atna.agent.AtnaAgent$2.run(AtnaAgent.java:193)\n\tat org.eclipse.ohf.ihe.atna.agent.AtnaAgent.start(AtnaAgent.java:226)\n\tat org.eclipse.ohf.ihe.common.hl7v2.mllpclient.Client.setMLLPAtnaAgent(Client.java:419)\n\t... 1 more\nException in thread \"main\" ",
    "close for 2007 branch",
    "resolved and verified"
  ],
  "commentCreationDates": [
    "2006-10-26T22:22:34+02:00",
    "2006-10-27T20:03:10+02:00",
    "2006-10-27T20:30:59+02:00",
    "2007-07-07T20:19:55+02:00",
    "2007-07-10T18:43:46+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ohf.ihe.atna.agent.AtnaAgent$1.run",
          "source": "AtnaAgent.java:128"
        },
        {
          "method": "org.eclipse.ohf.ihe.atna.agent.AtnaAgent.start",
          "source": "AtnaAgent.java:161"
        },
        {
          "method": "org.eclipse.ohf.ihe.xds.soap.XDSSoapClientAXIS.send",
          "source": "XDSSoapClientAXIS.java:195"
        },
        {
          "method": "org.eclipse.ohf.ihe.xds.consumer.Consumer.sendQuery",
          "source": "Consumer.java:587"
        },
        {
          "method": "org.eclipse.ohf.ihe.xds.consumer.Consumer.invokeStoredQuery",
          "source": "Consumer.java:345"
        },
        {
          "method": "org.eclipse.ohf.ihe.xds.consumer.test.StoredQueryTest.testStoredQueryForObjectRefs",
          "source": "StoredQueryTest.java:275"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run",
          "source": "JUnit3TestReference.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.TestExecution.run",
          "source": "TestExecution.java:38"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:670"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main",
          "source": "RemoteTestRunner.java:196"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "162477",
      "date": "2006-10-26T22:22:34+02:00",
      "product": "OHF",
      "component": "ATNA",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ohf.ihe.atna.agent.AtnaAgent$2.run",
          "source": "AtnaAgent.java:193"
        },
        {
          "method": "org.eclipse.ohf.ihe.atna.agent.AtnaAgent.start",
          "source": "AtnaAgent.java:226"
        },
        {
          "method": "org.eclipse.ohf.ihe.common.hl7v2.mllpclient.Client.setMLLPAtnaAgent",
          "source": "Client.java:419"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "162477",
      "date": "2006-10-27T20:30:59+02:00",
      "product": "OHF",
      "component": "ATNA",
      "severity": "blocker"
    }
  ],
  "groupId": "162477",
  "bugId": "162477",
  "date": "2006-10-26T22:22:34+02:00",
  "product": "OHF",
  "component": "ATNA",
  "severity": "blocker"
}