{
  "comments": [
    "Many of the unit tests in org.aspectj.ajdt.ajc.BuildArgParserTestCase and in\norg.aspectj.ajde.StructureModelTest are failing for me.  These failures appear\nto be due to the behavior of File.getAbsolutePath().  My suspicion is that these\nfailures are caused by recent changes to the structure model code to remove\ncalls to File.getCanonicalPath().\n\nThese failures all come under Win XP using either jdk 1.4.2 or jdk 1.3.x from\nSUN.  To reproduce the failures, you need to launch eclipse using \"-data\nc:/path_to_workspace\".  Note the lowercase \u0027c\u0027 in the path.  If I change this to\n\"-data C:/path_to_workspace\", then all of the tests will pass.\n\n\nHere are the traces from two of the failures:\n\njava.lang.IndexOutOfBoundsException: Index: 2, Size: 1\n    at java.util.ArrayList.RangeCheck(ArrayList.java:486)\n    at java.util.ArrayList.get(ArrayList.java:302)\n    at\norg.aspectj.ajde.StructureModelTest.testPointcutName(StructureModelTest.java:93)\n-----------------------------------------\njunit.framework.ComparisonFailure: expected:\u003cc...\u003e but was:\u003cC...\u003e\n    at junit.framework.Assert.assertEquals(Assert.java:81)\n    at junit.framework.Assert.assertEquals(Assert.java:87)\n    at\norg.aspectj.ajdt.ajc.BuildArgParserTestCase.testSourceRootDirWithFiles(BuildArgParserTestCase.java:221)\n\nThe filenames that are failing to compare above differ only in the initial\ncapitalization of the \u0027c\u0027, e.g.\nc:\\aspectj\\workspace\\org.aspectj.ajdt.core\\testdata\\ajc\\pkg\n    and\nC:\\aspectj\\workspace\\org.aspectj.ajdt.core\\testdata\\ajc\\pkg",
    "I\u0027m raising this to a P1 bug because someone needs to investigate this bug\nbefore the 1.1.1 release.  It\u0027s possibly just an issue with the test code;\nhowever, it might also indicate a subtle and dangerous bug in the structure\nmodel code.",
    "I confirm I can reproduce the failures. I\u0027ve investigated all the \nBuildArgParserTestCase ones and they were harmless, but easy to fix - I hate \nfailing test cases.\n\nNow looking at the StructureModelTest failures - potentially more serious.\n\n(Just appending progress to save anyone else duplicating work).",
    "Now fixed. The StructureModel test cases were indeed hiding a more subtle and \nserious bug - findNodeForSourceFile and findNodeForSourceLine were using\nabsolute path instead of canonical path to look for matches - and so not finding\ncorresponding nodes unless the path happened to match. This is the same problem \nthat caused Andy to lose his outline view from AJDT.\n\nI changed three files. If anyone has the time to buddy-check my changes \n(sensible precaution this close to ship) I\u0027d appreciate it. The files are:\n\norg.aspectj.asm.internal.AspectJElementHierarchy\norg.aspectj.ajdt.ajc.BuildArgParserTestCase\norg.aspectj.util.ConfigParser",
    "-",
    "At one point in the past those find methodhs did use canonical paths, but my \nover-optimistic migration to absolute paths changed that.  \n\nI reviewed these changes and they are all correct.  "
  ],
  "commentCreationDates": [
    "2003-09-12T18:59:40+02:00",
    "2003-09-12T19:01:51+02:00",
    "2003-09-12T21:00:18+02:00",
    "2003-09-12T21:37:21+02:00",
    "2003-09-12T21:37:55+02:00",
    "2003-09-17T09:06:00+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IndexOutOfBoundsException",
      "message": "Index: 2, Size: 1",
      "elements": [
        {
          "method": "java.util.ArrayList.RangeCheck",
          "source": "ArrayList.java:486"
        },
        {
          "method": "java.util.ArrayList.get",
          "source": "ArrayList.java:302"
        },
        {
          "method": "org.aspectj.ajde.StructureModelTest.testPointcutName",
          "source": "StructureModelTest.java:93"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "43030",
      "date": "2003-09-12T18:59:40+02:00",
      "product": "AspectJ",
      "component": "IDE",
      "severity": "normal"
    }
  ],
  "groupId": "43030",
  "bugId": "43030",
  "date": "2003-09-12T18:59:40+02:00",
  "product": "AspectJ",
  "component": "IDE",
  "severity": "normal"
}