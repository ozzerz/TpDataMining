{
  "comments": [
    "Hi, It has appeared a problem closing workbench, I know that PlatformUI.getWorkbench().close() is not implemented yet, but I was using a workarround that worked fine and but not now\n\n\nPlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell().close();\nW4TContext.getLifeCycle().addPhaseListener( new PhaseListener() {\n  private static final long serialVersionUID \u003d 1L;\n\n  public void beforePhase( final PhaseEvent event ) {\n    // do nothing\n  }\n\n  public void afterPhase( final PhaseEvent event ) {\n    W4TContext.getLifeCycle().removePhaseListener( this );\n    ContextProvider.getSession().invalidate();\n  }\n\n  public PhaseId getPhaseId() {\n    return PhaseId.RENDER;\n  }\n} );\n\nThe exception throwed is:\njava.lang.NullPointerException \nat org.eclipse.ui.internal.WorkbenchWindow.hardClose(WorkbenchWindow.java:1475)\nat org.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:603)\nat org.eclipse.ui.internal.WorkbenchWindow.access$0(WorkbenchWindow.java:579)\nat org.eclipse.ui.internal.WorkbenchWindow$2.run(WorkbenchWindow.java:696)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\nat org.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:694)\n\n\nRegards.\nRoberto.",
    "Fixed in CVS.\n\nThis will prevent exceptions upon closing the shell of the workbench. A clean solution to shutdown the workbench and maybe invalidate the session will be implement later with IWorkbench#close..",
    "Hi Benny, then, Can I use that code (as workaround) to close the workbench ? As I used to do before the problem ?\n\nPlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell().close();\nW4TContext.getLifeCycle().addPhaseListener( new PhaseListener() {\n  private static final long serialVersionUID \u003d 1L;\n\n  public void beforePhase( final PhaseEvent event ) {\n    // do nothing\n  }\n\n  public void afterPhase( final PhaseEvent event ) {\n    W4TContext.getLifeCycle().removePhaseListener( this );\n    ContextProvider.getSession().invalidate();\n  }\n\n  public PhaseId getPhaseId() {\n    return PhaseId.RENDER;\n  }\n} );",
    "Created an attachment (id\u003d71243)\ntrace\n\nI just saw that there are some more bits behind that stuff. After fixing an endless loop in the PerspectiveSwitcher I\u0027ve encountered some problems with the UICallBackManager. Frank, could you please take a look at this?\nStracktrace is attached.",
    "Reopened bug",
    "Just tested this again and it seems to be fixed due to some changes in this area.\n\nRoberto, could you please confirm?",
    "Hi, I\u0027m not sure. The workbench seems to be closed correctly, but I\u0027m calling:\nPlatformUI.getWorkbench().close();\nInside a callback function in a MessageDialog.openConfirm(...) and although the workbench is closed this dialog keeps open, I have to close it manually.\n\nMy code:\nIWindowCallback callback \u003d new IWindowCallback() {\n\t  public void windowClosed( final int returnCode ) {\n\t\t \n\t\t  if (returnCode \u003d\u003d MessageDialog.OK) {\n\t\t\t  PlatformUI.getWorkbench().close();\n\t\t  }\n  }\n};\n\nMessageDialog.openConfirm(Display.getCurrent().getActiveShell(), \n\t\t  \t\"Exit AMVitae\", \n\t\t  \t\"Please, confirm exit\", callback);\n"
  ],
  "commentCreationDates": [
    "2007-06-11T16:57:34+02:00",
    "2007-06-13T22:51:51+02:00",
    "2007-06-13T23:36:05+02:00",
    "2007-06-14T00:15:14+02:00",
    "2007-06-14T00:16:05+02:00",
    "2007-07-16T19:03:32+02:00",
    "2007-07-16T23:56:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.hardClose",
          "source": "WorkbenchWindow.java:1475"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.busyClose",
          "source": "WorkbenchWindow.java:603"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.access$0",
          "source": "WorkbenchWindow.java:579"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$2.run",
          "source": "WorkbenchWindow.java:696"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.close",
          "source": "WorkbenchWindow.java:694"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191977",
      "date": "2007-06-11T16:57:34+02:00",
      "product": "RAP",
      "component": "Workbench",
      "severity": "normal"
    }
  ],
  "groupId": "191977",
  "bugId": "191977",
  "date": "2007-06-11T16:57:34+02:00",
  "product": "RAP",
  "component": "Workbench",
  "severity": "normal"
}