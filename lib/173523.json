{
  "comments": [
    "The potential solution of bug 169680 uses subsystem properties to set FTP to retrieve data in active or passive mode.\n\nChanging this setting the first time raises an error \"An error has occurred. See error log for more details\". the main part of the error log lists is at the end of this bug report.\n\nTo reproduce the issue:\n1) Apply the patch for bug 169680 (attached there)\n2) Create a \"FTP Only\" system\n3) Righ click the Files subsystem -\u003e Properties\n4) Select Service -\u003e \"FTP Settings\" and a pair of Property - Value (passive - false) will appear.\n5) Select the value and a combobox will appear. Change the value and click Ok\n\nThe exception raised is:\n\norg.eclipse.core.runtime.AssertionFailedException: null argument:\nat org.eclipse.core.runtime.Assert.isNotNull(Assert.java:84)\nat org.eclipse.core.runtime.Assert.isNotNull(Assert.java:72)\nat org.eclipse.ltk.internal.core.refactoring.history.RefactoringHistoryService.hasSharedRefactoringHistory(RefactoringHistoryService.java:594)\nat org.eclipse.ltk.internal.ui.refactoring.history.RefactoringPropertyPage.performOk(RefactoringPropertyPage.java:404)\nat org.eclipse.jface.preference.PreferenceDialog$11.run(PreferenceDialog.java:889)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n[...]",
    "My comment below may be unrelated to the exception, and throwing the exception may be incorrect. Still, I\u0027m not sure if the concrete example given, subsystem properties are the right place for setting an FTP related property.\n\nNote that you are dealing with a FileServiceSubsystem here, which is a generic implementation of a subsystem being re-used by multiple service providers. Users may change the underlying service (e.g. choose to use ssh instead of ftp at some time).\n\nSo when you set e.g. \"FTP Passive Mode\" at subsystem level, and then the user switches to ssh, what should happen? - The property would still be visible (since nobody knows this is related to FTP only) but not make sense any more. I think that since FTP is a service, the service-specific properties should also be set at the service level.",
    "The properties only apply and are visible from the FTP the subsystem (ftp.files), not to the whole host.\nSo, if the host has multiple subsystems, the FTP properties only will visible in the FTP subsystem properties.",
    "What if you try this:\nNew connection, type\u003d\"Linux\"\nIn wizard select ftp.files\n\nOn finished connection, select the files subsystem, right-click-\u003eproperties\nSwitch to ssh/sftp service",
    "This bug may be caused because the wizard assumes that all properties are\ninstances of ServerLauncherPropertiesServiceElement, failing to cast other properties to this class.\nThe patch provided solves it:\n\n\n### Eclipse Workspace Patch 1.0 \n#P org.eclipse.rse.ui \nIndex: UI/org/eclipse/rse/ui/wizards/SubSystemServiceWizardPage.java \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d \nRCS file: /cvsroot/dsdp/org.eclipse.tm.rse/plugins/org.eclipse.rse.ui/UI/org/eclipse/rse/ui/wizards/SubSystemServiceWizardPage.java,v \nretrieving revision 1.11 \ndiff -u -r1.11 SubSystemServiceWizardPage.java \n--- UI/org/eclipse/rse/ui/wizards/SubSystemServiceWizardPage.java        3 Jan 2007 18:58:07 -0000        1.11 \n+++ UI/org/eclipse/rse/ui/wizards/SubSystemServiceWizardPage.java        9 Feb 2007 16:19:04 -0000 \n@@ -166,8 +166,11 @@ \n                                                         ServiceElement[] cch \u003d child.getChildren(); \n                                                         if (cch !\u003d null \u0026\u0026 cch.length \u003e 0) \n                                                         { \n-                                                                ServerLauncherPropertiesServiceElement result \u003d (ServerLauncherPropertiesServiceElement)cch[0]; \n-                                                                results.add(result); \n+                                                                if(cch[0] instanceof ServerLauncherPropertiesServiceElement) \n+                                                                { \n+                                                                        ServerLauncherPropertiesServiceElement result \u003d (ServerLauncherPropertiesServiceElement)cch[0]; \n+                                                                        results.add(result); \n+                                                                } \n                                                         } \n                                                 } \n                                         } ",
    "For some reason, I\u0027m unable to apply this patch.  Eclipse thinks it\u0027s invalid.  Is there anything in the text that may be off?",
    "Created an attachment (id\u003d58783)\nPatch \n\nThe patch attached should be the same as above. \nPossibly there was an issue with the ending of lines in the previous version.",
    "I\u0027ve applied the patch.",
    "The patch fixes setting the value during the \"New System Type\" wizard.\nIf the value is changed as specified in the initial message (the patch is already in CVS) , once the FTP subsystem is created, the AssertionFailedException is still being raised.\n\nIt is only raised the 1st time the value is changed (in later attempts, there\u0027s no exceptions), but the change is correctly applied, so the FTP service behaves as expected setting on and off the passive mode.\n\nThe error message is annoying and can cause confusion to the final user. I tried to debug it but I couldn\u0027t manage to find where the new values were applied.\nDo you have any idea of where this code could be found ?",
    "If the message is an AssertionFailedException, it may help setting a Java Exception Breakpoint on it and the reproduce the issue. Will allow you to step down the stack and see variables in each stack frame.",
    "Here\u0027s the thread stack after the exception being raised, I can\u0027t see any RSE class being directly involved, possibly DavidM might know what\u0027s causing the issue:\n\nThread [main] (Suspended (exception AssertionFailedException))\t\n\tAssert.isNotNull(Object, String) line: 84\t\n\tAssert.isNotNull(Object) line: 72\t\n\u003e\u003e\u003e\tRefactoringHistoryService.hasSharedRefactoringHistory(IProject) line:594\t\n\tRefactoringPropertyPage.performOk() line: 404\t\n\tPreferenceDialog$11.run() line: 889\t\n\tSafeRunner.run(ISafeRunnable) line: 37\t\n\tPlatform.run(ISafeRunnable) line: 843\t\n\tJFaceUtil$1.run(ISafeRunnable) line: 44\t\n\tSafeRunnable.run(ISafeRunnable) line: 149\t\n\tPropertyDialog(PreferenceDialog).okPressed() line: 869\t\n\tPropertyDialog(FilteredPreferenceDialog).okPressed() line: 377\t\n\tPropertyDialog(PreferenceDialog).buttonPressed(int) line: 230\t\n\tDialog$3.widgetSelected(SelectionEvent) line: 660\t\n\tTypedListener.handleEvent(Event) line: 90\t\n\tEventTable.sendEvent(Event) line: 66\t\n\tButton(Widget).sendEvent(Event) line: 928\t\n\tDisplay.runDeferredEvents() line: 3348\t\n\tDisplay.readAndDispatch() line: 2968\t\n\tPropertyDialog(Window).runEventLoop(Shell) line: 820\t\n\tPropertyDialog(Window).open() line: 796\t\n\tPropertyDialogAction.run() line: 156\t\n\tPropertyDialogAction(Action).runWithEvent(Event) line: 499\t\n\tActionContributionItem.handleWidgetSelection(Event, boolean) line: 539\t\n\tActionContributionItem.access$2(ActionContributionItem, Event, boolean) line: 488\t\n\tActionContributionItem$5.handleEvent(Event) line: 400\t\n\tEventTable.sendEvent(Event) line: 66\t\n\tMenuItem(Widget).sendEvent(Event) line: 928\t\n\tDisplay.runDeferredEvents() line: 3348\t\n\tDisplay.readAndDispatch() line: 2968\t\n\tWorkbench.runEventLoop(Window$IExceptionHandler, Display) line: 1914\t\n\tWorkbench.runUI() line: 1878\t\n\tWorkbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 419\t\n\tPlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 149\t\n\tIDEApplication.run(Object) line: 95\t\n\tPlatformActivator$1.run(Object) line: 78\t\n\tEclipseAppLauncher.runApplication(Object) line: 92\t\n\tEclipseAppLauncher.start(Object) line: 68\t\n\tEclipseStarter.run(Object) line: 400\t\n\tEclipseStarter.run(String[], Runnable) line: 177\t\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]\t\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: not available\t\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available\t\n\tMethod.invoke(Object, Object[]) line: not available\t\n\tMain.invokeFramework(String[], URL[]) line: 336\t\n\tMain.basicRun(String[]) line: 280\t\n\tMain.run(String[]) line: 977\t\n\tMain.main(String[]) line: 952\t\n",
    "This exception is due to an Eclipse bug where the Refactoring History property page contributes itself to everything.  Eclipse already has bugzilla entries for this.  Kushal, do you remember what the bug numbers are?",
    "The Refactoring History thing is documented in\nhttp://wiki.eclipse.org/index.php/RSE_1.0_Known_Issues_and_Workarounds\n\nIt is bug 154735 but should have been fixed with Eclipse 3.3 M4 (and I haven\u0027t seen it myself since 3.3 M4). \n\nJavier, what version of Eclipse are you testing with? Please upgrade to 3.3 M5.",
    "Since this is an eclipse problem that should be fixed already I\u0027m marking this as fixed. "
  ],
  "commentCreationDates": [
    "2007-02-08T19:47:23+01:00",
    "2007-02-09T09:59:32+01:00",
    "2007-02-09T11:17:02+01:00",
    "2007-02-09T11:58:56+01:00",
    "2007-02-09T16:45:41+01:00",
    "2007-02-12T16:37:49+01:00",
    "2007-02-12T16:49:36+01:00",
    "2007-02-12T17:49:15+01:00",
    "2007-02-15T16:41:40+01:00",
    "2007-02-15T16:46:19+01:00",
    "2007-02-15T16:54:33+01:00",
    "2007-02-15T17:16:35+01:00",
    "2007-02-15T17:33:11+01:00",
    "2007-02-16T14:45:58+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.AssertionFailedException",
      "message": "null argument:",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isNotNull",
          "source": "Assert.java:84"
        },
        {
          "method": "org.eclipse.core.runtime.Assert.isNotNull",
          "source": "Assert.java:72"
        },
        {
          "method": "org.eclipse.ltk.internal.core.refactoring.history.RefactoringHistoryService.hasSharedRefactoringHistory",
          "source": "RefactoringHistoryService.java:594"
        },
        {
          "method": "org.eclipse.ltk.internal.ui.refactoring.history.RefactoringPropertyPage.performOk",
          "source": "RefactoringPropertyPage.java:404"
        },
        {
          "method": "org.eclipse.jface.preference.PreferenceDialog$11.run",
          "source": "PreferenceDialog.java:889"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "173523",
      "date": "2007-02-08T19:47:23+01:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "173523",
  "bugId": "173523",
  "date": "2007-02-08T19:47:23+01:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}