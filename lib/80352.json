{
  "comments": [
    "I have recently moved from using PDE build to generate build scripts for Eclipse 2.1.\n3 plugins to Eclipse 3 plugins. The PDE build successfully generates scripts for \nEclipse 2.1.3 but for Eclipse 3 I have run into a range of problems.\n\nWhen generating scripts, I unzip a Eclipse SDK and create a virgin installation. I \nalso use a separate workspace directory when during the script generation.\n\n\nThe following parameters when starting the antRunner to build scripts. This \neventually calls the genericTargets.xml file in org.eclipse.pde.build_3.0.1 plugin.\n\nThe parameters are:\n\ntype\u003dfeature\nid\u003dcom.enigmatec.ems.workbench-feature\nbuildDirectory\u003d/home/chrisk/development2/branch/RIFBuild/build/RIFWorkbench/install\nconfigInfo\u003dlinux,gtk,x86\nbaseLocation\u003d/home/chrisk/development2/branch/RIFBuild/eclipseInstall/eclipse\nbuildingOSGi\u003dtrue\n\nFor Eclipse 3.0.1, I get the following error when looking at the .log file from my \nworkspace.\n\n\n!SESSION Dec 07, 2004 09:34:04.407 ---------------------------------------------\neclipse.buildId\u003dM200409161125\njava.version\u003d1.4.2_06\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dunknown, ARCH\u003dx86, WS\u003dunknown, NL\u003den_GB\nCommand-line arguments: -application org.eclipse.ant.core.antRunner -buildfile /home/\nchrisk/development2/branch/RIFBuild/build/RIFWorkbench/createBuildScripts.xml \n\n....\n\n!ENTRY org.eclipse.osgi Dec 07, 2004 09:34:04.407\n!MESSAGE An unexpected runtime error has occurred.\n!STACK 0\njava.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Listener\n\tat org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions(AbstractUIPlugin.\njava:804)\n\tat org.eclipse.ui.plugin.AbstractUIPlugin$4.bundleChanged(AbstractUIPlugin.java:918)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.\ndispatchEvent(BundleContextImpl.java:1151)\n\tat org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:\n186)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:104)\n\nIt doesn\u0027t matter if I put the swt libraries on the classpath and set up the java.\nlibrary.path to point to the .so files in the swt plugin. I always get the same \nerror.\n\nI thought this  may be a bug so I\u0027ve moved up to Eclipse 3.1M3 without changes any \nparameters to start ant runner. This time I get a different error. \n\n\n!SESSION 2004-12-07 07:22:23.598 -----------------------------------------------\neclipse.buildId\u003dI200411050810\njava.version\u003d1.4.2_06\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dmotif, NL\u003den_GB\nCommand-line arguments: -application org.eclipse.ant.core.antRunner -buildfile /home/\nchrisk/development2/branch/RIFBuild/../RIFBuild/build/RIFWorkbench/\ncreateBuildScripts.xml \n\n...\n\n!ENTRY org.eclipse.osgi 2004-12-07 07:22:23.599\n!MESSAGE An error occured while automatically activating bundle org.eclipse.ui.\nworkbench (40).\n!STACK 0\norg.osgi.framework.BundleException: The activator org.eclipse.ui.internal.\nWorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.\nloadBundleActivator(AbstractBundle.java:158)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.\nstart(BundleContextImpl.java:933)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:\n421)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.\njava:293)\n\tat org.eclipse.core.runtime.adaptor.EclipseClassLoader.\nfindLocalClass(EclipseClassLoader.java:110)\n\n\nI confused at how the BootLoader constants are worked out. I specifically set the \nconfiguration to be linux,gtk,x86 but as you can\nwhen using Eclipse 3.0.1, I get:\nBootLoader constants: OS\u003dunknown, ARCH\u003dx86, WS\u003dunknown, NL\u003den_GB\n\nwhereas for Eclipse 3.1M3 I get \nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dmotif, NL\u003den_GB\n\n\nThis is puzzling since I get ws\u003dmotif or unknown even though I\u0027m building on a linux \nbox with gtk. Could this be causing problems?\n\nIs this a bug as this automated build process was working prior to moving to Eclipse \n3?",
    "Could you please post the createBuildScripts.xml.",
    "I have a main build file which calls the createBuildScripts.xml build file. The\ncalling ANT script is as follows:\n\n\u003cproperty name\u003d\"launcher\" value\u003d\"org.eclipse.core.launcher.Main\"/\u003e        \n\u003cavailable property\u003d\"buildfile.present\" file\u003d\"${build-file}\"/\u003e\n\u003cproperty name\u003d\"eclipse_home\" value\u003d\"${eclipse.install.dir}/eclipse\"/\u003e\n\n\u003cmkdir dir\u003d\"${data-dir}\"/\u003e\n\n\u003cjava classname\u003d\"${launcher}\" fork\u003d\"true\" dir\u003d\"${eclipse-home}\" failonerror\u003d\"true\" \u003e\n    \u003cclasspath\u003e\n        \u003cpathelement location\u003d\"${eclipse-home}/startup.jar\"/\u003e\n    \u003c/classpath\u003e\n    \u003carg line\u003d\"-application org.eclipse.ant.core.antRunner\"/\u003e\n    \u003carg line\u003d\"-buildfile ${build-file}\"/\u003e\n    \u003carg line\u003d\"-data ${data-dir}\"/\u003e\n    \u003carg line\u003d\"-logger org.apache.tools.ant.XmlLogger\"/\u003e\n    \u003carg line\u003d\"-logfile\n${rif.projects.dir}/RIFBuild/${build.workbench}/logs/generateBuildScripts.log\" /\u003e\n    \u003carg line\u003d\"-DeclipsePluginPath\u003d${eclipsePluginPath}\"/\u003e\n    \u003carg line\u003d\"-Declipse_home\u003d${eclipse-home}\"/\u003e\n    \u003carg line\u003d\"-Djava.library.path\u003d${java.lib.path}\"/\u003e\n    \u003carg line\u003d\"-Dconfigs\u003dlinux,gtk,x86\"/\u003e\n    \u003carg line\u003d\"-debug\"/\u003e\n    \u003carg line\u003d\"-noupdate\"/\u003e\n    \u003cjvmarg line\u003d\"${vmargs}\"/\u003e\n\u003c/java\u003e\n\n\nThis calls a createBuildScript.xml file that eventually calls the\ngenericTargets.xml file I copied from org.eclipse.pde.build_3.0.1/scripts/\n\n\n        \u003cant antfile\u003d\"${basedir}/buildscripts/genericTargets.xml\" \n            target\u003d\"generateScript\" \n            inheritAll\u003d\"true\"\u003e\n            \n            \u003cproperty name\u003d\"type\" value\u003d\"feature\"/\u003e\n            \u003cproperty name\u003d\"id\" value\u003d\"${ems.feature}\"/\u003e\n            \u003cproperty name\u003d\"buildDirectory\" value\u003d\"${install}\"/\u003e\n            \u003cproperty name\u003d\"configs\" value\u003d\"${configs}\"/\u003e\n            \u003cproperty name\u003d\"baseLocation\" value\u003d\"${eclipse_home}\"/\u003e            \n            \u003cproperty name\u003d\"buildingOSGi\" value\u003d\"true\"/\u003e\n        \u003c/ant\u003e\n\nIn the genericTargets.xml file, this just calls the eclipse.buildscript as usual\n\n\u003ceclipse.buildScript \n\t\telements\u003d\"${type}@${id}\" \n\t\tbuildDirectory\u003d\"${buildDirectory}\"\n\t\tconfigInfo\u003d\"${configs}\"\n\t\tbaseLocation\u003d\"${baseLocation}\"\n\t\tbuildingOSGi\u003d\"${buildingOSGi}\"\n        install\u003d\"${baseLocation}\"\n\t/\u003e \n\n\nThere is definitely something wrong with using ANT to generate the build scripts\nas I can highlight the feature from my Eclipse workbench and generate the build\nscript manually for the feature. This generates the build file for the feature\nitself and its plugins but I need to do this automatically since this is part of\nour continious integration process.",
    "Created an attachment (id\u003d16447)\nFeature xml file \n\nAdded feature.xml file for feature I\u0027m trying to generate build scripts for",
    "I have created a simple feature and plugin to test generation of scripts from the \ncommand line.\n\nI get the same error indicating the swt listener class cannot be found\nie. \njava.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Listener.\n\nI then amended the script using the java.library.path to point to the swt so \nfiles in the swt plugin. I\u0027ve also appended the swt jars to the bootclasspath\n\nWhen I reran the script I get the following error.\n\njava.lang.UnsatisfiedLinkError: no swt-pi-gtk-3063 in java.library.path\n\n\nI\u0027ve tried this with a feature that builds a plugin with a SWT form using the \nEclipse wizard and repeated with an empty plugin. I get the same errors each \ntime.\n\nI\u0027ve attached the scripts and the log files for your perusal\n\n\n\njava.lang.UnsatisfiedLinkError: no swt-pi-gtk-3063 in java.library.path",
    "Created an attachment (id\u003d16506)\nShell file to kick of script generation from command line\n",
    "Created an attachment (id\u003d16507)\nThe log file of workspace used in build script generation indicating swt so\ncannot be found\n",
    "The build.xml you are running is making use of an ant task defined in PDE UI, which therefore triggers \nPDE UI start and the problem you are seeing. This is normal. The build.xml that PDE UI allows you to \nsave can only be reused in the IDE.\n\nThe task being shows in the stack trace:\n\tat \norg.eclipse.pde.internal.build.tasks.BuildScriptGeneratorTask.execute(BuildScriptGeneratorTask.java:71)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)",
    "I\u0027m perplexed. All I want to do is generate build scripts for some UI plugins\nusing ANT so I can build them automatically through ANT. Are you saying that I\ncan\u0027t build UI plugins using PDE build process\n\ni.e. \u003ceclipse.buildScript\u003e ANT target.\n\nWhat is the solution or what has changed since this worked with Eclipse 2.1.3?",
    "PDE supports building UI based plugins. The eclipse release engineering team\nuses this very mechanism to build VE, GEF, ... and of course Eclipse itself.\n\nThe class not found error does not designate a problem in what you are building\nbut in the builder itseft which is why I suspected a problem in one of your\nscript. When looking at the stack trace I can\u0027t understand what could trigger\nthe startup of PDE UI, unless a reference to one of their task.\n\nI suggest you to look at the following document:\nhttp://dev.eclipse.org/viewcvs/index.cgi/~checkout~/pde-build-home/articles/Automated%20Builds/article.html?rev\u003dHEAD\u0026content-type\u003dtext/html"
  ],
  "commentCreationDates": [
    "2004-12-07T10:14:30+01:00",
    "2004-12-07T20:46:47+01:00",
    "2004-12-08T09:05:25+01:00",
    "2004-12-08T09:07:08+01:00",
    "2004-12-09T22:51:21+01:00",
    "2004-12-09T22:58:20+01:00",
    "2004-12-09T23:00:15+01:00",
    "2005-01-07T05:05:37+01:00",
    "2005-01-07T11:22:26+01:00",
    "2005-01-07T16:40:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/swt/widgets/Listener",
      "elements": [
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions",
          "source": "AbstractUIPlugin. java:804"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin$4.bundleChanged",
          "source": "AbstractUIPlugin.java:918"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent",
          "source": "BundleContextImpl.java:1151"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent",
          "source": "EventManager.java: 186"
        },
        {
          "method": "org.eclipse.osgi.framework.eventmgr.EventThread.run",
          "source": "EventThread.java:104"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "80352",
      "date": "2004-12-07T10:14:30+01:00",
      "product": "PDE",
      "component": "Build",
      "severity": "major"
    },
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "The activator org.eclipse.ui.internal. WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator",
          "source": "AbstractBundle.java:158"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:933"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java: 421"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "AbstractBundle. java:293"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass",
          "source": "EclipseClassLoader.java:110"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "80352",
      "date": "2004-12-07T10:14:30+01:00",
      "product": "PDE",
      "component": "Build",
      "severity": "major"
    }
  ],
  "groupId": "80352",
  "bugId": "80352",
  "date": "2004-12-07T10:14:30+01:00",
  "product": "PDE",
  "component": "Build",
  "severity": "major"
}