{
  "comments": [
    "The user should be able to start an application in profiling mode and select on\nthe launch configuration an option for \u0027attaching later\u0027 - which means the\nagent is running but no data is collected until the user selects start\nmonitoring. \n\nThe impl involves \nModifying the Launch UI to allow \"Auto Attach\" \n\nImplementing the check in the underlying code to check for \"Auto Attach\" and do accordingly.",
    "The UI will be modified by Liz and the underlying TI Launch Delegate will be modified by ALexander.",
    "Liz,\n Alexander is on vacation this week and will be back in the office on Monday - July 2nd. ALexander and You can sync up on this and work together.",
    "Guru,\n\nAm I correct in thinking about this as an option under the Edit Options dialog for each profiling type? For example, have \u0027Auto Attach \u0027 and \u0027Attach Later\u0027 with descriptions of each, and Auto Attach selected by default.",
    "IMO, The Auto-Attach option should be part of the data collector options, and select as default. \n",
    "Agree with Eugene. This ought to be a common for all the analysis types.",
    "Created an attachment (id\u003d72970)\nPatch for the UI\n\nI am attaching a patch which uses the existing Limits Dialog (called by double clicking on the root of the analysis types (Java 1.5 and above) or selecting the root and then selecting Edit Options. This is the second page after the Filters dialog and for the TI case it only contians the option to \u0027Automatically start monitoring when the application is launched\u0027. This is selected by default. Eventually we will want to share this dialog when we have support for the different limits that are supported in PI. At that point I can refactor the code so it follows the path taken by the shared filterPage (reuse the dialog instead of two implementations).\n\nThe important part here is that I am storing it as an attribute for the launch configuration. Alex, please let me know if any additional changes are required to synch with your implementation.",
    "Liz, \"Limits\" page appear only at \"External Java Application\" and \"Attach to Agent\" configuration. ",
    "Thanks Alex, I will fix it so it shows up for all supported profiling types.",
    "Created an attachment (id\u003d73032)\nPatch for UI (Updated)\n\nHere is the patch which will add this dialog for all launch configuration types.",
    "Liz, could you restore this argument from launchConfiguration when reopen page?\nEvery time page opens with checked box, even if it was unchecked in current configuration.\nThanks.",
    "Created an attachment (id\u003d73113)\nPatch with re-load from launch config\n\nHi Alex, \nDone. Please see latest attached patch.",
    "Please continue follow up for this defect with Eugene as I am away starting this afternoon, returning Tuesday.",
    "Created an attachment (id\u003d73132)\nPrev patch + pause after start\n\nJust pause monitoring after start and small delay",
    "Ruslan, could you review the last path",
    "I mean the last patch. ",
    "The patch looks good.\nNote however that the \u0027Disable auto attach\u0027 implementation:\n\tif (!isStartMonitoring) {\n\t\tThread.sleep(3000);\n\t\tagentStateModifier.pauseMonitoring();\n\t}\ncauses some data to be collected during 3 seconds before application is really paused.\n",
    "Liz,\n\nI have got following error:\n\njava.lang.NullPointerException\n\tat org.eclipse.tptp.trace.ui.internal.launcher.application.LimitsConfigurationPage.getAttributes(LimitsConfigurationPage.java:127)\n\tat org.eclipse.tptp.trace.ui.internal.launcher.application.AbstractConfiguration.getAttributes(AbstractConfiguration.java:89)\n\tat org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.addAttributes(AttachDelegate.java:298)\n\tat org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.retrieveOptions(AttachDelegate.java:238)\n\tat org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.attachToAgents(AttachDelegate.java:166)\n\tat org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.launch(AttachDelegate.java:139)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:766)\n\tat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:608)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:899)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin$7.run(DebugUIPlugin.java:1102)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\nTest case:\n run RAC and use attach configuration to profile e.g.:\njava -agentlib:JPIBootLoader\u003dJPIAgent:server\u003denabled;ThreadProf -cp ... java2d.Java2Demo\n\n",
    "Created an attachment (id\u003d73206)\npatch\n\nPatch that fix the last reported problem.\n\nHowever, the Runtime side is still not working. Even Process is shown as attach and not monitor, profiling data are still collected and shown in view.",
    "Also I agree with Ruslan on the sleeping thread. Timing delay is not a reliable solution and it may fail on some machine.\nAlso the UI show weird behavior upon launch and attach, the process will first shown as attach and monitor and after a certain delay it\u0027s refresh and shown as attach and not monitor. This can confuse user as they may expect startup code being collected(as it\u0027s shown as monitor) but actually it is not.\n\nIn the PI use case, agent is created and shown as attached and not monitored until user\u0027s explicit action to change its state.",
    "Alex, please take a look at problem mentioned in comment #16 to #19",
    "Created an attachment (id\u003d73327)\nPatch with solution for attach scenario\n\nCode in TIAttachLauncherDelegate for tiAgent run and resume seems to be redundant, but I keep it to reduce risk at this stage.",
    "Created an attachment (id\u003d73331)\nPatch with solution for attach scenario\n\nCode in TIAttachLauncherDelegate for tiAgent run and resume seems to be\nredundant, but I keep it to reduce risk at this stage.\n\nRuntime doesn\u0027t allow to run profiling with paused collecting, so to to start and  then pause collecting is the only one solution which can be implemented just in workbench without runtime modification. ",
    "Alex, Is there any defect opened to track the runtime side requirement? ",
    "Eugene, there is no separated defect with required enhancements in runtime. ",
    "Would you please open a defect to track the runtime requirement to properly support run profiling with paused collecting? The collection of the startup code in TI is different from PI use cases.",
    "(In reply to comment #25)\nEugene,\n\nWe will spend additional time tomorrow to figure out all the details, and will open an appropriate Bugzilla if needed.\n",
    "The Disabling of auto attach requires the Agent to be started and once the VM is initialized to be paused for data collection. But for certain applications where the start up time is excessive the VM is not initialized, the \"Disabling of auto attach\" is ignored. The correct approach is for the agent to notify the client on VM Init so that the needed command can be processed. \nThe sizing of the additional work is being looked into at this time. \nGiven the time for 4.4.0.1 this has to come in post 4.4.0.1\n",
    "Triaging 4.4.0.2 candidate defects for Joanna.  \n\nThis is a 4.4.0.2 candidate defect since deferred from 4.4.0.1 and a patch is attached.\n\nAlexander, please target to 4.4.0.2 when the field is available and provide a\nsizing.",
    "Cannot be contained in 4402",
    "Created an attachment (id\u003d76911)\nPatch\n\nGuru, please review patch.\n\nTwo files were added to ThreadProf.\nNew design of interaction between TI agent and WB was implemented.\nPatch also solves Bug 191809, Bug 196198",
    "Patch checked in",
    "Guru, have you tested the patch in comment #30 with Comment #18? You need both patches for UI and runtime side support?",
    "(From update of attachment 73206)\nThe patch is obsolete ",
    "The UI and runtime are both checked.",
    "Alexander,\n  All the patches are in - pls reopen if the issue is still unresolved."
  ],
  "commentCreationDates": [
    "2007-06-29T19:16:42+02:00",
    "2007-06-29T19:17:35+02:00",
    "2007-06-29T19:21:10+02:00",
    "2007-07-03T15:39:13+02:00",
    "2007-07-03T16:50:59+02:00",
    "2007-07-03T17:10:01+02:00",
    "2007-07-03T18:58:35+02:00",
    "2007-07-04T14:14:01+02:00",
    "2007-07-04T15:13:25+02:00",
    "2007-07-04T17:03:59+02:00",
    "2007-07-05T15:25:08+02:00",
    "2007-07-05T15:52:32+02:00",
    "2007-07-05T16:25:17+02:00",
    "2007-07-05T17:57:06+02:00",
    "2007-07-06T08:34:53+02:00",
    "2007-07-06T08:38:29+02:00",
    "2007-07-06T12:40:52+02:00",
    "2007-07-06T14:34:58+02:00",
    "2007-07-06T18:10:12+02:00",
    "2007-07-06T18:16:32+02:00",
    "2007-07-09T16:33:43+02:00",
    "2007-07-09T16:51:31+02:00",
    "2007-07-09T17:06:20+02:00",
    "2007-07-09T17:30:16+02:00",
    "2007-07-09T17:47:27+02:00",
    "2007-07-09T18:12:49+02:00",
    "2007-07-09T20:20:24+02:00",
    "2007-07-10T16:32:35+02:00",
    "2007-07-16T15:00:54+02:00",
    "2007-08-03T20:10:40+02:00",
    "2007-08-24T17:32:29+02:00",
    "2007-08-24T19:29:02+02:00",
    "2007-08-24T19:44:14+02:00",
    "2007-08-24T22:24:54+02:00",
    "2007-08-24T22:27:54+02:00",
    "2007-09-01T00:12:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.tptp.trace.ui.internal.launcher.application.LimitsConfigurationPage.getAttributes",
          "source": "LimitsConfigurationPage.java:127"
        },
        {
          "method": "org.eclipse.tptp.trace.ui.internal.launcher.application.AbstractConfiguration.getAttributes",
          "source": "AbstractConfiguration.java:89"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.addAttributes",
          "source": "AttachDelegate.java:298"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.retrieveOptions",
          "source": "AttachDelegate.java:238"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.attachToAgents",
          "source": "AttachDelegate.java:166"
        },
        {
          "method": "org.eclipse.hyades.trace.ui.internal.launcher.AttachDelegate.launch",
          "source": "AttachDelegate.java:139"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:766"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:608"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:899"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin$7.run",
          "source": "DebugUIPlugin.java:1102"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 17,
      "bugId": "194939",
      "date": "2007-07-06T14:34:58+02:00",
      "product": "TPTP Profiling",
      "component": "Platform.Agents.JVMTI",
      "severity": "critical"
    }
  ],
  "groupId": "194939",
  "bugId": "194939",
  "date": "2007-06-29T19:16:42+02:00",
  "product": "TPTP Profiling",
  "component": "Platform.Agents.JVMTI",
  "severity": "critical"
}