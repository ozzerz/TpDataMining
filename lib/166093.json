{
  "comments": [
    "Build: I20061121-1845\nVM: IBM 1.5 SR3\n\n1) Opened a class file editor in java.util.Arrays\n2) Selected a private static method in the outline view:\n\n  private static \u003cT\u003e T[] cloneSubarray(T[] a, int from, int to)\n\n3) Hit Ctrl+Shift+G to start global search for references.\n\nAn internal error dialog opens (NPE shown below). This is consistently reproducible for me.\n\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference(MethodLocator.java:339)\n\tat org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchReportReference(PatternLocator.java:407)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2058)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2464)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching(MatchLocator.java:2211)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.process(MatchLocator.java:1558)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1042)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1083)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1204)\n\tat org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:94)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:219)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:504)\n\tat org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:549)\n\tat org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run(JavaSearchQuery.java:143)\n\tat org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(InternalSearchUI.java:94)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Created an attachment (id\u003d54766)\nProposed patch\n\nThis patch fixes the NPE which happen when method binding is not valid, but also test case where JRE 1.5.0 is attached to a project with 1.4 compliance (I guess this is your test case John, isn\u0027t it?).\n\nIt passes all JDT tests (CORE+UI) and also does not impact search performance tests on method references (resolved). It was necessary to verify this performance result as the fix is to look at class file version on each document where potential matches are found and use the compliance corresponding the highest version number found there to compile attached source...\n",
    "Philippe, do you think it would be an acceptable behavior?\n",
    "The project sources should still be compiled at the explicit project compliance level. If not, you would surface erasure matches which are going to be very misleading.\n\nAlso, semantics are changing across compliance levels, and could mean headaches in search results.",
    "(From update of attachment 54766)\nOther options to solve this is either to split documents bundle in several ones (one per source level), or, a better solution, directly extract method references from the class file itself instead of parsing the source again (bug 127442 is already opened for this second option).",
    "Yes, my case is projects targetting 1.4 runtime, but compiling against a 1.5 JRE.",
    "*** Bug 196923 has been marked as a duplicate of this bug. ***",
    "(In reply to comment #6)\n\u003e *** Bug 196923 has been marked as a duplicate of this bug. ***\n\u003e \n------- Comment #3 from frederic_fusier@fr.ibm.com  2007-07-18 08:29 -------\nCan you confirm that you\u0027re in the same context than bug 166093 (ie. targetting\n1.4 runtime but compiling against JRE 1.5 or 1.6)?\n\nNo, it is not the case: I am compiling agains 1.6, and targetting 1.6\n",
    "(In reply to comment #7)\n\u003e No, it is not the case: I am compiling agains 1.6, and targetting 1.6\n\u003e \nReopen bug 196923 as it sounds not to be a duplicate...\n",
    "*** Bug 196974 has been marked as a duplicate of this bug. ***",
    "*** Bug 196923 has been marked as a duplicate of this bug. ***",
    "Created an attachment (id\u003d74074)\nNew proposed patch\n\nAs the number of duplicate increase a lot, I think I will apply a minimal patch to avoid this NPE to occur.\n\nThe behavior is not really perfect as the found matches are potential but corresponds to the reality of the user context: 1.5 code is not valid with 1.4 compliance...\n\nUnfortunately, I wasn\u0027t able to find a test case with our Java Search tests context to reproduce this problem, so verifier will need to follow steps in comment 0 to verify that this bug is well fixed...\n",
    "Last patch released for 3.4M1 in HEAD stream.\n",
    "Verified for 3.4M1 using build I20070802-0800.",
    "Frederic, please backport to 3.3.1",
    "Patch released for 3.3.1 in R3_3_maintenance stream.\n",
    ".",
    "*** Bug 201109 has been marked as a duplicate of this bug. ***",
    "Verified for 3.3.1 using build M20070831-2000."
  ],
  "commentCreationDates": [
    "2006-11-28T18:43:43+01:00",
    "2006-11-30T09:56:35+01:00",
    "2006-11-30T09:57:47+01:00",
    "2006-11-30T11:21:07+01:00",
    "2006-11-30T11:38:14+01:00",
    "2006-11-30T15:07:09+01:00",
    "2007-07-18T14:28:18+02:00",
    "2007-07-18T14:45:02+02:00",
    "2007-07-18T15:29:08+02:00",
    "2007-07-18T18:14:27+02:00",
    "2007-07-18T18:15:55+02:00",
    "2007-07-18T18:21:42+02:00",
    "2007-07-19T17:10:39+02:00",
    "2007-08-03T15:43:50+02:00",
    "2007-08-09T17:19:51+02:00",
    "2007-08-09T18:46:23+02:00",
    "2007-08-09T18:46:55+02:00",
    "2007-08-25T10:34:25+02:00",
    "2007-09-03T15:04:11+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference",
          "source": "MethodLocator.java:339"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.PatternLocator.matchReportReference",
          "source": "PatternLocator.java:407"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2058"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2464"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:2211"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.process",
          "source": "MatchLocator.java:1558"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1042"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1083"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:1204"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches",
          "source": "JavaSearchParticipant.java:94"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches",
          "source": "BasicSearchEngine.java:219"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.search",
          "source": "BasicSearchEngine.java:504"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.search",
          "source": "SearchEngine.java:549"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run",
          "source": "JavaSearchQuery.java:143"
        },
        {
          "method": "org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run",
          "source": "InternalSearchUI.java:94"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166093",
      "date": "2006-11-28T18:43:43+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "166093",
  "bugId": "166093",
  "date": "2006-11-28T18:43:43+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}