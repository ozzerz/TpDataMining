{
  "comments": [
    "Build ID: eclipse-equinox-3.3.1.1\n\nSteps To Reproduce:\n1.Run equinox on top of an Application Server(AS)\n2.Create a bundle which uses AS\u0027s classes\n3.Run with 3.2.1 it works fine, run with 3.3.1.1 classes cannot be loaded\n\n\nMore information:\nConfiguration :\n\nosgi.contextClassLoaderParent\u003dfwk\nosgi.parentClassloader\u003dfwk\n\nException :\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleAct\nivator(AbstractBundle.java:141)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(Bund\nleContextImpl.java:970)\n        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(Bundl\neHost.java:346)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(Abstrac\ntBundle.java:260)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(Abstrac\ntBundle.java:252)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._st\nart(FrameworkCommandProvider.java:260)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.\nexecute(FrameworkCommandInterpreter.java:150)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(F\nrameworkConsole.java:291)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(Fra\nmeworkConsole.java:276)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(Framewo\nrkConsole.java:218)\n        at java.lang.Thread.run(Thread.java:595)\nCaused by: java.lang.NoClassDefFoundError\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct\norAccessorImpl.java:39)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC\nonstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at java.lang.Class.newInstance0(Class.java:350)\n        at java.lang.Class.newInstance(Class.java:303)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleAct\nivator(AbstractBundle.java:136)\n        ... 14 more\nNested Exception:\njava.lang.NoClassDefFoundError\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct\norAccessorImpl.java:39)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC\nonstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at java.lang.Class.newInstance0(Class.java:350)\n        at java.lang.Class.newInstance(Class.java:303)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleAct\nivator(AbstractBundle.java:136)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(Bund\nleContextImpl.java:970)\n        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(Bundl\neHost.java:346)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(Abstrac\ntBundle.java:260)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(Abstrac\ntBundle.java:252)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._st\nart(FrameworkCommandProvider.java:260)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.\nexecute(FrameworkCommandInterpreter.java:150)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(F\nrameworkConsole.java:291)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(Fra\nmeworkConsole.java:276)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(Framewo\nrkConsole.java:218)\n        at java.lang.Thread.run(Thread.java:595)\nNested Exception:\njava.lang.NoClassDefFoundError\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct\norAccessorImpl.java:39)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC\nonstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at java.lang.Class.newInstance0(Class.java:350)\n        at java.lang.Class.newInstance(Class.java:303)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleAct\nivator(AbstractBundle.java:136)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(Bund\nleContextImpl.java:970)\n        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(Bundl\neHost.java:346)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(Abstrac\ntBundle.java:260)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(Abstrac\ntBundle.java:252)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._st\nart(FrameworkCommandProvider.java:260)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.\nexecute(FrameworkCommandInterpreter.java:150)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(F\nrameworkConsole.java:291)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(Fra\nmeworkConsole.java:276)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(Framewo\nrkConsole.java:218)\n        at java.lang.Thread.run(Thread.java:595)\n\nonly when i use \"org.osgi.framework.bootdelegation\u003d*\" option, it is working fine otherwise, exceptions are thrown..",
    "Infact, even for JRE classes, class not found exception is thrown.",
    "Hi Avinash,\n\nOne of the changes from 3.2 to 3.3 is that boot delegation is no longer by default \"*\". This change brings Equinox in line with the OSGi spec however it can lead to problems as you\u0027re finding. If you really have no other choice then explicitly set org.osgi.framework.bootdegation \u003d *\n\nWith that said I would discourage both the use of \"fwk\" for the parent class loader and bootdelegation \u003d *. The problem here is that you can quite easily end up with nasy linkage errors when java packages form the application server and a bundle conflict. In addition you\u0027ll have a very tough time keeping your application portable between app servers since their implementations are quite different  classes they expose re implementations and subsequent classes exposed will differ.\n\nA better approach is to use \"ext\" or \"app\" and then explicitly export those java packages from the app server you want by using the \"extendedFrameworkExports\" in the servletbridge\u0027s web.xml file or else directly create your own framework extension bundles similar to org.eclipse.equinox.servletbridge.extensionbundle.\n\nre: your final comment \"even for JRE classes, class not found exception is thrown.\"\nThis is expected behaviour. All non java.* packages in your bundle should be imported regardless of if they come from the JRE or wherever. To date you\u0027ve only gotten away with this (probably inadvertently) because you have org.osgi.framework.bootdelegation \u003d * set.\n\nIf you have further questions you can ask them in the Equinox newsgroup.\n"
  ],
  "commentCreationDates": [
    "2007-11-03T05:19:09+01:00",
    "2007-11-03T09:01:37+01:00",
    "2007-11-04T04:46:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "elements": [
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance",
          "source": "NativeConstruct orAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "DelegatingC onstructorAccessorImpl.java:27"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Constructor.java:494"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:350"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:303"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator",
          "source": "AbstractBundle.java:136"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "208651",
      "date": "2007-11-03T05:19:09+01:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "elements": [
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance",
          "source": "NativeConstruct orAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "DelegatingC onstructorAccessorImpl.java:27"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Constructor.java:494"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:350"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:303"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator",
          "source": "AbstractBundle.java:136"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "Bund leContextImpl.java:970"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "Bundl eHost.java:346"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "Abstrac tBundle.java:260"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "Abstrac tBundle.java:252"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._start",
          "source": "FrameworkCommandProvider.java:260"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAcces sorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute",
          "source": "FrameworkCommandInterpreter.java:150"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand",
          "source": "F rameworkConsole.java:291"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.console",
          "source": "Fra meworkConsole.java:276"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.run",
          "source": "Framewo rkConsole.java:218"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "208651",
      "date": "2007-11-03T05:19:09+01:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "elements": [
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance",
          "source": "NativeConstruct orAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "DelegatingC onstructorAccessorImpl.java:27"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Constructor.java:494"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:350"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:303"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator",
          "source": "AbstractBundle.java:136"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "Bund leContextImpl.java:970"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "Bundl eHost.java:346"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "Abstrac tBundle.java:260"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "Abstrac tBundle.java:252"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._start",
          "source": "FrameworkCommandProvider.java:260"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAcces sorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute",
          "source": "FrameworkCommandInterpreter.java:150"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand",
          "source": "F rameworkConsole.java:291"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.console",
          "source": "Fra meworkConsole.java:276"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.run",
          "source": "Framewo rkConsole.java:218"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "208651",
      "date": "2007-11-03T05:19:09+01:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "208651",
  "bugId": "208651",
  "date": "2007-11-03T05:19:09+01:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}