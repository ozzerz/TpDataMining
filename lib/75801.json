{
  "comments": [
    "I200410050800\n\nAfter starting up I opened an editor and started the debugger. It switched to\nDebug perspective (in separate window). I then go an NPE an now I can no longer\nactivate any of my workbench windows (it simply beeps). I don\u0027t get a dialog. My\nwindows are full screen. When I click on another workbench window it brings back\nthe window with the Debug perspective and beeps.\n\nNote: the NPE does not happen in the WorkbenchUserAuthenticator so it might also\nbe an SWT issue.\n\nHere\u0027s the .log entry (find a VM dump afterwards):\n!SESSION Okt 07, 2004 16:24:27.483 ---------------------------------------------\neclipse.buildId\u003dI200410050800\njava.version\u003d1.4.2_05\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_CH\nCommand-line arguments: -update -keyring c:\\eclipse\\.keyring -application\norg.eclipse.ui.ide.workbench -showlocation\n\n!ENTRY org.eclipse.ui 4 4 Okt 07, 2004 16:24:27.483\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 Okt 07, 2004 16:24:27.483\n!MESSAGE Failed to execute runnable (java.lang.NullPointerException)\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable\n(java.lang.NullPointerException)\n\tat org.eclipse.swt.SWT.error(SWT.java:2696)\n\tat org.eclipse.swt.SWT.error(SWT.java:2621)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:111)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2761)\n\tat org.eclipse.swt.widgets.Display.msgFilterProc(Display.java:2250)\n\tat org.eclipse.swt.internal.win32.OS.TrackPopupMenu(Native Method)\n\tat org.eclipse.swt.widgets.Menu._setVisible(Menu.java:222)\n\tat org.eclipse.swt.widgets.Display.runPopups(Display.java:2810)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2437)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1443)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1414)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:271)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\n!ENTRY org.eclipse.ui 4 4 Okt 07, 2004 16:24:27.493\n!MESSAGE *** SWT nested exception\n\n!ENTRY org.eclipse.ui 4 0 Okt 07, 2004 16:24:27.493\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.swt.widgets.Control.isActive(Control.java:1116)\n\tat org.eclipse.swt.widgets.Shell.updateModal(Shell.java:1300)\n\tat org.eclipse.swt.widgets.Display.setModalShell(Display.java:3023)\n\tat org.eclipse.swt.widgets.Shell.setVisible(Shell.java:1247)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:804)\n\tat org.eclipse.jface.window.Window.open(Window.java:680)\n\tat\norg.eclipse.team.internal.ccvs.ui.WorkbenchUserAuthenticator.promptForPassword(WorkbenchUserAuthenticator.java:114)\n\tat\norg.eclipse.team.internal.ccvs.ui.WorkbenchUserAuthenticator.access$0(WorkbenchUserAuthenticator.java:106)\n\tat\norg.eclipse.team.internal.ccvs.ui.WorkbenchUserAuthenticator$1.run(WorkbenchUserAuthenticator.java:70)\n\tat org.eclipse.ui.internal.UILockListener.doPendingWork(UILockListener.java:145)\n\tat org.eclipse.ui.internal.UISynchronizer$1.run(UISynchronizer.java:36)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:108)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2761)\n\tat org.eclipse.swt.widgets.Display.msgFilterProc(Display.java:2250)\n\tat org.eclipse.swt.internal.win32.OS.TrackPopupMenu(Native Method)\n\tat org.eclipse.swt.widgets.Menu._setVisible(Menu.java:222)\n\tat org.eclipse.swt.widgets.Display.runPopups(Display.java:2810)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2437)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1443)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1414)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:271)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\n\nHere\u0027s a VM dump:\nC:\\eclipse\\drops\\I200410050800\u003eC:\\JavaSDKs\\jdk1.4.2_05\\bin\\java -showversion\n-Xms50M -Xmx350M -Dosgi.checkConfiguration\u003dtrue -cp startup.jar\norg.eclipse.core.launcher.\n.keyring -application org.eclipse.ui.ide.workbench -showlocation -data\nc:\\eclipse\\workspaces\\Development_2_2\\plugins\njava version \"1.4.2_05\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_05-b04)\nJava HotSpot(TM) Client VM (build 1.4.2_05-b04, mixed mode)\n\nUnhandled event loop exception\nReason:\nFailed to execute runnable (java.lang.NullPointerException)\n*** SWT nested exception\nReason:\njava.lang.NullPointerException\nFull thread dump Java HotSpot(TM) Client VM (1.4.2_05-b04 mixed mode):\n\n\"org.eclipse.jdt.internal.ui.text.JavaReconciler\" daemon prio\u003d2 tid\u003d0x033e33a8\nnid\u003d0xe4c in Object.wait() [4caf000..4cafd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x160d9c50\u003e (a\norg.eclipse.jface.text.reconciler.DirtyRegionQueue)\n        at\norg.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:176)\n        - locked \u003c0x160d9c50\u003e (a org.eclipse.jface.text.reconciler.DirtyRegionQueue)\n\n\"org.eclipse.jdt.internal.ui.text.JavaReconciler\" daemon prio\u003d2 tid\u003d0x032b1bb0\nnid\u003d0xd68 in Object.wait() [405f000..405fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x151ac808\u003e (a\norg.eclipse.jface.text.reconciler.DirtyRegionQueue)\n        at\norg.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:176)\n        - locked \u003c0x151ac808\u003e (a org.eclipse.jface.text.reconciler.DirtyRegionQueue)\n\n\"Worker-4\" prio\u003d5 tid\u003d0x031efb30 nid\u003d0xdf4 in Object.wait() [409f000..409fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n        - locked \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Worker-3\" prio\u003d5 tid\u003d0x0328c628 nid\u003d0xfbc in Object.wait() [401f000..401fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n        - locked \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Worker-2\" prio\u003d5 tid\u003d0x03243668 nid\u003d0x864 in Object.wait() [3fdf000..3fdfd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n        - locked \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Worker-1\" prio\u003d5 tid\u003d0x03244c20 nid\u003d0x7dc in Object.wait() [3f9f000..3f9fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n        - locked \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Reference Cleaner - 6\" prio\u003d7 tid\u003d0x02e45e08 nid\u003d0x108 in Object.wait()\n[3ecf000..3ecfd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x13740c30\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x13740c30\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at\norg.eclipse.jface.resource.ImageCache$ReferenceCleanerThread.run(ImageCache.java:161)\n\n\"Reference Cleaner - 5\" prio\u003d7 tid\u003d0x02e022f8 nid\u003d0x2e0 in Object.wait()\n[3e8f000..3e8fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x13740ca0\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x13740ca0\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at\norg.eclipse.jface.resource.ImageCache$ReferenceCleanerThread.run(ImageCache.java:161)\n\n\"Reference Cleaner - 4\" prio\u003d7 tid\u003d0x03041dc0 nid\u003d0xfb0 in Object.wait()\n[3e4f000..3e4fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x13740d10\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x13740d10\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at\norg.eclipse.jface.resource.ImageCache$ReferenceCleanerThread.run(ImageCache.java:161)\n\n\"Worker-0\" prio\u003d5 tid\u003d0x02e42598 nid\u003d0xb7c in Object.wait() [3e0f000..3e0fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n        - locked \u003c0x11df7bd0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Java indexing\" daemon prio\u003d4 tid\u003d0x02e42420 nid\u003d0x9d4 in Object.wait()\n[3dcf000..3dcfd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x12c75fd0\u003e (a\norg.eclipse.jdt.internal.core.search.indexing.IndexManager)\n        at java.lang.Object.wait(Object.java:429)\n        at\norg.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:345)\n        - locked \u003c0x12c75fd0\u003e (a\norg.eclipse.jdt.internal.core.search.indexing.IndexManager)\n        at java.lang.Thread.run(Thread.java:534)\n\n\"Reference Cleaner - 3\" prio\u003d7 tid\u003d0x02e31408 nid\u003d0xb3c in Object.wait()\n[3caf000..3cafd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x12c2ae08\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x12c2ae08\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at\norg.eclipse.jface.resource.ImageCache$ReferenceCleanerThread.run(ImageCache.java:161)\n\n\"Reference Cleaner - 2\" prio\u003d7 tid\u003d0x02dfcc20 nid\u003d0xf1c in Object.wait()\n[3c6f000..3c6fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x12c2ae78\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x12c2ae78\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at\norg.eclipse.jface.resource.ImageCache$ReferenceCleanerThread.run(ImageCache.java:161)\n\n\"Reference Cleaner - 1\" prio\u003d7 tid\u003d0x00a5ae68 nid\u003d0xb10 in Object.wait()\n[3c2f000..3c2fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x12c2aee8\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x12c2aee8\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at\norg.eclipse.jface.resource.ImageCache$ReferenceCleanerThread.run(ImageCache.java:161)\n\n\"Start Level Event Dispatcher\" daemon prio\u003d5 tid\u003d0x00a33b98 nid\u003d0x624 in\nObject.wait() [302f000..302fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11b6eb58\u003e (a\norg.eclipse.osgi.framework.eventmgr.EventThread)\n        at java.lang.Object.wait(Object.java:429)\n        at\norg.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:162)\n        - locked \u003c0x11b6eb58\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:100)\n\n\"Framework Event Dispatcher\" daemon prio\u003d5 tid\u003d0x02ee8aa8 nid\u003d0x8cc in\nObject.wait() [2fef000..2fefd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11b6ec90\u003e (a\norg.eclipse.osgi.framework.eventmgr.EventThread)\n        at java.lang.Object.wait(Object.java:429)\n        at\norg.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:162)\n        - locked \u003c0x11b6ec90\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:100)\n\n\"Signal Dispatcher\" daemon prio\u003d10 tid\u003d0x0003dc48 nid\u003d0xa9c waiting on condition\n[0..0]\n\n\"Finalizer\" daemon prio\u003d9 tid\u003d0x009c0e78 nid\u003d0xd24 in Object.wait()\n[2caf000..2cafd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11b0fe28\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked \u003c0x11b0fe28\u003e (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio\u003d10 tid\u003d0x009bfaf8 nid\u003d0x964 in Object.wait()\n[2c6f000..2c6fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on \u003c0x11b0fbd8\u003e (a java.lang.ref.Reference$Lock)\n        at java.lang.Object.wait(Object.java:429)\n        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)\n        - locked \u003c0x11b0fbd8\u003e (a java.lang.ref.Reference$Lock)\n\n\"main\" prio\u003d7 tid\u003d0x00035b70 nid\u003d0x484 runnable [7f000..7fc3c]\n        at org.eclipse.swt.internal.win32.OS.WaitMessage(Native Method)\n        at org.eclipse.swt.widgets.Display.sleep(Display.java:3089)\n        at\norg.eclipse.ui.application.WorkbenchAdvisor.eventLoopIdle(WorkbenchAdvisor.java:344)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1444)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1414)\n        at\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:271)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n        at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n        at org.eclipse.core.launcher.Main.run(Main.java:704)\n        at org.eclipse.core.launcher.Main.main(Main.java:688)\n\n\"VM Thread\" prio\u003d5 tid\u003d0x009fb730 nid\u003d0xec4 runnable\n\n\"VM Periodic Task Thread\" prio\u003d10 tid\u003d0x009fc470 nid\u003d0x36c waiting on condition\n\"Suspend Checker Thread\" prio\u003d10 tid\u003d0x0003d300 nid\u003d0xf78 runnable",
    "Moving to SWT since, even if CSV is doing something invalid, the affects \nshould not be as harsh as those described. Could SWT also comment on what CVS \nis doing wrong (I suspect that we are grabbing the current window before it is \nfully initialized).",
    "You are opening a window while a popup menu is active.  This seems to blow \nWindows mind.  I\u0027ll just construct a simple example to prove this ...",
    "It\u0027s got nothing to do with menus.  The problem is that you are creating a \nshell that is not a child of a modal shell.  This means that the shell cannot \nbe accessed.  Here is an example that (correctly) fails and beeps:\n\nimport org.eclipse.swt.*;\nimport org.eclipse.swt.widgets.*;\nimport org.eclipse.swt.layout.*;\n\npublic class PR_75801 {\npublic static void main (String [] args) {\n\tfinal Display display \u003d new Display ();\n\tint style \u003d SWT.SHELL_TRIM | SWT.APPLICATION_MODAL;\n\tShell shell \u003d new Shell (display, style);\n\tMenu menu \u003d new Menu (shell, SWT.POP_UP);\n\tMenuItem item \u003d new MenuItem (menu, SWT.PUSH);\n\titem.setText (\"Create and bring a window to the top that can\u0027t be \naccessed because of modality\");\n\tshell.setMenu (menu);\n\titem.addListener (SWT.Selection, new Listener () {\n\t\tpublic void handleEvent (Event event) {\n\t\t\tdisplay.asyncExec (new Runnable () {\n\t\t\t\tpublic void run () {\n\t\t\t\t\tShell shell \u003d new Shell (display);\n\t\t\t\t\tshell.setLayout (new FillLayout ());\n\t\t\t\t\tnew Button (shell, SWT.PUSH).setText \n(\"Button\");\n\t\t\t\t\tshell.pack ();\n\t\t\t\t\tshell.open ();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\tshell.pack ();\n\tshell.open ();\n\twhile (!shell.isDisposed ()) {\n\t\tif (!display.readAndDispatch ()) display.sleep ();\n\t}\n\tdisplay.dispose ();\n}\n}\n\nI looked into the null pointer and can\u0027t see how this can be happening.  If \nyou can recreate this every time, please reopen and change the title to \nindicate the null pointer problem in SWT.  Thanks.",
    "\u003eThe problem is that you are creating a \n\u003eshell that is not a child of a modal shell.\nShould this shell be created differently i.e. is there anything Team/CVS can do\nto fix this?",
    "If a shell is modal and you create a new shell that is not a child of the \nmodal shell, the new shell is blocked.  If the new shell is a child of the \nmodal shell, then the new shell will not be blocked.  So, you need to create \nthe new shell as a child of the modal shell.",
    "see comment 5",
    "I had a chat with Stephan and undertand where we were going wrong. We were \nparenting off the active workbench window which may cause problems if a modal \nshell is open. We need to parent off the active shell.",
    "Fix released to HEAD",
    "Reopening as this fix caused bug 80976. The problem is that I \nused \"display.getActiveShell()\" to get the active shell and this returns null \nif Eclipse is not the active application (e.g. the user is reading e-mail).\n\nIdeally, when a CVS connection attempt fails due to an athentication error, we \nwant to be able to prompt the user, even if Eclipse is not active. Before, we \nwere creating a shell off the workbench window which always allowed us to \nprompt but ran the risk of deadlock. We could use this as a fallback for when \nthe active shell is null but this may still cause a deadlock when the window \nis reactivated. Steve, can you comment on this?",
    "I have not been able to come up with a scenario that reproduces this. I think \nthe problem may be related to the NPE. However, the code we used to obtain a \nshell was using the workbench getActiveWindow which does not always return the \nactive shell. I have changed the code to parent off the active shell, if it is \navailable, or the display, if Eclipse is not active.",
    "Good luck.  Another approch would be to create a top level shell with \nSWT.APPLICATION_MODAL | SWT.DIALOG_TRIM.  Your new modal shell should trump \nthe existing modal shells.  We would need to ensure that it came to the front \nin scenarios where Eclipse had focus and another application had focus.  Also, \nnon-Windows platforms (platforms with window managers) can be a problem so \nwe\u0027d need to ensure this approach worked everywhere.",
    "I\u0027ll reopen and play around with Steve\u0027s suggestion in M5.",
    "UI now has support for this so I\u0027ve switch to using it."
  ],
  "commentCreationDates": [
    "2004-10-07T16:42:41+02:00",
    "2004-10-13T18:00:08+02:00",
    "2004-10-28T18:16:20+02:00",
    "2004-10-28T19:09:08+02:00",
    "2004-11-01T16:09:05+01:00",
    "2004-11-01T16:14:23+01:00",
    "2004-11-01T18:40:06+01:00",
    "2004-11-10T01:33:30+01:00",
    "2004-11-10T01:45:26+01:00",
    "2004-12-15T20:14:29+01:00",
    "2004-12-16T14:41:22+01:00",
    "2004-12-16T15:10:21+01:00",
    "2004-12-16T15:50:15+01:00",
    "2005-03-31T22:48:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2696"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2621"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:111"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2761"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.msgFilterProc",
          "source": "Display.java:2250"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.TrackPopupMenu",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Menu._setVisible",
          "source": "Menu.java:222"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runPopups",
          "source": "Display.java:2810"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2437"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1443"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1414"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:271"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "75801",
      "date": "2004-10-07T16:42:41+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.Control.isActive",
          "source": "Control.java:1116"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.updateModal",
          "source": "Shell.java:1300"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.setModalShell",
          "source": "Display.java:3023"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.setVisible",
          "source": "Shell.java:1247"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:804"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:680"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.WorkbenchUserAuthenticator.promptForPassword",
          "source": "WorkbenchUserAuthenticator.java:114"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.WorkbenchUserAuthenticator.access$0",
          "source": "WorkbenchUserAuthenticator.java:106"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.WorkbenchUserAuthenticator$1.run",
          "source": "WorkbenchUserAuthenticator.java:70"
        },
        {
          "method": "org.eclipse.ui.internal.UILockListener.doPendingWork",
          "source": "UILockListener.java:145"
        },
        {
          "method": "org.eclipse.ui.internal.UISynchronizer$1.run",
          "source": "UISynchronizer.java:36"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:108"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2761"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.msgFilterProc",
          "source": "Display.java:2250"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.TrackPopupMenu",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Menu._setVisible",
          "source": "Menu.java:222"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runPopups",
          "source": "Display.java:2810"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2437"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1443"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1414"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:271"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:704"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:688"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "75801",
      "date": "2004-10-07T16:42:41+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "critical"
    }
  ],
  "groupId": "75801",
  "bugId": "75801",
  "date": "2004-10-07T16:42:41+02:00",
  "product": "Platform",
  "component": "CVS",
  "severity": "critical"
}