{
  "comments": [
    "I20051122-1300\n\nUp to now Platform.getDebugOption(xxx) could be called without running as plug-in. Now this causes an NPE (see below).\n\nTest Case:\nLoad JFace Text and the JFace Text Tests from the repository. This will add a launch config (currently only working on Windows due to introduced qualifier). Run that config to get the NPE. If the JFaceTextTestSuite is launched as JUnit Plug-in Test then it works.\n\n\njava.lang.ExceptionInInitializerError\n\tat org.eclipse.jface.text.tests.rules.FastPartitionerTest.createPartitioner(FastPartitionerTest.java:57)\n\tat org.eclipse.jface.text.tests.rules.FastPartitionerTest.setUp(FastPartitionerTest.java:51)\n\tat junit.framework.TestCase.runBare(TestCase.java:125)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:478)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:344)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\nCaused by: java.lang.NullPointerException\n\tat org.osgi.util.tracker.ServiceTracker.\u003cinit\u003e(ServiceTracker.java:162)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.getDebugOptions(InternalPlatform.java:1081)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.getOption(InternalPlatform.java:454)\n\tat org.eclipse.core.runtime.Platform.getDebugOption(Platform.java:608)\n\tat org.eclipse.jface.text.rules.FastPartitioner.\u003cclinit\u003e(FastPartitioner.java:98)\n\t... 16 more",
    "Created an attachment (id\u003d30635)\nPatch for the org.eclipse.core.runtime\n\nI attached the patch that fixes the NPE. However, I am not quite sure if the org.eclipse.core.runtime is expected to be used in this mode.\n\nTo be able to run the jface.text.tests I had to unpack org.eclipse.swt_3.2.0.*.jar; copy the *.dll files from it into a directory in the workspace and add that directory to the java.library.path argument for this configuration.\n",
    "certainly not much of the Runtime plugin was intended to be used outside of OSGi.  Not sure what getDebugOption would do.\n\nHaving said that, it is a pretty reasonable request.  As a point of interest, Dani, what were you expecting to have happen?  That is, should there be actual debug options or should the various calls just return dummy values?",
    "\u003eAs a point of interest,\n\u003eDani, what were you expecting to have happen?  That is, should there be actual\n\u003edebug options or should the various calls just return dummy values?\nThe Javadoc of Platform.getDebugOption(xxx) does not explicitly say where the options come from and how they are/(can be) set. From knowing the plug-in model and how the options work I expected to get \u0027null\u0027 when not running as JUnit Plug-in Test. I can live with that but of course extended support for debug options would be nice too.",
    "Created an attachment (id\u003d30806)\nPatch for org.eclipse.core.runtime\n\nSupplied smaller patch that just fixes the specific problem experienced in this test. The problem with the previous \"broad\" solution was that it was not clear if some of the methods are actually allowed to return nulls.",
    "(From update of attachment 30806)\npatch applied",
    "Fix verified."
  ],
  "commentCreationDates": [
    "2005-11-23T17:29:07+01:00",
    "2005-11-25T20:14:02+01:00",
    "2005-11-28T03:46:24+01:00",
    "2005-11-28T10:44:29+01:00",
    "2005-11-29T20:20:50+01:00",
    "2005-11-30T14:42:53+01:00",
    "2005-12-11T16:04:44+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ExceptionInInitializerError",
      "elements": [
        {
          "method": "org.eclipse.jface.text.tests.rules.FastPartitionerTest.createPartitioner",
          "source": "FastPartitionerTest.java:57"
        },
        {
          "method": "org.eclipse.jface.text.tests.rules.FastPartitionerTest.setUp",
          "source": "FastPartitionerTest.java:51"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:125"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:478"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:344"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main",
          "source": "RemoteTestRunner.java:196"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.osgi.util.tracker.ServiceTracker.\u003cinit\u003e",
            "source": "ServiceTracker.java:162"
          },
          {
            "method": "org.eclipse.core.internal.runtime.InternalPlatform.getDebugOptions",
            "source": "InternalPlatform.java:1081"
          },
          {
            "method": "org.eclipse.core.internal.runtime.InternalPlatform.getOption",
            "source": "InternalPlatform.java:454"
          },
          {
            "method": "org.eclipse.core.runtime.Platform.getDebugOption",
            "source": "Platform.java:608"
          },
          {
            "method": "org.eclipse.jface.text.rules.FastPartitioner.\u003cclinit\u003e",
            "source": "FastPartitioner.java:98"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "117753",
      "date": "2005-11-23T17:29:07+01:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "major"
    }
  ],
  "groupId": "117753",
  "bugId": "117753",
  "date": "2005-11-23T17:29:07+01:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "major"
}