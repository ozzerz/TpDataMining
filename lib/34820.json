{
  "comments": [
    "ajc version: AspectJ Compiler DEVELOPMENT CVS build 20030311 20:00 GMT+1\n(This is probably a regression bug since it does not appear in ajc 1.1b4)\n\nWhen using the ajc -aspectpath option, the compiler crashes with a NPE. This\ndoes not occur when compiling without the -aspectpath option.\n\nTo reproduce:\nExtract the two files to en empty directory:\n//  File: A.aj\naspect A  {\n\n    pointcut withinTest(): within(Test);\n    pointcut callToHandleOrder() : \n       (cflow(withinTest()) \u0026\u0026 call(* *.handleOrder(..)));\n\n    Object around(): callToHandleOrder() {\n      return \"test\";\n    }\n// End of A.aj\n// File: Test.java\npublic class Test\n{\n    public static void main(String[] args)\n    {\n      System.out.println(new Test().handleOrder(\"test\")) ;\n    }\n    private String handleOrder(String t)\n    {\n      return t;\n    }\n\n}\n// End of Test.java\n\n2. Verify that the \"standard\" compile option works:\n\u003e ajc -sourceroots .\nNo errors are generated\n3.a Now try the -aspectpath options. I.e first put the A.aj in an aspect \"read-\nonly\" jar and then weave in the jar.\n\u003e ajc A.aj  -outjar tmp.jar\nC:\\aspectj1.1\\doc\\examples\\bug\\A.aj:5 no match for this type name: Test \n[Xlint:invalidAbsoluteTypeName]\n\n1 warning\n\u003e ajc Test.java -aspectpath tmp.jar\njava.lang.NullPointerException\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeEclipseTypeMunger\n(EclipseFactory.java:163)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.finishTypeMungers\n(EclipseFactory.java:147)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindin\ngs(AjLookupEnvironment.java:91)\n\tat org.eclipse.jdt.internal.compiler.Compiler.beginToCompile\n(Compiler.java:312)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:326)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:232)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:171)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run\n(AjBuildManager.java:655)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:139)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:216)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:72)\nC:\\aspectj1.1\\doc\\examples\\bug\\Test.java:0 Internal compiler error\njava.lang.NullPointerException\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeEclipseTypeMunger\n(EclipseFactory.java:163)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.finishTypeMungers\n(EclipseFactory.java:147)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindin\ngs(AjLookupEnvironment.java:91)\n\tat org.eclipse.jdt.internal.compiler.Compiler.beginToCompile\n(Compiler.java:312)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:326)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:232)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:171)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run\n(AjBuildManager.java:655)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:139)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:216)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n!! no source information available !!\nException thrown from AspectJ DEVELOPMENT\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack, \ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeEclipseTypeMunger\n(EclipseFactory.java:163)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.finishTypeMungers\n(EclipseFactory.java:147)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindin\ngs(AjLookupEnvironment.java:91)\n\tat org.eclipse.jdt.internal.compiler.Compiler.beginToCompile\n(Compiler.java:312)\n\tat org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:326)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:232)\n\tat org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile\n(AbstractImageBuilder.java:171)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run\n(AjBuildManager.java:655)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:139)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:216)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n1 fail|abort, 1 error\nSignal 127\n-----------------------\nPossible fix:\nThe NullPointerException happens because concret.getMunger() returns null\njust before calling EclipseTypeMunger.supportsKind.\nThe following guard in the EclipseFactory.makeEclipseTypeMunger fixes\nthe problem:\n\npublic EclipseTypeMunger makeEclipseTypeMunger(ConcreteTypeMunger concrete) {\n\t\tif (concrete instanceof EclipseTypeMunger) return \n(EclipseTypeMunger)concrete;\n        if ( concrete.getMunger() \u003d\u003d null)\n        {\n          System.err.println(\"TODO (per.hustad):\" + this.getClass().getName() +\n              \" concrete.getMunger() returned null for \" + concrete + \" - will \nreturn null now!\");\n          return null;\n        }\n\n        if (EclipseTypeMunger.supportsKind(concrete.getMunger().getKind())) {\n\t\t\treturn new EclipseTypeMunger(this, concrete.getMunger\n(), concrete.getAspectType(), null);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}",
    "this is now fixed in the tree and tested in the unit tests for \norg.aspectj.ajdt.core package under BinaryFormsTestCase\n\nyour fix worked perfectly and is the right thing to do right now before the\ncandidate release.  for a future release we might reconsider whether or not\nthis method should be allowed to return null.\n\ni\u0027m very happy to see you building successfully from the latest version of cvs\nand helping us catch bugs before a release goes out!"
  ],
  "commentCreationDates": [
    "2003-03-12T15:36:41+01:00",
    "2003-03-12T18:21:26+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeEclipseTypeMunger",
          "source": "EclipseFactory.java:163"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.finishTypeMungers",
          "source": "EclipseFactory.java:147"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:91"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.java:312"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:326"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:655"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:139"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "34820",
      "date": "2003-03-12T15:36:41+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeEclipseTypeMunger",
          "source": "EclipseFactory.java:163"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.finishTypeMungers",
          "source": "EclipseFactory.java:147"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:91"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.java:312"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:326"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:655"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:139"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "34820",
      "date": "2003-03-12T15:36:41+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeEclipseTypeMunger",
          "source": "EclipseFactory.java:163"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.finishTypeMungers",
          "source": "EclipseFactory.java:147"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:91"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.java:312"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:326"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:655"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:139"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "34820",
      "date": "2003-03-12T15:36:41+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    }
  ],
  "groupId": "34820",
  "bugId": "34820",
  "date": "2003-03-12T15:36:41+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "major"
}