{
  "comments": [
    "With some regularity when starting Eclipse I get the following exception:\n\njava.lang.IllegalStateException: Workspace is closed.\n\tat org.eclipse.core.resources.ResourcesPlugin.getWorkspace\n(ResourcesPlugin.java:320)\n\tat org.eclipse.core.internal.resources.ProjectPreferences.nodeExists\n(ProjectPreferences.java:139)\n\tat \norg.eclipse.core.internal.resources.ProjectContentTypes.usesContentTypePreferen\nces(ProjectContentTypes.java:111)\n\tat \norg.eclipse.core.internal.resources.ContentDescriptionManager.getDescriptionFor\n(ContentDescriptionManager.java:293)\n\tat org.eclipse.core.internal.resources.File.getContentDescription\n(File.java:276)\n\tat org.eclipse.ui.ide.IDE.getContentType(IDE.java:960)\n\tat org.eclipse.ui.internal.ide.model.WorkbenchFile.getBaseImage\n(WorkbenchFile.java:34)\n\tat \norg.eclipse.ui.internal.ide.model.WorkbenchResource.getImageDescriptor\n(WorkbenchResource.java:45)\n\tat org.eclipse.ui.model.WorkbenchLabelProvider.getImage\n(WorkbenchLabelProvider.java:155)\n...\n\tat org.eclipse.jface.viewers.DecoratingLabelProvider.getImage\n(DecoratingLabelProvider.java:82)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper\n(EditorReference.java:609)\n\tat org.eclipse.ui.internal.EditorReference.createPart\n(EditorReference.java:384)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart\n(WorkbenchPartReference.java:552)\n\tat org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:283)\n\tat org.eclipse.ui.internal.presentations.PresentablePart.setVisible\n(PresentablePart.java:126)\n\tat \norg.eclipse.ui.internal.presentations.util.PresentablePartFolder.select\n(PresentablePartFolder.java:268)\n\tat \norg.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select\n(LeftToRightTabOrder.java:65)\n\tat \norg.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart\n(TabbedStackPresentation.java:391)\n\tat org.eclipse.ui.internal.PartStack.refreshPresentationSelection\n(PartStack.java:1102)\n\tat org.eclipse.ui.internal.PartStack.handleDeferredEvents\n(PartStack.java:1066)\n\tat org.eclipse.ui.internal.LayoutPart.deferUpdates(LayoutPart.java:402)\n\tat org.eclipse.ui.internal.PartSashContainer.handleDeferredEvents\n(PartSashContainer.java:1314)\n\tat org.eclipse.ui.internal.LayoutPart.deferUpdates(LayoutPart.java:402)\n\tat org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents\n(WorkbenchPage.java:1260)\n\tat org.eclipse.ui.internal.WorkbenchPage.deferUpdates\n(WorkbenchPage.java:1250)\n\tat org.eclipse.ui.internal.WorkbenchPage.restoreState\n(WorkbenchPage.java:2696)\n\tat org.eclipse.ui.internal.WorkbenchWindow.restoreState\n(WorkbenchWindow.java:1819)\n\tat org.eclipse.ui.internal.Workbench.doRestoreState\n(Workbench.java:2566)\n\tat org.eclipse.ui.internal.Workbench.access$14(Workbench.java:2515)\n\tat org.eclipse.ui.internal.Workbench$19.run(Workbench.java:1514)\n\tat org.eclipse.ui.internal.Workbench$16.run(Workbench.java:1263)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:346)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run\n(ProgressMonitorDialog.java:447)\n\tat org.eclipse.ui.internal.Workbench.runStartupWithProgress\n(Workbench.java:1258)\n\tat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1512)\n\tat org.eclipse.ui.internal.Workbench.access$12(Workbench.java:1491)\n\tat org.eclipse.ui.internal.Workbench$17.run(Workbench.java:1374)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:783)\n\tat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1318)\n\tat org.eclipse.ui.internal.WorkbenchConfigurer.restoreState\n(WorkbenchConfigurer.java:183)\n\tat org.eclipse.ui.application.WorkbenchAdvisor.openWindows\n(WorkbenchAdvisor.java:700)\n\tat org.eclipse.ui.internal.Workbench.init(Workbench.java:1034)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1636)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)\n\nThis happens with or without a clean workspace. I put a break point on \nWorkspace.close() to see who was closing it during startup.  See attachment.\n\nSet as blocker since no useful work can be done when this happens and \nrestarting Eclipse is not a workaround since it may, and does, happen again.\n\nBuild id: M20050914-1235\nOther components:\nWTP M20050917\nJEM SDK 1.1\nEMF M200509081004\nXSD M200508081004\nGEF M20050908",
    "Created an attachment (id\u003d28087)\nDebug view when  Workspace.close() hit on startup\n",
    "Are there any other errors in your log file when this happens?\n\nTom: under what conditions would the runtime decide to shutdown the resources\nbundle? (see attachment in comment #1)",
    "Created an attachment (id\u003d28116)\nLog file from Linux\n",
    "I have attached a log file from a debug session on Linux. This is a new\nworkspace in a new folder. My development environment is different than my\ntarget environment. Not sure what other details you need.",
    "Moving to runtime... I need help parsing the exceptions coming from OSGi on startup:\n\nCaused by: org.osgi.framework.BundleException: State change in progress for\nbundle \"update@plugins/org.eclipse.ui_3.1.0.jar\" by thread \"Refresh Packages\".",
    "No other exceptions in the logs.",
    "It appears someone is calling PackageAdmin#refreshpackages as the ui bundle is \nbeing started.  AFAIK this should not happen because only \norg.eclipse.update.configurator calls that method AND update.configurator is \nstarted at a low start-level that should be lower that all other bundles \ninstalled (including org.eclipse.ui).\n\nPlease start with \"-console -noexit\".  When the crash occurs please run \nthe \"props\" command at the osgi\u003e prompt and post the output here.  I also \nwould like to see the output of the \"sl \u003cbundle id\u003e\" command where \u003cbundle id\u003e \nis the bundle id for org.eclipse.ui.workbench. I would also like the same \noutput for the org.eclipse.update.configurator.  To find out what the bundle \nid\u0027s are for these two bundles run the \"ss\" command and search for the two \nbundles in the list of installed bundles.  Also please post the output of \nthe \"ss\" command.  Thanks.",
    "Created an attachment (id\u003d28218)\nbundle info\n",
    "I can do this on Linux as well if you feel the information will be useful.",
    "Still getting this problem on Eclipse build M20050929-0840 (as part of IES \n3.1.1 Oct 07).  Any progress?",
    "Created an attachment (id\u003d28488)\nWindows exceptions\n\nAttached is the log from my system. Windows, Eclipse Version: 3.1.0\nBuild id: I20050627-1435\n",
    "Added attachment \"Windows exceptions\" from my workspace. Eclipse: Version: \n3.1.0\nBuild id: I20050627-1435\n\n\n",
    "I think the defect always occurs when there is a log file with \n\norg.eclipse.core.runtime.InvalidRegistryObjectException: Invalid registry object\n\tat\norg.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject(RegistryObjectManager.java(Compiled\nCode))\n\tat\norg.eclipse.core.internal.registry.RegistryObjectManager.getObject(RegistryObjectManager.java(Compiled\nCode))\n\tat\norg.eclipse.core.internal.registry.ExtensionHandle.getExtension(ExtensionHandle.java:26)\n\tat\norg.eclipse.core.internal.registry.ExtensionHandle.getConfigurationElements(ExtensionHandle.java:57)\n\tat\norg.eclipse.core.internal.preferences.PreferencesService.initializeModifyListeners(PreferencesService.java:110)\n\tat\norg.eclipse.core.internal.preferences.PreferencesService.registryChanged(PreferencesService.java:716)\n\tat\norg.eclipse.core.internal.registry.ExtensionRegistry$ExtensionEventDispatcherJob.run(ExtensionRegistry.java:64)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\n!ENTRY org.eclipse.core.runtime 2 2 2005-10-24 13:01:41.439\n!MESSAGE Missing \"scope\" attribute in \"preference\" element in extension\ndeclaration for: null.\n\n!ENTRY org.eclipse.core.runtime 2 2 2005-10-24 13:01:41.633\n!MESSAGE Missing \"scope\" attribute in \"preference\" element in extension\ndeclaration for: null. ......\n\nNotice, that there is a Registry changed event on startup and somehow registry\nis being modified.",
    "Any progress on this one?  It\u0027s still sitting as NEW.",
    "Several bug fixes have been done in the registry space to get rid of registry exception problems. The bundle \"refresh\" is weird to me. Maybe some other bundles outside of update.configurator are causing a refresh bundle.\nClosing as remind as none of us in the core team have been able to reproduce the problem."
  ],
  "commentCreationDates": [
    "2005-10-09T01:58:02+02:00",
    "2005-10-09T02:06:05+02:00",
    "2005-10-11T16:31:47+02:00",
    "2005-10-11T16:40:00+02:00",
    "2005-10-11T16:43:35+02:00",
    "2005-10-11T16:45:37+02:00",
    "2005-10-11T16:52:58+02:00",
    "2005-10-12T16:51:48+02:00",
    "2005-10-13T04:46:53+02:00",
    "2005-10-13T17:57:55+02:00",
    "2005-10-19T23:47:30+02:00",
    "2005-10-20T00:10:47+02:00",
    "2005-10-20T00:11:47+02:00",
    "2005-10-24T20:42:15+02:00",
    "2005-11-07T16:30:50+01:00",
    "2006-04-25T20:42:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Workspace is closed.",
      "elements": [
        {
          "method": "org.eclipse.core.resources.ResourcesPlugin.getWorkspace",
          "source": "ResourcesPlugin.java:320"
        },
        {
          "method": "org.eclipse.core.internal.resources.ProjectPreferences.nodeExists",
          "source": "ProjectPreferences.java:139"
        },
        {
          "method": "org.eclipse.core.internal.resources.ProjectContentTypes.usesContentTypePreferences",
          "source": "ProjectContentTypes.java:111"
        },
        {
          "method": "org.eclipse.core.internal.resources.ContentDescriptionManager.getDescriptionFor",
          "source": "ContentDescriptionManager.java:293"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.getContentDescription",
          "source": "File.java:276"
        },
        {
          "method": "org.eclipse.ui.ide.IDE.getContentType",
          "source": "IDE.java:960"
        },
        {
          "method": "org.eclipse.ui.internal.ide.model.WorkbenchFile.getBaseImage",
          "source": "WorkbenchFile.java:34"
        },
        {
          "method": "org.eclipse.ui.internal.ide.model.WorkbenchResource.getImageDescriptor",
          "source": "WorkbenchResource.java:45"
        },
        {
          "method": "org.eclipse.ui.model.WorkbenchLabelProvider.getImage",
          "source": "WorkbenchLabelProvider.java:155"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "112038",
      "date": "2005-10-09T01:58:02+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "blocker"
    },
    {
      "exceptionType": "org.eclipse.core.runtime.InvalidRegistryObjectException",
      "message": "Invalid registry object",
      "elements": [
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject",
          "source": "RegistryObjectManager.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.getObject",
          "source": "RegistryObjectManager.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionHandle.getExtension",
          "source": "ExtensionHandle.java:26"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionHandle.getConfigurationElements",
          "source": "ExtensionHandle.java:57"
        },
        {
          "method": "org.eclipse.core.internal.preferences.PreferencesService.initializeModifyListeners",
          "source": "PreferencesService.java:110"
        },
        {
          "method": "org.eclipse.core.internal.preferences.PreferencesService.registryChanged",
          "source": "PreferencesService.java:716"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionRegistry$ExtensionEventDispatcherJob.run",
          "source": "ExtensionRegistry.java:64"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 1,
      "commentIndex": 13,
      "bugId": "112038",
      "date": "2005-10-24T20:42:15+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "blocker"
    }
  ],
  "groupId": "112038",
  "bugId": "112038",
  "date": "2005-10-09T01:58:02+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "blocker"
}