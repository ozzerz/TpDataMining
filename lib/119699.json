{
  "comments": [
    "Build: 1.0RC1\n\nI\u0027m working to make our custom EJB facet depend on the jst.ejb facet and I\u0027m seeing the following NPE sporadically when I create a new project (I\u0027m altering the .component mapping to change the location of the ejb-jar.xml to the location where we auto-generate it before making the EJBArtifactEdit.createDeploymentDescriptor() call):\n\n...\njava.lang.NullPointerException\n\tat org.eclipse.wst.xml.core.internal.emf2xml.EMF2DOMSSERenderer.doSave(EMF2DOMSSERenderer.java:247)\n\tat org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.doSave(TranslatorResourceImpl.java:169)\n\tat org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.save(TranslatorResourceImpl.java:158)\n\tat org.eclipse.wst.common.internal.emf.resource.ReferencedXMIResourceImpl.saveIfNecessary(ReferencedXMIResourceImpl.java:206)\n\tat org.eclipse.jst.j2ee.ejb.componentcore.util.EJBArtifactEdit.addEJBJarIfNecessary(EJBArtifactEdit.java:322)\n\tat org.eclipse.jst.j2ee.ejb.componentcore.util.EJBArtifactEdit.createModelRoot(EJBArtifactEdit.java:502)\n\tat org.eclipse.jst.j2ee.ejb.componentcore.util.EJBArtifactEdit.createDeploymentDescriptor(EJBArtifactEdit.java:524)\n\tat com.bea.wlw.ejb.core.feature.EJBFeatureDelegate.moveEjbJar(EJBFeatureDelegate.java:151)\n\tat com.bea.wlw.ejb.core.feature.EJBFeatureDelegate.configureJ2EEComponent(EJBFeatureDelegate.java:117)\n\tat com.bea.wlw.ejb.core.feature.EJBFeatureDelegate.execute(EJBFeatureDelegate.java:73)\n\tat org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:478)\n\tat org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:293)\n\tat org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$0(FacetedProject.java:192)\n\tat org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:182)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1719)\n\tat org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:187)\n\tat org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard.performFinish(AddRemoveFacetsWizard.java:344)\n\tat org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard$2.run(AddRemoveFacetsWizard.java:288)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:346)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)\n\tat org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)\n\tat org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard.performFinish(AddRemoveFacetsWizard.java:304)\n\tat org.eclipse.wst.web.ui.internal.wizards.NewProjectDataModelFacetWizard.performFinish(NewProjectDataModelFacetWizard.java:146)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:676)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:349)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2708)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:809)\n\tat org.eclipse.jface.window.Window.open(Window.java:787)\n\tat org.eclipse.ui.actions.NewProjectAction.run(NewProjectAction.java:114)\n...",
    "This one is blocking some fairly critial functionality for us so I\u0027m increasing the severity (won\u0027t let me increase priority); this would be a candidate for a \"hot bug\"",
    "Although the NPE should still be addressed I\u0027m reassigning because it appears that the root cause of this is a problem is the \"wb-resource\" elements in the .component file (this appears when there are two mappings to deploy-path \"/META-INF/ejb-jar.xml\"; I\u0027m removing the first one before I add the second one but it doesn\u0027t appear to always work...); I\u0027ll do a bit more investigation first... ",
    "What\u0027s the latest status here?  Can we defer this defect to 1.0.1?",
    "Yes, this can be pushed to 1.0.1: I\u0027ve found a work-around to avoid the problem for now (i.e. I no longer attempt to alter the .component mappings and recreate ejb-jar.xml during project creation) so my work is not blocked; I also need to retest all of that logic once we adopt the latest RC2 build in our internal build.\n\nnote: I talked to Chuck a bit about the issue and he thought the .component mapping problem was probably unrelated to the NPE",
    "hey Chuck - noticed that you changed the target on this one from 1.0.1 to 1.5; this bug (at least the general issue behind the original bug) is fairly high priority for us (it\u0027s a candidate for our hot list) so we would ideally like to get it back on the 1.0.1 radar; I\u0027m also changing the bug summary to reflect the nature of the high priority problem - here\u0027s the use case:\n\n-the .component file contains a wb-resource mapping for a given deploy-path (e.g. \u003cwb-resource deploy-path\u003d\"/\" source-path\u003d\"/src\"/\u003e)\n-logic that executes after this mapping is added to the .component file needs to ensure that the following mapping is added to the .component file: \u003cwb-resource deploy-path\u003d\"/META-INF/ejb-jar.xml\" source-path\u003d\"/build/apt/.src/META-INF/ejb-jar.xml\"/\u003e\n\nProblems:\n\n-In order to create specific mapping to /META-INF/ejb-jar.xml, I need to create an IVirtualFile object; the process of creating that IVirtualFile, however, resolves the current source-path and adds the following wb-resource to the .component file: \u003cwb-resource deploy-path\u003d\"/META-INF/ejb-jar.xml\" source-path\u003d\"/build/apt/.src/META-INF/ejb-jar.xml\"/\u003e\n-I then attempted to remove that link and add the new link, however, the old link was never getting removed and I was hitting the exception originally listed in the bug\n\nIf I just manually made the edits to the .component file, everything seems to work fine; so, if there is a way/order in which the .component mappings can be modified that works, it will resolve the issue for me - i.e. perhaps remove the mapping from /src to / first (assuming this removal \"takes\"), then add in the mapping from /build/apt/.src/META-INF/ejb-jar.xml to /META-INF/ejb-jar.xml and then finally add back the /src to / mapping.\n\nLet me know your thoughts.",
    "Moving back to 101 on Rob\u0027s request.....  need to dig deeper...",
    "Note: I believe this bug is related to 121460",
    "Added to 1.0.1 Hot List at the request of Rob Frost and set to P2",
    "I believe we need to investigate this problem further and make a fix in the R101 timeframe - currently the  api on the virtual resource returns ambiguous source file locations, and makes it hard to manipulate resource mappings, and also creation scenarios.  \n\n",
    "Per the 0119 WTP status meeting, this is a border line hot bug. I believe Rob has a workaround.",
    "Setting hot bug priorities to at least P2.",
    "I still haven\u0027t had time to look into this bug in detail, but would like to verify that with related changes to the component root path, the initial problem is still happening? - Is the bogus mapping still being created?",
    "Retargetting to 1.5, but will move to R102 when available....",
    "I\u0027ve a problem editing the wb-resources entries to match my linked folders.\n\nAfter creating a new Dynamic Web Project, I delete \u0027src\u0027 and \u0027WebContent\u0027. Then I map the project source folder to a folder on my drive (called \u0027src\u0027). The same thing for the folder named \u0027jsp\u0027 containing my jsp files.\nThen I replace all \u0027WebContent\u0027 entries with \u0027jsp\u0027 in .component. After the server started up, only the sources are deployed. All the jsps are missing.\n\nIn WTP 0.7 this worked fine.",
    "Moving to M6",
    "Changing target",
    "Moving to 1.5.1 - Rob I need to work with you again on a reproducable scenario here... I just tried hand editing the .component file switching resource folders, and new , and deleting etc.....   No exceptions...",
    "Rob, please provide us with a testcase for 1.5.1 or resolve as unreproduced.",
    "I\u0027ll resolve as \"remind\" for now; when I have a chance to attempt the wb-resource mapping manipulation logic that was hitting the problem, I\u0027ll reopen if I still encounter issues.",
    "Triaging appropriately.",
    "No plans to fix.",
    "Closing."
  ],
  "commentCreationDates": [
    "2005-12-07T18:41:52+01:00",
    "2005-12-07T22:10:15+01:00",
    "2005-12-07T22:18:45+01:00",
    "2005-12-09T14:45:09+01:00",
    "2005-12-09T15:00:57+01:00",
    "2006-01-17T19:01:01+01:00",
    "2006-01-17T19:21:33+01:00",
    "2006-01-19T16:54:56+01:00",
    "2006-01-19T18:01:08+01:00",
    "2006-01-19T18:07:01+01:00",
    "2006-01-26T15:28:24+01:00",
    "2006-01-26T19:45:53+01:00",
    "2006-02-02T19:15:10+01:00",
    "2006-02-06T14:20:20+01:00",
    "2006-02-08T09:32:14+01:00",
    "2006-03-02T03:27:24+01:00",
    "2006-05-26T19:40:38+02:00",
    "2006-06-13T20:51:06+02:00",
    "2006-07-28T22:13:48+02:00",
    "2006-08-01T18:00:18+02:00",
    "2007-07-24T17:08:52+02:00",
    "2007-07-24T17:09:37+02:00",
    "2007-07-24T17:09:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.wst.xml.core.internal.emf2xml.EMF2DOMSSERenderer.doSave",
          "source": "EMF2DOMSSERenderer.java:247"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.doSave",
          "source": "TranslatorResourceImpl.java:169"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.save",
          "source": "TranslatorResourceImpl.java:158"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.ReferencedXMIResourceImpl.saveIfNecessary",
          "source": "ReferencedXMIResourceImpl.java:206"
        },
        {
          "method": "org.eclipse.jst.j2ee.ejb.componentcore.util.EJBArtifactEdit.addEJBJarIfNecessary",
          "source": "EJBArtifactEdit.java:322"
        },
        {
          "method": "org.eclipse.jst.j2ee.ejb.componentcore.util.EJBArtifactEdit.createModelRoot",
          "source": "EJBArtifactEdit.java:502"
        },
        {
          "method": "org.eclipse.jst.j2ee.ejb.componentcore.util.EJBArtifactEdit.createDeploymentDescriptor",
          "source": "EJBArtifactEdit.java:524"
        },
        {
          "method": "com.bea.wlw.ejb.core.feature.EJBFeatureDelegate.moveEjbJar",
          "source": "EJBFeatureDelegate.java:151"
        },
        {
          "method": "com.bea.wlw.ejb.core.feature.EJBFeatureDelegate.configureJ2EEComponent",
          "source": "EJBFeatureDelegate.java:117"
        },
        {
          "method": "com.bea.wlw.ejb.core.feature.EJBFeatureDelegate.execute",
          "source": "EJBFeatureDelegate.java:73"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate",
          "source": "FacetedProject.java:478"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal",
          "source": "FacetedProject.java:293"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$0",
          "source": "FacetedProject.java:192"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run",
          "source": "FacetedProject.java:182"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify",
          "source": "FacetedProject.java:187"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard.performFinish",
          "source": "AddRemoveFacetsWizard.java:344"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard$2.run",
          "source": "AddRemoveFacetsWizard.java:288"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:346"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:291"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:830"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard.performFinish",
          "source": "AddRemoveFacetsWizard.java:304"
        },
        {
          "method": "org.eclipse.wst.web.ui.internal.wizards.NewProjectDataModelFacetWizard.performFinish",
          "source": "NewProjectDataModelFacetWizard.java:146"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:676"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:349"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:556"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3080"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2708"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:809"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:787"
        },
        {
          "method": "org.eclipse.ui.actions.NewProjectAction.run",
          "source": "NewProjectAction.java:114"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "119699",
      "date": "2005-12-07T18:41:52+01:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "major"
    }
  ],
  "groupId": "119699",
  "bugId": "119699",
  "date": "2005-12-07T18:41:52+01:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "major"
}