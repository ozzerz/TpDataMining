{
  "comments": [
    "I added some code in an implementation of IViewPart.init as follows:\n\npublic void init(IViewSite site) throws PartInitException {\n\tsuper.init(site);\n\tif (site.getPage().getPerspective().getId().equals(IWorkbenchVCMConstants.PERPSPECTIVE_HISTORY)) {\n\t\t//do some special work that only applies in this perspective\n\t}\n}\n\nThe problem is, a NPE occurs in WorkbenchPage#getPerspective when init is called during startup.\nThis means my view cannot determine what perspective it is in at startup time.  This restriction is\nnot documented in the API as far as I can see.  The stack trace is as follows:\n\nLog: Mon Jun 11 11:59:19 EDT 2001\n2 org.eclipse.ui 2 Problems occurred when invoking code from plug-in: org.eclipse.ui.\njava.lang.NullPointerException\n\tat org.eclipse.ui.internal.WorkbenchPage.getPerspective(WorkbenchPage.java:675)\n\tat org.eclipse.vcm.internal.ui.HistoryView.init(HistoryView.java:350)\n\tat org.eclipse.ui.part.ViewPart.init(ViewPart.java:78)\n\tat org.eclipse.ui.internal.ViewFactory.createView(ViewFactory.java:120)\n\tat org.eclipse.ui.internal.ViewFactory.createView(ViewFactory.java:93)\n\tat org.eclipse.ui.internal.Perspective$4.run(Perspective.java:661)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:758)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:393)\n\tat org.eclipse.ui.internal.Perspective.restoreView(Perspective.java:654)\n\tat org.eclipse.ui.internal.Perspective.restoreState(Perspective.java:572)\n\tat org.eclipse.ui.internal.WorkbenchPage.restoreState(WorkbenchPage.java:1126)\n\tat org.eclipse.ui.internal.WorkbenchPage.\u003cinit\u003e(WorkbenchPage.java:76)\n\tat org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:743)\n\tat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:598)\n\tat org.eclipse.ui.internal.Workbench$5.run(Workbench.java:477)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:758)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:393)\n\tat org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState(Workbench.java:461)\n\tat org.eclipse.ui.internal.Workbench.openWindows(Workbench.java:518)\n\tat org.eclipse.ui.internal.Workbench.init(Workbench.java:393)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:616)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:815)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:66)\n\tat org.eclipse.core.launcher.Main.run(Main.java:298)\n\tat org.eclipse.core.launcher.UIMain.main(UIMain.java:43)\n\nNOTES:\n\nJohnA (6/12/2001 9:28:08 AM)\n\tI moved the initialization code into createPartControl, at which point the perspective has been properly \n\tinitialized.  It turns out there\u0027s not much you can do in the init method, very few of the page and site\n\tobjects have been properly initialized at that time.  For example, site.getSelectionProvider() also returns\n\tnull at that point.",
    "PRODUCT VERSION:\n\n0.118\n\n",
    "This was more a misunderstanding of the API on my part."
  ],
  "commentCreationDates": [
    "2001-10-11T04:36:18+02:00",
    "2001-10-29T23:27:48+01:00",
    "2002-02-04T22:14:14+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.getPerspective",
          "source": "WorkbenchPage.java:675"
        },
        {
          "method": "org.eclipse.vcm.internal.ui.HistoryView.init",
          "source": "HistoryView.java:350"
        },
        {
          "method": "org.eclipse.ui.part.ViewPart.init",
          "source": "ViewPart.java:78"
        },
        {
          "method": "org.eclipse.ui.internal.ViewFactory.createView",
          "source": "ViewFactory.java:120"
        },
        {
          "method": "org.eclipse.ui.internal.ViewFactory.createView",
          "source": "ViewFactory.java:93"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective$4.run",
          "source": "Perspective.java:661"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:758"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:393"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.restoreView",
          "source": "Perspective.java:654"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.restoreState",
          "source": "Perspective.java:572"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.restoreState",
          "source": "WorkbenchPage.java:1126"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.\u003cinit\u003e",
          "source": "WorkbenchPage.java:76"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.restoreState",
          "source": "WorkbenchWindow.java:743"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.restoreState",
          "source": "Workbench.java:598"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$5.run",
          "source": "Workbench.java:477"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:758"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:393"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openWindows",
          "source": "Workbench.java:518"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.init",
          "source": "Workbench.java:393"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:616"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:815"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:66"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:298"
        },
        {
          "method": "org.eclipse.core.launcher.UIMain.main",
          "source": "UIMain.java:43"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "2433",
      "date": "2001-10-11T04:36:18+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "2433",
  "bugId": "2433",
  "date": "2001-10-11T04:36:18+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}