{
  "comments": [
    "Compiling and running the following code:\n\npublic class GenericType\u003cV extends Integer\u003e {\n\n\tpublic GenericType(V value) {}\n\n\tpublic void foo() {}\n\n\tpublic void bar() {}\n\n\tprotected V getValue() {\n\t\treturn null;\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew GenericType\u003cInteger\u003e(null).foo();\n\t}\n\n}\n\naspect SomeAspect {\n\tbefore(GenericType t): call(* GenericType.foo()) \u0026\u0026 target(t) {\n\t\t// Direct call to non-generic method works\n\t\tt.bar();\n\t\t// Indirect call to non-generic method works\n\t\tt.callNormalMethod();\n\t\t// Direct call to generic method works\n\t\tt.getValue();\n\t\t// Indirect call to generic method produces a NoSuchMethodError\n\t\tt.callGenericMethod();\n\t}\n\n\tprivate void GenericType.callNormalMethod() {\n\t\tbar();\n\t}\n\n\tprivate void GenericType.callGenericMethod() {\n\t\tgetValue();\n\t}\n}\n\nproduces the following error:\n\nException in thread \"main\" java.lang.NoSuchMethodError: GenericType.ajc$protecte\ndDispatch$GenericType$getValue()Ljava/lang/Integer;\n        at SomeAspect.ajc$interMethod$SomeAspect$GenericType$callGenericMethod(G\nenericType.java:34)\n        at GenericType.ajc$interMethodDispatch2$SomeAspect$callGenericMethod(Gen\nericType.java:1)\n        at SomeAspect.ajc$interMethodDispatch1$SomeAspect$GenericType$callGeneri\ncMethod(GenericType.java)\n        at SomeAspect.ajc$before$SomeAspect$1$f6d0c54(GenericType.java:26)\n        at GenericType.main(GenericType.java:14)\n\nin versions 1.5.0, 1.5.1a and the current development version. The bug also occurs if V is declared as \u003cV extends java.util.EventListener\u003e, but does not occur is V is declared as \u003cV extends Object\u003e (I haven\u0027t tried anything else).",
    "thanks for the clear bug report and test program.\n\nthe erasure of the method invoked by the ITD is being lost during (de)serialization.  Leaving us with a \u0027V extends Object\u0027 return value which is incorrect.",
    "this related case is also a problem:  (typevar as parameter rather than return type)\n\npublic class GenericType2\u003cV extends Integer\u003e {\n\n        public GenericType2(V value) {}\n\n        public void foo() {}\n\n        protected void getValue(V aV) {\n        }\n\n        public static void main(String[] args) {\n                new GenericType2\u003cInteger\u003e(null).foo();\n        }\n\n}\n\naspect SomeAspect {\n        before(GenericType2 t): call(* GenericType2.foo()) \u0026\u0026 target(t) {\n                t.callGenericMethod();\n        }\n\n        private void GenericType2.callGenericMethod() {\n                getValue(new Integer(45));\n        }\n}",
    "these two testcases are committed - commented out in Ajc152Tests",
    "investigate for 1.5.4, but might fall back to 1.6.0 if it is a bit tricky to get solved!"
  ],
  "commentCreationDates": [
    "2006-06-05T19:37:55+02:00",
    "2006-06-06T10:11:27+02:00",
    "2006-06-06T12:37:52+02:00",
    "2006-06-07T10:25:20+02:00",
    "2007-10-24T16:06:12+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "GenericType.ajc$protecte dDispatch$GenericType$getValue()Ljava/lang/Integer;",
      "elements": [
        {
          "method": "SomeAspect.ajc$interMethod$SomeAspect$GenericType$callGenericMethod",
          "source": "G enericType.java:34"
        },
        {
          "method": "GenericType.ajc$interMethodDispatch2$SomeAspect$callGenericMethod",
          "source": "Gen ericType.java:1"
        },
        {
          "method": "SomeAspect.ajc$interMethodDispatch1$SomeAspect$GenericType$callGenericMethod",
          "source": "GenericType.java"
        },
        {
          "method": "SomeAspect.ajc$before$SomeAspect$1$f6d0c54",
          "source": "GenericType.java:26"
        },
        {
          "method": "GenericType.main",
          "source": "GenericType.java:14"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "145391",
      "date": "2006-06-05T19:37:55+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "145391",
  "bugId": "145391",
  "date": "2006-06-05T19:37:55+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}