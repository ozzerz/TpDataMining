{
  "comments": [
    "When dragging and dropping a file or copying and pasting a file within an ftp connection I get an Invalid Thread access error dialog.\n\nFrom the log I see a message saying FTP Copy not supported.  The error message displayed to the user does not tell me that it\u0027s not supported.  It looks like a bad error is occurring.  \n\nIf FTP Copy \u0026 Paste and Dragging \u0026 Dropping aren\u0027t supported then the user should be given a much better error message.\n\nAlso Dragging and Dropping files into a directory that is read only displays no error message.\n\nLog Details:\n!ENTRY org.eclipse.rse.ui 4 0 2007-05-15 15:36:16.636\n!MESSAGE RSEF1002E: SUB#0:FTP copy not supported, use move instead\n\n!ENTRY org.eclipse.core.jobs 4 2 2007-05-15 15:36:16.651\n!MESSAGE An internal error occurred during: \"Transfer Operation\".\n!STACK 0\norg.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:3547)\n\tat org.eclipse.swt.SWT.error(SWT.java:3465)\n\tat org.eclipse.swt.SWT.error(SWT.java:3436)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:432)\n\tat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:274)\n\tat org.eclipse.swt.widgets.Shell.\u003cinit\u003e(Shell.java:363)\n\tat org.eclipse.jface.window.Window.createShell(Window.java:482)\n\tat org.eclipse.jface.window.Window.create(Window.java:425)\n\tat org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1081)\n\tat org.eclipse.jface.window.Window.open(Window.java:785)\n\tat org.eclipse.jface.dialogs.ErrorDialog.open(ErrorDialog.java:333)\n\tat org.eclipse.rse.ui.messages.SystemMessageDialog.open(SystemMessageDialog.java:404)\n\tat org.eclipse.rse.ui.messages.SystemMessageDialog.displayErrorMessage(SystemMessageDialog.java:595)\n\tat org.eclipse.rse.ui.messages.SystemMessageDialog.displayMessage(SystemMessageDialog.java:643)\n\tat org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.doDrop(SystemViewRemoteFileAdapter.java:1989)\n\tat org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.transferRSEResources(SystemDNDTransferRunnable.java:251)\n\tat org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.runInWorkspace(SystemDNDTransferRunnable.java:572)\n\tat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\n-----------Enter bugs above this line-----------\nTM 2.0M7 Testing\ninstallation : eclipse-SDK-3.3M7\nRSE install  : I20070514-1630\njava.runtime : Sun 1.5.0_11-b03\nos.name:     : Windows XP, Service Pack 2\n------------------------------------------------",
    "This is a duplicate of bug #187115 which I just fixed.\n\nPlease Verify -- the fact that an error message should have been displayed might indicate that some other problem was hidden by this bug.\n\n*** This bug has been marked as a duplicate of bug 187115 ***",
    "Okay the invalid thread access is gone.\n\nIt shows a \"Transfer Operation\" Copying dialog that looks like it\u0027s working at first then displays the error dialog:\n\n\"Operation failed. File system input or output error\"\nDetails:\n\"Message reported from file system: FTP copy not supported, use move instead\"\n\nIt really should bring up a not supported operation error dialog sooner.",
    "Better yet for dragging and dropping the drop target not being a valid target when dragging and dropping within the same ftp connection.",
    "Hm... we\u0027ve had the discussion before about what to do with drag \u0026 drop on FTP. It was not an easy decision, and I\u0027m aware that the current implementation (showing the error dialog) is not the best one.\n\nSomehow related bugs are\n  bug #160404 - explains why we Copy on drag\u0026drop rather than move\n  bug #140412 - move file support in FTP in general\n\nUnfortunately I cannot find the bug number I\u0027m thinking of, perhaps you can find it Javier? - If we can find it we should continue the discussion there. If we cannot find it we should open a new bug specially for the FTP treatment of drag\u0026drop inside the connection.\n\nReopening until this is resolved.",
    "The invalid thread access error was raised by a method not covered by the mutex in the FTP service class.\nTthe issue of simultaneous access to the control thread should be solved with the fix for bug 187096",
    "Was anyone able to find the old defect with the discussion?  I did a quick check and couldn\u0027t find it.\n\nWith the changes made to Copy, such that it downloads the file to your workspace I don\u0027t see why Copy and Paste within an FTP connection should be disabled anymore.",
    "Reopening as I get the proper error message now except when dragging and dropping a file/folder to a read only folder.  In that case I get no error message.\n\nUsing the read_only attribute in the properties page doesn\u0027t work properly so you will need to chmod a folder outside of RSE or ssh connect to the server then use ftp for drag and drop.",
    "Bulk update target milestone 2.0.1 -\u003e 3.0",
    "Javier I noticed with Bug 196351 that you implemented copy, but it only works for files.  If I try to copy a directory I get an Operation failed message.\n\nMessage reported from file system: 550 I can only retrieve regular files\n\nIs there a reason for allowing copying/pasting of files, but not directories?",
    "(In reply to comment #9)\n\u003e Javier I noticed with Bug 196351 that you implemented copy, but it only works\n\u003e for files.  If I try to copy a directory I get an Operation failed message.\n\u003e \n\u003e Message reported from file system: 550 I can only retrieve regular files\n\u003e \n\u003e Is there a reason for allowing copying/pasting of files, but not directories?\n\u003e \n\nI just added a recursive copy when the copied element is a folder containing files and subfolders. This recursive copy has to be done since there\u0027s no copy command in FTP.\nNow Drag\u0026Drop and Copy-Paste within the same ftp server should work fine. ",
    "Javier, I tested this on 4 different ftp connections.  It worked on 3 out of the 4.  The problem occurs on my web host server.  I sent you the ftp information for it last week.  Let me know if you need me to send it again.\n\nThe problem occurs only when dragging and dropping folders.  Files work fine.  The error message I get is:\n\nOperation failed. File system input or output error\nMessage reported from file system: 257 \"/\" is your current location\n\nThis message doesn\u0027t tell me anything.  What I did was drag and drop a folder named copyfolder into a folder named test1.  If I look at the console output though this is what I get repeated over and over:\n\nMKD /test1/copyfolder\n257-\"/test1/copyfolder\" : The directory was successfully created\n\n257 0 Kbytes used (0%) - authorized: 102400 Kb\n\nCWD //copyfolder\n250 OK. Current directory is /copyfolder\n\nPORT 9,26,148,193,7,185\n200 PORT command successful\n\nLIST\n150 Connecting to port 20627\n\n226-ASCII\n\n226-Options: -a -l \n\n226 3 matches total\n\nMKD /test1/copyfolder/.\n550-Can\u0027t create directory: File exists\n\n550 0 Kbytes used (0%) - authorized: 102400 Kb\n\nCWD //copyfolder/.\n250 OK. Current directory is /copyfolder\n\nPORT 9,26,148,193,7,186\n200 PORT command successful\n\nLIST\n150 Connecting to port 20637\n\n226-ASCII\n\n226-Options: -a -l \n\n226 3 matches total\n\nMKD /test1/copyfolder/./.\n550-Can\u0027t create directory: File exists\n\n550 0 Kbytes used (0%) - authorized: 102400 Kb\n\nCWD //copyfolder/./.\n250 OK. Current directory is /copyfolder\n\nPORT 9,26,148,193,7,187\n200 PORT command successful\n\nLIST\n150 Connecting to port 20646\n\n226-ASCII\n\n226-Options: -a -l \n\n226 3 matches total\n\nMKD /test1/copyfolder/././.\n550-Can\u0027t create directory: File exists\n\nI\u0027ll attach a text file of the whole console output.",
    "Created an attachment (id\u003d81507)\nConsole Output\n\n",
    "Hi Kevin,\n\nIt happens because your ftp server is listing \".\" and \"..\" as folders.\nI\u0027ll add some code to ignore those folders when concurrently copying the folders."
  ],
  "commentCreationDates": [
    "2007-05-15T21:49:25+02:00",
    "2007-05-15T23:05:49+02:00",
    "2007-05-15T23:22:08+02:00",
    "2007-05-15T23:29:14+02:00",
    "2007-05-16T00:04:08+02:00",
    "2007-05-16T21:26:09+02:00",
    "2007-05-18T19:10:06+02:00",
    "2007-06-21T22:04:23+02:00",
    "2007-10-01T13:57:21+02:00",
    "2007-10-26T03:39:41+02:00",
    "2007-10-26T18:29:11+02:00",
    "2007-10-29T22:11:35+01:00",
    "2007-10-29T22:12:46+01:00",
    "2007-10-30T10:32:21+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3547"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3465"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3436"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:432"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:274"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.\u003cinit\u003e",
          "source": "Shell.java:363"
        },
        {
          "method": "org.eclipse.jface.window.Window.createShell",
          "source": "Window.java:482"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:425"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.create",
          "source": "Dialog.java:1081"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:785"
        },
        {
          "method": "org.eclipse.jface.dialogs.ErrorDialog.open",
          "source": "ErrorDialog.java:333"
        },
        {
          "method": "org.eclipse.rse.ui.messages.SystemMessageDialog.open",
          "source": "SystemMessageDialog.java:404"
        },
        {
          "method": "org.eclipse.rse.ui.messages.SystemMessageDialog.displayErrorMessage",
          "source": "SystemMessageDialog.java:595"
        },
        {
          "method": "org.eclipse.rse.ui.messages.SystemMessageDialog.displayMessage",
          "source": "SystemMessageDialog.java:643"
        },
        {
          "method": "org.eclipse.rse.internal.files.ui.view.SystemViewRemoteFileAdapter.doDrop",
          "source": "SystemViewRemoteFileAdapter.java:1989"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.transferRSEResources",
          "source": "SystemDNDTransferRunnable.java:251"
        },
        {
          "method": "org.eclipse.rse.internal.ui.view.SystemDNDTransferRunnable.runInWorkspace",
          "source": "SystemDNDTransferRunnable.java:572"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "187096",
      "date": "2007-05-15T21:49:25+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "minor"
    }
  ],
  "groupId": "187096",
  "bugId": "187096",
  "date": "2007-05-15T21:49:25+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "minor"
}