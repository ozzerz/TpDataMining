{
  "comments": [
    "If type for which \"Open Type Hierarchy\" runs is local/anonymous and has location containing \".class\" (e.g /example/bug.classic.example.jar|bug/example/Main$1.class) \"Open Type Hierarchy\" fails:\n\n...\nRoot exception:\njava.lang.StringIndexOutOfBoundsException: String index out of range: -38\nat java.lang.String.substring(String.java:1768)\nat org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder$1.acceptIndexMatch(IndexBasedHierarchyBuilder.java:456)\nat org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.acceptMatch(InternalSearchPattern.java:45)\nat org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches(InternalSearchPattern.java:89)\nat org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches(MatchLocator.java:325)\nat org.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:114)\nat org.eclipse.jdt.internal.core.search.SubTypeSearchJob.search(SubTypeSearchJob.java:37)\nat org.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:64)\nat org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:261)\nat org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.searchAllPossibleSubTypes(IndexBasedHierarchyBuilder.java:501)\nat org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.determinePossibleSubTypes(IndexBasedHierarchyBuilder.java:384)\nat org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build(IndexBasedHierarchyBuilder.java:118)\nat org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute(TypeHierarchy.java:300)\nat org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh(TypeHierarchy.java:1235)\nat org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation(CreateTypeHierarchyOperation.java:90)\nat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:720)\nat org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:779)\nat org.eclipse.jdt.internal.core.BinaryType.newTypeHierarchy(BinaryType.java:877)\nat org.eclipse.jdt.internal.core.BinaryType.newTypeHierarchy(BinaryType.java:896)\nat org.eclipse.jdt.internal.core.BinaryType.newTypeHierarchy(BinaryType.java:866)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyLifeCycle.createTypeHierarchy(TypeHierarchyLifeCycle.java:118)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyLifeCycle.doHierarchyRefresh(TypeHierarchyLifeCycle.java:157)\nat org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyLifeCycle$1.run(TypeHierarchyLifeCycle.java:98)\nat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\n\nHow to reprodeuce:\n1)create supertype:\n\npackage bug.example;\n\npublic interface MyInterface {\n\tvoid doIt();\n}\n\n2) create anonymous subtype:\n\npackage bug.example;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tMyInterface myInterface \u003d new MyInterface() {\n\t\t\tpublic void doIt() {\n\t\t\t}\n\t\t};\n\t\tmyInterface.doIt();\n\t}\n\n}\n\n3) pack it in jar \"bug.classic.example.jar\"\n\n4) create java project in eclipse, add this jar to project build path\n\n5) try to open type hierarchy for bug.example.MyInterface",
    "Created an attachment (id\u003d49933)\n\"bugged\" java project\n\n",
    "Changed IndexBasedHierarchyBuilder#searchAllPossibleSubTypes(...) to use lastIndexOf(\".class\") instead of indexOf(\".class\").\nAdded regression test TypeHierarchyTests#testBinaryTypeInDotClassJar().\n\nReleased for 3.3M5 in HEAD.",
    "Verified for 3.3M5 using I20070205-0009."
  ],
  "commentCreationDates": [
    "2006-09-12T15:57:14+02:00",
    "2006-09-12T16:00:40+02:00",
    "2007-01-10T12:27:31+01:00",
    "2007-02-05T16:23:21+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StringIndexOutOfBoundsException",
      "message": "String index out of range: -38",
      "elements": [
        {
          "method": "java.lang.String.substring",
          "source": "String.java:1768"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder$1.acceptIndexMatch",
          "source": "IndexBasedHierarchyBuilder.java:456"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.acceptMatch",
          "source": "InternalSearchPattern.java:45"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches",
          "source": "InternalSearchPattern.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches",
          "source": "MatchLocator.java:325"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "PatternSearchJob.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.SubTypeSearchJob.search",
          "source": "SubTypeSearchJob.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:64"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:261"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.searchAllPossibleSubTypes",
          "source": "IndexBasedHierarchyBuilder.java:501"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.determinePossibleSubTypes",
          "source": "IndexBasedHierarchyBuilder.java:384"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build",
          "source": "IndexBasedHierarchyBuilder.java:118"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute",
          "source": "TypeHierarchy.java:300"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh",
          "source": "TypeHierarchy.java:1235"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation",
          "source": "CreateTypeHierarchyOperation.java:90"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:779"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryType.newTypeHierarchy",
          "source": "BinaryType.java:877"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryType.newTypeHierarchy",
          "source": "BinaryType.java:896"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BinaryType.newTypeHierarchy",
          "source": "BinaryType.java:866"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyLifeCycle.createTypeHierarchy",
          "source": "TypeHierarchyLifeCycle.java:118"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyLifeCycle.doHierarchyRefresh",
          "source": "TypeHierarchyLifeCycle.java:157"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyLifeCycle$1.run",
          "source": "TypeHierarchyLifeCycle.java:98"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "157035",
      "date": "2006-09-12T15:57:14+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "157035",
  "bugId": "157035",
  "date": "2006-09-12T15:57:14+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}