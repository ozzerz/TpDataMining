{
  "comments": [
    "Build ID: wtp 153\n\nSteps To Reproduce:\n1. in a product based on wtp with many plug-ins\n2. import a ear file (ear file contains a .class file)\n3. the operation fails with error\norg.eclipse.core.runtime.CoreException: Extended Operation failure: org.eclipse.jst.j2ee.internal.archive.operations.EARComponentImportOperation\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish(Unknown Source)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed(Unknown Source)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed(Unknown Source)\n\tat org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Unknown Source)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)\n\tat org.eclipse.jface.window.Window.runEventLoop(Unknown Source)\n\tat org.eclipse.jface.window.Window.open(Unknown Source)\n\tat org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run(Unknown Source)\n\tat org.eclipse.jface.action.Action.runWithEvent(Unknown Source)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(Unknown Source)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(Unknown Source)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runUI(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(Unknown Source)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(Unknown Source)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Unknown Source)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Unknown Source)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Unknown Source)\n\tat org.eclipse.core.launcher.Main.run(Unknown Source)\n\tat org.eclipse.core.launcher.Main.main(Unknown Source)\norg.eclipse.core.runtime.CoreException[0]: org.eclipse.core.commands.ExecutionException: Error importing Module File\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactImportOperation.doExecute(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.EARComponentImportOperation.doExecute(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactImportOperation.execute(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(Unknown Source)\n\tat org.eclipse.core.internal.resources.Workspace.run(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(Unknown Source)\n\tat org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1$CatchThrowableRunnableWithProgress.run(Unknown Source)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(Unknown Source)\nCaused by: org.eclipse.wst.common.frameworks.internal.enablement.nonui.WFTWrappedException: Error importing Module File\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactImportOperation.importModuleFile(Unknown Source)\n\t... 13 more\nCaused by: java.lang.IllegalArgumentException: Path must include project and resource name: /ImportedClasses\n\tat org.eclipse.core.runtime.Assert.isLegal(Unknown Source)\n\tat org.eclipse.core.internal.resources.Workspace.newResource(Unknown Source)\n\tat org.eclipse.core.internal.resources.Container.getFolder(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEComponentSaveStrategyImpl.createImportedClassesFolder(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEComponentSaveStrategyImpl.shouldSave(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.EARComponentSaveStrategyImpl.shouldSave(Unknown Source)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.saveFiles(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.ComponentSaveStrategyImpl.saveFiles(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.J2EEComponentSaveStrategyImpl.saveFiles(Unknown Source)\n\tat org.eclipse.jst.j2ee.internal.archive.operations.EARComponentSaveStrategyImpl.save(Unknown Source)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.save(Unknown Source)\n\tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleFileImpl.save(Unknown Source)\n\t... 14 more\n\n\n\nMore information:",
    "Problem was in EARComponentSaveStrategyImpl which extends J2EEComponentSaveStrategyImpl. J2EEComponentSave... was created to add the imported classes folder but Ear module should not have imported classes folder\n\nFixed by changing EARCom... to extend ComponentSaveStrategyImpl\n\nAlso had to fix a class cast exception in J2EEArtifactImportOperation\n\n",
    "Created an attachment (id\u003d60336)\npatch\n\n",
    "Reviewed - and approve.   simple fix",
    "+1",
    "(In reply to comment #1)\n\u003e \n\u003e Fixed by changing EARCom... to extend ComponentSaveStrategyImpl\nCan we have a better description of what got fixed? Do we now flag an error if an ear has a .class file?\nPlease also add a note on the tests that were run.\n\n",
    "When an j2ee module like ejb/web has a class file with no source we create a separate class folder called ImportedClasses (add it to the classpath) and drop it in there.\n\nWhich is required because then you can use those classes.\n\nBut an ear module project is not java enabled, hence we do not need to create the class folder and drop the class there. (the problem was that we were trying to create such a folder, which would be incorrect behavior as the ear project is not java enabled in the first place)\n\nThe fix ensures that class files are imported into the ear project like normal files (say an image file) and left as it is for the user.\n\nI have tested it with ear modules with class files and it did not break anything. I have not created a junit for this case if thats what you are referring to.",
    "+1",
    "(In reply to comment #6)\n\u003e \n\u003e I have tested it with ear modules with class files and it did not break\n\u003e anything. I have not created a junit for this case if thats what you are\n\u003e referring to.\n\u003e \n+1\nThanks for the clarification. No, I was not requesting for a junit test.",
    "fixed",
    "closed"
  ],
  "commentCreationDates": [
    "2007-03-06T20:06:41+01:00",
    "2007-03-06T20:11:55+01:00",
    "2007-03-06T20:15:14+01:00",
    "2007-03-21T15:17:04+01:00",
    "2007-03-21T16:22:28+01:00",
    "2007-03-21T22:26:13+01:00",
    "2007-03-21T22:51:37+01:00",
    "2007-03-21T23:00:35+01:00",
    "2007-03-22T19:25:18+01:00",
    "2007-03-27T00:51:20+02:00",
    "2007-03-30T19:38:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Extended Operation failure: org.eclipse.jst.j2ee.internal.archive.operations.EARComponentImportOperation",
      "elements": [
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$3.widgetSelected",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "176527",
      "date": "2007-03-06T20:06:41+01:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.core.commands.ExecutionException",
      "message": "Error importing Module File",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactImportOperation.doExecute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.archive.operations.EARComponentImportOperation.doExecute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactImportOperation.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1$CatchThrowableRunnableWithProgress.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "Unknown Source"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.wst.common.frameworks.internal.enablement.nonui.WFTWrappedException",
        "message": "Error importing Module File",
        "elements": [
          {
            "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEArtifactImportOperation.importModuleFile",
            "source": "Unknown Source"
          }
        ],
        "causedBy": {
          "exceptionType": "java.lang.IllegalArgumentException",
          "message": "Path must include project and resource name: /ImportedClasses",
          "elements": [
            {
              "method": "org.eclipse.core.runtime.Assert.isLegal",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.core.internal.resources.Workspace.newResource",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.core.internal.resources.Container.getFolder",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEComponentSaveStrategyImpl.createImportedClassesFolder",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEComponentSaveStrategyImpl.shouldSave",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.internal.archive.operations.EARComponentSaveStrategyImpl.shouldSave",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.SaveStrategyImpl.saveFiles",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.internal.archive.operations.ComponentSaveStrategyImpl.saveFiles",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.internal.archive.operations.J2EEComponentSaveStrategyImpl.saveFiles",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.internal.archive.operations.EARComponentSaveStrategyImpl.save",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.save",
              "source": "Unknown Source"
            },
            {
              "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleFileImpl.save",
              "source": "Unknown Source"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 0,
      "bugId": "176527",
      "date": "2007-03-06T20:06:41+01:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "normal"
    }
  ],
  "groupId": "176527",
  "bugId": "176527",
  "date": "2007-03-06T20:06:41+01:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "normal"
}