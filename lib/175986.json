{
  "comments": [
    "I20070227-0800\n\nGot an exception while \u0027Initializing Java Tooling\u0027 on startup\n\nMany exceptions like the following in the log:\n\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.writeSavedIndexNamesFile(IndexManager.java:752)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.updateIndexState(IndexManager.java:729)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.rebuildIndex(IndexManager.java:428)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.getIndex(IndexManager.java:222)\n\tat org.eclipse.jdt.internal.core.search.PatternSearchJob.getIndexes(PatternSearchJob.java:94)\n\tat org.eclipse.jdt.internal.core.search.PatternSearchJob.ensureReadyToRun(PatternSearchJob.java:51)\n\tat org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:177)\n\tat org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllSecondaryTypeNames(BasicSearchEngine.java:614)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.secondaryTypesSearching(JavaModelManager.java:3665)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.secondaryTypes(JavaModelManager.java:3534)\n\tat org.eclipse.jdt.internal.core.NameLookup.findSecondaryType(NameLookup.java:546)\n\tat org.eclipse.jdt.internal.core.NameLookup.findType(NameLookup.java:652)\n\tat org.eclipse.jdt.internal.core.NameLookup.findType(NameLookup.java:572)\n\tat org.eclipse.jdt.internal.core.SearchableEnvironment.find(SearchableEnvironment.java:96)\n\tat org.eclipse.jdt.internal.core.SearchableEnvironment.findType(SearchableEnvironment.java:282)\n\tat org.eclipse.jdt.internal.core.CancelableNameEnvironment.findType(CancelableNameEnvironment.java:45)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:122)\n\tat org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(PackageBinding.java:178)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:2352)\n\tat org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:2092)\n\tat org.eclipse.jdt.internal.compiler.ast.SingleTypeReference.getTypeBinding(SingleTypeReference.java:44)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType(TypeReference.java:163)\n\tat org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType(TypeReference.java:114)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype(ClassScope.java:1113)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperclass(ClassScope.java:826)\n\tat org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy(ClassScope.java:951)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy(CompilationUnitScope.java:290)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings(LookupEnvironment.java:218)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings(LookupEnvironment.java:249)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.accept(CompilationUnitProblemFinder.java:112)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:134)\n\tat org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(PackageBinding.java:178)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findImport(CompilationUnitScope.java:447)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findSingleImport(CompilationUnitScope.java:501)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInImports(CompilationUnitScope.java:357)\n\tat org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInTypes(CompilationUnitScope.java:426)\n\tat org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:708)\n\tat org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:755)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:177)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:249)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:166)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:85)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:720)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:779)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1151)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1123)\n\tat org.eclipse.jdt.internal.corext.util.JavaModelUtil.reconcile(JavaModelUtil.java:695)\n\tat org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.getElementAt(CompilationUnitEditor.java:1303)\n\tat org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.getElementAt(CompilationUnitEditor.java:1284)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.adjustHighlightRange(JavaEditor.java:2258)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.selectAndReveal(AbstractTextEditor.java:5555)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.selectAndReveal(AbstractTextEditor.java:5529)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.doSetSelection(AbstractTextEditor.java:2498)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.doSetSelection(JavaEditor.java:2816)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.doRestoreState(AbstractTextEditor.java:6339)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor$ActivationListener.partActivated(AbstractTextEditor.java:855)\n....\n\nThe log also contains source of some classes, will attach the log.",
    "Created an attachment (id\u003d60052)\nlog\n\n",
    "Eclipse crashed before that happened. The NPE was also thrown on shutdown. \n\n!ENTRY org.eclipse.ui.ide 2 1 2007-03-01 09:49:29.163\n!MESSAGE Problems occurred while trying to save the state of the workbench.\n!SUBENTRY 1 org.eclipse.core.resources 2 566 2007-03-01 09:49:29.163\n!MESSAGE Problems occurred during save.\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.writeSavedIndexNamesFile(IndexManager.java:752)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.updateIndexState(IndexManager.java:729)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.rebuildIndex(IndexManager.java:428)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.getIndex(IndexManager.java:222)\n\tat org.eclipse.jdt.internal.core.search.PatternSearchJob.getIndexes(PatternSearchJob.java:94)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.cleanUpIndexes(IndexManager.java:108)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.saving(JavaModelManager.java:3374)\n\tat org.eclipse.core.internal.resources.SaveManager.executeLifecycle(SaveManager.java:335)\n\tat org.eclipse.core.internal.resources.SaveManager$1.run(SaveManager.java:160)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.internal.resources.SaveManager.broadcastLifecycle(SaveManager.java:163)\n\tat org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:969)\n\tat org.eclipse.core.internal.resources.Workspace.save(Workspace.java:1825)\n\tat org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor$3.run(IDEWorkbenchAdvisor.java:378)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)",
    "Kent,\n\nBenno said that the exception didn\u0027t happen again on next restart of eclipse. So, it sounds like the previous crash let the indexState in an invalid state with null keys... Can you investigate?\n\nThanks",
    "Benno, do you have any other search related plugins loaded such as a JSP indexer?\n\n\nI\u0027ve released protection in the IndexManager since it looks like an empty indexLocation path was added to the states table.\n\nI\u0027ll leave this bug open for now since we don\u0027t know how this can happen.",
    "(In reply to comment #4)\n\u003e Benno, do you have any other search related plugins loaded such as a JSP\n\u003e indexer?\n\u003e \n\nNo, just plain eclipse sdk.",
    "Please reopen if anyone sees this problem with a 3.3M6 build."
  ],
  "commentCreationDates": [
    "2007-03-01T08:46:02+01:00",
    "2007-03-01T08:46:37+01:00",
    "2007-03-01T09:19:55+01:00",
    "2007-03-01T09:29:40+01:00",
    "2007-03-01T18:44:29+01:00",
    "2007-03-02T09:06:11+01:00",
    "2007-03-23T19:54:47+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.writeSavedIndexNamesFile",
          "source": "IndexManager.java:752"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.updateIndexState",
          "source": "IndexManager.java:729"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.rebuildIndex",
          "source": "IndexManager.java:428"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.getIndex",
          "source": "IndexManager.java:222"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.getIndexes",
          "source": "PatternSearchJob.java:94"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.ensureReadyToRun",
          "source": "PatternSearchJob.java:51"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:177"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllSecondaryTypeNames",
          "source": "BasicSearchEngine.java:614"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.secondaryTypesSearching",
          "source": "JavaModelManager.java:3665"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.secondaryTypes",
          "source": "JavaModelManager.java:3534"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.findSecondaryType",
          "source": "NameLookup.java:546"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.findType",
          "source": "NameLookup.java:652"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.findType",
          "source": "NameLookup.java:572"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.find",
          "source": "SearchableEnvironment.java:96"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.findType",
          "source": "SearchableEnvironment.java:282"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CancelableNameEnvironment.findType",
          "source": "CancelableNameEnvironment.java:45"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType",
          "source": "LookupEnvironment.java:122"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage",
          "source": "PackageBinding.java:178"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage",
          "source": "Scope.java:2352"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getType",
          "source": "Scope.java:2092"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.SingleTypeReference.getTypeBinding",
          "source": "SingleTypeReference.java:44"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType",
          "source": "TypeReference.java:163"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType",
          "source": "TypeReference.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype",
          "source": "ClassScope.java:1113"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperclass",
          "source": "ClassScope.java:826"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy",
          "source": "ClassScope.java:951"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy",
          "source": "CompilationUnitScope.java:290"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings",
          "source": "LookupEnvironment.java:218"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings",
          "source": "LookupEnvironment.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.accept",
          "source": "CompilationUnitProblemFinder.java:112"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType",
          "source": "LookupEnvironment.java:134"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage",
          "source": "PackageBinding.java:178"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findImport",
          "source": "CompilationUnitScope.java:447"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findSingleImport",
          "source": "CompilationUnitScope.java:501"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInImports",
          "source": "CompilationUnitScope.java:357"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInTypes",
          "source": "CompilationUnitScope.java:426"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.resolve",
          "source": "Compiler.java:708"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.resolve",
          "source": "Compiler.java:755"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process",
          "source": "CompilationUnitProblemFinder.java:177"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process",
          "source": "CompilationUnitProblemFinder.java:249"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent",
          "source": "ReconcileWorkingCopyOperation.java:166"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:779"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1151"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1123"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.JavaModelUtil.reconcile",
          "source": "JavaModelUtil.java:695"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.getElementAt",
          "source": "CompilationUnitEditor.java:1303"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.getElementAt",
          "source": "CompilationUnitEditor.java:1284"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.adjustHighlightRange",
          "source": "JavaEditor.java:2258"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.selectAndReveal",
          "source": "AbstractTextEditor.java:5555"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.selectAndReveal",
          "source": "AbstractTextEditor.java:5529"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.doSetSelection",
          "source": "AbstractTextEditor.java:2498"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.doSetSelection",
          "source": "JavaEditor.java:2816"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.doRestoreState",
          "source": "AbstractTextEditor.java:6339"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor$ActivationListener.partActivated",
          "source": "AbstractTextEditor.java:855"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "175986",
      "date": "2007-03-01T08:46:02+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.writeSavedIndexNamesFile",
          "source": "IndexManager.java:752"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.updateIndexState",
          "source": "IndexManager.java:729"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.rebuildIndex",
          "source": "IndexManager.java:428"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.getIndex",
          "source": "IndexManager.java:222"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.getIndexes",
          "source": "PatternSearchJob.java:94"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.cleanUpIndexes",
          "source": "IndexManager.java:108"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.saving",
          "source": "JavaModelManager.java:3374"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.executeLifecycle",
          "source": "SaveManager.java:335"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager$1.run",
          "source": "SaveManager.java:160"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.broadcastLifecycle",
          "source": "SaveManager.java:163"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.save",
          "source": "SaveManager.java:969"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.save",
          "source": "Workspace.java:1825"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor$3.run",
          "source": "IDEWorkbenchAdvisor.java:378"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "175986",
      "date": "2007-03-01T09:19:55+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "175986",
  "bugId": "175986",
  "date": "2007-03-01T08:46:02+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}