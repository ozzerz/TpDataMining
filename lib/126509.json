{
  "comments": [
    "i use the attached Java class to create html reports using 10 threads, and i got the following exception,\n\njava.lang.ClassCastException\n\tat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getDriverConnectionFactory(JDBCDriverManager.java:176)\n\tat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect(JDBCDriverManager.java:133)\n\tat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection(JDBCDriverManager.java:94)\n\tat org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl(Connection.java:150)\n\tat org.eclipse.birt.report.data.oda.jdbc.Connection.open(Connection.java:111)\n\tat org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open(OdaConnection.java:239)\n\tat org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:124)\n\tat org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:155)\n\tat org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:147)\n\tat org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource(DataSourceRuntime.java:150)\n\tat org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.openDataSource(PreparedQuery.java:838)\n\tat org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.prepareExecution(PreparedQuery.java:661)\n\tat org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.access$0(PreparedQuery.java:637)\n\tat org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare(PreparedQuery.java:225)\n\tat org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:145)\n\tat org.eclipse.birt.report.engine.data.dte.DteDataEngine.execute(DteDataEngine.java:205)\n\tat org.eclipse.birt.report.engine.executor.QueryItemExecutor.openResultSet(QueryItemExecutor.java:62)\n\tat org.eclipse.birt.report.engine.executor.MultiLineItemExecutor.execute(MultiLineItemExecutor.java:77)\n\tat org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitMultiLineItem(ReportExecutorVisitor.java:126)\n\tat org.eclipse.birt.report.engine.ir.MultiLineItemDesign.accept(MultiLineItemDesign.java:66)\n\tat org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:125)\n\tat org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:89)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:175)\n\tat org.eclipse.birt.report.engine.parser.MultiThreadTest.run(MultiThreadTest.java:173)\n\tat java.lang.Thread.run(Unknown Source)",
    "Created an attachment (id\u003d34170)\nthe Java class\n\n",
    "note that the max. heap size is 1024.",
    "the above exception wasn\u0027t thrown out everytime i run MultiThreadTest.java, so it\u0027s kind of randomly generated.",
    "this issue was more clear with running 50 threads.",
    "Created an attachment (id\u003d35215)\nresource files\n\n",
    "This problem is caused by a bug in the plugin of birt.core, but the bug entry point is in DTP-ODA. DTP-ODA might needs to update its jar file of birt-core. Below is the check in message.\n\n//--------------------------------------------------------------\nWe use synchronized method to create a class loader which contains a error. The old source code looks like: \nIf (classLoader !\u003d null) \n        return classLoader \nSynchronized(this) \n        classLoader \u003d new ClassLoader() \nReturn classLoader; \n\nHere, if there mutiple threads wait for the syncrhonize(this), each thread will get different classLoader. Change the source code to:\n\nIf (classLoader !\u003d null) \n        return classLoader; \nSynchrnized (this) \n        if (classLoader \u003d\u003d null) \n                classLoader \u003d new ClassLoader \nReturn classLoader ",
    "Replaced DTP oda core library with latest version from BIRT 2.1M5",
    "Verified, 20060303"
  ],
  "commentCreationDates": [
    "2006-02-06T02:10:48+01:00",
    "2006-02-06T02:14:27+01:00",
    "2006-02-06T02:17:55+01:00",
    "2006-02-06T02:22:50+01:00",
    "2006-02-06T03:00:48+01:00",
    "2006-02-23T07:55:27+01:00",
    "2006-02-24T08:58:47+01:00",
    "2006-03-05T04:14:39+01:00",
    "2006-03-06T06:58:14+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getDriverConnectionFactory",
          "source": "JDBCDriverManager.java:176"
        },
        {
          "method": "org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect",
          "source": "JDBCDriverManager.java:133"
        },
        {
          "method": "org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection",
          "source": "JDBCDriverManager.java:94"
        },
        {
          "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl",
          "source": "Connection.java:150"
        },
        {
          "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.open",
          "source": "Connection.java:111"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open",
          "source": "OdaConnection.java:239"
        },
        {
          "method": "org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection",
          "source": "ConnectionManager.java:124"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.newConnection",
          "source": "DataSource.java:155"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.open",
          "source": "DataSource.java:147"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource",
          "source": "DataSourceRuntime.java:150"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.openDataSource",
          "source": "PreparedQuery.java:838"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.prepareExecution",
          "source": "PreparedQuery.java:661"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.access$0",
          "source": "PreparedQuery.java:637"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare",
          "source": "PreparedQuery.java:225"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute",
          "source": "PreparedDataSourceQuery.java:145"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.DteDataEngine.execute",
          "source": "DteDataEngine.java:205"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.QueryItemExecutor.openResultSet",
          "source": "QueryItemExecutor.java:62"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.MultiLineItemExecutor.execute",
          "source": "MultiLineItemExecutor.java:77"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitMultiLineItem",
          "source": "ReportExecutorVisitor.java:126"
        },
        {
          "method": "org.eclipse.birt.report.engine.ir.MultiLineItemDesign.accept",
          "source": "MultiLineItemDesign.java:66"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.execute",
          "source": "ReportExecutor.java:125"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.execute",
          "source": "ReportExecutor.java:89"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:175"
        },
        {
          "method": "org.eclipse.birt.report.engine.parser.MultiThreadTest.run",
          "source": "MultiThreadTest.java:173"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "126509",
      "date": "2006-02-06T02:10:48+01:00",
      "product": "BIRT",
      "component": "Data",
      "severity": "major"
    }
  ],
  "groupId": "126509",
  "bugId": "126509",
  "date": "2006-02-06T02:10:48+01:00",
  "product": "BIRT",
  "component": "Data",
  "severity": "major"
}