{
  "comments": [
    "I\u0027m not sure where the root cause of this exception is, so I\u0027m opening this against Plaform for starters.\n\nWhile debugging Eclipse, I routinely hit exceptions like the following:\n\n\n!ENTRY org.eclipse.ui.workbench 4 2 2006-04-19 12:12:44.505\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\norg.eclipse.core.runtime.AssertionFailedException: null argument:\n\tat org.eclipse.core.runtime.Assert.isNotNull(Assert.java:84)\n\tat org.eclipse.core.runtime.Assert.isNotNull(Assert.java:71)\n\tat org.eclipse.core.expressions.EvaluationContext.getVariable(EvaluationContext.java:130)\n\tat org.eclipse.ui.internal.expressions.WorkbenchWindowExpression.evaluate(WorkbenchWindowExpression.java:80)\n\tat org.eclipse.ui.internal.expressions.LegacyViewerContributionExpression.evaluate(LegacyViewerContributionExpression.java:111)\n\tat org.eclipse.ui.internal.expressions.CompositeExpression.evaluateAnd(CompositeExpression.java:55)\n\tat org.eclipse.ui.internal.expressions.AndExpression.evaluate(AndExpression.java:46)\n\tat org.eclipse.ui.internal.services.EvaluationResultCache.evaluate(EvaluationResultCache.java:74)\n\tat org.eclipse.ui.internal.services.ExpressionAuthority.evaluate(ExpressionAuthority.java:159)\n\tat org.eclipse.ui.internal.handlers.HandlerAuthority.sourceChanged(HandlerAuthority.java:394)\n\tat org.eclipse.ui.internal.services.ExpressionAuthority.sourceChanged(ExpressionAuthority.java:279)\n\tat org.eclipse.ui.AbstractSourceProvider.fireSourceChanged(AbstractSourceProvider.java:79)\n\tat org.eclipse.ui.internal.services.CurrentSelectionSourceProvider.selectionChanged(CurrentSelectionSourceProvider.java:115)\n\tat org.eclipse.ui.internal.services.CurrentSelectionSourceProvider.swapListeners(CurrentSelectionSourceProvider.java:137)\n\tat org.eclipse.ui.internal.services.CurrentSelectionSourceProvider.access$0(CurrentSelectionSourceProvider.java:131)\n\tat org.eclipse.ui.internal.services.CurrentSelectionSourceProvider$1.windowDeactivated(CurrentSelectionSourceProvider.java:62)\n\tat org.eclipse.ui.internal.Workbench$9.run(Workbench.java:625)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.ui.internal.Workbench.fireWindowDeactivated(Workbench.java:623)\n\tat org.eclipse.ui.internal.WorkbenchWindow$7.shellDeactivated(WorkbenchWindow.java:2698)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:168)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1588)\n\tat org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1714)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3244)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1539)\n\tat org.eclipse.swt.widgets.Shell.windowProc(Shell.java:1634)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4023)\n\tat org.eclipse.swt.internal.win32.OS.BringWindowToTop(Native Method)\n\tat org.eclipse.swt.widgets.Decorations.bringToTop(Decorations.java:183)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:997)\n\tat org.eclipse.jface.window.Window.open(Window.java:792)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:322)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:60)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:68)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.ui.internal.Workbench.fireWindowDeactivated(Workbench.java:623)\n\tat org.eclipse.ui.internal.WorkbenchWindow$7.shellDeactivated(WorkbenchWindow.java:2698)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:168)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1588)\n\tat org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1714)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3244)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1539)\n\tat org.eclipse.swt.widgets.Shell.windowProc(Shell.java:1634)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4023)\n\tat org.eclipse.swt.internal.win32.OS.BringWindowToTop(Native Method)\n\tat org.eclipse.swt.widgets.Decorations.bringToTop(Decorations.java:183)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:997)\n\tat org.eclipse.jface.window.Window.open(Window.java:792)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:322)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:60)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:68)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.ui.internal.Workbench.fireWindowDeactivated(Workbench.java:623)\n\tat org.eclipse.ui.internal.WorkbenchWindow$7.shellDeactivated(WorkbenchWindow.java:2698)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:168)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1588)\n\tat org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1714)\n\nOnce hit, these can spawn infinate looping where a SafeRunner generates an exception, tries to open a dialog, fails, tries to generate an exception, fails,  tries to open a dialog, etc .... These errors bring the entire workbench down. \n\nI\u0027m running on an IBM JRE 5.0 and though that it might have been related to J9 hotswapping. Part of the reason I thought it might have been a hotswapping concern is due to a NullPointerException on the following lines in ActionContributionItem.update(String):\n\n\n771:\tif ((\"gtk\".equals(SWT.getPlatform())) \u0026\u0026 (callback instanceof BindingManagerCallback) //$NON-NLS-1$\n772:\t\u0026\u0026 (commandId !\u003d null)) {\n773:\tfinal IBindingManagerCallback bindingManagerCallback \u003d (IBindingManagerCallback) callback;\n774:\tfinal IKeyLookup lookup \u003d KeyLookupFactory.getDefault();\n\nWith a little investigating, I found that the only way this NPE could have been generated was for \"gtk\" to be null. I have seen similar behavior in other places where static constants are seemingly null. Sometimes this is after a hotswap, but I see it now even outside of J9. These particular lines cause the problem of crashing the workbench around 80% of the time. The crash almost always occurs when clicking back onto the Development Eclipse instance from the debuging Eclipse instance.\n\n\nI will attach three separate logs that show these errors.",
    "Created an attachment (id\u003d38947)\nCrash \n\n",
    "Created an attachment (id\u003d38948)\nCrash\n\n",
    "Created an attachment (id\u003d38950)\nCrash\n\n",
    "Sounds like a flaky VM build to me... can you try with another VM? I believe this NPE in the log is also impossible in a well-behaved VM:\n\njava.lang.NullPointerException\n\tat java.lang.String.startsWith(String.java:1009)\n\tat java.lang.String.startsWith(String.java:994)\n\tat org.eclipse.osgi.framework.internal.core.ServiceReferenceImpl.isAssignableTo(ServiceReferenceImpl.java:229)\n\nCan you confirm that these errors are happening in the debug instance of Eclipse and not your development instance?",
    "\nThe errors do occur in the development target, not the instance of Eclipse that I am primaryly developing in. \n\nBoth Eclipse instances (target and development) are running a 5.0 JRE. I can switch to an IBM JRE 1.4.2 and watch for the problem to pop up again. I\u0027m 75% sure though that I\u0027ve seen the issue on the 1.4.2sr1 JVM as well though; so I\u0027m not really convinced it\u0027s _only_ a JVM issue. I\u0027m not familiar with the OSGI layers enough to credibly theorize here, but do they handle thier own class(re-)loading for bundle classloading?\n",
    "OSGi has its own class loaders, but a ClassLoader subclass is just responsible for figuring out where to get the bytes of the class file from. They don\u0027t have the power to, for example, make constants null.  ",
    "No news from Michael, closing for now.",
    "After an upgrade of my JRE, I no longer saw these issues. I chaulked them up to a bug in the JRE hotswap routines. \n\nClosing as invalid is fine with me. "
  ],
  "commentCreationDates": [
    "2006-04-19T18:31:40+02:00",
    "2006-04-19T18:32:26+02:00",
    "2006-04-19T18:32:56+02:00",
    "2006-04-19T18:33:34+02:00",
    "2006-04-19T20:09:09+02:00",
    "2006-04-19T20:55:02+02:00",
    "2006-04-19T21:05:19+02:00",
    "2006-09-13T21:41:40+02:00",
    "2006-09-13T22:00:08+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.AssertionFailedException",
      "message": "null argument:",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isNotNull",
          "source": "Assert.java:84"
        },
        {
          "method": "org.eclipse.core.runtime.Assert.isNotNull",
          "source": "Assert.java:71"
        },
        {
          "method": "org.eclipse.core.expressions.EvaluationContext.getVariable",
          "source": "EvaluationContext.java:130"
        },
        {
          "method": "org.eclipse.ui.internal.expressions.WorkbenchWindowExpression.evaluate",
          "source": "WorkbenchWindowExpression.java:80"
        },
        {
          "method": "org.eclipse.ui.internal.expressions.LegacyViewerContributionExpression.evaluate",
          "source": "LegacyViewerContributionExpression.java:111"
        },
        {
          "method": "org.eclipse.ui.internal.expressions.CompositeExpression.evaluateAnd",
          "source": "CompositeExpression.java:55"
        },
        {
          "method": "org.eclipse.ui.internal.expressions.AndExpression.evaluate",
          "source": "AndExpression.java:46"
        },
        {
          "method": "org.eclipse.ui.internal.services.EvaluationResultCache.evaluate",
          "source": "EvaluationResultCache.java:74"
        },
        {
          "method": "org.eclipse.ui.internal.services.ExpressionAuthority.evaluate",
          "source": "ExpressionAuthority.java:159"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.HandlerAuthority.sourceChanged",
          "source": "HandlerAuthority.java:394"
        },
        {
          "method": "org.eclipse.ui.internal.services.ExpressionAuthority.sourceChanged",
          "source": "ExpressionAuthority.java:279"
        },
        {
          "method": "org.eclipse.ui.AbstractSourceProvider.fireSourceChanged",
          "source": "AbstractSourceProvider.java:79"
        },
        {
          "method": "org.eclipse.ui.internal.services.CurrentSelectionSourceProvider.selectionChanged",
          "source": "CurrentSelectionSourceProvider.java:115"
        },
        {
          "method": "org.eclipse.ui.internal.services.CurrentSelectionSourceProvider.swapListeners",
          "source": "CurrentSelectionSourceProvider.java:137"
        },
        {
          "method": "org.eclipse.ui.internal.services.CurrentSelectionSourceProvider.access$0",
          "source": "CurrentSelectionSourceProvider.java:131"
        },
        {
          "method": "org.eclipse.ui.internal.services.CurrentSelectionSourceProvider$1.windowDeactivated",
          "source": "CurrentSelectionSourceProvider.java:62"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$9.run",
          "source": "Workbench.java:625"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.fireWindowDeactivated",
          "source": "Workbench.java:623"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$7.shellDeactivated",
          "source": "WorkbenchWindow.java:2698"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:168"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:925"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:949"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:930"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:1588"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_ACTIVATE",
          "source": "Shell.java:1714"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3244"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1539"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.windowProc",
          "source": "Shell.java:1634"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4023"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.BringWindowToTop",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.bringToTop",
          "source": "Decorations.java:183"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:997"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:792"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:322"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:60"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.fireWindowDeactivated",
          "source": "Workbench.java:623"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$7.shellDeactivated",
          "source": "WorkbenchWindow.java:2698"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:168"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:925"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:949"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:930"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:1588"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_ACTIVATE",
          "source": "Shell.java:1714"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3244"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1539"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.windowProc",
          "source": "Shell.java:1634"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4023"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.BringWindowToTop",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.bringToTop",
          "source": "Decorations.java:183"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:997"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:792"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:322"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:60"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.fireWindowDeactivated",
          "source": "Workbench.java:623"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$7.shellDeactivated",
          "source": "WorkbenchWindow.java:2698"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:168"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:925"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:949"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:930"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:1588"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_ACTIVATE",
          "source": "Shell.java:1714"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "137535",
      "date": "2006-04-19T18:31:40+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.lang.String.startsWith",
          "source": "String.java:1009"
        },
        {
          "method": "java.lang.String.startsWith",
          "source": "String.java:994"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ServiceReferenceImpl.isAssignableTo",
          "source": "ServiceReferenceImpl.java:229"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "137535",
      "date": "2006-04-19T20:09:09+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "critical"
    }
  ],
  "groupId": "137535",
  "bugId": "137535",
  "date": "2006-04-19T18:31:40+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "critical"
}