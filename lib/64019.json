{
  "comments": [
    "When I change a value (any value) and hit apply I get this exception.\n\n---------\njava.lang.IllegalArgumentException: Attempted to beginRule: R/, does not match\nouter scope rule: MultiRule[Lorg.eclipse.core.runtime.jobs.ISchedulingRule;@afa1cb\n\tat org.eclipse.core.internal.runtime.Assert.isLegal(Assert.java:58)\n\tat org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:106)\n\tat org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:200)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:58)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:170)\n\tat org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:95)\n\tat\norg.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1627)\n\tat org.eclipse.core.internal.resources.File.setContents(File.java:330)\n\tat org.eclipse.core.internal.resources.File.setContents(File.java:390)\n\tat\norg.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.writeNewFile(LaunchConfigurationWorkingCopy.java:314)\n\tat\norg.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.doSave0(LaunchConfigurationWorkingCopy.java:225)\n\tat\norg.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.access$0(LaunchConfigurationWorkingCopy.java:211)\n\tat\norg.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy$1.run(LaunchConfigurationWorkingCopy.java:166)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1672)\n\tat\norg.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.doSave(LaunchConfigurationWorkingCopy.java:170)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.handleApplyPressed(LaunchConfigurationTabGroupViewer.java:1199)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationPropertiesDialog.okPressed(LaunchConfigurationPropertiesDialog.java:234)\n\tat org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:365)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog.buttonPressed(LaunchConfigurationsDialog.java:288)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog.open(LaunchConfigurationsDialog.java:419)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationPropertiesDialog.open(LaunchConfigurationPropertiesDialog.java:243)\n\tat\norg.eclipse.debug.ui.DebugUITools.openLaunchConfigurationPropertiesDialog(DebugUITools.java:423)\n\tat\norg.eclipse.debug.ui.DebugUITools.openLaunchConfigurationPropertiesDialog(DebugUITools.java:402)\n\tat\norg.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.editConfiguration(BuilderPropertyPage.java:545)\n\tat\norg.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.handleEditButtonPressed(BuilderPropertyPage.java:616)\n\tat\norg.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.handleButtonPressed(BuilderPropertyPage.java:352)\n\tat\norg.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.access$0(BuilderPropertyPage.java:346)\n\tat\norg.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage$1.widgetSelected(BuilderPropertyPage.java:119)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n\tat org.eclipse.jface.window.Window.open(Window.java:648)\n\tat org.eclipse.ui.dialogs.PropertyDialogAction.run(PropertyDialogAction.java:177)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:899)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:850)\n\tat\norg.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContributionItem.java:769)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:307)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:638)\n\tat org.eclipse.core.launcher.Main.main(Main.java:622)\n\n------\nMy launch config follows:\n\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003claunchConfiguration type\u003d\"org.eclipse.ant.AntBuilderLaunchConfigurationType\"\u003e\n\u003cstringAttribute key\u003d\"process_factory_id\"\nvalue\u003d\"org.eclipse.ant.ui.remoteAntProcessFactory\"/\u003e\n\u003cbooleanAttribute key\u003d\"org.eclipse.debug.ui.ATTR_LAUNCH_IN_BACKGROUND\"\nvalue\u003d\"false\"/\u003e\n\u003cbooleanAttribute key\u003d\"org.eclipse.jdt.launching.DEFAULT_CLASSPATH\" value\u003d\"true\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.jdt.launching.MAIN_TYPE\"\nvalue\u003d\"org.eclipse.ant.internal.ui.antsupport.InternalAntRunner\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.ui.externaltools.ATTR_RUN_BUILD_KINDS\"\nvalue\u003d\"full,incremental,\"/\u003e\n\u003cbooleanAttribute key\u003d\"org.eclipse.debug.core.appendEnvironmentVariables\"\nvalue\u003d\"true\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.jdt.launching.WORKING_DIRECTORY\"\nvalue\u003d\"C:\\esbe5\\workspace\\com.pearson.ant.task.projdesc\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.jdt.launching.CLASSPATH_PROVIDER\"\nvalue\u003d\"org.eclipse.ant.ui.AntClasspathProvider\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.jdt.launching.VM_INSTALL_TYPE_ID\"\nvalue\u003d\"org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.jdt.launching.VM_INSTALL_NAME\"\nvalue\u003d\"j2sdk1.4.1_01\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.debug.core.ATTR_REFRESH_SCOPE\"\nvalue\u003d\"${project}\"/\u003e\n\u003cstringAttribute key\u003d\"org.eclipse.ui.externaltools.ATTR_LOCATION\"\nvalue\u003d\"${workspace_loc:/com.pearson.ant.task.projdesc/build.xml}\"/\u003e\n\u003c/launchConfiguration\u003e",
    "Modifying the launch config file directly works just fine.",
    "Which build is this on? I cannot reproduce on I200405251600.\nThe problem would appear to be in platform core.",
    "I am seeing this in M9. \n\nI don\u0027t see anything in the stack trace to suggest it but it may be related to \nthe p4eclipse team provider as I think I saw this go away when I uninstalled \nit. In any case, I expect that Eclipse wants to be hardened against whatever is \nat fault here.",
    "I am going to move this to platform core.\nThere are other bugs similar to this that may be duplicates but I will let the \nexperts decide.",
    "Bug is in LaunchConfigurationWorkingCopy.getSchedulingRule. It is assuming that\nthe parent of the file is always the appropriate scheduling rule for modifying\nthe file. This may not be true if a different team provider is installed on the\nproject that is more pessimistic in its locking.\n\nRather than using:\n\nchangedFiles.add(files[0].getParent());\n\nIt should use the IResourceRuleFactory instead in order to insulate you from the\nactual rule required by the operation:\n\nIResourceRuleFactory fac \u003d ResourcesPlugin.getWorkspace().getRuleFactory();\nchangedFiles.add(fac.modifyRule(files[0]));\n",
    "Fixed in LaunchConfigurationWorkingCopy.",
    "\u003c\u003cThanks John!\u003e\u003e\n\nPlease verify DarinW.",
    "I owed you one for fixing my Ant scripts :)",
    "I still needed to use:\n\nchangedFiles.add(fac.modifyRule(files[0].getParent())); for things to work.\n\nIs this expected?\n",
    "Looking more closely at doSave0(), I see that it create a new file in some\ncases. That\u0027s why the modifyRule doesn\u0027t work in that case. The save also calls\nvalidateEdit. The safest approach would be something like:\n\nMultiRule.combine(fac.createRule(file), fac.validateEditRule(files));\n\nSorry, I know it\u0027s complicated. You essentially need the rules for all resource\nmodification operations that will happen inside the workspace runnable.",
    "This is much harder than writing an Ant buildfile...you got the short end of \nthe deal :-)\n\nI have followed the expert\u0027s advice.",
    "Well, I\u0027ll just agree with the expert.",
    "John-Mason: can you verify this fix with the latest integration build? This is\ndefinitely a result of you having the p4eclipse plugin installed.  With the fix\nyou should not get any such errors when you have the p4eclipse plugin.",
    "This went out with I20040527 (Timestamp: 200405271200)?",
    "Yes.",
    "I have verified this with p4eclipse in RC 1.",
    "Thanks John-Mason.",
    "*** Bug 66275 has been marked as a duplicate of this bug. ***",
    "We use a create rule when a file will be deleted. For example moving a shared \nconfig should use a delete rule for the old config and a create rule for the \nnew cofig.",
    "Fixed. The code now creates a \u0027create\u0027 rule when creating a new file, \na \u0027modify\u0027 rule when modifying a file, and a \u0027delete\u0027 rule when deleting a \nfile (as well as the validate/edits).",
    "Please verify, Darin (S) - changes in LaunchConfigurationWorkingCopy.",
    "Verified."
  ],
  "commentCreationDates": [
    "2004-05-26T01:11:18+02:00",
    "2004-05-26T01:19:09+02:00",
    "2004-05-26T01:24:37+02:00",
    "2004-05-26T01:28:52+02:00",
    "2004-05-26T01:31:09+02:00",
    "2004-05-26T22:19:36+02:00",
    "2004-05-27T01:30:24+02:00",
    "2004-05-27T01:34:09+02:00",
    "2004-05-27T01:40:18+02:00",
    "2004-05-27T01:42:36+02:00",
    "2004-05-27T01:57:17+02:00",
    "2004-05-27T05:18:27+02:00",
    "2004-05-27T17:16:32+02:00",
    "2004-05-27T21:33:28+02:00",
    "2004-05-27T21:40:48+02:00",
    "2004-05-27T22:54:54+02:00",
    "2004-06-03T22:09:53+02:00",
    "2004-06-03T22:30:50+02:00",
    "2004-06-10T16:14:00+02:00",
    "2004-06-10T17:10:44+02:00",
    "2004-06-10T17:44:44+02:00",
    "2004-06-10T17:45:21+02:00",
    "2004-06-11T05:28:47+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: R/, does not match outer scope rule: MultiRule[Lorg.eclipse.core.runtime.jobs.ISchedulingRule;@afa1cb",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Assert.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:106"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:170"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:95"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1627"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.setContents",
          "source": "File.java:330"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.setContents",
          "source": "File.java:390"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.writeNewFile",
          "source": "LaunchConfigurationWorkingCopy.java:314"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.doSave0",
          "source": "LaunchConfigurationWorkingCopy.java:225"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.access$0",
          "source": "LaunchConfigurationWorkingCopy.java:211"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy$1.run",
          "source": "LaunchConfigurationWorkingCopy.java:166"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1672"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfigurationWorkingCopy.doSave",
          "source": "LaunchConfigurationWorkingCopy.java:170"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.handleApplyPressed",
          "source": "LaunchConfigurationTabGroupViewer.java:1199"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationPropertiesDialog.okPressed",
          "source": "LaunchConfigurationPropertiesDialog.java:234"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.buttonPressed",
          "source": "Dialog.java:365"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog.buttonPressed",
          "source": "LaunchConfigurationsDialog.java:288"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:505"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog.open",
          "source": "LaunchConfigurationsDialog.java:419"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationPropertiesDialog.open",
          "source": "LaunchConfigurationPropertiesDialog.java:243"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.openLaunchConfigurationPropertiesDialog",
          "source": "DebugUITools.java:423"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.openLaunchConfigurationPropertiesDialog",
          "source": "DebugUITools.java:402"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.editConfiguration",
          "source": "BuilderPropertyPage.java:545"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.handleEditButtonPressed",
          "source": "BuilderPropertyPage.java:616"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.handleButtonPressed",
          "source": "BuilderPropertyPage.java:352"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage.access$0",
          "source": "BuilderPropertyPage.java:346"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.ui.BuilderPropertyPage$1.widgetSelected",
          "source": "BuilderPropertyPage.java:119"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.ui.dialogs.PropertyDialogAction.run",
          "source": "PropertyDialogAction.java:177"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:899"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:850"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionContributionItem.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1363"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:253"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:97"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:307"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:256"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:127"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:638"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:622"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "64019",
      "date": "2004-05-26T01:11:18+02:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "64019",
  "bugId": "64019",
  "date": "2004-05-26T01:11:18+02:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "normal"
}