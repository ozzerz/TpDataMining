{
  "comments": [
    "Build: I20070306\n\n1) Take Sleak snapshot\n2) Open the Open Type dialog\n3) Close the dialog\n4) Take Sleak diff\n\n-\u003e Three or more images are leaked (class icon, interface icon, and sometimes various decorated variations). It looks like ImageManager is never disposed. (note you could use JFace LocalResourceManager rather than a custom class)\n\nSample sleak output:\n\njava.lang.Error\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java:58)\n\tat org.eclipse.swt.graphics.Device.new_Object(Device.java:786)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:491)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:289)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:227)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:205)\n\tat org.eclipse.jdt.internal.ui.dialogs.FilteredTypesSelectionDialog$ImageManager.get(FilteredTypesSelectionDialog.java:975)\n\tat org.eclipse.jdt.internal.ui.dialogs.FilteredTypesSelectionDialog$TypeItemLabelProvider.getImage(FilteredTypesSelectionDialog.java:677)\n\tat org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$ItemsListLabelProvider.getImage(FilteredItemsSelectionDialog.java:1447)\n\tat org.eclipse.jface.viewers.WrappedViewerLabelProvider.getImage(WrappedViewerLabelProvider.java:102)\n\tat org.eclipse.jface.viewers.ColumnLabelProvider.update(ColumnLabelProvider.java:36)\n\tat org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:139)\n\tat org.eclipse.jface.viewers.AbstractTableViewer.doUpdateItem(AbstractTableViewer.java:363)\n\tat org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:465)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:850)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:45)\n\tat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:153)\n\tat org.eclipse.jface.viewers.StructuredViewer.refreshItem(StructuredViewer.java:1443)\n\tat org.eclipse.jface.viewers.AbstractTableViewer.replace(AbstractTableViewer.java:984)\n\tat org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$ContentProvider.updateElement(FilteredItemsSelectionDialog.java:2661)\n\tat org.eclipse.jface.viewers.AbstractTableViewer$1.handleEvent(AbstractTableViewer.java:79)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)",
    "Created an attachment (id\u003d61139)\nGDI leak patch\n\nHere\u0027s a patch to fix the gdi leak. I used a LocalResourceManager tied to the parent composite. \n\nI originally tried to connect the LRM in the constructor to the passed in shell. This doesn\u0027t work sense the shell is actually the workbench shell which won\u0027t be disposed until shutdown.",
    "Fixed in HEAD by using JDT/UI\u0027s shared images registry (since these images are already used all the time)."
  ],
  "commentCreationDates": [
    "2007-03-14T20:38:32+01:00",
    "2007-03-16T18:34:07+01:00",
    "2007-03-19T12:08:15+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Error",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java:58"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.new_Object",
          "source": "Device.java:786"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.\u003cinit\u003e",
          "source": "Image.java:491"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:289"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:227"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:205"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.FilteredTypesSelectionDialog$ImageManager.get",
          "source": "FilteredTypesSelectionDialog.java:975"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.FilteredTypesSelectionDialog$TypeItemLabelProvider.getImage",
          "source": "FilteredTypesSelectionDialog.java:677"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$ItemsListLabelProvider.getImage",
          "source": "FilteredItemsSelectionDialog.java:1447"
        },
        {
          "method": "org.eclipse.jface.viewers.WrappedViewerLabelProvider.getImage",
          "source": "WrappedViewerLabelProvider.java:102"
        },
        {
          "method": "org.eclipse.jface.viewers.ColumnLabelProvider.update",
          "source": "ColumnLabelProvider.java:36"
        },
        {
          "method": "org.eclipse.jface.viewers.ViewerColumn.refresh",
          "source": "ViewerColumn.java:139"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTableViewer.doUpdateItem",
          "source": "AbstractTableViewer.java:363"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:465"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:850"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:45"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:153"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refreshItem",
          "source": "StructuredViewer.java:1443"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTableViewer.replace",
          "source": "AbstractTableViewer.java:984"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$ContentProvider.updateElement",
          "source": "FilteredItemsSelectionDialog.java:2661"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTableViewer$1.handleEvent",
          "source": "AbstractTableViewer.java:79"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "177411",
      "date": "2007-03-14T20:38:32+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "177411",
  "bugId": "177411",
  "date": "2007-03-14T20:38:32+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}