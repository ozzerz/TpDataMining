{
  "comments": [
    "I20050315-1100\n\nI added new code that was removing an excecution listener while being notified\nabout an command execution.\n\n\n!ENTRY org.eclipse.ui 4 4 2005-03-21 13:24:54.125\n!MESSAGE Unhandled event loop exception\nUnhandled event loop exception\nReason:\n\n!ENTRY org.eclipse.ui 4 0 2005-03-21 13:24:54.125\n!MESSAGE java.util.ConcurrentModificationException\n!STACK 0\njava.util.ConcurrentModificationException\n\tat java.util.AbstractList$Itr.checkForComodification(AbstractList.java:448)\n\tat java.util.AbstractList$Itr.next(AbstractList.java:419)\n\tat\norg.eclipse.core.commands.CommandManager$ExecutionListener.postExecuteSuccess(CommandManager.java:78)\n\tat org.eclipse.core.commands.Command.firePostExecuteSuccess(Command.java:425)\n\tat org.eclipse.core.commands.Command.execute(Command.java:337)\n\tat\norg.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:395)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:418)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:695)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:738)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:509)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:452)\n\tat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:219)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:777)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:841)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:866)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:851)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:879)\n\tat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:875)\n\tat org.eclipse.swt.widgets.Widget.wmSysKeyDown(Widget.java:2045)\n\tat org.eclipse.swt.widgets.Control.WM_SYSKEYDOWN(Control.java:3762)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3097)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3466)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1548)\n\tat org.eclipse.swt.internal.BidiUtil.windowProc(BidiUtil.java:648)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1624)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2525)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1520)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1484)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:305)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:338)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:151)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:268)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:260)\n\tat org.eclipse.core.launcher.Main.run(Main.java:887)\n\tat org.eclipse.core.launcher.Main.main(Main.java:871)\njava.util.ConcurrentModificationException",
    "Not sure whether this belongs to Runtime or Resources.",
    "Please note that the bug is in Command and CommandManager.",
    "Why do you need to remove the listener during the postExecuteSuccess?  How are\nyou using this API?",
    "See bug 88632. The idea is to listen for commands being executed, so that we can\nend the compound text change. Since we only want to listen for command execution\nonce a compound change has started, we have to remove the listener upon\nnotification.\n\nI see no reason why the code shouldn\u0027t allow this.",
    "I can fix this up, but I don\u0027t have enough time for 3.1 M6.",
    "This must have ended in the resources bucket by accident.  Changing component to UI.",
    "I fixed all the possible cases where this can happen in the Command and\nCommandManager.  I\u0027ve also posted a general design question to platform-ui-dev,\nas this particular (broken) pattern seems to appear elsewhere as well.\n",
    "Verified in I20050509-2010."
  ],
  "commentCreationDates": [
    "2005-03-21T12:27:46+01:00",
    "2005-03-21T12:29:01+01:00",
    "2005-03-21T13:43:58+01:00",
    "2005-03-21T15:28:03+01:00",
    "2005-03-21T15:56:41+01:00",
    "2005-03-21T15:58:48+01:00",
    "2005-04-27T21:17:19+02:00",
    "2005-05-06T20:49:58+02:00",
    "2005-05-11T21:43:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.ConcurrentModificationException",
      "elements": [
        {
          "method": "java.util.AbstractList$Itr.checkForComodification",
          "source": "AbstractList.java:448"
        },
        {
          "method": "java.util.AbstractList$Itr.next",
          "source": "AbstractList.java:419"
        },
        {
          "method": "org.eclipse.core.commands.CommandManager$ExecutionListener.postExecuteSuccess",
          "source": "CommandManager.java:78"
        },
        {
          "method": "org.eclipse.core.commands.Command.firePostExecuteSuccess",
          "source": "Command.java:425"
        },
        {
          "method": "org.eclipse.core.commands.Command.execute",
          "source": "Command.java:337"
        },
        {
          "method": "org.eclipse.core.commands.ParameterizedCommand.execute",
          "source": "ParameterizedCommand.java:395"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:418"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:695"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:738"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:509"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2",
          "source": "WorkbenchKeyboard.java:452"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent",
          "source": "WorkbenchKeyboard.java:219"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:777"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:841"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:866"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:851"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:879"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:875"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.wmSysKeyDown",
          "source": "Widget.java:2045"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_SYSKEYDOWN",
          "source": "Control.java:3762"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3097"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3466"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1548"
        },
        {
          "method": "org.eclipse.swt.internal.BidiUtil.windowProc",
          "source": "BidiUtil.java:648"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1624"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2525"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1520"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1484"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:305"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:228"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:338"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:151"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:268"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:260"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:887"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:871"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "88629",
      "date": "2005-03-21T12:27:46+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "88629",
  "bugId": "88629",
  "date": "2005-03-21T12:27:46+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}