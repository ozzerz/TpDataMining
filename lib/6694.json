{
  "comments": [
    "I am trying to create a fragment that adds the xalan.jar file to \norg.eclipse.ant.core. However, xalan.jar contains its own implementations of \nsome of the org.xml.sax classes. The xerces.jar file in org.apache.xerces \ncontains different implementations of some of the same files. There appears to \nbe no way to make xerces and xalan work properly together.\n\nThe underlying problem seems to be that while Ant\u0027s classloader sees one \nversion of the org.xml.sax classes, other plugins that depend on both \norg.eclipse.and.coree and org.apache.xerces may see a different version.\n\nWith a simple xalan fragment that just adds xalan.jar to org.eclipse.ant.core, \nany reference to the classes in xalan.jar would cause Ant to \nreport \"java.lang.LinkageError: Class org/xml/sax/InputSource violates loader \nconstraints\". To get around the problem, I added a copy of xerces.jar to the \nfragment. This appeared to make everything work (Ant had access to the jar \nfile).\n\nHowever, when running a custom Ant task (\u003cfetch\u003e) defined in \norg.eclipse.pde.core, the same error occurs when the Ant task was parsing xml \nfiles (xerces\u0027 domain). Removing the extra copy of the xerces.jar file reports \na problem very similar to the original case.\n\nIt looks like the various plugins\u0027 classloaders are getting confused in this \nsituation. Given Eclipse\u0027s plugin-centric view of the world, we should expect \nto encounter similar situations in the future.",
    "Created an attachment (id\u003d159)\nAnt script output with Eclipse debugging messages\n",
    "Created an attachment (id\u003d160)\nAnt script output with Eclipse debugging messages\n",
    "Created an attachment (id\u003d161)\nStack trace\n",
    "Created an attachment (id\u003d202)\norg.eclipse.ant.optional.xalan fragment.xml\n",
    "I have attached the fragment.xml for org.eclipse.ant.optional.xalan. To \nrecreate the entire fragment, just grab the xalan jar from \nhttp://xml.apache.org/xalan-j/index.html, and package as appropriate.\n\nWhen the fragment is installed, running ant scripts becomes impossible. An \nerror dialog pops up, saying \"An internal error has occurred. Class \norg/xml/sax/InputSource violates loader constraints. See error log for more \ndetails.\" The error was signaled even for the empty script given below:\n\n\u003cproject default\u003d\"run\"\u003e\n  \u003ctarget name\u003d\"run\"\u003e\n  \u003c/target\u003e\n\u003c/project\u003e\n\nThe stack trace in the log file is as follows:\n\nLog: Thu Dec 20 10:15:06 EST 2001\n1 org.eclipse.core.resources 4 Unhandled exception caught in event loop.\nLog: Thu Dec 20 10:15:06 EST 2001\n4 org.eclipse.ui 0 Class org/xml/sax/InputSource violates loader constraints\njava.lang.LinkageError: Class org/xml/sax/InputSource violates loader \nconstraints\n\tat org.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:117)\n\tat org.apache.tools.ant.ProjectHelper.configureProject\n(ProjectHelper.java:85)\n\tat org.eclipse.ant.internal.ui.AntAction.extractProject\n(AntAction.java:67)\n\tat org.eclipse.ant.internal.ui.AntAction.run(AntAction.java:49)\n\tat org.eclipse.ant.internal.ui.RunAntActionDelegate.run\n(RunAntActionDelegate.java:43)\n\tat org.eclipse.ui.internal.PluginAction.run(PluginAction.java:192)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:452)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:361)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:352)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:47)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:635)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:798)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:821)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:151)\n\tat org.eclipse.core.launcher.Main.run(Main.java:502)\n\tat org.eclipse.core.launcher.Main.main(Main.java:362)\n",
    "A working version of the fragment is available in our internal desktop \nrepository. This version of the fragment has the current work-around added to \nit. To produce the reported behaviour, delete the xerces.jar file, and remove \nthe reference to it in the fragment.xml of org.eclipse.ant.optional.xalan.",
    "Jed has logged a bug report with a simpler test case\n\n*** This bug has been marked as a duplicate of 18263 ***"
  ],
  "commentCreationDates": [
    "2001-12-07T22:46:48+01:00",
    "2001-12-07T22:49:31+01:00",
    "2001-12-07T22:51:05+01:00",
    "2001-12-07T22:51:58+01:00",
    "2001-12-20T14:54:32+01:00",
    "2001-12-20T15:07:56+01:00",
    "2001-12-20T17:46:37+01:00",
    "2002-05-31T21:10:24+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.LinkageError",
      "message": "Class org/xml/sax/InputSource violates loader  constraints",
      "elements": [
        {
          "method": "org.apache.tools.ant.ProjectHelper.parse",
          "source": "ProjectHelper.java:117"
        },
        {
          "method": "org.apache.tools.ant.ProjectHelper.configureProject",
          "source": "ProjectHelper.java:85"
        },
        {
          "method": "org.eclipse.ant.internal.ui.AntAction.extractProject",
          "source": "AntAction.java:67"
        },
        {
          "method": "org.eclipse.ant.internal.ui.AntAction.run",
          "source": "AntAction.java:49"
        },
        {
          "method": "org.eclipse.ant.internal.ui.RunAntActionDelegate.run",
          "source": "RunAntActionDelegate.java:43"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.run",
          "source": "PluginAction.java:192"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:452"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:635"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:798"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:821"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:151"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:502"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:362"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "6694",
      "duplicateId": "18263",
      "date": "2001-12-20T15:07:56+01:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "18263",
  "bugId": "6694",
  "duplicateId": "18263",
  "date": "2001-12-07T22:46:48+01:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}