{
  "comments": [
    "I\u0027m not sure what is causing this or if I did something wrong. But I have a\nproject connected to a CVS repository. I\u0027m doing a replace with latest and\nduring the build that results I get the message:\n\nA build error occurred after the CVS operation completed.\n\nReason:\nResource\n/com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export does not exist.\n\nThis folder had been deleted in the past and shouldn\u0027t exist now. Though of\ncourse CVS still has a record that it existed, but the current branch isn\u0027t\nusing it.\n\nThe following trace occurs in the .log file:\n\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.resources\".\n!STACK 1\norg.eclipse.core.internal.resources.ResourceException: Resource\n/com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export does not exist.\n\tat org.eclipse.core.internal.resources.Resource.checkExists(Resource.java:302)\n\tat org.eclipse.core.internal.resources.Resource.checkAccessible(Resource.java:174)\n\tat\norg.eclipse.core.internal.resources.Resource.getPersistentProperty(Resource.java:878)\n\tat com.ibm.rtp.tools.rose.Builder$1.visit(Builder.java:118)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:71)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:79)\n\tat org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:52)\n\tat com.ibm.rtp.tools.rose.Builder.incrementalBuild(Builder.java:79)\n\tat com.ibm.rtp.tools.rose.Builder.build(Builder.java:61)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:427)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:889)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:125)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:181)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:191)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:151)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:889)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:165)\n\tat\norg.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:243)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:212)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:884)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1600)\n\tat\norg.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:85)\n\tat\norg.eclipse.team.internal.ccvs.ui.repo.RepositoryManager.run(RepositoryManager.java:796)\n\tat org.eclipse.team.internal.ccvs.ui.actions.CVSAction$1.run(CVSAction.java:242)\n\tat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:101)\n!ENTRY org.eclipse.core.resources 4 368 Apr 02, 2003 11:34:46.662\n!MESSAGE Resource\n/com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export does not exist.\n!SUBENTRY 1 org.eclipse.core.resources 4 368 Apr 02, 2003 11:34:46.662\n!MESSAGE Resource\n/com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export does not exist.\n!ENTRY org.eclipse.core.resources 4 368 Apr 02, 2003 11:36:04.904\n!MESSAGE Resource\n/com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export does not exist.\n\n\nI also did a little debugging. The ResourceDelta in question in the above trace\nhas the following status field value:  decimal 262148  (It looks like this means\n\"Phantom_added, Replaced, Markers, Moved_to, Content\", though there are two bits\nset that I can\u0027t figure out what they mean).\n\nWhen I do a normal \"Checkout as Project\", or Synchronize, or Rebuild project\nthere are no problems. Only occurs on Replace with latest from Repository.\n\nThanks, Rich Kulp",
    "262148 \u003d 2^18 + 2^2, so only two bits are set: CHANGED, and REPLACED.  Can you\nconfirm that this is the value of the delta?  To be sure, do the following with\nthe delta:\n\n((ResourceDelta)delta).toDebugString()\n\nand let us know what this prints out.  Better yet, you can call:\n\n((ResourceDelta)delta).toDeepDebugString() on the root of the builder\u0027s delta to\nfind out what the entire delta tree looks like.\n\nThe stack trace shows that the builder is trying to access a persistent property\nfor a resource that doesn\u0027t exist locally.  My first guess is that the builder\n(com.ibm.rtp.tools.rose.Builder) is misinterpreting the delta, and incorrectly\nbelieving that the resource still exists.  \n",
    "Thanks for the info. I didn\u0027t realize what builder was actually causing the\nproblem until you just pointed it out in your reply. It is a local builder\nsomeone here had written.\n\nThe debug string is:\n/com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export[*]: {REPLACED}\n\nHowever, I have a question of why does it indicate it has replaced, but yet the\nfolder doesn\u0027t really exist? Should this be a valid resource delta state? Should\nthere be something else the builder should be checking on for something like\nthis? This folder was in CVS and has been deleted from the branch,so it\nshouldn\u0027t be in the project.\n\nThanks again,\nRich",
    "Since it turns out to be a local bug and not an Eclipse bug, I\u0027m closing this\nreport as invalid. \n\nI don\u0027t understand why the folder is showing up in the resource delta since it\ndoesn\u0027t exist, but we\u0027ll change the builder to do an exists test first before\naccessing the persistent store.\n\nThanks for the help,\nRich",
    "Even when you\u0027ve deleted a folder locally, CVS may still keep them around as\n\"phantom\" resources because they have important information attached to them.\nYou shouldn\u0027t be seeing phantoms in the delta unless you specifically request\nthem.  When the builder calls IResourceDelta.accept, the \"int\" parameter is used\nto specify whether phantoms and team private resources should be included.  If\nyou have access to the builder code could you tell me what the call to\nIResourceDelta.accept looks like?\n\nI\u0027m going to re-open this bug, because I\u0027m not convinced our behaviour is\ncorrect in the case of changed phantoms.  We probably thought this was not\npossible, but in the case of a replaced resource, it is possible.  ",
    "It uses a straight delta.accept(IResourceDeltaVistor); in the incremental build.\nIn the fullbuild it uses project.accept(IResourceVisitor);  No other arguments\nto both the accepts, just the visitor.",
    "We need to update our IResourceDelta API and implementation to describe what\nhappens in the case of changed phantoms.  We probably thought at design time\nthat phantom changes weren\u0027t possible, but it turns out to be possible: delete,\nrecreate, then convert to phantom all in one operation will yield a CHANGED +\nREPLACED  delta.  These deltas should be excluded from visitors unless\nspecifically requested.\n\nRichard, the workaround for your builder until we fix this is to do an exists()\ncheck on the resource in the visitor, and ignore non-existent resources. \n\nThe phantom menace strikes again ;) ",
    "Thanks, I just tried it and that workaround works well.",
    "I tried various test scenarios to make this happen, but couldn\u0027t reproduce.  The\nResourceDelta.accept() method checks the phantom bit on the new resource info,\nso I don\u0027t see any way how a phantom could leak through to a normal visitor. \nPerhaps the code has changed since this bug was reported.  In any case, I have\nreleased my automated test cases that verify that this is working\n(regression.IResourceTest#testBug35991).  If it happens again, I\u0027ll reopen."
  ],
  "commentCreationDates": [
    "2003-04-02T19:31:12+02:00",
    "2003-04-02T20:00:01+02:00",
    "2003-04-02T20:29:25+02:00",
    "2003-04-03T16:11:08+02:00",
    "2003-04-03T16:52:46+02:00",
    "2003-04-03T17:08:15+02:00",
    "2003-04-04T17:04:45+02:00",
    "2003-04-04T17:15:18+02:00",
    "2005-01-13T16:45:33+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.internal.resources.ResourceException",
      "message": "Resource /com.ibm.etools.beaninfo/beaninfo/com/ibm/etools/beaninfo/export does not exist.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.resources.Resource.checkExists",
          "source": "Resource.java:302"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.checkAccessible",
          "source": "Resource.java:174"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.getPersistentProperty",
          "source": "Resource.java:878"
        },
        {
          "method": "com.ibm.rtp.tools.rose.Builder$1.visit",
          "source": "Builder.java:118"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:71"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:79"
        },
        {
          "method": "org.eclipse.core.internal.events.ResourceDelta.accept",
          "source": "ResourceDelta.java:52"
        },
        {
          "method": "com.ibm.rtp.tools.rose.Builder.incrementalBuild",
          "source": "Builder.java:79"
        },
        {
          "method": "com.ibm.rtp.tools.rose.Builder.build",
          "source": "Builder.java:61"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:427"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:889"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:125"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:181"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:191"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:151"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:889"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:165"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:243"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:212"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:884"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1600"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:85"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.repo.RepositoryManager.run",
          "source": "RepositoryManager.java:796"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.actions.CVSAction$1.run",
          "source": "CVSAction.java:242"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "35991",
      "date": "2003-04-02T19:31:12+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "35991",
  "bugId": "35991",
  "date": "2003-04-02T19:31:12+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}