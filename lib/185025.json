{
  "comments": [
    "The mostly of the ProfileDetailsPropertyPage\u0027s classes don\u0027t initialize the\nmDriverInstance variable and it make troubes in some cases. For instance,\n\n- make some profile (Oracle, PostgreSQL, Derby, MySQL ...) and uncheck Save\npassword\n- when connecting you will be prompt for password\n- enter password and click ok\nyou will got the following exception :\njava.lang.NullPointerException\nat\norg.eclipse.datatools.connectivity.sqm.internal.core.util.DatabaseProviderHelper.getCatalogDatabase(DatabaseProviderHelper.java:37)\nat\norg.eclipse.datatools.connectivity.sqm.internal.core.util.DatabaseProviderHelper.setDatabase(DatabaseProviderHelper.java:46)\nat\norg.eclipse.datatools.connectivity.sqm.internal.core.connection.ConnectionInfoImpl.\u003cinit\u003e(ConnectionInfoImpl.java:628)\nat\norg.eclipse.datatools.connectivity.sqm.internal.core.connection.ConnectionFactory.createConnection(ConnectionFactory.java:36)\nat\norg.eclipse.datatools.connectivity.sqm.core.SQMConnectionFactory.createConnection(SQMConnectionFactory.java:45)\nat\norg.eclipse.datatools.connectivity.internal.ConnectionFactoryAdapterProvider.createConnection(ConnectionFactoryAdapterProvider.java:79)\nat\norg.eclipse.datatools.connectivity.internal.CreateConnectionJob.run(CreateConnectionJob.java:55)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\nIt will make the profile unusable until you select a driver in driver\u0027s\ncombo.\nThe fix is simple.You need to add the following line on the end of\ninitControls method :\n\nmDriverInstance \u003d combo.getSelectedDriverInstance();\n\nin the classes :\nDerbyEmbeddedDBPropertyPage, HSQLDBPropertyPage,\nGenericDBProfilePropertyPage and PostgreSQLProfilePropertyPage",
    "Is this something that can be set in the base class, or should we update each project in enablement for this?",
    "The mDriverInstance and combo fields are defined in subclasses and for instance sybase doesn\u0027t use this fields. Initialization (the initControls method) is in subclasses as well.\nI is possible redefine base class, but that requires more work than changing subclasses.",
    "Is the issue more that you\u0027re allowed to create the profile without selecting a driver? I\u0027m having issues recreating this locally...\n\nSo you create a new profile, let\u0027s say a SQL Model-JDBC Connection profile. No driver is selected by default.\n\nYou specify a driver, customize the url, set the uid, and make sure the Save Password checkbox is unchecked. Click Finish. \n\nThen you connect. Enter password, click OK and you get the NPE exception you mentioned?\n\nI\u0027ve tried this multiple ways and can\u0027t reproduce it. The profile details wizard page shouldn\u0027t let you continue if no driver is selected.\n\nCan you provide more detailed steps on how to reproduce this issue?\n\nThanks.\n--Brian Fitzpatrick",
    "\u003e So you create a new profile, let\u0027s say a SQL Model-JDBC Connection profile. No\n\u003e driver is selected by default.\n\n\u003e You specify a driver, customize the url, set the uid, and make sure the Save\n\u003e Password checkbox is unchecked. Click Finish. \n\n\u003e Then you connect. Enter password, click OK and you get the NPE exception you\n\u003e mentioned?\n\nThis is fine.You would close connection and RECONNECT (driver is default and it is selected, but you don\u0027t touch it) and you will get NPE. If you reselect driver (it is same driver, but selection initialize the mDriverInstance variable) you will connect correctly.The first connection is always correct, but it fails after reusing driver property page.\n\nYou can reproduce my case in this way as well :\n- make some connection (it is not important that you uncheck \u0027save password\u0027)\n- ensure that the connection is correct\n- close connection\n- open Profile Preference Page and just click OK\n- try connect\n\nYour profile is broken in this moment. You can open Profile Preference Page, select driver (it is not obligate, but you have to do it that initialize the mDriverInstance variable) and this will fix your driver (temporary, of course)\n\nI can always reproduce this case using Oracle or MySQL and SQL Model-JDBC Connection, but it is same for Derby, PostgreSQL and some generic JDBC driver.",
    "Hi again... We have tried this in a variety of contexts and not been able to reproduce it. If you continue to have the issue with RC1 in a fresh 3.3M7 environment, please let us know. Thanks.",
    "yes, it works with 3.3M7 and dtp rc1. It works in eclipse 3.3m6 (webtools 3.3m6) and some dtp released with webtools 3.3m6.\nI can reproduce it only with cvs which I checkout about May, 01.\nHowever, it looks fixed, but I suggest that you explicit initialize the mDriverInstance variable in createContents , because it is more stable (maybe exists other test case). I am using Linux and Combo have different behavior on Linux and Windows - it is maybe reason that you couldn\u0027t reproduce this case"
  ],
  "commentCreationDates": [
    "2007-05-02T04:16:19+02:00",
    "2007-05-02T18:27:13+02:00",
    "2007-05-02T19:45:49+02:00",
    "2007-05-08T00:25:28+02:00",
    "2007-05-08T00:57:07+02:00",
    "2007-05-14T23:26:56+02:00",
    "2007-05-15T13:16:15+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.datatools.connectivity.sqm.internal.core.util.DatabaseProviderHelper.getCatalogDatabase",
          "source": "DatabaseProviderHelper.java:37"
        },
        {
          "method": "org.eclipse.datatools.connectivity.sqm.internal.core.util.DatabaseProviderHelper.setDatabase",
          "source": "DatabaseProviderHelper.java:46"
        },
        {
          "method": "org.eclipse.datatools.connectivity.sqm.internal.core.connection.ConnectionInfoImpl.\u003cinit\u003e",
          "source": "ConnectionInfoImpl.java:628"
        },
        {
          "method": "org.eclipse.datatools.connectivity.sqm.internal.core.connection.ConnectionFactory.createConnection",
          "source": "ConnectionFactory.java:36"
        },
        {
          "method": "org.eclipse.datatools.connectivity.sqm.core.SQMConnectionFactory.createConnection",
          "source": "SQMConnectionFactory.java:45"
        },
        {
          "method": "org.eclipse.datatools.connectivity.internal.ConnectionFactoryAdapterProvider.createConnection",
          "source": "ConnectionFactoryAdapterProvider.java:79"
        },
        {
          "method": "org.eclipse.datatools.connectivity.internal.CreateConnectionJob.run",
          "source": "CreateConnectionJob.java:55"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "185025",
      "date": "2007-05-02T04:16:19+02:00",
      "product": "Data Tools",
      "component": "Connectivity",
      "severity": "normal"
    }
  ],
  "groupId": "185025",
  "bugId": "185025",
  "date": "2007-05-02T04:16:19+02:00",
  "product": "Data Tools",
  "component": "Connectivity",
  "severity": "normal"
}