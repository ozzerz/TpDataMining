{
  "comments": [
    "I use ecf msn protocol org.eclipse.ecf.protocol.msn_0.3.1.200705231606.jar.\nThe Exception:\njava.lang.ArrayIndexOutOfBoundsException: 5\n\tat org.eclipse.ecf.protocol.msn.NotificationSession.retrieveBuddyList(NotificationSession.java:164)\n\tat org.eclipse.ecf.protocol.msn.NotificationSession.login(NotificationSession.java:114)\n\tat org.eclipse.ecf.protocol.msn.MsnClient.connect(MsnClient.java:147)\n\tat org.eclipse.ecf.internal.provider.msn.MSNContainer.connect(MSNContainer.java:299)\n\tat imclient.connect.XIMClient.createAndConnectClient(XIMClient.java:104)\n\tat imclient.connect.URIClientConnectControl$ClientConnectJob.run(URIClientConnectControl.java:75)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\nI debug the parameter input value is: LST N\u003dstonewang888@hotmail.com F\u003dstone-??????????????\u0026#65533;C\u003d7f646cbf-7a6b-437c-8b1e-3b0a0a55f153 11.\nThe F is Chinese. Then F and C not space.",
    "Are you consistently getting this? From the user-contributed specification, there shouldn\u0027t be a semi-colon between the F and C parameters in the command you provided.\n\nSee http://msnpiki.msnfanatic.com/index.php/Command:LST",
    "Is this not a bug?  Cuizhui please let us know about a response to question in comment #1.  \n\nIn the mean time, I\u0027m moving to version 1.0.1.",
    "cuizihui can we get your input on with respect to comment #1?",
    "(In reply to comment #3)\n\u003e cuizihui can we get your input on with respect to comment #1?\n\nThis problem still exists.\nIf change org.eclipse.ecf.protocol.msn.NotificationSession line 128:\nBufferedReader reader \u003d new BufferedReader(new InputStreamReader(getInputStream()));\nto\nBufferedReader reader \u003d new BufferedReader(new InputStreamReader(getInputStream(),\"UTF-8\"));\nthen not problem.",
    "(In reply to comment #4)\n\u003e This problem still exists.\n\u003e If change org.eclipse.ecf.protocol.msn.NotificationSession line 128:\n\u003e BufferedReader reader \u003d new BufferedReader(new\n\u003e InputStreamReader(getInputStream()));\n\u003e to\n\u003e BufferedReader reader \u003d new BufferedReader(new\n\u003e InputStreamReader(getInputStream(),\"UTF-8\"));\n\u003e then not problem.\n\nInteresting. Care to supply a patch?",
    "This problem occurs because of looking for a message in every output of a read() call and sometimes leave message fragments behind. There\u0027s not a structure to combine the remaining parts of these reads after it is split into message pieces and processed. When you examine read() calls, you\u0027ll observe that the implementation tries to read incomplete messages and this makes it throw different kinds of exception. \n\nProbably, this case not only causes this \"retrieve buddy list\" error but also other failures in messaging.\n\nI\u0027m investigating this and hopefully produce a patch in 2-3 days. ",
    "Created an attachment (id\u003d83137)\nPatch to force the usage of UTF-8 as an encoding.\n\n",
    "The patch has been committed to CVS HEAD. Setting as RESOLVED/FIXED.\n\n(In reply to comment #6)\n\u003e This problem occurs because of looking for a message in every output of a\n\u003e read() call and sometimes leave message fragments behind. There\u0027s not a\n\u003e structure to combine the remaining parts of these reads after it is split into\n\u003e message pieces and processed. When you examine read() calls, you\u0027ll observe\n\u003e that the implementation tries to read incomplete messages and this makes it\n\u003e throw different kinds of exception.\n\nThis issue is being covered by 207677."
  ],
  "commentCreationDates": [
    "2007-05-23T10:10:41+02:00",
    "2007-05-23T13:00:57+02:00",
    "2007-05-31T00:42:27+02:00",
    "2007-07-19T09:10:59+02:00",
    "2007-07-25T03:45:40+02:00",
    "2007-07-25T03:48:34+02:00",
    "2007-07-28T00:44:56+02:00",
    "2007-11-16T23:47:37+01:00",
    "2007-11-16T23:49:47+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "5",
      "elements": [
        {
          "method": "org.eclipse.ecf.protocol.msn.NotificationSession.retrieveBuddyList",
          "source": "NotificationSession.java:164"
        },
        {
          "method": "org.eclipse.ecf.protocol.msn.NotificationSession.login",
          "source": "NotificationSession.java:114"
        },
        {
          "method": "org.eclipse.ecf.protocol.msn.MsnClient.connect",
          "source": "MsnClient.java:147"
        },
        {
          "method": "org.eclipse.ecf.internal.provider.msn.MSNContainer.connect",
          "source": "MSNContainer.java:299"
        },
        {
          "method": "imclient.connect.XIMClient.createAndConnectClient",
          "source": "XIMClient.java:104"
        },
        {
          "method": "imclient.connect.URIClientConnectControl$ClientConnectJob.run",
          "source": "URIClientConnectControl.java:75"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "188583",
      "date": "2007-05-23T10:10:41+02:00",
      "product": "ECF",
      "component": "ecf.protocols",
      "severity": "normal"
    }
  ],
  "groupId": "188583",
  "bugId": "188583",
  "date": "2007-05-23T10:10:41+02:00",
  "product": "ECF",
  "component": "ecf.protocols",
  "severity": "normal"
}