{
  "comments": [
    "Build ID: I20070625-1500\n\nSteps To Reproduce:\n1. Unzip the attached workspace (\"workspace9\")\n2. Invoke it with Eclipse w/ CDT 4.0 (v 4.0.0.200706261300)\n3. In C/C++ Project View, right click on project C.\n4. Select Index --\u003e Rebuild\n\nYou\u0027ll see a PDOM ArrayIndexOutOfBoundsException in the error log. This is a show stopper for us. We can\u0027t build Executable projects that dependent on static library projects.\n\n\nMore information:\nCDT full indexer is getting confused as to which PDOM database a particular index refers. The error log callstack trace is as follows. \n\njava.lang.ArrayIndexOutOfBoundsException: 68\nat org.eclipse.cdt.internal.core.pdom.db.Database.getChunk(Database.java:179)\nat org.eclipse.cdt.internal.core.pdom.db.Database.getInt(Database.java:336)\nat org.eclipse.cdt.internal.core.pdom.dom.PDOMInclude.getNextInIncludedBy(PDOMInclude.java:166)\nat org.eclipse.cdt.internal.core.pdom.dom.PDOMFile.addIncludedBy(PDOMFile.java:312)\nat org.eclipse.cdt.internal.core.pdom.dom.PDOMFile.addIncludesTo(PDOMFile.java:291)\nat org.eclipse.cdt.internal.core.pdom.WritablePDOM.addFileContent(WritablePDOM.java:61)\nat org.eclipse.cdt.internal.core.index.WritableCIndex.setFileContent(WritableCIndex.java:72)\nat org.eclipse.cdt.internal.core.pdom.PDOMWriter.addToIndex(PDOMWriter.java:469)\nat org.eclipse.cdt.internal.core.pdom.PDOMWriter.addSymbols(PDOMWriter.java:213)\nat org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTU(PDOMIndexerTask.java:300)\nat org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.internalParseTUs(PDOMIndexerTask.java:218)\nat org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTUs(PDOMIndexerTask.java:192)\nat org.eclipse.cdt.internal.core.pdom.indexer.full.PDOMFullIndexerTask.run(PDOMFullIndexerTask.java:108)\nat org.eclipse.cdt.internal.core.pdom.indexer.PDOMRebuildTask.run(PDOMRebuildTask.java:75)\nat org.eclipse.cdt.internal.core.pdom.PDOMIndexerJob.run(PDOMIndexerJob.java:89)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "Created an attachment (id\u003d74268)\nWorkspace that demonstrates the problem with the PDOM indexer\n\nThis is the workspace that demonstrates the problem with the CDT PDOM indexer.\nAs described in the bug report, invoke Eclipse with CDT 4.0 installed against the workspace. Attempt to rebuild the index of the C project and you\u0027ll see the error appended to the error log.",
    "In the note above I didn\u0027t mean to say we couldn\u0027t build our projects. I meant to say we cannot index them. We get scores of errors every time the indexer attempts to do its thing.",
    "Thanks for attaching the workspace, that let me understand the problem real quick.\nWith dependent projects the \u0027Fast Indexer\u0027 behaves much better (however bug 162175 has not yet been addressed). So as a work-around you can use the \u0027Fast Indexer\u0027.",
    "Added testcase IndexBugsTests.testDependentProjectsWithFullIndexer_Bug197311(),\nfixed in 4.0.1 \u003e 20070724."
  ],
  "commentCreationDates": [
    "2007-07-20T17:34:39+02:00",
    "2007-07-20T17:52:50+02:00",
    "2007-07-20T18:02:57+02:00",
    "2007-07-23T10:46:16+02:00",
    "2007-07-24T11:16:05+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "68",
      "elements": [
        {
          "method": "org.eclipse.cdt.internal.core.pdom.db.Database.getChunk",
          "source": "Database.java:179"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.db.Database.getInt",
          "source": "Database.java:336"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.dom.PDOMInclude.getNextInIncludedBy",
          "source": "PDOMInclude.java:166"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.dom.PDOMFile.addIncludedBy",
          "source": "PDOMFile.java:312"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.dom.PDOMFile.addIncludesTo",
          "source": "PDOMFile.java:291"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.WritablePDOM.addFileContent",
          "source": "WritablePDOM.java:61"
        },
        {
          "method": "org.eclipse.cdt.internal.core.index.WritableCIndex.setFileContent",
          "source": "WritableCIndex.java:72"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMWriter.addToIndex",
          "source": "PDOMWriter.java:469"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMWriter.addSymbols",
          "source": "PDOMWriter.java:213"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTU",
          "source": "PDOMIndexerTask.java:300"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.internalParseTUs",
          "source": "PDOMIndexerTask.java:218"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTUs",
          "source": "PDOMIndexerTask.java:192"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.full.PDOMFullIndexerTask.run",
          "source": "PDOMFullIndexerTask.java:108"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMRebuildTask.run",
          "source": "PDOMRebuildTask.java:75"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMIndexerJob.run",
          "source": "PDOMIndexerJob.java:89"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "197311",
      "date": "2007-07-20T17:34:39+02:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "major"
    }
  ],
  "groupId": "197311",
  "bugId": "197311",
  "date": "2007-07-20T17:34:39+02:00",
  "product": "CDT",
  "component": "cdt-core",
  "severity": "major"
}