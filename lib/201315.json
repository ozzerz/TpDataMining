{
  "comments": [
    "Created an attachment (id\u003d77065)\nZip file containing test JPA project and source files\n\nBuild ID: 2007/08/16 WTP 2.0.1 build\n\nSteps To Reproduce:\n1. Create a JPA project with a simple entity bean, and refer to it in persistence.xml and orm.xml\n2. Delete the project but not the workspace contents\n3. Exit workbench, and import the project via \"Import -\u003e General -\u003e Existing Projects into Workspace\"\n\n\n\nMore information:\nProblem #1: The JPA validator always shows a \"No persistence.xml file in project\" error.  The JPA models for this project do appear to be valid however, probably due to fix for earlier bugzilla #193606 opened about importing existing projects?\n\nProblem #2: For more complicated JPA projects, in addition to problem #1, 95% of the time, right after importing error dialogs pop about \"Problems initializing JPA model\", and this exception occurs:\n\n!ENTRY org.eclipse.core.resources 4 566 2007-08-27 15:13:10.717\n!MESSAGE An error occurred while traversing resources.\n!STACK 0\njava.lang.ClassCastException: org.eclipse.jdt.core.dom.InfixExpression incompatible with org.eclipse.jdt.core.dom.StringLiteral\n\tat org.eclipse.jpt.core.internal.jdtutility.StringExpressionConverter.convert_(StringExpressionConverter.java:1)\n\tat org.eclipse.jpt.core.internal.jdtutility.AbstractExpressionConverter.convert(AbstractExpressionConverter.java:47)\n\tat org.eclipse.jpt.core.internal.jdtutility.ConversionDeclarationAnnotationElementAdapter.getValue(ConversionDeclarationAnnotationElementAdapter.java:95)\n\tat org.eclipse.jpt.core.internal.jdtutility.MemberAnnotationElementAdapter.getValue(MemberAnnotationElementAdapter.java:43)\n\tat org.eclipse.jpt.core.internal.jdtutility.ShortCircuitAnnotationElementAdapter.getValue(ShortCircuitAnnotationElementAdapter.java:47)\n\tat org.eclipse.jpt.core.internal.content.java.mappings.JavaAbstractQuery.updateFromJava(JavaAbstractQuery.java:553)\n\tat org.eclipse.jpt.core.internal.content.java.mappings.JavaEntity.updateNamedQueriesFromJava(JavaEntity.java:2628)\n\tat org.eclipse.jpt.core.internal.content.java.mappings.JavaEntity.updateFromJava(JavaEntity.java:2376)\n\tat org.eclipse.jpt.core.internal.content.java.JavaPersistentType.updateFromJava(JavaPersistentType.java:668)\n\tat org.eclipse.jpt.core.internal.content.java.JpaCompilationUnit.synchronizePersistentTypes(JpaCompilationUnit.java:406)\n\tat org.eclipse.jpt.core.internal.content.java.JpaCompilationUnit.setFile(JpaCompilationUnit.java:324)\n\tat org.eclipse.jpt.core.internal.content.java.JavaJpaFileContentProvider.buildRootContent(JavaJpaFileContentProvider.java:30)\n\tat org.eclipse.jpt.core.internal.JpaFileContentRegistry.buildContent(JpaFileContentRegistry.java:60)\n\tat org.eclipse.jpt.core.internal.JpaFileContentRegistry.getFile(JpaFileContentRegistry.java:44)\n\tat org.eclipse.jpt.core.internal.JpaProject.createJpaFile(JpaProject.java:648)\n\tat org.eclipse.jpt.core.internal.JpaProject$3.visit(JpaProject.java:507)\n\tat org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:57)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:81)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:85)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:126)\n\tat org.eclipse.core.internal.resources.Resource.accept(Resource.java:67)\n\tat org.eclipse.jpt.core.internal.JpaProject.fill(JpaProject.java:514)\n\tat org.eclipse.jpt.core.internal.JpaModelManager.fillJpaProject(JpaModelManager.java:189)\n\tat org.eclipse.jpt.core.internal.JpaModel$1.visit(JpaModel.java:152)\n\tat org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:57)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:81)\n\tat org.eclipse.core.internal.watson.ElementTreeIterator.iterate(ElementTreeIterator.java:119)\n\tat org.eclipse.core.internal.resources.Resource.accept(Resource.java:67)\n\tat org.eclipse.jpt.core.internal.JpaModel.fill(JpaModel.java:158)\n\tat org.eclipse.jpt.core.internal.JpaModelManager$WorkspaceBuildJob$1.run(JpaModelManager.java:269)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1779)\n\tat org.eclipse.jpt.core.internal.JpaModelManager$WorkspaceBuildJob.run(JpaModelManager.java:266)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\n\nAttempting to get a handle to the JPA project after this using:\njpaProject \u003d JpaModelManager.instance().getFilledJpaProject(proj); // proj is a IProject instance\nresults in a null being returned.\n\nTo reproduce problem #2, please unzip the attached .zip file into your workspace, then import the project \"orderJPA\", and re-target to a runtime that has both the JPA and EJB3 sun libraries.",
    "Is this 2 bugs in one report? Or, do you think they are related? \n\n",
    "Problem #1 - This issue has been fixed by addressing bug 192675.  The validation was getting ahead of the model fill.  This fix will be available in the next 2.0.1 I-Build.\n\nProblem #2 - This is a duplicate of bug 198934, which is fixed and will also be available in the next maintenance build, which is later this week.\n\nSince problem #1 was fairly minor, I\u0027ll consider this a duplicate of the second issue.\n\n\n\n*** This bug has been marked as a duplicate of bug 198934 ***",
    "Great thanks Neil. Ya the first issue was minor and my concern was mostly problem #2. \n\nDavid: Not sure if #1 was related or not since both only seem to occur when importing from existing projects."
  ],
  "commentCreationDates": [
    "2007-08-27T21:25:29+02:00",
    "2007-08-27T22:46:11+02:00",
    "2007-08-27T23:01:46+02:00",
    "2007-08-27T23:18:09+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.core.dom.InfixExpression incompatible with org.eclipse.jdt.core.dom.StringLiteral",
      "elements": [
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.StringExpressionConverter.convert_",
          "source": "StringExpressionConverter.java:1"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.AbstractExpressionConverter.convert",
          "source": "AbstractExpressionConverter.java:47"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.ConversionDeclarationAnnotationElementAdapter.getValue",
          "source": "ConversionDeclarationAnnotationElementAdapter.java:95"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.MemberAnnotationElementAdapter.getValue",
          "source": "MemberAnnotationElementAdapter.java:43"
        },
        {
          "method": "org.eclipse.jpt.core.internal.jdtutility.ShortCircuitAnnotationElementAdapter.getValue",
          "source": "ShortCircuitAnnotationElementAdapter.java:47"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.mappings.JavaAbstractQuery.updateFromJava",
          "source": "JavaAbstractQuery.java:553"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.mappings.JavaEntity.updateNamedQueriesFromJava",
          "source": "JavaEntity.java:2628"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.mappings.JavaEntity.updateFromJava",
          "source": "JavaEntity.java:2376"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaPersistentType.updateFromJava",
          "source": "JavaPersistentType.java:668"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JpaCompilationUnit.synchronizePersistentTypes",
          "source": "JpaCompilationUnit.java:406"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JpaCompilationUnit.setFile",
          "source": "JpaCompilationUnit.java:324"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaJpaFileContentProvider.buildRootContent",
          "source": "JavaJpaFileContentProvider.java:30"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaFileContentRegistry.buildContent",
          "source": "JpaFileContentRegistry.java:60"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaFileContentRegistry.getFile",
          "source": "JpaFileContentRegistry.java:44"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaProject.createJpaFile",
          "source": "JpaProject.java:648"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaProject$3.visit",
          "source": "JpaProject.java:507"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource$1.visitElement",
          "source": "Resource.java:57"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:81"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:85"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.iterate",
          "source": "ElementTreeIterator.java:126"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.accept",
          "source": "Resource.java:67"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaProject.fill",
          "source": "JpaProject.java:514"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaModelManager.fillJpaProject",
          "source": "JpaModelManager.java:189"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaModel$1.visit",
          "source": "JpaModel.java:152"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource$1.visitElement",
          "source": "Resource.java:57"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.doIteration",
          "source": "ElementTreeIterator.java:81"
        },
        {
          "method": "org.eclipse.core.internal.watson.ElementTreeIterator.iterate",
          "source": "ElementTreeIterator.java:119"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.accept",
          "source": "Resource.java:67"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaModel.fill",
          "source": "JpaModel.java:158"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaModelManager$WorkspaceBuildJob$1.run",
          "source": "JpaModelManager.java:269"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1797"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1779"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaModelManager$WorkspaceBuildJob.run",
          "source": "JpaModelManager.java:266"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "201315",
      "duplicateId": "198934",
      "date": "2007-08-27T21:25:29+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "critical"
    }
  ],
  "groupId": "198934",
  "bugId": "201315",
  "duplicateId": "198934",
  "date": "2007-08-27T21:25:29+02:00",
  "product": "Dali JPA Tools",
  "component": "General",
  "severity": "critical"
}