{
  "comments": [
    "Eclipse 3.3 M5\n\nI was attempting to set an exception breakpoint for ClassCastException\nI typed in ClassCastExceptoin\nWhile it was filtering I backspaced and re-typed\n\nAfter the first occurrence I could not reproduce\n\njava.lang.NullPointerException\nat org.eclipse.jdt.internal.core.search.JavaSearchScope.normalize(JavaSearchScope.java:506)\nat org.eclipse.jdt.internal.core.search.JavaSearchScope.encloses(JavaSearchScope.java:384)\nat org.eclipse.jdt.internal.core.search.JavaSearchScope.indexOf(JavaSearchScope.java:369)\nat org.eclipse.jdt.internal.core.search.JavaSearchScope.getAccessRuleSet(JavaSearchScope.java:476)\nat org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.getAccessRuleSet(JavaWorkspaceScope.java:73)\nat org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.acceptMatch(InternalSearchPattern.java:42)\nat org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches(InternalSearchPattern.java:89)\nat org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches(MatchLocator.java:325)\nat org.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:114)\nat org.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:64)\nat org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:261)\nat org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllTypeNames(BasicSearchEngine.java:777)\nat org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:780)\nat org.eclipse.jdt.internal.debug.ui.breakpoints.AddExceptionDialog.fillContentProvider(AddExceptionDialog.java:475)\nat org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.filterContent(FilteredItemsSelectionDialog.java:2055)\nat org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$AbstractFilterJob.internalRun(FilteredItemsSelectionDialog.java:1940)\nat org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$AbstractFilterJob.doRun(FilteredItemsSelectionDialog.java:1901)\nat org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$AbstractFilterJob.run(FilteredItemsSelectionDialog.java:1881)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Looking at the stack trace, this NPE can only happen if EntryResult.getDocumentNames(...) returns an array with null values (in InternalSearchPattern.findIndexMatches(...) line 87.\n\nThis may happen if DiskIndex.readDocumentName(...) returns a null value... Looking at the implementation, I do not understand how this would be possible!? I\u0027ll add some traces to get more information and have a chance to understand in which circumstances this can happen...\n\nNote that this possibility is taken into account in AndPattern findIndexMatches method as \"if (names[i])\" condition exists before accepting the match... Not sure if we can just add the same protecion in InternalSearchPattern without clearly understand how this can happen...\n",
    "Its possible that DiskIndex.readDocumentName(...) could answer null if reading the chunk of names failed with an IOException, but the half empty chunks were still cached.\n\nI suggest we null out the cachedChunks if a IOException is caught \u0026 rethrown.",
    "Fixed by Kent when he cleaned up stream reading...\nReleased for 3.3 M6 in HEAD stream (v_741).\n",
    ".",
    "Verified for 3.3 M6 while moving this bug to Kent...\n",
    "*** Bug 178459 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2007-03-03T05:18:19+01:00",
    "2007-03-06T11:08:44+01:00",
    "2007-03-06T18:36:29+01:00",
    "2007-03-16T11:56:40+01:00",
    "2007-03-16T11:59:50+01:00",
    "2007-03-20T17:24:04+01:00",
    "2007-03-21T00:41:56+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchScope.normalize",
          "source": "JavaSearchScope.java:506"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchScope.encloses",
          "source": "JavaSearchScope.java:384"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchScope.indexOf",
          "source": "JavaSearchScope.java:369"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchScope.getAccessRuleSet",
          "source": "JavaSearchScope.java:476"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.getAccessRuleSet",
          "source": "JavaWorkspaceScope.java:73"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.acceptMatch",
          "source": "InternalSearchPattern.java:42"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches",
          "source": "InternalSearchPattern.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches",
          "source": "MatchLocator.java:325"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "PatternSearchJob.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:64"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:261"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllTypeNames",
          "source": "BasicSearchEngine.java:777"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "SearchEngine.java:780"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.breakpoints.AddExceptionDialog.fillContentProvider",
          "source": "AddExceptionDialog.java:475"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$FilterJob.filterContent",
          "source": "FilteredItemsSelectionDialog.java:2055"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$AbstractFilterJob.internalRun",
          "source": "FilteredItemsSelectionDialog.java:1940"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$AbstractFilterJob.doRun",
          "source": "FilteredItemsSelectionDialog.java:1901"
        },
        {
          "method": "org.eclipse.ui.dialogs.FilteredItemsSelectionDialog$AbstractFilterJob.run",
          "source": "FilteredItemsSelectionDialog.java:1881"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "176269",
      "date": "2007-03-03T05:18:19+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "176269",
  "bugId": "176269",
  "date": "2007-03-03T05:18:19+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}