{
  "comments": [
    "This error occurred while closing an RCP application based on Eclipse 3.0\nrunning on Win2k.  Sorry if this is a dupe, I couldn\u0027t find an existing ticket.\n\n!ENTRY org.eclipse.core.runtime 4 2 Oct 19, 2004 20:34:12.842\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.ui.internal.Perspective.getFastViewWidthRatio(Perspective.java:327)\n\tat org.eclipse.ui.internal.Perspective.saveState(Perspective.java:1316)\n\tat org.eclipse.ui.internal.Perspective.saveState(Perspective.java:1205)\n\tat org.eclipse.ui.internal.WorkbenchPage.saveState(WorkbenchPage.java:2630)\n\tat org.eclipse.ui.internal.WorkbenchWindow.saveState(WorkbenchWindow.java:1797)\n\tat org.eclipse.ui.internal.Workbench.saveState(Workbench.java:1400)\n\tat org.eclipse.ui.internal.Workbench.recordWorkbenchState(Workbench.java:1165)\n\tat org.eclipse.ui.internal.Workbench.access$5(Workbench.java:1163)\n\tat org.eclipse.ui.internal.Workbench$9.run(Workbench.java:436)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:615)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:434)\n\tat org.eclipse.ui.internal.Workbench.access$8(Workbench.java:400)\n\tat org.eclipse.ui.internal.Workbench$12.run(Workbench.java:572)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:570)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:546)\n\tat org.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:464)\n\tat org.eclipse.ui.internal.WorkbenchWindow.access$0(WorkbenchWindow.java:448)\n\tat org.eclipse.ui.internal.WorkbenchWindow$1.run(WorkbenchWindow.java:539)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:537)\n\tat org.eclipse.jface.window.Window.handleShellCloseEvent(Window.java:593)\n\tat org.eclipse.jface.window.Window$2.shellClosed(Window.java:544)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:158)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:805)\n\tat org.eclipse.swt.widgets.Decorations.WM_CLOSE(Decorations.java:1448)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2972)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1391)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3338)\n\tat org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:1462)\n\tat org.eclipse.swt.widgets.Shell.callWindowProc(Shell.java:398)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3050)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1391)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3338)\n\tat org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:1462)\n\tat org.eclipse.swt.widgets.Shell.callWindowProc(Shell.java:398)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3050)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1391)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3338)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1467)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2429)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)",
    "FYI, the error only occurs when you have a view docked as a fast view.",
    "Do you know if the view in question was a multi-view instance (i.e. it has\nallowMultiple\u003d\"true\" in its XML, and was created with a secondaryId)?\nPerspective.getFastViewRatio was not handling this case, but the NPE could also\nhappen if somehow a view was created and then its descriptor went away (highly\nunlikely).\n\nI\u0027ve fixed up getFastViewRatio, and also fixed another case in\nFolderLayout.addView where the result of IViewRegistry.find was not being\nchecked for null.\n",
    "Yes, it only happens when the docked view is a multi-view.  Normal single\ninstance views docked as fast views do not cause this error.  Will this fix also\nbe included in 3.0.2?  It would be nice to not have to wait for 3.1 to fix this\nfor our customers.  Thanks!",
    "Reopening for consideration for 3.0.2.  It\u0027s easy for users to fall into this,\nand the fix is easy and low risk.\n",
    "The version that is released into the 3.1 stream breaks a lot of test suites \nand needs to be revisited.",
    "Indeed it was due to the change to FolderLayout.addView.  A !\u003d null should have\nbeen a \u003d\u003d null.  Sigh.\n",
    "Added regression tests: IWorkbenchPageTest.testShowViewMultFast and testBug76669.\n",
    "Also changed Perspective.getFastView(String id) to be\ngetFastViewWidthRatio(IViewReference ref).  This way the id is not ambiguous.",
    "We can now release this to 3.0.2 please put this in as soon as you like.",
    "Patches released to 3.0.2 stream.\nDavid, if you could verify it in next Wednesday\u0027s 3.0.2 build, that would be great.",
    "The 3.0.2 Linux GTK and Windows builds for today are marked as failed.  Should I\nbother downloading them and testing this bugfix?",
    "No, it\u0027s not in this week\u0027s build.  Please try it in next week\u0027s.",
    "David, would you be able to verify this in the 3.0.2 RC2 build?\n",
    "Verified on Win2K using the 3.0.2 RC2 build.\n"
  ],
  "commentCreationDates": [
    "2004-10-20T18:26:21+02:00",
    "2004-10-21T03:05:35+02:00",
    "2004-10-21T21:25:36+02:00",
    "2004-10-21T21:45:20+02:00",
    "2004-10-21T22:00:35+02:00",
    "2004-10-22T14:54:10+02:00",
    "2004-10-22T17:49:44+02:00",
    "2004-10-22T18:59:32+02:00",
    "2004-10-22T19:05:33+02:00",
    "2005-01-12T13:13:56+01:00",
    "2005-01-12T19:51:44+01:00",
    "2005-01-13T14:27:03+01:00",
    "2005-01-13T14:45:06+01:00",
    "2005-03-10T19:10:52+01:00",
    "2005-03-10T19:48:19+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.Perspective.getFastViewWidthRatio",
          "source": "Perspective.java:327"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.saveState",
          "source": "Perspective.java:1316"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.saveState",
          "source": "Perspective.java:1205"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.saveState",
          "source": "WorkbenchPage.java:2630"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.saveState",
          "source": "WorkbenchWindow.java:1797"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.saveState",
          "source": "Workbench.java:1400"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.recordWorkbenchState",
          "source": "Workbench.java:1165"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$5",
          "source": "Workbench.java:1163"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$9.run",
          "source": "Workbench.java:436"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:615"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:434"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$8",
          "source": "Workbench.java:400"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$12.run",
          "source": "Workbench.java:572"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:570"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:546"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.busyClose",
          "source": "WorkbenchWindow.java:464"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.access$0",
          "source": "WorkbenchWindow.java:448"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$1.run",
          "source": "WorkbenchWindow.java:539"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.close",
          "source": "WorkbenchWindow.java:537"
        },
        {
          "method": "org.eclipse.jface.window.Window.handleShellCloseEvent",
          "source": "Window.java:593"
        },
        {
          "method": "org.eclipse.jface.window.Window$2.shellClosed",
          "source": "Window.java:544"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:158"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:820"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:805"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_CLOSE",
          "source": "Decorations.java:1448"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2972"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1391"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3338"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DefWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DefWindowProc",
          "source": "OS.java:1462"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.callWindowProc",
          "source": "Shell.java:398"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3050"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1391"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3338"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DefWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DefWindowProc",
          "source": "OS.java:1462"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.callWindowProc",
          "source": "Shell.java:398"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3050"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1391"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3338"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1467"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2429"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "76669",
      "date": "2004-10-20T18:26:21+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "76669",
  "bugId": "76669",
  "date": "2004-10-20T18:26:21+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "critical"
}