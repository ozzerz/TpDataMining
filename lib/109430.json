{
  "comments": [
    "On headless mode ear import we specify not to explode the \nweb (WAR) modules.  Then EARFileImpl.getEJBReferences() fails with the\nfollowing exception starting with wtp 09/09.  This works fine on wtp 09/02.\n\n\nCaused by: \norg.eclipse.jst.j2ee.commonarchivecore.internal.exception.NoModuleFileException:\n A file does not exist for module element having uri: \nejb_bbECmp_allowedmethods_client.jar\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.checkType\n(ModuleRefImpl.java:490)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.initModuleFil\neFromEAR(ModuleRefImpl.java:127)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.getModuleFile\n(ModuleRefImpl.java:105)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getModuleFile\n(EARFileImpl.java:95)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDe\nscriptor(EARFileImpl.java:335)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDe\nscriptor(EARFileImpl.java:325)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBRefernece\ns(EARFileImpl.java:1286)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.collectEJBRefer\nences(EARFileImpl.java:1249)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReference\ns(EARFileImpl.java:1225)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.runEarDeploy\n(Unknown Source)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.access$0\n(Unknown Source)",
    "How is this a regression?  I just talked to Jason...   and he indicated this is\nentirely a new code path for us...  maybe I need to understand what changed....",
    "we don\u0027t get this exception on 09/02 wtp and we get it on 09/09.\nOur code has not changed for quite some time.",
    "I guess from our implementation\u0027s point of view, some of the tests we have in \nour regression bucket were succeeding with WTP 09/02 but these are now failing \nin 09/09 with the exception described in this bugzilla.",
    "I can\u0027t reproduce this using the latest WTP code.  If you can reproduce, please\nreopen.",
    "Tried on 9/16 WTP the problem still exists",
    "Bala,\n\nDo you have a stack trace with the 09/16 WTP driver or a testcase that you can\npost?",
    "Caused by: \norg.eclipse.jst.j2ee.commonarchivecore.internal.exception.NoModuleFileException:\n A file does not exist for module element having uri: web.war\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.checkType\n(ModuleRefImpl.java:490)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.initModuleFil\neFromEAR(ModuleRefImpl.java:127)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.getModuleFile\n(ModuleRefImpl.java:105)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getModuleFile\n(EARFileImpl.java:95)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDe\nscriptor(EARFileImpl.java:335)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDe\nscriptor(EARFileImpl.java:344)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBRefernece\ns(EARFileImpl.java:1282)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.collectEJBRefer\nences(EARFileImpl.java:1249)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReference\ns(EARFileImpl.java:1225)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.runEarDeploy\n(Unknown Source)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.access$0\n(Unknown Source)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.run\n(Unknown Source)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1719)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1739)\n\tat \ncom.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.execute(Unknown \nSource)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.run(Unknown \nSource)\n\t... 22 more\nEJBDeploy level: o0538.55\n",
    "Sorry the attachment for the previous trace is too big for bugzilla.\n\nHere is the trace for ejb_bbECmp_allowedmethods.ear that is being attached.\n\nCaused by: \norg.eclipse.jst.j2ee.commonarchivecore.internal.exception.NoModuleFileException:\n A file does not exist for module element having uri: \nejb_bbECmp_allowedmethods_client.jar\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.checkType\n(ModuleRefImpl.java:490)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.initModuleFil\neFromEAR(ModuleRefImpl.java:127)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.getModuleFile\n(ModuleRefImpl.java:105)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getModuleFile\n(EARFileImpl.java:95)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDe\nscriptor(EARFileImpl.java:335)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDe\nscriptor(EARFileImpl.java:325)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBRefernece\ns(EARFileImpl.java:1286)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.collectEJBRefer\nences(EARFileImpl.java:1249)\n\tat \norg.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReference\ns(EARFileImpl.java:1225)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.runEarDeploy\n(Unknown Source)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.access$0\n(Unknown Source)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.run\n(Unknown Source)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1719)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1739)\n\tat \ncom.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.execute(Unknown \nSource)\n\tat com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.run(Unknown \nSource)",
    "Created an attachment (id\u003d27313)\near test case\n\nbinary ear file test case",
    "I still can\u0027t reproduce this.  I think the ear you attached is the same one you\nsent me earlier.  The only thing I can think of is maybe the import code you\nused didn\u0027t bring in the client.  Below is my test case, which passes, when I\nrun a headless workbench.  Note; this will fail if you try to run in UI mode.\n\npublic void test109430() throws Exception {\n\t\tString earFileName \u003d getFullTestDataPath(\"ejb_bbECmp_allowedmethods.ear\");\n\t\tIDataModel model \u003d DataModelFactory.createDataModel(new\nEARComponentImportDataModelProvider());\n\t\tmodel.setProperty(IEARComponentImportDataModelProperties.FILE_NAME, earFileName);\n\t\tIVirtualComponent component \u003d (IVirtualComponent)\nmodel.getProperty(IEARComponentImportDataModelProperties.COMPONENT);\n\t\tList moduleList \u003d (List)\nmodel.getProperty(IEARComponentImportDataModelProperties.SELECTED_MODELS_LIST);\n\n\t\tList modulesNeeded \u003d new ArrayList();\n\t\tfor (int i \u003d 0; i \u003c moduleList.size(); i++) {\n\t\t\tIDataModel aModel \u003d (IDataModel) moduleList.get(i);\n\t\t\tObject file \u003d aModel.getProperty(IEARComponentImportDataModelProperties.FILE);\n\n\t\t\tif (file instanceof ModuleFile) {\n\t\t\t\tModuleFile moduleFile \u003d (ModuleFile) file;\n\t\t\t\tif (moduleFile.isEJBJarFile())\n\t\t\t\t\tmodulesNeeded.add(aModel);\n\t\t\t}\n\t\t}\n\t\tmodel.setProperty(IEARComponentImportDataModelProperties.SELECTED_MODELS_LIST,\nmodulesNeeded);\n\t\trunAndVerify(model);\n\t\tEARArtifactEdit artifactEdit \u003d\nEARArtifactEdit.getEARArtifactEditForRead(component);\n\t\tEARFile earFile \u003d (EARFile) artifactEdit.asArchive(true);\n\t\tearFile.getEJBReferences(true, false);\n\t\tartifactEdit.dispose();\n\t}",
    "The fix was dropped a few days ago and is in EARComponentLoadStrategyImpl",
    "reopening so I can dupe it.",
    "\n\n*** This bug has been marked as a duplicate of 109548 ***",
    "closing"
  ],
  "commentCreationDates": [
    "2005-09-13T21:18:49+02:00",
    "2005-09-16T17:28:29+02:00",
    "2005-09-16T17:32:41+02:00",
    "2005-09-16T17:34:11+02:00",
    "2005-09-16T21:15:57+02:00",
    "2005-09-20T23:21:04+02:00",
    "2005-09-20T23:23:59+02:00",
    "2005-09-20T23:30:08+02:00",
    "2005-09-20T23:35:26+02:00",
    "2005-09-20T23:36:31+02:00",
    "2005-09-21T16:51:25+02:00",
    "2005-09-21T18:01:15+02:00",
    "2005-09-21T18:39:10+02:00",
    "2005-09-21T18:39:21+02:00",
    "2005-12-09T19:44:12+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jst.j2ee.commonarchivecore.internal.exception.NoModuleFileException",
      "message": "A file does not exist for module element having uri:  ejb_bbECmp_allowedmethods_client.jar",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.checkType",
          "source": "ModuleRefImpl.java:490"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.initModuleFileFromEAR",
          "source": "ModuleRefImpl.java:127"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.getModuleFile",
          "source": "ModuleRefImpl.java:105"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getModuleFile",
          "source": "EARFileImpl.java:95"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor",
          "source": "EARFileImpl.java:335"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor",
          "source": "EARFileImpl.java:325"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReferneces",
          "source": "EARFileImpl.java:1286"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.collectEJBReferences",
          "source": "EARFileImpl.java:1249"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReferences",
          "source": "EARFileImpl.java:1225"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.runEarDeploy",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.access$0",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "109430",
      "duplicateId": "109548",
      "date": "2005-09-13T21:18:49+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "blocker"
    },
    {
      "exceptionType": "org.eclipse.jst.j2ee.commonarchivecore.internal.exception.NoModuleFileException",
      "message": "A file does not exist for module element having uri: web.war",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.checkType",
          "source": "ModuleRefImpl.java:490"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.initModuleFileFromEAR",
          "source": "ModuleRefImpl.java:127"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.getModuleFile",
          "source": "ModuleRefImpl.java:105"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getModuleFile",
          "source": "EARFileImpl.java:95"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor",
          "source": "EARFileImpl.java:335"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor",
          "source": "EARFileImpl.java:344"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReferneces",
          "source": "EARFileImpl.java:1282"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.collectEJBReferences",
          "source": "EARFileImpl.java:1249"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReferences",
          "source": "EARFileImpl.java:1225"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.runEarDeploy",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.access$0",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1739"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.execute",
          "source": "Unknown  Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.run",
          "source": "Unknown  Source"
        }
      ],
      "number": 1,
      "commentIndex": 7,
      "bugId": "109430",
      "duplicateId": "109548",
      "date": "2005-09-20T23:30:08+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "blocker"
    },
    {
      "exceptionType": "org.eclipse.jst.j2ee.commonarchivecore.internal.exception.NoModuleFileException",
      "message": "A file does not exist for module element having uri:  ejb_bbECmp_allowedmethods_client.jar",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.checkType",
          "source": "ModuleRefImpl.java:490"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.initModuleFileFromEAR",
          "source": "ModuleRefImpl.java:127"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleRefImpl.getModuleFile",
          "source": "ModuleRefImpl.java:105"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getModuleFile",
          "source": "EARFileImpl.java:95"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor",
          "source": "EARFileImpl.java:335"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor",
          "source": "EARFileImpl.java:325"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReferneces",
          "source": "EARFileImpl.java:1286"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.collectEJBReferences",
          "source": "EARFileImpl.java:1249"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getEJBReferences",
          "source": "EARFileImpl.java:1225"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.runEarDeploy",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.access$0",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1719"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1739"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension$RunDeploy.execute",
          "source": "Unknown  Source"
        },
        {
          "method": "com.ibm.etools.ejbdeploy.batch.plugin.BatchExtension.run",
          "source": "Unknown  Source"
        }
      ],
      "number": 2,
      "commentIndex": 8,
      "bugId": "109430",
      "duplicateId": "109548",
      "date": "2005-09-20T23:35:26+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "blocker"
    }
  ],
  "groupId": "109548",
  "bugId": "109430",
  "duplicateId": "109548",
  "date": "2005-09-13T21:18:49+02:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "blocker"
}