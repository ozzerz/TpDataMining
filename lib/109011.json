{
  "comments": [
    "I20050906 + ZRH HEAD + JFace HEAD\n\nThe following exception kills Eclipse on startup (with existing or fresh workspace):\n\n!SESSION 2005-09-08 01:10:07.947 -----------------------------------------------\neclipse.buildId\u003dunknown\njava.version\u003d1.4.2_09\njava.vendor\u003dApple Computer, Inc.\nBootLoader constants: OS\u003dmacosx, ARCH\u003dppc, WS\u003dcarbon, NL\u003den_US\nFramework arguments:  -application org.eclipse.ui.ide.workbench -pdelaunch\nCommand-line arguments:  -application org.eclipse.ui.ide.workbench -data /Volumes/Stuff/Eclipse/\ntest_ws/enc16 -dev file:/Users/weinand/Eclipse/workspaces/release/.metadata/.plugins/\norg.eclipse.pde.core/enc16/dev.properties -pdelaunch -consoleLog -os macosx -ws carbon -arch ppc\n\n!ENTRY org.eclipse.ui 4 4 2005-09-08 01:10:14.584\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 2005-09-08 01:10:14.589\n!MESSAGE 261\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException: 261\n\tat org.eclipse.jface.bindings.BindingManager.removeDeletions(BindingManager.java:1649)\n\tat org.eclipse.jface.bindings.BindingManager.computeBindings(BindingManager.java:491)\n\tat org.eclipse.jface.bindings.BindingManager.recomputeBindings(BindingManager.java:1466)\n\tat org.eclipse.jface.bindings.BindingManager.getActiveBindingsByParameterizedCommand\n(BindingManager.java:825)\n\tat org.eclipse.jface.bindings.BindingManager.getActiveBindingsFor(BindingManager.java:1071)\n\tat org.eclipse.ui.internal.keys.BindingService.getActiveBindingsFor(BindingService.java:91)\n\tat org.eclipse.ui.internal.ide.actions.QuickMenuAction.getShortCutString(QuickMenuAction.java:\n108)\n\tat org.eclipse.ui.internal.ide.WorkbenchActionBuilder$6.getMenuText\n(WorkbenchActionBuilder.java:457)\n\tat org.eclipse.jface.action.MenuManager.fill(MenuManager.java:221)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:627)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:549)\n\tat org.eclipse.jface.action.MenuManager.fill(MenuManager.java:232)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:627)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:549)\n\tat org.eclipse.jface.action.MenuManager.createMenuBar(MenuManager.java:158)\n\tat org.eclipse.jface.action.MenuManager.createMenuBar(MenuManager.java:174)\n\tat org.eclipse.ui.internal.WorkbenchWindow.createDefaultContents(WorkbenchWindow.java:929)\n\tat org.eclipse.ui.internal.WorkbenchWindowConfigurer.createDefaultContents\n(WorkbenchWindowConfigurer.java:577)\n\tat org.eclipse.ui.application.WorkbenchWindowAdvisor.createWindowContents\n(WorkbenchWindowAdvisor.java:261)\n\tat org.eclipse.ui.internal.WorkbenchWindow.createContents(WorkbenchWindow.java:897)\n\tat org.eclipse.jface.window.Window.create(Window.java:418)\n\tat org.eclipse.ui.internal.Workbench.busyOpenWorkbenchWindow(Workbench.java:663)\n\tat org.eclipse.ui.internal.Workbench.doOpenFirstTimeWindow(Workbench.java:1317)\n\tat org.eclipse.ui.internal.Workbench.openFirstTimeWindow(Workbench.java:1223)\n\tat org.eclipse.ui.internal.WorkbenchConfigurer.openFirstTimeWindow(WorkbenchConfigurer.java:\n190)\n\tat org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:706)\n\tat org.eclipse.ui.internal.Workbench.init(Workbench.java:1034)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1671)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:377)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:164)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Shoot... and Doug is out of town.  Susan, could you take a peek at this?",
    "I\u0027ll look at this right now...",
    "Andre - I can\u0027t reproduce this one, but I don\u0027t have anything but default key \nbindings.  Could you attach your bindings?\nI think everything I should need is in\n\n\u003cworkspace\u003e/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.u\ni.workbench.prefs\n\nI\u0027m also going to attach an experimental patch, because in examining the code, \nI think I see the problem...\n\n\n",
    "Created an attachment (id\u003d26988)\nBindingManager.patch\n\nAndre - could you give this a try?\nThis is a trial patch based on eyeballing the code.\nThis seems an obvious problem, but I\u0027m surprised no one else has had the\nexception.  I\u0027m not sure what state the key bindings have to be in to trigger\nthe problem.",
    "Created an attachment (id\u003d26989)\ncompressed org.eclipse.ui.workbench.prefs\n\nHi Susan, here is the requested file. However, I\u0027m seeing the problem with a\nfresh workspace too.",
    "Sorry, but the patch doesn\u0027t fix the problem for me.",
    "You are aware that the bug occured on the Mac?",
    "sigh...the patch was a no-op (pre-post increment confusion on my part).  \nSorry \u0027bout that.  I can\u0027t get this to obviously fail on Windows.  \n\nCan you tell me what\u0027s loaded in your workspace (what is ZRH head?)\nAnd is there any corresponding workbench HEAD loaded?...\nAre your non-Mac counterparts seeing the problem with similar configs?\n\n\n\n",
    "(From update of attachment 26988)\n(ignore this...blush)\n",
    "The calculation of \"deletedCount\" is wrong because null-valued slots of the \"bindingsCopy\" array are set \nto null (deleted) multiple times, thus counted as deleted more than once (line 1634).\nSince the resulting array is shortened by the number of deleted slots, but the copying of slots is done if a \nslot is non-null, an AIOOBE must occur as soon as any deleted slot is counted twice.\n\nThe attached patch fixes this problem by not relying on the algorithm to maintain a correct \n\"deletedCount\". Instead the empty slots are counted before copying (and compacting) the array.\nThe fix ensures:\n- that the array is in fact compacted,\n- that no AIOOBE can occur,\n- and that the new behavior of the algorithm is not worse than the original behavior.",
    "Created an attachment (id\u003d26996)\npatch for BindingManager.java\n",
    "*** Bug 109707 has been marked as a duplicate of this bug. ***",
    "Note that this flaw was also introduced into the 3.1.1 stream.",
    "Sorry, I meant to reassign this to Doug before I left town last week.  I\u0027d \nrather he review the patch since he\u0027s been working in this code...",
    "If I understand correctly, this happens because of a missing \"break\" statement  \nafter line 1634 of BindingManager.  Another approach is to perform a second \niteration over the array to count the deletions (as given by Andre\u0027s patch).  \nThe AIOOBE can happen if two or more deletions markers for the same trigger \nsequence match an existing binding. \n ",
    "Created an attachment (id\u003d27341)\nPatch to BindingManager (alternate)\n\nAndre: does this patch work for you?  Do I understand the problem correctly?",
    "Yes, your patch fixes the problem for me.",
    "Fixed in CVS.  Caused by the fix for Bug 106574.  Applying patch to 3.1.1  \nmaintenance stream as well. ",
    "Andre: would you be able to confirm that the problem you see is fixed in \nI20050921-1600 or later? \n  ",
    "will do...",
    "verified for I20050921-2000",
    "Thank you very much.  I also cannot reproduce the problem anymore.  Marking as \nverified. "
  ],
  "commentCreationDates": [
    "2005-09-08T01:11:20+02:00",
    "2005-09-09T17:00:17+02:00",
    "2005-09-09T18:15:17+02:00",
    "2005-09-09T18:42:08+02:00",
    "2005-09-09T18:48:09+02:00",
    "2005-09-09T18:53:06+02:00",
    "2005-09-09T19:05:15+02:00",
    "2005-09-09T19:14:30+02:00",
    "2005-09-09T19:17:47+02:00",
    "2005-09-09T19:29:24+02:00",
    "2005-09-10T00:34:12+02:00",
    "2005-09-10T00:38:00+02:00",
    "2005-09-16T14:37:01+02:00",
    "2005-09-16T14:37:29+02:00",
    "2005-09-20T00:04:10+02:00",
    "2005-09-21T18:01:17+02:00",
    "2005-09-21T18:03:29+02:00",
    "2005-09-21T18:52:56+02:00",
    "2005-09-21T21:34:23+02:00",
    "2005-09-22T16:16:47+02:00",
    "2005-09-22T16:21:13+02:00",
    "2005-09-22T16:47:30+02:00",
    "2005-09-22T16:51:39+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "261",
      "elements": [
        {
          "method": "org.eclipse.jface.bindings.BindingManager.removeDeletions",
          "source": "BindingManager.java:1649"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.computeBindings",
          "source": "BindingManager.java:491"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.recomputeBindings",
          "source": "BindingManager.java:1466"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.getActiveBindingsByParameterizedCommand",
          "source": "BindingManager.java:825"
        },
        {
          "method": "org.eclipse.jface.bindings.BindingManager.getActiveBindingsFor",
          "source": "BindingManager.java:1071"
        },
        {
          "method": "org.eclipse.ui.internal.keys.BindingService.getActiveBindingsFor",
          "source": "BindingService.java:91"
        },
        {
          "method": "org.eclipse.ui.internal.ide.actions.QuickMenuAction.getShortCutString",
          "source": "QuickMenuAction.java: 108"
        },
        {
          "method": "org.eclipse.ui.internal.ide.WorkbenchActionBuilder$6.getMenuText",
          "source": "WorkbenchActionBuilder.java:457"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.fill",
          "source": "MenuManager.java:221"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:627"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:549"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.fill",
          "source": "MenuManager.java:232"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:627"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:549"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.createMenuBar",
          "source": "MenuManager.java:158"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.createMenuBar",
          "source": "MenuManager.java:174"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.createDefaultContents",
          "source": "WorkbenchWindow.java:929"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindowConfigurer.createDefaultContents",
          "source": "WorkbenchWindowConfigurer.java:577"
        },
        {
          "method": "org.eclipse.ui.application.WorkbenchWindowAdvisor.createWindowContents",
          "source": "WorkbenchWindowAdvisor.java:261"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.createContents",
          "source": "WorkbenchWindow.java:897"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:418"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyOpenWorkbenchWindow",
          "source": "Workbench.java:663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.doOpenFirstTimeWindow",
          "source": "Workbench.java:1317"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openFirstTimeWindow",
          "source": "Workbench.java:1223"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchConfigurer.openFirstTimeWindow",
          "source": "WorkbenchConfigurer.java: 190"
        },
        {
          "method": "org.eclipse.ui.application.WorkbenchAdvisor.openWindows",
          "source": "WorkbenchAdvisor.java:706"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.init",
          "source": "Workbench.java:1034"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1671"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:377"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:164"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "109011",
      "date": "2005-09-08T01:11:20+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "blocker"
    }
  ],
  "groupId": "109011",
  "bugId": "109011",
  "date": "2005-09-08T01:11:20+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "blocker"
}