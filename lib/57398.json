{
  "comments": [
    "Overview\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nI\u0027m having a problem with creating nested ExpandableComposite or Section \ncontrols. The effect I\u0027m after is to have a nested hierarchy - eg. like a table \nof contents.\n\nSteps to Reproduce\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nAs a starting point, I took the example \nfrom \"org.eclipse.ui.forms.examples.views.FormsView\" and got this working fine.\n\nI then added a \"copy\" of this code which creates a new section \nnamed \"section2\", together with other new control names:\n\n\tSection section2 \u003d toolkit.createSection(sectionClient, \nSection.DESCRIPTION|Section.TWISTIE|Section.EXPANDED);\n\n\ttd \u003d new TableWrapData(TableWrapData.FILL);\n\ttd.colspan \u003d 2;\n\tsection2.setLayoutData(td);\n\tsection2.addExpansionListener(new ExpansionAdapter() {\n\t\tpublic void expansionStateChanged(ExpansionEvent e) {\n\t\t\tform.reflow(true);\n\t\t}\n\t});\n\tsection2.setText(\"Section 2 title\");\n\ttoolkit.createCompositeSeparator(section2);\n\tsection2.setDescription(\"This is the SECOND description that goes below \nthe title\");\n\tComposite section2Client \u003d toolkit.createComposite(section2);\n\tsection2Client.setLayout(new TableWrapLayout());\n\tbutton \u003d toolkit.createButton(section2Client, \"2 Radio 1\", SWT.RADIO);\n\tbutton \u003d toolkit.createButton(section2Client, \"2 Radio 2\", SWT.RADIO);\n\tsection2.setClient(section2Client);\n\nwith the create statements referencing the client section of the \"higher level\" \nsection. When executed, this results in a stack trace. The first part of this \nis shown below:\n\nError Apr 05, 2004 08:34:17.119 java.lang.ClassCastException\njava.lang.ClassCastException\nat org.eclipse.swt.layout.GridLayout.createGrid(GridLayout.java:430)\nat org.eclipse.swt.layout.GridLayout.computeLayoutSize(GridLayout.java:330)\nat org.eclipse.swt.layout.GridLayout.computeSize(GridLayout.java:376)\nat org.eclipse.swt.widgets.Composite.computeSize(Composite.java:157)\nat org.eclipse.ui.forms.widgets.LayoutComposite.computeSize\n(LayoutComposite.java:35)\nat org.eclipse.ui.forms.internal.widgets.FormUtil.computeMinimumWidth\n(FormUtil.java:347)\nat \norg.eclipse.ui.forms.widgets.ExpandableComposite$ExpandableLayout.computeMinimum\nWidth(ExpandableComposite.java:253)\nat org.eclipse.ui.forms.widgets.TableWrapLayout.calculateMinimumColumnWidths\n(TableWrapLayout.java:686)\nat org.eclipse.ui.forms.widgets.TableWrapLayout.internalGetMinimumWidth\n(TableWrapLayout.java:626)\nat org.eclipse.ui.forms.widgets.TableWrapLayout.layout(TableWrapLayout.java:180)\nat org.eclipse.swt.widgets.Composite.layout(Composite.java:348)\nat org.eclipse.swt.widgets.Composite.layout(Composite.java:324)\nat org.eclipse.ui.forms.widgets.ScrolledForm.reflow(ScrolledForm.java:153)\nat org.eclipse.ui.forms.widgets.SharedScrolledComposite$1.handleEvent\n(SharedScrolledComposite.java:36)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:769)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:774)\nat org.eclipse.swt.widgets.Control.WM_SIZE(Control.java:4140)\nat org.eclipse.swt.widgets.Scrollable.WM_SIZE(Scrollable.java:308)\n\n\nExpected Results\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nnested sections\n\nBuild date \u0026 Platform\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nEclipse 3.0M8 - Win2k",
    "Some of the children in your layout hierarchy have TableLayoutData objects for \nlayout data in the composite that has GridLayout. Check your code carefully \nand you will find it.",
    "thanks.\n\npoint taken about the grid stuff. I\u0027ve created a new version, but I thought \nmodelling on the supplied example might be a good start.\n\nnone the less, I\u0027ve run a new version, which just uses TableWrapLayout - since \nthis is what I really want - for the text and controls within the sections to \nflow when the view is resized.\n\nThe code fragment is:\n-----8\u003c-----\n// section\nSection section \u003d toolkit.createSection(form.getBody(),   \nSection.DESCRIPTION|Section.TWISTIE|Section.EXPANDED);\nTableWrapLayout twl \u003d new TableWrapLayout();\nsection.setLayout(twl);\nsection.addExpansionListener(new ExpansionAdapter() {\n\tpublic void expansionStateChanged(ExpansionEvent e) {\n\t\tform.reflow(true);\n\t}\n});\nsection.setText(\"Section title\");\ntoolkit.createCompositeSeparator(section);\nsection.setDescription(\"This is the description that goes below the title\");\nComposite sectionClient \u003d toolkit.createComposite(section);\nsectionClient.setLayout(new TableWrapLayout());\nText t1 \u003d toolkit.createText(sectionClient, \"hello\");\nsection.setClient(sectionClient);\n\n// section 2\nSection section2 \u003d toolkit.createSection(sectionClient,   \nSection.DESCRIPTION|Section.TWISTIE|Section.EXPANDED);\nTableWrapLayout twl2 \u003d new TableWrapLayout();\nsection2.setLayout(twl2);\n\nsection2.addExpansionListener(new ExpansionAdapter() {\n\tpublic void expansionStateChanged(ExpansionEvent e) {\n\t\tform.reflow(true);\n\t}\n});\nsection2.setText(\"Section 2 title\");\ntoolkit.createCompositeSeparator(section2);\nsection2.setDescription(\"This is the description that goes below the title\");\nComposite sectionClient2 \u003d toolkit.createComposite(section2);\nsectionClient2.setLayout(new TableWrapLayout());\nText t2 \u003d toolkit.createText(sectionClient2, \"hello 2\");\nsection2.setClient(sectionClient2);\n\n\n-----8\u003c-----\n\nThe stacktrace now resembles:\n\njava.lang.NullPointerException\nat org.eclipse.ui.forms.widgets.TableWrapLayout.calculateMinimumColumnWidths\n(TableWrapLayout.java:678)\nat org.eclipse.ui.forms.widgets.TableWrapLayout.internalGetMinimumWidth\n(TableWrapLayout.java:626)\nat org.eclipse.ui.forms.widgets.TableWrapLayout.layout(TableWrapLayout.java:180)\nat org.eclipse.swt.widgets.Composite.layout(Composite.java:348)\nat org.eclipse.swt.widgets.Composite.layout(Composite.java:324)\nat org.eclipse.ui.forms.widgets.ScrolledForm.reflow(ScrolledForm.java:153)\nat org.eclipse.ui.forms.widgets.SharedScrolledComposite$1.handleEvent\n(SharedScrolledComposite.java:36)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:769)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:774)\nat org.eclipse.swt.widgets.Control.WM_SIZE(Control.java:4140)\n",
    "oops.\n\nI pared the code back even further, and ensure that *every* composite had a \ntablewraplayout and tablewrapdata on it, and simple controls had tablewrapdata \napplied .... and all was well.\n\nHowever, the layout code does seem very sensitive to the layout information. \nand a null pointer exception seems a little harsh.\n\nthanks for your time."
  ],
  "commentCreationDates": [
    "2004-04-05T00:55:55+02:00",
    "2004-04-05T19:14:07+02:00",
    "2004-04-06T00:55:56+02:00",
    "2004-04-06T03:51:57+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.swt.layout.GridLayout.createGrid",
          "source": "GridLayout.java:430"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeLayoutSize",
          "source": "GridLayout.java:330"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeSize",
          "source": "GridLayout.java:376"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.computeSize",
          "source": "Composite.java:157"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.LayoutComposite.computeSize",
          "source": "LayoutComposite.java:35"
        },
        {
          "method": "org.eclipse.ui.forms.internal.widgets.FormUtil.computeMinimumWidth",
          "source": "FormUtil.java:347"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.ExpandableComposite$ExpandableLayout.computeMinimumWidth",
          "source": "ExpandableComposite.java:253"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.calculateMinimumColumnWidths",
          "source": "TableWrapLayout.java:686"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.internalGetMinimumWidth",
          "source": "TableWrapLayout.java:626"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.layout",
          "source": "TableWrapLayout.java:180"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.layout",
          "source": "Composite.java:348"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.layout",
          "source": "Composite.java:324"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.ScrolledForm.reflow",
          "source": "ScrolledForm.java:153"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SharedScrolledComposite$1.handleEvent",
          "source": "SharedScrolledComposite.java:36"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:793"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:774"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_SIZE",
          "source": "Control.java:4140"
        },
        {
          "method": "org.eclipse.swt.widgets.Scrollable.WM_SIZE",
          "source": "Scrollable.java:308"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "57398",
      "date": "2004-04-05T00:55:55+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.calculateMinimumColumnWidths",
          "source": "TableWrapLayout.java:678"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.internalGetMinimumWidth",
          "source": "TableWrapLayout.java:626"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.layout",
          "source": "TableWrapLayout.java:180"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.layout",
          "source": "Composite.java:348"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.layout",
          "source": "Composite.java:324"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.ScrolledForm.reflow",
          "source": "ScrolledForm.java:153"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SharedScrolledComposite$1.handleEvent",
          "source": "SharedScrolledComposite.java:36"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:769"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:793"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:774"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_SIZE",
          "source": "Control.java:4140"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "57398",
      "date": "2004-04-06T00:55:56+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "57398",
  "bugId": "57398",
  "date": "2004-04-05T00:55:55+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}