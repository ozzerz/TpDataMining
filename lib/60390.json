{
  "comments": [
    "Build id: 200404270800\n\nWhenever i try to use the content assist in the ant editor i get a\nNoClassDefFoundError for com/starbase/starteam/File.  The ant home is pointing\nto the 1.6.1 version in the plugins directory.  I tried removing\nant-starteam.jar from the classpath, but it seemed to make no difference.\n\n\njava.lang.NoClassDefFoundError: com/starbase/starteam/File\nat java.lang.Class.getDeclaredMethods0(Native Method)\nat java.lang.Class.privateGetDeclaredMethods(Unknown Source)\nat java.lang.Class.privateGetPublicMethods(Unknown Source)\nat java.lang.Class.privateGetPublicMethods(Unknown Source)\nat java.lang.Class.getMethods(Unknown Source)\nat org.apache.tools.ant.IntrospectionHelper.\u003cinit\u003e(IntrospectionHelper.java:172)\nat org.apache.tools.ant.IntrospectionHelper.getHelper(IntrospectionHelper.java:461)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.hasNestedElements(AntEditorCompletionProcessor.java:971)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.newCompletionProposal(AntEditorCompletionProcessor.java:845)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.createProposals(AntEditorCompletionProcessor.java:835)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.getTaskProposals(AntEditorCompletionProcessor.java:762)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.getProposalsFromDocument(AntEditorCompletionProcessor.java:345)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.determineProposals(AntEditorCompletionProcessor.java:319)\nat\norg.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.computeCompletionProposals(AntEditorCompletionProcessor.java:228)\nat\norg.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1457)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:243)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.access$7(CompletionProposalPopup.java:239)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup$1.run(CompletionProposalPopup.java:199)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\nat\norg.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:194)\nat\norg.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1308)\nat\norg.eclipse.ant.internal.ui.editor.AntEditor$StatusLineSourceViewer.doOperation(AntEditor.java:261)\nat org.eclipse.ui.texteditor.ContentAssistAction$1.run(ContentAssistAction.java:82)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\nat org.eclipse.ui.texteditor.ContentAssistAction.run(ContentAssistAction.java:80)\nat\norg.eclipse.ui.texteditor.RetargetTextEditorAction.run(RetargetTextEditorAction.java:240)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\nat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:612)\nat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:564)\nat\norg.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:483)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2592)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2270)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:240)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:140)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:283)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:240)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:269)\nat org.eclipse.core.launcher.Main.run(Main.java:700)\nat org.eclipse.core.launcher.Main.main(Main.java:684)",
    "Is you Ant runtime classpath set to the defaults...you mentioned the Ant \nhome...what about the rest of the entries?\nDoes the failure occur for any buildfile?\nCan you provide a sample buildfile that causes the problem?",
    "As far as i know it was the default setup.  I restored the defaults (and \napplied), but it also made no difference.\n\nI can\u0027t get content to assist to work on anything but an empty file (which \ninserts the project template)\n\nsample file:\n\u003cproject default\u003d\"\"\u003e\n    |\n\u003c/project\u003e\n\ncontent assist at the |",
    "Created an attachment (id\u003d10146)\nDefault Ant Classpath\n\nThis is what the default classpath looks for me",
    "Thanks for the feedback Brock...but I can\u0027t reproduce your problem.\nThe classpath looks good.\nCan you try I200404281424 and see if that corrects the situation?",
    "I haven\u0027t retested with the new build yet (will tomorrow), but i found that the\nproblem did not appear in a runtime workbech.  However (there is always a\nhowever) if i ran the runtime workbench with a source version of\norg.eclipse.pde.ui in the path i got the NoClassDef on\norg/eclipse/pde/internal/ui/wizards/exports/FeatureExportJob\n\nThe plugin was listed in the platform.cfg which i assume is used for\nclassloading, but i have no idea how that stuff works.  This might be a seperate\nproblem.\n\nAre you using an IBM or Sun VM?  I am using Suns JDK 1.4.2_02 so it may be a VM\nissue?",
    "When you are self hosting and attempting to use Ant in the runtime-workbench \nyou must make sure that the \"Classpath Entries\" setting is correct.\nUsually this means that only the \"bin\" directory is included and not the \noutput of other source folders (which can be JAR\u0027d up for use as a support \nlibarary for Ant). Having both the output directories for these source folders \nand the resulting support JAR on the Ant runtime classpath causes all kinds of \ntrouble.  \nCan you verify this is the case for this problem?",
    "My launch configuration does have bin as the only entry in -dev (it also\nappeared in the properties of the process).\n\nAs for the problem with self hosting.  I found an error in the log that seems\nimportant.\n\"It appears the library specified via the extraClasspathEntries extension point\nof Plug-in Development UI does not exist\"\n\nI traced this message and it was caused by a file not found exception looking\nfor pdeui.jar while loading the extraClassPath details.  As i am running from\nsource this jar does not exist.  Is this a seperate issue?  If so i will create\na PR for it.\n\nhere is the stacktrace:\njava.io.FileNotFoundException: /pdeui.jar\n\tat\norg.eclipse.osgi.framework.internal.protocol.bundleentry.Handler.findBundleEntry(Handler.java:41)\n\tat\norg.eclipse.osgi.framework.adaptor.core.BundleResourceHandler.openConnection(BundleResourceHandler.java:151)\n\tat java.net.URL.openConnection(URL.java:896)\n\tat\norg.eclipse.core.runtime.adaptor.URLConverterImpl.convertToFileURL(URLConverterImpl.java:27)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.asLocalURL(InternalPlatform.java:188)\n\tat org.eclipse.core.runtime.Platform.asLocalURL(Platform.java:257)\n\tat\norg.eclipse.ant.core.AntCorePreferences.computeDefaultExtraClasspathEntries(AntCorePreferences.java:498)\n\tat org.eclipse.ant.core.AntCorePreferences.\u003cinit\u003e(AntCorePreferences.java:91)\n\tat org.eclipse.ant.core.AntCorePlugin.getPreferences(AntCorePlugin.java:187)\n\tat\norg.eclipse.ant.internal.ui.editor.model.AntDefiningTaskNode.setJavaClassPath(AntDefiningTaskNode.java:69)\n\tat org.eclipse.ant.internal.ui.editor.outline.AntModel.\u003cinit\u003e(AntModel.java:120)\n\tat\norg.eclipse.ant.internal.ui.editor.text.AntEditorDocumentProvider.createAntModel(AntEditorDocumentProvider.java:355)\n\tat\norg.eclipse.ant.internal.ui.editor.text.AntEditorDocumentProvider.createFileInfo(AntEditorDocumentProvider.java:373)\n\tat\norg.eclipse.ui.editors.text.TextFileDocumentProvider.connect(TextFileDocumentProvider.java:417)\n\tat\norg.eclipse.ui.texteditor.AbstractTextEditor.doSetInput(AbstractTextEditor.java:2696)\n\tat org.eclipse.ui.texteditor.StatusTextEditor.doSetInput(StatusTextEditor.java:173)\n\tat\norg.eclipse.ui.texteditor.AbstractDecoratedTextEditor.doSetInput(AbstractDecoratedTextEditor.java:1077)\n\tat org.eclipse.ui.editors.text.TextEditor.doSetInput(TextEditor.java:290)\n\tat org.eclipse.ant.internal.ui.editor.AntEditor.doSetInput(AntEditor.java:531)\n\tat\norg.eclipse.ui.texteditor.AbstractTextEditor$14.run(AbstractTextEditor.java:2142)",
    "Likely PDE UI generates the extraclasspath entry either during the build \nprocess (build the Eclipse SDK) and/or they may have a buildfile associated \nwith their source plugin that can generate the JAR. We (debug / ant) use the \nsecond option to make self hosting easier. I am not sure how PDE UI works.",
    "I finally found the problem.\nstart up eclipse with the -Xverify:none VM option and it stops working.  Why i\nhave NO idea, but i suspect a VM \u0027feature\u0027.\n\nI don\u0027t see how turning off bytecode verification could cause this?",
    "Well the good news is that this really does not look like an Ant integration \nbug :-)\n\nDo you turn the bytecode verification off for your runtime-workbench target or \nfor the host Eclipse or for both?",
    "just for my host :)\nwhich is why it worked when self hosted but not on the host...\n\nIt definitely isn\u0027t an Ant integration problem.  It may be an ant classloader\nproblem, but i doubt that.  More likely it is a VM thing.  Should i even bother\nsending this to Sun? I don\u0027t have a reproducable test case outside of eclipse,\nand coulnd\u0027t really be bothered :)\n\nIs the issue with the extra classpath a bug?  I assume the ant UI contributions\nhave a special build script to create their extra jars.  The PDE jar is actually\nthe plugin\u0027s jar (all of the classes for the plugin).  Shouldn\u0027t the extra\nclasspath jars just have enough to get the ant tasks working and be a component\nin the source plugins?",
    "I will write the verify thing on my whiteboard to take a look but it will be \npretty low priority. if you log it Sun just let us know in this bug report. \nThey have been responsive in the past with bugs that have only shown up in \neclipse.\n\nThe extraclasspath thing is more of a configuration detail than a bug. PDE has \nchosen not to make it easy for people to selfhost and make use of PDE\u0027s ant \ntasks. You could log a bug against them to make this better.\n\nSo unless I hear otherwise...I plan to close this one as invalid (yah!)",
    "Since you onlly get the NoClassDefFound error when verify is off, i don\u0027t see\nthat it would be worth checking for it.  Best to fix it at the source.  Please\nfeel free to clase this one as invalid.\n\nThe workaround is simple and turning off verification doesn\u0027t improve performace\nmuch.  I would prefer to have content assist any day!\n\nThank you for your prompt response",
    "Thank-you as well."
  ],
  "commentCreationDates": [
    "2004-04-29T12:07:40+02:00",
    "2004-04-29T14:10:51+02:00",
    "2004-04-30T01:20:36+02:00",
    "2004-04-30T01:27:40+02:00",
    "2004-04-30T01:31:08+02:00",
    "2004-04-30T12:59:18+02:00",
    "2004-04-30T16:02:22+02:00",
    "2004-05-01T01:29:52+02:00",
    "2004-05-01T01:52:44+02:00",
    "2004-05-01T02:19:35+02:00",
    "2004-05-01T02:24:20+02:00",
    "2004-05-01T02:31:54+02:00",
    "2004-05-01T02:36:34+02:00",
    "2004-05-01T02:50:39+02:00",
    "2004-05-01T02:54:12+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "com/starbase/starteam/File",
      "elements": [
        {
          "method": "java.lang.Class.getDeclaredMethods0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.privateGetDeclaredMethods",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.Class.privateGetPublicMethods",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.Class.privateGetPublicMethods",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.Class.getMethods",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.tools.ant.IntrospectionHelper.\u003cinit\u003e",
          "source": "IntrospectionHelper.java:172"
        },
        {
          "method": "org.apache.tools.ant.IntrospectionHelper.getHelper",
          "source": "IntrospectionHelper.java:461"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.hasNestedElements",
          "source": "AntEditorCompletionProcessor.java:971"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.newCompletionProposal",
          "source": "AntEditorCompletionProcessor.java:845"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.createProposals",
          "source": "AntEditorCompletionProcessor.java:835"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.getTaskProposals",
          "source": "AntEditorCompletionProcessor.java:762"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.getProposalsFromDocument",
          "source": "AntEditorCompletionProcessor.java:345"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.determineProposals",
          "source": "AntEditorCompletionProcessor.java:319"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditorCompletionProcessor.computeCompletionProposals",
          "source": "AntEditorCompletionProcessor.java:228"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals",
          "source": "ContentAssistant.java:1457"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals",
          "source": "CompletionProposalPopup.java:243"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$7",
          "source": "CompletionProposalPopup.java:239"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup$1.run",
          "source": "CompletionProposalPopup.java:199"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals",
          "source": "CompletionProposalPopup.java:194"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions",
          "source": "ContentAssistant.java:1308"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditor$StatusLineSourceViewer.doOperation",
          "source": "AntEditor.java:261"
        },
        {
          "method": "org.eclipse.ui.texteditor.ContentAssistAction$1.run",
          "source": "ContentAssistAction.java:82"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.texteditor.ContentAssistAction.run",
          "source": "ContentAssistAction.java:80"
        },
        {
          "method": "org.eclipse.ui.texteditor.RetargetTextEditorAction.run",
          "source": "RetargetTextEditorAction.java:240"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:612"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:564"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:483"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2592"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2270"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1324"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:240"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:140"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:90"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:283"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:240"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:117"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:269"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:700"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:684"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "60390",
      "date": "2004-04-29T12:07:40+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    },
    {
      "exceptionType": "java.io.FileNotFoundException",
      "message": "/pdeui.jar",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.protocol.bundleentry.Handler.findBundleEntry",
          "source": "Handler.java:41"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.BundleResourceHandler.openConnection",
          "source": "BundleResourceHandler.java:151"
        },
        {
          "method": "java.net.URL.openConnection",
          "source": "URL.java:896"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.URLConverterImpl.convertToFileURL",
          "source": "URLConverterImpl.java:27"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.asLocalURL",
          "source": "InternalPlatform.java:188"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.asLocalURL",
          "source": "Platform.java:257"
        },
        {
          "method": "org.eclipse.ant.core.AntCorePreferences.computeDefaultExtraClasspathEntries",
          "source": "AntCorePreferences.java:498"
        },
        {
          "method": "org.eclipse.ant.core.AntCorePreferences.\u003cinit\u003e",
          "source": "AntCorePreferences.java:91"
        },
        {
          "method": "org.eclipse.ant.core.AntCorePlugin.getPreferences",
          "source": "AntCorePlugin.java:187"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.model.AntDefiningTaskNode.setJavaClassPath",
          "source": "AntDefiningTaskNode.java:69"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.outline.AntModel.\u003cinit\u003e",
          "source": "AntModel.java:120"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.text.AntEditorDocumentProvider.createAntModel",
          "source": "AntEditorDocumentProvider.java:355"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.text.AntEditorDocumentProvider.createFileInfo",
          "source": "AntEditorDocumentProvider.java:373"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.connect",
          "source": "TextFileDocumentProvider.java:417"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.doSetInput",
          "source": "AbstractTextEditor.java:2696"
        },
        {
          "method": "org.eclipse.ui.texteditor.StatusTextEditor.doSetInput",
          "source": "StatusTextEditor.java:173"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.doSetInput",
          "source": "AbstractDecoratedTextEditor.java:1077"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextEditor.doSetInput",
          "source": "TextEditor.java:290"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.AntEditor.doSetInput",
          "source": "AntEditor.java:531"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor$14.run",
          "source": "AbstractTextEditor.java:2142"
        }
      ],
      "number": 1,
      "commentIndex": 7,
      "bugId": "60390",
      "date": "2004-05-01T01:29:52+02:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "60390",
  "bugId": "60390",
  "date": "2004-04-29T12:07:40+02:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}