{
  "comments": [
    "When parsing more complex template classes the indexer gives an stack overflow exception.\n\n!ENTRY org.eclipse.cdt.core 4 4 2007-04-17 11:16:30.236\n!MESSAGE Error while parsing /EAM Code/EAMTest/Datenstrukturen/CListeBegrenztConstPointerTest.cpp.\n!STACK 0\njava.lang.StackOverflowError\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTCompositeTypeSpecifier.getBaseSpecifiers(CPPASTCompositeTypeSpecifier.java:44)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassTemplate.getBases(CPPClassTemplate.java:202)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassInstance.getBases(CPPClassInstance.java:56)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1286)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1304)\n\n\nThe template classes I use have the form:\n\ntemplate \u003cclass AElementTyp, unsigned int AMax\u003e\nclass CArrayListeBegrenzt : public CArrayListe\u003cAElementTyp\u003e {\npublic:\n ....\nprivate:\n   AElementTyp mElemente[AMax];\n};",
    "Created an attachment (id\u003d64071)\nproposed patch\n\nI could only reproduce this overflow by explicitly setting up circular inheritance involving virtual base classes.  This patch adds the same checks to CPPSemantics.visitVirtualBaseClasses(...) that CPPSemantics.lookupInParents(...) has in order to create a problem binding if there is circular inheritance.\n\nAlthough the stack overflow should be fixed, the root of the problem could actually be an issue with template classes which is resulting in circular inheritance when there shouldn\u0027t be circular inheritance.",
    "Patch applied. Please retest with the latest builds. BTW, you didn\u0027t mention which build you were trying this with.",
    "I\u0027m getting a new error indexing Firefox on my Linux box (the one with an old but working per file scanner config)\n\njava.lang.NullPointerException\n\tat org.eclipse.cdt.core.parser.util.ObjectTable.lookup(ObjectTable.java:130)\n\tat org.eclipse.cdt.core.parser.util.ObjectTable.containsKey(ObjectTable.java:137)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses(CPPSemantics.java:1316)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.lookupInParents(CPPSemantics.java:1247)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.lookup(CPPSemantics.java:1126)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.resolveBinding(CPPSemantics.java:622)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPVisitor.createBinding(CPPVisitor.java:170)\n\tat org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTName.resolveBinding(CPPASTName.java:73)\n\tat org.eclipse.cdt.internal.core.pdom.PDOMWriter.addSymbols(PDOMWriter.java:130)\n\tat org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTU(PDOMIndexerTask.java:253)\n\tat org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTUs(PDOMIndexerTask.java:183)\n\tat org.eclipse.cdt.internal.core.pdom.indexer.fast.PDOMFastIndexerTask.run(PDOMFastIndexerTask.java:90)\n\tat org.eclipse.cdt.internal.core.pdom.indexer.PDOMRebuildTask.run(PDOMRebuildTask.java:74)\n\tat org.eclipse.cdt.internal.core.pdom.PDOMIndexerJob.run(PDOMIndexerJob.java:89)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n",
    "Created an attachment (id\u003d64089)\nquick fix\n\nQuick check for a null scope.",
    "Cool. This time I\u0027ll test Firefox before applying the patch :).",
    "Works now.",
    "Created an attachment (id\u003d64132)\nTemplate declarations that cause the problem\n\n",
    "I agree that the root of the problem is propably an issue with templates. I attach the template declarations. As one can see there are no virtual base classes. I suppose the problem comes from the specialization of the template class for pointers that uses an void* instantiation as base.",
    "The following code still encounters a stack overflow:\n\n  template\u003cclass T\u003e\n  class A {\n  public:\n    int a;\n  };\n  \n  template\u003cclass T\u003e\n  class A\u003cconst T*\u003e : private A\u003cvoid*\u003e {};\n  \n  template\u003cclass T\u003e\n  class A\u003cT*\u003e : private A\u003cvoid*\u003e {};\n  \n  int main(int argc, const char* argv[]) {\n    A\u003cint*\u003e f;\n    f.a;\n  }\n\nThe problem is that base specifier A\u003cvoid*\u003e of partial specialization A\u003cT*\u003e is resolving to an instance of partial specialization A\u003cT*\u003e instead of an instance of class template A.",
    "(From update of attachment 64071)\nPatch has been applied.",
    "(From update of attachment 64089)\nPatch has been applied.",
    "Returning to pool, unless you still want to work on this Bryan :)",
    "I no longer get a stack overflow with the examples from comment 7 or comment 8. Please reopen in case the problem can be reproduced with other sources."
  ],
  "commentCreationDates": [
    "2007-04-17T11:50:29+02:00",
    "2007-04-17T19:29:19+02:00",
    "2007-04-17T20:20:57+02:00",
    "2007-04-17T21:15:30+02:00",
    "2007-04-17T21:36:31+02:00",
    "2007-04-17T21:41:37+02:00",
    "2007-04-17T21:54:46+02:00",
    "2007-04-18T08:02:04+02:00",
    "2007-04-18T08:05:10+02:00",
    "2007-04-18T18:08:57+02:00",
    "2007-05-16T20:38:41+02:00",
    "2007-05-16T20:39:11+02:00",
    "2007-06-06T15:45:33+02:00",
    "2007-06-19T14:04:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StackOverflowError",
      "elements": [
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTCompositeTypeSpecifier.getBaseSpecifiers",
          "source": "CPPASTCompositeTypeSpecifier.java:44"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassTemplate.getBases",
          "source": "CPPClassTemplate.java:202"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassInstance.getBases",
          "source": "CPPClassInstance.java:56"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1286"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1304"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "182719",
      "date": "2007-04-17T11:50:29+02:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.cdt.core.parser.util.ObjectTable.lookup",
          "source": "ObjectTable.java:130"
        },
        {
          "method": "org.eclipse.cdt.core.parser.util.ObjectTable.containsKey",
          "source": "ObjectTable.java:137"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.visitVirtualBaseClasses",
          "source": "CPPSemantics.java:1316"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.lookupInParents",
          "source": "CPPSemantics.java:1247"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.lookup",
          "source": "CPPSemantics.java:1126"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPSemantics.resolveBinding",
          "source": "CPPSemantics.java:622"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPVisitor.createBinding",
          "source": "CPPVisitor.java:170"
        },
        {
          "method": "org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTName.resolveBinding",
          "source": "CPPASTName.java:73"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMWriter.addSymbols",
          "source": "PDOMWriter.java:130"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTU",
          "source": "PDOMIndexerTask.java:253"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.parseTUs",
          "source": "PDOMIndexerTask.java:183"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.fast.PDOMFastIndexerTask.run",
          "source": "PDOMFastIndexerTask.java:90"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.indexer.PDOMRebuildTask.run",
          "source": "PDOMRebuildTask.java:74"
        },
        {
          "method": "org.eclipse.cdt.internal.core.pdom.PDOMIndexerJob.run",
          "source": "PDOMIndexerJob.java:89"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "182719",
      "date": "2007-04-17T21:15:30+02:00",
      "product": "CDT",
      "component": "cdt-core",
      "severity": "normal"
    }
  ],
  "groupId": "182719",
  "bugId": "182719",
  "date": "2007-04-17T11:50:29+02:00",
  "product": "CDT",
  "component": "cdt-core",
  "severity": "normal"
}