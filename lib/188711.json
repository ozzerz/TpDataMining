{
  "comments": [
    "+++ This bug was initially created as a clone of Bug #134987 +++\n\nSeeing a new rule mismatch in 1.5.4 that is similar to the stack Nitin reported in comment #1 in 134987:\n\n\njava.lang.IllegalArgumentException: Attempted to beginRule: F/workshop-struts-tour/site/WEB-INF, does not match outer scope rule: L/workshop-struts-tour/site/WEB-INF/web.xml\n            at org.eclipse.core.runtime.Assert.isLegal(Assert.java:62)\n            at org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:116)\n            at org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:225)\n            at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:80)\n            at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:219)\n            at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)\n            at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1684)\n            at org.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1396)\n            at org.eclipse.core.internal.resources.File.refreshLocal(File.java:334)\n            at org.eclipse.core.internal.filebuffers.ResourceFileBuffer.refreshFile(ResourceFileBuffer.java:452)\n            at org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create(ResourceFileBuffer.java:238)\n            at org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:108)\n            at org.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel(FileBufferModelManager.java:541)\n            at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:322)\n            at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:308)\n            at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl.getModelForRead(ModelManagerImpl.java:1068)\n            at org.eclipse.wst.xml.core.internal.emf2xml.EMF2DOMSSERenderer.initializeXMLModel(EMF2DOMSSERenderer.java:307)\n            at org.eclipse.wst.xml.core.internal.emf2xml.EMF2DOMSSERenderer.loadDocument(EMF2DOMSSERenderer.java:347)\n            at org.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doLoad(EMF2DOMRenderer.java:60)\n            at org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad(TranslatorResourceImpl.java:142)\n            at org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad(CompatibilityXMIResourceImpl.java:173)\n            at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1094)\n            at org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load(TranslatorResourceImpl.java:391)\n            at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(ResourceSetImpl.java:249)\n            at org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.demandLoad(ProjectResourceSetImpl.java:83)\n            at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:264)\n            at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:390)\n            at org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource(ProjectResourceSetImpl.java:262)\n            at org.eclipse.wst.common.internal.emfworkbench.WorkbenchResourceHelper.getOrCreateResource(WorkbenchResourceHelper.java:384)\n            at org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource(EditModel.java:683)\n            at org.eclipse.wst.common.componentcore.internal.ArtifactEditModel.getResource(ArtifactEditModel.java:174)\n            at org.eclipse.wst.common.componentcore.ArtifactEdit.getResource(ArtifactEdit.java:636)\n            at org.eclipse.jst.j2ee.internal.archive.operations.ComponentLoadStrategyImpl.getMofResource(ComponentLoadStrategyImpl.java:529)\n            at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.getMofResource(ArchiveImpl.java:731)\n            at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleFileImpl.getDeploymentDescriptorResource(ModuleFileImpl.java:61)\n            at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.XmlBasedImportStrategyImpl.primLoadDeploymentDescriptor(XmlBasedImportStrategyImpl.java:39)\n            at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.War22ImportStrategyImpl.loadDeploymentDescriptor(War22ImportStrategyImpl.java:87)\n            at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.War22ImportStrategyImpl.importMetaData(War22ImportStrategyImpl.java:81)\n            at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor(WARFileImpl.java:145)\n            at org.eclipse.jst.j2ee.model.internal.validation.WarValidator.validateInJob(WarValidator.java:328)\n            at org.eclipse.jst.j2ee.internal.web.validation.UIWarValidator.validateInJob(UIWarValidator.java:92)\n            at org.eclipse.wst.validation.internal.operations.ValidatorJob.run(ValidatorJob.java:70)\n            at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "FYI: Using latest Eclipse SDK this shouldn\u0027t happen anymore as file buffers no longer refresh the file upon connect.",
    "Rob, see Daniel\u0027s comment below, also i didnn\u0027t see defect related to 134987 with WTP install, can you investigate?",
    "(In reply to comment #1)\n\u003e FYI: Using latest Eclipse SDK this shouldn\u0027t happen anymore as file buffers no\n\u003e longer refresh the file upon connect.\n\u003e \n\nI was thinking of a potential fix for WTP 1.5.5 - by \"latest Eclipse SDK\", were you referring to 3.3?\n",
    "\u003eby \"latest Eclipse SDK\", were you referring to 3.3?\nYes.",
    "Ok, thanks - Neeraj, sending back your way for the validator scheduling rule change (i.e. the scheduling rule for the UIWarValidator in 1.5.5 needs to be expanded in scope from the current WEB-INF/web.xml to at least WEB-INF)  ",
    "I don\u0027t think that changing the scheduling would be the right fix, we should try to understand why is the refresh taking place.\n\n As also pointed out by Daniel, in newew Eclipse file buffers no longer refresh the file upon connect, so the validators are exposing the problem caused by somewhere else, so the fix should be there.\n\n"
  ],
  "commentCreationDates": [
    "2007-05-23T20:19:17+02:00",
    "2007-05-24T08:53:05+02:00",
    "2007-06-12T17:18:14+02:00",
    "2007-06-12T17:33:14+02:00",
    "2007-06-12T17:52:56+02:00",
    "2007-06-12T19:38:04+02:00",
    "2007-06-13T21:19:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: F/workshop-struts-tour/site/WEB-INF, does not match outer scope rule: L/workshop-struts-tour/site/WEB-INF/web.xml",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isLegal",
          "source": "Assert.java:62"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:116"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:225"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:80"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:219"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:96"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1684"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.refreshLocal",
          "source": "Resource.java:1396"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.refreshLocal",
          "source": "File.java:334"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceFileBuffer.refreshFile",
          "source": "ResourceFileBuffer.java:452"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create",
          "source": "ResourceFileBuffer.java:238"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect",
          "source": "TextFileBufferManager.java:108"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel",
          "source": "FileBufferModelManager.java:541"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel",
          "source": "ModelManagerImpl.java:322"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel",
          "source": "ModelManagerImpl.java:308"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.model.ModelManagerImpl.getModelForRead",
          "source": "ModelManagerImpl.java:1068"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.emf2xml.EMF2DOMSSERenderer.initializeXMLModel",
          "source": "EMF2DOMSSERenderer.java:307"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.emf2xml.EMF2DOMSSERenderer.loadDocument",
          "source": "EMF2DOMSSERenderer.java:347"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doLoad",
          "source": "EMF2DOMRenderer.java:60"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad",
          "source": "TranslatorResourceImpl.java:142"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad",
          "source": "CompatibilityXMIResourceImpl.java:173"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1094"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load",
          "source": "TranslatorResourceImpl.java:391"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad",
          "source": "ResourceSetImpl.java:249"
        },
        {
          "method": "org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.demandLoad",
          "source": "ProjectResourceSetImpl.java:83"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper",
          "source": "ResourceSetImpl.java:264"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource",
          "source": "ResourceSetImpl.java:390"
        },
        {
          "method": "org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource",
          "source": "ProjectResourceSetImpl.java:262"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.WorkbenchResourceHelper.getOrCreateResource",
          "source": "WorkbenchResourceHelper.java:384"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource",
          "source": "EditModel.java:683"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.ArtifactEditModel.getResource",
          "source": "ArtifactEditModel.java:174"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.ArtifactEdit.getResource",
          "source": "ArtifactEdit.java:636"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.archive.operations.ComponentLoadStrategyImpl.getMofResource",
          "source": "ComponentLoadStrategyImpl.java:529"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ArchiveImpl.getMofResource",
          "source": "ArchiveImpl.java:731"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.ModuleFileImpl.getDeploymentDescriptorResource",
          "source": "ModuleFileImpl.java:61"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.XmlBasedImportStrategyImpl.primLoadDeploymentDescriptor",
          "source": "XmlBasedImportStrategyImpl.java:39"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.War22ImportStrategyImpl.loadDeploymentDescriptor",
          "source": "War22ImportStrategyImpl.java:87"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.War22ImportStrategyImpl.importMetaData",
          "source": "War22ImportStrategyImpl.java:81"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor",
          "source": "WARFileImpl.java:145"
        },
        {
          "method": "org.eclipse.jst.j2ee.model.internal.validation.WarValidator.validateInJob",
          "source": "WarValidator.java:328"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.web.validation.UIWarValidator.validateInJob",
          "source": "UIWarValidator.java:92"
        },
        {
          "method": "org.eclipse.wst.validation.internal.operations.ValidatorJob.run",
          "source": "ValidatorJob.java:70"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "188711",
      "date": "2007-05-23T20:19:17+02:00",
      "product": "Web Tools",
      "component": "wst.validation",
      "severity": "major"
    }
  ],
  "groupId": "188711",
  "bugId": "188711",
  "date": "2007-05-23T20:19:17+02:00",
  "product": "Web Tools",
  "component": "wst.validation",
  "severity": "major"
}