{
  "comments": [
    "I made a package (I will attach it to this bug with the name bug.zip) which\nshows a sample Java program that correctly runs when compiled with javac and\nhave classloading problems every time it is compiled with ajc.\n\nPlease see the file README.TO.DEMONSTRATE.BUG inside the bug.zip archive for\ndetailed (although simple) instructions on reproducing the bug.\n\nThere are two shell scripts attached to make things easier.\n\nPlease keep me informed of the status of this issue.",
    "Created an attachment (id\u003d5431)\nPART 1 of 3 - Sample code and scripts to demonstrate ajc compiler bug.\n\nSee the contained file README.TO.DEMONSTRATE.BUG for information.",
    "Created an attachment (id\u003d5432)\nPART 2 of 3 - Sample code and scripts to demonstrate ajc compiler bug.\n\nSee the contained file README.TO.DEMONSTRATE.BUG for information",
    "Created an attachment (id\u003d5433)\nPART 3 of 3 - Sample code and scripts to demonstrate ajc compiler bug.\n\nSee the contained file README.TO.DEMONSTRATE.BUG for information.",
    "Sorry for the big files. I wanted to make something easy to reproduce and\nself-contained.",
    "What version of the compiler are you using?  I can\u0027t reproduce this with the \n1.1.0 released compiler.  When I run compile_and_test_class_with_ajc, I \nsee \"The test case worked!\".  Are you using an older version of ajc?\n",
    "I am using j2sdk1.4.1_01 and I just noticed something which might help you to\nreproduce the bug:\n\nThe JAVA_HOME environment variable must be set to\n\u003cplace-where-java-is-located\u003e/j2sdk1.4.1_01\nfor the problem to appear.\n\n* The version I am using is really 1.1.0...\n* You should have seen an exception instead of the \"The test case worked!\" message.\n* If you still cannot reproduce the bug, I will happily provide access to my\nsystem to show it if you wish.",
    "I still can\u0027t duplicate this bug.  The only difference I can see with our \nsystems is that I\u0027m running under Windows XP instead of Linux.  My detailed \nJava version info is:\n\nC:\\aspectj\\scratch\\bug\u003ejava -version\njava version \"1.4.1_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.1_01-b01)\nJava HotSpot(TM) Client VM (build 1.4.1_01-b01, mixed mode)\n\nUnder this configuration I can\u0027t duplicate this bug.  I\u0027m cc\u0027ing this to \nGeorge Harley who I know has easy access to both Windows and Linux boxes to \nsee if he has better luck reproducing it on one or both of those systems.",
    "OK, I can look at this one tomorrow (Thursday 24th July). My Linux Java is :\njava version \"1.4.1_05\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.1_05-b01)\nJava HotSpot(TM) Client VM (build 1.4.1_05-b01, mixed mode)\n",
    "Raising to P2 to be sure that we investigate before 1.1.1 release.  \nInvestigation may result either in a fix or a lowering of priority.",
    "I couldn\u0027t resist trying to see if the error showed up for me before I left the \noffice for the day. Using the test case supplied in the zip files all went OK \nwhen it was compiled and run with the 1.4.1 JDK. However, when I compiled it \nwith the 1.1.0 ajc and ran it on the 1.4.1 JVM I got the following ...\n\nException in thread \"main\" java.lang.NoClassDefFoundError: \norg/apache/xerces/parsers/AbstractDOMParser\n        at testcase.ShowBug.main(ShowBug.java:49)\n\nI saw the same runtime behaviour when running the class with a 1.3.1 JVM.\n\nLike I said, I can look into this further tomorrow. Is the above exception what \nyou are seeing in your environment ?\n",
    "George, I don\u0027t want to keep you any later tonight, but tommorrow could you do \nthe same test on a Windows XP box to verify if this is a Linux-only bug or if \nI\u0027m somehow special in not being able to reproduce it?",
    "   The exception reported by George is exactly what I got running the\nbug-reproducer now. However, In the original environment (I am working in the\ndevelopment of software which source code I unfortunately cannot disclose) the\ncompiler generated invalid class files some times.\n\n   Again, if any of you need a test environment in which the bug shows up every\ntime access the http://pinheiros.ic.unicamp.br:40000 address in any java-enabled\nbrowser and mail me for the password - I have a X session (inside VNC) laying there.",
    "The test case is failing for me on Windows XP as well but in a different way to \nthe previously observed Linux failure. \n\nOn Windows XP with a 1.4.1_02 Java and a 1.1.0 AspectJ when I ran the ajc script \nsupplied in the test case zip I got what looked like a silent failure : the \nscript was launched and then just returned without any information. That is, no \nsuccess message and no error messages. With the addition of a print statement or \ntwo to the script it became clear that the call to ajc never completed and \ncaused the entire script to exit before any attempt was made to run the class. I \nadded the -verbose flag to a command line call to ajc (compiling \ntestcase\\ShowBug.java, the same source file as specified in the test script) and \ngot the following ...\n\nC:\\39959\\bug\u003eajc -verbose testcase\\ShowBug.java\nzipfile classpath entry does not exist: c:\\sun-jdk-141-02\\jre\\lib\\i18n.jar\ndirectory classpath entry does not exist: c:\\sun-jdk-141-02\\jre\\classes\ncompiling C:\\39959\\bug\\testcase\\ShowBug.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\Item.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\AttributeNotFoundException.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\ChildNotFoundException.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\ItemList.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\TextNotFoundAtBeginningException.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\NoSuchItemRuntimeException.java\nweaving\nmight need to weave [UnwovenClassFile(C:\\39959\\bug\\testcase\\ShowBug$1.class, tes\ntcase.ShowBug$1), UnwovenClassFile(C:\\39959\\bug\\testcase\\ShowBug.class, testcase\n.ShowBug), UnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\Item.class, util.xml.Item),\nUnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\AttributeNotFoundException.class, util.\nxml.AttributeNotFoundException), UnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\ChildN\notFoundException.class, util.xml.ChildNotFoundException), UnwovenClassFile(C:\\39\n959\\bug\\.\\util\\xml\\ItemList.class, util.xml.ItemList), UnwovenClassFile(C:\\39959\n\\bug\\.\\util\\xml\\TextNotFoundAtBeginningException.class, util.xml.TextNotFoundAtB\neginningException), UnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\NoSuchItemRuntimeEx\nception.class, util.xml.NoSuchItemRuntimeException)](world\u003dfalse)\n\n(For the above the CLASSPATH in my environment was C:\\aspectj1.1.\n0-final\\lib\\aspectjrt.jar;.)\n\nIn another XP window with a 1.3.1_08 Java (and identical environmental \nCLASSPATH) I got the very same behaviour when running the testcase script \n(silent exit from the script somewhere in the ajc call). I repeated the ajc \ncommand with verbose and saw the following ...\n\nC:\\39959\\bug\u003eajc -verbose testcase\\ShowBug.java\ndirectory classpath entry does not exist: c:\\sun-jdk-131-08\\jre\\classes\ncompiling C:\\39959\\bug\\testcase\\ShowBug.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\Item.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\AttributeNotFoundException.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\ChildNotFoundException.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\ItemList.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\TextNotFoundAtBeginningException.java\ncompiling C:\\39959\\bug\\.\\util\\xml\\NoSuchItemRuntimeException.java\nweaving\nmight need to weave [UnwovenClassFile(C:\\39959\\bug\\testcase\\ShowBug$1.class, tes\ntcase.ShowBug$1), UnwovenClassFile(C:\\39959\\bug\\testcase\\ShowBug.class, testcase\n.ShowBug), UnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\Item.class, util.xml.Item),\nUnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\AttributeNotFoundException.class, util.\nxml.AttributeNotFoundException), UnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\ChildN\notFoundException.class, util.xml.ChildNotFoundException), UnwovenClassFile(C:\\39\n959\\bug\\.\\util\\xml\\ItemList.class, util.xml.ItemList), UnwovenClassFile(C:\\39959\n\\bug\\.\\util\\xml\\TextNotFoundAtBeginningException.class, util.xml.TextNotFoundAtB\neginningException), UnwovenClassFile(C:\\39959\\bug\\.\\util\\xml\\NoSuchItemRuntimeEx\nception.class, util.xml.NoSuchItemRuntimeException)](world\u003dfalse)\n\nIn both windows the ajc compile step did actually produce a .class file and when \nit was run the following was returned ...\n\nC:\\39959\\bug\u003ejava testcase.ShowBug\nException in thread \"main\" java.lang.NoClassDefFoundError: org/apache/xerces/par\nsers/AbstractDOMParser\n        at testcase.ShowBug.main(ShowBug.java:49)\n\ni.e. identical to the final outcome seen earlier on Linux.\n\nJim, are you using an ajc from out of the CVS HEAD ? Maybe this has been fixed \npost-1.1.0 ?\n",
    "This problem occurred when a command line compile did not specify a \"-\nclasspath\" option.  In that case BuildArgParser loaded System.getProperty\n(\"java.class.path\").  However, in the launch script aspectjtools.jar is \nalready added to the VM\u0027s classpath.  We remove all occurrences \nof \"aspectjtools.jar\" from the detected classpath.  This should enable \nbootstrapping ajc."
  ],
  "commentCreationDates": [
    "2003-07-11T22:01:33+02:00",
    "2003-07-11T22:09:48+02:00",
    "2003-07-11T22:11:36+02:00",
    "2003-07-11T22:12:56+02:00",
    "2003-07-11T22:14:09+02:00",
    "2003-07-23T01:44:34+02:00",
    "2003-07-23T15:02:40+02:00",
    "2003-07-23T18:32:40+02:00",
    "2003-07-23T19:13:34+02:00",
    "2003-07-23T19:35:13+02:00",
    "2003-07-23T19:43:59+02:00",
    "2003-07-23T19:51:33+02:00",
    "2003-07-23T20:13:19+02:00",
    "2003-07-23T23:47:35+02:00",
    "2003-07-29T13:00:49+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/apache/xerces/parsers/AbstractDOMParser",
      "elements": [
        {
          "method": "testcase.ShowBug.main",
          "source": "ShowBug.java:49"
        }
      ],
      "number": 0,
      "commentIndex": 10,
      "bugId": "39959",
      "date": "2003-07-23T19:43:59+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/apache/xerces/par sers/AbstractDOMParser",
      "elements": [
        {
          "method": "testcase.ShowBug.main",
          "source": "ShowBug.java:49"
        }
      ],
      "number": 1,
      "commentIndex": 13,
      "bugId": "39959",
      "date": "2003-07-23T23:47:35+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    }
  ],
  "groupId": "39959",
  "bugId": "39959",
  "date": "2003-07-11T22:01:33+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "critical"
}