{
  "comments": [
    "Driver:  WTP 1.5 RC1a\n\nGenerate Web service client to Java project, choose Test.  Choose a second Web service runtime.  Click Next all the way and then Finish result in the error:\n\nAdd and remove cannot both be null/empty\n    java.lang.IllegalArgumentException: Add and remove cannot both be null/empty\n    at org.eclipse.wst.server.core.internal.ServerWorkingCopy.modifyModules(ServerWorkingCopy.java:425)\n    at org.eclipse.wst.server.core.ServerUtil.modifyModules(ServerUtil.java:339)\n    at org.eclipse.jst.ws.internal.consumption.command.common.AddModuleToServerCommand.execute(AddModuleToServerCommand.java:72)\n    at org.eclipse.jst.ws.internal.consumption.ui.widgets.test.wssample.AddModuleDependenciesCommand.createSampleProjects(AddModuleDependenciesCommand.java:214)\n    at org.eclipse.jst.ws.internal.consumption.ui.widgets.test.wssample.AddModuleDependenciesCommand.execute(AddModuleDependenciesCommand.java:70)\n    at org.eclipse.jst.ws.internal.consumption.ui.widgets.test.ClientTestDelegateCommand.commandFactoryExecution(ClientTestDelegateCommand.java:108)\n    at org.eclipse.jst.ws.internal.consumption.ui.widgets.test.ClientTestDelegateCommand.execute(ClientTestDelegateCommand.java:85)\n    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:413)\n    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop(CommandFragmentEngine.java:353)\n    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop(CommandFragmentEngine.java:251)\n    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5.run(SimpleCommandEngineManager.java:250)\n    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:369)\n    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:313)\n    at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:851)\n    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop(SimpleCommandEngineManager.java:220)\n    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNextStop(WizardPageManager.java:94)\n    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish(WizardPageManager.java:250)\n    at org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish(DynamicWizard.java:331)\n    at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:680)",
    "Note that the server had already been started before running the scenario.",
    "Created an attachment (id\u003d40222)\napply to AddModuleDependenciesCommand.java in the org.eclipse.jst.ws.consumption.ui plugin\n\npatch 1 of 1",
    "The attached patch is ready to be committed. I found a number of problems in AddModuleDependenciesCommand (besides the one that caused this bug) so the patch\nhas more changes than you might have expected. The problems I found are:\n\n1. The source of the bug is that the sample project needs an EAR if the selected server needs an EAR, regardless of the whether the client project is a Java utility project. Therefore, the code in this command shouldn\u0027t be using the needEAR value being passed in from the previous commands. It should determine the need for an EAR based purely on the server\n\n2. The code in the private method createSampleProjects was creating an EAR, adding it to the server, and then associating the sample project with the EAR. I observed something like a dead-lock with this sequence of events between the server publishing the EAR and the code that was associating the sample project with the EAR. I\u0027ve moved the contents of createSampleProjects into the execute method and reordered the sequence of events so that the association of the sample project and EAR is done before the EAR is added to the server. I\u0027ve also cleaned up this command\u0027s use of CreateModuleCommand and replaced those with calls to CreatedFacetedProjectCommand.\n\n3. The code in the execute method was only establishing a dependency from the sample project to the client project if the client project was a Java utility project. I\u0027ve corrected this since that dependency needs to be there for other project types as well (e.g. EJB, AppClient).\n\nLet me know if you have further questions about the patch.",
    "Patch committed and released to WTP 1.5 as v200605031820.",
    "These defects were dropped for WTP 1.5 RC2.",
    "Verified on WTP 0518."
  ],
  "commentCreationDates": [
    "2006-04-25T21:35:12+02:00",
    "2006-04-25T21:36:46+02:00",
    "2006-05-03T17:40:08+02:00",
    "2006-05-03T18:03:58+02:00",
    "2006-05-03T20:22:16+02:00",
    "2006-05-05T00:00:33+02:00",
    "2006-06-09T20:15:01+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Add and remove cannot both be null/empty",
      "elements": [
        {
          "method": "org.eclipse.wst.server.core.internal.ServerWorkingCopy.modifyModules",
          "source": "ServerWorkingCopy.java:425"
        },
        {
          "method": "org.eclipse.wst.server.core.ServerUtil.modifyModules",
          "source": "ServerUtil.java:339"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.command.common.AddModuleToServerCommand.execute",
          "source": "AddModuleToServerCommand.java:72"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.widgets.test.wssample.AddModuleDependenciesCommand.createSampleProjects",
          "source": "AddModuleDependenciesCommand.java:214"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.widgets.test.wssample.AddModuleDependenciesCommand.execute",
          "source": "AddModuleDependenciesCommand.java:70"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.widgets.test.ClientTestDelegateCommand.commandFactoryExecution",
          "source": "ClientTestDelegateCommand.java:108"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.widgets.test.ClientTestDelegateCommand.execute",
          "source": "ClientTestDelegateCommand.java:85"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand",
          "source": "CommandFragmentEngine.java:413"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop",
          "source": "CommandFragmentEngine.java:353"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop",
          "source": "CommandFragmentEngine.java:251"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5.run",
          "source": "SimpleCommandEngineManager.java:250"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:369"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:313"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:851"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop",
          "source": "SimpleCommandEngineManager.java:220"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNextStop",
          "source": "WizardPageManager.java:94"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish",
          "source": "WizardPageManager.java:250"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish",
          "source": "DynamicWizard.java:331"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:680"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "138478",
      "date": "2006-04-25T21:35:12+02:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "major"
    }
  ],
  "groupId": "138478",
  "bugId": "138478",
  "date": "2006-04-25T21:35:12+02:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "major"
}