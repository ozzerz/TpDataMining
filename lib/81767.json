{
  "comments": [
    "I first noticed this bug when loading in a build script from JBoss.  See the\nsourceforge.net jboss-4.0 branch, project \"remoting\", the build.xml:\n\nhttp://cvs.sourceforge.net/viewcvs.py/jboss/jboss-remoting/build.xml?rev\u003d1.28\u0026view\u003dmarkup\n\nI have reduced the size of the build.xml to replicate the problem.  It seems the\nissue is with entity resolving.\n\nHere\u0027s the small build.xml that I have used to replicate the problem:\n\n---------------------\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003c!DOCTYPE project [\n   \u003c!ENTITY targets SYSTEM \"../tools/etc/buildmagic/targets.ent\"\u003e\n]\u003e\n\n\u003cproject default\u003d\"main\"\u003e\n   \u0026targets;\n\u003c/project\u003e\n-------------------------\n\nNote that this ANT build script is referencing an entity located in the ../tools\ndirectory.  ../tools is another project in the JBoss build and is a project I\nimported into Eclipse (i.e. it is another project in my Eclipse workspace).  In\nother words, that entity location targets.ent exists.\n\nWhen you load this build.xml into an ANT editor (and in fact, if you do ANY type\nof editing in that file), you will get about 50 Error Log messages - many are\nidentical.  See below for the messages and stack traces.  Note that if you\nremove the \"\u0026targets;\" statement, all errors go away.\n\nOnce this problem occurs, Eclipse shutdown fails.  After I get these errors, if\nI then click the X button in the window decoration to exit Eclipse, Eclipse does\nnot exit and instead dumps two error messages in the Error Log:\n\nMessage: Provider com.icl.saxon.TransformerFactoryImpl not found\nPlugin: org.eclipse.ui\nStack Trace:\njavax.xml.transform.TransformerFactoryConfigurationError: Provider\ncom.icl.saxon.TransformerFactoryImpl not found\n\tat javax.xml.transform.TransformerFactory.newInstance(TransformerFactory.java:100)\n\tat org.eclipse.ui.XMLMemento.save(XMLMemento.java:414)\n\tat org.eclipse.ui.internal.Workbench.saveMementoToFile(Workbench.java:1484)\n\tat org.eclipse.ui.internal.Workbench.access$6(Workbench.java:1478)\n\tat org.eclipse.ui.internal.Workbench$9.run(Workbench.java:461)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:457)\n\tat org.eclipse.ui.internal.Workbench.access$8(Workbench.java:421)\n\tat org.eclipse.ui.internal.Workbench$12.run(Workbench.java:606)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:604)\n...\n\nand then this error:\n\nMessage: Unhandled event loop exception\nPlugin: org.eclipse.ui\nStackTrace: Could not be found\n\nAt this point, I have to try to close again until Eclipse window dies (it\neventually does go away).  But, javaw.exe is hung and I have to use the Task\nManager to explicitly kill it and remove the .lock file manually.  At this\npoint, when I restart Eclipse, the workspace has been corrupted and when I\nrestart, it comes up with the default Resource perspective.\n\n\nThis is easily reproducible.  If you:\n\ncvs -z3 -d:pserver:anonymous@cvs.jboss.sourceforge.net:/cvsroot/jboss co jboss-4.0\n\nyou will get a boat load of CVS projects - tools and reporting are the ones you\nare interested in.  Just import them into Eclipse and open reporting/build.xml\nin the ANT editor and you\u0027ll see the issue.  This happens on 3.1M2 and M4 (I\nthink it even happens on 3.0.1 but not sure).\n\nHere\u0027s the typical Error Log message that you get when you bring up the ANT\neditor (one of the 50):\n\nMessage: \"Error logged from Ant UI:\"\nPlug-in: org.eclipse.ant.ui\nStack Trace:\norg.eclipse.jface.text.BadLocationException\n\tat\norg.eclipse.jface.text.AbstractLineTracker.getLineOffset(AbstractLineTracker.java:218)\n\tat org.eclipse.jface.text.AbstractDocument.getLineOffset(AbstractDocument.java:788)\n\tat org.eclipse.ant.internal.ui.editor.outline.AntModel.getOffset(AntModel.java:972)\n\tat\norg.eclipse.ant.internal.ui.editor.outline.AntModel.computeOffset(AntModel.java:950)\n\tat\norg.eclipse.ant.internal.ui.editor.outline.AntModel.addComment(AntModel.java:1411)\n\tat\norg.eclipse.ant.internal.ui.editor.utils.ProjectHelper$LexHandler.comment(ProjectHelper.java:437)\n\tat org.apache.crimson.parser.Parser2.maybeComment(Parser2.java:1117)\n\tat org.apache.crimson.parser.Parser2.content(Parser2.java:1972)\n\tat org.apache.crimson.parser.Parser2.externalParsedEntity(Parser2.java:3021)\n\tat org.apache.crimson.parser.Parser2.expandEntityInContent(Parser2.java:2739)\n\tat org.apache.crimson.parser.Parser2.maybeReferenceInContent(Parser2.java:2606)\n\tat org.apache.crimson.parser.Parser2.content(Parser2.java:2017)\n\tat org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1691)\n\tat org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:667)\n\tat org.apache.crimson.parser.Parser2.parse(Parser2.java:337)\n\tat org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:448)\n\tat\norg.eclipse.ant.internal.ui.editor.utils.ProjectHelper.parse(ProjectHelper.java:526)\n\tat\norg.eclipse.ant.internal.ui.editor.utils.ProjectHelper.parse(ProjectHelper.java:592)\n\tat\norg.eclipse.ant.internal.ui.editor.outline.AntModel.parseDocument(AntModel.java:301)\n\tat org.eclipse.ant.internal.ui.editor.outline.AntModel.reconcile(AntModel.java:228)\n\tat\norg.eclipse.ant.internal.ui.editor.text.XMLReconcilingStrategy.internalReconcile(XMLReconcilingStrategy.java:46)\n\tat\norg.eclipse.ant.internal.ui.editor.text.XMLReconcilingStrategy.reconcile(XMLReconcilingStrategy.java:70)\n\tat org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:71)\n\tat\norg.eclipse.ant.internal.ui.editor.text.NotifyingReconciler.process(NotifyingReconciler.java:40)\n\tat\norg.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:204)",
    "The problem is the build magic \"property\" task.\nSee the full explaination in the duplicate.\n\n*** This bug has been marked as a duplicate of 60860 ***"
  ],
  "commentCreationDates": [
    "2004-12-22T05:08:20+01:00",
    "2004-12-29T22:59:34+01:00"
  ],
  "traces": [
    {
      "exceptionType": "javax.xml.transform.TransformerFactoryConfigurationError",
      "message": "Provider com.icl.saxon.TransformerFactoryImpl not found",
      "elements": [
        {
          "method": "javax.xml.transform.TransformerFactory.newInstance",
          "source": "TransformerFactory.java:100"
        },
        {
          "method": "org.eclipse.ui.XMLMemento.save",
          "source": "XMLMemento.java:414"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.saveMementoToFile",
          "source": "Workbench.java:1484"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$6",
          "source": "Workbench.java:1478"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$9.run",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:616"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:457"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$8",
          "source": "Workbench.java:421"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$12.run",
          "source": "Workbench.java:606"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:604"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "81767",
      "duplicateId": "60860",
      "date": "2004-12-22T05:08:20+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.jface.text.BadLocationException",
      "elements": [
        {
          "method": "org.eclipse.jface.text.AbstractLineTracker.getLineOffset",
          "source": "AbstractLineTracker.java:218"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.getLineOffset",
          "source": "AbstractDocument.java:788"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.outline.AntModel.getOffset",
          "source": "AntModel.java:972"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.outline.AntModel.computeOffset",
          "source": "AntModel.java:950"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.outline.AntModel.addComment",
          "source": "AntModel.java:1411"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.utils.ProjectHelper$LexHandler.comment",
          "source": "ProjectHelper.java:437"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.maybeComment",
          "source": "Parser2.java:1117"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.content",
          "source": "Parser2.java:1972"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.externalParsedEntity",
          "source": "Parser2.java:3021"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.expandEntityInContent",
          "source": "Parser2.java:2739"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.maybeReferenceInContent",
          "source": "Parser2.java:2606"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.content",
          "source": "Parser2.java:2017"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.maybeElement",
          "source": "Parser2.java:1691"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.parseInternal",
          "source": "Parser2.java:667"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.parse",
          "source": "Parser2.java:337"
        },
        {
          "method": "org.apache.crimson.parser.XMLReaderImpl.parse",
          "source": "XMLReaderImpl.java:448"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.utils.ProjectHelper.parse",
          "source": "ProjectHelper.java:526"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.utils.ProjectHelper.parse",
          "source": "ProjectHelper.java:592"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.outline.AntModel.parseDocument",
          "source": "AntModel.java:301"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.outline.AntModel.reconcile",
          "source": "AntModel.java:228"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.text.XMLReconcilingStrategy.internalReconcile",
          "source": "XMLReconcilingStrategy.java:46"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.text.XMLReconcilingStrategy.reconcile",
          "source": "XMLReconcilingStrategy.java:70"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.process",
          "source": "MonoReconciler.java:71"
        },
        {
          "method": "org.eclipse.ant.internal.ui.editor.text.NotifyingReconciler.process",
          "source": "NotifyingReconciler.java:40"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:204"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "81767",
      "duplicateId": "60860",
      "date": "2004-12-22T05:08:20+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "normal"
    }
  ],
  "groupId": "60860",
  "bugId": "81767",
  "duplicateId": "60860",
  "date": "2004-12-22T05:08:20+01:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "normal"
}