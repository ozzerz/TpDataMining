{
  "comments": [
    "- Create a dynamic Web project \"wp\" in an EAR \"wpEAR\".\n- Delete \"wpEAR\" but DO NOT delete the content.\n- Create a Web service in \"wp\" choosing the \"wpEAR\" as the EAR result in the exception:\n\nUnable to add the follwing facets to project was60aEAR: EAR.\n    org.eclipse.core.runtime.CoreException: Failed while installing EAR 1.4.\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:1257)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:369)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:264)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:249)\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:259)\n    at org.eclipse.jst.ws.internal.consumption.common.FacetUtils$1.run(FacetUtils.java:744)\n    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\n    org.eclipse.core.runtime.CoreException[0]: java.lang.NullPointerException\n    at org.eclipse.wst.common.componentcore.internal.StructureEdit.createWorkbenchModule(StructureEdit.java:514)\n    at org.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.create(VirtualComponent.java:248)\n    at org.eclipse.jst.j2ee.project.facet.EarFacetInstallDelegate.execute(EarFacetInstallDelegate.java:52)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:1218)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:369)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:264)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:249)\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:259)\n    at org.eclipse.jst.ws.internal.consumption.common.FacetUtils$1.run(FacetUtils.java:744)\n    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\n\nWe need to check for the existance of of an EAR at the specified location before trying to create another one.",
    "We need to do similar checks as in bug 180226.",
    "Requesting PMC approval for fixing this in WTP 1.5.5.\n\nThe Problem:\n\nWhen a user use the Web Service Wizard or Web service Client wizard to create a Web service using an EAR that had been deleted but the content of the EAR had not been deleted because the user chosed not to delete, they would get an exception in adding the EAR facet to the project.\n\nThe solution:\n\nThe J2EE team had fixed a similar problem with EAR creation in bug 180226.  This fix reuse the fix for 180226 which calls ProjectCreationDataModelProviderNew.validateExisting() to check if the EAR can be created in the default location.  This check is added to the code used to default the EAR name and in the validation code when the user explicitely enter an EAR name.\n\nTesting:\n\nThis fix has been tested in WTP 1.5.5 and in the adopter product where this problem was originally found.\n\nReviewed by:  Peter Moogk\n\nRisk:  Low",
    "Created an attachment (id\u003d74484)\nPatch\n\n",
    "Committed to R1_5_maintenance and released to R1_5_maintenance as v200707251734.\nCommitted to HEAD and released to R2_0_maintenance as v200707251745 and to HEAD as v200707251747.",
    "If these defects are still left in the Resolve state in a couple of weeks, we might verify and close these defects on behalf of the originator.  But since you know the original problem best, it would be best if you could take a moment to verify these defects in the latest available drivers.  Thanks!",
    "Verified on WTP 1.5.5 0809 build."
  ],
  "commentCreationDates": [
    "2007-06-26T16:57:15+02:00",
    "2007-06-29T00:04:19+02:00",
    "2007-07-24T18:13:08+02:00",
    "2007-07-24T18:17:34+02:00",
    "2007-07-25T19:47:28+02:00",
    "2007-07-28T05:34:57+02:00",
    "2007-08-16T19:54:39+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Failed while installing EAR 1.4.",
      "elements": [
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate",
          "source": "FacetedProject.java:1257"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal",
          "source": "FacetedProject.java:369"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2",
          "source": "FacetedProject.java:264"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run",
          "source": "FacetedProject.java:249"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify",
          "source": "FacetedProject.java:259"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.common.FacetUtils$1.run",
          "source": "FacetUtils.java:744"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "194434",
      "date": "2007-06-26T16:57:15+02:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.createWorkbenchModule",
          "source": "StructureEdit.java:514"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.create",
          "source": "VirtualComponent.java:248"
        },
        {
          "method": "org.eclipse.jst.j2ee.project.facet.EarFacetInstallDelegate.execute",
          "source": "EarFacetInstallDelegate.java:52"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate",
          "source": "FacetedProject.java:1218"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal",
          "source": "FacetedProject.java:369"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2",
          "source": "FacetedProject.java:264"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run",
          "source": "FacetedProject.java:249"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify",
          "source": "FacetedProject.java:259"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.common.FacetUtils$1.run",
          "source": "FacetUtils.java:744"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "194434",
      "date": "2007-06-26T16:57:15+02:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    }
  ],
  "groupId": "194434",
  "bugId": "194434",
  "date": "2007-06-26T16:57:15+02:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "normal"
}