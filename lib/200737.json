{
  "comments": [
    "Attempting to profile a Java application using a custom launch on Linux RH5 using the IAC (tptp 4.3.1) throws the following exception:\n\nosgi\u003e 2007/08/20 21:09:58.175 SEVERE CLPDN0016E: Error starting RCPApplication com.ibm.rcp.personality.framework.RCPApplication ::class.method\u003dcom.ibm.rcp.personality.framework.internal.RCPApplication.run() ::thread\u003dmain ::loggername\u003dcom.ibm.rcp.personality.framework.internal\n\n\torg.eclipse.swt.SWTError: No more handles [gtk_init_check() failed]\n\tat org.eclipse.swt.SWT.error(SWT.java:3589)\n\tat org.eclipse.swt.widgets.Display.createDisplay(Display.java:836)\n\tat org.eclipse.swt.widgets.Display.create(Display.java:824)\n\tat org.eclipse.swt.graphics.Device.\u003cinit\u003e(Device.java:152)\n\tat org.eclipse.swt.widgets.Display.\u003cinit\u003e(Display.java:472)\n\tat org.eclipse.swt.widgets.Display.\u003cinit\u003e(Display.java:463)\n\tat org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:452)\n\tat org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)\n\tat com.ibm.rcp.personality.framework.internal.RCPApplication.run(RCPApplication.java:65)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:213)\n\tat java.lang.reflect.Method.invoke(Method.java:278)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)\n\nDisabling the IAC and setting up the RAC (tptp 4.3.1) works without this issue, but we expect to be able to profile using the IAC. \nI\u0027ve seen several \"workarounds\" for solving a similar issue such as:\nsetting JAVA_HIGH_ZIPFDS\u003d500, setting ulimit -n 65535, and even passing in a osgi vmarg osgi.bundlefile.limit\u003d200. \nUnfortunately, none of those workarounds seem to fix this issue. \n\nThe custom launch uses org.eclipse.tptp.trace.ui.provisional.launcher.PrimaryLaunchDelegate as the launch delegate, and org.eclipse.tptp.trace.ui.internal.launcher.deleg.application.PIRuntimeWorkbenchLaucher as the jvmpiMechanism launch delegate.",
    "This issue is occurs in the tptp 4.2.2 release.",
    "Jonathan, we have been asked to address this defect in 4.4.1. Would you please do me a favour and see if it is reproducible using 4.4?  I need the result before end of day tomorrow please.\nThanks.",
    "Rodrigo, I actually now understand that you have been asked to reproduce this?  Would you please try with the 4.4.0.2 TPTP?",
    "Rodrigo/Jonathan,\nAny update on how the testing went last week?",
    "Hi Joanna, thanks to the details of trying to access a terminal that is 1465 miles away through a protocol not built for that (x-windows), the testing has been slow. However Rodrigo and I have found a solution, and I\u0027ve got results to report.\n\nUsing TPTP 4.4.0.2, IBM JDK 1.4.2, IAC, on RH5 I\u0027ve been able to:\n- Profile a console mode \u0027external application\u0027 using PI\n- Profile a console mode java application using PI\n- Profile an eclipse application (RCP) using PI\n- Profile an external SWT application using PI\n\nI also tested using the sample application that Paul Slauenwhite attached to bug 150006, which is designed to reproduce the \u0027org.eclipse.swt.SWTError: No more handles [gtk_init_check() failed]\u0027 error on 4.2 and 4.3 (and pre i3 44 builds). Bug 150006 recalls the same problems we\u0027re seeing here, and when I spoke with Samson he mentioned it was likely related. The sample application from 150006 runs fine here as well.\n\nI\u0027ve tested only with the data collectors and analysis types bundled with TPTP. If we want to test with any kind of custom launch, I\u0027ll need the projects.\n\n",
    "Rodrigo, can we resolve this defect as fixed in 4.4.0.2?",
    "Based on the results reported by Jonathan, it seems that TPTP 4.4.0.2 no longer triggers the \u0027org.eclipse.swt.SWTError: No more handles [gtk_init_check() failed]\u0027 error which was reported on 4.2 and 4.3 in a particular set-up. This doesn\u0027t guarantee that the we won\u0027t see this error come up in slightly different set-ups, but since we can\u0027t port our code to run on post 322 Eclipse and verify this issue. We\u0027ll have to consider this issue resolved, until we\u0027re able to run our code on post 322 Eclipse. "
  ],
  "commentCreationDates": [
    "2007-08-21T23:49:42+02:00",
    "2007-08-30T17:13:38+02:00",
    "2007-08-30T20:22:12+02:00",
    "2007-08-30T20:52:28+02:00",
    "2007-09-18T19:15:56+02:00",
    "2007-09-18T20:51:50+02:00",
    "2007-09-20T14:37:47+02:00",
    "2007-09-20T18:20:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTError",
      "message": "No more handles [gtk_init_check() failed]",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3589"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.createDisplay",
          "source": "Display.java:836"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.create",
          "source": "Display.java:824"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.\u003cinit\u003e",
          "source": "Device.java:152"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.\u003cinit\u003e",
          "source": "Display.java:472"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.\u003cinit\u003e",
          "source": "Display.java:463"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createDisplay",
          "source": "Workbench.java:452"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createDisplay",
          "source": "PlatformUI.java:161"
        },
        {
          "method": "com.ibm.rcp.personality.framework.internal.RCPApplication.run",
          "source": "RCPApplication.java:65"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "java.lang.reflect.AccessibleObject.invokeL",
          "source": "AccessibleObject.java:213"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "200737",
      "date": "2007-08-21T23:49:42+02:00",
      "product": "TPTP Profiling",
      "component": "Platform.Agents.JVMPI",
      "severity": "normal"
    }
  ],
  "groupId": "200737",
  "bugId": "200737",
  "date": "2007-08-21T23:49:42+02:00",
  "product": "TPTP Profiling",
  "component": "Platform.Agents.JVMPI",
  "severity": "normal"
}