{
  "comments": [
    "I am trying to use the M5 driver to change WSAD (which is based on R1 of \nEclipse). While using the plugin.xml editor, I select the \"Compute Build Path\"\nmenu item. It fails with this log entry:\n\n\u003clog-entry date\u003d\"Tue May 21 16:21:09 EDT 2002\"\u003e\n  \u003cstatus\n     code\u003d\"0\"\n     severity\u003d\"ERROR\"\n     message\u003d\"Assertion failed; Path for IClasspathEntry must be absolute..\"\n     plugin-id\u003d\"org.eclipse.pde.ui\"\u003e\n    \u003cexception\n       message\u003d\"Assertion failed; Path for IClasspathEntry must be absolute..\"\n       trace\u003d\"\norg.eclipse.jdt.internal.core.Assert$AssertionFailedException: Assertion \nfailed; Path for IClasspathEntry must be absolute..\n\tat org.eclipse.jdt.internal.core.Assert.isTrue(Assert.java:82)\n\tat org.eclipse.jdt.core.JavaCore.newLibraryEntry(JavaCore.java:704)\n\tat \norg.eclipse.pde.internal.ui.wizards.PluginPathUpdater.createLibraryEntry\n(PluginPathUpdater.java:147)\n\tat org.eclipse.pde.ui.BuildPathUtil.addLibraries(BuildPathUtil.java:201)\n\tat org.eclipse.pde.ui.BuildPathUtil.addFragmentLibraries\n(BuildPathUtil.java:345)\n\tat org.eclipse.pde.ui.BuildPathUtil.addFragmentLibraries\n(BuildPathUtil.java:325)\n\tat org.eclipse.pde.ui.BuildPathUtil.setBuildPath(BuildPathUtil.java:124)\n\tat org.eclipse.pde.internal.ui.editor.manifest.ImportListSection$6.run\n(ImportListSection.java:338)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:296)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:249)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run\n(ProgressMonitorDialog.java:335)\n\tat \norg.eclipse.pde.internal.ui.editor.manifest.ImportListSection.computeBuildPath\n(ImportListSection.java:351)\n\tat \norg.eclipse.pde.internal.ui.editor.manifest.ImportListSection.access$6\n(ImportListSection.java:328)\n\tat org.eclipse.pde.internal.ui.editor.manifest.ImportListSection$5.run\n(ImportListSection.java:251)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:590)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:361)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:352)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:47)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1412)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1208)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:836)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:819)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:777)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:319)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:190)\n\tat org.eclipse.core.launcher.Main.run(Main.java:549)\n\tat org.eclipse.core.launcher.Main.main(Main.java:390)\n\"\u003e\n    \u003c/exception\u003e\n  \u003c/status\u003e\n\u003c/log-entry\u003e",
    "I experienced this same error on 20020602 (Freeze 2).  Here is what I did:\n\n1) Had a workspace with the following source projects:\n\norg.eclipse.ant.core\norg.eclipse.core.boot\norg.eclipse.core.resources\norg.eclipse.core.resources.win32\norg.eclipse.core.runtime\norg.eclipse.core.tests.harness\norg.eclipse.core.tests.harness.launcher\norg.eclipse.core.tests.resources\norg.eclipse.core.tests.resources.saveparticipant\norg.eclipse.core.tests.resources.saveparticipant1\norg.eclipse.core.tests.resources.saveparticipant2\norg.eclipse.core.tests.resources.saveparticipant3\norg.eclipse.core.tests.runtime\norg.eclipse.platform\n\n2) Also had the following binary projects:\n\norg.apache.ant\norg.apache.lucene\norg.apache.xerces\norg.junit\n\n3) Then I checked out org.eclipse.ui and org.eclipse.ui.win32 from \ndev.eclipse.org\n\n4) Select plugin.xml on org.eclipse.ui, choose \"Update Classpath...\"\n\n5) In the resulting dialog, I selected the two projects checked out in step 3)\n\n6) Clicked finish.  An internal error occurred (same stack as original report).\n",
    "Created an attachment (id\u003d1287)\nLog file showing stack trace\n",
    "John, I did all the steps that you described exactly how you described them, \nand was not able to reproduce the defect (using the latest code).\nI even tried cases in which someone might have forgotten to set the Target \nPlatform preference page correctly, but still the PDE behavior was as expected \nand no assertion failed.\n\nIs there any special setup that you forgot to mention?\n\n",
    "Here are reproducible steps starting from a brand new F2 workspace:\n\n1) Create a PDE project with default plugin structure\n\n2) Under Preferences-\u003ePlugin Development-\u003eTarget Platform, select all plugins \nand click ok (I don\u0027t understand why these aren\u0027t selected by default).\n\n3) Back in plugin.xml for your new project, add org.eclipse.ui, \norg.eclipse.core.resources, and org.eclipse.core.runtime as required plugins.\n\n4) Check out org.eclipse.ui and org.eclipse.ui.win32 from \ndev.eclipse.org\n\n5) Select plugin.xml on org.eclipse.ui, choose \"Update Classpath...\"\n\n6) In the resulting dialog, select the two projects checked out in step 4)\n\n7) Click finish.  An internal error occurred (same stack as original report).",
    "Thanks John, I figured out where the problem is.  It is currently occurring \nwhen you try to update the classpath of org.eclipse.ui if there are two \nduplicate copies of org.eclipse.ui.win32 (one in your workspace and one checked \non the Target Platform preference page).  \nI will work on the fix.\nIn the meantime, as a workaround, you could uncheck org.eclipse.ui.win32 on the \npreference page.  As a matter of fact, what would guarantee that everything \nwill work fine is if you click the \u0027Not in Workspace\u0027 button on the Target \nPlatform preference page, thus ensuring no duplicates. ",
    "As Wassim pointed out, the problem is in the duplication of external and \nworkspace fragments. I fixed it by making workspace fragment \u0027mask\u0027 external \nones. That got rid of the assertion failure. \n\nHowever, as I went past that problem, I uncovered another: if a plug-in has a \nvariable in the library path (e.g. $ws$) and if that library cannot be found in \nthe plug-in itself, but can in one of the fragments, the resulting classpath \nentry didn\u0027t have the reexport bit set properly. This was a problem with \norg.eclipse.ui plug-in since it reexports SWT. This was fixed too.\n\nI can now take a \u0027Hello, World\u0027 plug-in with all the external plug-ins enabled, \nimport org.eclipse.ui and org.eclipse.ui.win32 from the repository, update \ntheir classpath, and also update classpath of the hello world plug-in, and \neverything compiles.",
    "Fixed."
  ],
  "commentCreationDates": [
    "2002-05-21T22:29:59+02:00",
    "2002-06-06T16:07:24+02:00",
    "2002-06-06T16:08:29+02:00",
    "2002-06-07T20:58:33+02:00",
    "2002-06-07T22:31:13+02:00",
    "2002-06-07T22:42:58+02:00",
    "2002-06-11T05:16:30+02:00",
    "2006-07-10T12:56:17+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jdt.internal.core.Assert$AssertionFailedException",
      "message": "Assertion  failed; Path for IClasspathEntry must be absolute..",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.Assert.isTrue",
          "source": "Assert.java:82"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.newLibraryEntry",
          "source": "JavaCore.java:704"
        },
        {
          "method": "org.eclipse.pde.internal.ui.wizards.PluginPathUpdater.createLibraryEntry",
          "source": "PluginPathUpdater.java:147"
        },
        {
          "method": "org.eclipse.pde.ui.BuildPathUtil.addLibraries",
          "source": "BuildPathUtil.java:201"
        },
        {
          "method": "org.eclipse.pde.ui.BuildPathUtil.addFragmentLibraries",
          "source": "BuildPathUtil.java:345"
        },
        {
          "method": "org.eclipse.pde.ui.BuildPathUtil.addFragmentLibraries",
          "source": "BuildPathUtil.java:325"
        },
        {
          "method": "org.eclipse.pde.ui.BuildPathUtil.setBuildPath",
          "source": "BuildPathUtil.java:124"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.manifest.ImportListSection$6.run",
          "source": "ImportListSection.java:338"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:296"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:249"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:335"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.manifest.ImportListSection.computeBuildPath",
          "source": "ImportListSection.java:351"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.manifest.ImportListSection.access$6",
          "source": "ImportListSection.java:328"
        },
        {
          "method": "org.eclipse.pde.internal.ui.editor.manifest.ImportListSection$5.run",
          "source": "ImportListSection.java:251"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:590"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1412"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1208"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:836"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:819"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:777"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:319"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:190"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:549"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:390"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "16683",
      "date": "2002-05-21T22:29:59+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "16683",
  "bugId": "16683",
  "date": "2002-05-21T22:29:59+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}