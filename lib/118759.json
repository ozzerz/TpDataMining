{
  "comments": [
    "I\u0027ve noticed what looks like a bug (hard to believe, because it seems so basic...) in creating a simple web service using the bottom up web service wizard in a way pretty much the same as outlined in the WTP tutorial (using RPC LITERAL). The class contains the following simple method:\n\npublic double getRoundTripPrice(String destination, Date depart, Date ret) \n{\n \tif(depart\u003d\u003dnull) System.err.println(\"ERROR: DEPART IS NULL\");\n\tif(ret\u003d\u003dnull) System.err.println(\"ERROR: RET IS NULL\");\n\t\t\n\tdouble basePrice \u003d 0d;\n\ttry {\n\t\tif(destination.matches(\"Los Angeles.*\")) {\n\t\t\tbasePrice \u003d 120.00;\n\t\t}\n\t\telse if(destination.matches(\"New York.*\")) {\n\t\t\tbasePrice \u003d 300.00;\n\t\t}\n\t\telse if(destination.matches(\"Boston.*\")) {\n\t\t\tbasePrice \u003d 250.00;\n\t\t}\n\t\telse if(destination.matches(\"Atlanta.*\")) {\n\t\t\tbasePrice \u003d 225.00;\n\t\t}\n\t\telse {\n                        basePrice \u003d 275.00;\n\t\t}\n\t\tbasePrice \u003d calculateAirFare(depart, ret, basePrice); \n\t\t\t\n\t} catch(Exception e) {\n\t\tSystem.err.println(\"Error: \" + e);\n\t\te.printStackTrace();\n\t}\n\t\t\n\treturn basePrice;\n}\n\nThe resulting deploy.wsdd file looks like:\n\n  \u003cservice name\u003d\"AirlineReservation\" provider\u003d\"java:RPC\" style\u003d\"document\" use\u003d\"literal\"\u003e\n      \u003cparameter name\u003d\"wsdlTargetNamespace\" value\u003d\"http://demo.yawl.ejgallo.com\"/\u003e\n      \u003cparameter name\u003d\"wsdlServiceElement\" value\u003d\"AirlineReservationService\"/\u003e\n      \u003cparameter name\u003d\"schemaQualified\" value\u003d\"http://demo.yawl.ejgallo.com\"/\u003e\n      \u003cparameter name\u003d\"wsdlServicePort\" value\u003d\"AirlineReservation\"/\u003e\n      \u003cparameter name\u003d\"className\" value\u003d\"com.ejgallo.yawl.demo.AirlineReservation\"/\u003e\n      \u003cparameter name\u003d\"wsdlPortType\" value\u003d\"AirlineReservation\"/\u003e\n      \u003cparameter name\u003d\"typeMappingVersion\" value\u003d\"1.2\"/\u003e\n      \u003coperation xmlns:retNS\u003d\"http://demo.yawl.ejgallo.com\" xmlns:rtns\u003d\"http://www.w3.org/2001/XMLSchema\" name\u003d\"getRoundTripPrice\" qname\u003d\"getRoundTripPrice\" returnQName\u003d\"retNS:getRoundTripPriceReturn\" returnType\u003d\"rtns:double\" soapAction\u003d\"\"\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:destination\" type\u003d\"tns:string\"/\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:depart\" type\u003d\"tns:dateTime\"/\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:ret\" type\u003d\"tns:dateTime\"/\u003e\n      \u003c/operation\u003e\n      \u003coperation xmlns:retNS\u003d\"http://demo.yawl.ejgallo.com\" xmlns:rtns\u003d\"http://www.w3.org/2001/XMLSchema\" name\u003d\"reserve\" qname\u003d\"reserve\" returnQName\u003d\"retNS:reserveReturn\" returnType\u003d\"rtns:string\" soapAction\u003d\"\"\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:customer\" type\u003d\"tns:string\"/\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:destin\" type\u003d\"tns:string\"/\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:start\" type\u003d\"tns:dateTime\"/\u003e\n        \u003cparameter xmlns:pns\u003d\"http://demo.yawl.ejgallo.com\" xmlns:tns\u003d\"http://www.w3.org/2001/XMLSchema\" qname\u003d\"pns:end\" type\u003d\"tns:dateTime\"/\u003e\n      \u003c/operation\u003e\n      \u003cparameter name\u003d\"allowedMethods\" value\u003d\"getRoundTripPrice reserve\"/\u003e\n \u003c/service\u003e\n\n\nAnd my generated WSDL contains the following type definitions:\n\n \u003cwsdl:types\u003e\n  \u003cschema elementFormDefault\u003d\"qualified\" targetNamespace\u003d\"http://demo.yawl.ejgallo.com\" xmlns\u003d\"http://www.w3.org/2001/XMLSchema\"\u003e\n   \u003celement name\u003d\"destination\" type\u003d\"xsd:string\"/\u003e\n   \u003celement name\u003d\"depart\" type\u003d\"xsd:dateTime\"/\u003e\n   \u003celement name\u003d\"ret\" type\u003d\"xsd:dateTime\"/\u003e\n   \u003celement name\u003d\"getRoundTripPriceReturn\" type\u003d\"xsd:double\"/\u003e\n  \u003c/schema\u003e\n \u003c/wsdl:types\u003e\n\nWhen I run this from a generated WS client in Eclipse WTP or from the Web Services Explorer, I get a SOAP message like this:\n\n\u003csoapenv:Envelope xmlns:q0\u003d\"http://demo.yawl.ejgallo.com\" xmlns:soapenv\u003d\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd\u003d\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\"\u003e\n\u003csoapenv:Body\u003e\n\u003cq0:destination\u003eNew York, NY\u003c/q0:destination\u003e\n\u003cq0:depart\u003e2005-11-26T03:34:32.638Z\u003c/q0:depart\u003e\n\u003cq0:ret\u003e2005-12-07T03:34:43.864Z\u003c/q0:ret\u003e\n\u003c/soapenv:Body\u003e\n\u003c/soapenv:Envelope\u003e\n\nIt seems all very straight-forward, but when I call this web service (launching Tomcat 5.0.28 from Eclipse), I get the following output:\n\nERROR: DEPART IS NULL\nERROR: RET IS NULL\nError: java.lang.NullPointerException\njava.lang.NullPointerException\n\tat com.ejgallo.yawl.demo.AirlineReservation.calculateAirFare(AirlineReservation.java:93)\n\tat com.ejgallo.yawl.demo.AirlineReservation.getRoundTripPrice(AirlineReservation.java:49)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:388)\n\tat org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:283)\n\tat org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)\n\tat org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)\n\tat org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\n\tat org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\n\tat org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:453)\n\tat org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)\n\tat org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\n\tat org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n\nIt seems that Axis is simply not deserializing the Date parameters correctly. Axis bug? This looks somewhat similar to BUG #104858, except in that case it is a basic Java type (java.util.Date). Unit testing with Axis\u0027 DateDeserializer class results in a correct Date object being returned, so something else is going on here...",
    "Typo, this is actually Document/Literal.",
    "We\u0027ll have a look, but it does seem rather like a bug in Apache Axis vs. in the WTP tools. By any chance have you tried this using native Apache Axis, that is, without Eclipse WTP in the picture?",
    "Chris,\n\nI agree that this is probably an Axis bug. Unfortunately, I am swamped with work right now and am unable to really test it as much as I\u0027d like (I switched to RPC/encoded, which works for the demo, don\u0027t tell anyone at WS-I...). It also works for seems to work for Wrapped Document Literal.\n\nNote that the first argument, the String, is getting passed in just fine, so it is a problem specific to using Dates. I don\u0027t think using native Axis (without Eclipse WTP) will change anything, since essentially WTP is just generating the wsdd and WSDL files, which look fine. Probably the best way to troubleshoot is to actually put the Axis source in a dependent project and see what\u0027s happening in the RPCProvider.processMessage(). My example is quite trivial, so it should be easy to reproduce.\n\nIf your team is absolutely swamped too, I wouldn\u0027t mind looking at it myself, but probably not for at least another week...:)\n",
    "Please retry your scenario using command line calls to Axis 1.4 JARs(which is what we ship with WTP 2.0 or WTP 2.0.1).  The Axis 1.4 download can be found in:\n\nhttp://www.apache.org/dyn/closer.cgi/ws/axis/1_4 \n\nIf this a problem with Axis 1.4, please open a JIRA on the Axis project (http://issues.apache.org/jira/secure/IssueNavigator.jspa?).\n\nIf the problem is not in Axis 1.4 but is with WTP 2.0 or WTP 2.0.1, please re-open this defect.  You can get the latest WTP 2.0.1 driver at:\n\nhttp://download.eclipse.org/webtools/downloads/drops/R2.0/R-2.0.1-20070926042742/"
  ],
  "commentCreationDates": [
    "2005-12-01T03:44:01+01:00",
    "2005-12-01T04:25:22+01:00",
    "2005-12-01T13:57:01+01:00",
    "2005-12-03T21:48:48+01:00",
    "2007-09-28T22:03:22+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "com.ejgallo.yawl.demo.AirlineReservation.calculateAirFare",
          "source": "AirlineReservation.java:93"
        },
        {
          "method": "com.ejgallo.yawl.demo.AirlineReservation.getRoundTripPrice",
          "source": "AirlineReservation.java:49"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.apache.axis.providers.java.RPCProvider.invokeMethod",
          "source": "RPCProvider.java:388"
        },
        {
          "method": "org.apache.axis.providers.java.RPCProvider.processMessage",
          "source": "RPCProvider.java:283"
        },
        {
          "method": "org.apache.axis.providers.java.JavaProvider.invoke",
          "source": "JavaProvider.java:323"
        },
        {
          "method": "org.apache.axis.strategies.InvocationStrategy.visit",
          "source": "InvocationStrategy.java:32"
        },
        {
          "method": "org.apache.axis.SimpleChain.doVisiting",
          "source": "SimpleChain.java:118"
        },
        {
          "method": "org.apache.axis.SimpleChain.invoke",
          "source": "SimpleChain.java:83"
        },
        {
          "method": "org.apache.axis.handlers.soap.SOAPService.invoke",
          "source": "SOAPService.java:453"
        },
        {
          "method": "org.apache.axis.server.AxisServer.invoke",
          "source": "AxisServer.java:281"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServlet.doPost",
          "source": "AxisServlet.java:699"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:709"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "118759",
      "date": "2005-12-01T03:44:01+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    }
  ],
  "groupId": "118759",
  "bugId": "118759",
  "date": "2005-12-01T03:44:01+01:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "normal"
}