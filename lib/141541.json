{
  "comments": [
    "The Scanner Discovery Profile mechanism is broken for Managed Make\n\nThe problem is that the SIProviders used in the scanner discovery profiles for MBS typicaly inherit the DefaultRunSIProvider, but recent changes to the DefaultRunSIProvider regarding the bug#136136 have made the DefaultRunSIProvider standard make - specific:\n\nThe code was added to the DefaultRunSIProvider.initialize() that directly tries to obtain the IMakeBuilderInfo. This code fails to do it for the managed projects. (See the stack-trace below).\n\nThe DefaultRunSIProvider must be builder-neutral since different CDT integrations might already use it in MBS assuming it is builder-neutral.\n\n \norg.eclipse.core.runtime.CoreException: Missing Builder: org.eclipse.cdt.make.core.makeBuilder\n\tat org.eclipse.cdt.make.internal.core.BuildInfoFactory$BuildInfoProject.\u003cinit\u003e(BuildInfoFactory.java:466)\n\tat org.eclipse.cdt.make.internal.core.BuildInfoFactory.create(BuildInfoFactory.java:534)\n\tat org.eclipse.cdt.make.core.MakeCorePlugin.createBuildInfo(MakeCorePlugin.java:119)\n\tat org.eclipse.cdt.make.internal.core.scannerconfig2.DefaultRunSIProvider.initialize(DefaultRunSIProvider.java:169)\n\tat org.eclipse.cdt.make.internal.core.scannerconfig2.GCCSpecsRunSIProvider.initialize(GCCSpecsRunSIProvider.java:34)\n\tat org.eclipse.cdt.make.internal.core.scannerconfig2.DefaultRunSIProvider.invokeProvider(DefaultRunSIProvider.java:83)\n\tat org.eclipse.cdt.managedbuilder.internal.scannerconfig.ManagedBuildCPathEntryContainer$1.run(ManagedBuildCPathEntryContainer.java:147)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.cdt.managedbuilder.internal.scannerconfig.ManagedBuildCPathEntryContainer.calculateEntriesDynamically(ManagedBuildCPathEntryContainer.java:156)\n\tat org.eclipse.cdt.managedbuilder.internal.scannerconfig.ManagedBuildCPathEntryContainer.getPathEntries(ManagedBuildCPathEntryContainer.java:191)\n\tat org.eclipse.cdt.internal.core.model.PathEntryManager.getResolvedPathEntries(PathEntryManager.java:457)\n\tat org.eclipse.cdt.internal.core.model.PathEntryManager.getResolvedPathEntries(PathEntryManager.java:429)\n\tat org.eclipse.cdt.internal.core.model.PathEntryStoreChangedOperation.executeOperation(PathEntryStoreChangedOperation.java:39)\n\tat org.eclipse.cdt.internal.core.model.CModelOperation.execute(CModelOperation.java:342)\n\tat org.eclipse.cdt.internal.core.model.CModelOperation.run(CModelOperation.java:607)\n\tat org.eclipse.cdt.internal.core.model.CModelOperation.runOperation(CModelOperation.java:635)\n\tat org.eclipse.cdt.internal.core.model.PathEntryManager.pathEntryStoreChanged(PathEntryManager.java:1171)\n\tat org.eclipse.cdt.internal.core.model.DefaultPathEntryStore.fireContentChangedEvent(DefaultPathEntryStore.java:405)\n\tat org.eclipse.cdt.internal.core.model.DefaultPathEntryStore.descriptorChanged(DefaultPathEntryStore.java:381)\n\tat org.eclipse.cdt.internal.core.CDescriptorManager$3.run(CDescriptorManager.java:354)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.cdt.internal.core.CDescriptorManager.fireEvent(CDescriptorManager.java:345)\n\tat org.eclipse.cdt.internal.core.CDescriptor.saveProjectData(CDescriptor.java:587)\n\tat org.eclipse.cdt.internal.core.model.DefaultPathEntryStore.setRawPathEntries(DefaultPathEntryStore.java:127)\n\tat org.eclipse.cdt.internal.core.model.PathEntryManager.saveRawPathEntries(PathEntryManager.java:886)\n\tat org.eclipse.cdt.internal.core.model.SetPathEntriesOperation.executeOperation(SetPathEntriesOperation.java:54)\n\tat org.eclipse.cdt.internal.core.model.CModelOperation.execute(CModelOperation.java:342)\n\tat org.eclipse.cdt.internal.core.model.CModelOperation.run(CModelOperation.java:607)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)\n\tat org.eclipse.cdt.internal.core.model.CModelOperation.runOperation(CModelOperation.java:639)\n\tat org.eclipse.cdt.internal.core.model.PathEntryManager.setRawPathEntries(PathEntryManager.java:520)\n\tat org.eclipse.cdt.core.model.CoreModel.setRawPathEntries(CoreModel.java:907)\n\tat org.eclipse.cdt.internal.core.model.CProject.setRawPathEntries(CProject.java:415)\n\tat org.eclipse.cdt.managedbuilder.core.ManagedBuildManager.initBuildInfoContainer(ManagedBuildManager.java:1587)\n\tat org.eclipse.cdt.managedbuilder.core.ManagedBuildManager.initBuildInfoContainer(ManagedBuildManager.java:1543)\n\tat org.eclipse.cdt.managedbuilder.testplugin.ManagedBuildTestHelper.createNewManagedProject(ManagedBuildTestHelper.java:300)\n\tat org.eclipse.cdt.managedbuilder.testplugin.ManagedBuildTestHelper.createProject(ManagedBuildTestHelper.java:94)\n\tat org.eclipse.cdt.managedbuilder.testplugin.ManagedBuildTestHelper.createProject(ManagedBuildTestHelper.java:128)\n\tat org.eclipse.cdt.managedbuilder.core.tests.BuildDescriptionModelTests.createProject(BuildDescriptionModelTests.java:855)\n\tat org.eclipse.cdt.managedbuilder.core.tests.BuildDescriptionModelTests.testDes_gnu30_exe_objsInProj(BuildDescriptionModelTests.java:1723)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:457)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:670)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:58)\n\tat org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run(CoreTestApplication.java:24)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "mine.... I wish we put public APIs in non internal packages....",
    "forget that last comment I guess I need to looks closer at the public APIs to the make plugins.... ;-)",
    "This stuff is a bit of a mess, but it is historical. I don\u0027t like managed depending on standard. If there are common bits, they should probably be in the core, or a build commons plugin. Something to look at for 4.0.",
    "(In reply to comment #3)\n\u003e This stuff is a bit of a mess, but it is historical. I don\u0027t like managed\n\u003e depending on standard. If there are common bits, they should probably be in the\n\u003e core, or a build commons plugin. Something to look at for 4.0.\nI agree. And we are planning to do it with the new project model. The best solution for now I think is to make the DefaultRunSIProvider behave as it did previously and not to rename/move to public the .internal.core.scannerconfig* classes since this might break tool-chains with profiles that use those classes currently.\n",
    "(In reply to comment #4)\n\u003e I agree. And we are planning to do it with the new project model. The best\n\u003e solution for now I think is to make the DefaultRunSIProvider behave as it did\n\u003e previously and not to rename/move to public the .internal.core.scannerconfig*\n\u003e classes since this might break tool-chains with profiles that use those classes\n\u003e currently.\n\u003e \nI\u0027m going to change it so that is falls back to the previous mechanism for getting the working directory. ",
    "changes made",
    "Works fine now. Thanks Dave."
  ],
  "commentCreationDates": [
    "2006-05-12T16:29:54+02:00",
    "2006-05-15T14:56:01+02:00",
    "2006-05-15T15:02:02+02:00",
    "2006-05-15T15:10:26+02:00",
    "2006-05-15T15:36:53+02:00",
    "2006-05-15T15:50:54+02:00",
    "2006-05-15T16:04:25+02:00",
    "2006-05-15T16:49:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Missing Builder: org.eclipse.cdt.make.core.makeBuilder",
      "elements": [
        {
          "method": "org.eclipse.cdt.make.internal.core.BuildInfoFactory$BuildInfoProject.\u003cinit\u003e",
          "source": "BuildInfoFactory.java:466"
        },
        {
          "method": "org.eclipse.cdt.make.internal.core.BuildInfoFactory.create",
          "source": "BuildInfoFactory.java:534"
        },
        {
          "method": "org.eclipse.cdt.make.core.MakeCorePlugin.createBuildInfo",
          "source": "MakeCorePlugin.java:119"
        },
        {
          "method": "org.eclipse.cdt.make.internal.core.scannerconfig2.DefaultRunSIProvider.initialize",
          "source": "DefaultRunSIProvider.java:169"
        },
        {
          "method": "org.eclipse.cdt.make.internal.core.scannerconfig2.GCCSpecsRunSIProvider.initialize",
          "source": "GCCSpecsRunSIProvider.java:34"
        },
        {
          "method": "org.eclipse.cdt.make.internal.core.scannerconfig2.DefaultRunSIProvider.invokeProvider",
          "source": "DefaultRunSIProvider.java:83"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.internal.scannerconfig.ManagedBuildCPathEntryContainer$1.run",
          "source": "ManagedBuildCPathEntryContainer.java:147"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.internal.scannerconfig.ManagedBuildCPathEntryContainer.calculateEntriesDynamically",
          "source": "ManagedBuildCPathEntryContainer.java:156"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.internal.scannerconfig.ManagedBuildCPathEntryContainer.getPathEntries",
          "source": "ManagedBuildCPathEntryContainer.java:191"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.PathEntryManager.getResolvedPathEntries",
          "source": "PathEntryManager.java:457"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.PathEntryManager.getResolvedPathEntries",
          "source": "PathEntryManager.java:429"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.PathEntryStoreChangedOperation.executeOperation",
          "source": "PathEntryStoreChangedOperation.java:39"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CModelOperation.execute",
          "source": "CModelOperation.java:342"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CModelOperation.run",
          "source": "CModelOperation.java:607"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CModelOperation.runOperation",
          "source": "CModelOperation.java:635"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.PathEntryManager.pathEntryStoreChanged",
          "source": "PathEntryManager.java:1171"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.DefaultPathEntryStore.fireContentChangedEvent",
          "source": "DefaultPathEntryStore.java:405"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.DefaultPathEntryStore.descriptorChanged",
          "source": "DefaultPathEntryStore.java:381"
        },
        {
          "method": "org.eclipse.cdt.internal.core.CDescriptorManager$3.run",
          "source": "CDescriptorManager.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.cdt.internal.core.CDescriptorManager.fireEvent",
          "source": "CDescriptorManager.java:345"
        },
        {
          "method": "org.eclipse.cdt.internal.core.CDescriptor.saveProjectData",
          "source": "CDescriptor.java:587"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.DefaultPathEntryStore.setRawPathEntries",
          "source": "DefaultPathEntryStore.java:127"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.PathEntryManager.saveRawPathEntries",
          "source": "PathEntryManager.java:886"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.SetPathEntriesOperation.executeOperation",
          "source": "SetPathEntriesOperation.java:54"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CModelOperation.execute",
          "source": "CModelOperation.java:342"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CModelOperation.run",
          "source": "CModelOperation.java:607"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1737"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CModelOperation.runOperation",
          "source": "CModelOperation.java:639"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.PathEntryManager.setRawPathEntries",
          "source": "PathEntryManager.java:520"
        },
        {
          "method": "org.eclipse.cdt.core.model.CoreModel.setRawPathEntries",
          "source": "CoreModel.java:907"
        },
        {
          "method": "org.eclipse.cdt.internal.core.model.CProject.setRawPathEntries",
          "source": "CProject.java:415"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.core.ManagedBuildManager.initBuildInfoContainer",
          "source": "ManagedBuildManager.java:1587"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.core.ManagedBuildManager.initBuildInfoContainer",
          "source": "ManagedBuildManager.java:1543"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.testplugin.ManagedBuildTestHelper.createNewManagedProject",
          "source": "ManagedBuildTestHelper.java:300"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.testplugin.ManagedBuildTestHelper.createProject",
          "source": "ManagedBuildTestHelper.java:94"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.testplugin.ManagedBuildTestHelper.createProject",
          "source": "ManagedBuildTestHelper.java:128"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.core.tests.BuildDescriptionModelTests.createProject",
          "source": "BuildDescriptionModelTests.java:855"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.core.tests.BuildDescriptionModelTests.testDes_gnu30_exe_objsInProj",
          "source": "BuildDescriptionModelTests.java:1723"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run",
          "source": "JUnit3TestReference.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.TestExecution.run",
          "source": "TestExecution.java:38"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:670"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:58"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run",
          "source": "CoreTestApplication.java:24"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "141541",
      "date": "2006-05-12T16:29:54+02:00",
      "product": "CDT",
      "component": "cdt-build",
      "severity": "critical"
    }
  ],
  "groupId": "141541",
  "bugId": "141541",
  "date": "2006-05-12T16:29:54+02:00",
  "product": "CDT",
  "component": "cdt-build",
  "severity": "critical"
}