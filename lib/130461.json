{
  "comments": [
    "I was importing AspectJ projects from CVS when the following happened:\njava.lang.ClassCastException\nat org.aspectj.weaver.ResolvedType.getAjMemberParameterizationMap(ResolvedType.java:2068)\nat org.aspectj.weaver.ResolvedType.getAjMemberParameterizationMap(ResolvedType.java:2068)\nat org.aspectj.weaver.ResolvedType.getAjMemberParameterizationMap(ResolvedType.java:2068)\nat org.aspectj.weaver.ResolvedType.getDeclaredAdvice(ResolvedType.java:701)\nat org.aspectj.weaver.ResolvedType.getDeclaredShadowMungers(ResolvedType.java:736)\nat org.aspectj.weaver.ResolvedType.collectShadowMungers(ResolvedType.java:572)\nat org.aspectj.weaver.ResolvedType.collectCrosscuttingMembers(ResolvedType.java:501)\nat org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect(CrosscuttingMembersSet.java:61)\nat org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile(BcelWeaver.java:205)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld(AjBuildManager.java:635)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:213)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:157)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\nClassCastException thrown: org.aspectj.weaver.MissingResolvedTypeWithKnownSignature",
    "Passing over to compiler",
    "the line has certainly \u0027moved\u0027 in HEAD, but I don\u0027t think I\u0027ve actually fixed a problem in that method.  \n\nGoing back a few revs in CVS, i see line 2068 is this one:\nif (getSuperclass() !\u003d null) return ((ReferenceType)getSuperclass()).getAjMemberParameterizationMap();\n\nso... the question is when is the superclass not null and yet not a reference type...",
    "Created an attachment (id\u003d37192)\nClasscast excception in weaving binary aspect classes to Java classes\n\n",
    "Not sure if this is in any way related, but I noticed that the stack trace here is similar to the ClassCastException reported in bug 135052.",
    "thanks for the link there Helen.  I think this is now fixed, I have removed the casts to ReferenceType in ResolvedType.java (version 1.46) and so this can\u0027t happen any more.   I made the change as part of bug 135052.  Now the CCE can\u0027t occur, you may see a problem later with a missing type, but that error may at least make more sense than this cce."
  ],
  "commentCreationDates": [
    "2006-03-05T10:04:35+01:00",
    "2006-03-05T10:28:36+01:00",
    "2006-03-05T11:55:35+01:00",
    "2006-03-29T13:46:01+02:00",
    "2006-04-27T11:57:31+02:00",
    "2006-04-27T12:11:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedType.getAjMemberParameterizationMap",
          "source": "ResolvedType.java:2068"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.getAjMemberParameterizationMap",
          "source": "ResolvedType.java:2068"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.getAjMemberParameterizationMap",
          "source": "ResolvedType.java:2068"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.getDeclaredAdvice",
          "source": "ResolvedType.java:701"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.getDeclaredShadowMungers",
          "source": "ResolvedType.java:736"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.collectShadowMungers",
          "source": "ResolvedType.java:572"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.collectCrosscuttingMembers",
          "source": "ResolvedType.java:501"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect",
          "source": "CrosscuttingMembersSet.java:61"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile",
          "source": "BcelWeaver.java:205"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld",
          "source": "AjBuildManager.java:635"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:213"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:157"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:122"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "130461",
      "date": "2006-03-05T10:04:35+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    }
  ],
  "groupId": "130461",
  "bugId": "130461",
  "date": "2006-03-05T10:04:35+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "critical"
}