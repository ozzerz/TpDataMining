{
  "comments": [
    "I had a project that I was compiling using Java 5 source support. I turned off \njava 5 support but accidentally left in an @annotation pointcut in it. When \nrecompiling, I get an error dialog BCException thrown: Bad type signature: \n\u003cmissing\u003e\n\nWhen I restart I get this in my error log, and if I compile the same message.\n\njava.lang.ClassCastException: org.eclipse.core.internal.resources.Project\nat org.eclipse.ajdt.core.javaelements.AJCompilationUnit.\u003cinit\u003e\n(AJCompilationUnit.java:118)\nat org.eclipse.ajdt.core.AspectJCore.create(AspectJCore.java:137)\nat org.eclipse.ajdt.core.AspectJCore.create(AspectJCore.java:38)\nat org.eclipse.ajdt.core.model.AJProjectModel$Persistence.loadJavaElements\n(AJProjectModel.java:633)\nat org.eclipse.ajdt.core.model.AJProjectModel$Persistence.loadModel\n(AJProjectModel.java:568)\nat org.eclipse.ajdt.core.model.AJProjectModel.loadModel\n(AJProjectModel.java:136)\nat org.eclipse.ajdt.core.model.AJModel.getModelForProject(AJModel.java:83)\nat org.eclipse.ajdt.core.model.AJModel.isAdvised(AJModel.java:126)\nat org.eclipse.ajdt.internal.buildconfig.ImageDecorator.decorateImage\n(ImageDecorator.java:207)\nat org.eclipse.ui.internal.decorators.FullDecoratorDefinition.decorateImage\n(FullDecoratorDefinition.java:111)\nat org.eclipse.ui.internal.decorators.FullImageDecoratorRunnable.run\n(FullImageDecoratorRunnable.java:28)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\nat org.eclipse.core.runtime.Platform.run(Platform.java:783)\nat org.eclipse.ui.internal.decorators.DecoratorManager.safeDecorateImage\n(DecoratorManager.java:395)\nat org.eclipse.ui.internal.decorators.DecoratorManager.decorateImage\n(DecoratorManager.java:360)\nat org.eclipse.jface.viewers.DecoratingLabelProvider.getImage\n(DecoratingLabelProvider.java:84)\nat org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel\n(DecoratingLabelProvider.java:212)\nat org.eclipse.jface.viewers.StructuredViewer.buildLabel\n(StructuredViewer.java:1855)\nat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:228)\nat org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run\n(AbstractTreeViewer.java:85)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\nat org.eclipse.core.runtime.Platform.run(Platform.java:783)\nat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\nat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\nat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:621)\nat org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run\n(StructuredViewer.java:434)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1044)\nat org.eclipse.core.runtime.Platform.run(Platform.java:783)\nat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\nat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)",
    "Created an attachment (id\u003d24709)\nzipped up project in this bad state\n\nThe full zip is too big. I had to remove spring-1.2.1.jar from the lib folder\nto make it small enough to upload...\n\nIn fact, even after removing any Java 5 code the project is STILL in a bad\nstate.",
    "Even removing \u0026 re-adding the AspectJ nature doesn\u0027t fix this bug for me!",
    "I found this stack trace in the .log file under .metadata, giving some data on \nthe Bad type popup...\n\n!ENTRY org.eclipse.ajdt.ui 4 0 2005-07-13 15:30:12.445\n!MESSAGE BCException thrown: Bad type signature: \u003cmissing\u003e\n!STACK 0\norg.aspectj.weaver.BCException: Bad type signature: \u003cmissing\u003e\n\tat org.aspectj.weaver.TypeX.signatureToName(TypeX.java:821)\n\tat org.aspectj.weaver.TypeX.getName(TypeX.java:329)\n\tat org.aspectj.weaver.bcel.BcelWorld.resolveObjectType\n(BcelWorld.java:221)\n\tat org.aspectj.weaver.World.resolveObjectType(World.java:160)\n\tat org.aspectj.weaver.World.resolve(World.java:132)\n\tat \norg.aspectj.weaver.patterns.ExactAnnotationTypePattern.resolveBindings\n(ExactAnnotationTypePattern.java:148)\n\tat org.aspectj.weaver.patterns.AnnotationPointcut.resolveBindings\n(AnnotationPointcut.java:162)\n\tat org.aspectj.weaver.patterns.NotPointcut.resolveBindings\n(NotPointcut.java:106)\n\tat org.aspectj.weaver.patterns.AndPointcut.resolveBindings\n(AndPointcut.java:112)\n\tat org.aspectj.weaver.patterns.Pointcut.resolve(Pointcut.java:231)\n\tat \norg.aspectj.ajdt.internal.compiler.ast.PointcutDesignator.finishResolveTypes\n(PointcutDesignator.java:82)\n\tat \norg.aspectj.ajdt.internal.compiler.ast.PointcutDeclaration.resolveStatements\n(PointcutDeclaration.java:164)\n\tat \norg.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.res\nolve(AbstractMethodDeclaration.java:397)\n\tat \norg.aspectj.ajdt.internal.compiler.ast.PointcutDeclaration.resolvePointcut\n(PointcutDeclaration.java:145)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.resolvePointcutDe\nclarations(AjLookupEnvironment.java:283)\n\tat \norg.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindi\nngs(AjLookupEnvironment.java:179)\n\tat \norg.aspectj.org.eclipse.jdt.internal.compiler.Compiler.beginToCompile\n(Compiler.java:302)\n\tat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile\n(Compiler.java:316)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation\n(AjBuildManager.java:727)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:206)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:166)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild\n(AjBuildManager.java:147)\n\tat org.aspectj.ajde.internal.CompilerAdapter.compile\n(CompilerAdapter.java:116)\n\tat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run\n(AspectJBuildManager.java:191)\n\n",
    "I\u0027m passing over to AspectJ because the main problem here is the BCException\nfrom the compiler (which I can reproduce with the attached project). The\nClassCastException from AJDT (which I couldn\u0027t reproduce) may or may not be\nrelated, but it shouldn\u0027t stop anything working, so I suggest we revisit that\nafter the compiler bug is fixed. There are a few AJ bugs already with similiar\n\"Bad type signature\" errors, but I couldn\u0027t find any exactly the same as this one.",
    "*** Bug 104207 has been marked as a duplicate of this bug. ***",
    "I\u0027m seeing the same error with code where I\u0027ve removed the annotation implementations, commented out \nall use of annotations in source code, but left PCDs with annotation \"matchers\".",
    "Could this have something to do with adding constructors to aspects? I only started seeing this problem \nwhen I added a few constructors to some existing aspects, to initialize some newly-added properties with \ndefault values. (Those weren\u0027t the only changes, however.)",
    "for investigation in M4",
    "Is it possible to ask you recreate this with a recent AJDT?  We have changed the\nhandling of \u0027missing\u0027 *and* we have changed the reporting of errors to give us\nmore context about what AJ was doing at the time things went wrong.  I\u0027ve tried\nto create this failure from the command line and couldnt (used -emacssym too).\n\nI was also wondering if this only happens on an incremental compile and that\nwhen you do a full compile it \u0027goes away\u0027 ?",
    "We should check for use of Java 5 only features (such as the @xxx pcd family) and make sure that a \nfriendly error message is issued in a project that is compiled without -1.5.",
    "Compiler now prevents use of any of the @xxx pcd family, annotations patterns in signature and type \npatterns, and the declare @xxx series if compliance level is not Java 5 or greater (planning for the \nfuture ;))."
  ],
  "commentCreationDates": [
    "2005-07-14T01:19:43+02:00",
    "2005-07-14T01:25:09+02:00",
    "2005-07-14T01:26:41+02:00",
    "2005-07-14T01:54:22+02:00",
    "2005-07-14T14:50:37+02:00",
    "2005-07-18T14:31:48+02:00",
    "2005-07-19T03:59:56+02:00",
    "2005-07-19T05:43:47+02:00",
    "2005-08-26T17:37:01+02:00",
    "2005-10-05T09:32:54+02:00",
    "2005-10-28T12:48:50+02:00",
    "2005-11-04T09:05:23+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.core.internal.resources.Project",
      "elements": [
        {
          "method": "org.eclipse.ajdt.core.javaelements.AJCompilationUnit.\u003cinit\u003e",
          "source": "AJCompilationUnit.java:118"
        },
        {
          "method": "org.eclipse.ajdt.core.AspectJCore.create",
          "source": "AspectJCore.java:137"
        },
        {
          "method": "org.eclipse.ajdt.core.AspectJCore.create",
          "source": "AspectJCore.java:38"
        },
        {
          "method": "org.eclipse.ajdt.core.model.AJProjectModel$Persistence.loadJavaElements",
          "source": "AJProjectModel.java:633"
        },
        {
          "method": "org.eclipse.ajdt.core.model.AJProjectModel$Persistence.loadModel",
          "source": "AJProjectModel.java:568"
        },
        {
          "method": "org.eclipse.ajdt.core.model.AJProjectModel.loadModel",
          "source": "AJProjectModel.java:136"
        },
        {
          "method": "org.eclipse.ajdt.core.model.AJModel.getModelForProject",
          "source": "AJModel.java:83"
        },
        {
          "method": "org.eclipse.ajdt.core.model.AJModel.isAdvised",
          "source": "AJModel.java:126"
        },
        {
          "method": "org.eclipse.ajdt.internal.buildconfig.ImageDecorator.decorateImage",
          "source": "ImageDecorator.java:207"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.FullDecoratorDefinition.decorateImage",
          "source": "FullDecoratorDefinition.java:111"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.FullImageDecoratorRunnable.run",
          "source": "FullImageDecoratorRunnable.java:28"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.DecoratorManager.safeDecorateImage",
          "source": "DecoratorManager.java:395"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.DecoratorManager.decorateImage",
          "source": "DecoratorManager.java:360"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.getImage",
          "source": "DecoratingLabelProvider.java:84"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.updateLabel",
          "source": "DecoratingLabelProvider.java:212"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.buildLabel",
          "source": "StructuredViewer.java:1855"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:228"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:85"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:621"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:434"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "103741",
      "date": "2005-07-14T01:19:43+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    },
    {
      "exceptionType": "org.aspectj.weaver.BCException",
      "message": "Bad type signature: \u003cmissing\u003e",
      "elements": [
        {
          "method": "org.aspectj.weaver.TypeX.signatureToName",
          "source": "TypeX.java:821"
        },
        {
          "method": "org.aspectj.weaver.TypeX.getName",
          "source": "TypeX.java:329"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.resolveObjectType",
          "source": "BcelWorld.java:221"
        },
        {
          "method": "org.aspectj.weaver.World.resolveObjectType",
          "source": "World.java:160"
        },
        {
          "method": "org.aspectj.weaver.World.resolve",
          "source": "World.java:132"
        },
        {
          "method": "org.aspectj.weaver.patterns.ExactAnnotationTypePattern.resolveBindings",
          "source": "ExactAnnotationTypePattern.java:148"
        },
        {
          "method": "org.aspectj.weaver.patterns.AnnotationPointcut.resolveBindings",
          "source": "AnnotationPointcut.java:162"
        },
        {
          "method": "org.aspectj.weaver.patterns.NotPointcut.resolveBindings",
          "source": "NotPointcut.java:106"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.resolveBindings",
          "source": "AndPointcut.java:112"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.resolve",
          "source": "Pointcut.java:231"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.PointcutDesignator.finishResolveTypes",
          "source": "PointcutDesignator.java:82"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.PointcutDeclaration.resolveStatements",
          "source": "PointcutDeclaration.java:164"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:397"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.PointcutDeclaration.resolvePointcut",
          "source": "PointcutDeclaration.java:145"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.resolvePointcutDeclarations",
          "source": "AjLookupEnvironment.java:283"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.AjLookupEnvironment.completeTypeBindings",
          "source": "AjLookupEnvironment.java:179"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.beginToCompile",
          "source": "Compiler.java:302"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:316"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:727"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:206"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:166"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:147"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:116"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "103741",
      "date": "2005-07-14T01:54:22+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    }
  ],
  "groupId": "103741",
  "bugId": "103741",
  "date": "2005-07-14T01:19:43+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "enhancement"
}