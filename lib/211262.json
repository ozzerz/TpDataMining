{
  "comments": [
    "Created an attachment (id\u003d83988)\nzip file containing test plugin project\n\nBuild ID: WTP 3.0\n\nSteps To Reproduce:\n1. Import the attached plugin project and self host against WTP 3.0 with Eclipse 3.4.\n\n2. Create a launch configuration for an Eclipse application.\n\n3. Execute the launch configuration created in step 2.\n\n4. Create a Dynamic Web project named \"wp\".\n\n5. Click on the Eclipse planet icon contributed by the plugin.\n\n\nMore information:\nStep 5 attempts to use CopyWSDLTreeCommand to copy the WSDL at: http://www.webservicex.net/WeatherForecast.asmx?wsdl into the WEB-INF/wsdl directory of wp. The process fails and a dialog will pop up saying:\n\nFailed to copy WSDL \"http://www.webservicex.net/WeatherForecast.asmx?wsdl\" to \"platform:/resource/wp/WebContent/WEB-INF/\".\n\nClicking on Details in this dialog shows the exception:\n\nFailed to copy WSDL \"http://www.webservicex.net/WeatherForecast.asmx?wsdl\" to \"platform:/resource/wp/WebContent/WEB-INF/\".\n    java.io.FileNotFoundException: http://www.webservicex.net/WeatherForecast.asmx%3Fwsdl\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1177)\n    at org.eclipse.wst.ws.internal.parser.wsil.WebServicesParser.getInputStreamAsByteArray(WebServicesParser.java:553)\n    at org.eclipse.wst.ws.internal.parser.wsil.WebServicesParser.getWSDLDefinitionVerbose(WebServicesParser.java:224)\n    at org.eclipse.wst.ws.internal.util.WSDLCopier.analyzeWSDL(WSDLCopier.java:244)\n    at org.eclipse.wst.ws.internal.util.WSDLCopier.run(WSDLCopier.java:469)\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1798)\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1780)\n    at org.eclipse.jst.ws.internal.consumption.command.common.CopyWSDLTreeCommand.execute(CopyWSDLTreeCommand.java:56)\n    at test.handlers.SampleHandler.execute(SampleHandler.java:47)\n    at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:240)\n    at org.eclipse.core.commands.Command.executeWithChecks(Command.java:475)\n    at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:470)\n    at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:165)\n    at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:247)\n    at org.eclipse.ui.menus.CommandContributionItem.handleWidgetSelection(CommandContributionItem.java:594)\n    at org.eclipse.ui.menus.CommandContributionItem.access$8(CommandContributionItem.java:580)\n    at org.eclipse.ui.menus.CommandContributionItem$3.handleEvent(CommandContributionItem.java:570)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:947)\n    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3744)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3355)\n    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2395)\n    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2359)\n    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2225)\n    at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:468)\n    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288)\n    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:463)\n    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:193)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:362)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:175)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:618)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:515)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:455)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1193)\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1169)",
    "I also see the following stack trace in my .log file:\n\n!ENTRY org.eclipse.ui 4 0 2007-11-28 10:48:38.937\n!MESSAGE Unhandled event loop exception\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.jst.ws.internal.consumption.command.common.CopyWSDLTreeCommand.execute(CopyWSDLTreeCommand.java:65)\n\tat test.handlers.SampleHandler.execute(SampleHandler.java:40)",
    "Hi Eric,\n\nPlease take a look at this critical problem reported by Yen ASAP.  I suspect the problem might exist for WTP 1.5.5 and WTP 2.0.x as well since the CopyWSDLTreeCommand was introduced in WTP 1.5.5.  We might have to back port the fix to those releases as well.  If you have any questions, you can get in touch with Andrew who implemented this function.",
    "Can recreate on WTP 2.0.1 driver (R-2.0.1-20070926042742). Looking into a fix.",
    "Created an attachment (id\u003d84447)\ntest plugin\n\nCopyWSDLTreeCommand fails to copy URI with \"?\" character after WSDLCopier introduced (i.e. WTP 2.x and higher), but appears all our code has moved to WSDLCopier now instead, so should think about removing this deprecated class to avoid future confusion. The test plugin demonstrates use of both CopyWSDLTreeCommand (deprecated in 2.x), and it\u0027s successor WSDLCopier.  \n\nTested:\n-uri/string formats file:/\u003cfilePath\u003e, platform:/resource/\u003cprojectPath\u003e, and http:// (both with invalid URI character \"?\" and without)\n-both source and target with invalid URI space character.\n\nNotes:\n-WSDLCopier fails to copy URI with \"?\" character using API setSourceURI(String uri), use setSourceURI(String uri, Definition definition) API instead.\n-WSDLCopier set*URI APIs take a string and not a URI as the signature indicates, passing valid URIs WSDLCopier fails to copy(i.e. using APIs org.eclipse.emf.common.util.URI.createPlatformResourceURI(String boolean) or org.eclipse.core.resources.IResource.getLocationURI() as in the test plugin fails to copy the wsdl)\n-I added a version of WSDL copier to the test plugin that accepts valid URIs using APIs above\n",
    "Created an attachment (id\u003d84558)\npatch\n\nModified the WSDLCopier to encode the URI only when the protocol is \"file:\", or \"platform:/resource/\"... this also fixes the problem using CopyWSDLTreeCommand.",
    "Created an attachment (id\u003d84623)\npatch\n\nisProtocolFile(String uri) was returning   incorrect :uri !\u003d null \u0026\u0026 uri.startsWith(PLATFORM_RESOURCE_PROTOCOL);\n\nMade a late change to this API just before checking in after most of unit testing completed- further unit testing did not pick up the change, suspect self-host got out of synch (as changed API signature) and should have restarted workbench.\n\ntest plugin was used for unit testing and tests all acceptable protocols, and indeed testing fails with previous/obsoleted patch.",
    "Patch reviewed and committed to HEAD.  Released as v200712061641."
  ],
  "commentCreationDates": [
    "2007-11-28T16:14:06+01:00",
    "2007-11-29T14:44:51+01:00",
    "2007-11-29T15:13:55+01:00",
    "2007-11-30T12:37:33+01:00",
    "2007-12-04T18:55:22+01:00",
    "2007-12-05T19:00:38+01:00",
    "2007-12-06T12:32:24+01:00",
    "2007-12-06T19:22:51+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.io.FileNotFoundException",
      "message": "http://www.webservicex.net/WeatherForecast.asmx%3Fwsdl",
      "elements": [
        {
          "method": "sun.net.www.protocol.http.HttpURLConnection.getInputStream",
          "source": "HttpURLConnection.java:1177"
        },
        {
          "method": "org.eclipse.wst.ws.internal.parser.wsil.WebServicesParser.getInputStreamAsByteArray",
          "source": "WebServicesParser.java:553"
        },
        {
          "method": "org.eclipse.wst.ws.internal.parser.wsil.WebServicesParser.getWSDLDefinitionVerbose",
          "source": "WebServicesParser.java:224"
        },
        {
          "method": "org.eclipse.wst.ws.internal.util.WSDLCopier.analyzeWSDL",
          "source": "WSDLCopier.java:244"
        },
        {
          "method": "org.eclipse.wst.ws.internal.util.WSDLCopier.run",
          "source": "WSDLCopier.java:469"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1798"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1780"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.command.common.CopyWSDLTreeCommand.execute",
          "source": "CopyWSDLTreeCommand.java:56"
        },
        {
          "method": "test.handlers.SampleHandler.execute",
          "source": "SampleHandler.java:47"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.HandlerProxy.execute",
          "source": "HandlerProxy.java:240"
        },
        {
          "method": "org.eclipse.core.commands.Command.executeWithChecks",
          "source": "Command.java:475"
        },
        {
          "method": "org.eclipse.core.commands.ParameterizedCommand.executeWithChecks",
          "source": "ParameterizedCommand.java:470"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.HandlerService.executeCommand",
          "source": "HandlerService.java:165"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand",
          "source": "SlaveHandlerService.java:247"
        },
        {
          "method": "org.eclipse.ui.menus.CommandContributionItem.handleWidgetSelection",
          "source": "CommandContributionItem.java:594"
        },
        {
          "method": "org.eclipse.ui.menus.CommandContributionItem.access$8",
          "source": "CommandContributionItem.java:580"
        },
        {
          "method": "org.eclipse.ui.menus.CommandContributionItem$3.handleEvent",
          "source": "CommandContributionItem.java:570"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:947"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3744"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3355"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2395"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2359"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2225"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:468"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:288"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:463"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:193"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:362"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:175"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:79"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:618"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:515"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:455"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1193"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1169"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "211262",
      "date": "2007-11-28T16:14:06+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.ws.internal.consumption.command.common.CopyWSDLTreeCommand.execute",
          "source": "CopyWSDLTreeCommand.java:65"
        },
        {
          "method": "test.handlers.SampleHandler.execute",
          "source": "SampleHandler.java:40"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "211262",
      "date": "2007-11-29T14:44:51+01:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "critical"
    }
  ],
  "groupId": "211262",
  "bugId": "211262",
  "date": "2007-11-28T16:14:06+01:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "critical"
}