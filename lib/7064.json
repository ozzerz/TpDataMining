{
  "comments": [
    "Build 137 \n\nIt is possible to crash Eclipse or a standalone by setting a GridData which is \nnot obviously incorrect; it may be caused by choosing a number of columns which \nSWT thinks is \"too large\".  The code below, in a standalone, will crash, every \ntime, if the extra GridData is set (toggled in this code by running with any \ncommandline args).  The equivalent code in a plugin will also crash (the runtime \nworkspace Eclipse) every time. Comments in the code give some details delimiting \nthe conditions which crash.  After the code is the stack trace. \n\n//////////////////////////////////////////////////////////////////// \n\npublic class Demo {\n\n    public static boolean TRY_ANOTHER_LAYER \u003d false; \n\n    public static void main(String[] args) {\n        final Display display \u003d new Display();\n        final Shell shell \u003d new Shell(display);\n        shell.setLayout(new GridLayout());\n\n        // see below: does not evade the crash \n        Composite layer \u003d null; \n        if (TRY_ANOTHER_LAYER) { \n            layer \u003d new Composite(shell, SWT.BORDER);\n            layer.setLayoutData(new GridData(GridData.FILL_BOTH));\n            GridLayout layout \u003d new GridLayout();\n            layout.numColumns \u003d 1;\n            layer.setLayout(layout);\n        } \n\n        final Composite comp \u003d \n            new Composite(TRY_ANOTHER_LAYER ? layer : shell, SWT.BORDER);\n        final GridLayout compLayout \u003d new GridLayout();\n        compLayout.numColumns \u003d 2; // crashes with \u00271\u0027, \u00272\u0027 and \u00274\u0027 \n        comp.setLayout(compLayout);\n\n        if (args.length \u003e 0) { \n            System.err.println(\"\\n **** Warning: Eclipse crashing! ****\\n\"); \n            final GridData compGD \u003d new GridData(GridData.FILL_BOTH);\n            compGD.horizontalSpan \u003d 2; // does NOT crash with \u00271\u0027 \n            comp.setLayoutData(compGD);\n        } \n\n        // type of widget here does not matter\n        final /*Button*/Combo combo \u003d new /*Button*/Combo(comp, SWT.NONE); \n        combo.setText(\"Widget!\"); \n        final GridData cboxGD \u003d new GridData(GridData.FILL_BOTH);\n        cboxGD.horizontalSpan \u003d 1; // crashes with \u00271\u0027, and \u00272\u0027 \n        combo.setLayoutData(cboxGD);\n\n        shell.open(); // crashes on this line \n        while (!shell.isDisposed()) {\n            if (!display.readAndDispatch())\n                display.sleep();\n        }\n        display.dispose();\n    }\n} // end class Demo \n\n/* \njava.lang.ArrayIndexOutOfBoundsException: 1\n\tat org.eclipse.swt.layout.GridLayout.createGrid(GridLayout.java:402)\n\tat \norg.eclipse.swt.layout.GridLayout.computeLayoutSize(GridLayout.java:277)\n\tat org.eclipse.swt.layout.GridLayout.computeSize(GridLayout.java:334)\n\tat org.eclipse.swt.widgets.Composite.computeSize(Composite.java:103)\n\tat \norg.eclipse.swt.layout.GridLayout.calculateGridDimensions(GridLayout.java:195)\n\tat \norg.eclipse.swt.layout.GridLayout.computeLayoutSize(GridLayout.java:278)\n\tat org.eclipse.swt.layout.GridLayout.computeSize(GridLayout.java:334)\n\tat org.eclipse.swt.layout.GridLayout.layout(GridLayout.java:452)\n\tat org.eclipse.swt.widgets.Composite.WM_SIZE(Composite.java:511)\n\tat org.eclipse.swt.widgets.Decorations.WM_SIZE(Decorations.java:944)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2342)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:873)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:1600)\n\tat org.eclipse.swt.internal.win32.OS.ShowWindow(Native Method)\n\tat org.eclipse.swt.widgets.Decorations.setVisible(Decorations.java:794)\n\tat org.eclipse.swt.widgets.Shell.setVisible(Shell.java:761)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:496)\n\tat Demo.main(Demo.java:54)\n*/",
    "We should not be throwing ArrayIndexOutOfBoundsException.",
    "Entered also 7102, which may be a duplicate despite throwing NullPointer instead \nof ArrayIndex...\n",
    "Fixed in \u003e 20020103"
  ],
  "commentCreationDates": [
    "2001-12-18T19:01:21+01:00",
    "2001-12-18T19:26:21+01:00",
    "2001-12-19T17:53:12+01:00",
    "2002-01-03T15:54:10+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "1",
      "elements": [
        {
          "method": "org.eclipse.swt.layout.GridLayout.createGrid",
          "source": "GridLayout.java:402"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeLayoutSize",
          "source": "GridLayout.java:277"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeSize",
          "source": "GridLayout.java:334"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.computeSize",
          "source": "Composite.java:103"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.calculateGridDimensions",
          "source": "GridLayout.java:195"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeLayoutSize",
          "source": "GridLayout.java:278"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.computeSize",
          "source": "GridLayout.java:334"
        },
        {
          "method": "org.eclipse.swt.layout.GridLayout.layout",
          "source": "GridLayout.java:452"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_SIZE",
          "source": "Composite.java:511"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_SIZE",
          "source": "Decorations.java:944"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2342"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:873"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:1600"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.ShowWindow",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.setVisible",
          "source": "Decorations.java:794"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.setVisible",
          "source": "Shell.java:761"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:496"
        },
        {
          "method": "Demo.main",
          "source": "Demo.java:54"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "7064",
      "date": "2001-12-18T19:01:21+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "7064",
  "bugId": "7064",
  "date": "2001-12-18T19:01:21+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}