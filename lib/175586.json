{
  "comments": [
    "A NPE can happen in EclipseAppContainer.stopAllApps if one of the ApplicationHandle services is unregistered before we have a chance to get the service.\n\nWe should also unget the ApplicationHandle after we have destroyed the handle.\n\njava.lang.NullPointerException\n\tat org.eclipse.equinox.internal.app.EclipseAppContainer.stopAllApps(EclipseAppContainer.java:342)\n\tat org.eclipse.equinox.internal.app.EclipseAppContainer.stop(EclipseAppContainer.java:107)\n\tat org.eclipse.equinox.internal.app.Activator.removedService(Activator.java:151)\n\tat org.osgi.util.tracker.ServiceTracker$Tracked.untrack(ServiceTracker.java:1150)\n\tat org.osgi.util.tracker.ServiceTracker.close(ServiceTracker.java:374)\n\tat org.eclipse.equinox.internal.app.Activator.stop(Activator.java:76)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$3.run(BundleContextImpl.java:1040)\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop(BundleContextImpl.java:1036)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:457)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.stop(AbstractBundle.java:425)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.stop(AbstractBundle.java:417)\n\tat org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._stop(FrameworkCommandProvider.java:271)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:145)\n\tat org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:290)\n\tat org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:275)\n\tat org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:210)\n\tat java.lang.Thread.run(Thread.java:797)",
    "Created an attachment (id\u003d59816)\npatch\n\npatch to do a null check and to unget the service.",
    "Fixed for M6."
  ],
  "commentCreationDates": [
    "2007-02-26T19:22:20+01:00",
    "2007-02-26T19:34:45+01:00",
    "2007-02-26T19:35:20+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppContainer.stopAllApps",
          "source": "EclipseAppContainer.java:342"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppContainer.stop",
          "source": "EclipseAppContainer.java:107"
        },
        {
          "method": "org.eclipse.equinox.internal.app.Activator.removedService",
          "source": "Activator.java:151"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker$Tracked.untrack",
          "source": "ServiceTracker.java:1150"
        },
        {
          "method": "org.osgi.util.tracker.ServiceTracker.close",
          "source": "ServiceTracker.java:374"
        },
        {
          "method": "org.eclipse.equinox.internal.app.Activator.stop",
          "source": "Activator.java:76"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$3.run",
          "source": "BundleContextImpl.java:1040"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "AccessController.java:241"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop",
          "source": "BundleContextImpl.java:1036"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:457"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.stop",
          "source": "AbstractBundle.java:425"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.stop",
          "source": "AbstractBundle.java:417"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._stop",
          "source": "FrameworkCommandProvider.java:271"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute",
          "source": "FrameworkCommandInterpreter.java:145"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand",
          "source": "FrameworkConsole.java:290"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.console",
          "source": "FrameworkConsole.java:275"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.run",
          "source": "FrameworkConsole.java:210"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:797"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "175586",
      "date": "2007-02-26T19:22:20+01:00",
      "product": "Equinox",
      "component": "Bundles",
      "severity": "normal"
    }
  ],
  "groupId": "175586",
  "bugId": "175586",
  "date": "2007-02-26T19:22:20+01:00",
  "product": "Equinox",
  "component": "Bundles",
  "severity": "normal"
}