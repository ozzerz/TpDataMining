{
  "comments": [
    "Found in PDE Build 3.3 RC3.  This is a regression from 3.2.\n\nWhen a feature.xml contains a license field with just a URL and no content, such as:\n   \u003clicense url\u003d\"http://my.company.com/my/license.html\"/\u003e\nthen PDE Build fails with a NullPointerException when generating a source feature for the given feature.  Here is the top of the stack trace (all of the PDE Build methods) that results:\n\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.pde.internal.build.XMLWriter.getEscaped(XMLWriter.java:94)\n\tat org.eclipse.pde.internal.build.XMLWriter.printlnEscaped(XMLWriter.java:120)\n\tat org.eclipse.pde.internal.build.FeatureWriter.printLicense(FeatureWriter.java:108)\n\tat org.eclipse.pde.internal.build.FeatureWriter.printFeature(FeatureWriter.java:40)\n\tat org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.writeSourceFeature(FeatureBuildScriptGenerator.java:1878)\n\tat org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generate(FeatureBuildScriptGenerator.java:269)\n\tat org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generateEmbeddedSource(FeatureBuildScriptGenerator.java:190)\n\tat org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.computeElements(FeatureBuildScriptGenerator.java:138)\n\tat org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generateChildrenScripts(FeatureBuildScriptGenerator.java:870)\n\tat org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generate(FeatureBuildScriptGenerator.java:266)\n\tat org.eclipse.pde.internal.build.BuildScriptGenerator.generateFeatures(BuildScriptGenerator.java:213)\n\tat org.eclipse.pde.internal.build.BuildScriptGenerator.generate(BuildScriptGenerator.java:105)\n\tat org.eclipse.pde.internal.build.tasks.BuildScriptGeneratorTask.run(BuildScriptGeneratorTask.java:94)\n\tat org.eclipse.pde.internal.build.tasks.BuildScriptGeneratorTask.execute(BuildScriptGeneratorTask.java:81)",
    "The same thing happens when the \u003ccopyright\u003e and \u003cdescription\u003e sections of a feature.xml don\u0027t have any data.  The stack trace is slightly different, but mostly the same.  I am guessing that \u003clicense\u003e, \u003ccopyright\u003e, and \u003cdescription\u003e will all be fixed at the same time, so I am adding them to this bug rather than creating a new one.\n",
    "Created an attachment (id\u003d70736)\nPatch the npe\n\n",
    "I tested a version of org.eclipse.pde.build which contains this patch that Pascal sent me, and it fixed the problem.  It could generate source for a feature with empty \u003clicense\u003e, \u003ccopyright\u003e, and \u003cdescription\u003e entries.  So this fix gets my vote.\n",
    "+1 assuming many eyes are applied to the patch itself and its contribution to the build",
    "It\u0027s a feature - it prevents you from shipping something without a license ;)",
    "Arg, collided with Jeff. Even though I threw away my change, it somehow changed the flags. Trying to add back Jeff\u0027s flag...",
    "I have released the patch in HEAD. ",
    "For the record, since I somehow completely screwed up the review flags, this fix was reviewed by John Arthorne, Pascal Rapicault, and DJ Houghton and approved by Jeff McAffer.",
    "+1 to the patch",
    "I also had a +1 in there that John managed to squash :)"
  ],
  "commentCreationDates": [
    "2007-06-08T20:28:36+02:00",
    "2007-06-08T21:00:55+02:00",
    "2007-06-08T22:02:43+02:00",
    "2007-06-08T22:12:56+02:00",
    "2007-06-08T22:15:17+02:00",
    "2007-06-08T22:16:49+02:00",
    "2007-06-08T22:18:30+02:00",
    "2007-06-08T22:24:05+02:00",
    "2007-06-08T22:26:43+02:00",
    "2007-06-08T22:46:54+02:00",
    "2007-06-08T22:56:49+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.build.XMLWriter.getEscaped",
          "source": "XMLWriter.java:94"
        },
        {
          "method": "org.eclipse.pde.internal.build.XMLWriter.printlnEscaped",
          "source": "XMLWriter.java:120"
        },
        {
          "method": "org.eclipse.pde.internal.build.FeatureWriter.printLicense",
          "source": "FeatureWriter.java:108"
        },
        {
          "method": "org.eclipse.pde.internal.build.FeatureWriter.printFeature",
          "source": "FeatureWriter.java:40"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.writeSourceFeature",
          "source": "FeatureBuildScriptGenerator.java:1878"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generate",
          "source": "FeatureBuildScriptGenerator.java:269"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generateEmbeddedSource",
          "source": "FeatureBuildScriptGenerator.java:190"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.computeElements",
          "source": "FeatureBuildScriptGenerator.java:138"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generateChildrenScripts",
          "source": "FeatureBuildScriptGenerator.java:870"
        },
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.generate",
          "source": "FeatureBuildScriptGenerator.java:266"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generateFeatures",
          "source": "BuildScriptGenerator.java:213"
        },
        {
          "method": "org.eclipse.pde.internal.build.BuildScriptGenerator.generate",
          "source": "BuildScriptGenerator.java:105"
        },
        {
          "method": "org.eclipse.pde.internal.build.tasks.BuildScriptGeneratorTask.run",
          "source": "BuildScriptGeneratorTask.java:94"
        },
        {
          "method": "org.eclipse.pde.internal.build.tasks.BuildScriptGeneratorTask.execute",
          "source": "BuildScriptGeneratorTask.java:81"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191756",
      "date": "2007-06-08T20:28:36+02:00",
      "product": "PDE",
      "component": "Build",
      "severity": "normal"
    }
  ],
  "groupId": "191756",
  "bugId": "191756",
  "date": "2007-06-08T20:28:36+02:00",
  "product": "PDE",
  "component": "Build",
  "severity": "normal"
}