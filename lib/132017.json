{
  "comments": [
    "I have reports that use MS SQL Server and MySQL Server and they work fine with  build 40 of Glassfish.\nBut examples of reports that located on the Birt site don\u0027t work.\nIf replace the derby.jar that is packaged with GlassFish with the derby.jar that is packaged in the BIRT web application, the reports (for example such as SalesInvoice.rptdesign) work properly. \nIf replace the derby.jar in the web application with the derby.jar from GlassFish, the reports fails to display correctly.\n\nBy the way thanks to Vince Kraemer (http://blogs.sun.com/roller/page/vkraemer) who found work out described above.\n\nThe glassfish use more updated version of derby.\n\nHere is manifest from their version of derby:\n\nManifest-Version: 1.0\nAnt-Version: Apache Ant 1.6.1\nCreated-By: 1.4.2_07-b05 (Sun Microsystems Inc.)\nBundle-Vendor: Apache Software Foundation\nBundle-Activator: org.apache.derby.osgi.EmbeddedActivator\nBundle-Name: Apache Derby 10.1\nBundle-Version: 10.1.1000000.208786\nDynamicImport-Package: *\nExport-Package: org.apache.derby.authentication,org.apache.derby.datab\nase,org.apache.derby.io,org.apache.derby.jdbc,org.apache.derby.vti\n-----------------------------------\n\nWhy derby from glassfish have priority over derby that includes in plugin?\nI even did not start derby server that belong to GF. \n\nI don\u0027t know reason of this problem but I\u0027m sure that updating derby.jar \nto new version is good chance to get rid of the bug.\nAnyway it would be interesting to hear some comments on this issue.\n\nErrors I got before replacing derby.jar version:\n\n- There are error(s) in report : report\n\nError0 : odaconsumer.CannotOpenConnection ( 1 time(s) )\ndetail : org.eclipse.birt.data.engine.core.DataException: Cannot open the connection for the driver: org.eclipse.birt.report.data.oda.sampledb\nFailed to get connection.\nFailed to start database \u0027jar:(C:\\birt-runtime-2_1_0\\WebViewerExample\\plugins\\org.eclipse.birt.report.data.oda.sampledb\\db\\BirtSample.jar)BirtSample\u0027, see the next exception for details.\nat org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:136)\nat org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:154)\nat org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:147)\nat org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource(DataSourceRuntime.java:150)\nat org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.openDataSource(PreparedQuery.java:881)\nat org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.prepareExecution(PreparedQuery.java:700)\nat org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.access$000(PreparedQuery.java:537)\nat org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare(PreparedQuery.java:226)\nat org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:145)\nat org.eclipse.birt.report.engine.data.dte.DteDataEngine.execute(DteDataEngine.java:205)\nat org.eclipse.birt.report.engine.executor.QueryItemExecutor.openResultSet(QueryItemExecutor.java:62)\nat org.eclipse.birt.report.engine.executor.TableItemExecutor.execute(TableItemExecutor.java:122)\nat org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitTableItem(ReportExecutorVisitor.java:188)\nat org.eclipse.birt.report.engine.ir.TableItemDesign.accept(TableItemDesign.java:69)\nat org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:125)\nat org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:89)\nat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:175)\nat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\nat org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source)\nat org.eclipse.birt.report.presentation.aggregation.BaseFragment.service(Unknown Source)\nat org.eclipse.birt.report.servlet.ViewerServlet.doGet(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\nat org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:822)\nat org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:397)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)\nat org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:566)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:536)\nat org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:244)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:183)\nat org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:566)\nat com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:73)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:181)\nat org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:566)\nat com.sun.enterprise.web.VirtualServerPipeline.invoke(VirtualServerPipeline.java:120)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:939)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:137)\nat org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:566)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:536)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:939)\nat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:223)\nat com.sun.enterprise.web.connector.grizzly.ProcessorTask.invokeAdapter(ProcessorTask.java:666)\nat com.sun.enterprise.web.connector.grizzly.ProcessorTask.processNonBlocked(ProcessorTask.java:573)\nat com.sun.enterprise.web.connector.grizzly.ProcessorTask.process(ProcessorTask.java:843)\nat com.sun.enterprise.web.connector.grizzly.ReadTask.executeProcessorTask(ReadTask.java:287)\nat com.sun.enterprise.web.connector.grizzly.ReadTask.doTask(ReadTask.java:212)\nat com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:252)\nat com.sun.enterprise.web.connector.grizzly.WorkerThread.run(WorkerThread.java:75)\nCaused by: org.eclipse.birt.report.data.oda.jdbc.JDBCException: Failed to get connection.\nFailed to start database \u0027jar:(C:\\birt-runtime-2_1_0\\WebViewerExample\\plugins\\org.eclipse.birt.report.data.oda.sampledb\\db\\BirtSample.jar)BirtSample\u0027, see the next exception for details.\nat org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl(Connection.java:155)\nat org.eclipse.birt.report.data.oda.jdbc.Connection.open(Connection.java:111)\nat org.eclipse.birt.report.data.oda.sampledb.SampleDBDriver$SampleDBConnection.open(SampleDBDriver.java:74)\nat org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open(OdaConnection.java:239)\nat org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:124)\n... 47 more\nCaused by: SQL Exception: Failed to start database \u0027jar:(C:\\birt-runtime-2_1_0\\WebViewerExample\\plugins\\org.eclipse.birt.report.data.oda.sampledb\\db\\BirtSample.jar)BirtSample\u0027, see the next exception for details.\nat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)\nat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)\nat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)\nat org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)\nat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)\nat org.apache.derby.impl.jdbc.EmbedConnection.\u003cinit\u003e(Unknown Source)\nat org.apache.derby.impl.jdbc.EmbedConnection30.\u003cinit\u003e(Unknown Source)\nat org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Unknown Source)\nat org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)\nat java.sql.DriverManager.getConnection(DriverManager.java:525)\nat java.sql.DriverManager.getConnection(DriverManager.java:140)\nat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect(JDBCDriverManager.java:148)\nat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection(JDBCDriverManager.java:94)\nat org.eclipse.birt.report.data.oda.sampledb.SampleDBJDBCConnectionFactory.getConnection(SampleDBJDBCConnectionFactory.java:65)\nat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect(JDBCDriverManager.java:140)\nat org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection(JDBCDriverManager.java:94)\nat org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl(Connection.java:150)\n... 51 more",
    "Due to the inherent limitations of Derby embedded DB engine (each JVM can only have one instance of the DB engine), using BIRT SampleDB within another application which also packages Derby is problematic. The immediate issue is the possible Derby version conflict which is the direct cause of the reported problem. A upgrade of BIRT Derby library version is not a permanent solution. Also, if another Derby embedded DB instance is started, it may affect the operation of the SampleDB plugin.\n\nFor BIRT 2.1, we will consider upgrading the packaged Derby Engine version, which hopefully will alleviate this issue (at least for the time being). We will research into how we can resolve this issue permanently in future releases.",
    "Birt is also upgrading its derby version.  schedule for future to address the general issue (two instance of Derby in one JVM) gary points out.",
    "Derby upgrade is logged as bug 143084. After the upgrade is done this issue will probably go away (for now).",
    "BIRT\u0027s Derby library version has been upgraded to 10.1.2. This issue should no longer occur."
  ],
  "commentCreationDates": [
    "2006-03-15T19:38:48+01:00",
    "2006-03-17T23:22:59+01:00",
    "2006-05-22T07:35:12+02:00",
    "2006-05-23T00:50:29+02:00",
    "2006-06-04T19:11:07+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.birt.data.engine.core.DataException",
      "message": "Cannot open the connection for the driver: org.eclipse.birt.report.data.oda.sampledb Failed to get connection. Failed to start database \u0027jar:(C:\\birt-runtime-2_1_0\\WebViewerExample\\plugins\\org.eclipse.birt.report.data.oda.sampledb\\db\\BirtSample.jar)BirtSample\u0027, see the next exception for details.",
      "elements": [
        {
          "method": "org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection",
          "source": "ConnectionManager.java:136"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.newConnection",
          "source": "DataSource.java:154"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.open",
          "source": "DataSource.java:147"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource",
          "source": "DataSourceRuntime.java:150"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.openDataSource",
          "source": "PreparedQuery.java:881"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.prepareExecution",
          "source": "PreparedQuery.java:700"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery$Executor.access$000",
          "source": "PreparedQuery.java:537"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare",
          "source": "PreparedQuery.java:226"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute",
          "source": "PreparedDataSourceQuery.java:145"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.DteDataEngine.execute",
          "source": "DteDataEngine.java:205"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.QueryItemExecutor.openResultSet",
          "source": "QueryItemExecutor.java:62"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.TableItemExecutor.execute",
          "source": "TableItemExecutor.java:122"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitTableItem",
          "source": "ReportExecutorVisitor.java:188"
        },
        {
          "method": "org.eclipse.birt.report.engine.ir.TableItemDesign.accept",
          "source": "TableItemDesign.java:69"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.execute",
          "source": "ReportExecutor.java:125"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.execute",
          "source": "ReportExecutor.java:89"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:175"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.BaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.ViewerServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:709"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:822"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.servletService",
          "source": "ApplicationFilterChain.java:397"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:279"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.doInvoke",
          "source": "StandardPipeline.java:566"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:536"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invokeInternal",
          "source": "StandardContextValve.java:244"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:183"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.doInvoke",
          "source": "StandardPipeline.java:566"
        },
        {
          "method": "com.sun.enterprise.web.WebPipeline.invoke",
          "source": "WebPipeline.java:73"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:181"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.doInvoke",
          "source": "StandardPipeline.java:566"
        },
        {
          "method": "com.sun.enterprise.web.VirtualServerPipeline.invoke",
          "source": "VirtualServerPipeline.java:120"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:939"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:137"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.doInvoke",
          "source": "StandardPipeline.java:566"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:536"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:939"
        },
        {
          "method": "org.apache.coyote.tomcat5.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:223"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.ProcessorTask.invokeAdapter",
          "source": "ProcessorTask.java:666"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.ProcessorTask.processNonBlocked",
          "source": "ProcessorTask.java:573"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.ProcessorTask.process",
          "source": "ProcessorTask.java:843"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.ReadTask.executeProcessorTask",
          "source": "ReadTask.java:287"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.ReadTask.doTask",
          "source": "ReadTask.java:212"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.TaskBase.run",
          "source": "TaskBase.java:252"
        },
        {
          "method": "com.sun.enterprise.web.connector.grizzly.WorkerThread.run",
          "source": "WorkerThread.java:75"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.birt.report.data.oda.jdbc.JDBCException",
        "message": "Failed to get connection. Failed to start database \u0027jar:(C:\\birt-runtime-2_1_0\\WebViewerExample\\plugins\\org.eclipse.birt.report.data.oda.sampledb\\db\\BirtSample.jar)BirtSample\u0027, see the next exception for details.",
        "elements": [
          {
            "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl",
            "source": "Connection.java:155"
          },
          {
            "method": "org.eclipse.birt.report.data.oda.jdbc.Connection.open",
            "source": "Connection.java:111"
          },
          {
            "method": "org.eclipse.birt.report.data.oda.sampledb.SampleDBDriver$SampleDBConnection.open",
            "source": "SampleDBDriver.java:74"
          },
          {
            "method": "org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open",
            "source": "OdaConnection.java:239"
          },
          {
            "method": "org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection",
            "source": "ConnectionManager.java:124"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "132017",
      "date": "2006-03-15T19:38:48+01:00",
      "product": "BIRT",
      "component": "Data Access",
      "severity": "normal"
    }
  ],
  "groupId": "132017",
  "bugId": "132017",
  "date": "2006-03-15T19:38:48+01:00",
  "product": "BIRT",
  "component": "Data Access",
  "severity": "normal"
}