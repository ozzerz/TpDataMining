{
  "comments": [
    "Problem:\nTo my knowledge, the following code is supposed to be the only way to retrieve \nthe filesystem path to the root of a bundle:\n\n    Platform.asLocalURL(bundle.getEntry(\"/\"))\n\nUnfortunately, with single jar plug-ins like org.eclipse.runtime, this results \nin the following exception:\n\nLifecycleException: java.lang.NullPointerException\n\tat \norg.eclipse.osgi.framework.adaptor.core.BundleEntry$DirZipBundleEntry.getFileUR\nL(BundleEntry.java:291)\n\tat \norg.eclipse.osgi.framework.internal.core.BundleURLConnection.getFileURL\n(BundleURLConnection.java:128)\n\tat \norg.eclipse.core.runtime.internal.adaptor.URLConverterImpl.convertToFileURL\n(URLConverterImpl.java:31)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.asLocalURL\n(InternalPlatform.java:215)\n\tat org.eclipse.core.runtime.Platform.asLocalURL(Platform.java:507)",
    "What would you expect here? A jar URL?\nNote that the recommended way to access the root of a bundle is to use\nBundle.getEntry().\n\nThis bugs looks related to bug #86195.\n",
    "Well, as mentioned, I am already using bundle.getEntry() and it doesn\u0027t work. \nOr are you suggesting to use it in a different way? What I need is a way to \nretrieve the URL of the JAR that contains the plug-in.",
    "I was suggesting that you should directly use the Bundle.getEntry() to reach\ninto the bundle (I did not notice the call in asLocalURL). However it seems that\nyou need to get the URL of the bundle. Could you describe your use case?\n\n",
    "Well, in fact I would be fine with the local path, not neccessarily as URL. \nThe use case is that I need to write a Classloader that exposes the paths to \nall referenced JARs through getURLs to enable JSP compilation at runtime. This \nis similar to the code that can be found in \norg.eclipse.help.internal.appserver.PluginClassLoaderWrapper#getURLs, which I \nthink is somewhat broken for Eclipse 3.1. The current implementation works for \nall JSPs that do not reference classes that are located in a single jar plug-\nin. This worked in the past though.\n\n",
    "Just to be clear, you want the actual location of the plugin itself.  That is \nsomething like the install location of the plugin work?  I don\u0027t believe that \nwe expose it right now (used to with IPluginDescriptor.getInstallURL()) but \nthat whole structure is deprecated.\n\nNote that the use of asLocalURL here is bad as it will extract the contents.  \nYou are probably interested in resolve(URL)",
    "Yes, I need something similar to IPluginDescriptor#getInstallURL. You might \nalso want to check with the guys doing the help stuff, they will probably need \nsomething similar if they want to provide a bullet-prove implementation.\n\nThanks for pointing out the differences between resolve and asLocalURL.",
    "The org.eclipse.tomcat plugin depends on the corrected version of PluginClassLoaderWrapper. Currently (3.1.2), this plugin does not provide JSP code with access to classes from org.eclipse.core.runtime and other jar bound plugins.",
    "\n\n*** This bug has been marked as a duplicate of 86195 ***"
  ],
  "commentCreationDates": [
    "2005-08-11T18:02:19+02:00",
    "2005-08-16T15:16:57+02:00",
    "2005-08-16T18:39:47+02:00",
    "2005-08-16T19:26:56+02:00",
    "2005-08-17T13:38:03+02:00",
    "2005-08-26T12:29:04+02:00",
    "2005-08-26T18:38:20+02:00",
    "2006-03-11T18:11:24+01:00",
    "2006-03-24T15:27:33+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.BundleEntry$DirZipBundleEntry.getFileURL",
          "source": "BundleEntry.java:291"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleURLConnection.getFileURL",
          "source": "BundleURLConnection.java:128"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.URLConverterImpl.convertToFileURL",
          "source": "URLConverterImpl.java:31"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.asLocalURL",
          "source": "InternalPlatform.java:215"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.asLocalURL",
          "source": "Platform.java:507"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "106758",
      "duplicateId": "86195",
      "date": "2005-08-11T18:02:19+02:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "86195",
  "bugId": "106758",
  "duplicateId": "86195",
  "date": "2005-08-11T18:02:19+02:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}