{
  "comments": [
    "I20060131-1200\n\nI get the AIOOBE below, when I try to load an invalid gif file. Since URLImageDescriptor#getImageData() does not specify any thrown exceptions, I would expect to get null from this call.\n\njava.lang.ArrayIndexOutOfBoundsException: Array index out of range: 256\n\tat org.eclipse.swt.internal.image.LZWCodec.nextPutPixels(LZWCodec.java:395)\n\tat org.eclipse.swt.internal.image.LZWCodec.decode(LZWCodec.java:94)\n\tat org.eclipse.swt.internal.image.LZWCodec.decode(LZWCodec.java:115)\n\tat org.eclipse.swt.internal.image.GIFFileFormat.readImageBlock(GIFFileFormat.java:402)\n\tat org.eclipse.swt.internal.image.GIFFileFormat.loadFromByteStream(GIFFileFormat.java:107)\n\tat org.eclipse.swt.internal.image.FileFormat.loadFromStream(FileFormat.java:39)\n\tat org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:71)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:127)\n\tat org.eclipse.swt.graphics.ImageDataLoader.load(ImageDataLoader.java:18)\n\tat org.eclipse.swt.graphics.ImageData.\u003cinit\u003e(ImageData.java:327)\n\tat org.eclipse.jface.resource.URLImageDescriptor.getImageData(URLImageDescriptor.java:57)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:279)\n\tat org.eclipse.jface.resource.ImageDescriptor.createResource(ImageDescriptor.java:171)\n\tat org.eclipse.jface.resource.DeviceResourceManager.allocate(DeviceResourceManager.java:56)\n\tat org.eclipse.jface.resource.AbstractResourceManager.create(AbstractResourceManager.java:87)\n\tat org.eclipse.jface.resource.LocalResourceManager.allocate(LocalResourceManager.java:83)\n\tat org.eclipse.jface.resource.AbstractResourceManager.create(AbstractResourceManager.java:87)\n\tat org.eclipse.jface.resource.ResourceManager.createImageWithDefault(ResourceManager.java:114)\n\tat org.eclipse.jface.action.ActionContributionItem.updateImages(ActionContributionItem.java:966)\n\tat org.eclipse.jface.action.ActionContributionItem.update(ActionContributionItem.java:820)\n\tat org.eclipse.jface.action.ActionContributionItem.fill(ActionContributionItem.java:273)\n\tat org.eclipse.jdt.internal.ui.viewsupport.HistoryDropDownAction$HistoryMenuCreator.addActionToMenu(HistoryDropDownAction.java:106)\n\tat org.eclipse.jdt.internal.ui.viewsupport.HistoryDropDownAction$HistoryMenuCreator.getMenu(HistoryDropDownAction.java:79)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:506)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:480)\n\tat org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:433)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:920)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3287)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2907)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1792)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1756)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:401)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:93)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:69)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d34182)\nThe invalid gif\n\n",
    "CAR, is this new and improved?",
    "No, this is not the new and improved image loading code - jface still uses the old ImageLoader code. This GIF has a bit depth of 7 pixels, and we don\u0027t support that depth. Instead, we try to \"promote\" it to 8 pixels, and it looks like we have a \u0027promoting\u0027 bug in our old image loader code.\n\nMarkus, if you created that image yourself, the best thing to do is to redo it with a bit depth of 8 pixels yourself. Then it should work. That is of course just a work-around for now, until this bug is fixed.",
    "Actually, this seems to be a very bogus image - what application was it created with?\nI can ONLY open it with Internet Explorer. I also tried:\n- MS Paint\n- MS Photo Editor\n- Windows Picture and Fax Viewer\n- Adobe PhotoShop 7.0\nand NONE of these applications can open this GIF.",
    "Sorry, I wasn\u0027t clear enough. This image is indeed bogus, and I don\u0027t expect SWT to be able to load it. I would just expect to get null insetad of an AIOOBE.\n\nI \"created\" it with Eclipse\u0027s CVS patching tools: I forgot that patches cannot contain binary data and created and reapplied a patch for this image - the outcome is the attached image.",
    "Fixed \u003e 20060207.\n\nThanks! We were throwing an SWTException with code SWT.ERROR_IO in this case, when in fact we should have been throwing it with code SWT.ERROR_INVALID_IMAGE.",
    "I wonder if you should open a bug report against the CVS patching tools... perhaps they shouldn\u0027t have allowed you to \"patch\" that GIF.\n\nWow, Internet Explorer is very forgiving if it could actually display your strange patched GIF, when all of those other applications rejected it...  :)",
    "\u003e I wonder if you should open a bug report against the CVS patching tools...\n\u003e perhaps they shouldn\u0027t have allowed you to \"patch\" that GIF.\nAlready there: bug 67306.\n\n\u003e Wow, Internet Explorer is very forgiving if it could actually display your\n\u003e strange patched GIF, when all of those other applications rejected it...  :)\nMozilla also accepts it. I guess it\u0027s a common behavoir for web browsers to accept all the crap they are given to render ;-)"
  ],
  "commentCreationDates": [
    "2006-02-06T09:55:14+01:00",
    "2006-02-06T09:57:40+01:00",
    "2006-02-06T20:32:43+01:00",
    "2006-02-07T20:37:02+01:00",
    "2006-02-07T20:39:54+01:00",
    "2006-02-07T20:43:41+01:00",
    "2006-02-07T21:37:26+01:00",
    "2006-02-07T21:42:25+01:00",
    "2006-02-08T11:07:00+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "Array index out of range: 256",
      "elements": [
        {
          "method": "org.eclipse.swt.internal.image.LZWCodec.nextPutPixels",
          "source": "LZWCodec.java:395"
        },
        {
          "method": "org.eclipse.swt.internal.image.LZWCodec.decode",
          "source": "LZWCodec.java:94"
        },
        {
          "method": "org.eclipse.swt.internal.image.LZWCodec.decode",
          "source": "LZWCodec.java:115"
        },
        {
          "method": "org.eclipse.swt.internal.image.GIFFileFormat.readImageBlock",
          "source": "GIFFileFormat.java:402"
        },
        {
          "method": "org.eclipse.swt.internal.image.GIFFileFormat.loadFromByteStream",
          "source": "GIFFileFormat.java:107"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.loadFromStream",
          "source": "FileFormat.java:39"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.load",
          "source": "FileFormat.java:71"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:127"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageDataLoader.load",
          "source": "ImageDataLoader.java:18"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageData.\u003cinit\u003e",
          "source": "ImageData.java:327"
        },
        {
          "method": "org.eclipse.jface.resource.URLImageDescriptor.getImageData",
          "source": "URLImageDescriptor.java:57"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createImage",
          "source": "ImageDescriptor.java:279"
        },
        {
          "method": "org.eclipse.jface.resource.ImageDescriptor.createResource",
          "source": "ImageDescriptor.java:171"
        },
        {
          "method": "org.eclipse.jface.resource.DeviceResourceManager.allocate",
          "source": "DeviceResourceManager.java:56"
        },
        {
          "method": "org.eclipse.jface.resource.AbstractResourceManager.create",
          "source": "AbstractResourceManager.java:87"
        },
        {
          "method": "org.eclipse.jface.resource.LocalResourceManager.allocate",
          "source": "LocalResourceManager.java:83"
        },
        {
          "method": "org.eclipse.jface.resource.AbstractResourceManager.create",
          "source": "AbstractResourceManager.java:87"
        },
        {
          "method": "org.eclipse.jface.resource.ResourceManager.createImageWithDefault",
          "source": "ResourceManager.java:114"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.updateImages",
          "source": "ActionContributionItem.java:966"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.update",
          "source": "ActionContributionItem.java:820"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.fill",
          "source": "ActionContributionItem.java:273"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.HistoryDropDownAction$HistoryMenuCreator.addActionToMenu",
          "source": "HistoryDropDownAction.java:106"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.HistoryDropDownAction$HistoryMenuCreator.getMenu",
          "source": "HistoryDropDownAction.java:79"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:506"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:480"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:433"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:920"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3287"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2907"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1792"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1756"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:401"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:109"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:93"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:69"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:374"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "126534",
      "date": "2006-02-06T09:55:14+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "126534",
  "bugId": "126534",
  "date": "2006-02-06T09:55:14+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}