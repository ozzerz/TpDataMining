{
  "comments": [
    "Build ID: Europa\n\nSteps To Reproduce:\n1. Install Europa with Subclipse\n2. Use it\n3. Uninstall Subclipse via \"Manage configuration\"\n4. Install Subversive\n\nEclipse fails to show \"Share Project\" option in team menu, yet does access Subversive in SVN repos exploring.\n\nTeam provider is referring to Subclipse stuff.\n\nFor diagnosis, I\u0027ve tried finding out where this is coming from, and it seems to be somewhere in Eclipse.  I\u0027ve done as follows:\n- check there isn\u0027t a nature specified in my .project\n- Ensure that subclipse did uninstall - nothing in plugins or features\n- Revert eclipse/configuration back to the original\n- search .metadata in my workspace for anything referring to subclipse\n- restart eclipse with -clean\n- scratch head\n- bang head against wall\n- I can\u0027t see where on earth the reference is coming from\n\n\nMore information:\n!ENTRY org.eclipse.team.core 4 0 2007-08-04 22:30:04.046\n!MESSAGE Could not instantiate provider org.tigris.subversion.subclipse.core.svnnature for project zDocs.\n!STACK 1\norg.eclipse.team.core.TeamException: Could not instantiate provider org.tigris.subversion.subclipse.core.svnnature for project zDocs.\n\tat org.eclipse.team.core.RepositoryProvider.mapNewProvider(RepositoryProvider.java:165)\n\tat org.eclipse.team.core.RepositoryProvider.mapExistingProvider(RepositoryProvider.java:235)\n\tat org.eclipse.team.core.RepositoryProvider.getProvider(RepositoryProvider.java:507)\n\tat org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.isMappedToCVS(CVSLightweightDecorator.java:196)\n\tat org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.decorate(CVSLightweightDecorator.java:151)\n...",
    "Okay... further searching reveals that Windows XP-64 and it\u0027s little animated dog can\u0027t even do a simple \u0027grep\u0027.\n\nThe culprit is the files in .plugins\\org.eclipse.core.resources\\.projects, which are not getting flushed or reset on a -clean... as far as I can tell, this is not the fault of another package failing to uninstall correctly... as... it\u0027s in my workspace.",
    "The problem is that the projects in your workspace are still mapped to the Subclipse repository provider. Although it would be possible for team to remove the mapping, it is equally likely that the missing plug-in was due to an error in which case unmapping the project is not what the user would want. One option would be for you to Disconnect the projects before uninstalling Subclipse. Another option would be for Subversion to contribute and action to the Subsclipe repository provider id to offer to convert the Subclipse project to a Subversive project. Forwarding to Subversive to consider this.",
    "Another interesting use case is that of using Project Sets (.psf) which are then shared between a team where some have Subclipse and some have Subversive, based on their personal preference.\n\nI think that the Subclipse -\u003e Subversive migration use case is something worth seriously considering, as it\u0027s going to be more frequent.\n\nIt would certainly be useful for Subversive to implement the Subclipse provider\u0027s interface, at least to the extent of offering to migrate.  Otherwise, we\u0027re left with a workspace where there is nothing useful presented via the UI, and instead users have to start hunting under the hood (which took me some discovering).",
    "Hello Michael, \n\nI tried to run following code in the Subversive plug-in startup:\n\nIProject []projects \u003d workspace.getRoot().getProjects();\nfor (int i \u003d 0; i \u003c projects.length; i++) {\n\tRepositoryProvider.getProvider(projects[i]);\n}\n\nand \"Share Project\" action in described case become enabled. After that I checked the Team Services code and found the issue reason. Really ConfigureProjectAction.isEnabled() method refers to RepositoryProvider.isShared() method in order to detect enablement. The last also refers to another metod of RepositoryProvider class. This internal method called isMarkedAsUnshared() and it returns a state previously set by RepositoryProvider.getProvider() method.\n\nSo, it looks like this situation is handled in the Team Services but by mistake incorrect method is called inside the ConfigureProjectaction.isEnabled() method and in order to solve the problem the line:\n\nif (!RepositoryProvider.isShared(selectedProjects[0])) return true;\n\nshould be replaced with line:\n\nif (RepositoryProvider.getProvider(selectedProjects[0]) \u003d\u003d null) return true;\n\nDo you agree with the proposed solution?\n\nP.S. Of course, I can include the code at the comment start into the Subversive plug-in, but I think small correction in the Team Services will be good idea.",
    "No, I don\u0027t agree with the proposal. The purpose of this isShared method is to perform a quick test that does not instantiate any providers. The change you propose could potentially result in too much work happening in the context menu popup which must be fast. We used to use the code you propose but had to change at one time due to performance problems. I still believe that what I described in comment 2 is the right way to go."
  ],
  "commentCreationDates": [
    "2007-08-04T23:51:32+02:00",
    "2007-08-05T00:01:15+02:00",
    "2007-08-07T22:40:03+02:00",
    "2007-08-09T13:34:07+02:00",
    "2007-08-09T14:33:33+02:00",
    "2007-08-09T15:43:51+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.team.core.TeamException",
      "message": "Could not instantiate provider org.tigris.subversion.subclipse.core.svnnature for project zDocs.",
      "elements": [
        {
          "method": "org.eclipse.team.core.RepositoryProvider.mapNewProvider",
          "source": "RepositoryProvider.java:165"
        },
        {
          "method": "org.eclipse.team.core.RepositoryProvider.mapExistingProvider",
          "source": "RepositoryProvider.java:235"
        },
        {
          "method": "org.eclipse.team.core.RepositoryProvider.getProvider",
          "source": "RepositoryProvider.java:507"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.isMappedToCVS",
          "source": "CVSLightweightDecorator.java:196"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.decorate",
          "source": "CVSLightweightDecorator.java:151"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "198877",
      "date": "2007-08-04T23:51:32+02:00",
      "product": "Subversive",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "198877",
  "bugId": "198877",
  "date": "2007-08-04T23:51:32+02:00",
  "product": "Subversive",
  "component": "UI",
  "severity": "major"
}