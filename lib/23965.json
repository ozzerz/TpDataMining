{
  "comments": [
    "Build 20020920\n\nAn exception breakpoint with \u0027Suspend VM\u0027 policy was hit. When I tried to \nresume the VM, I got the following exception and the resume failed.\n\n!MESSAGE com.sun.jdi.ObjectCollectedException occurred resuming VM.\n!STACK 0\ncom.sun.jdi.ObjectCollectedException\n        at org.eclipse.jdi.internal.MirrorImpl.defaultReplyErrorHandler\n(MirrorImpl.java:234)\n        at org.eclipse.jdi.internal.ThreadReferenceImpl.suspendCount\n(ThreadReferenceImpl.java:421)\n        at org.eclipse.jdi.internal.VirtualMachineImpl.primeThreadsForResume\n(VirtualMachineImpl.java:758)\n        at org.eclipse.jdi.internal.VirtualMachineImpl.resume\n(VirtualMachineImpl.java:669)\n        at org.eclipse.jdt.internal.debug.core.model.JDIDebugTarget.resume\n(JDIDebugTarget.java:963)\n        at org.eclipse.jdt.internal.debug.core.model.JDIDebugTarget.resume\n(JDIDebugTarget.java:936)\n        at org.eclipse.debug.internal.ui.actions.ResumeActionDelegate.doAction\n(ResumeActionDelegate.java:19)\n        at \norg.eclipse.debug.internal.ui.actions.AbstractDebugActionDelegate$1.run\n(AbstractDebugActionDelegate.java:99)\n        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:66)\n        at org.eclipse.debug.internal.ui.actions.AbstractDebugActionDelegate.run\n(AbstractDebugActionDelegate.java:94)\n        at org.eclipse.ui.internal.PluginAction.runWithEvent\n(PluginAction.java:210)\n        at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:407)\n        at org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:361)\n        at org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:352)\n        at \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:47)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1622)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1368)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1256)\n        at org.eclipse.ui.internal.Workbench.run(Workbench.java:1239)\n        at org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:775)\n        at org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:247)\n        at org.eclipse.core.launcher.Main.run(Main.java:703)\n        at org.eclipse.core.launcher.Main.main(Main.java:539)\n\nSeveral attempts to resume the VM failed the same way. I had to terminate the \nVM.\n\nI could not reproduce this problem later on.",
    "Forgot to say the target VM was a 1.4.1 VM",
    "Jared, you were looking at this code recently. From the trace, it looks like \none of the threads in the thread collection has been garbage collected. Any \nthoughts?",
    "I agree with your analysis, but I can\u0027t imagine why the thread is getting \nGC\u0027ed.",
    "The object cache never removes objects. Thus, threads which have come/gone/gc\u0027d \nwill throw this exception when we attempt to retrieve their suspend count. I \nwas able to fabriate an example:\n\n\tpublic void testCapacity() throws Exception {\n\t\tRunnable r \u003d new Runnable() {\n\t\t\tpublic void run(){} // breakpoint - suspend VM\n\t\t};\n\t\tnew Thread(r).start();\n\t\tThread.sleep(2000);\n\t\tSystem.gc();\n\t\tint size\u003d fFull.size(); // breakpoint - suspend VM\n\t\tfor (int i\u003d 0; i \u003c 100; i++)\n\t\t\tfFull.addElement(new Integer(i));\n\t\tassertTrue(fFull.size() \u003d\u003d 100+size);\n\t}\n\nRather than using the cache, we should use #allThreads()",
    "Fixed.",
    "Please verify, Jared.",
    "Verified."
  ],
  "commentCreationDates": [
    "2002-09-23T12:11:22+02:00",
    "2002-09-23T12:13:21+02:00",
    "2002-09-23T15:12:25+02:00",
    "2002-09-23T16:47:51+02:00",
    "2002-09-25T21:47:45+02:00",
    "2002-09-25T21:56:23+02:00",
    "2002-09-25T21:56:34+02:00",
    "2002-10-04T17:52:25+02:00"
  ],
  "traces": [
    {
      "exceptionType": "com.sun.jdi.ObjectCollectedException",
      "elements": [
        {
          "method": "org.eclipse.jdi.internal.MirrorImpl.defaultReplyErrorHandler",
          "source": "MirrorImpl.java:234"
        },
        {
          "method": "org.eclipse.jdi.internal.ThreadReferenceImpl.suspendCount",
          "source": "ThreadReferenceImpl.java:421"
        },
        {
          "method": "org.eclipse.jdi.internal.VirtualMachineImpl.primeThreadsForResume",
          "source": "VirtualMachineImpl.java:758"
        },
        {
          "method": "org.eclipse.jdi.internal.VirtualMachineImpl.resume",
          "source": "VirtualMachineImpl.java:669"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIDebugTarget.resume",
          "source": "JDIDebugTarget.java:963"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIDebugTarget.resume",
          "source": "JDIDebugTarget.java:936"
        },
        {
          "method": "org.eclipse.debug.internal.ui.actions.ResumeActionDelegate.doAction",
          "source": "ResumeActionDelegate.java:19"
        },
        {
          "method": "org.eclipse.debug.internal.ui.actions.AbstractDebugActionDelegate$1.run",
          "source": "AbstractDebugActionDelegate.java:99"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:66"
        },
        {
          "method": "org.eclipse.debug.internal.ui.actions.AbstractDebugActionDelegate.run",
          "source": "AbstractDebugActionDelegate.java:94"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:210"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1622"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1368"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1256"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1239"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:775"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:247"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:703"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "23965",
      "date": "2002-09-23T12:11:22+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "23965",
  "bugId": "23965",
  "date": "2002-09-23T12:11:22+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}