{
  "comments": [
    "Using last weeks ibuild, I-I20050617-200506171814, I get the errors listed\nbellow while using the jsp editor. Whenever I edit a jsp page I get the Dirty\nRegions Error, and when saving the Updading JSP Index error appears.\n\n\nError 2005-06-21 10:48:08.18 An internal error occurred during: \"Updating JSP\nIndex\".\njava.lang.Error: Missing return statement in function\n\tat\norg.eclipse.jst.jsp.core.internal.java.jspel.JSPELParser.Expression(JSPELParser.java:82)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEL(JSPTranslator.java:1083)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEmbeddedJSPInAttribute(JSPTranslator.java:1166)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateXMLNode(JSPTranslator.java:1008)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateRegionContainer(JSPTranslator.java:787)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translate(JSPTranslator.java:684)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslationAdapter.getJSPTranslation(JSPTranslationAdapter.java:132)\n\tat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.getJSPTranslation(JSPSearchDocument.java:112)\n\tat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.getPath(JSPSearchDocument.java:149)\n\tat\norg.eclipse.jst.jsp.core.internal.java.search.JavaSearchDocumentDelegate.\u003cinit\u003e(JavaSearchDocumentDelegate.java:30)\n\tat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.createSearchDocument(JSPSearchSupport.java:426)\n\tat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.addJspFile(JSPSearchSupport.java:320)\n\tat\norg.eclipse.jst.jsp.core.internal.java.search.JSPIndexManager$ProcessFilesJob.run(JSPIndexManager.java:238)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\n\nError 2005-06-21 10:46:58.831 An internal error occurred during: \"Processing\nDirty Regions\".\njava.lang.Error: Missing return statement in function\n\tat\norg.eclipse.jst.jsp.core.internal.java.jspel.JSPELParser.Expression(JSPELParser.java:82)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEL(JSPTranslator.java:1083)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEmbeddedJSPInAttribute(JSPTranslator.java:1166)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateXMLNode(JSPTranslator.java:1008)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateRegionContainer(JSPTranslator.java:787)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslator.translate(JSPTranslator.java:684)\n\tat\norg.eclipse.jst.jsp.core.internal.java.JSPTranslationAdapter.getJSPTranslation(JSPTranslationAdapter.java:132)\n\tat\norg.eclipse.jst.jsp.ui.internal.reconcile.ReconcileStepForJspTranslation.reconcileModel(ReconcileStepForJspTranslation.java:82)\n\tat\norg.eclipse.jface.text.reconciler.AbstractReconcileStep.reconcile(AbstractReconcileStep.java:96)\n\tat\norg.eclipse.wst.sse.ui.internal.reconcile.AbstractStructuredTextReconcilingStrategy.reconcile(AbstractStructuredTextReconcilingStrategy.java:377)\n\tat\norg.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor.process(StructuredRegionProcessor.java:132)\n\tat\norg.eclipse.wst.sse.ui.internal.reconcile.DirtyRegionProcessor.run(DirtyRegionProcessor.java:415)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)",
    "Ted ... I\u0027m not sure what the parsing problem is, per se, but see a couple of\nissues here. \n\nThe JSPELParser should never throw \"Error\" since\n * An \u003ccode\u003eError\u003c/code\u003e is a subclass of \u003ccode\u003eThrowable\u003c/code\u003e \n * that indicates serious problems that a reasonable application \n * should not try to catch.\n\nIdeally, the JSPELParser should never even throw an Exception ... but always\nparse the input, even is the result is \"UNKNOWN\" token, or \"EXCEPTION_CAUSING\"\ntoken. That way, the validator could display a better message ... such as \"This\nEL statement was so much in error it could not even be parsed\" :)\n\n[these two issues could be addressed in two steps if necessary, the \"Error\nthrowing\" one being the worst ... improved \"illformed handling\" could come second. \n\nDarryl ... if you have some file that could be attached that easily shows the \nproblem, that would be helpful. \n",
    "Marking as P2 to indicate the \"Error throwing\" part should be fixed for \nthis week\u0027s I-build. \n",
    "Created an attachment (id\u003d23656)\njsp that causes errors\n\nDeleting line by line from the jsp that would throw the errors saving each to\nsee it the error still existed. I determined the line that was cause it is: \n\n\u003cc:set var\u003d\"browseColor\" value\u003d\"${ ((loopStatus.index mod 2) eq 0) ? \u0027#eee\u0027 :\n#ddd\u0027}\"/\u003e\n",
    "(From update of attachment 23656)\n\u003c%@ taglib prefix\u003d\"c\" uri\u003d\"http://java.sun.com/jsp/jstl/core\" %\u003e\n\u003chtml\u003e\n\u003chead\u003e\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\n\u003cc:set var\u003d\"browseColor\" value\u003d\"${ ((loopStatus.index mod 2) eq 0) ? \u0027#eee\u0027 :\n\u0027#ddd\u0027}\"/\u003e\n\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n",
    "(In reply to comment #4)\n\u003e (From update of attachment 23656 [edit])\n\u003e \u003c%@ taglib prefix\u003d\"c\" uri\u003d\"http://java.sun.com/jsp/jstl/core\" %\u003e\n\u003e \u003chtml\u003e\n\u003e \u003chead\u003e\u003c/head\u003e\n\u003e \u003cbody\u003e\n\u003e \u003cp\u003e\n\u003e \u003cc:set var\u003d\"browseColor\" value\u003d\"${ ((loopStatus.index mod 2) eq 0) ? \u0027#eee\u0027 :\n\u003e \u0027#ddd\u0027}\"/\u003e\n\u003e \u003c/p\u003e\n\u003e \u003c/body\u003e\n\u003e \u003c/html\u003e\n\u003e \n\nthis is the correct jsp that causes the error, not the one first one that was\nattached",
    "Reassigning back to Ted",
    "Created an attachment (id\u003d23679)\nPatch to the grammar and generated files which fixes this issue.\n\nThe exceptions normally thrown as a result of a parse are caught and translated\ninto annotations or markers as appropriate in the context.\n\nThis particular problem is JavaCC reporting a programming error at runtime that\nreally should be reported at compile time.\n\nThe attached patch fixes the problem.  It, however, does not remove the throw\nstatement.  Since it\u0027s unreachable now, it\u0027s of no harm.  I\u0027ve decided not to\nadd to the post processing script as growing that too big seems like a bad\nidea.",
    "Thanks Ted, I\u0027ve committed your patch and will release for I-build on 6/22. \n\nDarryl, you might want to wait till the final I-build of this week (probably\n6/24) to verify ... I\u0027m not sure current (today\u0027s) I-builds are running well.\n[And, BTW, I could not actually reproduce the bug ... I assume because I don\u0027t\nhave \"complete project\" set up to \u0027run\u0027 it.]\n\nThanks all.  ",
    "Created an attachment (id\u003d23694)\nProject that displays the error\n\nWhen you open WebContent/test.jsp in a few seconds it gives the Error\nProcessing Dirty, and if you save the test.jsp it gives the Error Updating JSP\nIndex\n\nthis is still with last weeks Ibuild",
    "I could not get the supplied project to open with I20050622 08:31 (-0400).  \nHowever, I was able to copy the jsp in question into a newly created project \nand verify that it parses correctly.  When I type garbage into the EL \nexpression to create a syntax error, both annotations and markers are correctly \ndisplayed.  ",
    "works on 0.7 M5"
  ],
  "commentCreationDates": [
    "2005-06-21T16:55:32+02:00",
    "2005-06-21T18:42:21+02:00",
    "2005-06-21T19:05:39+02:00",
    "2005-06-21T21:04:04+02:00",
    "2005-06-21T21:06:37+02:00",
    "2005-06-21T21:08:35+02:00",
    "2005-06-21T21:14:34+02:00",
    "2005-06-22T03:38:27+02:00",
    "2005-06-22T05:36:14+02:00",
    "2005-06-22T06:11:17+02:00",
    "2005-06-22T19:23:25+02:00",
    "2005-07-06T14:56:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Error",
      "message": "Missing return statement in function",
      "elements": [
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.jspel.JSPELParser.Expression",
          "source": "JSPELParser.java:82"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEL",
          "source": "JSPTranslator.java:1083"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEmbeddedJSPInAttribute",
          "source": "JSPTranslator.java:1166"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateXMLNode",
          "source": "JSPTranslator.java:1008"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateRegionContainer",
          "source": "JSPTranslator.java:787"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translate",
          "source": "JSPTranslator.java:684"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslationAdapter.getJSPTranslation",
          "source": "JSPTranslationAdapter.java:132"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.getJSPTranslation",
          "source": "JSPSearchDocument.java:112"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.getPath",
          "source": "JSPSearchDocument.java:149"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JavaSearchDocumentDelegate.\u003cinit\u003e",
          "source": "JavaSearchDocumentDelegate.java:30"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.createSearchDocument",
          "source": "JSPSearchSupport.java:426"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.addJspFile",
          "source": "JSPSearchSupport.java:320"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPIndexManager$ProcessFilesJob.run",
          "source": "JSPIndexManager.java:238"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "101062",
      "date": "2005-06-21T16:55:32+02:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.Error",
      "message": "Missing return statement in function",
      "elements": [
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.jspel.JSPELParser.Expression",
          "source": "JSPELParser.java:82"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEL",
          "source": "JSPTranslator.java:1083"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateEmbeddedJSPInAttribute",
          "source": "JSPTranslator.java:1166"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateXMLNode",
          "source": "JSPTranslator.java:1008"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateRegionContainer",
          "source": "JSPTranslator.java:787"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translate",
          "source": "JSPTranslator.java:684"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslationAdapter.getJSPTranslation",
          "source": "JSPTranslationAdapter.java:132"
        },
        {
          "method": "org.eclipse.jst.jsp.ui.internal.reconcile.ReconcileStepForJspTranslation.reconcileModel",
          "source": "ReconcileStepForJspTranslation.java:82"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconcileStep.reconcile",
          "source": "AbstractReconcileStep.java:96"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.AbstractStructuredTextReconcilingStrategy.reconcile",
          "source": "AbstractStructuredTextReconcilingStrategy.java:377"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor.process",
          "source": "StructuredRegionProcessor.java:132"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.reconcile.DirtyRegionProcessor.run",
          "source": "DirtyRegionProcessor.java:415"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "101062",
      "date": "2005-06-21T16:55:32+02:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    }
  ],
  "groupId": "101062",
  "bugId": "101062",
  "date": "2005-06-21T16:55:32+02:00",
  "product": "Web Tools",
  "component": "jst.jsp",
  "severity": "major"
}