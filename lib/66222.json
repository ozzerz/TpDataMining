{
  "comments": [
    "The following error message and stack trace is generated when compiling the three files appended at \nthe very end. This compiles fine in AspectJ 1.1.1. I don\u0027t think I have an older BCEL version in my \nclasspath which might be causing this. The Java files are simplified as much as possible.\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\ntrouble in: \npublic class Point3D extends Point2D:\n  float z\n  private static final org.aspectj.lang.JoinPoint$StaticPart ajc$tjp_0\n  public void \u003cinit\u003e(float, float, float):\n                    ALOAD_0     // Point3D this   (line 5)\n                    FLOAD_1     // float arg0\n                    FLOAD_2     // float _y\n                    INVOKESPECIAL Point2D.\u003cinit\u003e (FF)V\n    constructor-execution(void Point3D.\u003cinit\u003e(float, float, float))\n    |               ALOAD_0     // Point3D this   (line 6)\n    |               FLOAD_3     // float _z\n    | field-set(float Point3D.z)\n    | |             PUTFIELD Point3D.z F\n    | field-set(float Point3D.z)\n    |               RETURN   (line 7)\n    constructor-execution(void Point3D.\u003cinit\u003e(float, float, float))\n  end public void \u003cinit\u003e(float, float, float)\n\n  public void move(float, float, float):\n    method-execution(void Point3D.move(float, float, float))\n    |               ALOAD_0     // Point3D this   (line 10)\n    |               FLOAD_1     // float dx\n    |               FLOAD_2     // float dy\n    |               INVOKESPECIAL Point2D.move (FF)V\n    |               ALOAD_0     // Point3D this   (line 11)\n    |               DUP\n    | field-get(float Point3D.z)\n    | |             GETFIELD Point3D.z F\n    | field-get(float Point3D.z)\n    |               FLOAD_3     // float dz\n    |               FADD\n    | field-set(float Point3D.z)\n    | |             PUTFIELD Point3D.z F\n    | field-set(float Point3D.z)\n    |               RETURN   (line 12)\n    method-execution(void Point3D.move(float, float, float))\n  end public void move(float, float, float)\n\n  public static void main(String[]):\n    method-execution(void Point3D.main(java.lang.String[]))\n    |               NEW Point3D   (line 15)\n    |               DUP\n    |               FCONST_1\n    |               FCONST_2\n    |               LDC 3.0\n    | constructor-call(void Point3D.\u003cinit\u003e(float, float, float))\n    | |             INVOKESPECIAL Point3D.\u003cinit\u003e (FFF)V\n    | constructor-call(void Point3D.\u003cinit\u003e(float, float, float))\n    |               ASTORE_1\n    |               ALOAD_1     // Point3D p3D   (line 17)\n    |               FCONST_1\n    |               FCONST_1\n    |               FCONST_1\n    |               FSTORE_2\n    |               FSTORE_3\n    |               FSTORE 4\n    |               ASTORE 5\n    | method-call(void Point3D.move(float, float, float))\n    | |             INVOKEVIRTUAL Point3D.move (FFF)V\n    | method-call(void Point3D.move(float, float, float))\n    |               RETURN   (line 18)\n    method-execution(void Point3D.main(java.lang.String[]))\n  end public static void main(String[])\n\nend public class Point3D\n/Users/ulf/Development/Java/Code/Misc/Point/bug/Point3D.java error\nInternal compiler error\njava.lang.NoSuchMethodError: org.apache.bcel.generic.InstructionFactory.createNewArray(Lorg/apache/\nbcel/generic/Type;S)Lorg/apache/bcel/generic/Instruction;\n        at org.aspectj.weaver.bcel.BcelShadow.makeArgsObjectArray(BcelShadow.java:1032)\n        at org.aspectj.weaver.bcel.BcelShadow.createThisJoinPoint(BcelShadow.java:980)\n        at org.aspectj.weaver.bcel.BcelShadow.initializeThisJoinPoint(BcelShadow.java:890)        at \norg.aspectj.weaver.bcel.BcelShadow.prepareForMungers(BcelShadow.java:260)\n        at org.aspectj.weaver.Shadow.implement(Shadow.java:324)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.implement(BcelClassWeaver.java:1145)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:357)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:80)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:724)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:689)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:615)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:563)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:239)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:\n114)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:\n601)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:160)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:94)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:280)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:217)\n        at org.aspectj.tools.ajc.Main.main(Main.java:79)\n\n(no source information available)\nABORT\n\nException thrown from AspectJ 1.2\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack, \ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\norg.apache.bcel.generic.InstructionFactory.createNewArray(Lorg/apache/bcel/generic/Type;S)Lorg/\napache/bcel/generic/Instruction;\norg.apache.bcel.generic.InstructionFactory.createNewArray(Lorg/apache/bcel/generic/Type;S)Lorg/\napache/bcel/generic/Instruction;\njava.lang.NoSuchMethodError: org.apache.bcel.generic.InstructionFactory.createNewArray(Lorg/apache/\nbcel/generic/Type;S)Lorg/apache/bcel/generic/Instruction;\n        at org.aspectj.weaver.bcel.BcelShadow.makeArgsObjectArray(BcelShadow.java:1032)\n        at org.aspectj.weaver.bcel.BcelShadow.createThisJoinPoint(BcelShadow.java:980)\n        at org.aspectj.weaver.bcel.BcelShadow.initializeThisJoinPoint(BcelShadow.java:890)        at \norg.aspectj.weaver.bcel.BcelShadow.prepareForMungers(BcelShadow.java:260)\n        at org.aspectj.weaver.Shadow.implement(Shadow.java:324)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.implement(BcelClassWeaver.java:1145)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:357)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:80)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:724)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:689)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:615)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:563)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:239)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:\n114)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:\n601)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:160)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:94)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n        at org.aspectj.tools.ajc.Main.run(Main.java:280)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:217)\n        at org.aspectj.tools.ajc.Main.main(Main.java:79)\n\n\n1 fail|abort, 1 error\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\naspect MoveAspect {\n\n  pointcut move3D (Point3D p, float x, float y, float z):\n    (call(void Point3D.move(float, float, float)) \u0026\u0026 args(x, y, z) \u0026\u0026 target(p)); \n\n  before (Point3D p, float x, float y, float z): move3D(p,x,y,z) {\n    System.out.println(\"Entering: \" + thisJoinPoint);\n    System.out.println(\"Moving \" + p + \" by [\" + x + \", \" + y + \", \" + z + \"]\");\n  }\n}\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\npublic class Point2D {\n\tfloat\tx,y;\n\n\tpublic Point2D (float _x, float _y) {\n\t\tx \u003d _x;\n\t\ty \u003d _y;\n\t}\n\n\tpublic void move (float dx, float dy) {\n\t\tx +\u003d dx;\n\t\ty +\u003d dy;\n\t}\n}\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\npublic class Point3D extends Point2D {\n\tfloat\tz;\n\n\tpublic Point3D (float _x, float _y, float _z) {\n\t\tsuper(_x, _y);\n\t\tz \u003d _z;\n\t}\n\n\tpublic void move (float dx, float dy, float dz) {\n\t\tsuper.move(dx, dy);\n\t\tz +\u003d dz;\n\t}\n\n\tpublic static void main (String argv[]) {\n\t\tPoint3D p3D \u003d new Point3D(1.0f, 2.0f, 3.0f);\n\n\t\tp3D.move(1.0f, 1.0f, 1.0f);\n\t}\n}",
    "We have found that some versions of Java have used a version of BCEL in their\nimplementation.  For example I have an IBM JVM that contains bcel classes -\nhowever, it is only older JVMs that have this problem.  All recent JVMs that we\nhave tried do not have BCEL classes in them.  To confirm if you have this\nproblem, use the guidance I put in bug 59921 which I\u0027ll quote here:\n\n---\nYou can check if this is the problem you are seeing by going to the \ncommand line, unsetting your classpath and running (with no aspectj stuff\nanywhere on your classpath):\n\njavap org.apache.bcel.generic.InstructionFactory\n\nIf that runs, you have a JVM that includes BCEL.  If the version of BCEL \nis \u0027old\u0027 then the return type of the createNewArray method in the javap output \nwill be AllocationInstruction.\n\nIf this is happening to you, upgrade your JVM to a more recent version and it \nshould be fixed - i.e. the javap command above should *fail*!  Whilst you have \na JVM with that old version of BCEL in, aspectj will never be able to load its \nmore recent versions of the bcel classes.\n---\n",
    "I have tested this, and I do not have an old version of BCEL in my classpath. java -version reports the \nfollowing (this is on Mac OS 10.3.3):\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_03-117.1)\nJava HotSpot(TM) Client VM (build 1.4.2-34, mixed mode)",
    "Are you able to download a newer version of Java 1.4.2 and confirm this is still\na problem?  I\u0027ve only seen this error when a version of BCEL was found that was\nolder than the variant in AspectJ.",
    "Turns out my JVM doesn\u0027t have BCEL in it, but Xalan does, and it was part of my extensions. I had \nchecked some usual suspects I thought might need BCEL, but Xalan hadn\u0027t occurred to me. Thanks for \npointing me in the right direction, Andy. I\u0027m resolving this bug to also be a duplicate of 61374.\n\n*** This bug has been marked as a duplicate of 61374 ***",
    "Fix released as part of AspectJ 1.2.1"
  ],
  "commentCreationDates": [
    "2004-06-08T22:45:32+02:00",
    "2004-06-09T09:18:43+02:00",
    "2004-06-10T21:37:01+02:00",
    "2004-07-26T09:35:11+02:00",
    "2004-07-26T21:39:55+02:00",
    "2004-10-21T10:31:08+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "org.apache.bcel.generic.InstructionFactory.createNewArray(Lorg/apache/ bcel/generic/Type;S)Lorg/apache/bcel/generic/Instruction;",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.makeArgsObjectArray",
          "source": "BcelShadow.java:1032"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.createThisJoinPoint",
          "source": "BcelShadow.java:980"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.initializeThisJoinPoint",
          "source": "BcelShadow.java:890"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.prepareForMungers",
          "source": "BcelShadow.java:260"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implement",
          "source": "Shadow.java:324"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.implement",
          "source": "BcelClassWeaver.java:1145"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:357"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:80"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:724"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:689"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:615"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:563"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:239"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java: 114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java: 601"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:160"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:94"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:280"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:79"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "66222",
      "duplicateId": "61374",
      "date": "2004-06-08T22:45:32+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "org.apache.bcel.generic.InstructionFactory.createNewArray(Lorg/apache/ bcel/generic/Type;S)Lorg/apache/bcel/generic/Instruction;",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.makeArgsObjectArray",
          "source": "BcelShadow.java:1032"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.createThisJoinPoint",
          "source": "BcelShadow.java:980"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.initializeThisJoinPoint",
          "source": "BcelShadow.java:890"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.prepareForMungers",
          "source": "BcelShadow.java:260"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implement",
          "source": "Shadow.java:324"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.implement",
          "source": "BcelClassWeaver.java:1145"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:357"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:80"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:724"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:689"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:615"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:563"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompilerAdapter.java:239"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling",
          "source": "AjCompilerAdapter.java: 114"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:376"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java: 601"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:160"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:94"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:280"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:217"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:79"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "66222",
      "duplicateId": "61374",
      "date": "2004-06-08T22:45:32+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "61374",
  "bugId": "66222",
  "duplicateId": "61374",
  "date": "2004-06-08T22:45:32+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}