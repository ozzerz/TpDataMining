{
  "comments": [
    "Using 200405281200, when I debug and I try to display a variable in the variable\nview, I get:\n\njava.lang.NullPointerException\nat org.eclipse.swt.graphics.TextLayout.reorder(TextLayout.java:1463)\nat org.eclipse.swt.graphics.TextLayout.computeRuns(TextLayout.java:334)\nat org.eclipse.swt.graphics.TextLayout.getLineOffsets(TextLayout.java:936)\nat org.eclipse.swt.custom.WrappedContent.wrapLineRange(WrappedContent.java:448)\nat org.eclipse.swt.custom.WrappedContent.wrapLines(WrappedContent.java:476)\nat org.eclipse.swt.custom.WrappedContent.wrapLines(WrappedContent.java:462)\nat org.eclipse.swt.custom.StyledText$WordWrapCache.\u003cinit\u003e(StyledText.java:1452)\nat org.eclipse.swt.custom.StyledText.getLineCache(StyledText.java:3774)\nat org.eclipse.swt.custom.StyledText.calculateContentWidth(StyledText.java:1919)\nat org.eclipse.swt.custom.StyledText.reset(StyledText.java:6303)\nat org.eclipse.swt.custom.StyledText.handleTextSet(StyledText.java:5239)\nat org.eclipse.swt.custom.StyledText$6.textSet(StyledText.java:4714)\nat\norg.eclipse.jface.text.DefaultDocumentAdapter.fireTextSet(DefaultDocumentAdapter.java:324)\nat\norg.eclipse.jface.text.DefaultDocumentAdapter.documentChanged(DefaultDocumentAdapter.java:247)\nat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2(AbstractDocument.java:663)\nat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged(AbstractDocument.java:638)\nat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged(AbstractDocument.java:623)\nat\norg.eclipse.jface.text.AbstractDocument.fireDocumentChanged(AbstractDocument.java:698)\nat org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:989)\nat\norg.eclipse.debug.internal.ui.views.variables.VariablesView$5.run(VariablesView.java:1026)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:106)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2693)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2385)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:334)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:128)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:324)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\nat org.eclipse.core.launcher.Main.run(Main.java:638)\nat org.eclipse.core.launcher.Main.main(Main.java:622)\n\nI use a JDK1.4.2_04 vm.\n\njava.vm.vendor\u003dSun Microsystems Inc.\njava.vm.version\u003d1.4.2_04-b05",
    "It seems to work fine for variables that are not an array type. For array of\nprimitive types, it is ok, but for array of objects or char[][] it fails. I am\nbuilding a small test case.",
    "moving to SWT",
    "Moving to SWT. The NPE looks like a problem in SWT. We have not changed our \ncode here, and if we were doing something wrong, I\u0027d expect an out of bounds \nor illegal argument exception.",
    "I cannot build an example that fails, but if I try to debug running the compiler\nI get it each time.",
    "The bug is in the wrapping of text.\n\nTry to debug the following test case:\n\npublic class Bug64597 {\n\n\tstatic class Test {\n\t\tInteger value;\n\t\t\n\t\tTest(int i) {\n\t\t\tthis.value \u003d new Integer(i);\n\t\t}\n\t\t\n\t\tpublic String toString() {\n\t\t\tif (this.value !\u003d null) {\n\t\t\t\treturn \"----------------------------------------------\" +\nString.valueOf(this.value);\n\t\t\t}\n\t\t\treturn super.toString();\n\t\t}\n\t}\n\t\n\tstatic Test[][] initializeTestArray(int length) {\n\t\tTest[] tab \u003d new Test[length];\n\t\tfor (int i \u003d 0; i \u003c length; i++) {\n\t\t\ttab[i] \u003d new Test(i);\n\t\t}\n\t\treturn new Test[][] { tab };\n\t}\n\tpublic static void main(String[] args) {\n\t\tTest[][] tab \u003d initializeTestArray(100);\n\t\tfor (int i \u003d 0, max \u003d tab.length; i \u003c max; i++) {\n\t\t\tSystem.out.println(tab[i]); // PUT A BREAKPOINT HERE\n\t\t}\n\t}\n}\n\nSet the variable view to wrap text in detail pane. It will fail. If you don\u0027t\nwrap, it doesn\u0027t fail.\n",
    "Note that this was also the case in the I20040528-0010.",
    "As far as I can tell, it wasn\u0027t there in yesterday 1200 build.",
    "\n\n*** This bug has been marked as a duplicate of 64518 ***",
    "*** Bug 64601 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2004-05-28T19:56:26+02:00",
    "2004-05-28T19:58:46+02:00",
    "2004-05-28T20:07:05+02:00",
    "2004-05-28T20:08:00+02:00",
    "2004-05-28T20:08:55+02:00",
    "2004-05-28T20:19:00+02:00",
    "2004-05-28T20:23:03+02:00",
    "2004-05-28T20:30:38+02:00",
    "2004-05-28T20:32:03+02:00",
    "2004-05-28T20:35:38+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.swt.graphics.TextLayout.reorder",
          "source": "TextLayout.java:1463"
        },
        {
          "method": "org.eclipse.swt.graphics.TextLayout.computeRuns",
          "source": "TextLayout.java:334"
        },
        {
          "method": "org.eclipse.swt.graphics.TextLayout.getLineOffsets",
          "source": "TextLayout.java:936"
        },
        {
          "method": "org.eclipse.swt.custom.WrappedContent.wrapLineRange",
          "source": "WrappedContent.java:448"
        },
        {
          "method": "org.eclipse.swt.custom.WrappedContent.wrapLines",
          "source": "WrappedContent.java:476"
        },
        {
          "method": "org.eclipse.swt.custom.WrappedContent.wrapLines",
          "source": "WrappedContent.java:462"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$WordWrapCache.\u003cinit\u003e",
          "source": "StyledText.java:1452"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getLineCache",
          "source": "StyledText.java:3774"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.calculateContentWidth",
          "source": "StyledText.java:1919"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.reset",
          "source": "StyledText.java:6303"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleTextSet",
          "source": "StyledText.java:5239"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText$6.textSet",
          "source": "StyledText.java:4714"
        },
        {
          "method": "org.eclipse.jface.text.DefaultDocumentAdapter.fireTextSet",
          "source": "DefaultDocumentAdapter.java:324"
        },
        {
          "method": "org.eclipse.jface.text.DefaultDocumentAdapter.documentChanged",
          "source": "DefaultDocumentAdapter.java:247"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2",
          "source": "AbstractDocument.java:663"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:638"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:623"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentChanged",
          "source": "AbstractDocument.java:698"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.replace",
          "source": "AbstractDocument.java:989"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.VariablesView$5.run",
          "source": "VariablesView.java:1026"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2693"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2385"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1363"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:253"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:334"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:128"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:638"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:622"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "64597",
      "duplicateId": "64518",
      "date": "2004-05-28T19:56:26+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "blocker"
    }
  ],
  "groupId": "64518",
  "bugId": "64597",
  "duplicateId": "64518",
  "date": "2004-05-28T19:56:26+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "blocker"
}