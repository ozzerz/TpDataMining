{
  "comments": [
    "I have the following advice\n\n\tObject around() : callingThirdParty() \n\t\t\u0026\u0026 ! call(java.lang.Throwable+.*(..))  // cause  trouble\n\t\t\u0026\u0026 ! call(java.util.logging..*.*(..))  // cause  trouble\n\t\t\u0026\u0026 ! call(String toString())\n\t\t\u0026\u0026 ! call(void log(..)) {  ... }\n\nI am not sure whether the syntax is allowed, but it should not throw exception \nis a syntax error is detected.\n\nIf I removed both troublsome lines, the compilation would be successful. Either \nof the lines will cause the following exception. Checked bug rebort database \nand found one bug from the same line of code, but the fix comment seems totally \ndifferent.\n\ncompiling D:\\WebSphere\\AppServer60\\aspects\\trace\\TraceMyClasses.java\n\nABORT\n\nException thrown from AspectJ 1.2.1\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n        at org.aspectj.weaver.patterns.PerFromSuper.concretize(PerFromSuper.ja\n:59)\n        at org.aspectj.weaver.CrosscuttingMembers.setPerClause(CrosscuttingMem\nrs.java:207)\n        at org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers(Resolve\nypeX.java:329)\n        at org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect(Crossc\ntingMembersSet.java:57)\n        at org.aspectj.weaver.bcel.BcelWeaver.prepareForWeave(BcelWeaver.java:\n3)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompil\nAdapter.java:226)\n        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling\njCompilerAdapter.java:118)\n        at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Comp\ner.java:383)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompil\nion(AjBuildManager.java:680)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBui\nManager.java:168)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(Aj\nildManager.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:109)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)\n        at org.aspectj.tools.ajc.Main.run(Main.java:291)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:227)\n        at org.aspectj.tools.ajc.Main.main(Main.java:80)\n\nDumping to ajcore.20050311.233710.655.txt\n\n1 fail|abort",
    "This is a definite bug, you should never see an NPE coming out of the compiler.\nIf you change the advice to:\n\nObject around() : callingThirdParty() \n\t\t\u0026\u0026 ! call(* java.lang.Throwable+.*(..))  // cause  trouble\n\t\t\u0026\u0026 ! call(* java.util.logging..*.*(..))  // cause  trouble\n\t\t\u0026\u0026 ! call(String toString())\n\t\t\u0026\u0026 ! call(void log(..)) {  ... }\n\ndoes your program now compile correctly or do you see the same / similar error?\n (There is a syntax error in your pointcut expression - you need to specify a\nreturn type for the first two calls, but that should give you a compilation\nerror, not an NPE...)",
    "scheduling for investigation in aj5m3",
    "Hmmm.\nI created this test program:\n\naspect C {\n\n        Object around() : callingThirdParty()\n                \u0026\u0026 ! call(java.lang.Throwable+.*(..))  // cause  trouble\n                \u0026\u0026 ! call(java.util.logging..*.*(..))  // cause  trouble\n                \u0026\u0026 ! call(String toString())\n                \u0026\u0026 ! call(void log(..)) {   }\n\n  public void log() { }\n}\n\nand under 1.2/1.2.1/1.5.0M2 I always got the kind of error you would normally\nexpect for getting the call sig wrong:\n\nK:\\ws\\aspectj_ws\\tests\\bugs150\\PR87297.aj:4 [error] Syntax error on token \".\",\n\"expected name pattern\" expected\n\u0026\u0026 ! call(java.lang.Throwable+.*(..))  // cause  trouble\n\nGiven the location of the NPE, I think there is also another part of the aspect\ninvolved in the failure - did you have a per clause defined for it?\n\nThe failure appears to happen when there is a problem with the perclause - I can\nimagine a situation where the syntax error for your pointcut occurs and it\nleaves the perclause in a funny state which then fails NPE - but I can\u0027t imagine\nwhat kind of perclause could be the problem?  I don\u0027t want to put some guards in\nfor the NPE without knowing the failing per clause that causes the problem.",
    "still waiting to hear on the perclause...",
    "closing this bug out for now as per andy\u0027s last two comments. Please reopen with reproduceable test case \nif it is still an issue for you.... thanks, A. "
  ],
  "commentCreationDates": [
    "2005-03-14T14:45:38+01:00",
    "2005-03-14T17:30:15+01:00",
    "2005-03-23T14:57:12+01:00",
    "2005-05-09T16:11:47+02:00",
    "2005-08-24T16:07:29+02:00",
    "2005-10-28T12:19:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.patterns.PerFromSuper.concretize",
          "source": "PerFromSuper.ja :59"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembers.setPerClause",
          "source": "CrosscuttingMem rs.java:207"
        },
        {
          "method": "org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers",
          "source": "Resolve ypeX.java:329"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect",
          "source": "Crossc tingMembersSet.java:57"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.prepareForWeave",
          "source": "BcelWeaver.java: 3"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave",
          "source": "AjCompil Adapter.java:226"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "87927",
      "date": "2005-03-14T14:45:38+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "87927",
  "bugId": "87927",
  "date": "2005-03-14T14:45:38+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}