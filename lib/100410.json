{
  "comments": [
    "[From a discussion on news:eclipse.webtools]\n   This bug has been encountered while testing with Generic Servers only - it\nmay exist with other server types (Tomcat/Geronimo) too, I havn\u0027t had a chance\nto verify with them)\n\n   Mismatch between the runtime-id in the .runtime file, and configured servers\nin the workspace can render the project undeployable (with NPEs occurring\nthroughout the WTP code as it cannot correlate a runtime to a server).\n    These mismatches can arise (under some conditions) if the server runtime\nconfiguration is changed in Eclipse - upon save the runtime name is changed (an\nindex value is added or incremented).  I believe the code attempts to change\n.runtime files but it does not succeed.  Of course the .runtime can also\nmanually be edited (outside the workspace), or shared via CVS.  On a number of\noccasions, I\u0027ve had to create new workspaces in order to get a project\ndeployable again.\n    Bug 97475 is somewhat related to this - although reported to highlight a\ndifferent issue, I think the same underlying problem is responsible.\n\n  It would be great if WTP handled this better - possibly prompting the user for\nan alternative runtime target in some way or at least marking the error that\nentry in the .runtime file does not correlate to any workbench server runtime\nproject very well. \n  Would it be better of the \"runtime-id\" element correlated to the runtimeType\nextension \u0027id\u0027 attribute value, rather than a string that is derived from the\nruntimeType \u0027name\u0027 attribute?    My runtimeType extension\u0027s name attributes is\n\"Cape Clear 6 Runtime (Local)\" and the \u0027runtime-id\u0027 attribute in a related\nproject .runtime file gets generated (by the New Flexible Java Project wizard)\nas \u0027Cape Clear 6 Runtime (Local)(Generic)\u0027.  (Note: the word \"(Generic)\" is\nappended for some reason.  \n  Lastly, it appears that it if a module is removed from a project, some state\nin state in .metadata\\.plugins\\org.eclipse.wst.server.core\\ can still list the\nmodule.  Perhaps the state should be validated when loaded and entries that do\nnot correlate to modules in the workspace should be immediately discarded?  At\nthe moment, the bad entries cause an error to appear during publishing (because\nit cannot publish the deleted module!)\n\n\nExamples of the NullPointers  - ultimately,\nServerCore.getProjectProperties(project).getRuntimeTarget().getRuntimeType() can\nreturn null but there is no guard:\n\njava.lang.NullPointerException\n\tat\norg.eclipse.jst.j2ee.ejb.internal.deployables.EJBDeployableFactory.isValidModule(EJBDeployableFactory.java:100)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.cacheModules(ProjectModuleFactoryDelegate.java:82)\n\tat\norg.eclipse.jst.j2ee.ejb.internal.deployables.EJBDeployableFactory.getModules(EJBDeployableFactory.java:81)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.updateProjects(ProjectModuleFactoryDelegate.java:213)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.fireGlobalEvents(ProjectModuleFactoryDelegate.java:199)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate$1.resourceChanged(ProjectModuleFactoryDelegate.java:159)\n\tat\norg.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1021)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)\n\tat\norg.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)\n\tat\norg.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:180)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:912)\n\tat\norg.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:45)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\njava.lang.NullPointerException\n\tat\norg.eclipse.jst.j2ee.internal.web.deployables.WebDeployableFactory.isValidModule(WebDeployableFactory.java:120)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.cacheModules(ProjectModuleFactoryDelegate.java:82)\n\tat\norg.eclipse.jst.j2ee.internal.web.deployables.WebDeployableFactory.getModules(WebDeployableFactory.java:102)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.updateProjects(ProjectModuleFactoryDelegate.java:213)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.fireGlobalEvents(ProjectModuleFactoryDelegate.java:199)\n\tat\norg.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate$1.resourceChanged(ProjectModuleFactoryDelegate.java:159)\n\tat\norg.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1021)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat\norg.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)\n\tat\norg.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)\n\tat\norg.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:180)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:912)\n\tat\norg.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:45)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)",
    "The NPE was caused by the jst.j2ee component, and I beleive it is already fixed.\nLeaving bug open to look at the other comments.",
    "Yes, the NPE is resolved as of M5. (leaving this bug open as Tim requested above)",
    "Hi John,\nI have hardened some of the server tools code, but the server runtime targetting\nhas since moved to the new facet runtimes support in wst.common. Most references\nto the server runtime target should already be removed or in the process of it.\n\nThe runtime name is used instead of an id because it is a specific runtime that\nwe\u0027re pointing to, and using anything other than the name makes it difficult to\nprovide team support, especially in multi-language teams. (FYI, the JDT uses the\nJRE name for the same reason. I didn\u0027t like it at first either, but eventually\nagreed it was the right thing to do)\n\nSince it looks like everything is either covered or changed, I\u0027m closing this\ndefect now. Please let me know if you still have any issues.",
    "This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). \n\n",
    "Closing."
  ],
  "commentCreationDates": [
    "2005-06-16T16:48:28+02:00",
    "2005-06-24T16:47:47+02:00",
    "2005-07-13T16:36:04+02:00",
    "2005-10-31T16:45:58+01:00",
    "2006-03-04T06:04:50+01:00",
    "2006-06-27T22:58:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.ejb.internal.deployables.EJBDeployableFactory.isValidModule",
          "source": "EJBDeployableFactory.java:100"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.cacheModules",
          "source": "ProjectModuleFactoryDelegate.java:82"
        },
        {
          "method": "org.eclipse.jst.j2ee.ejb.internal.deployables.EJBDeployableFactory.getModules",
          "source": "EJBDeployableFactory.java:81"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.updateProjects",
          "source": "ProjectModuleFactoryDelegate.java:213"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.fireGlobalEvents",
          "source": "ProjectModuleFactoryDelegate.java:199"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate$1.resourceChanged",
          "source": "ProjectModuleFactoryDelegate.java:159"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$2.run",
          "source": "NotificationManager.java:276"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1021"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:270"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:144"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastPostChange",
          "source": "Workspace.java:180"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:912"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:45"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "100410",
      "date": "2005-06-16T16:48:28+02:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.internal.web.deployables.WebDeployableFactory.isValidModule",
          "source": "WebDeployableFactory.java:120"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.cacheModules",
          "source": "ProjectModuleFactoryDelegate.java:82"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.web.deployables.WebDeployableFactory.getModules",
          "source": "WebDeployableFactory.java:102"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.updateProjects",
          "source": "ProjectModuleFactoryDelegate.java:213"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate.fireGlobalEvents",
          "source": "ProjectModuleFactoryDelegate.java:199"
        },
        {
          "method": "org.eclipse.wst.server.core.util.ProjectModuleFactoryDelegate$1.resourceChanged",
          "source": "ProjectModuleFactoryDelegate.java:159"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager$2.run",
          "source": "NotificationManager.java:276"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1021"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.notify",
          "source": "NotificationManager.java:270"
        },
        {
          "method": "org.eclipse.core.internal.events.NotificationManager.broadcastChanges",
          "source": "NotificationManager.java:144"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.broadcastPostChange",
          "source": "Workspace.java:180"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:912"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:45"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "100410",
      "date": "2005-06-16T16:48:28+02:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "normal"
    }
  ],
  "groupId": "100410",
  "bugId": "100410",
  "date": "2005-06-16T16:48:28+02:00",
  "product": "Web Tools",
  "component": "jst.server",
  "severity": "normal"
}