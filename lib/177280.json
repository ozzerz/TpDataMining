{
  "comments": [
    "Trying to import an XML schema using EMF I encountered a bug similar to the resolved bug #141172 (\"Stack Overflow Exception when importing XSD into new EMF model\"), I encountered it using EMF 2.2.0v200606271057 and Eclipse 3.2.0 build-id M20060628-1325 running on Linux.\nI get this bug every time I try to load certain schemas; attached is a copy of Eclipse\u0027s error log on this bug (beginning with a java.lang.reflect.InvocationTargetException error, just like #141172).\nTo reproduce the problem, download the schemas from http://earth.esa.int/SAFE/download/all_schemas.zip. Extract the ZIP file, and select the following schema as your model: \\schemas\\int\\esa\\safe\\1.0\\modis\\level-0\\xfdu.xsd. As a matter of fact, using any xfdu.xsd schema located in a sub-directory of 1.0 will produce the same results. Note, however, that the schema \\schemas\\int\\esa\\safe\\1.0\\xfdu.xsd CAN be generated.\n\nHere\u0027s an excerpt from the Eclipse log:\n\neclipse.buildId\u003dM20060628-1325\njava.fullversion\u003dJ2RE 1.4.2 IBM build cxia32142-20050929 (SR3) (JIT enabled: jitc)\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86\nThis is a continuation of log file /home/shaharr/workspace/.metadata/.bak_5.log\nCreated Time: 2007-03-07 17:19:12.160\n\nWarning\nWed Mar 07 17:19:12 GMT+02:00 2007\n\n\njava.lang.reflect.InvocationTargetException\nat org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:383)\nat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:313)\nat org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:851)\nat org.eclipse.emf.importer.ui.contribution.base.ModelImporterDetailPage.refreshModel(ModelImporterDetailPage.java:360)\nat org.eclipse.emf.importer.ui.contribution.base.ModelImporterDetailPage.doHandleEvent(ModelImporterDetailPage.java:162)\nat org.eclipse.xsd.ecore.importer.ui.XSDDetailPage.doHandleEvent(XSDDetailPage.java:92)\nat org.eclipse.emf.converter.ui.contribution.base.ModelConverterPage.handleEvent(ModelConverterPage.java:135)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled Code))\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compiled Code))\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\nat org.eclipse.jface.window.Window.runEventLoop(Window.java(Compiled Code))\nat org.eclipse.jface.window.Window.open(Window.java:796)\nat org.eclipse.ui.actions.NewProjectAction.run(NewProjectAction.java:116)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java(Inlined Compiled Code))\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java(Compiled Code))\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled Code))\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compiled Code))\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\nat java.lang.reflect.Method.invoke(Method.java:391)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)\nCaused by: java.lang.StackOverflowError\nat java.lang.String.equals(String.java(Compiled Code))\nat org.eclipse.xsd.util.XSDConstants.isSchemaForSchemaNamespace(XSDConstants.java(Inlined Compiled Code))\nat org.eclipse.xsd.util.XSDConstants.isURType(XSDConstants.java(Inlined Compiled Code))\nat org.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.getBadTypeDerivation(XSDComplexTypeDefinitionImpl.java(Compiled Code))\nat \n... (last line repeats forever)",
    "davidms (14/3/2007):\nI\u0027m able to reproduce the problem on EMF 2.2 and the current development stream. It seems to be a similar problem to #141172, though not exactly the same, as this one comes from an invocation from XSDSchema.validate().\n\nI see a cycle between two XSDTypeDefinitions, with each referring to the other as its base.  No doubt one is the redefine of the other, but it would take me a lot more investigation to understand exactly why this cycle is being formed.  I note that simply opening the schema in our sample editor shows the following errors in schemas/int/esa/safe/1.0/modis/level-0/xfdu.xsd:\n\nXSD: The attribute \u0027#repID\u0027 must be declared since it is required in the base type (line 151)\nXSD: The restricted content type must accept a subset of the content accepted by the base type (line 44)\n\nAnd, indeed, both of these appear to be real problems in the schema.  I\u0027m not sure if they\u0027re what\u0027s causing the cycle.  In any case, I don\u0027t think that infinite recursion is something we want to be doing, whether the schema is valid or not.",
    "I\u0027ve committed a fix for the 2.3 stream to avoid the infinite recursion, but the XSD model is not able to handle properly the case of a redefined thing being redefined a second time so you\u0027re better to generate the model for the unredefined original model. ",
    "Fixed in I200703221305."
  ],
  "commentCreationDates": [
    "2007-03-14T08:13:33+01:00",
    "2007-03-14T08:16:02+01:00",
    "2007-03-16T19:37:37+01:00",
    "2007-04-03T15:51:18+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:383"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:313"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:851"
        },
        {
          "method": "org.eclipse.emf.importer.ui.contribution.base.ModelImporterDetailPage.refreshModel",
          "source": "ModelImporterDetailPage.java:360"
        },
        {
          "method": "org.eclipse.emf.importer.ui.contribution.base.ModelImporterDetailPage.doHandleEvent",
          "source": "ModelImporterDetailPage.java:162"
        },
        {
          "method": "org.eclipse.xsd.ecore.importer.ui.XSDDetailPage.doHandleEvent",
          "source": "XSDDetailPage.java:92"
        },
        {
          "method": "org.eclipse.emf.converter.ui.contribution.base.ModelConverterPage.handleEvent",
          "source": "ModelConverterPage.java:135"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.actions.NewProjectAction.run",
          "source": "NewProjectAction.java:116"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:539"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.StackOverflowError",
        "elements": [
          {
            "method": "java.lang.String.equals",
            "source": "String.java(Compiled Code)"
          },
          {
            "method": "org.eclipse.xsd.util.XSDConstants.isSchemaForSchemaNamespace",
            "source": "XSDConstants.java(Inlined Compiled Code)"
          },
          {
            "method": "org.eclipse.xsd.util.XSDConstants.isURType",
            "source": "XSDConstants.java(Inlined Compiled Code)"
          },
          {
            "method": "org.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.getBadTypeDerivation",
            "source": "XSDComplexTypeDefinitionImpl.java(Compiled Code)"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "177280",
      "date": "2007-03-14T08:13:33+01:00",
      "product": "EMF",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "177280",
  "bugId": "177280",
  "date": "2007-03-14T08:13:33+01:00",
  "product": "EMF",
  "component": "Core",
  "severity": "normal"
}