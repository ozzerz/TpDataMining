{
  "comments": [
    "In some cases when the Agent Controller is started in secure mode it generates the following exception:\n\nException in thread \"Thread-1\" java.security.UnrecoverableKeyException: Cannot recover key\n\tat com.ibm.crypto.provider.p.recover(Unknown Source)\n\tat com.ibm.crypto.provider.JavaKeyStore.engineGetKey(Unknown Source)\n\tat java.security.KeyStore.getKey(KeyStore.java:754)\n\tat com.ibm.jsse2.lc.\u003cinit\u003e(lc.java:46)\n\tat com.ibm.jsse2.ac$a_.engineInit(ac$a_.java:67)\n\tat javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:3)\n\tat org.eclipse.hyades.execution.security.KeystoreManagerImpl.loadKeystore(KeystoreManagerImpl.java:68)\n\tat org.eclipse.hyades.execution.security.SecureServer.loadKeystore(SecureServer.java:48)\n\tat org.eclipse.hyades.execution.security.SecureServer.init(SecureServer.java:68)\n\tException in thread \"Thread-1\" java.lang.NullPointerException\n\tat org.eclipse.hyades.execution.security.SecureServer.run(SecureServer.java:129)\n\nI\u0027ve marked this defect as major.  I\u0027ll leave it up to the managers to decide whether this defect should be considered a stop-ship.  If so, please raise the severity.\n\nThis defect is reproducible with the automation framework.",
    "Note that Valentina also experienced this problem.",
    "Question, did you use a JVM which is different than the one you use for running SetConfig?",
    "No, I used the IBM JDK 1.5 to run both SetConfig and RAServer.",
    "I am pushing this to 4.2.1 since I cannot reproduce the problem using the Agent Controller (WIN/IA32) build TPTP-4.2.0-200606150100 with each of the following JDKs:\n- IBM JDK 1.5.0 GA\n- IBM JDK 1.5.0 GA-1\n- IBM JDK 1.5.0 SR1\n- IBM JDK 1.5.0 SR2\n\nFor all 4 cases the RAServer starts successfully and listens to port 10002, 10003, 10005 and 10006.\n",
    "This problem is intermittent.  You have to stop/start the Agent Controller several times before it generates this error message.  One way to do this is to run the automated testcases.  If you like, I can help you to do this.",
    "Yes. I indeed start/stop/restart the AC 3 times using each JVM. Therefore I conclude that this problem might be intermitten. This has to be pushed out to 4.2.1 for further investigation.",
    "I saw a similar java.security.UnrecoverableKeyException on LinuxPPC64 last night but I could not reproduce it when I came in this morning and tried again. Someone else had been using the machine in non-secure mode in between.",
    "Samson, I can reproduce the problem with this scenario :\n\n- AC windows XP 0613 build\n- sun java version \"1.4.2_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_01-b06)\nJava HotSpot(TM) Client VM (build 1.4.2_01-b06, mixed mode)\n- run setconfig and select all defaults ( no security ) ; set ALLOW\u003dALL\n- start the server\n- open the service config file\n- enable security : \u003cSecurityEnabled\u003etrue\u003c/SecurityEnabled\u003e\n- stop the server\n- restart the server\n\nI get this exception to the console; I continue getting the exception if I stop/restart the server\n\nD:\\RAC\\AC_0613\\bin\u003eraserver\nException in thread \"Thread-0\" java.lang.NullPointerException\n        at org.eclipse.hyades.execution.security.KeystoreManagerImpl.loadKeystore(KeystoreManagerImpl.java:50)\n        at org.eclipse.hyades.execution.security.SecureServer.loadKeystore(SecureServer.java:48)\n        at org.eclipse.hyades.execution.security.SecureServer.init(SecureServer.java:68)\njava.lang.NullPointerException\n        at org.eclipse.hyades.execution.security.SecureServer.run(SecureServer.java:129)\n",
    "The security keystore and certificates are only generated when security is turned on by rerunning SetConfig. You can notice that those files (if any) under the \"security\" directory are all 0 bytes.",
    "Perhaps we should handle this case more gracefully than simply printing out an exception.  Maybe we should ask the user to rerun the setconfig.bat command when this problem occurs.",
    "Retarget to 4.3.  Insufficient resource to be done in 4.2.1.",
    "Not containable in 4.3 and retarget to 4.4. Please let me know if you have any concern.\n",
    "Retarget to future due to resource limitation.",
    "Hi Bing. I have transferred my bugs to you for triage. Thanks."
  ],
  "commentCreationDates": [
    "2006-06-15T00:01:39+02:00",
    "2006-06-15T00:02:33+02:00",
    "2006-06-15T15:13:36+02:00",
    "2006-06-15T16:03:24+02:00",
    "2006-06-15T16:35:06+02:00",
    "2006-06-15T16:44:14+02:00",
    "2006-06-15T16:46:29+02:00",
    "2006-06-16T17:10:40+02:00",
    "2006-06-16T17:26:51+02:00",
    "2006-06-16T17:30:22+02:00",
    "2006-06-16T17:38:53+02:00",
    "2006-07-10T23:51:06+02:00",
    "2006-10-30T15:27:36+01:00",
    "2007-01-31T17:17:06+01:00",
    "2007-11-27T14:32:57+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.security.UnrecoverableKeyException",
      "message": "Cannot recover key",
      "elements": [
        {
          "method": "com.ibm.crypto.provider.p.recover",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.crypto.provider.JavaKeyStore.engineGetKey",
          "source": "Unknown Source"
        },
        {
          "method": "java.security.KeyStore.getKey",
          "source": "KeyStore.java:754"
        },
        {
          "method": "com.ibm.jsse2.lc.\u003cinit\u003e",
          "source": "lc.java:46"
        },
        {
          "method": "com.ibm.jsse2.ac$a_.engineInit",
          "source": "ac$a_.java:67"
        },
        {
          "method": "javax.net.ssl.KeyManagerFactory.init",
          "source": "KeyManagerFactory.java:3"
        },
        {
          "method": "org.eclipse.hyades.execution.security.KeystoreManagerImpl.loadKeystore",
          "source": "KeystoreManagerImpl.java:68"
        },
        {
          "method": "org.eclipse.hyades.execution.security.SecureServer.loadKeystore",
          "source": "SecureServer.java:48"
        },
        {
          "method": "org.eclipse.hyades.execution.security.SecureServer.init",
          "source": "SecureServer.java:68"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "147127",
      "date": "2006-06-15T00:01:39+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Execution.Framework",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.execution.security.SecureServer.run",
          "source": "SecureServer.java:129"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "147127",
      "date": "2006-06-15T00:01:39+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Execution.Framework",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.execution.security.KeystoreManagerImpl.loadKeystore",
          "source": "KeystoreManagerImpl.java:50"
        },
        {
          "method": "org.eclipse.hyades.execution.security.SecureServer.loadKeystore",
          "source": "SecureServer.java:48"
        },
        {
          "method": "org.eclipse.hyades.execution.security.SecureServer.init",
          "source": "SecureServer.java:68"
        }
      ],
      "number": 2,
      "commentIndex": 8,
      "bugId": "147127",
      "date": "2006-06-16T17:26:51+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Execution.Framework",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.execution.security.SecureServer.run",
          "source": "SecureServer.java:129"
        }
      ],
      "number": 3,
      "commentIndex": 8,
      "bugId": "147127",
      "date": "2006-06-16T17:26:51+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Execution.Framework",
      "severity": "major"
    }
  ],
  "groupId": "147127",
  "bugId": "147127",
  "date": "2006-06-15T00:01:39+02:00",
  "product": "TPTP Agent Controller",
  "component": "Platform.Execution.Framework",
  "severity": "major"
}