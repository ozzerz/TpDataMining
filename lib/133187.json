{
  "comments": [
    "We are getting intermittent concurrent modification exception in class\norg.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.  So far this has been reported on Linux platform only.\n\n----------------------------------------------------------\n\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy] *** ERROR ***: Wed Mar 22 06:08:18 CST 2006    java.util.ConcurrentModificationException\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.emf.common.util.BasicEList$EIterator.checkModCount(BasicEList.java:1252)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.emf.common.util.BasicEList$EIterator.next(BasicEList.java:1200)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(ResourceSetImpl.java:315)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource(ProjectResourceSetImpl.java:262)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.getResource(ResourceSetWorkbenchEditSynchronizer.java:258)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.processResource(ResourceSetWorkbenchEditSynchronizer.java:215)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.addedResource(ResourceSetWorkbenchEditSynchronizer.java:211)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.visit(ResourceSetWorkbenchEditSynchronizer.java:177)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:68)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:77)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acceptDelta(ResourceSetWorkbenchEditSynchronizer.java:128)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.resourceChanged(ResourceSetWorkbenchEditSynchronizer.java:81)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.runtime.Platform.run(Platform.java:783)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:180)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:916)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1730)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:38)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]            at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n[ejbquery.fvt/DeployApplicationJarFile/wsejbdeploy]                                                                                  Opening test11e1EJB.                                                                                 Opening test11e1EJBEAR.                                                                                 Importing JAR..com/ibm/websphere/fvt/ejbquery/test11e1/T11A11.java                                                                                 Importing JAR..com/ibm/websphere/fvt/ejbquery/test11e1/T11A11Bean.java                                                                                 Importing JAR..com/ibm/websphere/fvt/ejbquery/test11e1/T11A11Home.java                                                                                 Importing JAR..com/ibm/websphere/fvt/ejbquery/test11e1/T11A11ToA11rx11Link.ja                                                                                 Importing JAR..com/ibm/websphere/fvt/ejbquery/test11e1/T11B11.java",
    "Thanks - we need specific test cases to reproduce.",
    "Created an attachment (id\u003d37348)\nejb jar test\n\ntest ejb jar",
    "This happens on windows xp as well.",
    "What needs to be done with the  ejb  jar?",
    "These were additional pointers from  Bala about this defect\n\n1. It is not reproducible on slower machines or dev env\n\n2. Using  IBM product, batch deploy, it is reprouced about once in 5 times\n\n3. Easily  reproducible on dual core core and faster machine",
    "Created an attachment (id\u003d37659)\nPatch for writing system outs\n\n",
    "Bala, please drop the above patch on  the  plugin org.eclipse.wst.common.emfworkbench.integration, it will write console messages,  and send me the console output.",
    "This is what I got with the patch:\n---------------------------------------\nStarting workbench.\nframework search path: d:\\EJBDeploy61-614.08\\itp\\plugins\nCreating the project.\nThread[Worker-0,5,main] addedResource L/test9e1EJB/.classpath\n\n*** ERROR ***: Wed Apr 05 12:34:21 EDT 2006    java.util.ConcurrentModificationE\nxception\n        at org.eclipse.emf.common.util.BasicEList$EIterator.checkModCount(BasicE\nList.java:1252)\n        at org.eclipse.emf.common.util.BasicEList$EIterator.next(BasicEList.java\n:1200)\n        at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(Resou\nrceSetImpl.java:315)\n        at org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.ge\ntResource(ProjectResourceSetImpl.java:262)\n        at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetW\norkbenchEditSynchronizer.getResource(ResourceSetWorkbenchEditSynchronizer.java:2\n61)\n        at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetW\norkbenchEditSynchronizer.processResource(ResourceSetWorkbenchEditSynchronizer.ja\nva:218)\n        at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetW\norkbenchEditSynchronizer.addedResource(ResourceSetWorkbenchEditSynchronizer.java\n:214)\n        at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetW\norkbenchEditSynchronizer.visit(ResourceSetWorkbenchEditSynchronizer.java:178)\n        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.j\nava:68)\n        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.j\nava:77)\n        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.j\nava:77)\n        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.j\nava:49)\n        at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetW\norkbenchEditSynchronizer.acceptDelta(ResourceSetWorkbenchEditSynchronizer.java:1\n29)\n        at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetW\norkbenchEditSynchronizer.resourceChanged(ResourceSetWorkbenchEditSynchronizer.ja\nva:81)\n        at org.eclipse.core.internal.events.NotificationManager$2.run(Notificati\nonManager.java:276)\n        at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatfo\nrm.java:1044)\n        at org.eclipse.core.runtime.Platform.run(Platform.java:783)\n        at org.eclipse.core.internal.events.NotificationManager.notify(Notificat\nionManager.java:270)\n        at org.eclipse.core.internal.events.NotificationManager.broadcastChanges\n(NotificationManager.java:144)\n        at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Wor\nkspace.java:180)\n        at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.\njava:916)\n        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1730\n)\n        at org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(No\ntificationManager.java:38)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\nThread[Worker-0,5,main] addedResource L/test9e1EJBEAR/.project\nThread[Worker-0,5,main] addedResource L/test9e1EJBEAR/.settings/org.eclipse.wst.\ncommon.project.facet.core.xml",
    "I dont see any output (System.out)which i have added  right before processResource() is called in the addedResource(),  either the new plugin.jar is not getting  invoked or the  System.out is  printed elsewhere.\n Can you  check?",
    "your patch is properly applied and i see the print outs.\ne.g  Thread[Worker-0,5,main] addedResource L/test9e1EJB/.classpath\nThread[Worker-0,5,main] addedResource L/test9e1EJBEAR/.project\nThread[Worker-0,5,main] addedResource\nL/test9e1EJBEAR/.settings/org.eclipse.wst.\ncommon.project.facet.core.xml\nDo you expect something else? if so i don\u0027t see anything else anywhere.\n\n",
    "I see lots of these well after the concurrent mod exception occurred.\n\nThread[main,5,main] addedResource L/test9e1EJB/.settings/.webspheredeploy\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/MANIFEST.MF\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/Con1.conxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/Con1_dbclnt_GEORGEH.schxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/Con1_dbclnt_GEORGEH_T9A11A.tblxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/Con1_dbclnt_GEORGEH_T9A11B.tblxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/Map.mapxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/SAMPLE.dbxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/SAMPLE_NULLID.schxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/SAMPLE_NULLID_T9A11.tblxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/SAMPLE_NULLID_T9A11B.tblxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/Table.ddl\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/dbclnt.dbxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/dbclnt_Con1.rlconxmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/backends/DB2UDBNT_V72_\n1/ibm_pmbab.properties\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/ejb-jar.xml\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/ibm-ejb-jar-bnd.xmi\nThread[main,5,main] removedResource L/test9e1EJB/META-INF/ibm-ejb-jar-ext.xmi\nThread[main,5,main] addedResource L/test9e1EJB/ejbModule/META-INF/Table.ddl\nThread[main,5,main] removedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2\nUDBNT_V72_1/Con1.conxmi\nThread[main,5,main] removedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2\nUDBNT_V72_1/Con1_dbclnt_GEORGEH.schxmi\nThread[main,5,main] removedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2\nUDBNT_V72_1/Con1_dbclnt_GEORGEH_T9A11A.tblxmi\nThread[main,5,main] removedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2\nUDBNT_V72_1/Con1_dbclnt_GEORGEH_T9A11B.tblxmi\nThread[main,5,main] addedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2UD\nBNT_V72_1/SAMPLE.dbm\nThread[main,5,main] removedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2\nUDBNT_V72_1/SAMPLE.dbxmi\nThread[main,5,main] removedResource L/test9e1EJB/ejbModule/META-INF/backends/DB2\nUDBNT_V72_1/SAMPLE_NULLID.schxmi",
    "So seems like worker thread is adding .project and .classpath resources\nwhile the main thread is adding/removing wtp specific resources.\n\nAnd the ProjectResourceSet is a HashMap based implementation ...",
    "Adding synchronization block on the resourceSet member variable around\nall the places where the resourceSet is processed might resolve the problem",
    "A patch was provided by Neeraj and after applying the patch this we have not been able to reproduce this random failure.\n",
    "Created an attachment (id\u003d37943)\nPatch for fixing the problem\n\n",
    "+1 for WTP 1.0.2 RC2 only if we have one. This fix would not justify RC2.",
    "released the code for 102, RC2",
    "from conversation with Chuck Bridgham this fix was reworked\nin WTP 1.0.2 RC3 to resolve a deadlock issue. And the attached patch\nis no longer valid.  With the reworked fix this problem happens\nabout 1-3 times in our product that runs a WTP based\nheadless application about 2000 times.",
    "We\u0027re definitely hitting ResourceSet problems running with the 1.0.2 final build + the patches in 112925.\n\nOne exception we see is\n*** ERROR ***: Tue May 02 16:56:59 PDT 2006    org.eclipse.jst.j2ee.commonarchivecore.internal.exception.OpenFailureException: IWAE0006E Archive is not a valid WAR File because the deployment descriptor can not be found (case sensitive): WEB-INF/web.xml\n    \tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openSpecificArchive(CommonarchiveFactoryImpl.java:784)\n    \tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openWARFile(CommonarchiveFactoryImpl.java:820)\n    \tat org.eclipse.jst.j2ee.web.componentcore.util.WebArtifactEdit.asArchive(WebArtifactEdit.java:540)\n       ..\n\nbut of course there are other side effects of web.xml (and our weblogic.xml) not being found in the ResourceSet.\n\nIn the instance I\u0027ve got in the debugger, the resources EList contains two members: .settings/.component and null.\n\nThe null entry is causing calls to\n  public Resource getResource(URI uri, boolean loadOnDemand)\nto NPE at line 316\n\nThus no new resources can be added using this api.\n",
    "Bala, is it still an issue with 1.5/1.5.1 ?",
    "We have not reached this point in 1.5 \u0026 1.5.1. There are several\nbugs that is failing our bvt and until these are resolved and 1.5 \u0026 1.5.1 reaches the quality of 1.0.2,  we won\u0027t\nable to try this scenario. But I beleive the problem is still there\nas there were no changes to Edit synchronizer.",
    "There has been changes in the resource loading and unloading and locks have been added.\n\nWhat are the defects that are blocking you from executing the test case exposing this?",
    "Bala, please reopen if you are able to reproduce on the latest WTP 1.5.1 integration build, but we are not seeing this issue.",
    "closing."
  ],
  "commentCreationDates": [
    "2006-03-24T18:12:09+01:00",
    "2006-03-30T20:14:38+02:00",
    "2006-03-30T20:54:37+02:00",
    "2006-03-30T20:55:39+02:00",
    "2006-03-30T22:03:59+02:00",
    "2006-03-31T18:34:05+02:00",
    "2006-04-04T22:08:20+02:00",
    "2006-04-04T22:10:16+02:00",
    "2006-04-05T18:49:19+02:00",
    "2006-04-05T19:22:30+02:00",
    "2006-04-05T19:32:18+02:00",
    "2006-04-05T19:37:17+02:00",
    "2006-04-05T19:46:35+02:00",
    "2006-04-05T19:48:23+02:00",
    "2006-04-06T23:07:15+02:00",
    "2006-04-06T23:11:57+02:00",
    "2006-04-07T20:47:17+02:00",
    "2006-04-11T17:28:08+02:00",
    "2006-04-27T17:16:43+02:00",
    "2006-05-03T20:25:06+02:00",
    "2006-07-21T16:08:23+02:00",
    "2006-07-21T17:18:34+02:00",
    "2006-08-01T20:20:15+02:00",
    "2006-08-04T16:06:29+02:00",
    "2006-09-25T17:01:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jst.j2ee.commonarchivecore.internal.exception.OpenFailureException",
      "message": "IWAE0006E Archive is not a valid WAR File because the deployment descriptor can not be found (case sensitive): WEB-INF/web.xml",
      "elements": [
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openSpecificArchive",
          "source": "CommonarchiveFactoryImpl.java:784"
        },
        {
          "method": "org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openWARFile",
          "source": "CommonarchiveFactoryImpl.java:820"
        },
        {
          "method": "org.eclipse.jst.j2ee.web.componentcore.util.WebArtifactEdit.asArchive",
          "source": "WebArtifactEdit.java:540"
        }
      ],
      "number": 0,
      "commentIndex": 19,
      "bugId": "133187",
      "date": "2006-05-03T20:25:06+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "critical"
    }
  ],
  "groupId": "133187",
  "bugId": "133187",
  "date": "2006-03-24T18:12:09+01:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "critical"
}