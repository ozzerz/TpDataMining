{
  "comments": [
    "When starting Eclipse in an Arabic locale with UTF-8 encoding, files in Cp1256 \nand ISO-8859-6 format can be viewed when changing the workbench encoding. \nHowever, when modifying these files and attempting to save, it generates a \nMalformedInputException.\n\nHere is the snapshot from the .log file\n\nsun.io.MalformedInputException\n\tat sun.io.ByteToCharUTF8.convert(ByteToCharUTF8.java(Compiled Code))\n\tat java.io.InputStreamReader.convertInto(InputStreamReader.java:152)\n\tat java.io.InputStreamReader.fill(InputStreamReader.java:201)\n\tat java.io.InputStreamReader.read(InputStreamReader.java:264)\n\tat org.eclipse.jdt.internal.compiler.util.Util.getInputStreamAsCharArray\n(Util.java:270)\n\tat org.eclipse.jdt.internal.core.Util.getResourceContentsAsCharArray\n(Util.java:631)\n\tat org.eclipse.jdt.internal.core.Util.getResourceContentsAsCharArray\n(Util.java:620)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.openBuffer\n(CompilationUnit.java:671)\n\tat org.eclipse.jdt.internal.core.Openable.openWhenClosed\n(Openable.java:393)\n\tat org.eclipse.jdt.internal.core.JavaElement.openHierarchy\n(JavaElement.java:490)\n\tat org.eclipse.jdt.internal.core.JavaElement.getElementInfo\n(JavaElement.java:312)\n\tat org.eclipse.jdt.internal.core.JavaElement.getChildren\n(JavaElement.java:254)\n\tat org.eclipse.jdt.internal.core.JavaElement.getChildrenOfType\n(JavaElement.java:263)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.getTypes\n(CompilationUnit.java:522)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.util.JavaElementUtil.getMainType\n(JavaElementUtil.java:98)\n\tat org.eclipse.jdt.ui.actions.UseSupertypeAction.canEnable\n(UseSupertypeAction.java:125)\n\tat org.eclipse.jdt.ui.actions.UseSupertypeAction.selectionChanged\n(UseSupertypeAction.java:77)\n\tat \norg.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged\n(SelectionDispatchAction.java:181)\n\tat org.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged\n(SelectionDispatchAction.java:176)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:159)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java(Inlined Compiled Code))\n\tat org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged\n(Viewer.java:157)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateSelection\n(StructuredViewer.java:1290)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect\n(StructuredViewer.java:588)\n\tat org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected\n(StructuredViewer.java:684)\n\tat org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent\n(OpenStrategy.java:187)\n\tat org.eclipse.jface.util.OpenStrategy.access$0(OpenStrategy.java:184)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent\n(OpenStrategy.java:231)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined \nCompiled Code))\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)",
    "The log is not directly related to save - it rather looks as being caused by\nchanging the selection. Can you list the exact steps and then first clear the\n.log and try the steps you listed here. Also attach the ID of the build you are\nusing.",
    "Here is my guess what happens: You view a compilation unit in an encoding that \nis different from the workbench\u0027s default encoding. You change the compilation \nunit. You save the compilation unit and the save operation succeeds. This \nmeans the cu is now saved in the same encoding that has been used for viewing \nit and that is different from the workbench\u0027s default encoding.\n\nCause by an event, the Java compiler tries to read the compilation unit from \nits file. The compiler uses the workbench\u0027s default encoding for that. As the \nfile has been saved in a different encoding before, the read operation files \nwith a MalFormedInputException.\n\nWhen saving the compilation unit, the user has been notified that subsequent \noperation on this file might file because of the difference between the \nworkbench\u0027s default encoding and the encoding used for saving the file.\n\nThis is a shortcoming of the current implementation which will be revisited \nduring the 3.0 cycle.",
    "What happened was that I already had the files written and saved under the \nspecific encoding (whether Cp1256 or ISO-8859-6). When I open them from Eclipse \n(Arabic locale, UTF-8), it is not recognized. So, I go to Edit\u003eEncoding and \nchange it to the file\u0027s encoding.\nWhen I modify the file and attempt to save it, that\u0027s when the given exception \noccurs.\nIt gives me first a warning that the file will saved under an encoding \ndifferent than the default encoding, and when I proceed it gives the exception.\n\nThis means that if I am going to write my application under that specific \nencoding from scratch, it is not going to be saved.",
    ".",
    "Eclipse now shows a dialog when trying to save with an inappropriate encoding."
  ],
  "commentCreationDates": [
    "2003-05-08T11:26:48+02:00",
    "2003-05-08T11:49:54+02:00",
    "2003-05-12T13:16:13+02:00",
    "2003-05-14T12:26:07+02:00",
    "2006-10-26T08:15:18+02:00",
    "2006-10-26T08:19:08+02:00"
  ],
  "traces": [
    {
      "exceptionType": "sun.io.MalformedInputException",
      "elements": [
        {
          "method": "sun.io.ByteToCharUTF8.convert",
          "source": "ByteToCharUTF8.java(Compiled Code)"
        },
        {
          "method": "java.io.InputStreamReader.convertInto",
          "source": "InputStreamReader.java:152"
        },
        {
          "method": "java.io.InputStreamReader.fill",
          "source": "InputStreamReader.java:201"
        },
        {
          "method": "java.io.InputStreamReader.read",
          "source": "InputStreamReader.java:264"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.util.Util.getInputStreamAsCharArray",
          "source": "Util.java:270"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Util.getResourceContentsAsCharArray",
          "source": "Util.java:631"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Util.getResourceContentsAsCharArray",
          "source": "Util.java:620"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.openBuffer",
          "source": "CompilationUnit.java:671"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.openWhenClosed",
          "source": "Openable.java:393"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.openHierarchy",
          "source": "JavaElement.java:490"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getElementInfo",
          "source": "JavaElement.java:312"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getChildren",
          "source": "JavaElement.java:254"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getChildrenOfType",
          "source": "JavaElement.java:263"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.getTypes",
          "source": "CompilationUnit.java:522"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.util.JavaElementUtil.getMainType",
          "source": "JavaElementUtil.java:98"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.UseSupertypeAction.canEnable",
          "source": "UseSupertypeAction.java:125"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.UseSupertypeAction.selectionChanged",
          "source": "UseSupertypeAction.java:77"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged",
          "source": "SelectionDispatchAction.java:181"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged",
          "source": "SelectionDispatchAction.java:176"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:159"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java(Inlined Compiled Code)"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:157"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1290"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect",
          "source": "StructuredViewer.java:588"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected",
          "source": "StructuredViewer.java:684"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent",
          "source": "OpenStrategy.java:187"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$0",
          "source": "OpenStrategy.java:184"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:231"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Inlined  Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "37375",
      "date": "2003-05-08T11:26:48+02:00",
      "product": "JDT",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "37375",
  "bugId": "37375",
  "date": "2003-05-08T11:26:48+02:00",
  "product": "JDT",
  "component": "Text",
  "severity": "normal"
}