{
  "comments": [
    "Build: I20070320-0010\n\nI installed GEF using update manager, and chose to apply changes without restarting.  This caused an error in the registry, and an error dialog opened.  When I clicked \"ok\" on the error dialog, another error occurred, and the dialog reopened.  This led to an infinite recursion of error dialogs. Well, almost infinite. Eventually the process ran out of handles, at which point I got a fairly entertaining series of dialogs, as shown in the attached screen shot.",
    "Created an attachment (id\u003d61758)\nGuided tour of platform error handling dialogs\n\nThis is the sequence of error dialogs I got.",
    "Created an attachment (id\u003d61759)\nZipped log file\n\n",
    "For convenience, here is a snippet of the stack during the recursive error:\n\norg.eclipse.swt.SWTException: Failed to execute runnable (org.eclipse.core.runtime.InvalidRegistryObjectException: Invalid registry object)\n\tat org.eclipse.swt.SWT.error(SWT.java:3499)\n\tat org.eclipse.swt.SWT.error(SWT.java:3422)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3650)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3287)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.ui.internal.ide.dialogs.InternalErrorDialog.open(InternalErrorDialog.java:78)\n\tat org.eclipse.ui.internal.ide.dialogs.InternalErrorDialog.openQuestion(InternalErrorDialog.java:185)\n\tat org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler.openQuestionDialog(IDEWorkbenchErrorHandler.java:224)\n\tat org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler.handleException(IDEWorkbenchErrorHandler.java:146)\n\tat org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler$1.runInUIThread(IDEWorkbenchErrorHandler.java:94)\n\tat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3650)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3287)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:322)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:60)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:68)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.ui.internal.Workbench.fireWindowActivated(Workbench.java:784)\n\tat org.eclipse.ui.internal.WorkbenchWindow$24.shellActivated(WorkbenchWindow.java:2857)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:81)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1591)\n\tat org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1832)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3663)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1554)\n\tat org.eclipse.swt.widgets.Shell.windowProc(Shell.java:1752)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4342)\n\tat org.eclipse.swt.internal.win32.OS.DestroyWindow(Native Method)\n\tat org.eclipse.swt.widgets.Control.destroyWidget(Control.java:652)\n\tat org.eclipse.swt.widgets.Shell.destroyWidget(Shell.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:750)\n\tat org.eclipse.swt.widgets.Widget.dispose(Widget.java:410)\n\tat org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:441)\n\tat org.eclipse.swt.widgets.Shell.dispose(Shell.java:653)\n\tat org.eclipse.jface.window.Window.close(Window.java:330)\n\tat org.eclipse.jface.dialogs.Dialog.close(Dialog.java:971)\n\tat org.eclipse.jface.dialogs.MessageDialog.buttonPressed(MessageDialog.java:167)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:616)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3673)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:322)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:60)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:68)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.ui.internal.Workbench.fireWindowActivated(Workbench.java:784)\n\tat org.eclipse.ui.internal.WorkbenchWindow$24.shellActivated(WorkbenchWindow.java:2857)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:81)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1591)\n\tat org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1832)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3663)\n\tat org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1554)\n\tat org.eclipse.swt.widgets.Shell.windowProc(Shell.java:1752)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4342)\n\tat org.eclipse.swt.internal.win32.OS.DestroyWindow(Native Method)\n\tat org.eclipse.swt.widgets.Control.destroyWidget(Control.java:652)\n\tat org.eclipse.swt.widgets.Shell.destroyWidget(Shell.java:636)\n\tat org.eclipse.swt.widgets.Widget.release(Widget.java:750)\n\tat org.eclipse.swt.widgets.Widget.dispose(Widget.java:410)\n\tat org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:441)\n\tat org.eclipse.swt.widgets.Shell.dispose(Shell.java:653)\n\tat org.eclipse.jface.window.Window.close(Window.java:330)\n\tat org.eclipse.jface.dialogs.Dialog.close(Dialog.java:971)\n\tat org.eclipse.jface.dialogs.MessageDialog.buttonPressed(MessageDialog.java:167)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:616)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3673)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n",
    "I haven\u0027t tested this, but the test case might be as simple as creating a part activation listener that always throws an exception. Since closing the error dialog causes a part activation, this would set up the infinite loop.\n\nAnother interesting question: did we show a message dialog for \"safe runnable\" failures in the past, or is this new behaviour?",
    "No the SafeRunnable behaviour is existing behaviour and one we would like to improve",
    "Just for fun I tried a hello world plugin that adds a part listener that always throws RuntimeException() in the partActivated event. I can confirm this completely kills the workbench. Seems like a good test case...  I don\u0027t know if this can be fixed easily - perhaps remove misbehaving part listeners if they throw an exception.",
    "We are going for a non API change solution for 3.3",
    "Fixed in build \u003e20070410",
    "Created an attachment (id\u003d63369)\nA test plugin\n\n",
    "*** Bug 46986 has been marked as a duplicate of this bug. ***",
    "Verified in I20070430-0010",
    "*** Bug 180277 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2007-03-22T22:47:09+01:00",
    "2007-03-22T22:48:27+01:00",
    "2007-03-22T22:49:21+01:00",
    "2007-03-22T22:51:03+01:00",
    "2007-03-23T14:46:56+01:00",
    "2007-03-23T14:55:13+01:00",
    "2007-03-23T23:07:50+01:00",
    "2007-03-30T18:34:56+02:00",
    "2007-04-10T16:29:23+02:00",
    "2007-04-10T16:36:16+02:00",
    "2007-04-27T14:59:18+02:00",
    "2007-04-30T20:51:55+02:00",
    "2007-06-20T18:37:11+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.InvalidRegistryObjectException",
      "message": "Invalid registry object)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3499"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3422"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3650"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3287"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.InternalErrorDialog.open",
          "source": "InternalErrorDialog.java:78"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.InternalErrorDialog.openQuestion",
          "source": "InternalErrorDialog.java:185"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler.openQuestionDialog",
          "source": "IDEWorkbenchErrorHandler.java:224"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler.handleException",
          "source": "IDEWorkbenchErrorHandler.java:146"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEWorkbenchErrorHandler$1.runInUIThread",
          "source": "IDEWorkbenchErrorHandler.java:94"
        },
        {
          "method": "org.eclipse.ui.progress.UIJob$1.run",
          "source": "UIJob.java:94"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3650"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3287"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:322"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:60"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.fireWindowActivated",
          "source": "Workbench.java:784"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$24.shellActivated",
          "source": "WorkbenchWindow.java:2857"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:962"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:943"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:1591"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_ACTIVATE",
          "source": "Shell.java:1832"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3663"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1554"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.windowProc",
          "source": "Shell.java:1752"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4342"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DestroyWindow",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.destroyWidget",
          "source": "Control.java:652"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.destroyWidget",
          "source": "Shell.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:750"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.dispose",
          "source": "Widget.java:410"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.dispose",
          "source": "Decorations.java:441"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.dispose",
          "source": "Shell.java:653"
        },
        {
          "method": "org.eclipse.jface.window.Window.close",
          "source": "Window.java:330"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.close",
          "source": "Dialog.java:971"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.buttonPressed",
          "source": "MessageDialog.java:167"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:616"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:227"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3673"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3284"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:322"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:60"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.fireWindowActivated",
          "source": "Workbench.java:784"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$24.shellActivated",
          "source": "WorkbenchWindow.java:2857"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:962"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:943"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:1591"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.WM_ACTIVATE",
          "source": "Shell.java:1832"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3663"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.windowProc",
          "source": "Decorations.java:1554"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.windowProc",
          "source": "Shell.java:1752"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4342"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DestroyWindow",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.destroyWidget",
          "source": "Control.java:652"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.destroyWidget",
          "source": "Shell.java:636"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.release",
          "source": "Widget.java:750"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.dispose",
          "source": "Widget.java:410"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.dispose",
          "source": "Decorations.java:441"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.dispose",
          "source": "Shell.java:653"
        },
        {
          "method": "org.eclipse.jface.window.Window.close",
          "source": "Window.java:330"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.close",
          "source": "Dialog.java:971"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.buttonPressed",
          "source": "MessageDialog.java:167"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:616"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:227"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3673"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3284"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "178906",
      "date": "2007-03-22T22:51:03+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "178906",
  "bugId": "178906",
  "date": "2007-03-22T22:47:09+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}