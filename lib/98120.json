{
  "comments": [
    "Noticed while working on AspectJ bug 95344,\n\n/////////////////////////////// with the following code\ninterface Main$1 {void hello();}\n\npublic class Main{\n  public static void main(String [] args){\n\t  Main$1 anon \u003d new Main$1()\n            {public void hello(){System.out.println(\"hello world!\");}};\n\t  anon.hello();\n  }\n}\n//////////////////////////////////////////////////\n\njavac produces the files:\nMain$1.class\nMain$2.class\nMain.class\n\nand when Main is ran it says:\nhello world!\n\njdt in Eclipse 3.1RC1 produces the files:\nMain$1.class\nMain.class\n\nand when Main is ran it says:\nException in thread \"main\" java.lang.ClassCircularityError: Main$1\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at Main.main(Main.java:5)",
    "and now when I try running it it says\n\nException in thread \"main\" java.lang.InstantiationError: Main$1\n        at Main.main(Main.java:5)\n\nweird.\n\nAlso:\nhaving compiled the file in javac, the file Main$2.class contains the string\n\"hello world\", \nhaving compiled the file in Eclipse, none of the classfiles contain the string\n\"hello world\".",
    "quite clear whats going on,\nJDT is trying to put both the inner class and the interface in the file\n\"Main$1.class\"",
    "would also be nice if jdt gave a compile time error on this:\n\n////////////////////////////////////////////\ninterface Main$A {void hello();}\n\npublic class Main{\n  public static class A {void hello(){System.out.println(\"hello world\");}}\n  public static void main(String [] args){\n\t  Main.A a \u003d new Main.A();\n\t  a.hello();\n  }\n}\n////////////////////////////////////////////\nlike javac does, rather than giving a confusing runtime\njava.lang.InstantiationError at line 6",
    "The problem comes from the fact that when we compute the anonymous name we don\u0027t\ncheck existing top level or member types.",
    "One solution would be to compute the constant pool name through a factory for\nall type bindings, not just the local type bindings.",
    "is there any schedule for fixing this in 3.2?\nThks, A.",
    "Let\u0027s try for 3.2m4.",
    "*** Bug 188167 has been marked as a duplicate of this bug. ***",
    "Created an attachment (id\u003d71215)\nProposed patch\n\nThis should do the trick",
    "Philippe - did u see the patch ?"
  ],
  "commentCreationDates": [
    "2005-06-02T16:57:39+02:00",
    "2005-06-02T17:10:00+02:00",
    "2005-06-02T17:16:29+02:00",
    "2005-06-02T17:34:23+02:00",
    "2005-06-03T03:53:49+02:00",
    "2005-06-03T03:59:32+02:00",
    "2005-10-28T14:04:42+02:00",
    "2005-10-28T21:38:50+02:00",
    "2007-06-13T18:27:32+02:00",
    "2007-06-13T20:12:27+02:00",
    "2007-09-26T17:22:34+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCircularityError",
      "message": "Main$1",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:620"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:124"
        },
        {
          "method": "java.net.URLClassLoader.defineClass",
          "source": "URLClassLoader.java:260"
        },
        {
          "method": "java.net.URLClassLoader.access$100",
          "source": "URLClassLoader.java:56"
        },
        {
          "method": "java.net.URLClassLoader$1.run",
          "source": "URLClassLoader.java:195"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "java.net.URLClassLoader.findClass",
          "source": "URLClassLoader.java:188"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:306"
        },
        {
          "method": "sun.misc.Launcher$AppClassLoader.loadClass",
          "source": "Launcher.java:268"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:251"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:319"
        },
        {
          "method": "Main.main",
          "source": "Main.java:5"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "98120",
      "date": "2005-06-02T16:57:39+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.InstantiationError",
      "message": "Main$1",
      "elements": [
        {
          "method": "Main.main",
          "source": "Main.java:5"
        }
      ],
      "number": 1,
      "commentIndex": 1,
      "bugId": "98120",
      "date": "2005-06-02T17:10:00+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "98120",
  "bugId": "98120",
  "date": "2005-06-02T16:57:39+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}