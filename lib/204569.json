{
  "comments": [
    "I exported my preferences on a pc.\n\nI imported my preferences on a mac.\n\nWhen I go to the user libraries pane (or attempt to open a project referencing one of the imported libraries) there is an error \"Path for IClasspathEntry must be absolute\" (see traceback from pde error log below).\n\nI can see from the workspace file .plugins/org.eclipse.jdt.core/variablesAndContainers.dat that some of the user libraries have been imported from the pc and that their path is non absolute in mac terms. however as that file is an opaque binary format and I can\u0027t open the user libraries pane, my workspace is basically corrupted now...\n\nTraceback:\n---------------------\norg.eclipse.core.runtime.AssertionFailedException: assertion failed: Path for IClasspathEntry must be absolute\nat org.eclipse.core.runtime.Assert.isTrue(Assert.java:109)\nat org.eclipse.jdt.core.JavaCore.newLibraryEntry(JavaCore.java:3829)\nat org.eclipse.jdt.internal.core.UserLibrary.createFromString(UserLibrary.java:188)\nat org.eclipse.jdt.internal.core.UserLibraryManager.recreatePersistedUserLibraryEntry(UserLibraryManager.java:169)\nat org.eclipse.jdt.internal.core.UserLibraryManager.getLibraryMap(UserLibraryManager.java:145)\nat org.eclipse.jdt.internal.core.UserLibraryManager.getUserLibrary(UserLibraryManager.java:84)\nat org.eclipse.jdt.internal.core.UserLibraryClasspathContainerInitializer.initialize(UserLibraryClasspathContainerInitializer.java:32)\nat org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2203)\nat org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1545)\nat org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1571)\nat org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2558)\nat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1848)\nat org.eclipse.jdt.internal.core.JavaModelManager.determineIfOnClasspath(JavaModelManager.java:904)\nat org.eclipse.jdt.internal.core.JavaModelManager.create(JavaModelManager.java:790)\nat org.eclipse.jdt.internal.core.JavaModelManager.create(JavaModelManager.java:730)\nat org.eclipse.jdt.core.JavaCore.create(JavaCore.java:1456)\nat org.eclipse.jdt.internal.ui.ResourceAdapterFactory.getAdapter(ResourceAdapterFactory.java:44)\nat org.eclipse.core.internal.runtime.AdapterFactoryProxy.getAdapter(AdapterFactoryProxy.java:61)\nat org.eclipse.core.internal.runtime.AdapterManager.getAdapter(AdapterManager.java:277)\nat org.eclipse.core.runtime.PlatformObject.getAdapter(PlatformObject.java:66)\nat org.eclipse.mylyn.internal.java.ui.JavaStructureBridge.acceptsObject(JavaStructureBridge.java:211)\nat org.eclipse.mylyn.context.core.ContextCorePlugin.getStructureBridge(ContextCorePlugin.java:208)\nat org.eclipse.mylyn.internal.context.ui.InterestDecoratorLightweight.decorate(InterestDecoratorLightweight.java:36)\nat org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:259)\nat org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:71)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.core.runtime.Platform.run(Platform.java:857)\nat org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:336)\nat org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:322)\nat org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:369)\nat org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:329)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "Update to this: it appears the problem is to do with a classplath variable being in windows format, being used as the \"source path\" for an existing library. deleting the classpath variable doesn\u0027t make the problem go away",
    "It looks like a dup of bug 202373.\nMoving to JDT/UI",
    "After all, it might not be a dup (the stack traces are different).\nMoving back to JDT/Core to investigate.",
    "Tim, I will need some information to track this issue:\n1. What is the Eclipse build number you are using ?\n2. Was the exported preferences ever edited ?\n3. Can you please attach the exported preferences to this bug ?\n4. Can you please clarify comment 1 ? How did you make such diagnosis ?",
    "Created an attachment (id\u003d79212)\nthe prefs file I imported\n\n",
    "\u003e Tim, I will need some information to track this issue:\n\u003e 1. What is the Eclipse build number you are using ?\nThe (osx-based) eclipse I am importing into gives the following:\n  Version: 3.3.0\n  Build id: I20070621-1340\n\n\u003e 2. Was the exported preferences ever edited ?\nNo.\n(hence don\u0027t see this is a duplicate of bug 202373\n\n\u003e 3. Can you please attach the exported preferences to this bug ?\nattached\n\n\u003e 4. Can you please clarify comment 1 ? How did you make such diagnosis ?\nI think I was a bit too hasty in that comment - it\u0027s more of a hunch than a diagnosis, knowing my workspace. \n\n----\nmore on that hunch (of limited use?)\nThe hunch is that it is about source attachments. But I did found errors in the error log that referred to particular classpath variables. I have removed those classpath variables and had a different problem (I think an NPE, but not sure - could check if this is likely to be useful). I then put those variables back in but with a valid osx path - and got the IclasspathEntry must be absolute assertion error again. \n\nAs for the reasons behind my hunch, I\u0027m aware from experience that if you have non-extant source attachments (or, I think, javadoc) for a jar (not just a userlibary) this has caused console-traceback clicks (into a _different_ library - not the jar with the problematic source attachment) to fail with a slightly obscured error (never reported this I\u0027m afraid). As I say - just a hunch - I may well be wrong.\n\n----\n\nAs a further note - reexporting preferences under mac osx and then reimporting into a new workspace did not recapture the bug (I could enclose the reexported prefs if that was the case) \n",
    "actually I was wrong about exporting and importing. exporting the preferences and reimporting on a clean workspace DID cause the problem to go away.\n\nHowever, by removing the following line from two offending projects, I removed the error warning from startup:\n\t\u003cclasspathentry kind\u003d\"con\" path\u003d\"org.eclipse.jdt.USER_LIBRARY/tools.jar\"/\u003e\n\nI then still got the IClasspathEntry must be absolute assertion error when trying to open the User Libraries preference pane.\n\nThis implies to me that there is a problem with the tools.jar user library (and maybe others).\n\nI have then (as a test) manually edited the preferences file to replace all windows path attributes in the file (regexp \"(c|d)\\\\:[^\"]*\" ) with a valid but spurious osx path /Users/tim/nonexistant.jar). I then imported this file and, hey presto - I could view the User Libraries preference pane again. I can post this file if that would help.\n\nSo I\u0027m very confident this is a problem with importing preferences which contain windows paths on a macintosh machine. Some possibilites I\u0027d guess, is to do checking on each path as it comes in, and either abort/undo the preference import process or subsitute a valid but spurious path, or maybe (if possible) just check what platform the preferences were exported on, and if no match refuse to continue.",
    "Looking at the exported preferences from comment 5, I see that invalid entries are being exported. E.g. /instance/org.eclipse.jdt.core/org.eclipse.jdt.core.userLibrary.Catalina\\ libraries\u003d\\#\\#\u003ccp entry ignore\u003e\\#\\#\n\nThis is fixed in the R3_3_maintenance stream. \n\nCould you please try the latest maintenance build (e.g. http://download.eclipse.org/eclipse/downloads/drops/M20070921-1145/index.php), export your preferences with this build on your pc, then import them with this same build on your mac ? And let me know if this fixes this problem ?"
  ],
  "commentCreationDates": [
    "2007-09-25T18:01:11+02:00",
    "2007-09-25T18:33:18+02:00",
    "2007-09-25T19:40:49+02:00",
    "2007-09-25T19:43:14+02:00",
    "2007-09-26T10:19:00+02:00",
    "2007-09-26T17:11:37+02:00",
    "2007-09-26T17:12:22+02:00",
    "2007-09-27T08:46:10+02:00",
    "2007-09-27T14:05:15+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.AssertionFailedException",
      "message": "assertion failed: Path for IClasspathEntry must be absolute",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isTrue",
          "source": "Assert.java:109"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.newLibraryEntry",
          "source": "JavaCore.java:3829"
        },
        {
          "method": "org.eclipse.jdt.internal.core.UserLibrary.createFromString",
          "source": "UserLibrary.java:188"
        },
        {
          "method": "org.eclipse.jdt.internal.core.UserLibraryManager.recreatePersistedUserLibraryEntry",
          "source": "UserLibraryManager.java:169"
        },
        {
          "method": "org.eclipse.jdt.internal.core.UserLibraryManager.getLibraryMap",
          "source": "UserLibraryManager.java:145"
        },
        {
          "method": "org.eclipse.jdt.internal.core.UserLibraryManager.getUserLibrary",
          "source": "UserLibraryManager.java:84"
        },
        {
          "method": "org.eclipse.jdt.internal.core.UserLibraryClasspathContainerInitializer.initialize",
          "source": "UserLibraryClasspathContainerInitializer.java:32"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer",
          "source": "JavaModelManager.java:2203"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer",
          "source": "JavaModelManager.java:1545"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:1571"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.resolveClasspath",
          "source": "JavaProject.java:2558"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1848"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.determineIfOnClasspath",
          "source": "JavaModelManager.java:904"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.create",
          "source": "JavaModelManager.java:790"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.create",
          "source": "JavaModelManager.java:730"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.create",
          "source": "JavaCore.java:1456"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.ResourceAdapterFactory.getAdapter",
          "source": "ResourceAdapterFactory.java:44"
        },
        {
          "method": "org.eclipse.core.internal.runtime.AdapterFactoryProxy.getAdapter",
          "source": "AdapterFactoryProxy.java:61"
        },
        {
          "method": "org.eclipse.core.internal.runtime.AdapterManager.getAdapter",
          "source": "AdapterManager.java:277"
        },
        {
          "method": "org.eclipse.core.runtime.PlatformObject.getAdapter",
          "source": "PlatformObject.java:66"
        },
        {
          "method": "org.eclipse.mylyn.internal.java.ui.JavaStructureBridge.acceptsObject",
          "source": "JavaStructureBridge.java:211"
        },
        {
          "method": "org.eclipse.mylyn.context.core.ContextCorePlugin.getStructureBridge",
          "source": "ContextCorePlugin.java:208"
        },
        {
          "method": "org.eclipse.mylyn.internal.context.ui.InterestDecoratorLightweight.decorate",
          "source": "InterestDecoratorLightweight.java:36"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate",
          "source": "LightweightDecoratorDefinition.java:259"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run",
          "source": "LightweightDecoratorManager.java:71"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:857"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate",
          "source": "LightweightDecoratorManager.java:336"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations",
          "source": "LightweightDecoratorManager.java:322"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached",
          "source": "DecorationScheduler.java:369"
        },
        {
          "method": "org.eclipse.ui.internal.decorators.DecorationScheduler$1.run",
          "source": "DecorationScheduler.java:329"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "204569",
      "date": "2007-09-25T18:01:11+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "204569",
  "bugId": "204569",
  "date": "2007-09-25T18:01:11+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}