{
  "comments": [
    "Hi,\n I am running into a strange crash with SWT_AWT and I can\u0027t figure out how\nto work around it. I am using SWT 3.1 and JDK 1.4.2.\n\n To reproduce, run the class below and when the window shows up, close it\nby pressing the X button on the top right. You get the exception:\n java.lang.NullPointerException\n at java.awt.Component$NativeInLightFixer.\u003cinit\u003e(Component.java:7046)\n at java.awt.Component.addNotify(Component.java:5474)\n at java.awt.Container.addNotify(Container.java:2042)\n at java.awt.Window.addNotify(Window.java:418)\n at java.awt.Dialog.addNotify(Dialog.java:389)\n at java.awt.Window.pack(Window.java:436)\n at javax.swing.JOptionPane.createDialog(JOptionPane.java:917)\n at javax.swing.JOptionPane.showOptionDialog(JOptionPane.java:837)\n at javax.swing.JOptionPane.showConfirmDialog(JOptionPane.java:768)\n at javax.swing.JOptionPane.showConfirmDialog(JOptionPane.java:731)\n at simple.SimpleExample$1.windowClosed(SimpleExample.java:71)\n at java.awt.Window.processWindowEvent(Window.java:1124)\n at java.awt.Window.processEvent(Window.java:1079)\n..\n NOTE that I am popping up a JOptionPane dialog when the app is closing.\nFor instance, this could be a \"Would you like to save?\" dialog with Yes/No\noptions, so this is a pretty standard usage.\n import java.awt.*;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\n import javax.swing.*;\n import org.eclipse.swt.SWT;\nimport org.eclipse.swt.awt.SWT_AWT;\nimport org.eclipse.swt.layout.RowLayout;\nimport org.eclipse.swt.widgets.Composite;\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Shell;\n public class SimpleExample\n{\n /**\n  * This method is a constructor for the application.\n  */\n public SimpleExample()\n {\n }\n  private void initGUI()\n {\n   Shell shell \u003d new Shell();\n  shell.setText(\"Test\");\n  shell.setSize(510, 430);\n    // Creating a composite from the shell\n    Composite composite \u003d new Composite(shell, SWT.EMBEDDED);\n  composite.setBounds(0, 0, 500, 400);\n  composite.setLayout(new RowLayout());\n   JPanel mainPanel \u003d new JPanel();\n  mainPanel.setLayout(new BorderLayout());\n   // Creating the AWT frame using the composite object\n  // in which the main panel will be displayed     this.frame \u003d\nSWT_AWT.new_Frame(composite);\n   frame.add(mainPanel);\n  frame.addWindowListener(new WindowAdapter()\n  {\n   /**\n    * Invoked when a window has been closed.\n    */\n   public void windowClosed(WindowEvent e)\n   {\n    JOptionPane.showConfirmDialog(\n     SimpleExample.this.frame,\n     \"Whatever\",\n     \"Title\",\n     JOptionPane.YES_NO_CANCEL_OPTION,\n     JOptionPane.WARNING_MESSAGE);\n   }\n  });\n   // Opening the shell\n   shell.open();\n   // Checking to see when the display should be closed\n   Display display \u003d shell.getDisplay();\n   while (!shell.isDisposed())\n  {\n   if (!display.readAndDispatch())\n   {\n    display.sleep();\n   }\n  }\n   display.dispose();\n }\n   /**\n  * This main method creates and starts an instance of the\n  * application.\n  */\n public static void main(String[] args)\n {\n  new SimpleExample().initGUI();\n }\n  Frame frame;\n}",
    "The first thing I\u0027d suggest is try the code under JDK 1.5.",
    "(In reply to comment #1)\n\u003e The first thing I\u0027d suggest is try the code under JDK 1.5.\n\nI tried under JDK 1.5. I get a slightly different but very similar exception:\n\nException in thread \"AWT-EventQueue-0\" java.lang.NullPointerException\n\tat java.awt.Component$NativeInLightFixer.install(Component.java:7703)\n\tat java.awt.Component$NativeInLightFixer.\u003cinit\u003e(Component.java:7694)\n\tat java.awt.Component.addNotify(Component.java:5876)\n\tat java.awt.Container.addNotify(Container.java:2493)\n\tat java.awt.Window.addNotify(Window.java:466)\n\tat java.awt.Dialog.addNotify(Dialog.java:376)\n\tat java.awt.Window.pack(Window.java:484)\n\tat javax.swing.JOptionPane.createDialog(JOptionPane.java:926)\n\tat javax.swing.JOptionPane.showOptionDialog(JOptionPane.java:840)\n\tat javax.swing.JOptionPane.showConfirmDialog(JOptionPane.java:771)\n\tat javax.swing.JOptionPane.showConfirmDialog(JOptionPane.java:734)\n\tat simple.SimpleExample$1.windowClosed(SimpleExample.java:44)\n\tat java.awt.Window.processWindowEvent(Window.java:1193)\n\tat java.awt.Window.processEvent(Window.java:1148)\n\tat java.awt.Component.dispatchEventImpl(Component.java:3955)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2024)\n\tat java.awt.Window.dispatchEventImpl(Window.java:1774)\n\tat java.awt.Component.dispatchEvent(Component.java:3803)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:463)\n\tat java.awt.EventDispatchThread.pumpOneEventForHierarchy\n(EventDispatchThread.java:242)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy\n(EventDispatchThread.java:163)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:110)",
    "Note that the frame is disposed when the WindowListener.windowClosed() method \nis called, so you cannot not use it anymore. The correct method to reimplement \nfor a normal AWT only example is WindowListener.windowClosing().\n\nBut WindowListener.windowClosing() is not called when you are embedding AWT, \nbecause the user is actually closing the embedder Shell (not the Frame).\n\nI suggest you add a ShellListener to the shell instead and open the dialog in \nthe shellClosed() method. "
  ],
  "commentCreationDates": [
    "2005-07-26T20:09:41+02:00",
    "2005-07-29T16:10:15+02:00",
    "2005-07-29T22:16:03+02:00",
    "2005-08-02T18:56:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.awt.Component$NativeInLightFixer.\u003cinit\u003e",
          "source": "Component.java:7046"
        },
        {
          "method": "java.awt.Component.addNotify",
          "source": "Component.java:5474"
        },
        {
          "method": "java.awt.Container.addNotify",
          "source": "Container.java:2042"
        },
        {
          "method": "java.awt.Window.addNotify",
          "source": "Window.java:418"
        },
        {
          "method": "java.awt.Dialog.addNotify",
          "source": "Dialog.java:389"
        },
        {
          "method": "java.awt.Window.pack",
          "source": "Window.java:436"
        },
        {
          "method": "javax.swing.JOptionPane.createDialog",
          "source": "JOptionPane.java:917"
        },
        {
          "method": "javax.swing.JOptionPane.showOptionDialog",
          "source": "JOptionPane.java:837"
        },
        {
          "method": "javax.swing.JOptionPane.showConfirmDialog",
          "source": "JOptionPane.java:768"
        },
        {
          "method": "javax.swing.JOptionPane.showConfirmDialog",
          "source": "JOptionPane.java:731"
        },
        {
          "method": "simple.SimpleExample$1.windowClosed",
          "source": "SimpleExample.java:71"
        },
        {
          "method": "java.awt.Window.processWindowEvent",
          "source": "Window.java:1124"
        },
        {
          "method": "java.awt.Window.processEvent",
          "source": "Window.java:1079"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "105200",
      "date": "2005-07-26T20:09:41+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.awt.Component$NativeInLightFixer.install",
          "source": "Component.java:7703"
        },
        {
          "method": "java.awt.Component$NativeInLightFixer.\u003cinit\u003e",
          "source": "Component.java:7694"
        },
        {
          "method": "java.awt.Component.addNotify",
          "source": "Component.java:5876"
        },
        {
          "method": "java.awt.Container.addNotify",
          "source": "Container.java:2493"
        },
        {
          "method": "java.awt.Window.addNotify",
          "source": "Window.java:466"
        },
        {
          "method": "java.awt.Dialog.addNotify",
          "source": "Dialog.java:376"
        },
        {
          "method": "java.awt.Window.pack",
          "source": "Window.java:484"
        },
        {
          "method": "javax.swing.JOptionPane.createDialog",
          "source": "JOptionPane.java:926"
        },
        {
          "method": "javax.swing.JOptionPane.showOptionDialog",
          "source": "JOptionPane.java:840"
        },
        {
          "method": "javax.swing.JOptionPane.showConfirmDialog",
          "source": "JOptionPane.java:771"
        },
        {
          "method": "javax.swing.JOptionPane.showConfirmDialog",
          "source": "JOptionPane.java:734"
        },
        {
          "method": "simple.SimpleExample$1.windowClosed",
          "source": "SimpleExample.java:44"
        },
        {
          "method": "java.awt.Window.processWindowEvent",
          "source": "Window.java:1193"
        },
        {
          "method": "java.awt.Window.processEvent",
          "source": "Window.java:1148"
        },
        {
          "method": "java.awt.Component.dispatchEventImpl",
          "source": "Component.java:3955"
        },
        {
          "method": "java.awt.Container.dispatchEventImpl",
          "source": "Container.java:2024"
        },
        {
          "method": "java.awt.Window.dispatchEventImpl",
          "source": "Window.java:1774"
        },
        {
          "method": "java.awt.Component.dispatchEvent",
          "source": "Component.java:3803"
        },
        {
          "method": "java.awt.EventQueue.dispatchEvent",
          "source": "EventQueue.java:463"
        },
        {
          "method": "java.awt.EventDispatchThread.pumpOneEventForHierarchy",
          "source": "EventDispatchThread.java:242"
        },
        {
          "method": "java.awt.EventDispatchThread.pumpEventsForHierarchy",
          "source": "EventDispatchThread.java:163"
        },
        {
          "method": "java.awt.EventDispatchThread.pumpEvents",
          "source": "EventDispatchThread.java:157"
        },
        {
          "method": "java.awt.EventDispatchThread.pumpEvents",
          "source": "EventDispatchThread.java:149"
        },
        {
          "method": "java.awt.EventDispatchThread.run",
          "source": "EventDispatchThread.java:110"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "105200",
      "date": "2005-07-29T22:16:03+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "blocker"
    }
  ],
  "groupId": "105200",
  "bugId": "105200",
  "date": "2005-07-26T20:09:41+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "blocker"
}