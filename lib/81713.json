{
  "comments": [
    "Some listeners are still registered and/or some jobs are still active although\nthe plugin was shutdown.\n\n\njava.lang.ClassNotFoundException: The class\n\"org.eclipse.jst.jsp.core.contentmodel.TaglibIndex$ResourceChangeListener\"\ncannot be loaded because the system is shutting down and the plug-in\n\"org.eclipse.jst.jsp.core\" has already been stopped.\nat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.shouldActivateFor(EclipseClassLoader.java:147)\nat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:62)\nat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\nat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\nat\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\nat java.lang.ClassLoader.loadClass(Unknown Source)\nat java.lang.ClassLoader.loadClassInternal(Unknown Source)\nat org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cinit\u003e(TaglibIndex.java:102)\nat org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cclinit\u003e(TaglibIndex.java:84)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.loadTaglib(TLDCMDocumentManager.java:785)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.getCMDocument(TLDCMDocumentManager.java:625)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.enableTaglibFromURI(TLDCMDocumentManager.java:89)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib(TLDCMDocumentManager.java:397)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib(TLDCMDocumentManager.java:342)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.nodeParsed(TLDCMDocumentManager.java:218)\nat\norg.eclipse.wst.xml.core.internal.parser.XMLSourceParser.fireNodeParsed(XMLSourceParser.java:117)\nat\norg.eclipse.jst.jsp.core.internal.parser.JSPSourceParser.parseNodes(JSPSourceParser.java:306)\nat\norg.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getDocumentRegions(XMLSourceParser.java:149)\nat\norg.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.reparse(BasicStructuredDocument.java:2205)\nat\norg.eclipse.jst.jsp.core.contentmodel.TaglibController$FileBufferListener.bufferCreated(TaglibController.java:91)\nat\norg.eclipse.core.internal.filebuffers.TextFileBufferManager.fireBufferCreated(TextFileBufferManager.java:406)\nat\norg.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:89)\nat\norg.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel(FileBufferModelManager.java:412)\nat\norg.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:302)\nat\norg.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:288)\nat\norg.eclipse.wst.sse.core.ModelManagerImpl.getModelForRead(ModelManagerImpl.java:1209)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.updateJavaInfo(JSPSearchDocument.java:115)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.\u003cinit\u003e(JSPSearchDocument.java:56)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.createSearchDocument(JSPSearchSupport.java:393)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.addJspFile(JSPSearchSupport.java:298)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPIndexManager$ProcessFilesJob.run(JSPIndexManager.java:208)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\njava.lang.NoClassDefFoundError:\norg/eclipse/jst/jsp/core/contentmodel/TaglibIndex$ResourceChangeListener\nat org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cinit\u003e(TaglibIndex.java:102)\nat org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cclinit\u003e(TaglibIndex.java:84)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.loadTaglib(TLDCMDocumentManager.java:785)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.getCMDocument(TLDCMDocumentManager.java:625)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.enableTaglibFromURI(TLDCMDocumentManager.java:89)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib(TLDCMDocumentManager.java:397)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib(TLDCMDocumentManager.java:342)\nat\norg.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.nodeParsed(TLDCMDocumentManager.java:218)\nat\norg.eclipse.wst.xml.core.internal.parser.XMLSourceParser.fireNodeParsed(XMLSourceParser.java:117)\nat\norg.eclipse.jst.jsp.core.internal.parser.JSPSourceParser.parseNodes(JSPSourceParser.java:306)\nat\norg.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getDocumentRegions(XMLSourceParser.java:149)\nat\norg.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.reparse(BasicStructuredDocument.java:2205)\nat\norg.eclipse.jst.jsp.core.contentmodel.TaglibController$FileBufferListener.bufferCreated(TaglibController.java:91)\nat\norg.eclipse.core.internal.filebuffers.TextFileBufferManager.fireBufferCreated(TextFileBufferManager.java:406)\nat\norg.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:89)\nat\norg.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel(FileBufferModelManager.java:412)\nat\norg.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:302)\nat\norg.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:288)\nat\norg.eclipse.wst.sse.core.ModelManagerImpl.getModelForRead(ModelManagerImpl.java:1209)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.updateJavaInfo(JSPSearchDocument.java:115)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.\u003cinit\u003e(JSPSearchDocument.java:56)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.createSearchDocument(JSPSearchSupport.java:393)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.addJspFile(JSPSearchSupport.java:298)\nat\norg.eclipse.jst.jsp.core.internal.java.search.JSPIndexManager$ProcessFilesJob.run(JSPIndexManager.java:208)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)",
    "Although I had trouble reproducting the exact CNF error, I could reproduce \nother CNF errors as a result of the JSPIndexManager#ProcessFilesJob.\n\nAlong with checking if search is canceled, we should also be checking\nif the framework is shutting down.  I\u0027ll attach a patch.",
    "Created an attachment (id\u003d16803)\nJSPIndexManager patch\n\nchecks if OSGI framwork is shutting down everywhere it checks if the Job is\ncanceled.",
    "fixed 3 things in HEAD\n\n- cancel indexing job if OSGI framework is shutting down\n- fixed the start/stop order in JSPCorePlugin to work more logically\n  with dependency order\n- added a check if JSPSearchSupport canceled in \n  JSPSearchDocument.updateJavaInfo(...) since that seems to kick off\n  a chain of JSP Core class dependent code...",
    "Adding Jeffrey for help in verifying",
    "Marking as verified as I know this issue is fixed (or correctly categorized).\nIf, as originator, you disagree or still see, please re-open, or open a new bug. \n\nThanks very much for reporting and helping make WTP better. \n",
    "This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.\n\nThanks, John Lanuti"
  ],
  "commentCreationDates": [
    "2004-12-21T06:39:31+01:00",
    "2004-12-21T18:11:38+01:00",
    "2004-12-21T18:18:03+01:00",
    "2004-12-21T19:41:17+01:00",
    "2005-06-30T06:11:06+02:00",
    "2005-07-25T17:50:57+02:00",
    "2006-11-28T20:38:53+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassNotFoundException",
      "message": "The class \"org.eclipse.jst.jsp.core.contentmodel.TaglibIndex$ResourceChangeListener\" cannot be loaded because the system is shutting down and the plug-in \"org.eclipse.jst.jsp.core\" has already been stopped.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.shouldActivateFor",
          "source": "EclipseClassLoader.java:147"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass",
          "source": "EclipseClassLoader.java:62"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:371"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:402"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:93"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cinit\u003e",
          "source": "TaglibIndex.java:102"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cclinit\u003e",
          "source": "TaglibIndex.java:84"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.loadTaglib",
          "source": "TLDCMDocumentManager.java:785"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.getCMDocument",
          "source": "TLDCMDocumentManager.java:625"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.enableTaglibFromURI",
          "source": "TLDCMDocumentManager.java:89"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib",
          "source": "TLDCMDocumentManager.java:397"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib",
          "source": "TLDCMDocumentManager.java:342"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.nodeParsed",
          "source": "TLDCMDocumentManager.java:218"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.fireNodeParsed",
          "source": "XMLSourceParser.java:117"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.parser.JSPSourceParser.parseNodes",
          "source": "JSPSourceParser.java:306"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getDocumentRegions",
          "source": "XMLSourceParser.java:149"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.reparse",
          "source": "BasicStructuredDocument.java:2205"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.TaglibController$FileBufferListener.bufferCreated",
          "source": "TaglibController.java:91"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.fireBufferCreated",
          "source": "TextFileBufferManager.java:406"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect",
          "source": "TextFileBufferManager.java:89"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel",
          "source": "FileBufferModelManager.java:412"
        },
        {
          "method": "org.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel",
          "source": "ModelManagerImpl.java:302"
        },
        {
          "method": "org.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel",
          "source": "ModelManagerImpl.java:288"
        },
        {
          "method": "org.eclipse.wst.sse.core.ModelManagerImpl.getModelForRead",
          "source": "ModelManagerImpl.java:1209"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.updateJavaInfo",
          "source": "JSPSearchDocument.java:115"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.\u003cinit\u003e",
          "source": "JSPSearchDocument.java:56"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.createSearchDocument",
          "source": "JSPSearchSupport.java:393"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.addJspFile",
          "source": "JSPSearchSupport.java:298"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPIndexManager$ProcessFilesJob.run",
          "source": "JSPIndexManager.java:208"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "81713",
      "date": "2004-12-21T06:39:31+01:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/jst/jsp/core/contentmodel/TaglibIndex$ResourceChangeListener",
      "elements": [
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cinit\u003e",
          "source": "TaglibIndex.java:102"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.TaglibIndex.\u003cclinit\u003e",
          "source": "TaglibIndex.java:84"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.loadTaglib",
          "source": "TLDCMDocumentManager.java:785"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager.getCMDocument",
          "source": "TLDCMDocumentManager.java:625"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.enableTaglibFromURI",
          "source": "TLDCMDocumentManager.java:89"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib",
          "source": "TLDCMDocumentManager.java:397"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.processTaglib",
          "source": "TLDCMDocumentManager.java:342"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.tld.TLDCMDocumentManager$DirectiveStructuredDocumentRegionHandler.nodeParsed",
          "source": "TLDCMDocumentManager.java:218"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.fireNodeParsed",
          "source": "XMLSourceParser.java:117"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.parser.JSPSourceParser.parseNodes",
          "source": "JSPSourceParser.java:306"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getDocumentRegions",
          "source": "XMLSourceParser.java:149"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.reparse",
          "source": "BasicStructuredDocument.java:2205"
        },
        {
          "method": "org.eclipse.jst.jsp.core.contentmodel.TaglibController$FileBufferListener.bufferCreated",
          "source": "TaglibController.java:91"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.fireBufferCreated",
          "source": "TextFileBufferManager.java:406"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect",
          "source": "TextFileBufferManager.java:89"
        },
        {
          "method": "org.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel",
          "source": "FileBufferModelManager.java:412"
        },
        {
          "method": "org.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel",
          "source": "ModelManagerImpl.java:302"
        },
        {
          "method": "org.eclipse.wst.sse.core.ModelManagerImpl._commonGetModel",
          "source": "ModelManagerImpl.java:288"
        },
        {
          "method": "org.eclipse.wst.sse.core.ModelManagerImpl.getModelForRead",
          "source": "ModelManagerImpl.java:1209"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.updateJavaInfo",
          "source": "JSPSearchDocument.java:115"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchDocument.\u003cinit\u003e",
          "source": "JSPSearchDocument.java:56"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.createSearchDocument",
          "source": "JSPSearchSupport.java:393"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPSearchSupport.addJspFile",
          "source": "JSPSearchSupport.java:298"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.search.JSPIndexManager$ProcessFilesJob.run",
          "source": "JSPIndexManager.java:208"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "81713",
      "date": "2004-12-21T06:39:31+01:00",
      "product": "Web Tools",
      "component": "jst.jsp",
      "severity": "major"
    }
  ],
  "groupId": "81713",
  "bugId": "81713",
  "date": "2004-12-21T06:39:31+01:00",
  "product": "Web Tools",
  "component": "jst.jsp",
  "severity": "major"
}