{
  "comments": [
    "I have used only TPTP from http://www.eclipse.org/tptp/home/downloads/drops/TPTP-4.2.0.2.html\nand imported old 0.1 format was symptom catalog and access.log.\n\nSet SUN JDK 1.5 and run the TPTP xpath analysis on access.log\nWorks fine.\nBut if I apply TPTP xpath patch on top of above driver from http://download.torolab.ibm.com/download/TPTP/4.2.0.2/patch/bug141647.zip,\nI get OutOfMemoryError.\nAC consumers are on SUN JDK 1.5 and that is why this is very important to get it fix\n\n!SESSION 2006-08-23 13:15:34.640 -----------------------------------------------Without TPTP XPATH Patch\neclipse.buildId\u003dM20060629-1905\njava.fullversion\u003dJ2RE 1.5.0 IBM J9 2.3 Windows XP x86-32 j9vmwi3223-20060504 (JIT enabled)\nJ9VM - 20060501_06428_lHdSMR\nJIT  - 20060428_1800_r8\nGC   - 20060501_AA\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -clean\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:15:35.651\n!MESSAGE Duplicate feature found on site platform:/base/ : org.apache.commons_logging.feature\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:15:37.454\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.aix.ppc_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:15:37.464\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.hpux.PA_RISC_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:15:37.464\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.linux.x86_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:15:37.464\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.solaris.sparc_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.tptp.monitoring.logui 1 1 2006-08-23 13:16:57.499\n!MESSAGE LogImportJob.run C:\\TSL\\resources\\perf\\accessTest_20k.log: deltaTime\u003d6460 - usedMemoryDelta\u003d115317384 - freeMemoryDelta\u003d2305912 - totalMemoryDelta\u003d117623296 - usedMemoryAfter\u003d175722552 - freeMemoryAfter\u003d6561736 - totalMemoryAfter\u003d182284288\n\n!ENTRY org.eclipse.osgi 2 1 2006-08-23 13:17:02.246\n!MESSAGE NLS missing message: _88 in: org.eclipse.hyades.sdb.internal.editors.messages\n\n!ENTRY org.eclipse.osgi 2 1 2006-08-23 13:17:02.256\n!MESSAGE NLS missing message: _89 in: org.eclipse.hyades.sdb.internal.editors.messages\n\n!ENTRY org.eclipse.hyades.sdb 1 1 2006-08-23 13:17:15.074\n!MESSAGE ImportSymptomDBPage2.run : deltaTime\u003d6279 - usedMemoryDelta\u003d129123600 - freeMemoryDelta\u003d54281456 - totalMemoryDelta\u003d183405056 - usedMemoryAfter\u003d282802912 - freeMemoryAfter\u003d107727136 - totalMemoryAfter\u003d390530048\n\n!ENTRY org.eclipse.tptp.platform.log.views 1 1 2006-08-23 13:18:44.863\n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d63281 - usedMemoryDelta\u003d75672432 - freeMemoryDelta\u003d-75672432 - totalMemoryDelta\u003d0 - usedMemoryAfter\u003d374419888 - freeMemoryAfter\u003d16110160 - totalMemoryAfter\u003d390530048\n!SESSION 2006-08-23 13:25:05.300 -----------------------------------------------With TPTP XPATH Patch\neclipse.buildId\u003dM20060629-1905\njava.fullversion\u003dJ2RE 1.5.0 IBM J9 2.3 Windows XP x86-32 j9vmwi3223-20060504 (JIT enabled)\nJ9VM - 20060501_06428_lHdSMR\nJIT  - 20060428_1800_r8\nGC   - 20060501_AA\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -clean\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:25:08.815\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.aix.ppc_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:25:08.835\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.hpux.PA_RISC_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:25:08.835\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.linux.x86_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.update.configurator 2006-08-23 13:25:08.835\n!MESSAGE Could not install bundle plugins/org.eclipse.hyades.execution.solaris.sparc_4.2.0.v200606131519/   No Bundle-NativeCode match\n\n!ENTRY org.eclipse.osgi 2 1 2006-08-23 13:25:20.853\n!MESSAGE NLS missing message: _88 in: org.eclipse.hyades.sdb.internal.editors.messages\n\n!ENTRY org.eclipse.osgi 2 1 2006-08-23 13:25:20.853\n!MESSAGE NLS missing message: _89 in: org.eclipse.hyades.sdb.internal.editors.messages\n\n!ENTRY org.eclipse.ui 4 4 2006-08-23 13:27:40.834\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 2006-08-23 13:27:40.834\n!MESSAGE java.lang.OutOfMemoryError\n!STACK 0\njava.lang.OutOfMemoryError\n\tat com.ibm.oti.vm.VM.initializeClassLoader(Native Method)\n\tat java.lang.ClassLoader.\u003cinit\u003e(ClassLoader.java:114)\n\tat org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler$MyClassLoader.\u003cinit\u003e(EclipseCompiler.java:316)\n\tat org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler.generateClass(EclipseCompiler.java:78)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.buildCompiledExpression(CompilerHelper.java:150)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.getCompiledExpressionEvaluator(CompilerHelper.java:116)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile(FastXPathEngine.java:160)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile(FastXPathEngine.java:114)\n\tat org.eclipse.tptp.platform.provisional.fastxpath.FastXPathAPI.getCompiledExpressionEvaluator(FastXPathAPI.java:253)\n\tat org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.processCBECommonBaseEvents(XPathCorrelationEngine.java:274)\n\tat org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.buildResults(XPathCorrelationEngine.java:216)\n\tat org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.correlate(XPathCorrelationEngine.java:171)\n\tat org.eclipse.hyades.sdb.internal.util.LogAnalyzerDelegator.correlate(LogAnalyzerDelegator.java:76)\n\tat org.eclipse.tptp.platform.log.views.internal.actions.ExtendedAnalyzeAction$1.run(ExtendedAnalyzeAction.java:133)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n!ENTRY org.eclipse.tptp.platform.log.views 1 1 2006-08-23 13:27:40.934\n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d124149 - usedMemoryDelta\u003d-46776376 - freeMemoryDelta\u003d654651448 - totalMemoryDelta\u003d607875072 - usedMemoryAfter\u003d233868472 - freeMemoryAfter\u003d715352392 - totalMemoryAfter\u003d949220864\n\n!ENTRY org.eclipse.core.jobs 4 2 2006-08-23 13:27:40.934\n!MESSAGE An internal error occurred during: \"Analyzing...\".\n!STACK 0\njava.lang.OutOfMemoryError\n\tat com.ibm.oti.vm.VM.initializeClassLoader(Native Method)\n\tat java.lang.ClassLoader.\u003cinit\u003e(ClassLoader.java:114)\n\tat org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler$MyClassLoader.\u003cinit\u003e(EclipseCompiler.java:316)\n\tat org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler.generateClass(EclipseCompiler.java:78)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.buildCompiledExpression(CompilerHelper.java:150)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.getCompiledExpressionEvaluator(CompilerHelper.java:116)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile(FastXPathEngine.java:160)\n\tat org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile(FastXPathEngine.java:114)\n\tat org.eclipse.tptp.platform.provisional.fastxpath.FastXPathAPI.getCompiledExpressionEvaluator(FastXPathAPI.java:253)\n\tat org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.processCBECommonBaseEvents(XPathCorrelationEngine.java:274)\n\tat org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.buildResults(XPathCorrelationEngine.java:216)\n\tat org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.correlate(XPathCorrelationEngine.java:171)\n\tat org.eclipse.hyades.sdb.internal.util.LogAnalyzerDelegator.correlate(LogAnalyzerDelegator.java:76)\n\tat org.eclipse.tptp.platform.log.views.internal.actions.ExtendedAnalyzeAction$1.run(ExtendedAnalyzeAction.java:133)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "cc",
    "Sorry, I meen IBM JDK 1.5 :-)\n\n",
    "Praful, according to the trace stack you provided. \u0027jre14\u0027 is detected and used.",
    "Would you also provide the access.log and symptom catalog to reproduce the problem.",
    "This problem also in tptp.sdk-TPTP-4.2.1-200608041327.zip",
    "From the trace you can see I have used IBM JDK 1.5\njava.fullversion\u003dJ2RE 1.5.0 IBM J9 2.3 Windows XP x86-32 j9vmwi3223-20060504\n(JIT enabled)\nMay be JRE detection is not correct.",
    "Eugene, it\u0027s OK to use the org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine for IBM JRE 5 because both IBM JREs 1.4.2 and 5 are using the same org.apache.XPathAPI. Sun is using in JDK 5 a different XPathAPI and not the Apache one.",
    "Thanks Alex for your information. \nPraful, does the problem happen in a particual JVM or it\u0027s also happening in JVM other than IBM JDK 1.5? IBM/SUN/1.4.2/1.5?\n\nThanks.",
    "It works in IBM JDK 1.4.2.\nI have not tested this in SUN JVN",
    "Created an attachment (id\u003d48713)\nPatch\n\nPlease test the attached patch that seems to solve the OutOfMemoryError.",
    "Thanks Alex, the patch you provided is reviewed and smoketested. It solves the memory leak problem in the code.\n\nI have tested the patch on IBM 1.4.2, IBM 5, SUN 1.4.2 and SUN 5 and all pass using -Xms256m and -Xmx512m\n\nHere are the performance measurement from the different JVM.\n-20000 cbe events, 11600 symotom definitions, analysis one event 3 times\n\njava version \"1.4.2\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)\nClassic VM (build 1.4.2, J2RE 1.4.2 IBM Windows 32 build cndev-20040511 (JIT ena\nbled: jitc))\n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d206627 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d1081 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d641 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d641 \n\nIBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 Windows 2000 x86-32 j9vmwi3223-20060\n817a (JIT enabled)\nJ9VM - 20060816_07652_lHdSMR\nJIT  - 20060816_2032_r8\nGC   - 20060815_AA)\nJCL  - 20060817\n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d362511 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d831 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d651 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d501\n\njava version \"1.4.2_11\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_11-b06)\nJava HotSpot(TM) Client VM (build 1.4.2_11-b06, mixed mode)\n\n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d164637 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d712 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d620 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d631\n\njava version \"1.5.0_08\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_08-b03)\nJava HotSpot(TM) Client VM (build 1.5.0_08-b03, mixed mode, sharing)\n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d150747 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d731 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d621 \n!MESSAGE ExtendedAnalyze.run - org.eclipse.tptp.symptom.analysis.XPathAnalysisOperation: deltaTime\u003d661 ",
    "Created an attachment (id\u003d48739)\nupdated patch\n\n",
    "Update component.",
    "fixed in 4.2.1 and HEAD",
    "The OOM exception is thrown due to the fact that maximum number of classloader is reached. For historical reasons the J9 JVM imposes an artificial limit on the maximum number of classloaders that an application can create. To workaround the problem without the fix posted here(for earlier drivers), user can adjust the value with JVM argument -Xmxcl. -Xmxcl16384 should also work around the problem reported here. ",
    "Closed"
  ],
  "commentCreationDates": [
    "2006-08-23T19:43:45+02:00",
    "2006-08-23T19:46:05+02:00",
    "2006-08-23T19:47:34+02:00",
    "2006-08-23T19:53:29+02:00",
    "2006-08-23T19:55:48+02:00",
    "2006-08-23T20:06:18+02:00",
    "2006-08-23T20:13:07+02:00",
    "2006-08-23T21:10:05+02:00",
    "2006-08-23T21:21:54+02:00",
    "2006-08-23T23:07:52+02:00",
    "2006-08-25T15:36:04+02:00",
    "2006-08-25T17:34:15+02:00",
    "2006-08-25T17:43:24+02:00",
    "2006-08-25T18:30:10+02:00",
    "2006-08-30T16:28:03+02:00",
    "2006-08-31T19:36:44+02:00",
    "2006-09-15T22:54:18+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.OutOfMemoryError",
      "elements": [
        {
          "method": "com.ibm.oti.vm.VM.initializeClassLoader",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.\u003cinit\u003e",
          "source": "ClassLoader.java:114"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler$MyClassLoader.\u003cinit\u003e",
          "source": "EclipseCompiler.java:316"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler.generateClass",
          "source": "EclipseCompiler.java:78"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.buildCompiledExpression",
          "source": "CompilerHelper.java:150"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.getCompiledExpressionEvaluator",
          "source": "CompilerHelper.java:116"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile",
          "source": "FastXPathEngine.java:160"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile",
          "source": "FastXPathEngine.java:114"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.fastxpath.FastXPathAPI.getCompiledExpressionEvaluator",
          "source": "FastXPathAPI.java:253"
        },
        {
          "method": "org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.processCBECommonBaseEvents",
          "source": "XPathCorrelationEngine.java:274"
        },
        {
          "method": "org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.buildResults",
          "source": "XPathCorrelationEngine.java:216"
        },
        {
          "method": "org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.correlate",
          "source": "XPathCorrelationEngine.java:171"
        },
        {
          "method": "org.eclipse.hyades.sdb.internal.util.LogAnalyzerDelegator.correlate",
          "source": "LogAnalyzerDelegator.java:76"
        },
        {
          "method": "org.eclipse.tptp.platform.log.views.internal.actions.ExtendedAnalyzeAction$1.run",
          "source": "ExtendedAnalyzeAction.java:133"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "154894",
      "date": "2006-08-23T19:43:45+02:00",
      "product": "TPTP Profiling",
      "component": "Platform.Model",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.OutOfMemoryError",
      "elements": [
        {
          "method": "com.ibm.oti.vm.VM.initializeClassLoader",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.\u003cinit\u003e",
          "source": "ClassLoader.java:114"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler$MyClassLoader.\u003cinit\u003e",
          "source": "EclipseCompiler.java:316"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.fastxpath.compiler.EclipseCompiler.generateClass",
          "source": "EclipseCompiler.java:78"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.buildCompiledExpression",
          "source": "CompilerHelper.java:150"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.compiler.CompilerHelper.getCompiledExpressionEvaluator",
          "source": "CompilerHelper.java:116"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile",
          "source": "FastXPathEngine.java:160"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.jre14.fastxpath.FastXPathEngine.compile",
          "source": "FastXPathEngine.java:114"
        },
        {
          "method": "org.eclipse.tptp.platform.provisional.fastxpath.FastXPathAPI.getCompiledExpressionEvaluator",
          "source": "FastXPathAPI.java:253"
        },
        {
          "method": "org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.processCBECommonBaseEvents",
          "source": "XPathCorrelationEngine.java:274"
        },
        {
          "method": "org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.buildResults",
          "source": "XPathCorrelationEngine.java:216"
        },
        {
          "method": "org.eclipse.tptp.symptom.analysis.XPathCorrelationEngine.correlate",
          "source": "XPathCorrelationEngine.java:171"
        },
        {
          "method": "org.eclipse.hyades.sdb.internal.util.LogAnalyzerDelegator.correlate",
          "source": "LogAnalyzerDelegator.java:76"
        },
        {
          "method": "org.eclipse.tptp.platform.log.views.internal.actions.ExtendedAnalyzeAction$1.run",
          "source": "ExtendedAnalyzeAction.java:133"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "154894",
      "date": "2006-08-23T19:43:45+02:00",
      "product": "TPTP Profiling",
      "component": "Platform.Model",
      "severity": "blocker"
    }
  ],
  "groupId": "154894",
  "bugId": "154894",
  "date": "2006-08-23T19:43:45+02:00",
  "product": "TPTP Profiling",
  "component": "Platform.Model",
  "severity": "blocker"
}