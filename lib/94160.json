{
  "comments": [
    "Given code:\n\npackage a;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ATest {\n\t\u003cT\u003e List\u003cT\u003e generateList(Class\u003cT\u003e clazz) {\n\t\treturn new ArrayList\u003cT\u003e();\n\t}\n}\n\nclass CTest extends ATest {\n\tprivate List\u003cString\u003e myList \u003d generateList(String.class);\n\t\n\tCTest() {\n\t\tmyList \u003d new ArrayList\u003cString\u003e();\n\t}\n}\n\nIf I try to Pull Up field myList, hitting \"Finish\" generates \"Unexpected error\nwhile performing the refactoring.  See error log for more information.\"  Error\nlog says:\n\njava.lang.reflect.InvocationTargetException\nat\norg.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:90)\nat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\nCaused by: Java Model Exception: Java Model Status\n[gmock(Class\u003cIProgressMonitor\u003e)\n{key\u003dLorg/jmock/generic/GenericMockObjectTestCase;.gmock\u003cT:Ljava/lang/Object;\u003e(Ljava/lang/Class\u003cTT;\u003e;Ljava/lang/String;)Lorg/jmock/generic/GenericMock\u003cTT;\u003e;}\n[in GenericMockObjectTestCase [in GenericMockObjectTestCase.java [in\norg.jmock.generic [in src [in org.jmock]]]]] does not exist]\nat\norg.eclipse.jdt.internal.core.JavaElement.newNotPresentException(JavaElement.java:468)\nat org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:499)\nat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:232)\nat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:218)\nat org.eclipse.jdt.internal.core.Member.getFlags(Member.java:147)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustOutgoingVisibility(MemberVisibilityAdjustor.java:671)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustOutgoingVisibility(MemberVisibilityAdjustor.java:690)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustOutgoingVisibility(MemberVisibilityAdjustor.java:722)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustVisibility(MemberVisibilityAdjustor.java:763)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoring.createChangeManager(PullUpRefactoring.java:951)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoring.checkFinalConditions(PullUpRefactoring.java:617)\nat\norg.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:84)\nat\norg.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:114)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)\nat\norg.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:86)\n... 1 more\nRoot exception:\nJava Model Exception: Java Model Status [gmock(Class\u003cIProgressMonitor\u003e)\n{key\u003dLorg/jmock/generic/GenericMockObjectTestCase;.gmock\u003cT:Ljava/lang/Object;\u003e(Ljava/lang/Class\u003cTT;\u003e;Ljava/lang/String;)Lorg/jmock/generic/GenericMock\u003cTT;\u003e;}\n[in GenericMockObjectTestCase [in GenericMockObjectTestCase.java [in\norg.jmock.generic [in src [in org.jmock]]]]] does not exist]\nat\norg.eclipse.jdt.internal.core.JavaElement.newNotPresentException(JavaElement.java:468)\nat org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:499)\nat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:232)\nat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:218)\nat org.eclipse.jdt.internal.core.Member.getFlags(Member.java:147)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustOutgoingVisibility(MemberVisibilityAdjustor.java:671)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustOutgoingVisibility(MemberVisibilityAdjustor.java:690)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustOutgoingVisibility(MemberVisibilityAdjustor.java:722)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.MemberVisibilityAdjustor.adjustVisibility(MemberVisibilityAdjustor.java:763)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoring.createChangeManager(PullUpRefactoring.java:951)\nat\norg.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoring.checkFinalConditions(PullUpRefactoring.java:617)\nat\norg.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:84)\nat\norg.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:114)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)\nat\norg.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:86)\nat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)",
    "David, which build are you using ?",
    "Just confirmed on I20050509-2010",
    "It seems like there is something wrong with the resolved source method \nfor \u0027generateList\u0027 which the search engine returns during visibility checking.\n\nThe output of toString() looks as follows:\n\ngenerateList(Class\u003cString\u003e) (not open) \n{key\u003dLC;.generateList\u003cT:Ljava/lang/Object;\u003e(Ljava/lang/Class\u003cTT;\u003e;)\nLjava/util/List\u003cTT;\u003e;} [in C [in [Working copy] C.java [in \u003cdefault\u003e [in \n\u003cproject root\u003e [in Test]]]]]\n\nThe type arguments encoded in the key do not match the parameter types of the \nJava element.\n\nCalling #getFlags() then causes the exception\n\nMoving to JDT Core for comments",
    "+1 for RC2",
    "Fixed and released in HEAD.\n\nMethod handle was not correct due to the fact it was built on parameterized\nmethod binding instead of original one.\n\nNow search engine correctly find messages sent in field declaration.\n\n[jdt-core internal]\nChange done in MethodLocator.reportDeclaration(...)\nTest case added in JavaSearcgBugsTests",
    "Verified using N20050606-0010 + JDT/Core HEAD",
    "Verified with I20050610-0010."
  ],
  "commentCreationDates": [
    "2005-05-09T19:01:32+02:00",
    "2005-05-09T23:39:32+02:00",
    "2005-05-10T11:58:23+02:00",
    "2005-05-25T15:07:24+02:00",
    "2005-06-03T17:01:50+02:00",
    "2005-06-06T10:08:43+02:00",
    "2005-06-06T22:38:54+02:00",
    "2005-06-10T12:51:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run",
          "source": "WorkbenchRunnableAdapter.java:90"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "94160",
      "date": "2005-05-09T19:01:32+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "94160",
  "bugId": "94160",
  "date": "2005-05-09T19:01:32+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}