{
  "comments": [
    "Build ID: I20070625-1500\n\nSteps To Reproduce:\n0. Have a clean elipse/wtp, no runtimes or servers defined (just to be sure ;)\n1. New Dynamic Web Project\n2. enter name, click New Target runtime\n3. Choose JBoss \u003e JBoss 4.2 \n4. finish\n5. open JBoss 4.2 server from servers view and an exception occur.\n\norg.eclipse.core.runtime.AssertionFailedException: assertion failed: \n\tat org.eclipse.core.runtime.Assert.isTrue(Assert.java:109)\n\tat org.eclipse.core.runtime.Assert.isTrue(Assert.java:95)\n\tat org.eclipse.ui.part.MultiPageEditorPart.setActivePage(MultiPageEditorPart.java:695)\n\tat org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:287)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:661)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:426)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:592)\n\n\nMore information:\nThe exception is an assertion exception because no page is actually created by the wizard because the following code NPE\u0027s:\norg.eclipse.jst.server.generic.core.internal.GenericServer:\npublic ServerRuntime getServerDefinition(){\n        IServer server \u003d getServer();\n\t\tString rtTypeId \u003d server.getRuntime().getRuntimeType().getId();\n    \nthe runtime is null.\n\nFor some reason it is only JBoss 4.2 that shows this behavior and for a weird reason we (JBoss/RHDS Team) had the exact same issue in our custom adapter.\n\nWe fixed ours by inserting\n\nIRuntime r \u003d (IRuntime) getTaskModel().getObject(TaskModel.TASK_RUNTIME);\n\t\truntime \u003d (IJBossServerRuntime) r.loadAdapter(IJBossServerRuntime.class, null);\nserverWC.setRuntime(r);\n\nin our performFinish() of the wizard fragment.\n\nI\u0027m not sure this will help the Generic server definiton wizards, but that is at least what we did.\n\nNote: we figured this out when we saw that the wizard hands us a runtime X, but the runtime that actually gets saved is runtime Y so the server actually points to runtime X which for just seem to be forgotten so when the server opens again it is forgotten.\n\nAnother note is that if we do New Wizard \u003e Server directly things works fine.\n\nIt is only throught he dynamic web wizard or other facet based wizards we found this isssue.",
    "Just to chime in ;)\n\nWhen performFinish() is accessed by the wizard, the taskModel holds the runtime and the server.  In the instance Max is talking about, when creating a server and runtime from within a faceted project wizard, you get something that looks like this:\n\n Task Model (object 1)\n  |-  Runtime (object 2)\n  |-  Server (object 3)\n        |- runtime (object 4)\n\nIn the end, the task model\u0027s runtime (2) gets saved.\nThe server thinks its runtime is (4), but (4) does not get saved. \nSo you have a created runtime (2), and a created server (3), but\nthe server does not get associated with the runtime. \n\nI have not been able to track down where in the code this is being caused. ",
    "Has anyone tried this on a current 2.0.1 build? This sounds like bug 192046, which I fixed a few weeks ago in 2.0.1.",
    "Tim: I believe you\u0027re right. This is a dup of bug 192046,",
    "Thanks, resolving as a duplicate (already fixed).\n\n*** This bug has been marked as a duplicate of bug 192046 ***"
  ],
  "commentCreationDates": [
    "2007-08-10T11:42:29+02:00",
    "2007-08-10T21:17:54+02:00",
    "2007-08-13T17:56:18+02:00",
    "2007-08-16T09:49:15+02:00",
    "2007-08-16T15:58:37+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.AssertionFailedException",
      "message": "assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isTrue",
          "source": "Assert.java:109"
        },
        {
          "method": "org.eclipse.core.runtime.Assert.isTrue",
          "source": "Assert.java:95"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.setActivePage",
          "source": "MultiPageEditorPart.java:695"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.createPartControl",
          "source": "MultiPageEditorPart.java:287"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:661"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:426"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:592"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "199538",
      "duplicateId": "192046",
      "date": "2007-08-10T11:42:29+02:00",
      "product": "Web Tools",
      "component": "wst.server",
      "severity": "normal"
    }
  ],
  "groupId": "192046",
  "bugId": "199538",
  "duplicateId": "192046",
  "date": "2007-08-10T11:42:29+02:00",
  "product": "Web Tools",
  "component": "wst.server",
  "severity": "normal"
}