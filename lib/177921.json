{
  "comments": [
    "The following exception occasionally (frequently with certain JVMs) occurs when shutting down the OSGi framework or JVM.\n\nSimon, I know we\u0027ve already discussed this and you have a fix in place. I found it necessary, however, to record this defect for tracking purposes because we\u0027re seeing it often on the JVM provided with the Arcom Apollo.\n\n[ERROR] 2007-03-17 15:52:50.869 - BundleActivationManager@36d3e5ce: (SAT-100.701) Unknown BundleContext\njava.lang.IllegalArgumentException: (SAT-100.701) Unknown BundleContext\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleManager.checkShutdownIsAllowed(BundleManager.java:123)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleManager.shutdown(BundleManager.java:341)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.Activator.shutdownBundleDependencyManager(Activator.java:265)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.Activator.deactivate(Activator.java:156)\n        at org.eclipse.soda.sat.core.framework.BaseBundleActivator$1.deactivate(BaseBundleActivator.java:284)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.deactivate(BundleActivationManager.java:494)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.performDeactivation(BundleActivationManager.java:1288)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.access$1(BundleActivationManager.java:1274)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager$1.released(BundleActivationManager.java:395)\n        at org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer.serviceReleased(ImportServiceRecordContainer.java:493)\n        at org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer.access$1(ImportServiceRecordContainer.java:480)\n        at org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer$4.serviceReleased(ImportServiceRecordContainer.java:286)\n        at org.eclipse.soda.sat.core.internal.record.ImportServiceRecord.release(ImportServiceRecord.java:492)\n        at org.eclipse.soda.sat.core.internal.record.ImportServiceRecord.release(ImportServiceRecord.java:460)\n        at org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer$3.execute(ImportServiceRecordContainer.java:90)\n        at org.eclipse.soda.sat.core.internal.record.container.ServiceRecordContainer.doForService(ServiceRecordContainer.java:353)\n        at org.eclipse.soda.sat.core.internal.record.container.ServiceRecordContainer.doForEach(ServiceRecordContainer.java:321)\n        at org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer.release(ImportServiceRecordContainer.java:405)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.releaseImportedServices(BundleActivationManager.java:1335)\n        at org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.stop(BundleActivationManager.java:1706)\n        at org.eclipse.soda.sat.core.framework.BaseBundleActivator.stop(BaseBundleActivator.java:1105)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl$3.run(BundleContextImpl.java:1040)\n        at java.security.AccessController.doPrivileged1(Native Method)\n        at java.security.AccessController.doPrivileged(AccessController.java:351)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop(BundleContextImpl.java:1036)\n        at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:436)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:526)\n        at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1145)\n        at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:640)\n        at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:288)\n        at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:258)\n        at org.eclipse.osgi.framework.internal.core.SystemBundle.suspend(SystemBundle.java:190)\n        at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:619)\n        at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:522)\n        at org.eclipse.osgi.framework.internal.core.OSGi.close(OSGi.java:41)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._close(FrameworkCommandProvider.java:1092)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n        at java.lang.reflect.Method.invoke(Method.java:391)\n        at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:145)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:290)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:275)\n        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:210)\n        at java.lang.Thread.run(Thread.java:568)",
    "My understanding is that this only happened when you disabled the depenendency manager, which is not something that you should be doing other than during testing.  Remember, disabiling the dependency manager was something I suggested to you only to help diagnose the Equinox bug 176782.\n\nWhile this was certainly a bug, it should not happen under normal circumstances. Suffice to say, this is FIXED and should never happen.",
    "2 questions:\n1) we were under the impression that running without bundle dependency manager was an acceptable mode, that it was only used for the SAT tooling, and hence a viable option to run without it for production. \n   So you are saying this is not true, that we should *not* run in production without the dependency manager enabled?\n\n2) In which build is this fixed?",
    "(In reply to comment #1)\n\u003e My understanding is that this only happened when you disabled the depenendency\n\u003e manager, which is not something that you should be doing other than during\n\u003e testing.  Remember, disabiling the dependency manager was something I suggested\n\u003e to you only to help diagnose the Equinox bug 176782.\n\u003e While this was certainly a bug, it should not happen under normal\n\u003e circumstances. Suffice to say, this is FIXED and should never happen.\n\nThis exception will occur when org.eclipse.soda.sat.core.bds.status\u003dtrue.\n",
    "In response to comment 2 from Bruce:\n\n2 answers:\n\n1) You are correct. Disabling the bundle dependency manager is acceptable since it is generally only used by the tooling.  Nevertheless, it is certainly nice to have for debugging.  SAT registers a BundleDependencyService which is effectively a no-op when the manager is disabled.\n\n2) A new build is available in CVS, which can be accessed view your favorite browser:\n\nhttp://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.ohf/plugins/org.eclipse.soda.sat/builds/build_1.0.0.200703181556.zip?revision\u003d1.1\u0026root\u003dTechnology_Project\n\nYou can always check the blog (http://eclipse-sat.blogspot.com/) for the latest build, online documentation and news.  ;-)\n\nPlease try this build and let me know how it goes.",
    "In response to comment 3, setting the property \"org.eclipse.soda.sat.core.bds.status\" to \"true\" would enable the bundle dependency manager.  To disable it you would use:\n\n-Dorg.eclipse.soda.sat.core.bds.status\u003dfalse\n",
    "(In reply to comment #5)\n\u003e In response to comment 3, setting the property\n\u003e \"org.eclipse.soda.sat.core.bds.status\" to \"true\" would enable the bundle\n\u003e dependency manager.  To disable it you would use:\n\u003e -Dorg.eclipse.soda.sat.core.bds.status\u003dfalse\n\nOk. I\u0027m confused. In comment #1, you said\n\n\"My understanding is that this only happened when you disabled the depenendency manager, which is not something that you should be doing other than during testing.\"\n\nComment #3, my comment, was saying that it also happens when the dependency manager is enabled.\n\nTo be clear, this exception will occur when\n\n-Dorg.eclipse.soda.sat.core.bds.status\u003dfalse\n\nAND\n\n-Dorg.eclipse.soda.sat.core.bds.status\u003dtrue.\n\nPerhaps I\u0027m misunderstanding your comment.\n",
    "The misunderstanding was mine.  I did not realize that you were seeing this problem when the property was set to \"true\" and \"false\".  I was thinking that it only happened when you set it to \"false\".  Regardless, it should no longer be a problem with the new build.  Thanks.",
    "Hm... maybe this is a typographic error in your comments, but the following two are different and distinct:\n\n-Dorg.eclipse.soda.sat.core.bds.status\u003dtrue.\n\nAND\n\n-Dorg.eclipse.soda.sat.core.bds.status\u003dtrue\n\n\nin that \"true.\" will typically be interpreted as \"false\" since \"true.\" is NOT the same as \"true\".  In the world of system properties I think you\u0027ll find that \"true\" is true and anything else is false.  Confusion abound!\n",
    "(In reply to comment #8)\n\u003e Hm... maybe this is a typographic error in your comments, but the following two\n\u003e are different and distinct:\n\u003e -Dorg.eclipse.soda.sat.core.bds.status\u003dtrue.\n\u003e AND\n\u003e -Dorg.eclipse.soda.sat.core.bds.status\u003dtrue\n\u003e in that \"true.\" will typically be interpreted as \"false\" since \"true.\" is NOT\n\u003e the same as \"true\".  In the world of system properties I think you\u0027ll find that\n\u003e \"true\" is true and anything else is false.  Confusion abound!\n\nGood catch. Your confusion is well-founded. Fortunately for me, it was a typo in my bugzilla comment not in my config.ini (which, of course, would not include the -D).\n\neclipse.ignoreApp\u003dtrue\nedge.log.threshold\u003dDEBUG\nedge.on.premises\u003dfalse\norg.eclipse.soda.sat.core.bds.status\u003dtrue\norg.eclipse.soda.sat.core.util.logLevel\u003dDEBUG\n\n\n",
    "Yeah, I thought as much, but it\u0027s sometimes difficult to tell.  Communication is hard at the best of times.  Well, I think we can put this one to bed now.  Thanks for your help finding this one, John."
  ],
  "commentCreationDates": [
    "2007-03-18T01:58:58+01:00",
    "2007-03-18T14:40:51+01:00",
    "2007-03-18T18:33:21+01:00",
    "2007-03-18T19:53:44+01:00",
    "2007-03-18T21:16:32+01:00",
    "2007-03-18T21:19:24+01:00",
    "2007-03-18T21:26:23+01:00",
    "2007-03-18T21:30:19+01:00",
    "2007-03-18T21:33:35+01:00",
    "2007-03-18T21:45:06+01:00",
    "2007-03-18T22:23:38+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "(SAT-100.701) Unknown BundleContext",
      "elements": [
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleManager.checkShutdownIsAllowed",
          "source": "BundleManager.java:123"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleManager.shutdown",
          "source": "BundleManager.java:341"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.Activator.shutdownBundleDependencyManager",
          "source": "Activator.java:265"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.Activator.deactivate",
          "source": "Activator.java:156"
        },
        {
          "method": "org.eclipse.soda.sat.core.framework.BaseBundleActivator$1.deactivate",
          "source": "BaseBundleActivator.java:284"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.deactivate",
          "source": "BundleActivationManager.java:494"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.performDeactivation",
          "source": "BundleActivationManager.java:1288"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.access$1",
          "source": "BundleActivationManager.java:1274"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager$1.released",
          "source": "BundleActivationManager.java:395"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer.serviceReleased",
          "source": "ImportServiceRecordContainer.java:493"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer.access$1",
          "source": "ImportServiceRecordContainer.java:480"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer$4.serviceReleased",
          "source": "ImportServiceRecordContainer.java:286"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.ImportServiceRecord.release",
          "source": "ImportServiceRecord.java:492"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.ImportServiceRecord.release",
          "source": "ImportServiceRecord.java:460"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer$3.execute",
          "source": "ImportServiceRecordContainer.java:90"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ServiceRecordContainer.doForService",
          "source": "ServiceRecordContainer.java:353"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ServiceRecordContainer.doForEach",
          "source": "ServiceRecordContainer.java:321"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.record.container.ImportServiceRecordContainer.release",
          "source": "ImportServiceRecordContainer.java:405"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.releaseImportedServices",
          "source": "BundleActivationManager.java:1335"
        },
        {
          "method": "org.eclipse.soda.sat.core.internal.framework.bundle.BundleActivationManager.stop",
          "source": "BundleActivationManager.java:1706"
        },
        {
          "method": "org.eclipse.soda.sat.core.framework.BaseBundleActivator.stop",
          "source": "BaseBundleActivator.java:1105"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$3.run",
          "source": "BundleContextImpl.java:1040"
        },
        {
          "method": "java.security.AccessController.doPrivileged1",
          "source": "Native Method"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "AccessController.java:351"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop",
          "source": "BundleContextImpl.java:1036"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:436"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend",
          "source": "AbstractBundle.java:526"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.suspendBundle",
          "source": "Framework.java:1145"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL",
          "source": "StartLevelManager.java:640"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel",
          "source": "StartLevelManager.java:288"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown",
          "source": "StartLevelManager.java:258"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle.suspend",
          "source": "SystemBundle.java:190"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.shutdown",
          "source": "Framework.java:619"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.close",
          "source": "Framework.java:522"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.close",
          "source": "OSGi.java:41"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._close",
          "source": "FrameworkCommandProvider.java:1092"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute",
          "source": "FrameworkCommandInterpreter.java:145"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand",
          "source": "FrameworkConsole.java:290"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.console",
          "source": "FrameworkConsole.java:275"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.FrameworkConsole.run",
          "source": "FrameworkConsole.java:210"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:568"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "177921",
      "date": "2007-03-18T01:58:58+01:00",
      "product": "OHF",
      "component": "SAT",
      "severity": "normal"
    }
  ],
  "groupId": "177921",
  "bugId": "177921",
  "date": "2007-03-18T01:58:58+01:00",
  "product": "OHF",
  "component": "SAT",
  "severity": "normal"
}