{
  "comments": [
    "I200309300800\n\nWhile running the JDT/UI test cases I got the following exception on the \nconsole.\n\n!ENTRY org.eclipse.core.resources 4 272 Oct 06, 2003 20:20:32.495\n!MESSAGE Could not open indexed store: C:\\tmp\\workspaces\\unit-\ntesting\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\TestProject2\n\\.properties.\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.core.internal.indexing.ObjectStore.commit\n(ObjectStore.java:151)\n\tat org.eclipse.core.internal.indexing.ObjectStore.close\n(ObjectStore.java:86)\n\tat org.eclipse.core.internal.indexing.IndexedStore.create\n(IndexedStore.java:170)\n\tat org.eclipse.core.internal.indexing.IndexedStore.open\n(IndexedStore.java:337)\n\tat org.eclipse.core.internal.properties.IndexedStoreWrapper.open\n(IndexedStoreWrapper.java:41)\n\tat org.eclipse.core.internal.properties.IndexedStoreWrapper.create\n(IndexedStoreWrapper.java:96)\n\tat org.eclipse.core.internal.properties.IndexedStoreWrapper.getStore\n(IndexedStoreWrapper.java:166)\n\tat org.eclipse.core.internal.properties.IndexedStoreWrapper.getIndex\n(IndexedStoreWrapper.java:122)\n\tat org.eclipse.core.internal.properties.IndexedStoreWrapper.getCursor\n(IndexedStoreWrapper.java:172)\n\tat org.eclipse.core.internal.properties.PropertyStore.recordsMatching\n(PropertyStore.java:302)\n\tat org.eclipse.core.internal.properties.PropertyStore.get\n(PropertyStore.java:171)\n\tat org.eclipse.core.internal.properties.PropertyManager.getProperty\n(PropertyManager.java:108)\n\tat org.eclipse.core.internal.resources.Resource.getPersistentProperty\n(Resource.java:898)\n\tat org.eclipse.team.core.RepositoryProvider.getProvider\n(RepositoryProvider.java:364)\n\tat \norg.eclipse.team.internal.core.FileModificationValidatorManager.validateSave\n(FileModificationValidatorManager.java:95)\n\tat org.eclipse.core.internal.resources.Workspace$6.run\n(Workspace.java:2087)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1034)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:432)\n\tat org.eclipse.core.internal.resources.Workspace.validateSave\n(Workspace.java:2093)\n\tat org.eclipse.core.internal.resources.File.setContents(File.java:280)\n\tat \norg.eclipse.core.internal.localstore.FileSystemResourceManager.internalWrite\n(FileSystemResourceManager.java:259)\n\tat org.eclipse.core.internal.resources.Project.writeDescription\n(Project.java:904)\n\tat org.eclipse.core.internal.resources.Project.setDescription\n(Project.java:805)\n\tat org.eclipse.core.internal.resources.Project.setDescription\n(Project.java:827)\n\tat org.eclipse.jdt.testplugin.JavaProjectHelper.addNatureToProject\n(JavaProjectHelper.java:470)\n\tat org.eclipse.jdt.testplugin.JavaProjectHelper.createJavaProject\n(JavaProjectHelper.java:96)\n\tat org.eclipse.jdt.ui.tests.core.AllTypesCacheTest.setUp\n(AllTypesCacheTest.java:86)\n\tat junit.framework.TestCase.runBare(TestCase.java:125)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests\n(RemoteTestRunner.java:395)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run\n(RemoteTestRunner.java:279)\n\tat org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main\n(RemotePluginTestRunner.java:30)\n\tat \norg.eclipse.pde.internal.junit.runtime.UITestApplication.runEventLoop\n(UITestApplication.java:35)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:2089)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:858)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:298)\n\tat org.eclipse.core.launcher.Main.run(Main.java:764)\n\tat org.eclipse.core.launcher.Main.main(Main.java:598)",
    "The null pointer exception is masking the real problem, and is due to unsafe\nexception handling code.\n\nIf an exception is thrown when trying to create an IndexedStore, the underlying\nObjectStore is closed and the underlying PageStore deleted.  Closing the\nObjectStore commits it.\n\nIf an exception is thrown early in the IndexedStore creation process then the\nObjectStore may not have been initialised, and so committing and closing it may\nfail, and that is the exception the user is seeing.\n\nIn order to find out what the real problem is, the exception handling for\nIndexedStore.create must be significantly improved.\n\nFirst of all, the exception handler for IndexedStore.create should be made more\nrobust, and should discard (or prefereably log then discard) _any_ exceptions\nraised while closing the ObjectStore and deleting the PageStore.\n\nSecondly, the ObjectStore.close and ObjectStore.commit methods should be made\nmore robust to ensure that they function correctly even when called before the\nObjectStore is not fully initialised.\n\nI\u0027ll try to upload patch files with more robust implementations.",
    "Created an attachment (id\u003d6362)\nProposed patch for IndexedStore\n\nMade the exception handling for IndexedStore.create more robust so that the\nunderlying exception will always be thrown, regardless of errors in the\nexception handler.",
    "Created an attachment (id\u003d6363)\nProposed patch for ObjectStore\n\nMade the exception handling in ObjectStore.close() more robust, and also added\nchecks in ObjectStore.commit() so that unitialised collection fields are not\naccessed.",
    "Another thought.  ObjectStore.open() checks version numbers and throws an\nException if the version is not supported, as no conversions are defined yet.\n\nThis exception is thrown before the ObjectStore collections are initialised, and\nwould cause the NPEs the user is experiencing.  \n\nHave there been any format changes for the PageStore recently ?",
    "Tests projects are run on a fresh workspace.",
    "\n\n*** This bug has been marked as a duplicate of 78099 ***"
  ],
  "commentCreationDates": [
    "2003-10-07T00:08:43+02:00",
    "2003-10-08T13:00:45+02:00",
    "2003-10-08T13:05:41+02:00",
    "2003-10-08T13:09:35+02:00",
    "2003-10-08T13:24:40+02:00",
    "2003-10-08T14:30:54+02:00",
    "2004-11-08T21:27:59+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.indexing.ObjectStore.commit",
          "source": "ObjectStore.java:151"
        },
        {
          "method": "org.eclipse.core.internal.indexing.ObjectStore.close",
          "source": "ObjectStore.java:86"
        },
        {
          "method": "org.eclipse.core.internal.indexing.IndexedStore.create",
          "source": "IndexedStore.java:170"
        },
        {
          "method": "org.eclipse.core.internal.indexing.IndexedStore.open",
          "source": "IndexedStore.java:337"
        },
        {
          "method": "org.eclipse.core.internal.properties.IndexedStoreWrapper.open",
          "source": "IndexedStoreWrapper.java:41"
        },
        {
          "method": "org.eclipse.core.internal.properties.IndexedStoreWrapper.create",
          "source": "IndexedStoreWrapper.java:96"
        },
        {
          "method": "org.eclipse.core.internal.properties.IndexedStoreWrapper.getStore",
          "source": "IndexedStoreWrapper.java:166"
        },
        {
          "method": "org.eclipse.core.internal.properties.IndexedStoreWrapper.getIndex",
          "source": "IndexedStoreWrapper.java:122"
        },
        {
          "method": "org.eclipse.core.internal.properties.IndexedStoreWrapper.getCursor",
          "source": "IndexedStoreWrapper.java:172"
        },
        {
          "method": "org.eclipse.core.internal.properties.PropertyStore.recordsMatching",
          "source": "PropertyStore.java:302"
        },
        {
          "method": "org.eclipse.core.internal.properties.PropertyStore.get",
          "source": "PropertyStore.java:171"
        },
        {
          "method": "org.eclipse.core.internal.properties.PropertyManager.getProperty",
          "source": "PropertyManager.java:108"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.getPersistentProperty",
          "source": "Resource.java:898"
        },
        {
          "method": "org.eclipse.team.core.RepositoryProvider.getProvider",
          "source": "RepositoryProvider.java:364"
        },
        {
          "method": "org.eclipse.team.internal.core.FileModificationValidatorManager.validateSave",
          "source": "FileModificationValidatorManager.java:95"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace$6.run",
          "source": "Workspace.java:2087"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1034"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:432"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.validateSave",
          "source": "Workspace.java:2093"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.setContents",
          "source": "File.java:280"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.internalWrite",
          "source": "FileSystemResourceManager.java:259"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.writeDescription",
          "source": "Project.java:904"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.setDescription",
          "source": "Project.java:805"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.setDescription",
          "source": "Project.java:827"
        },
        {
          "method": "org.eclipse.jdt.testplugin.JavaProjectHelper.addNatureToProject",
          "source": "JavaProjectHelper.java:470"
        },
        {
          "method": "org.eclipse.jdt.testplugin.JavaProjectHelper.createJavaProject",
          "source": "JavaProjectHelper.java:96"
        },
        {
          "method": "org.eclipse.jdt.ui.tests.core.AllTypesCacheTest.setUp",
          "source": "AllTypesCacheTest.java:86"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:125"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.extensions.TestDecorator.basicRun",
          "source": "TestDecorator.java:22"
        },
        {
          "method": "junit.extensions.TestSetup$1.protect",
          "source": "TestSetup.java:19"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.extensions.TestSetup.run",
          "source": "TestSetup.java:23"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.extensions.TestDecorator.basicRun",
          "source": "TestDecorator.java:22"
        },
        {
          "method": "junit.extensions.TestSetup$1.protect",
          "source": "TestSetup.java:19"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.extensions.TestSetup.run",
          "source": "TestSetup.java:23"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:395"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:279"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:30"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.UITestApplication.runEventLoop",
          "source": "UITestApplication.java:35"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:2089"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:298"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:764"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:598"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "44259",
      "duplicateId": "78099",
      "date": "2003-10-07T00:08:43+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "78099",
  "bugId": "44259",
  "duplicateId": "78099",
  "date": "2003-10-07T00:08:43+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}