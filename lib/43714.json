{
  "comments": [
    "..is obviously a wierd thing to do.  So we should inform people with an error \nmessage rather than spewing a stack shown below at them.  The weaver is in \nfact trying to throw an error message but the \"ResolvedTypeX inAspect\" \nparameter that it tries to get the world from is null.  This is the second \ntime I encounter poor error behavior in the weaver because it is trying to get \nthe message handler from a null thing\u0027s world.  Perhaps it should be getting \nthe message handler from somehwere more accessible?\n\n-----------\n\nnull\njava.lang.NullPointerException\n\tat org.aspectj.weaver.patterns.PerFromSuper.concretize\n(PerFromSuper.java:59)\n\tat org.aspectj.weaver.CrosscuttingMembers.setPerClause\n(CrosscuttingMembers.java:205)\n\tat org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers\n(ResolvedTypeX.java:329)\n\tat org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect\n(CrosscuttingMembersSet.java:50)\n\tat org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile\n(BcelWeaver.java:107)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld\n(AjBuildManager.java:194)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:113)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:70)\n\tat org.aspectj.ajde.internal.CompilerAdapter.compile\n(CompilerAdapter.java:103)\n\tat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run\n(AspectJBuildManager.java:165)\nnull\njava.lang.NullPointerException\n\tat org.aspectj.weaver.patterns.PerFromSuper.concretize\n(PerFromSuper.java:59)\n\tat org.aspectj.weaver.CrosscuttingMembers.setPerClause\n(CrosscuttingMembers.java:205)\n\tat org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers\n(ResolvedTypeX.java:329)\n\tat org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect\n(CrosscuttingMembersSet.java:50)\n\tat org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile\n(BcelWeaver.java:107)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld\n(AjBuildManager.java:194)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:113)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:70)\n\tat org.aspectj.ajde.internal.CompilerAdapter.compile\n(CompilerAdapter.java:103)\n\tat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run\n(AspectJBuildManager.java:165)",
    "included in list under the general category \"improve error messages from weaver\"",
    "I\u0027m being chicken here and reassigning this bug to Jim, with the\nexpectation that he\u0027ll either be able to easily fix it (since\nit\u0027s front-endy) or he\u0027ll be able to pingpong it back to me.\n",
    "I\u0027ll take a look at this in the \u0027front-end\u0027...",
    "FROM: \n\ninvalid stored block lengths\ninvalid stored block lengths\njava.util.zip.ZipException: invalid stored block lengths\n\tat java.util.zip.InflaterInputStream.read(InflaterInputStream.java:137)\n\tat java.util.zip.ZipInputStream.read(ZipInputStream.java:137)\n\tat org.aspectj.util.FileUtil.readAsByteArray(FileUtil.java:1042)\n\tat org.aspectj.weaver.bcel.BcelWeaver.addJarFile(BcelWeaver.java:208)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.\ninitBcelWorld(AjBuildManager.java:256)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.\ndoBuild(AjBuildManager.java:130)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.\nbatchBuild(AjBuildManager.java:81)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:104)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:231)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:168)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:81)\n\nTO:\nC:\\ColyerRoot\\...\\oneInjar.jar error Could not read input jar file C:\n\\ColyerRoot\\...\\injarChange\\oneInjar.jar(invalid stored block lengths)\n\t\n1 error\n\nA failure during the writing of an output jar now produces:\n\nerror at C:\\ColyerRoot\\...\\notAJar.jar Unable to write outjar C:\\ColyerRoot\\...\n\\notAJar.jar(ZIP file must have at least one entry)\n\nI also extended the test harness to support an \u0027outjar\u0027 attribute on \u0027compile\u0027 \nas part of this bug fix."
  ],
  "commentCreationDates": [
    "2003-09-26T01:41:56+02:00",
    "2003-12-08T13:54:35+01:00",
    "2004-01-29T16:19:55+01:00",
    "2004-02-19T14:26:05+01:00",
    "2004-03-16T11:48:40+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.patterns.PerFromSuper.concretize",
          "source": "PerFromSuper.java:59"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembers.setPerClause",
          "source": "CrosscuttingMembers.java:205"
        },
        {
          "method": "org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers",
          "source": "ResolvedTypeX.java:329"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect",
          "source": "CrosscuttingMembersSet.java:50"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile",
          "source": "BcelWeaver.java:107"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld",
          "source": "AjBuildManager.java:194"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:113"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:70"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:103"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:165"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "43714",
      "date": "2003-09-26T01:41:56+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.patterns.PerFromSuper.concretize",
          "source": "PerFromSuper.java:59"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembers.setPerClause",
          "source": "CrosscuttingMembers.java:205"
        },
        {
          "method": "org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers",
          "source": "ResolvedTypeX.java:329"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect",
          "source": "CrosscuttingMembersSet.java:50"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addLibraryJarFile",
          "source": "BcelWeaver.java:107"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld",
          "source": "AjBuildManager.java:194"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:113"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:70"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:103"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:165"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "43714",
      "date": "2003-09-26T01:41:56+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    },
    {
      "exceptionType": "java.util.zip.ZipException",
      "message": "invalid stored block lengths",
      "elements": [
        {
          "method": "java.util.zip.InflaterInputStream.read",
          "source": "InflaterInputStream.java:137"
        },
        {
          "method": "java.util.zip.ZipInputStream.read",
          "source": "ZipInputStream.java:137"
        },
        {
          "method": "org.aspectj.util.FileUtil.readAsByteArray",
          "source": "FileUtil.java:1042"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.addJarFile",
          "source": "BcelWeaver.java:208"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld",
          "source": "AjBuildManager.java:256"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:130"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:81"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:104"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:53"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:231"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:168"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:81"
        }
      ],
      "number": 2,
      "commentIndex": 4,
      "bugId": "43714",
      "date": "2004-03-16T11:48:40+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    }
  ],
  "groupId": "43714",
  "bugId": "43714",
  "date": "2003-09-26T01:41:56+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "enhancement"
}