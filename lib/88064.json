{
  "comments": [
    "M200503110845 (3.0.2 RC2)\n\nSet a Detail Formatter for java.util.AbstractCollection with code snippet:\n------------------------\n//from AbstractCollection#toString():\nStringBuffer buf \u003d new StringBuffer();\nbuf.append(\"[\\n\");\n\n    Iterator i \u003d iterator();\n    boolean hasNext \u003d i.hasNext();\n    while (hasNext) {\n        Object o \u003d i.next();\n        buf.append(o \u003d\u003d this ? \"(this Collection)\" : String.valueOf(o));\n        hasNext \u003d i.hasNext();\n        if (hasNext)\n            buf.append(\",\\n\");\n    }\n\nbuf.append(\"\\n]\");\nreturn buf.toString();\n------------------------\n\nDebug this java application with breakpoints where indicated in the code:\n------------------------\npackage p;\nimport java.util.Collection;\nimport java.util.HashMap;\nclass A {\n\tpublic static void main(String[] args) {\n\t\tHashMap hm\u003d new HashMap();\n\t\thm.put(\"a\", \"b\");\n\t\tCollection c\u003d hm.values();\n\t\tSystem.out.println(c); // breakpoint here,\n\t\t                       // then select \u0027c\u0027 in variables view\n\t\tc\u003d new ArrayList();\n\t\tc.add(\"b\");\n\t\tSystem.out.println(c); // breakpoint here,\n\t\t                       // then select \u0027c\u0027 in variables view\n\t}\n}\n------------------------\n\nWith a Sun VM (I used jdk1.4.2_06), the variables view detail pane shows for c\nat the first breakpoint:\n------------------------\nDetail formatter error: \n\t\tThe method iterator() is undefined for the type HashMap\n------------------------\n\nAt the second breakpoint, I get the CCE below. With a J9 VM (I tried\nj9n142-20040928a and j9n142sr1a-20050202), I always get the CCE.\n\nError Mrz 15, 2005 16:34:09.947 Exception processing async thread queue\njava.lang.ClassCastException:\norg.eclipse.jdt.internal.debug.core.model.JDIObjectValue\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.instructions.ConditionalJump.execute(ConditionalJump.java:27)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute(Interpreter.java:50)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run(ASTEvaluationEngine.java:317)\n\tat\norg.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation(JDIThread.java:659)\n\tat\norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run(ASTEvaluationEngine.java:351)\n\tat\norg.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run(JDIThread.java:2516)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)",
    "BTW: the detail formatter seems to work fine as long as the collections are empty.\nAlso works fine in I20050308-1510 (latest 3.1).",
    "\n\n*** This bug has been marked as a duplicate of 75643 ***"
  ],
  "commentCreationDates": [
    "2005-03-15T15:56:25+01:00",
    "2005-03-15T16:18:21+01:00",
    "2005-03-15T22:14:45+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.debug.core.model.JDIObjectValue",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.instructions.ConditionalJump.execute",
          "source": "ConditionalJump.java:27"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute",
          "source": "Interpreter.java:50"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run",
          "source": "ASTEvaluationEngine.java:317"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation",
          "source": "JDIThread.java:659"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run",
          "source": "ASTEvaluationEngine.java:351"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run",
          "source": "JDIThread.java:2516"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "88064",
      "duplicateId": "75643",
      "date": "2005-03-15T15:56:25+01:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "75643",
  "bugId": "88064",
  "duplicateId": "75643",
  "date": "2005-03-15T15:56:25+01:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}