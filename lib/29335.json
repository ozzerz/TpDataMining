{
  "comments": [
    "I\u0027m getting an exception being thrown when trying to create a new Java class. \nIt only happens when I try to create a class that implements an interface: I\nchoose to create a class in a package, enter a name for the class, and click\n\"Add\" to add an interface.  I\u0027m presented with a dialog that reports \"Unexpected\nexception.  See log for details.  String index out of range: -1\".  I\u0027ve included\nthe exception stack trace and the session details below as not to clutter these\ndetails.\n\nThe project was working fine last night and the only thing I\u0027ve done is add a\nnew JAR file (the JavaMail mail.jar) to it in a lib directory under the project\nand to the build path.  I have tried removing this and that doesn\u0027t solve the\nproblem.  I\u0027ve also moved all of the non-Java files (*.properties) from the\nsource directories (I have a project with multiple source directories to\nseparate client and server side code).\n\nI\u0027m using Eclipse 2.1M4 (Build id: 200212181304) on a Windows XP machine.  I\u0027m\nrunning the Sun JDK 1.4.1.  The project has no build errors.\n\nI will continue to try to isolate the cause as this is all a little vague.\n\n----------------------- Session Details --------------------------------\njava.version\u003d1.4.1\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_GB\nCommand-line arguments: -os win32 -ws win32 -arch x86 -install file:C:/eclipse/\n\n------------------- Exception Stack Trace ------------------------------\njava.lang.reflect.InvocationTargetException\n    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:277)\n    at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:716)\n    at\norg.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog.open(TypeSelectionDialog.java:184)\n    at\norg.eclipse.jdt.ui.wizards.NewTypeWizardPage.chooseSuperInterfaces(NewTypeWizardPage.java:1285)\n    at\norg.eclipse.jdt.ui.wizards.NewTypeWizardPage.typePageCustomButtonPressed(NewTypeWizardPage.java:557)\n    at\norg.eclipse.jdt.ui.wizards.NewTypeWizardPage.access$1(NewTypeWizardPage.java:555)\n    at\norg.eclipse.jdt.ui.wizards.NewTypeWizardPage$TypeFieldsAdapter.customButtonPressed(NewTypeWizardPage.java:522)\n    at\norg.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField.buttonPressed(ListDialogField.java:196)\n    at\norg.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField.doButtonSelected(ListDialogField.java:430)\n    at\norg.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField.access$0(ListDialogField.java:426)\n    at\norg.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField$2.widgetSelected(ListDialogField.java:393)\n    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:87)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:825)\n    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1692)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1410)\n    at org.eclipse.jface.window.Window.runEventLoop(Window.java:561)\n    at org.eclipse.jface.window.Window.open(Window.java:541)\n    at\norg.eclipse.ui.internal.NewWizardShortcutAction.run(NewWizardShortcutAction.java:87)\n    at org.eclipse.jface.action.Action.runWithEvent(Action.java:769)\n    at\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:411)\n    at\norg.eclipse.jface.action.ActionContributionItem.handleWidgetEvent(ActionContributionItem.java:365)\n    at\norg.eclipse.jface.action.ActionContributionItem.access$0(ActionContributionItem.java:356)\n    at\norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent(ActionContributionItem.java:48)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:825)\n    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1692)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1410)\n    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1446)\n    at org.eclipse.ui.internal.Workbench.run(Workbench.java:1429)\n    at\norg.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:845)\n    at org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:324)\n    at org.eclipse.core.launcher.Main.basicRun(Main.java:247)\n    at org.eclipse.core.launcher.Main.run(Main.java:703)\n    at org.eclipse.core.launcher.Main.main(Main.java:539)\nCaused by: java.lang.StringIndexOutOfBoundsException: String index out of range: -1\n    at java.lang.String.substring(String.java:1480)\n    at\norg.eclipse.jdt.internal.corext.util.TypeInfoFactory.createIFileTypeInfo(TypeInfoFactory.java:115)\n    at\norg.eclipse.jdt.internal.corext.util.TypeInfoFactory.create(TypeInfoFactory.java:51)\n    at\norg.eclipse.jdt.internal.corext.util.TypeInfoRequestor.acceptClass(TypeInfoRequestor.java:39)\n    at\norg.eclipse.jdt.core.search.SearchEngine$1.acceptClassDeclaration(SearchEngine.java:524)\n    at\norg.eclipse.jdt.internal.core.search.matching.TypeDeclarationPattern.feedIndexRequestor(TypeDeclarationPattern.java:107)\n    at\norg.eclipse.jdt.internal.core.search.matching.SearchPattern.findIndexMatches(SearchPattern.java:1174)\n    at\norg.eclipse.jdt.internal.core.search.matching.SearchPattern.findIndexMatches(SearchPattern.java:1149)\n    at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:144)\n    at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:93)\n    at\norg.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:262)\n    at\norg.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:538)\n    at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.doSearchTypes(AllTypesCache.java:117)\n    at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.getAllTypes(AllTypesCache.java:77)\n    at\norg.eclipse.jdt.internal.corext.util.AllTypesCache.getTypes(AllTypesCache.java:53)\n    at\norg.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog$1.run(TypeSelectionDialog.java:173)\n    at\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:95)",
    "matt@denner.demon.co.uk 11-Jan-2003: \nOK, bit more information that may help:\n\nI have three java projects open.  Projects 2 \u0026 3 depend on Project 1.  If I\nclose projects 2 \u0026 3 and try to create a class with an interface in Project 1 I\nno longer get this error message.\n\nIf I open Projects 1 \u0026 2 only and remove the dependency then I still get the\nerror when trying to create a new class.",
    "*** Bug 29371 has been marked as a duplicate of this bug. ***",
    "Matthew, it is hard to reproduce the problem without having more information. \nFrom looking at the code I assume, that this is caused by your project layout\n(names, loayout of source folders, ....).\n\nMatthew, is it possible to attach the projects to the PR, so that I am able to \nreproduce it. ",
    "Unfortunately I can\u0027t as the code is for a client.  I can however let you know\nthe structure:\n\nProject 1, the core project, has 4 source folders: interface, implementation,\nmockobjects (contains mock objects only), tests (contains junit tests).  A lib\ndirectory has several JAR files: mail.jar and mockobjects-0.6-core.jar.  The\nproject also has junit from Eclipse added to the build path.\n\nProject 2 is dependent on Project 1.  It has two source folders: src and tests \nIt has a lib directory containing mail.jar only.  This is a SOAP project using\nJakarta Axis with all appropriate JARs added to the build path, and has junit\nadded from Eclipse.  Classes in src implement some interfaces in Project 1\u0027s\ninterface folder.\n\nProject 3 is dependent on Project 1.  It has two source folders: src and tests.\n It has junit from Eclipse on the build path, and mail.jar in a lib directory. \nClasses in src use some interfaces in Project 1\u0027s interface folder.\n\nThat\u0027s it.  If there\u0027s something I can do to help from my end please feel free\nto ask and I\u0027ll see what I can do.  I haven\u0027t been able to track things any\nfurther but I\u0027m also now noticing that sometimes the auto-complete isn\u0027t working\nfor classes (I\u0027ll type \"x.y.z.Foo\" and hit CTRL-SPACE expecting a list of\nseveral classes and it says \"No completions available\", I put this down to the\nsame problem but will look a little further).",
    "Matt, I added some code so that in the case of a failure you see the path that \ncaused the IndexOutOfBoundsException. Can you please try to reproduce the \nproblem using the latest integration build.\n\nhttp://download.eclipse.org/downloads/drops/I-I20030115-200301151011/index.php\n\nThanks in advance for your help\n\nDirk",
    "Dirk,\n\nI imported my projects into this version and it is fine, typical!  I\u0027ll keep\nplaying with it to see if it happens again but, for the moment, it looks like\nsomething specifically to do with the original Eclipse setup.  Maybe it\u0027s stale\ndata in the projects?\n\nMatt",
    "Code got instrumented, but error couldn\u0027t be reporduce.\n\nClosing PR. Please feel free to reopen if you see the problem again."
  ],
  "commentCreationDates": [
    "2003-01-11T16:51:30+01:00",
    "2003-01-11T17:10:38+01:00",
    "2003-01-13T11:08:53+01:00",
    "2003-01-13T13:42:19+01:00",
    "2003-01-13T20:00:21+01:00",
    "2003-01-16T10:31:03+01:00",
    "2003-01-16T19:47:23+01:00",
    "2003-02-13T16:15:25+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:277"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:716"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog.open",
          "source": "TypeSelectionDialog.java:184"
        },
        {
          "method": "org.eclipse.jdt.ui.wizards.NewTypeWizardPage.chooseSuperInterfaces",
          "source": "NewTypeWizardPage.java:1285"
        },
        {
          "method": "org.eclipse.jdt.ui.wizards.NewTypeWizardPage.typePageCustomButtonPressed",
          "source": "NewTypeWizardPage.java:557"
        },
        {
          "method": "org.eclipse.jdt.ui.wizards.NewTypeWizardPage.access$1",
          "source": "NewTypeWizardPage.java:555"
        },
        {
          "method": "org.eclipse.jdt.ui.wizards.NewTypeWizardPage$TypeFieldsAdapter.customButtonPressed",
          "source": "NewTypeWizardPage.java:522"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField.buttonPressed",
          "source": "ListDialogField.java:196"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField.doButtonSelected",
          "source": "ListDialogField.java:430"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField.access$0",
          "source": "ListDialogField.java:426"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.ListDialogField$2.widgetSelected",
          "source": "ListDialogField.java:393"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:87"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:825"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1692"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1410"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:561"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:541"
        },
        {
          "method": "org.eclipse.ui.internal.NewWizardShortcutAction.run",
          "source": "NewWizardShortcutAction.java:87"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:769"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:411"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:365"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:356"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:48"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:825"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1692"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1410"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1446"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1429"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:247"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:703"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:539"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.StringIndexOutOfBoundsException",
        "message": "String index out of range: -1",
        "elements": [
          {
            "method": "java.lang.String.substring",
            "source": "String.java:1480"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.util.TypeInfoFactory.createIFileTypeInfo",
            "source": "TypeInfoFactory.java:115"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.util.TypeInfoFactory.create",
            "source": "TypeInfoFactory.java:51"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.util.TypeInfoRequestor.acceptClass",
            "source": "TypeInfoRequestor.java:39"
          },
          {
            "method": "org.eclipse.jdt.core.search.SearchEngine$1.acceptClassDeclaration",
            "source": "SearchEngine.java:524"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.TypeDeclarationPattern.feedIndexRequestor",
            "source": "TypeDeclarationPattern.java:107"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.SearchPattern.findIndexMatches",
            "source": "SearchPattern.java:1174"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.matching.SearchPattern.findIndexMatches",
            "source": "SearchPattern.java:1149"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
            "source": "PatternSearchJob.java:144"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
            "source": "PatternSearchJob.java:93"
          },
          {
            "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
            "source": "JobManager.java:262"
          },
          {
            "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
            "source": "SearchEngine.java:538"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.doSearchTypes",
            "source": "AllTypesCache.java:117"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.getAllTypes",
            "source": "AllTypesCache.java:77"
          },
          {
            "method": "org.eclipse.jdt.internal.corext.util.AllTypesCache.getTypes",
            "source": "AllTypesCache.java:53"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog$1.run",
            "source": "TypeSelectionDialog.java:173"
          },
          {
            "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
            "source": "ModalContext.java:95"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "29335",
      "date": "2003-01-11T16:51:30+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "29335",
  "bugId": "29335",
  "date": "2003-01-11T16:51:30+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "major"
}