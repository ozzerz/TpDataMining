{
  "comments": [
    "I20040226\n\n- I have an action that implements IWorkbenchWindowPulldownDelegate2, and is\ncontributed to the top level toolbar as a drop down item (just like the \"Run As\"\naction from the debug plugin).\n\n- If an exception occurs inside my implementation of IWWPD2.getMenu(Menu), then\nthe entire platform fails to start.\n\nA failing contribution should not prevent the workbench from starting, it should\nprotect itself using something like ISafeRunnable.  Currently this exception is\nnot even logged (it is caught by Main which adds it to the configuration log\nfile, which is invisible to most users).  Here is the stack trace from an\nexception inside a pull down delegate:\n\njava.lang.VerifyError: class load failed (class:\norg/eclipse/ui/internal/newbuild/BuildSetAction method:\naddAllProjects(Lorg/eclipse/core/resources/IProject;Ljava/util/HashSet;)V) at pc: 58\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java:73)\n\tat java.lang.VerifyError.\u003cinit\u003e(VerifyError.java:48)\n\tat java.lang.Class.verifyImpl(Native Method)\n\tat java.lang.Class.verify(Class.java)\n\tat java.lang.Class.initialize(Class.java)\n\tat\norg.eclipse.ui.internal.newbuild.BuildMenuAction.fillMenu(BuildMenuAction.java:29)\n\tat\norg.eclipse.ui.internal.newbuild.BuildMenuAction.getMenu(BuildMenuAction.java:54)\n\tat\norg.eclipse.ui.internal.WWinPluginPulldown$MenuProxy.getMenu(WWinPluginPulldown.java:38)\n\tat\norg.eclipse.jface.action.ActionContributionItem.fill(ActionContributionItem.java:297)\n\tat org.eclipse.jface.action.SubContributionItem.fill(SubContributionItem.java:58)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:603)\n\tat org.eclipse.jface.action.MenuManager.updateAll(MenuManager.java:697)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java:622)\n\tat org.eclipse.jface.action.MenuManager.updateAll(MenuManager.java:697)\n\tat\norg.eclipse.ui.internal.WorkbenchWindow.updateActionBars(WorkbenchWindow.java:1850)\n\tat\norg.eclipse.ui.internal.WorkbenchWindow.updateActionSets(WorkbenchWindow.java:1872)\n\tat org.eclipse.ui.internal.WorkbenchWindow$6.run(WorkbenchWindow.java:1682)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\n\tat org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1657)\n\tat org.eclipse.ui.internal.WorkbenchWindow.busyOpenPage(WorkbenchWindow.java:419)\n\tat org.eclipse.ui.internal.WorkbenchWindow$5.run(WorkbenchWindow.java:953)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\n\tat org.eclipse.ui.internal.WorkbenchWindow.openPage(WorkbenchWindow.java:950)\n\tat org.eclipse.ui.internal.Workbench.openFirstTimeWindow(Workbench.java:1202)\n\tat org.eclipse.ui.internal.Workbench.init(Workbench.java:912)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:263)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:47)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:260)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:173)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:106)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)\n\tat java.lang.reflect.Method.invoke(Method.java:386)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java)\n\tat org.eclipse.core.launcher.Main.run(Main.java:745)\n\tat org.eclipse.core.launcher.Main.main(Main.java:713)",
    "general menu/contribution problem.",
    "I put an action set in our test suite that prevented Eclipse from starting.  I \nthen put a ISafeRunnable wrapper in WWinPluginPulldown$MenuProxy that protects \nus from complete destruction. \n \nBoth before and after my changes, a proper log message would be printed \n(perhaps a fix elsewhere).  However, now Eclipse can start even in this broken \nstate, and you\u0027ll just get a stale menu item. \n ",
    "Verified by test suites in I200405190010."
  ],
  "commentCreationDates": [
    "2004-03-01T19:48:35+01:00",
    "2004-03-24T20:59:56+01:00",
    "2004-05-07T22:35:51+02:00",
    "2004-05-19T22:56:53+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.VerifyError",
      "message": "class load failed (class: org/eclipse/ui/internal/newbuild/BuildSetAction method: addAllProjects(Lorg/eclipse/core/resources/IProject;Ljava/util/HashSet;)V) at pc: 58",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java:73"
        },
        {
          "method": "java.lang.VerifyError.\u003cinit\u003e",
          "source": "VerifyError.java:48"
        },
        {
          "method": "java.lang.Class.verifyImpl",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.verify",
          "source": "Class.java"
        },
        {
          "method": "java.lang.Class.initialize",
          "source": "Class.java"
        },
        {
          "method": "org.eclipse.ui.internal.newbuild.BuildMenuAction.fillMenu",
          "source": "BuildMenuAction.java:29"
        },
        {
          "method": "org.eclipse.ui.internal.newbuild.BuildMenuAction.getMenu",
          "source": "BuildMenuAction.java:54"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginPulldown$MenuProxy.getMenu",
          "source": "WWinPluginPulldown.java:38"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.fill",
          "source": "ActionContributionItem.java:297"
        },
        {
          "method": "org.eclipse.jface.action.SubContributionItem.fill",
          "source": "SubContributionItem.java:58"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:603"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.updateAll",
          "source": "MenuManager.java:697"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java:622"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.updateAll",
          "source": "MenuManager.java:697"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.updateActionBars",
          "source": "WorkbenchWindow.java:1850"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.updateActionSets",
          "source": "WorkbenchWindow.java:1872"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$6.run",
          "source": "WorkbenchWindow.java:1682"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.setActivePage",
          "source": "WorkbenchWindow.java:1657"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.busyOpenPage",
          "source": "WorkbenchWindow.java:419"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$5.run",
          "source": "WorkbenchWindow.java:953"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.openPage",
          "source": "WorkbenchWindow.java:950"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.openFirstTimeWindow",
          "source": "Workbench.java:1202"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.init",
          "source": "Workbench.java:912"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:263"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:260"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:173"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:106"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:79"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:41"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:386"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:745"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:713"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "53429",
      "date": "2004-03-01T19:48:35+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "53429",
  "bugId": "53429",
  "date": "2004-03-01T19:48:35+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}