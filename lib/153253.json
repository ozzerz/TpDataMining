{
  "comments": [
    "Create a connection.\nIn the connection, define a new filter. Choose the \"Connection private\" checkbox.\nQuit RSE.\nRestart RSE \n--\u003e Observe NullPointerException\n--\u003e Because of the NPE, restoring all other connections also fails, therefore this is a major problem. \n\njava.lang.NullPointerException\n\tat org.eclipse.rse.internal.references.SystemPersistableReferencingObject.setReferencedObject(SystemPersistableReferencingObject.java:58)\n\tat org.eclipse.rse.internal.filters.SystemFilterPoolReference.setReferenceToFilterPool(SystemFilterPoolReference.java:148)\n\tat org.eclipse.rse.internal.filters.SystemFilterPoolReference.getReferencedFilterPool(SystemFilterPoolReference.java:160)",
    "I have checked in a workaround in RSEDomImporter, but this problem needs to be observed better since filter references will be lost. Anyway, the problem is not major now any more --\u003e keeping P3 priority.",
    "I see this message in the console:\n\nTODO: Fix bug 153253 - NPE reading connection-private filter pools\njava.lang.NullPointerException\n\tat org.eclipse.rse.internal.references.SystemPersistableReferencingObject.setReferencedObject(SystemPersistableReferencingObject.java:58)\n\tat org.eclipse.rse.internal.filters.SystemFilterPoolReference.setReferenceToFilterPool(SystemFilterPoolReference.java:148)\n\tat org.eclipse.rse.internal.filters.SystemFilterPoolReference.getReferencedFilterPool(SystemFilterPoolReference.java:160)\n\tat org.eclipse.rse.core.subsystems.SubSystem.filterEventFilterPoolReferenceCreated(SubSystem.java:1090)\n\tat org.eclipse.rse.internal.filters.SystemFilterPoolReferenceManager.addReferenceToSystemFilterPool(SystemFilterPoolReferenceManager.java:614)\n\tat org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreFilterPoolReference(RSEDOMImporter.java:487)\n\tat org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreSubSystem(RSEDOMImporter.java:297)\n\tat org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreConnectorService(RSEDOMImporter.java:177)\n\tat org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreHost(RSEDOMImporter.java:146)\n\tat org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreProfile(RSEDOMImporter.java:94)\n\tat org.eclipse.rse.internal.persistence.RSEPersistenceManager.load(RSEPersistenceManager.java:366)\n\tat org.eclipse.rse.internal.persistence.RSEPersistenceManager.restore(RSEPersistenceManager.java:122)\n\tat org.eclipse.rse.internal.model.SystemProfileManager.getSystemProfileManager(SystemProfileManager.java:60)\n\tat org.eclipse.rse.model.SystemStartHere.getSystemProfileManager(SystemStartHere.java:160)\n\tat org.eclipse.rse.ui.RSEUIPlugin.start(RSEUIPlugin.java:480)",
    "Noticed other problems:\n1. If I have a single connection with a connection specific filter, that does not show up in RSE when I restart.\n2. If I have two connections with a connection specific filter in each, then one shows up, but the other doesn\u0027t, on restart.\n3. If I have two connections with a connection specific filter in one and a general filter in another, then both show up on restart.\n\nI see the NPE message in the console, which is probably what is causing it.\n\nI\u0027m increasing the priority of this bug since it seems to be serious.",
    "Increased to P1 since we reallz want this for M4 if at all possible.",
    "Problem is caused two things.\n(1) the SystemFilterPool was not marking itself dirty in many cases after it was modified.\n(2) Changes to the DOM were being lost in the window between the point when the DOM should have been was constructed/merged from the model and when the DOM was actually written. Flags were set in the persistence manager to ignore changes up to the point where the DOM had finished writing.\n\nThe fix was to redo the way synchronization is done between exporting to the DOM from the model(usually on the UI thread) and the background job that actually wrote the DOM.",
    "Fixed the synchronization between the DOM writing job and the export to the DOM. Made the PropertyFileProvider a bit more resilient when reading the persistent form. Fixed the SystemFilterPool to mark itself dirty when changed. Minor formatting changes to SystemNewFilterWizard and SubSystem.",
    "NPE not reproduced when setting a \"Connection private\" filter and restarting.\nMarked as verified.",
    "Closing."
  ],
  "commentCreationDates": [
    "2006-08-09T11:26:15+02:00",
    "2006-08-09T11:37:37+02:00",
    "2006-08-16T10:07:54+02:00",
    "2006-08-16T10:17:50+02:00",
    "2006-08-16T17:30:27+02:00",
    "2006-08-17T23:33:06+02:00",
    "2006-08-18T00:37:37+02:00",
    "2006-10-31T15:56:37+01:00",
    "2006-11-23T11:53:00+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.rse.internal.references.SystemPersistableReferencingObject.setReferencedObject",
          "source": "SystemPersistableReferencingObject.java:58"
        },
        {
          "method": "org.eclipse.rse.internal.filters.SystemFilterPoolReference.setReferenceToFilterPool",
          "source": "SystemFilterPoolReference.java:148"
        },
        {
          "method": "org.eclipse.rse.internal.filters.SystemFilterPoolReference.getReferencedFilterPool",
          "source": "SystemFilterPoolReference.java:160"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "153253",
      "date": "2006-08-09T11:26:15+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.rse.internal.references.SystemPersistableReferencingObject.setReferencedObject",
          "source": "SystemPersistableReferencingObject.java:58"
        },
        {
          "method": "org.eclipse.rse.internal.filters.SystemFilterPoolReference.setReferenceToFilterPool",
          "source": "SystemFilterPoolReference.java:148"
        },
        {
          "method": "org.eclipse.rse.internal.filters.SystemFilterPoolReference.getReferencedFilterPool",
          "source": "SystemFilterPoolReference.java:160"
        },
        {
          "method": "org.eclipse.rse.core.subsystems.SubSystem.filterEventFilterPoolReferenceCreated",
          "source": "SubSystem.java:1090"
        },
        {
          "method": "org.eclipse.rse.internal.filters.SystemFilterPoolReferenceManager.addReferenceToSystemFilterPool",
          "source": "SystemFilterPoolReferenceManager.java:614"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreFilterPoolReference",
          "source": "RSEDOMImporter.java:487"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreSubSystem",
          "source": "RSEDOMImporter.java:297"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreConnectorService",
          "source": "RSEDOMImporter.java:177"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreHost",
          "source": "RSEDOMImporter.java:146"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.dom.RSEDOMImporter.restoreProfile",
          "source": "RSEDOMImporter.java:94"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.load",
          "source": "RSEPersistenceManager.java:366"
        },
        {
          "method": "org.eclipse.rse.internal.persistence.RSEPersistenceManager.restore",
          "source": "RSEPersistenceManager.java:122"
        },
        {
          "method": "org.eclipse.rse.internal.model.SystemProfileManager.getSystemProfileManager",
          "source": "SystemProfileManager.java:60"
        },
        {
          "method": "org.eclipse.rse.model.SystemStartHere.getSystemProfileManager",
          "source": "SystemStartHere.java:160"
        },
        {
          "method": "org.eclipse.rse.ui.RSEUIPlugin.start",
          "source": "RSEUIPlugin.java:480"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "153253",
      "date": "2006-08-16T10:07:54+02:00",
      "product": "Target Management",
      "component": "RSE",
      "severity": "normal"
    }
  ],
  "groupId": "153253",
  "bugId": "153253",
  "date": "2006-08-09T11:26:15+02:00",
  "product": "Target Management",
  "component": "RSE",
  "severity": "normal"
}