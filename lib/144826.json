{
  "comments": [
    "When attempting to create a Web service bottom-up from a Java class with the slider on page one set to \"Develop service\", the wizard fails with an NPE in PreServiceAssembleCommand. The exception does not occur for any other setting of the slider. The exception also ceases to occur for \"Develop service\" once, within the wizard session, the wizard has been successfully paged forward (for some other setting of the slider) then back to page one.\n\nOS: Win2K\nJRE: java full version \"1.4.2_05-b04\"\nBuild: wtp-sdk-S-1.5RC4-200605310507\n\nScenario:\n\n1. Create a dynamic web project (targetting any reasonable server).\n2. Create a simple Java service class in the project.\n3. Right click on the class and choose Web Services  Create Web Service.\n4. Set the service slider to \"Develop service\", then click Next.\n5. Error dialog \"IWAB0014E Unexpected exception occured.\" appears immediately.\n6. Close the dialog, move the slider to any other position, then click Next.\n7. The next page appears correctly. Click Back.\n8. Move the slider back to \"Develop service\", then click Next.\n9. The next page appears correctly.\n\nThe exception:\n\n      java.lang.NullPointerException\n      at org.eclipse.jst.ws.internal.creation.ui.extension.PreServiceAssembleCommand.execute(PreServiceAssembleCommand.java:54)\n      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:413)\n      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop(CommandFragmentEngine.java:353)\n      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop(CommandFragmentEngine.java:251)\n      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5.run(SimpleCommandEngineManager.java:250)\n      at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:369)\n      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:313)\n      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:851)\n      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop(SimpleCommandEngineManager.java:220)\n      at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNextStop(WizardPageManager.java:94)\n      at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.getNextPage(WizardPageManager.java:145)\n      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage.getNextPage(SimpleWizardPage.java:119)\n      at org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:751)\n      at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:351)\n      at org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Dialog.java:660)\n      at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\n      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n      at org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n      at org.eclipse.jface.window.Window.open(Window.java:796)\n      at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run(DynamicPopupWizard.java:130)\n      at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:254)\n      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)\n      at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\n      at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\n      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n      at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n      at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n      at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n      at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n      at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n      at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n      at java.lang.reflect.Method.invoke(Method.java:324)\n      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n      at org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n      at org.eclipse.core.launcher.Main.run(Main.java:977)\n      at org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Joan,\nover to you instead. A bit of debugging shows that how I move the slider is relevant here. If I use the mouse to click directly on the slider\u0027s \"Develop\" position, the value of the selection variable in ServerWizardWidget.java is 6. If I use the keyboard to move the slider to \"Develop\", the value of the selection variable is 5.\n\nOn line 1414, the former value (6) fails this comparison:\n  setDevelopService(selection \u003c\u003d ScenarioContext.WS_DEVELOP);\nwhich results in developService being set to false, which percolates thru several data mappings and ultimately results in the \"context\" datum being null which kills line 54 of PreServiceAssembleCommand.\n\nI have not debugged ServerWizardWidget any further to determine why the selection value is apparently incorrect.",
    "One more bit of weirdness to point out, then I\u0027m calling it a night:\n\n1. If I focus on the service slider and whack the down arrow key the *minimum necessary* number of times to position the chevron on the lowest allowed notch (develop service), it works - as described in my last comment.\n\n2. If I whack the down arrow the *minimum necessary* number of times to position the chevron on the lowest allowed notch, then whack the down arrow key one more time, the chevron does not move (correct), however, when I hit Next the exception once again occurs.",
    "Back to using the target milestone field to indicate intended as well as actual target miletones/RCs. This bug is a candidate for 1.5 RC5.",
    "There is another bug closely related to this one in the client only scenario.  In the client case though, there is no NPE.  The client code is simply not generated when the user clicks the mouse at the bottom of the slider and develop is selected and then he/she clicks Finish.\n\nSummary of bug for both Service and Client:\n\nThe initial selection of the slider in the scenario described is 6/NONE when the widgetSelected code is activated.  The code in the method resets the slider to 5/DEVELOP but the initial selection was being used prior to this to call the necessary setters. Subsequent commands such as PreServiceAssembleCommand would end up with \"Develop\" set to null and therefore not develop or throw an NPE.\n\nSolution:  change the service scale selection to 5/DEVELOP and move the setter code below this selection so that the setters are called with the correct value.\n\nRisk: Low.  Only affects this scenario path\nCustomer Impact: Critical.  If a user clicks on the slider and sees that DEVELOP is selected in the widget the expectation is that the code will be developed.  With the current bug they get either an NPE (service) or they see no code generated (client).",
    "Created an attachment (id\u003d43720)\npatch for consumption.ui and creation.ui\n\n",
    "Over to you Chris/Kathy for review/commit/release.\n\nthanks, Joan.",
    "Joan, thanks. Patch reviewed. This is a simple change that eliminates what would be a commonly encountered NPE by users of the wizard. Raising for PMC approval for RC5.",
    "+1 for WTP 1.5 RC5.",
    "+1 1.5\n",
    "Committed and released under tag v200606080121.",
    "Verified on wtp-sdk-I-I200606090521. Thanks.",
    "Closed."
  ],
  "commentCreationDates": [
    "2006-06-01T05:02:37+02:00",
    "2006-06-01T05:29:54+02:00",
    "2006-06-01T05:42:08+02:00",
    "2006-06-01T20:50:16+02:00",
    "2006-06-07T16:20:26+02:00",
    "2006-06-07T16:43:59+02:00",
    "2006-06-07T16:44:30+02:00",
    "2006-06-07T17:29:38+02:00",
    "2006-06-07T22:42:48+02:00",
    "2006-06-07T22:43:32+02:00",
    "2006-06-08T03:20:04+02:00",
    "2006-06-13T19:00:47+02:00",
    "2006-06-13T19:00:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.ws.internal.creation.ui.extension.PreServiceAssembleCommand.execute",
          "source": "PreServiceAssembleCommand.java:54"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand",
          "source": "CommandFragmentEngine.java:413"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop",
          "source": "CommandFragmentEngine.java:353"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop",
          "source": "CommandFragmentEngine.java:251"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5.run",
          "source": "SimpleCommandEngineManager.java:250"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:369"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:313"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:851"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop",
          "source": "SimpleCommandEngineManager.java:220"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNextStop",
          "source": "WizardPageManager.java:94"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.getNextPage",
          "source": "WizardPageManager.java:145"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage.getNextPage",
          "source": "SimpleWizardPage.java:119"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.nextPressed",
          "source": "WizardDialog.java:751"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:351"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$3.widgetSelected",
          "source": "Dialog.java:660"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run",
          "source": "DynamicPopupWizard.java:130"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:254"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:539"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "144826",
      "date": "2006-06-01T05:02:37+02:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "critical"
    }
  ],
  "groupId": "144826",
  "bugId": "144826",
  "date": "2006-06-01T05:02:37+02:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "critical"
}