{
  "comments": [
    "In the integration build 0217, the URL handler for the \"platform:\" protocol is \nno longer available during the shutdown of the org.eclipse.update.configurator \nplugin. \n\nDuring this bundle shutdown, a configuration file (platform.cfg) is written \nout, and this involves outputing a url of the \nform \"platform:/base/plugins/etc\" that is obtained from URL.toExternalForm(). \nIt turns out that this methods fails, because the url handler is no longer \nregistered with the VM, and writing the configuration fails. This could lead \nto infinite loop during eclipse startup.\n\n\n!SESSION Feb 17, 2004 15:10:45.787 --------------------------------------------\n-\njava.version\u003d1.4.2_01\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\n!ENTRY \nreference:file:d:/eclipseI0217/eclipse/plugins/org.eclipse.update.configurator_\n3.0.0/ 0 0 Feb 17, 2004 15:10:45.787\n!MESSAGE FrameworkEvent.ERROR\n!STACK 0\norg.osgi.framework.BundleException: Exception in \norg.eclipse.update.internal.configurator.ConfigurationActivator.stop()\n\tat org.eclipse.osgi.framework.internal.core.BundleContext.stop\n(BundleContext.java:1155)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker\n(BundleHost.java:481)\n\tat org.eclipse.osgi.framework.internal.core.Bundle.suspend\n(Bundle.java:580)\n\tat org.eclipse.osgi.framework.internal.core.Framework.suspendBundle\n(Framework.java:1222)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelImpl.decFWSL\n(StartLevelImpl.java:626)\n\tat \norg.eclipse.osgi.framework.internal.core.StartLevelImpl.doSetStartLevel\n(StartLevelImpl.java:277)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelImpl.shutdown\n(StartLevelImpl.java:250)\n\tat org.eclipse.osgi.framework.internal.core.SystemBundle.suspend\n(SystemBundle.java:208)\n\tat org.eclipse.osgi.framework.internal.core.Framework.shutdown\n(Framework.java:595)\n\tat org.eclipse.osgi.framework.internal.core.SystemBundle$1.run\n(SystemBundle.java:193)\n\tat java.lang.Thread.run(Thread.java:534)\nNested exception:\njava.lang.IllegalStateException\n\tat \norg.eclipse.osgi.framework.internal.protocol.NullURLStreamHandlerService.toExte\nrnalForm(NullURLStreamHandlerService.java:98)\n\tat \norg.eclipse.osgi.framework.internal.protocol.URLStreamHandlerProxy.toExternalFo\nrm(URLStreamHandlerProxy.java:134)\n\tat java.net.URL.toExternalForm(URL.java:869)\n\tat \norg.eclipse.update.internal.configurator.PlatformConfiguration.writeFeatureEntr\ny(PlatformConfiguration.java:1494)\n\tat org.eclipse.update.internal.configurator.PlatformConfiguration.write\n(PlatformConfiguration.java:1437)\n\tat org.eclipse.update.internal.configurator.PlatformConfiguration.save\n(PlatformConfiguration.java:546)\n\tat org.eclipse.update.internal.configurator.PlatformConfiguration.save\n(PlatformConfiguration.java:508)\n\tat \norg.eclipse.update.internal.configurator.PlatformConfiguration.shutdown\n(PlatformConfiguration.java:641)\n\tat org.eclipse.update.internal.configurator.ConfigurationActivator.stop\n(ConfigurationActivator.java:125)\n\tat org.eclipse.osgi.framework.internal.core.BundleContext$2.run\n(BundleContext.java:1139)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.eclipse.osgi.framework.internal.core.BundleContext.stop\n(BundleContext.java:1114)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker\n(BundleHost.java:481)\n\tat org.eclipse.osgi.framework.internal.core.Bundle.suspend\n(Bundle.java:580)\n\tat org.eclipse.osgi.framework.internal.core.Framework.suspendBundle\n(Framework.java:1222)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelImpl.decFWSL\n(StartLevelImpl.java:626)\n\tat \norg.eclipse.osgi.framework.internal.core.StartLevelImpl.doSetStartLevel\n(StartLevelImpl.java:277)\n\tat org.eclipse.osgi.framework.internal.core.StartLevelImpl.shutdown\n(StartLevelImpl.java:250)\n\tat org.eclipse.osgi.framework.internal.core.SystemBundle.suspend\n(SystemBundle.java:208)\n\tat org.eclipse.osgi.framework.internal.core.Framework.shutdown\n(Framework.java:595)\n\tat org.eclipse.osgi.framework.internal.core.SystemBundle$1.run\n(SystemBundle.java:193)\n\tat java.lang.Thread.run(Thread.java:534)",
    "The problem is due to recent changes related to bundle manifests in\nruntime/compatibility/update. We stop first all plugin that do not provide\nbundle manifests. It happens that in this build update configurator had one, but\nnot runtime/runtime compatibility, so when update configurator was shutdown, the\nplatform URL protocol (provided by runtime) was not available anymore.\n\nWill ask for a new i-build.",
    "See also bug 52393.\n\nFix was to restore the manifests for core.runtime/core.runtime.compatibility.\nIdeally, update.configurator should have its manifest restored (it has been\ndeleted in HEAD) until bug 52393 is fixed, but that should not cause any harm if\nit remains as it is."
  ],
  "commentCreationDates": [
    "2004-02-17T20:51:49+01:00",
    "2004-02-18T18:41:34+01:00",
    "2004-02-18T19:42:44+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Exception in  org.eclipse.update.internal.configurator.ConfigurationActivator.stop()",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContext.stop",
          "source": "BundleContext.java:1155"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:481"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.suspend",
          "source": "Bundle.java:580"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.suspendBundle",
          "source": "Framework.java:1222"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelImpl.decFWSL",
          "source": "StartLevelImpl.java:626"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelImpl.doSetStartLevel",
          "source": "StartLevelImpl.java:277"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelImpl.shutdown",
          "source": "StartLevelImpl.java:250"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle.suspend",
          "source": "SystemBundle.java:208"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.shutdown",
          "source": "Framework.java:595"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle$1.run",
          "source": "SystemBundle.java:193"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "52294",
      "date": "2004-02-17T20:51:49+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "blocker"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.protocol.NullURLStreamHandlerService.toExternalForm",
          "source": "NullURLStreamHandlerService.java:98"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.protocol.URLStreamHandlerProxy.toExternalForm",
          "source": "URLStreamHandlerProxy.java:134"
        },
        {
          "method": "java.net.URL.toExternalForm",
          "source": "URL.java:869"
        },
        {
          "method": "org.eclipse.update.internal.configurator.PlatformConfiguration.writeFeatureEntry",
          "source": "PlatformConfiguration.java:1494"
        },
        {
          "method": "org.eclipse.update.internal.configurator.PlatformConfiguration.write",
          "source": "PlatformConfiguration.java:1437"
        },
        {
          "method": "org.eclipse.update.internal.configurator.PlatformConfiguration.save",
          "source": "PlatformConfiguration.java:546"
        },
        {
          "method": "org.eclipse.update.internal.configurator.PlatformConfiguration.save",
          "source": "PlatformConfiguration.java:508"
        },
        {
          "method": "org.eclipse.update.internal.configurator.PlatformConfiguration.shutdown",
          "source": "PlatformConfiguration.java:641"
        },
        {
          "method": "org.eclipse.update.internal.configurator.ConfigurationActivator.stop",
          "source": "ConfigurationActivator.java:125"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContext$2.run",
          "source": "BundleContext.java:1139"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContext.stop",
          "source": "BundleContext.java:1114"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker",
          "source": "BundleHost.java:481"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.suspend",
          "source": "Bundle.java:580"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.suspendBundle",
          "source": "Framework.java:1222"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelImpl.decFWSL",
          "source": "StartLevelImpl.java:626"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelImpl.doSetStartLevel",
          "source": "StartLevelImpl.java:277"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.StartLevelImpl.shutdown",
          "source": "StartLevelImpl.java:250"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle.suspend",
          "source": "SystemBundle.java:208"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.shutdown",
          "source": "Framework.java:595"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SystemBundle$1.run",
          "source": "SystemBundle.java:193"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "52294",
      "date": "2004-02-17T20:51:49+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "blocker"
    }
  ],
  "groupId": "52294",
  "bugId": "52294",
  "date": "2004-02-17T20:51:49+01:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "blocker"
}