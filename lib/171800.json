{
  "comments": [
    "I20070123-1715\n\nNPE when switching on \u0027Show Static Variables\u0027 in Variables view\nSteps:\n\n- new workspace, paste to Package Explorer:\npublic class Main {\n\tstatic Main instance;\n\tpublic static void main(String[] args) {\n\t\tinstance\u003d new Main(); //breakpoint\n\t}\n}\n- add breakpoint, debug\n- open view menu of Variables view and choose Java \u003e Show Static Variables\n\n\nUnhandled event loop exception\n\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)\nat org.eclipse.swt.SWT.error(SWT.java:3450)\nat org.eclipse.swt.SWT.error(SWT.java:3373)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3442)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3082)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2083)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2047)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:449)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:145)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:170)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1124)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1099)\nCaused by: java.lang.NullPointerException\nat org.eclipse.jface.viewers.CustomHashtable.hashCode(CustomHashtable.java:264)\nat org.eclipse.jface.viewers.CustomHashtable.get(CustomHashtable.java:236)\nat org.eclipse.jface.viewers.StructuredViewer.findItems(StructuredViewer.java:769)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalFindItem(AbstractTreeViewer.java:176)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalFindItems(AbstractTreeViewer.java:156)\nat org.eclipse.jface.viewers.AbstractTreeViewer.insert(AbstractTreeViewer.java:2838)\nat org.eclipse.debug.internal.ui.viewers.model.InternalTreeModelViewer.insert(InternalTreeModelViewer.java:398)\nat org.eclipse.debug.internal.ui.viewers.model.ChildrenUpdate.performUpdate(ChildrenUpdate.java:70)\nat org.eclipse.debug.internal.ui.viewers.model.ViewerUpdateMonitor$1.runInUIThread(ViewerUpdateMonitor.java:58)\nat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n... 20 more",
    "this appears to be a viewer bug.\n\nWe are calling insert with an empty path and valid data object, which should insert as direct child of the tree.\n\nsending over to Boris for comment",
    "JFace is generally underspecified for empty TreePaths.\n\n1. The Javadoc of getFirstSegment() and getLastSegment() need to be fixed (can return null). All call sites need to be checked.\n\n2. TreeViewers need to adhere to a consistent strategy when dealing with empty tree paths. A strategy could be that the empty path stands for the viewer\u0027s getRoot() element. All usages of TreePath need to be checked.\n\n\n(In reply to comment #1)\n\u003e We are calling insert with an empty path and valid data object, which should\n\u003e insert as direct child of the tree.\n\nMichael, that\u0027s your assumption, but I don\u0027t think this is specified. You should fix your call site until the specification has been improved.",
    "Fixed \u003e20070204.  I still have to look at what Markus suggested under (2.).",
    "Moving to M6 for the remaining work.",
    "Created an attachment (id\u003d67346)\npatch\n\nI checked all references to TreePath and found two places where we should be calling getRoot() instead of getInput().  Since we don\u0027t have any real bugs due to this, I would suggest changing this early in 3.4 rather than now."
  ],
  "commentCreationDates": [
    "2007-01-26T14:55:18+01:00",
    "2007-01-26T15:41:51+01:00",
    "2007-02-02T00:36:05+01:00",
    "2007-02-05T03:45:19+01:00",
    "2007-02-06T03:54:13+01:00",
    "2007-05-16T06:11:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3450"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3373"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3442"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3082"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2083"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2047"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:449"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:145"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:170"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1099"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.jface.viewers.CustomHashtable.hashCode",
            "source": "CustomHashtable.java:264"
          },
          {
            "method": "org.eclipse.jface.viewers.CustomHashtable.get",
            "source": "CustomHashtable.java:236"
          },
          {
            "method": "org.eclipse.jface.viewers.StructuredViewer.findItems",
            "source": "StructuredViewer.java:769"
          },
          {
            "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalFindItem",
            "source": "AbstractTreeViewer.java:176"
          },
          {
            "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalFindItems",
            "source": "AbstractTreeViewer.java:156"
          },
          {
            "method": "org.eclipse.jface.viewers.AbstractTreeViewer.insert",
            "source": "AbstractTreeViewer.java:2838"
          },
          {
            "method": "org.eclipse.debug.internal.ui.viewers.model.InternalTreeModelViewer.insert",
            "source": "InternalTreeModelViewer.java:398"
          },
          {
            "method": "org.eclipse.debug.internal.ui.viewers.model.ChildrenUpdate.performUpdate",
            "source": "ChildrenUpdate.java:70"
          },
          {
            "method": "org.eclipse.debug.internal.ui.viewers.model.ViewerUpdateMonitor$1.runInUIThread",
            "source": "ViewerUpdateMonitor.java:58"
          },
          {
            "method": "org.eclipse.ui.progress.UIJob$1.run",
            "source": "UIJob.java:94"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "171800",
      "date": "2007-01-26T14:55:18+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "171800",
  "bugId": "171800",
  "date": "2007-01-26T14:55:18+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}