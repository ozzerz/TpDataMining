{
  "comments": [
    "I am using the below package merge. There are two packages named differently that are to be merged but both have a class called \"MyClass\". The result of the merge of these two packages should be a package that has just one class in it (Since the two are identical).\n\nWhen I run it I get the below error. When I change one of the class names to something different, there are no conflicts and it runs fine.\n\nThe standard says (Transformation 2)\n\"The result of merging two elements with matching names and metatypes that are exact copies of each other is the receiving element.\"\n\n\nThe code:\n\nModel model \u003d UMLFactory.eINSTANCE.createModel();\nPackage package1 \u003d (Package) model.createNestedPackage(\"package1\");\nPackage package2 \u003d (Package) model.createNestedPackage(\"package2\");\nClass class1 \u003d UMLFactory.eINSTANCE.createClass();\nClass class2 \u003d UMLFactory.eINSTANCE.createClass();\nclass1.setName(\"MyClass\");\nclass1.setVisibility(VisibilityKind.PUBLIC_LITERAL);\nclass1.setPackage(package1);\nclass2.setName(\"MyClass\");\nclass2.setVisibility(VisibilityKind.PUBLIC_LITERAL);\nclass2.setPackage(package2);\nPackageMerger pm \u003d new PackageMerger();\npackage1.createPackageMerge(package2);\nBasicDiagnostic dc \u003d new BasicDiagnostic();\npm.merge(package1, null, dc, null);\n\n\nThe error :\n\nException in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: -6\n    at org.eclipse.emf.ecore.impl.BasicEObjectImpl$EPropertiesHolderBaseImpl.dynamicGet(BasicEObjectImpl.java:155)\n    at org.eclipse.emf.ecore.impl.EStructuralFeatureImpl$InternalSettingDelegateMany.dynamicInverseRemove(EStructuralFeatureImpl.java:1727)\n    at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eDynamicInverseRemove(BasicEObjectImpl.java:1442)\n    at org.eclipse.uml2.uml.internal.impl.PackageImpl.eInverseRemove(PackageImpl.java:1341)\n    at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eInverseRemove(BasicEObjectImpl.java:1421)\n    at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eDynamicBasicRemoveFromContainer(BasicEObjectImpl.java:1382)\n    at org.eclipse.uml2.uml.internal.impl.ClassifierImpl.eBasicRemoveFromContainerFeature(ClassifierImpl.java:2268)\n    at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eBasicRemoveFromContainer(BasicEObjectImpl.java:1366)\n    at org.eclipse.emf.ecore.impl.BasicEObjectImpl.eInverseAdd(BasicEObjectImpl.java:1395)\n    at org.eclipse.emf.ecore.util.EcoreEList.inverseAdd(EcoreEList.java:292)\n    at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:292)\n    at org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.copyContainment(UMLUtil.java:678)\n    at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:475)\n    at org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.copy(UMLUtil.java:1071)\n    at org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.copyAll(UMLUtil.java:1102)\n    at org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.merge(UMLUtil.java:1892)\n    at Main.main(Main.java:49)",
    "The problem stems from the fact that you\u0027ve called setPackage(Package) to set the owner of the classes instead of adding them to the package via getOwnedTypes(), createOwnedType(...), or createOwnedClass(...). I\u0027ll continue investigating, but in the meantime if you change your code as follows, you\u0027ll avoid the error:\n\nModel model \u003d UMLFactory.eINSTANCE.createModel();\norg.eclipse.uml2.uml.Package package1 \u003d model.createNestedPackage(\"package1\");\norg.eclipse.uml2.uml.Package package2 \u003d model.createNestedPackage(\"package2\");\norg.eclipse.uml2.uml.Class class1 \u003d package1.createOwnedClass(\"MyClass\", false);\norg.eclipse.uml2.uml.Class class2 \u003d package2.createOwnedClass(\"MyClass\", false);\nclass1.setVisibility(VisibilityKind.PUBLIC_LITERAL);\nclass2.setVisibility(VisibilityKind.PUBLIC_LITERAL);\nPackageMerger pm \u003d new PackageMerger();\npackage1.createPackageMerge(package2);\nBasicDiagnostic dc \u003d new BasicDiagnostic();\npm.merge(package1, null, dc, null);\n",
    "The fix has been committed to CVS.",
    "The fix is available in build I200705021641."
  ],
  "commentCreationDates": [
    "2007-05-02T12:03:17+02:00",
    "2007-05-02T15:05:36+02:00",
    "2007-05-02T17:02:11+02:00",
    "2007-05-02T23:42:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-6",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl$EPropertiesHolderBaseImpl.dynamicGet",
          "source": "BasicEObjectImpl.java:155"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.EStructuralFeatureImpl$InternalSettingDelegateMany.dynamicInverseRemove",
          "source": "EStructuralFeatureImpl.java:1727"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eDynamicInverseRemove",
          "source": "BasicEObjectImpl.java:1442"
        },
        {
          "method": "org.eclipse.uml2.uml.internal.impl.PackageImpl.eInverseRemove",
          "source": "PackageImpl.java:1341"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eInverseRemove",
          "source": "BasicEObjectImpl.java:1421"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eDynamicBasicRemoveFromContainer",
          "source": "BasicEObjectImpl.java:1382"
        },
        {
          "method": "org.eclipse.uml2.uml.internal.impl.ClassifierImpl.eBasicRemoveFromContainerFeature",
          "source": "ClassifierImpl.java:2268"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eBasicRemoveFromContainer",
          "source": "BasicEObjectImpl.java:1366"
        },
        {
          "method": "org.eclipse.emf.ecore.impl.BasicEObjectImpl.eInverseAdd",
          "source": "BasicEObjectImpl.java:1395"
        },
        {
          "method": "org.eclipse.emf.ecore.util.EcoreEList.inverseAdd",
          "source": "EcoreEList.java:292"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique",
          "source": "NotifyingListImpl.java:292"
        },
        {
          "method": "org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.copyContainment",
          "source": "UMLUtil.java:678"
        },
        {
          "method": "org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy",
          "source": "EcoreUtil.java:475"
        },
        {
          "method": "org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.copy",
          "source": "UMLUtil.java:1071"
        },
        {
          "method": "org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.copyAll",
          "source": "UMLUtil.java:1102"
        },
        {
          "method": "org.eclipse.uml2.uml.util.UMLUtil$PackageMerger.merge",
          "source": "UMLUtil.java:1892"
        },
        {
          "method": "Main.main",
          "source": "Main.java:49"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "185062",
      "date": "2007-05-02T12:03:17+02:00",
      "product": "MDT",
      "component": "UML2",
      "severity": "major"
    }
  ],
  "groupId": "185062",
  "bugId": "185062",
  "date": "2007-05-02T12:03:17+02:00",
  "product": "MDT",
  "component": "UML2",
  "severity": "major"
}