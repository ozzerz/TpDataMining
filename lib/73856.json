{
  "comments": [
    "The program below compiles fine with ajc (dev version of Wednesday Sep 8, 2004\nat 19:18:04 GMT), but at runtime we get\n\nException in thread \"main\" java.lang.NoSuchMethodError: A$B.access$0(LA$B;)LA;\n        at Aspect$1$C.bar(MissingAccessor.java:12)\n        at Aspect.ajc$interMethod$Aspect$A$B$foo(MissingAccessor.java:14)\n        at A$B.ajc$interMethodDispatch2$$foo(MissingAccessor.java)\n        at Aspect.ajc$interMethodDispatch1$Aspect$A$B$foo(MissingAccessor.java)\n        at MissingAccessor.main(MissingAccessor.java:22)\n\nIt should print 1024.\n\n\n-------------------------------------------------------------\n\nclass A {\n        int x \u003d 1;\n        class B { int x \u003d 10; }\n        B b \u003d new B();\n}\naspect Aspect {\n        static int x \u003d 100;\n        static int y \u003d 3;\n        int A.B.foo() {\n                class C {\n                        int x \u003d 1000;\n                        int bar() {return x + A.this.x;}\n                }\n                return this.x + (new C()).bar() + y;\n        }\n}\n\npublic class MissingAccessor {\n\n    public static void main(String[] args) {\n        A a \u003d new A();\n        System.out.println(a.b.foo());\n    }\n}",
    "investigate for M4",
    "What a realistic program ;)\n\nHere\u0027s a shorter version that still fails:\n\nclass A {\n  int x \u003d 1;\n  class B { }\n  B b \u003d new B();\n}\naspect Aspect {\n  int A.B.foo() {\n     class C {\n        int bar() { return A.this.x;}\n     }\n     return new C().bar();\n  }\n}\n\npublic class MissingAccessor {\n\n    public static void main(String[] args) {\n        A a \u003d new A();\n        System.out.println(a.b.foo());\n    }\n}\n\nit may not print 1024 but it fails with the same error.  Given that the\nreference to the access$0 method is generated OK, my suspicion was that it was a\ntype order processing thing, and indeed, if you move \u0027A\u0027 to after the aspect,\nthen it runs fine:\n\naspect Aspect {\n  int A.B.foo() {\n     class C {\n        int bar() { return A.this.x;}\n     }\n     return new C().bar();\n  }\n}\n\nclass A {\n  int x \u003d 1;\n  class B { }\n  B b \u003d new B();\n}\n\npublic class MissingAccessor {\n\n    public static void main(String[] args) {\n        A a \u003d new A();\n        System.out.println(a.b.foo());\n    }\n}\n\nnow, what on earth we can do about that, hmmmmmmmmm\n\n",
    "putting on my TODO list, testcase added to CVS.",
    "moving to 1.5.1 - not because it\u0027s not important, but because it\u0027s very seldom seen in the wild and we \nneed to close out the release.",
    "(In reply to comment #2)\n\nI don\u0027t know it if might help, but I tried to narrow the example down to a single unit:\n\naspect Aspect {\n   class B {}\n   int B.foo() {\n      class C {\n         int bar() { return Aspect.this.hashCode(); }\n      }\n      return new C().bar();\n   }\n   public static void main(String[] args) {\n      System.out.println(aspectOf().new B().foo());\n   }\n}\n\nThe exception raised is almost the same:\n----------------------------------------------------------------------\nException in thread \"main\" java.lang.NoSuchMethodError: Aspect$B.access$0(LAspect$B;)LAspect;\n\tat Aspect$1C.bar(Aspect.aj:5)\n\tat Aspect.ajc$interMethod$Aspect$Aspect$B$foo(Aspect.aj:7)\n\tat Aspect$B.ajc$interMethodDispatch2$$foo(Aspect.aj:1)\n\tat Aspect.ajc$interMethodDispatch1$Aspect$Aspect$B$foo(Aspect.aj)\n\tat Aspect.main(Aspect.aj:10)\n----------------------------------------------------------------------\nNote that (in line 3 of exception) The mangled name itmd is   \u0027Aspect.ajc$interMethod$Aspect$Aspect$B$foo\u0027.\n\nIf the line:\n\nreturn Aspect.this.hashCode();\n\nis changed to: \n\nreturn this.hashCode();\n\nthe code works (whatever this actually means...).",
    "that possibly helps - thanks.  I think I know what the fix is but its a large implementation cost when there are simple workarounds...  basically the compiler doesn\u0027t get the time to add the necessary accessors so the weaver would have to do it."
  ],
  "commentCreationDates": [
    "2004-09-14T13:05:30+02:00",
    "2005-08-26T17:11:31+02:00",
    "2005-09-30T11:57:13+02:00",
    "2005-10-03T10:05:38+02:00",
    "2005-10-28T13:55:35+02:00",
    "2006-01-11T05:13:58+01:00",
    "2006-01-11T09:18:44+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "A$B.access$0(LA$B;)LA;",
      "elements": [
        {
          "method": "Aspect$1$C.bar",
          "source": "MissingAccessor.java:12"
        },
        {
          "method": "Aspect.ajc$interMethod$Aspect$A$B$foo",
          "source": "MissingAccessor.java:14"
        },
        {
          "method": "A$B.ajc$interMethodDispatch2$$foo",
          "source": "MissingAccessor.java"
        },
        {
          "method": "Aspect.ajc$interMethodDispatch1$Aspect$A$B$foo",
          "source": "MissingAccessor.java"
        },
        {
          "method": "MissingAccessor.main",
          "source": "MissingAccessor.java:22"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "73856",
      "date": "2004-09-14T13:05:30+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "Aspect$B.access$0(LAspect$B;)LAspect;",
      "elements": [
        {
          "method": "Aspect$1C.bar",
          "source": "Aspect.aj:5"
        },
        {
          "method": "Aspect.ajc$interMethod$Aspect$Aspect$B$foo",
          "source": "Aspect.aj:7"
        },
        {
          "method": "Aspect$B.ajc$interMethodDispatch2$$foo",
          "source": "Aspect.aj:1"
        },
        {
          "method": "Aspect.ajc$interMethodDispatch1$Aspect$Aspect$B$foo",
          "source": "Aspect.aj"
        },
        {
          "method": "Aspect.main",
          "source": "Aspect.aj:10"
        }
      ],
      "number": 1,
      "commentIndex": 5,
      "bugId": "73856",
      "date": "2006-01-11T05:13:58+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "73856",
  "bugId": "73856",
  "date": "2004-09-14T13:05:30+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}