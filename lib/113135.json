{
  "comments": [
    "A user of our product reports an exception we are unable to reproduce, whether\nusing windows 2000 or XP. I would like to share this with you, in case you can\nimagine when this exception could occur (which means either the OS returned a\nwrong count of items at the table widget, or items isn\u0027t the right size).\n\nThe stack trace comes from a view showing up, that draws a form, containing a\nfolder, and one of the CTabItems contains eventually a TableViewer and a Table.\nNo images, not virtual. The user reports this error right as the table is shown.\n(Note, we do have a call to get the items fairly early on, with a small\npossibility that other thread may be calling this before its showing -- could\nthat be it?)\n\nNote that a little later, as we are disposing that same table, the user reports\nthis:\njava.lang.ArrayIndexOutOfBoundsException: 4\nat org.eclipse.swt.widgets.Table.releaseWidget(Table.java:1553)\nat ...\n\nNotice the 4, which I have seen as a hard coded value in Table.java.\n\n\n*** Stack trace of contained exception ***\njava.lang.ArrayIndexOutOfBoundsException\nat java.lang.System.arraycopy(Native Method)\nat org.eclipse.swt.widgets.Table.getItems(Table.java:1270)\nat ...",
    "I would like to add now that we have finally reproduced this (on Eclipse 3.2!) The culprit appears to be a variation of the SWT snippet for \"resizing columns\" to ensure the last column on win32 never shows up (the \"overhang column\" after all the real columns).\n\nWe\u0027re noticing that if we call TableColumn.setWidth in the same thread that is processing a controlResized event, the table appears to corrupt itself (getItem calls take place with the Table.items array having four null entries).\n\nSo far, it appears that wrapping said setWidth call in an asyncExec is sufficient to not show the problem any longer, but this may be of interest as perhaps there is a bug (or, this is something we should just Not Do).\n\nMoving OS to XP, that\u0027s where we are seeing it lately, and on 3.2.2\n",
    "Stack trace of late:\n\njava.lang.ArrayIndexOutOfBoundsException: 4\n\tat org.eclipse.swt.widgets.Table._getItem(Table.java:142)\n\tat org.eclipse.swt.widgets.Table.wmNotifyChild(Table.java:5306)\n\tat org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:3794)\n\tat org.eclipse.swt.widgets.Composite.WM_NOTIFY(Composite.java:1166)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3298)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4025)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1851)\n\tat org.eclipse.swt.widgets.Table.callWindowProc(Table.java:255)\n\tat org.eclipse.swt.widgets.Table.callWindowProc(Table.java:183)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3334)\n\tat org.eclipse.swt.widgets.Table.windowProc(Table.java:4534)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:4025)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1932)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1930)\n ...\n",
    "Finally, as this may give some clues, once the error occurs, the Table is left in a state where mouse movement over the window will trigger an AIOOB for any rows the mouse passes over whose index is \u003e 4 [related to priming Tables with an array of size 4]; the Windows OS call being handled is OS.LVN_GETDISPINFOW.\n"
  ],
  "commentCreationDates": [
    "2005-10-19T20:32:11+02:00",
    "2007-04-02T19:15:13+02:00",
    "2007-04-02T19:15:53+02:00",
    "2007-04-02T19:17:18+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "4",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.Table.releaseWidget",
          "source": "Table.java:1553"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "113135",
      "date": "2005-10-19T20:32:11+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Table.getItems",
          "source": "Table.java:1270"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "113135",
      "date": "2005-10-19T20:32:11+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "4",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.Table._getItem",
          "source": "Table.java:142"
        },
        {
          "method": "org.eclipse.swt.widgets.Table.wmNotifyChild",
          "source": "Table.java:5306"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_NOTIFY",
          "source": "Control.java:3794"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_NOTIFY",
          "source": "Composite.java:1166"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3298"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4025"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1851"
        },
        {
          "method": "org.eclipse.swt.widgets.Table.callWindowProc",
          "source": "Table.java:255"
        },
        {
          "method": "org.eclipse.swt.widgets.Table.callWindowProc",
          "source": "Table.java:183"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3334"
        },
        {
          "method": "org.eclipse.swt.widgets.Table.windowProc",
          "source": "Table.java:4534"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:4025"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1932"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1930"
        }
      ],
      "number": 2,
      "commentIndex": 2,
      "bugId": "113135",
      "date": "2007-04-02T19:15:53+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "113135",
  "bugId": "113135",
  "date": "2005-10-19T20:32:11+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}