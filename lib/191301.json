{
  "comments": [
    "In the orm.xml change a type mapping from mapped-superclass to entity.  Then try to change one of its attribute mappings to a different type.  You get this exception:\n\njava.lang.NullPointerException\nat org.eclipse.jpt.core.internal.content.orm.resource.AttributeMappingsTranslator.getDelegateFor(AttributeMappingsTranslator.java:37)\nat org.eclipse.jpt.core.internal.content.orm.resource.AttributeMappingsTranslator.basicGetDependencyObject(AttributeMappingsTranslator.java:121)\nat org.eclipse.wst.common.internal.emf.resource.DependencyTranslator.getChild(DependencyTranslator.java:38)\nat org.eclipse.wst.common.internal.emf.resource.DependencyTranslator.getMOFValue(DependencyTranslator.java:57)\nat org.eclipse.wst.common.internal.emf.resource.Translator.getMOFChildren(Translator.java:582)\nat org.eclipse.wst.common.internal.emf.resource.DependencyTranslator.getMOFChildren(DependencyTranslator.java:53)\nat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMultiFeature(EMF2DOMAdapterImpl.java:1340)\nat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMMultiFeature(EMF2DOMAdapterImpl.java:1595)\nat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMFeature(EMF2DOMAdapterImpl.java:1534)\nat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.notifyChanged(EMF2DOMAdapterImpl.java:1033)\nat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl$DependencyAdapter.notifyChanged(EMF2DOMAdapterImpl.java:74)\nat org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:247)\nat org.eclipse.jpt.core.internal.JpaEObject.eNotify(JpaEObject.java:88)\nat org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification(EcoreEList.java:249)\nat org.eclipse.emf.common.notify.impl.NotifyingListImpl.remove(NotifyingListImpl.java:717)\nat org.eclipse.emf.common.util.BasicEList.remove(BasicEList.java:899)\nat org.eclipse.jpt.core.internal.content.orm.XmlPersistentType.changeMapping(XmlPersistentType.java:430)",
    "You are hosed after doing this, you can\u0027t change the attribute mapping type.  Have to restart eclipse to change it.",
    "Created an attachment (id\u003d70599)\ntest this patch!\n\nsubmitted patch for testing - somewhat risky fix, but this is a nasty bug",
    "I\u0027m getting a different NPE now when changed a mapped-superclass to an entity through the JPA details view and then tried to change an id to a basic mapping.\n\njava.lang.NullPointerException\nat org.eclipse.jpt.core.internal.content.orm.XmlAttributeMapping.isVirtual(XmlAttributeMapping.java:335)\nat org.eclipse.jpt.core.internal.content.orm.XmlPersistentAttribute.isVirtual(XmlPersistentAttribute.java:310)\nat org.eclipse.jpt.core.internal.platform.XmlTypeContext.refreshPersistentType(XmlTypeContext.java:246)\nat org.eclipse.jpt.core.internal.platform.XmlTypeContext.refreshDefaults(XmlTypeContext.java:208)\nat org.eclipse.jpt.core.internal.platform.XmlEntityContext.refreshDefaults(XmlEntityContext.java:152)\nat org.eclipse.jpt.core.internal.platform.PersistenceUnitContext$5.persistentType(PersistenceUnitContext.java:265)\nat org.eclipse.jpt.core.internal.platform.MappingFileContext$1.persistentType(MappingFileContext.java:124)\nat org.eclipse.jpt.core.internal.content.java.JavaPersistentType.refreshParentPersistentType(JavaPersistentType.java:926)\nat org.eclipse.jpt.core.internal.content.java.JavaPersistentType.refreshDefaults(JavaPersistentType.java:912)\nat org.eclipse.jpt.core.internal.platform.JavaTypeContext.refreshDefaults(JavaTypeContext.java:57)\nat org.eclipse.jpt.core.internal.platform.XmlTypeContext.refreshDefaults(XmlTypeContext.java:206)\nat org.eclipse.jpt.core.internal.platform.MappingFileContext.refreshDefaults(MappingFileContext.java:98)\nat org.eclipse.jpt.core.internal.platform.PersistenceUnitContext.refreshDefaults(PersistenceUnitContext.java:241)\nat org.eclipse.jpt.core.internal.platform.BaseJpaProjectContext.refreshDefaults(BaseJpaProjectContext.java:148)\nat org.eclipse.jpt.core.internal.platform.BaseJpaProjectContext.refreshDefaults(BaseJpaProjectContext.java:141)\nat org.eclipse.jpt.core.internal.platform.BaseJpaPlatform.resynch(BaseJpaPlatform.java:201)\nat org.eclipse.jpt.core.internal.JpaProject$1.run(JpaProject.java:176)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "We seem to recover fine from this exception, unlike the original exception which left you unable to edit.  I believe this only happens if you edit the attribute mapping immediately after editing the type mapping",
    "This seems to happen when changing the mapping twice quickly.",
    "It looks like this bug is more or less fixed, but there remains a separate issue of the NPE that happens when changing an attribute mapping.  That happens regardless of whether the type mapping has been changed and does not involve the issues responsible for the fix for the main problem here.\n\nOpened bug 191747 to track that issue and submitting this for approval ...",
    "Created an attachment (id\u003d70720)\nproposed patch\n\nSlight change to patch which *seems* to fix other issue.",
    "Created an attachment (id\u003d70859)\nproposed patch\n\nThe last patch fixed the secondary NPE in the simplest case (orm.xml file only) but not when backed by a java class.\n\nThis should fix it for that case as well.",
    "This is a critical bug that will affect a large number of users if not addressed.     Upon hitting the bug, restarting Eclipse is the only way to proceed with your work.  The series of patches have been through several days of testing and we think now all of the issues have been resolved.  Given the severity of this bug, some risk in the fix is acceptable, but the one regression that was found has now been resolved in the third patch.\n\nI have reviewed and tested, and now approve this fix.  Requesting PMC approval.",
    "I\u0027m approving assuming it is a main path, and user \"is hosed\" once hit. \n\nThe size of the code changes and the number of preliminary patches makes me uneasy ... so, use care! \n\n",
    "(In reply to comment #10)\n\u003e I\u0027m approving assuming it is a main path, and user \"is hosed\" once hit. \n\u003e The size of the code changes and the number of preliminary patches makes me\n\u003e uneasy ... so, use care! \n\nThis is a main path for anyone who is configuring their entities with the orm.xml descriptor, and yes, the user is blocked from mapping their Entities further until they restart Eclipse.  The good news is that we have tested the patch for several days, and the change between patches is minor.\n\n",
    "committed ...",
    "verified fixed",
    "Verified.  Closing."
  ],
  "commentCreationDates": [
    "2007-06-06T18:34:36+02:00",
    "2007-06-06T18:35:28+02:00",
    "2007-06-08T00:43:58+02:00",
    "2007-06-08T15:36:06+02:00",
    "2007-06-08T15:51:49+02:00",
    "2007-06-08T17:03:54+02:00",
    "2007-06-08T19:25:49+02:00",
    "2007-06-08T19:48:08+02:00",
    "2007-06-11T17:50:17+02:00",
    "2007-06-11T22:23:15+02:00",
    "2007-06-12T04:21:56+02:00",
    "2007-06-12T15:15:39+02:00",
    "2007-06-12T16:06:10+02:00",
    "2007-06-12T19:37:59+02:00",
    "2007-06-13T17:21:33+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jpt.core.internal.content.orm.resource.AttributeMappingsTranslator.getDelegateFor",
          "source": "AttributeMappingsTranslator.java:37"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.orm.resource.AttributeMappingsTranslator.basicGetDependencyObject",
          "source": "AttributeMappingsTranslator.java:121"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.DependencyTranslator.getChild",
          "source": "DependencyTranslator.java:38"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.DependencyTranslator.getMOFValue",
          "source": "DependencyTranslator.java:57"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.Translator.getMOFChildren",
          "source": "Translator.java:582"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.DependencyTranslator.getMOFChildren",
          "source": "DependencyTranslator.java:53"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1340"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1595"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMFeature",
          "source": "EMF2DOMAdapterImpl.java:1534"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.notifyChanged",
          "source": "EMF2DOMAdapterImpl.java:1033"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl$DependencyAdapter.notifyChanged",
          "source": "EMF2DOMAdapterImpl.java:74"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify",
          "source": "BasicNotifierImpl.java:247"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaEObject.eNotify",
          "source": "JpaEObject.java:88"
        },
        {
          "method": "org.eclipse.emf.ecore.util.EcoreEList.dispatchNotification",
          "source": "EcoreEList.java:249"
        },
        {
          "method": "org.eclipse.emf.common.notify.impl.NotifyingListImpl.remove",
          "source": "NotifyingListImpl.java:717"
        },
        {
          "method": "org.eclipse.emf.common.util.BasicEList.remove",
          "source": "BasicEList.java:899"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.orm.XmlPersistentType.changeMapping",
          "source": "XmlPersistentType.java:430"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "191301",
      "date": "2007-06-06T18:34:36+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jpt.core.internal.content.orm.XmlAttributeMapping.isVirtual",
          "source": "XmlAttributeMapping.java:335"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.orm.XmlPersistentAttribute.isVirtual",
          "source": "XmlPersistentAttribute.java:310"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.XmlTypeContext.refreshPersistentType",
          "source": "XmlTypeContext.java:246"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.XmlTypeContext.refreshDefaults",
          "source": "XmlTypeContext.java:208"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.XmlEntityContext.refreshDefaults",
          "source": "XmlEntityContext.java:152"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.PersistenceUnitContext$5.persistentType",
          "source": "PersistenceUnitContext.java:265"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.MappingFileContext$1.persistentType",
          "source": "MappingFileContext.java:124"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaPersistentType.refreshParentPersistentType",
          "source": "JavaPersistentType.java:926"
        },
        {
          "method": "org.eclipse.jpt.core.internal.content.java.JavaPersistentType.refreshDefaults",
          "source": "JavaPersistentType.java:912"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.JavaTypeContext.refreshDefaults",
          "source": "JavaTypeContext.java:57"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.XmlTypeContext.refreshDefaults",
          "source": "XmlTypeContext.java:206"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.MappingFileContext.refreshDefaults",
          "source": "MappingFileContext.java:98"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.PersistenceUnitContext.refreshDefaults",
          "source": "PersistenceUnitContext.java:241"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.BaseJpaProjectContext.refreshDefaults",
          "source": "BaseJpaProjectContext.java:148"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.BaseJpaProjectContext.refreshDefaults",
          "source": "BaseJpaProjectContext.java:141"
        },
        {
          "method": "org.eclipse.jpt.core.internal.platform.BaseJpaPlatform.resynch",
          "source": "BaseJpaPlatform.java:201"
        },
        {
          "method": "org.eclipse.jpt.core.internal.JpaProject$1.run",
          "source": "JpaProject.java:176"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 1,
      "commentIndex": 3,
      "bugId": "191301",
      "date": "2007-06-08T15:36:06+02:00",
      "product": "Dali JPA Tools",
      "component": "General",
      "severity": "critical"
    }
  ],
  "groupId": "191301",
  "bugId": "191301",
  "date": "2007-06-06T18:34:36+02:00",
  "product": "Dali JPA Tools",
  "component": "General",
  "severity": "critical"
}