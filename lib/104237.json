{
  "comments": [
    "Intermittently I receive the following Stack Trace and a dialog box that \nreports a HIERARCHY_REQUEST_ERR during programatic creation of a \nVirtualComponent.\n\n     [java] *** ERROR ***: Fri Jul 15 09:11:51 MDT 2005    \norg.w3c.dom.DOMException: HIERARCHY_REQUEST_ERR: An attempt was made to insert \na node where it is not permitted. \n     [java]            at \ncom.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.insertBefore\n(CoreDocumentImpl.java:419)\n     [java]            at \norg.eclipse.wst.common.internal.emf.utilities.DOMUtilities.insertBeforeNode\n(DOMUtilities.java:353)\n     [java]            at \norg.eclipse.wst.common.internal.emf.utilities.DOMUtilities.insertBeforeNodeAndW\nhitespace(DOMUtilities.java:378)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOMMu\nltiFeature(EMF2DOMAdapterImpl.java:309)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOMRootFe\nature(EMF2DOMAdapterImpl.java:901)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateDOM\n(EMF2DOMAdapterImpl.java:877)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateDOM\n(EMF2DOMAdapterImpl.java:866)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.createDOMTree\n(EMF2DOMRenderer.java:127)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.createDOMTreeIfNec\nessary(EMF2DOMRenderer.java:142)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doSave\n(EMF2DOMRenderer.java:88)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.doSave\n(TranslatorResourceImpl.java:167)\n     [java]            at org.eclipse.emf.ecore.resource.impl.ResourceImpl.save\n(ResourceImpl.java:893)\n     [java]            at org.eclipse.emf.ecore.resource.impl.ResourceImpl.save\n(ResourceImpl.java:813)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.ReferencedXMIResourceImpl.save\n(ReferencedXMIResourceImpl.java:276)\n     [java]            at \norg.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.save\n(TranslatorResourceImpl.java:153)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.primSaveReso\nurce(EditModel.java:1279)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.saveResource\n(EditModel.java:1310)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.primSave\n(EditModel.java:1245)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel$1.run\n(EditModel.java:376)\n     [java]            at org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1719)\n     [java]            at org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1739)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.runSaveOpera\ntion(EditModel.java:463)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.save\n(EditModel.java:379)\n     [java]            at \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.saveIfNecess\nary(EditModel.java:399)\n     [java]            at \norg.eclipse.wst.common.componentcore.internal.StructureEdit.saveIfNecessary\n(StructureEdit.java:413)\n     [java]            at \norg.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.create\n(VirtualComponent.java:175)\n...",
    "Changing the severity to critical since this seems to be popping up a bit more \noften now.",
    "Hi do you have a good repeatable scenario?  I haven\u0027t seen this problem in a\nwhile....",
    "We are continuing to look into this problem, but will not deliver the solution\nuntil M8, because the fix has possible destabilizing effects.",
    "I believe this is due to some multi-threading issues.\nWe are investigating a fix, and should release soon.\n\n\n\n*** This bug has been marked as a duplicate of 104786 ***",
    "We still this problem time to time on WTP 08/08",
    "Bala some threading fixes went in post 0.7, and are not in a build yet.  I\nbelieve the first I Build should be on 8/11.",
    "*** Bug 108837 has been marked as a duplicate of this bug. ***",
    "I\u0027d like to reopen this bug.  I don\u0027t think it\u0027s a dup of 104786.\n\nWe\u0027re getting the following stack intermittently:\n\n!MESSAGE org.eclipse.wst.common.frameworks.internal.SaveFailedException: !\nAn_error_occurred_while_sa_ERROR_!\n!STACK 0\njava.lang.RuntimeException: \norg.eclipse.wst.common.frameworks.internal.SaveFailedException: !\nAn_error_occurred_while_sa_ERROR_!\n\tat \ncom.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.performFinish\n(AddRemoveFeaturesWizard.java:296)\n\tat com.bea.wlw.features.ui.FeatureOrientedProjectWizard.performFinish\n(FeatureOrientedProjectWizard.java:113)\n\tat com.bea.wlw.ear.ui.WlsProjectWizard.performFinish\n(WlsProjectWizard.java:30)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed\n(WizardDialog.java:676)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed\n(WizardDialog.java:349)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:90)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:809)\n\tat org.eclipse.jface.window.Window.open(Window.java:787)\n\tat org.eclipse.ui.actions.NewProjectAction.run\n(NewProjectAction.java:114)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:538)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:488)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent\n(ActionContributionItem.java:400)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\nCaused by: org.eclipse.wst.common.frameworks.internal.SaveFailedException: !\nAn_error_occurred_while_sa_ERROR_!\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.primHandleSa\nveFailed(EditModel.java:1235)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.handleSaveFa\niled(EditModel.java:1140)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.saveResource\n(EditModel.java:1327)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.primSave\n(EditModel.java:1260)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel$1.run\n(EditModel.java:389)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1719)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1739)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.runSaveOpera\ntion(EditModel.java:476)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.save\n(EditModel.java:392)\n\tat \norg.eclipse.wst.common.internal.emfworkbench.integration.EditModel.saveIfNecess\nary(EditModel.java:412)\n\tat \norg.eclipse.wst.common.componentcore.internal.StructureEdit.saveIfNecessary\n(StructureEdit.java:453)\n\tat \norg.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.create\n(VirtualComponent.java:226)\n\tat com.bea.wlw.features.base.WebFeatureInstallDelegate.execute\n(WebFeatureInstallDelegate.java:116)\n\tat com.bea.wlw.features.core.internal.FeatureOrientedProject.modify\n(FeatureOrientedProject.java:157)\n\tat \ncom.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.performFinish\n(AddRemoveFeaturesWizard.java:311)\n\tat com.bea.wlw.features.ui.FeatureOrientedProjectWizard.performFinish\n(FeatureOrientedProjectWizard.java:134)\n\tat com.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard$2.execute\n(AddRemoveFeaturesWizard.java:250)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run\n(WorkspaceModifyOperation.java:98)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1719)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:110)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:113)\n\n\nThe com.bea.xxxx classes you see above are now available for your review in \nthe features framework submission that\u0027s in CVS.\n\nIn particular, please take a review the\n  features.base.WebFeatureInstallDelegate.execute()\nmethod and make sure that we are creating the VirtualComponent correctly.  \nPerhaps we shouldn\u0027t be calling createComponent.  Or maybe we\u0027re not \"locking\" \nthe edit model properly.\n\nHere\u0027s the snippet:\n\n            final IVirtualComponent c\n                \u003d ComponentCore.createComponent( project, project.getName() );\n\n            c.create( 0, null );\n\n\n",
    "Thanks - I\u0027ll use this snipet to reproduce today.....",
    "Transfering my last comment and CC list to \nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d108638\nseems cleaner to track current exception that bug rather than reopen this one.",
    "issue tracked, resolved and closed through 104786.",
    "Closing as verified."
  ],
  "commentCreationDates": [
    "2005-07-18T18:25:46+02:00",
    "2005-07-20T05:15:31+02:00",
    "2005-07-21T20:28:43+02:00",
    "2005-07-26T21:21:05+02:00",
    "2005-08-02T19:24:59+02:00",
    "2005-08-11T15:36:17+02:00",
    "2005-08-11T15:38:30+02:00",
    "2005-09-07T18:16:45+02:00",
    "2005-09-08T04:52:40+02:00",
    "2005-09-08T15:42:18+02:00",
    "2005-09-08T19:47:31+02:00",
    "2006-09-26T20:19:49+02:00",
    "2006-09-26T20:50:35+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.w3c.dom.DOMException",
      "message": "HIERARCHY_REQUEST_ERR: An attempt was made to insert  a node where it is not permitted.       [java]",
      "elements": [
        {
          "method": "com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.insertBefore",
          "source": "CoreDocumentImpl.java:419"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "104237",
      "duplicateId": "104786",
      "date": "2005-07-18T18:25:46+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "critical"
    },
    {
      "exceptionType": "org.eclipse.wst.common.frameworks.internal.SaveFailedException",
      "message": "! An_error_occurred_while_sa_ERROR_!",
      "elements": [
        {
          "method": "com.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.performFinish",
          "source": "AddRemoveFeaturesWizard.java:296"
        },
        {
          "method": "com.bea.wlw.features.ui.FeatureOrientedProjectWizard.performFinish",
          "source": "FeatureOrientedProjectWizard.java:113"
        },
        {
          "method": "com.bea.wlw.ear.ui.WlsProjectWizard.performFinish",
          "source": "WlsProjectWizard.java:30"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:676"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:349"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:556"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3080"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2713"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:809"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:787"
        },
        {
          "method": "org.eclipse.ui.actions.NewProjectAction.run",
          "source": "NewProjectAction.java:114"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:996"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:538"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3080"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2713"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.wst.common.frameworks.internal.SaveFailedException",
        "message": "! An_error_occurred_while_sa_ERROR_!",
        "elements": [
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.primHandleSaveFailed",
            "source": "EditModel.java:1235"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.handleSaveFailed",
            "source": "EditModel.java:1140"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.saveResource",
            "source": "EditModel.java:1327"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.primSave",
            "source": "EditModel.java:1260"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel$1.run",
            "source": "EditModel.java:389"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1719"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1739"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.runSaveOperation",
            "source": "EditModel.java:476"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.save",
            "source": "EditModel.java:392"
          },
          {
            "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.saveIfNecessary",
            "source": "EditModel.java:412"
          },
          {
            "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.saveIfNecessary",
            "source": "StructureEdit.java:453"
          },
          {
            "method": "org.eclipse.wst.common.componentcore.internal.resources.VirtualComponent.create",
            "source": "VirtualComponent.java:226"
          },
          {
            "method": "com.bea.wlw.features.base.WebFeatureInstallDelegate.execute",
            "source": "WebFeatureInstallDelegate.java:116"
          },
          {
            "method": "com.bea.wlw.features.core.internal.FeatureOrientedProject.modify",
            "source": "FeatureOrientedProject.java:157"
          },
          {
            "method": "com.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard.performFinish",
            "source": "AddRemoveFeaturesWizard.java:311"
          },
          {
            "method": "com.bea.wlw.features.ui.FeatureOrientedProjectWizard.performFinish",
            "source": "FeatureOrientedProjectWizard.java:134"
          },
          {
            "method": "com.bea.wlw.features.ui.internal.AddRemoveFeaturesWizard$2.execute",
            "source": "AddRemoveFeaturesWizard.java:250"
          },
          {
            "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
            "source": "WorkspaceModifyOperation.java:98"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1719"
          },
          {
            "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
            "source": "WorkspaceModifyOperation.java:110"
          },
          {
            "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
            "source": "ModalContext.java:113"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 8,
      "bugId": "104237",
      "duplicateId": "104786",
      "date": "2005-09-08T04:52:40+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "critical"
    }
  ],
  "groupId": "104786",
  "bugId": "104237",
  "duplicateId": "104786",
  "date": "2005-07-18T18:25:46+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "critical"
}