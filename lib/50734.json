{
  "comments": [
    "Eclipse 3.0M6 (eclipse-SDK-3.0M6-linux-gtk.zip) runs fine as root on my Fedora\nCore 1 box, but fails during startup when run as user bill.  I am using Sun\nJDK 1.4.2_03.  The splash screen comes up when run as bill and never goes away,\nand the IDE never starts.  Please see the console debug log below.  I have to\nkill the splash screen process or it just hangs around forever.\n\nFYI: Eclipse 2.1.2 works as both root and bill on this box.  I also tryed Sun\nJDK 1.4.2_02 with Eclipse 3.0M6 and behavior was the same.\n\n\n[bill@firebird bill]$ uname -a\nLinux firebird 2.4.22-1.2149.nptl #1 Wed Jan 7 13:08:26 EST 2004 i686 i686\ni386 GNU/Linux\n[bill@firebird bill]$ echo $PATH\n/usr/local/j2sdk1.4.2_03/bin:/usr/local/eclipse:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/home/bill/bin\n[bill@firebird bill]$ echo $CLASSPATH\n \n[bill@firebird bill]$ eclipse -debug -consolelog\nStart VM: /usr/local/j2sdk1.4.2_03/bin/java\n-cp /usr/local/eclipse/startup.jar org.eclipse.core.launcher.Main\n-os linux\n-ws gtk\n-arch x86\n-showsplash /usr/local/eclipse/eclipse -showsplash 600\n-debug\n-consolelog\nUsing the user.home location.\nConfiguration file:\n    file:/home/bill/.eclipse/org.eclipse.platform_3.0.0/.config/config.ini\nFramework located:\n    file:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/\nFramework classpath:\n    file:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/core.jar\n    file:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/console.jar\n    file:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/osgi.jar\n    file:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/resolver.jar\n   \nfile:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/defaultAdaptor.jar\n   \nfile:/usr/local/eclipse/plugins/org.eclipse.osgi_3.0.0/eclipseAdaptor.jar\nSplash path:\n    /usr/local/eclipse/plugins/org.eclipse.platform_3.0.0/splash.bmp\n!ENTRY org.eclipse.core.runtime 4 13 Jan 27, 2004 10:14:38.217\n!MESSAGE Unable to locate application extension:\norg.eclipse.ui.ide.workbench\n!STACK 0\njava.lang.RuntimeException: Unable to locate application extension:\norg.eclipse.ui.ide.workbench\n        at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:205)\n        at\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:85)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n        at org.eclipse.core.launcher.Main.run(Main.java:742)\n        at org.eclipse.core.launcher.Main.main(Main.java:581)\n[bill@firebird bill]$ ps\n  PID TTY          TIME CMD\n13126 pts/3    00:00:00 bash\n13287 pts/3    00:00:00 eclipse\n13291 pts/3    00:00:00 ps\n[bill@firebird bill]$ kill 13287\n[bill@firebird bill]$ ps\n  PID TTY          TIME CMD\n13126 pts/3    00:00:00 bash\n13296 pts/3    00:00:00 ps\n[bill@firebird bill]$",
    "1/27/2004 22:51\nJust tried Eclipse 3.0M6 Motif (eclipse-SDK-3.0M6-linux-motif.zip) and it also\nruns as both root and bill.  Might be something with GTK.",
    "The workaround for this bug is to delete the configuration directories.  You\ndelete \"~/.eclipse\" and \"\u003cinstall\u003e/.config\".  \n\nI have noticed this problem as well when simply updating from one version of\nEclipse to another.  There seems to be more to this than this narrow test case.",
    "Moving to Equinox for further analysis. I run on GTK with every I-build and\nhaven\u0027t seen this... Please let us know what \"-data\" argument you use, if any.",
    "No data argument used.  I just typed \"eclipse -debug -consolelog\" at the bash\nprompt.  My current directory was \"/home/bill\".  Java and eclipse were picked up\nvia my PATH as show in consolelog.\n\nDoug\u0027s workaround of deleting \"/home/bill/.eclipse\" and\n\"/usr/local/eclipse/.config\" worked, I can run 3.0M6-GTK as bill now.\nThanks Doug!\n",
    "Created an attachment (id\u003d7619)\nShell script used to start Eclipse\n\n-data ~/Source/eclipse",
    "good that you are up and running but we still need to understand the problem \nand see if we can report a better error condition.  assigning to rafael for \nreporting consideration.\n",
    "Bill, did you by any chance run Eclipse as root from bill\u0027s home dir? In that\nway, the workspace files would have root as owner, and bill would not be able to\nuse that workspace.",
    "Also, beware that Eclipse will write configuration information to\n\u003ceclipse_home\u003e/.config, if \u003ceclipse_home\u003e is writable.\n\nSo, running Eclipse from an install location that is user-writable alternately\nas root and a regular user is problematic. In your case, is Eclipse GTK install\nlocation writable by user bill? If so, can user bill delete the directory\n.config that there is in the Eclipse GTK install dir (you can try it, it is safe)?",
    "Rafael,\n\nRE Comment #7:\n\u003eBill, did you by any chance run Eclipse as root from bill\u0027s home dir? In that\n\u003eway, the workspace files would have root as owner, and bill would not be able\n\u003eto use that workspace.\n\nI am pretty sure I did not, I almost always logout and then relogin as root\nvia GDM.  I rarely use su.\n\nThe consolelog in the bug report was definitely run from /home/bill as bill,\nbut this was not the first attempt at running eclipse as bill.  It took me a\nlittle while to learn of the -debug and -consolelog options to eclipse.",
    "Rafael,\n\nRE Comment #8:\n\u003eSo, running Eclipse from an install location that is user-writable alternately\n\u003eas root and a regular user is problematic. In your case, is Eclipse GTK install\n\u003elocation writable by user bill? If so, can user bill delete the directory\n\u003e.config that there is in the Eclipse GTK install dir (you can try it, it is\n\u003esafe)?\n\nEclipse GTK install location is not writeable by bill.  Here is terminal echo\nof test:\n\n[bill@firebird bill]$ ls -laF /usr/local/eclipse\ntotal 124\ndrwxr-xr-x    8 root     root         4096 Jan 28 18:12 ./\ndrwxr-xr-x   23 root     root         4096 Jan 29 00:33 ../\ndrwxr-xr-x    4 root     root         4096 Jan 28 18:18 .config/\ndrwxr-xr-x    4 root     root         4096 Jan 27 09:20 .config-save/\n-rwxr-xr-x    1 root     root        15049 Jan 24 14:46 cpl-v10.html*\n-rwxr-xr-x    1 root     root        25087 Jan 24 14:46 eclipse*\n-rwxr-xr-x    1 root     root           59 Jan 24 14:46 .eclipseproduct*\ndrwxr-xr-x    8 root     root         4096 Jan 24 14:46 features/\n-rwxr-xr-x    1 root     root        10489 Jan 24 14:46 icon.xpm*\n-rwxr-xr-x    1 root     root          534 Jan 24 14:46 install.ini*\n-rwxr-xr-x    1 root     root         5642 Jan 24 14:46 notice.html*\ndrwxr-xr-x   81 root     root         4096 Jan 24 14:46 plugins/\ndrwxr-xr-x    2 root     root         4096 Jan 24 14:46 readme/\n-rwxr-xr-x    1 root     root        17406 Jan 24 14:46 startup.jar*\ndrwxr-xr-x    3 root     root         4096 Jan 24 14:48 workspace/\n[bill@firebird bill]$ mv /usr/local/eclipse/.config /usr/local/eclipse/.config-test\nmv: cannot move `/usr/local/eclipse/.config\u0027 to\n`/usr/local/eclipse/.config-test\u0027: Permission denied\n[bill@firebird bill]$",
    "Created an attachment (id\u003d7641)\ndiff of eclipse config dirs before and after workaround\n",
    "RE: My Comment #11:\n\nWhen I implemented Doug\u0027s workaround I renamed the directory\n/usr/local/eclipse/.config to /usr/local/eclipse/.config-save\ninstead of deleting it.\n\nI also renamed the directory /home/bill/.eclipse to /home/bill/.eclipse-save.\n\nI have attached (in Comment #11) recursive diffs of these 2 directories in the\nhope that may help troubleshooting.  The difference between lines 69 and 72 of\nthe attachment are curious.\n\nI hope this helps.\n",
    "I just noticed that I have a workspace directory owned by root in\n/usr/local/eclipse (3.0M6-GTK install dir).  I do not have a workspace directory\nin /usr/local/eclipse3.0M6_Motif/eclipse or /usr/local/eclipse2.1.2/eclipse.\n\nI think I doubled clicked on /usr/local/eclipse/eclipse as root to start it once.\n\nI know I tried eclipse first as root then tried it as bill.\n\nAlso interesting is that /root has a workspace directory but not a .eclipse\ndirectory.  Why doesn\u0027t root have a .eclipse directory?\n\nI hope this helps.",
    "Root\u0027s home dir does not have a .eclipse directory because it is created in the\nuser home dir only if the user does not have write access to Eclipse install\ndirectory.\n\n\u003eThe difference between lines 69 and 72 of\n\u003ethe attachment are curious.\n\nYou are right, the original reconciliation generated files inside\n/usr/local/eclipse, and that should not have happened (since bill does not have\npermission to write there).\n\nThis is the new install-log (user can start - v2LocalSite.xml under user\u0027s home\ndir).\n\n!CONFIGURATION Jan 28, 2004 6:12:58 PM\n!ACTIVITY Jan 28, 2004 18:12:58.632 file:/usr/local/eclipse/ site-install success\n!ACTIVITY Jan 28, 2004 18:12:58.638\nfile:/usr/local/eclipse/.config/platform.cfg.metadata/v2LocalSite.xml\nreconciliation success\n\nThis is the original install-log (user could not start - v2LocalSite.xml under\nEclipse install dir):\n!CONFIGURATION Jan 24, 2004 2:48:27 PM\n!ACTIVITY Jan 24, 2004 14:48:28.42 file:/usr/local/eclipse/ site-install success\n!ACTIVITY Jan 24, 2004 14:48:28.48\nfile:/usr/local/eclipse/.config/platform.cfg.metadata/v2LocalSite.xml\nreconciliation success\n\nThe question is: how could that have happened? Moving to Platform/Update for\ncomments.",
    "The most likely scenario is what Rafael describes in comment #7.\nAnother thing that could play a role in this is the following:\n- when user bill first runs eclipse, the .config directory is created in his \nhome directory. However, the way the .config is created depends on whether \neclipse was first run as root:\n- root has never launched eclipse: the content of the .config directory in \nbill\u0027s space is created brand new\n- root has launched eclipse in the past: the contents of the root\u0027s .config \ndirectory is copied over to bills\u0027s .config. \nNormally, this should not be a problem, but I thought I\u0027d just mention it. \nI am routing this back to equinox, but if you find anything to do with update, \nplease move it back to update.",
    "Glad you mentioned, Dorian!. Following your steps, I could easily reproduce the\nproblem with M6 and i20040130.\n\nThe issue here is that when a shared install that contains configuration data\n(e.g. someone has run Eclipse as root first) is found, the strategy of copying\nthe configuration files is not enough, because the configurator will not\nactually install any bundle into the framework.",
    "It looks like last.timestamp file is also copied along, and this should be \nuser specific... It\u0027s certainly an update bug.",
    "The fix: when shared .config is copied to user\u0027s .config, the \nlast.config.stamp file is not copied, it will be generated when the \nconfiguration is processed.",
    "There was some talk in the past of \"chained configurations\".  Would that affect \nthis scenario?  What support is needed in the runtime to support that?\n\nAlso, there have been some suggestions that we change the default location to \nbe in the user area.  Thoughts?\n\n",
    "Chaining configuration can be implemented to never copy anything, so this bug \nwon\u0027t happen. However, if only the configuration (platform.cfg and config.ini) \nare chained, then the question is whether we need to copy other stuff (help \nindex, cached bundles, etc.).\n\nThere has been lots of discussion on locating config data into the user\u0027s \nhome, but I much prefer what we do now. I find it easier to have all the \nartifacts located within my eclipse install. This is just my preference, and I \ndon\u0027t oppose other proposals.\nAs the config content is changing between builds, it is probably safer to not \nfix it to a well known system location, to avoid incompatibilities."
  ],
  "commentCreationDates": [
    "2004-01-28T03:12:19+01:00",
    "2004-01-28T03:58:54+01:00",
    "2004-01-28T18:31:01+01:00",
    "2004-01-28T22:02:21+01:00",
    "2004-01-28T22:13:01+01:00",
    "2004-01-28T22:19:06+01:00",
    "2004-01-28T22:22:38+01:00",
    "2004-01-29T21:21:03+01:00",
    "2004-01-29T21:36:35+01:00",
    "2004-01-30T02:08:44+01:00",
    "2004-01-30T02:30:05+01:00",
    "2004-01-30T02:38:21+01:00",
    "2004-01-30T02:53:03+01:00",
    "2004-01-30T03:16:34+01:00",
    "2004-02-02T17:40:08+01:00",
    "2004-02-02T18:29:03+01:00",
    "2004-02-02T23:07:38+01:00",
    "2004-02-03T17:23:01+01:00",
    "2004-02-03T18:14:48+01:00",
    "2004-02-04T23:50:15+01:00",
    "2004-02-05T00:08:28+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Unable to locate application extension: org.eclipse.ui.ide.workbench",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:205"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "50734",
      "date": "2004-01-28T03:12:19+01:00",
      "product": "Platform",
      "component": "Update",
      "severity": "normal"
    }
  ],
  "groupId": "50734",
  "bugId": "50734",
  "date": "2004-01-28T03:12:19+01:00",
  "product": "Platform",
  "component": "Update",
  "severity": "normal"
}