{
  "comments": [
    "I\u0027m using Callisto RC4.\n\nI have a \"Dynamic Web Project\" that uses the Spring Framework. Spring\u0027s libraries are in web/WEB-INF/lib/, in the \"Web App Libraries\" container, and have a source attachment.\n\nI control-clicked on a Spring class name, and the Class File Editor opened, telling me that \"The source attachment does not contain the source for the file AbstractTransactionalDataSourceSpringContextTests\". I clicked on \"Change Attached Source...\", chose the appropriate \"External folder\", and then I got \"Error attaching source\":\n\n!ENTRY org.eclipse.jdt.ui 4 10001 2006-06-02 11:33:24.203\n!MESSAGE Internal Error\n!STACK 0\njava.lang.reflect.InvocationTargetException\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:350)\n\tat org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:479)\n\tat org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run(ProgressMonitorJobsDialog.java:265)\n\tat org.eclipse.ui.internal.progress.ProgressManager$3.run(ProgressManager.java:894)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.progress.ProgressManager.busyCursorWhile(ProgressManager.java:929)\n\tat org.eclipse.ui.internal.progress.ProgressManager.busyCursorWhile(ProgressManager.java:904)\n\tat org.eclipse.ui.internal.progress.ProgressManager.run(ProgressManager.java:1111)\n\tat org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor$SourceAttachmentForm.applySourceAttachment(ClassFileEditor.java:299)\n\tat org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor$3.widgetSelected(ClassFileEditor.java:281)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:928)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3348)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2968)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat jrockit.reflect.InitialMethodInvoker.invoke(Ljava.lang.Object;[Ljava.lang.Object;)Ljava.lang.Object;(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Ljava.lang.Object;[Ljava.lang.Object;I)Ljava.lang.Object;(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\nCaused by: java.lang.ClassCastException: org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport$UpdatedClasspathContainer\n\tat org.eclipse.jst.common.jdt.internal.classpath.FlexibleProjectContainerInitializer.requestClasspathContainerUpdate(FlexibleProjectContainerInitializer.java:79)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.requestContainerUpdate(BuildPathSupport.java:231)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.updateContainerClasspath(BuildPathSupport.java:202)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.modifyClasspathEntry(BuildPathSupport.java:167)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceAttachmentBlock$1.run(SourceAttachmentBlock.java:579)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\nRoot exception:\njava.lang.ClassCastException: org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport$UpdatedClasspathContainer\n\tat org.eclipse.jst.common.jdt.internal.classpath.FlexibleProjectContainerInitializer.requestClasspathContainerUpdate(FlexibleProjectContainerInitializer.java:79)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.requestContainerUpdate(BuildPathSupport.java:231)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.updateContainerClasspath(BuildPathSupport.java:202)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.modifyClasspathEntry(BuildPathSupport.java:167)\n\tat org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceAttachmentBlock$1.run(SourceAttachmentBlock.java:579)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)",
    "I believe the problem to be a JDT bug (see https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d145784 for more info). It manifests when you attempt to update the source path attachment more than once in a single workbench session. I will attempt a workaround in a meantime.",
    "Created an attachment (id\u003d43880)\nPatch\n\nAttaching the patch with the workaround. The workaround is to use reflection to crack open the BuildPathSupport$UpdatedClasspathContainer class and get the actual container from the inside of it. The referenced JDT bug has been targeted for 3.2.1, so we should be able to remove the workaround in 1.5.1.",
    "+1 1.5\n",
    "Fix released into 1.5 RC5 stream. Create a bug to track removing the wokaround: https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d146105.",
    "This bug is being moved to the \"closed\" state since because it has been in the fixed state for a long time it is being assumed fixed without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug. "
  ],
  "commentCreationDates": [
    "2006-06-02T16:36:26+02:00",
    "2006-06-07T17:12:40+02:00",
    "2006-06-08T18:24:17+02:00",
    "2006-06-08T20:20:57+02:00",
    "2006-06-08T22:04:00+02:00",
    "2006-09-23T02:46:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:350"
        },
        {
          "method": "org.eclipse.jface.dialogs.ProgressMonitorDialog.run",
          "source": "ProgressMonitorDialog.java:479"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run",
          "source": "ProgressMonitorJobsDialog.java:265"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressManager$3.run",
          "source": "ProgressManager.java:894"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressManager.busyCursorWhile",
          "source": "ProgressManager.java:929"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressManager.busyCursorWhile",
          "source": "ProgressManager.java:904"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressManager.run",
          "source": "ProgressManager.java:1111"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor$SourceAttachmentForm.applySourceAttachment",
          "source": "ClassFileEditor.java:299"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor$3.widgetSelected",
          "source": "ClassFileEditor.java:281"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:90"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:928"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2968"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "jrockit.reflect.InitialMethodInvoker.invoke",
          "source": "Ljava.lang.Object;[Ljava.lang.Object;"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "145062",
      "date": "2006-06-02T16:36:26+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport$UpdatedClasspathContainer",
      "elements": [
        {
          "method": "org.eclipse.jst.common.jdt.internal.classpath.FlexibleProjectContainerInitializer.requestClasspathContainerUpdate",
          "source": "FlexibleProjectContainerInitializer.java:79"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.requestContainerUpdate",
          "source": "BuildPathSupport.java:231"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.updateContainerClasspath",
          "source": "BuildPathSupport.java:202"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.modifyClasspathEntry",
          "source": "BuildPathSupport.java:167"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceAttachmentBlock$1.run",
          "source": "SourceAttachmentBlock.java:579"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "145062",
      "date": "2006-06-02T16:36:26+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport$UpdatedClasspathContainer",
      "elements": [
        {
          "method": "org.eclipse.jst.common.jdt.internal.classpath.FlexibleProjectContainerInitializer.requestClasspathContainerUpdate",
          "source": "FlexibleProjectContainerInitializer.java:79"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.requestContainerUpdate",
          "source": "BuildPathSupport.java:231"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.updateContainerClasspath",
          "source": "BuildPathSupport.java:202"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.BuildPathSupport.modifyClasspathEntry",
          "source": "BuildPathSupport.java:167"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceAttachmentBlock$1.run",
          "source": "SourceAttachmentBlock.java:579"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "145062",
      "date": "2006-06-02T16:36:26+02:00",
      "product": "Web Tools",
      "component": "jst.j2ee",
      "severity": "major"
    }
  ],
  "groupId": "145062",
  "bugId": "145062",
  "date": "2006-06-02T16:36:26+02:00",
  "product": "Web Tools",
  "component": "jst.j2ee",
  "severity": "major"
}