{
  "comments": [
    "Found in .log using 20031119\n\n!ENTRY org.eclipse.core.runtime 4 2 Nov 19, 2003 14:19:43.783\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.IllegalStateException: Job manager has been shut down.\n\tat org.eclipse.core.internal.jobs.JobManager.schedule(JobManager.java:512)\n\tat org.eclipse.core.internal.jobs.InternalJob.schedule(InternalJob.java:211)\n\tat org.eclipse.core.runtime.jobs.Job.schedule(Job.java:330)\n\tat\norg.eclipse.ui.internal.progress.AnimationManager$4.done(AnimationManager.java:488)\n\tat org.eclipse.core.internal.jobs.JobListeners$3.notify(JobListeners.java:37)\n\tat org.eclipse.core.internal.jobs.JobListeners$7.run(JobListeners.java:106)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1127)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:464)\n\tat org.eclipse.core.internal.jobs.JobListeners.doNotify(JobListeners.java:86)\n\tat org.eclipse.core.internal.jobs.JobListeners.done(JobListeners.java:125)\n\tat org.eclipse.core.internal.jobs.JobManager.endJob(JobManager.java:281)\n\tat org.eclipse.core.internal.jobs.WorkerPool.endJob(WorkerPool.java:120)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:72)",
    "Relatively minor.  Job manager shutdown doesn\u0027t catch jobs that have already\nstarted (it invokes cancel on them but there is no guarantee they will respond).\n When these jobs finish the UI is scheduling an update job.\n\nI think the solution is for UI to unhook its job listener before shutting down\nthe job manager.  Otherwise it will fail when it tries to run the update job.",
    "Moving to UI.  Remove your job listener(s) before calling IJobManager.shutdown.\n The update jobs are no longer needed anyway (the display is about to be disposed).",
    "The problem goes a bit deeper.  Shutting down the job manager from the UI will\nbreak other plugins that try to run jobs during shutdown.  You could argue that\npeople shouldn\u0027t be doing this, but of course it turns out they are (see bug\n47051 for example).  UI should still unhook all of their job listeners before\nexiting (since the UI job listener invariably launches a UI job that will try to\nasyncExec in the disposed display).  We may need to reconsider the job manager\nshutdown strategy post M5 (since Equinox runtime has its own multi-stage\nshutdown story).",
    "*** Bug 47095 has been marked as a duplicate of this bug. ***",
    "We now only disconnect at shutdown and allow the job manager to do it.\n\nAlso all of our done listeners that support our workbench UI jobs are doing a \ntest for workbench shutdown before rescheduling. As the workbench is shutdown \nbefore the job manager we will be preventing these extra jobs.\n\nFixed for M5.",
    "*** Bug 47142 has been marked as a duplicate of this bug. ***",
    "*** Bug 47051 has been marked as a duplicate of this bug. ***",
    "Build: M8\n\nI\u0027m getting this again.  The exact trace is below.  I\u0027m getting it using the PDE\nJUnit launcher and it dumps to the console.\n\njava.lang.IllegalStateException: Job manager has been shut down.\n\tat org.eclipse.core.internal.jobs.JobManager.schedule(JobManager.java:623)\n\tat org.eclipse.core.internal.jobs.InternalJob.schedule(InternalJob.java:236)\n\tat org.eclipse.core.runtime.jobs.Job.schedule(Job.java:357)\n\tat\norg.eclipse.ui.internal.progress.WorkbenchSiteProgressService$1.done(WorkbenchSiteProgressService.java:205)\n\tat org.eclipse.core.internal.jobs.JobListeners$3.notify(JobListeners.java:38)\n\tat org.eclipse.core.internal.jobs.JobListeners$7.run(JobListeners.java:117)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)\n\tat org.eclipse.core.internal.jobs.JobListeners.doNotify(JobListeners.java:87)\n\tat org.eclipse.core.internal.jobs.JobListeners.done(JobListeners.java:136)\n\tat org.eclipse.core.internal.jobs.JobManager.endJob(JobManager.java:372)\n\tat org.eclipse.core.internal.jobs.WorkerPool.endJob(WorkerPool.java:119)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:72)\njava.lang.IllegalStateException: Job manager has been shut down.\n\tat org.eclipse.core.internal.jobs.JobManager.schedule(JobManager.java:623)\n\tat org.eclipse.core.internal.jobs.InternalJob.schedule(InternalJob.java:236)\n\tat org.eclipse.core.runtime.jobs.Job.schedule(Job.java:357)\n\tat org.eclipse.core.internal.jobs.JobManager.endJob(JobManager.java:375)\n\tat org.eclipse.core.internal.jobs.WorkerPool.endJob(WorkerPool.java:119)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:72)",
    "There are two stack traces in comment #8. The second is caused by a job that has\nindicated it wants to be rescheduled. I will fix this one in runtime to avoid\nrescheduling a completed job if the job manager has been shut down (i.e., avoid\nthrowing the exception). The first stack is in WorkbenchSiteProgressService so I\ncan\u0027t comment on that. The same general rule should apply, it is probably a bug\nin application code if a job is being scheduled after the platform (and UI) have\nshut down.",
    "My code schedules no jobs.  Although it probably should \u003cg\u003e.",
    "We have also added the PlatformUI.isWorkbenchRunning() check to the site \nprogress service",
    "(For my own reference: I have removed tests from IJobManagerTest that were\ntesting the startup/shutdown API methods that were provisionally added and then\nremoved. Last available in revision 1.38 of IJobManagerTest.)",
    "Marking as closed."
  ],
  "commentCreationDates": [
    "2003-11-19T13:54:48+01:00",
    "2003-11-19T19:23:55+01:00",
    "2003-11-19T22:13:11+01:00",
    "2003-11-20T02:07:24+01:00",
    "2003-11-20T15:56:35+01:00",
    "2003-11-20T16:06:17+01:00",
    "2003-11-20T19:35:04+01:00",
    "2003-11-21T14:10:38+01:00",
    "2004-04-27T17:07:13+02:00",
    "2004-04-27T20:06:47+02:00",
    "2004-04-27T20:19:47+02:00",
    "2004-04-27T20:20:37+02:00",
    "2004-05-14T20:47:31+02:00",
    "2005-05-10T20:53:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Job manager has been shut down.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.schedule",
          "source": "JobManager.java:512"
        },
        {
          "method": "org.eclipse.core.internal.jobs.InternalJob.schedule",
          "source": "InternalJob.java:211"
        },
        {
          "method": "org.eclipse.core.runtime.jobs.Job.schedule",
          "source": "Job.java:330"
        },
        {
          "method": "org.eclipse.ui.internal.progress.AnimationManager$4.done",
          "source": "AnimationManager.java:488"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners$3.notify",
          "source": "JobListeners.java:37"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners$7.run",
          "source": "JobListeners.java:106"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1127"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:464"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners.doNotify",
          "source": "JobListeners.java:86"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners.done",
          "source": "JobListeners.java:125"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.endJob",
          "source": "JobManager.java:281"
        },
        {
          "method": "org.eclipse.core.internal.jobs.WorkerPool.endJob",
          "source": "WorkerPool.java:120"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:72"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "46958",
      "date": "2003-11-19T13:54:48+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Job manager has been shut down.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.schedule",
          "source": "JobManager.java:623"
        },
        {
          "method": "org.eclipse.core.internal.jobs.InternalJob.schedule",
          "source": "InternalJob.java:236"
        },
        {
          "method": "org.eclipse.core.runtime.jobs.Job.schedule",
          "source": "Job.java:357"
        },
        {
          "method": "org.eclipse.ui.internal.progress.WorkbenchSiteProgressService$1.done",
          "source": "WorkbenchSiteProgressService.java:205"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners$3.notify",
          "source": "JobListeners.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners$7.run",
          "source": "JobListeners.java:117"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:610"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners.doNotify",
          "source": "JobListeners.java:87"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobListeners.done",
          "source": "JobListeners.java:136"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.endJob",
          "source": "JobManager.java:372"
        },
        {
          "method": "org.eclipse.core.internal.jobs.WorkerPool.endJob",
          "source": "WorkerPool.java:119"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:72"
        }
      ],
      "number": 1,
      "commentIndex": 8,
      "bugId": "46958",
      "date": "2004-04-27T17:07:13+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Job manager has been shut down.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.schedule",
          "source": "JobManager.java:623"
        },
        {
          "method": "org.eclipse.core.internal.jobs.InternalJob.schedule",
          "source": "InternalJob.java:236"
        },
        {
          "method": "org.eclipse.core.runtime.jobs.Job.schedule",
          "source": "Job.java:357"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.endJob",
          "source": "JobManager.java:375"
        },
        {
          "method": "org.eclipse.core.internal.jobs.WorkerPool.endJob",
          "source": "WorkerPool.java:119"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:72"
        }
      ],
      "number": 2,
      "commentIndex": 8,
      "bugId": "46958",
      "date": "2004-04-27T17:07:13+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "46958",
  "bugId": "46958",
  "date": "2003-11-19T13:54:48+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}