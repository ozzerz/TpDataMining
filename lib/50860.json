{
  "comments": [
    "Christophe Avare wrote:\n\n\u003e Are you saying that your plugin, when deployed inside the workbench used to\n\u003e develop it cannot find the SWT_AWT class ?\n\nYes indeed, thats what I\u0027m saying. Developing the plugin and running it by\nstarting the runtime-workspace (spawns a separate IDE window) works ok.\nBut when restarting the initial IDE, invoking the plugin will cause the\nsame NoClassDefFoundError.\n\nTurning on the OSGI support did not work.\n\nI\u0027m able to reproduce the bug by starting in a clean environment, choose a\nnew project plugin with a view. In the action1 button, instead of showing\na message, I construct a Frame via the SWT_AWT class, set the size, add a\nJPanel containing a JButton and make it visible.\n\nIf you now choose \"run as...\" a runtime workbench is started and\neverything works fine. Now export the project as a deployable plugin.\nThen, extract the zip file to the eclipse folder so that the plugin is in\nthe appropriate place. Stop and restart Eclipse, adjust perspective so\nthat the view is selectable and choose show view \"Sample view\". In the\nsample view click on the first item in the menu \"action1\", an exception is\nthrown and the log file says:\n\n!SESSION Jan 09, 2004 14:25:18.483\n---------------------------------------------\njava.version\u003d1.4.2_02\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -os win32 -ws win32 -arch x86\n!ENTRY org.eclipse.core.runtime 4 2 Jan 09, 2004 14:25:18.483\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NoClassDefFoundError: org/eclipse/swt/awt/SWT_AWT\n\tat swtawtbug.views.SampleView.createPartControl(SampleView.java:103)\n\tat org.eclipse.ui.internal.PartPane$4.run(PartPane.java:161)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:813)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:457)\n\tat org.eclipse.ui.internal.PartPane.createChildControl\n(PartPane.java:157)\n\tat org.eclipse.ui.internal.ViewPane.createChildControl\n(ViewPane.java:211)\n\tat org.eclipse.ui.internal.PartPane.createControl(PartPane.java:206)\n\tat org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:190)\n\tat\norg.eclipse.ui.internal.PartTabFolder.createPartTab(PartTabFolder.java:253)\n\tat org.eclipse.ui.internal.PartTabFolder.add(PartTabFolder.java:89)\n\tat org.eclipse.ui.internal.PartTabFolder.add(PartTabFolder.java:112)\n\tat\norg.eclipse.ui.internal.PerspectivePresentation.stackView\n(PerspectivePresentation.java:1573)\n\tat\norg.eclipse.ui.internal.PerspectivePresentation.stack\n(PerspectivePresentation.java:1546)\n\tat\norg.eclipse.ui.internal.PerspectivePresentation.addPart\n(PerspectivePresentation.java:164)\n\tat org.eclipse.ui.internal.Perspective.showView(Perspective.java:1475)\n\tat\norg.eclipse.ui.internal.WorkbenchPage.busyShowView(WorkbenchPage.java:714)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$9\n(WorkbenchPage.java:694)\n\tat org.eclipse.ui.internal.WorkbenchPage$13.run(WorkbenchPage.java:2796)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)\n\tat org.eclipse.ui.internal.WorkbenchPage.showView\n(WorkbenchPage.java:2793)\n\tat org.eclipse.ui.internal.WorkbenchPage.showView\n(WorkbenchPage.java:2779)\n\tat org.eclipse.ui.internal.ShowViewAction.run(ShowViewAction.java:51)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:509)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:461)\n\tat\norg.eclipse.jface.action.ActionContributionItem$5.handleEvent\n(ActionContributionItem.java:408)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:847)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2311)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1992)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1506)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1482)\n\tat\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:246)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:47)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n\tat org.eclipse.core.launcher.Main.run(Main.java:742)\n\tat org.eclipse.core.launcher.Main.main(Main.java:581)",
    "Created an attachment (id\u003d7628)\nproject workspace, sources incl binary plugin\n\nZip file contains the plugin workarea, java sources, compiled classes and\nplugin archive.",
    "Described behavior was produced on 3.0M6 build including the recommended \nworkaround to avoid the initial NoClassDefFoundException that was caused by the \nwrong package name in the manifest file for class SWT_AWT. Plugins that are \nexecuted via the runtime-workbench seem to work fine, actually deploying the \nplugin and restarting the main workbench throws the exception.\n",
    "*** Bug 50878 has been marked as a duplicate of this bug. ***",
    "This looks like a problem in the plugin class loader. Moving to core to get \nmore input. ",
    "The problem happens because there was a bug in the OSGi manifest for SWT that\nshipped with M6. It exported a package org.eclipse.swt.internal.awt, although\nthe right package should be org.eclipse.swt.awt. \n\nYou didn\u0027t get the error while running from Eclipse because you probably had SWT\nimported from CVS (the manifest was fixed on 20031230) instead of importing from\nthe M6 as binary project. Is that correct?\n\nSo, using a more recent integration build (or manually fixing the manifest for\nSWT on M6) solves the problem.",
    "This is actually a duplicate.",
    "Silenio, this has already been reported: bug 49401 and bug 50377. Feel free to\nmark as duplicate of one of them (BTW: one of them should be marked as duplicate\nof the other, shouldn\u0027t it?).",
    "\n\n*** This bug has been marked as a duplicate of 50377 ***"
  ],
  "commentCreationDates": [
    "2004-01-29T15:37:11+01:00",
    "2004-01-29T15:39:01+01:00",
    "2004-01-29T15:47:36+01:00",
    "2004-01-29T21:19:39+01:00",
    "2004-02-09T21:54:19+01:00",
    "2004-02-10T18:45:40+01:00",
    "2004-02-10T18:53:06+01:00",
    "2004-02-10T18:56:22+01:00",
    "2004-02-10T19:46:01+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/swt/awt/SWT_AWT",
      "elements": [
        {
          "method": "swtawtbug.views.SampleView.createPartControl",
          "source": "SampleView.java:103"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane$4.run",
          "source": "PartPane.java:161"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:813"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:457"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.createChildControl",
          "source": "PartPane.java:157"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.createChildControl",
          "source": "ViewPane.java:211"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.createControl",
          "source": "PartPane.java:206"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.createControl",
          "source": "ViewPane.java:190"
        },
        {
          "method": "org.eclipse.ui.internal.PartTabFolder.createPartTab",
          "source": "PartTabFolder.java:253"
        },
        {
          "method": "org.eclipse.ui.internal.PartTabFolder.add",
          "source": "PartTabFolder.java:89"
        },
        {
          "method": "org.eclipse.ui.internal.PartTabFolder.add",
          "source": "PartTabFolder.java:112"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectivePresentation.stackView",
          "source": "PerspectivePresentation.java:1573"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectivePresentation.stack",
          "source": "PerspectivePresentation.java:1546"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectivePresentation.addPart",
          "source": "PerspectivePresentation.java:164"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.showView",
          "source": "Perspective.java:1475"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyShowView",
          "source": "WorkbenchPage.java:714"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$9",
          "source": "WorkbenchPage.java:694"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$13.run",
          "source": "WorkbenchPage.java:2796"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:84"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.showView",
          "source": "WorkbenchPage.java:2793"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.showView",
          "source": "WorkbenchPage.java:2779"
        },
        {
          "method": "org.eclipse.ui.internal.ShowViewAction.run",
          "source": "ShowViewAction.java:51"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:509"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:461"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:408"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:847"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2311"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1992"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1506"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1482"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:246"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "50860",
      "duplicateId": "50377",
      "date": "2004-01-29T15:37:11+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "critical"
    }
  ],
  "groupId": "50377",
  "bugId": "50860",
  "duplicateId": "50377",
  "date": "2004-01-29T15:37:11+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "critical"
}