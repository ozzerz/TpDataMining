{
  "comments": [
    "Build ID: M20060921-0945\n\nSteps To Reproduce:\nEnvironment: Eclipse 3.2.1 M20060921-0945\nMylar 2.0.0v20070216\nSuSE Linux 10.2\nHTTPS Trac site\nHTTP proxy\nWeb access of the Trac site works through the proxy.\n\nI tried to set proxy settings via Install/update preferences, via -Dhttp(s).ProxyHost/Port in the eclipse.ini and via the settings for the task repository, but Mylar does not connect.\ntcpdump proves that it tries to resolve/connect directly.\n\nMore information:\nMaybe this infomation helps, trying to update repository atrributes returns:\norg.eclipse.mylar.internal.trac.core.TracRemoteException: I/O error while communicating with HTTP server: \u003csitename\u003e\nat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call(TracXmlRpcClient.java:122)\nat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.getAttributes(TracXmlRpcClient.java:388)\nat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.updateAttributes(TracXmlRpcClient.java:286)\nat org.eclipse.mylar.internal.trac.core.AbstractTracClient.updateAttributes(AbstractTracClient.java:100)\nat org.eclipse.mylar.internal.trac.core.TracRepositoryConnector.updateAttributes(TracRepositoryConnector.java:327)\nat org.eclipse.mylar.internal.tasks.ui.views.ResetRepositoryConfigurationAction$1.run(ResetRepositoryConfigurationAction.java:63)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\nCaused by: org.apache.xmlrpc.XmlRpcException: I/O error while communicating with HTTP server: \u003csitename\u003e\nat org.apache.xmlrpc.client.XmlRpcCommonsTransport.writeRequest(XmlRpcCommonsTransport.java:172)\nat org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:140)\nat org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:94)\nat org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:53)\nat org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:166)\nat org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:136)\nat org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:125)\nat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call(TracXmlRpcClient.java:109)\n... 6 more",
    "Version 2.0 is not int the choice list.",
    "I have not been able to reproduce this error so far. I have done manual testing on Eclipse 3.3M5 using the proxy settings in the repository preferences and added test cases for proxy settings that ran succesfully.\n\nAre you using proxy authentication? If yes, which type?\n\n\n",
    "Created an attachment (id\u003d59314)\nmylar/context/zip\n\n",
    "Sorry, I am not using proxy authentification. What additional information can I provide? Maybe I find some time this week to fetch your sources and step thought this case. \nSo far I like Mylar a lot and since you added the context I will find the relevant code easily :).",
    "I could reproduce it using Eclipse 3.2 and HTTPS. The proxy settings were ignored in that case (plain HTTP is sent through the proxy though). \n\nMik, Rob, any ideas?\n",
    "Perhaps we have a bug in SslProtocolSocketFactory.createSocket(...) . There is some complication there when routing through a proxy I recall.",
    "Odd that it works on 3.3 but not on 3.2 though.",
    " (In reply to comment #7)\n\u003e Odd that it works on 3.3 but not on 3.2 though.\nYes, this I can\u0027t explain. Let me know if you want me to investigate this further.",
    "The proxy problem may have been fixed by resolving bug 175547 . We will have a 3.2 dev build ready by the end of this week for testing.",
    "Created an attachment (id\u003d60217)\nproxy test cases\n\nI wrote a few test cases on the plane for the proxy handling in WebClientUtils. It seems like the custom SSL socket factory does not handle proxy authentication correctly and it also should not fallback to a non proxy connection in case of failure. I am wondering why it has code for establishing proxy connections at all since HttpClient should take care of that. Some of the cases fail with the current implementation but are green the standard SSL factory is used (by making WebClientUtils.repositoryUsesHttps() return false. ",
    "Created an attachment (id\u003d60218)\nmylar/context/zip\n\n",
    "This was done as a work around for a bug related to establishing an ssl connection via authenticated proxy.  I\u0027ve tried to fine some history on this for you but initial search hasn\u0027t turned up anything.",
    "Related: http://www.mail-archive.com/httpclient-user@jakarta.apache.org/msg02263.html",
    "Thanks Rob. I\u0027ll take a look at the HttpClient source to figure out how proxy connections are established. Maybe we get a chance to go over the code at EclipseCon.",
    "The automatic fallback to a non-proxy connection confused me and it also causes my test cases to fail which do expect the standard behavior.\n\nI have verified that SSL connections through proxies work with latest Mylar dev build."
  ],
  "commentCreationDates": [
    "2007-02-19T13:18:46+01:00",
    "2007-02-19T13:19:58+01:00",
    "2007-02-19T20:49:28+01:00",
    "2007-02-19T20:49:54+01:00",
    "2007-02-19T21:03:45+01:00",
    "2007-02-19T21:23:07+01:00",
    "2007-02-20T22:45:31+01:00",
    "2007-02-20T22:53:43+01:00",
    "2007-02-20T23:44:14+01:00",
    "2007-02-28T16:07:49+01:00",
    "2007-03-03T07:24:47+01:00",
    "2007-03-03T07:24:59+01:00",
    "2007-03-03T20:10:50+01:00",
    "2007-03-03T20:20:24+01:00",
    "2007-03-04T01:31:01+01:00",
    "2007-03-17T01:36:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.mylar.internal.trac.core.TracRemoteException",
      "message": "I/O error while communicating with HTTP server: \u003csitename\u003e",
      "elements": [
        {
          "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call",
          "source": "TracXmlRpcClient.java:122"
        },
        {
          "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.getAttributes",
          "source": "TracXmlRpcClient.java:388"
        },
        {
          "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.updateAttributes",
          "source": "TracXmlRpcClient.java:286"
        },
        {
          "method": "org.eclipse.mylar.internal.trac.core.AbstractTracClient.updateAttributes",
          "source": "AbstractTracClient.java:100"
        },
        {
          "method": "org.eclipse.mylar.internal.trac.core.TracRepositoryConnector.updateAttributes",
          "source": "TracRepositoryConnector.java:327"
        },
        {
          "method": "org.eclipse.mylar.internal.tasks.ui.views.ResetRepositoryConfigurationAction$1.run",
          "source": "ResetRepositoryConfigurationAction.java:63"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "causedBy": {
        "exceptionType": "org.apache.xmlrpc.XmlRpcException",
        "message": "I/O error while communicating with HTTP server: \u003csitename\u003e",
        "elements": [
          {
            "method": "org.apache.xmlrpc.client.XmlRpcCommonsTransport.writeRequest",
            "source": "XmlRpcCommonsTransport.java:172"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest",
            "source": "XmlRpcStreamTransport.java:140"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest",
            "source": "XmlRpcHttpTransport.java:94"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClientWorker.execute",
            "source": "XmlRpcClientWorker.java:53"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClient.execute",
            "source": "XmlRpcClient.java:166"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClient.execute",
            "source": "XmlRpcClient.java:136"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClient.execute",
            "source": "XmlRpcClient.java:125"
          },
          {
            "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call",
            "source": "TracXmlRpcClient.java:109"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "174620",
      "date": "2007-02-19T13:18:46+01:00",
      "product": "Mylyn",
      "component": "Trac",
      "severity": "major"
    }
  ],
  "groupId": "174620",
  "bugId": "174620",
  "date": "2007-02-19T13:18:46+01:00",
  "product": "Mylyn",
  "component": "Trac",
  "severity": "major"
}