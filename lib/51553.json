{
  "comments": [
    "I200402101600\nI get the following ClassCastException and the launch terminates.\nThis happened three times in a row and now it no longer seems to occur\n\nThread [main] (Suspended (exception ClassCastException))\n\tPackageAdmin.getExportedBundles(KeyedHashSet) line: 116\n\tPackageAdmin.initialize() line: 78\n\tFramework.initialize(FrameworkAdaptor) line: 200\n\tFramework.\u003cinit\u003e(FrameworkAdaptor) line: 97\n\tOSGi.createFramework(FrameworkAdaptor) line: 90\n\tOSGi.\u003cinit\u003e(FrameworkAdaptor) line: 31\n\tEclipseStarter.run(String[], Runnable) line: 86\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not \navailable [native method]\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25\n\tMethod.invoke(Object, Object[]) line: 324\n\tMain.basicRun(String[]) line: 279\n\tMain.run(String[]) line: 742\n\tMain.main(String[]) line: 581",
    "\nI get identical stack trace trying to start 3.0-M7 on Linux. This happens only \nif I write protect the installation directory. If I unprotected it, it works \nfine. But that\u0027s not acceptable longer term for being able to run eclipse from \ncentral global installation.\n\nWhat we do is install eclipse centrally, run it once with \"-initialize\" flag \nto have it configure its \".config/\" dirctory and than lock down the \ninstallation. This worked fine with 2.1 but doesn\u0027t seem to with 3.0 as it \nfails with stack trace below.\n\nIs there any workaround?\n\nStrack trace in log is:\n!ENTRY org.eclipse.core.launcher 4 0 Feb 17, 2004 18:28:01.580\n!MESSAGE Exception launching the Eclipse Platform:\n!STACK\njava.lang.ClassCastException: \norg.eclipse.osgi.framework.internal.core.BundleFra\ngment\n        at \norg.eclipse.osgi.framework.internal.core.PackageAdmin.getExportedBund\nles(PackageAdmin.java:116)\n        at org.eclipse.osgi.framework.internal.core.PackageAdmin.initialize\n(Pack\nageAdmin.java:78)\n        at org.eclipse.osgi.framework.internal.core.Framework.initialize\n(Framewo\nrk.java:200)\n        at org.eclipse.osgi.framework.internal.core.Framework.\u003cinit\u003e\n(Framework.j\nava:97)\n        at org.eclipse.osgi.framework.internal.core.OSGi.createFramework\n(OSGi.ja\nva:90)\n        at org.eclipse.osgi.framework.internal.core.OSGi.\u003cinit\u003e(OSGi.java:31)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.ja\nva:86)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.\njava:79)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAcces\nsorImpl.java:41)\n        at java.lang.reflect.Method.invoke(Method.java:386)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n        at org.eclipse.core.launcher.Main.run(Main.java:742)\n        at org.eclipse.core.launcher.Main.main(Main.java:581)\n\n",
    "Similar issue on windows but with a different errors. After running it once \nwith -inialize and once without and than locking down the installation tree, \nit actually managed to startup fine. But I get NPEs trying to go Help-\u003eManage \nConfiguration or About Eclipse Platform -\u003e Plugin details. Stack traces below.\n\nIf I unlock the installation tree it works fine again. \n\nRuntime seems to simply require write access to the installation tree. Is \nthere anyway to avoid this? This would be a major issue for anyone trying to \nget eclipse running from network and not have everyone do local installations.\n\ntrace 1:\n---------\n!ENTRY org.eclipse.core.launcher 4 0 Feb 17, 2004 13:50:36.163\n!MESSAGE Exception launching the Eclipse Platform:\n!STACK\njava.lang.NullPointerException\n        at org.eclipse.core.runtime.adaptor.CachedManifest.get\n(CachedManifest.java:66)\n        at org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1053)\n        at org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1009)\n        at org.eclipse.core.internal.plugins.PluginDescriptor.isLegacy\n(PluginDescriptor.java:504)\n        at org.eclipse.core.internal.plugins.PluginStopper.run\n(PluginStopper.java:50)\n        at \norg.eclipse.core.internal.runtime.PlatformActivator.stopLegacyBundles\n(PlatformActivator.java:286)\n        at org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:268)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:104)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n        at org.eclipse.core.launcher.Main.run(Main.java:742)\n        at org.eclipse.core.launcher.Main.main(Main.java:581)\n\n\ntrace 2:\n--------\n!ENTRY org.eclipse.ui 4 0 Feb 17, 2004 13:50:29.991\n!MESSAGE java.lang.NullPointerException\n!STACK 0\njava.lang.NullPointerException\n        at org.eclipse.core.runtime.adaptor.CachedManifest.get\n(CachedManifest.java:66)\n        at org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1053)\n        at org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1009)\n        at org.eclipse.core.internal.plugins.PluginDescriptor.getProviderName\n(PluginDescriptor.java:174)\n        at org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog$3.compare\n(AboutPluginsDialog.java:433)\n        at java.util.Arrays.mergeSort(Arrays.java:1278)\n        at java.util.Arrays.mergeSort(Arrays.java:1290)\n        at java.util.Arrays.mergeSort(Arrays.java:1290)\n        at java.util.Arrays.mergeSort(Arrays.java:1290)\n        at java.util.Arrays.mergeSort(Arrays.java:1290)\n        at java.util.Arrays.sort(Arrays.java:1219)\n        at \norg.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.sortByProvider\n(AboutPluginsDialog.java:427)\n        at org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e\n(AboutPluginsDialog.java:111)\n        at org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e\n(AboutPluginsDialog.java:92)\n        at org.eclipse.ui.internal.ide.dialogs.AboutDialog.buttonPressed\n(AboutDialog.java:93)\n        at org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:402)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2348)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2029)\n        at org.eclipse.jface.window.Window.runEventLoop(Window.java:647)\n        at org.eclipse.jface.window.Window.open(Window.java:627)\n        at org.eclipse.ui.internal.ide.actions.AboutAction.run\n(AboutAction.java:81)\n       Event(Widget.java:833)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2348)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2029)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1550)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1526)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:265)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n        at org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:47)\n        at org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:257)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:104)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n        at org.eclipse.core.launcher.Main.run(Main.java:742)\n        at org.eclipse.core.launcher.Main.main(Main.java:581)\n",
    "I don;t think this has anything to do with locked down installs (could be \nwrong).  Hard to imagine how this is happening.  The code identified in the \nstack trace is \n\nif (bundle !\u003d null \u0026\u0026 bundle instanceof BundleHost) {\n\tBundleLoaderProxy loaderProxy \u003d ((BundleHost)bundle).getLoaderProxy();\n\nThe only casting going on is of \"bundle\" to BundleHost but we explicitly check \nthat in the line before.  Given the transient nature, it feels like either a \nrace or a data corruption somewhere.",
    "Jeff, I put some extra code in to prevent the ClassCastException from \nhappening.  There was another defect with this same stacktrace.\n\nI put the check for instanceof BundleHost in the code recently.  I\u0027m not sure \nwhat was causing the situation in the first place but it seemed to be related \nto the State getting currupted by removing/adding plugins.  I think this is a \nduplicate of defect 52731.",
    "This is a duplicate.\n\n*** This bug has been marked as a duplicate of 52731 ***"
  ],
  "commentCreationDates": [
    "2004-02-10T23:08:29+01:00",
    "2004-02-17T18:44:54+01:00",
    "2004-02-17T19:14:45+01:00",
    "2004-02-27T19:10:12+01:00",
    "2004-02-27T19:23:13+01:00",
    "2004-02-27T19:24:55+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.osgi.framework.internal.core.BundleFra gment",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdmin.getExportedBundles",
          "source": "PackageAdmin.java:116"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.PackageAdmin.initialize",
          "source": "Pack ageAdmin.java:78"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.initialize",
          "source": "Framewo rk.java:200"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.\u003cinit\u003e",
          "source": "Framework.j ava:97"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.createFramework",
          "source": "OSGi.ja va:90"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.\u003cinit\u003e",
          "source": "OSGi.java:31"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.ja va:86"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:79"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAcces sorImpl.java:41"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:386"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "51553",
      "duplicateId": "52731",
      "date": "2004-02-17T18:44:54+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.CachedManifest.get",
          "source": "CachedManifest.java:66"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1053"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1009"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.isLegacy",
          "source": "PluginDescriptor.java:504"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginStopper.run",
          "source": "PluginStopper.java:50"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator.stopLegacyBundles",
          "source": "PlatformActivator.java:286"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:268"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:104"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "51553",
      "duplicateId": "52731",
      "date": "2004-02-17T19:14:45+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.CachedManifest.get",
          "source": "CachedManifest.java:66"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1053"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1009"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.getProviderName",
          "source": "PluginDescriptor.java:174"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog$3.compare",
          "source": "AboutPluginsDialog.java:433"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1278"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1290"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1290"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1290"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1290"
        },
        {
          "method": "java.util.Arrays.sort",
          "source": "Arrays.java:1219"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.sortByProvider",
          "source": "AboutPluginsDialog.java:427"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e",
          "source": "AboutPluginsDialog.java:111"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e",
          "source": "AboutPluginsDialog.java:92"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutDialog.buttonPressed",
          "source": "AboutDialog.java:93"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2348"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2029"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:647"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:627"
        },
        {
          "method": "org.eclipse.ui.internal.ide.actions.AboutAction.run",
          "source": "AboutAction.java:81"
        }
      ],
      "number": 2,
      "commentIndex": 2,
      "bugId": "51553",
      "duplicateId": "52731",
      "date": "2004-02-17T19:14:45+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "52731",
  "bugId": "51553",
  "duplicateId": "52731",
  "date": "2004-02-10T23:08:29+01:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}