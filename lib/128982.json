{
  "comments": [
    "A NullPointerException with the following stack trace is thrown while attempting to create an Ecore model from the XMLSchema listed below:\n\n!ENTRY org.eclipse.emf.importer\n!MESSAGE 0\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.xsd.ecore.XSDECoreBuilder.createFeature(XSDEcoreBuilder.java:1593)\n    at org.eclipse.xsd.ecore.XSDECoreBuilder.computeEClass(XSDEcoreBuilder.java:1032)\n...\n\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cxsd:schema xmlns:xsd\u003d\"http://www.w3.org/2001/XMLSchema\" xmlns\u003d\"urn:test\" xmlns:test\u003d\"urn:test\" targetNamespace\u003d\"urn:test\" elementFormDefault\u003d\"qualified\"\u003e\n\n   \u003cxsd:import namespace\u003d\"http://www.w3.org/2001/XMLSchema\" /\u003e\n   \u003cxsd:complexType name\u003d\"Test\"\u003e\n      \u003cxsd:sequence\u003e\n         \u003cxsd:element ref\u003d\"xsd:schema\" /\u003e\n      \u003c/xsd:sequence\u003e\n   \u003c/xsd:complexType\u003e\n\u003c/xsd:schema\u003e",
    "Ron,\n\nI can\u0027t reproduce this with 2.2 nor with 2.1.  Are you sure you haven\u0027t overlooked a prior exception?  You aren\u0027t by any chance using a Sun 1.4.x JDK are you?",
    "Yes, I am using Sun JDK 1.4.2_05 along with Xerces 2.7. Is there a problem with this configuration?",
    "You\u0027re *sure* you are using Xerces correctly?  If not, you\u0027ll see the \"Crimson DOM\" null pointer exception described here http://www.eclipse.org/emf/downloads-xerces.php.\n\nDoes your problem only happen with this schema, or pretty much with any schema you try?",
    "Yes, I\u0027m definately using Xerces 2.7. \n\nThe problem is related to the fact that this particular schema includes the following:\n - \u003cxsd:import namespace\u003d\"http://www.w3.org/2001/XMLSchema\" /\u003e \n - \u003cxsd:element ref\u003d\"xsd:schema\" /\u003e \n\nIf I remove these and replace the \"ref-element\" with \u003cxsd:element name\u003d\"schema\" type\u003d\"xsd:string\" /\u003e all is fine.\n\n",
    "Ron,\n\nYou\u0027ve cleaned the .log and you\u0027re sure this is the first exception?  You\u0027re not behind a firewall that prevents the schema from schema\u0027s being loaded via the http URL? \n\nDoes adding schemaLocation\u003d\"http://www.w3.org/2001/XMLSchema.xsd\" to the import change the behavior?",
    "Yes I\u0027m sure this is the first exception. I am behind a firewall that prevents the schema from schema\u0027s being loaded via the http URL. Doesn EMF/XSD automatically find the XMLSchema.xsd bundled with Xerces? For folks behind a firewall, does an xsd:import of XMLSchema require a valid schemaLocation? \n\nBTW, I have WTP 1.0.1-prerelease installed with its XML Catalog. Can EMF/XSD leverage the WTP XML Catalog to find resources like XMLSchema.xsd?",
    "Ron\n\nNo, EMF won\u0027t automatically find any particular version of the XMLSchema.xsd; we bundle one ourselves too in the XSD plugin, but it\u0027s for internal purposes.\n\nI think the URL http://www.w3.org/2001/XMLSchema used to yield the schema but now it yields a documentation page that isn\u0027t a schema (try it in a browser), so I think the schemaLocation URI is necessary to point at the right URL.\n\nI believe that WTP adds support on top of XSD to use catalogs, but WTP depends on us and not the other way around, so we can\u0027t use anything that WTP provides.  EMF supports URI mappings that are analogous, but you\u0027d need to contribute a plugin that defines such a mapping. \n\nOne approach to work around this is to specify a schemaLocation that points at a copy inside your firewall (at least for the purpose of doing the conversion). ",
    "I pointed to a copy inside our firewall by adding a schemaLocation attribute but the same exact stack trace resulted. BTW, I\u0027m running EMF 2.1.2 and Eclipse 3.1.2. Here is a little more of the stack trace if it helps:\n\norg.eclipse.xsd.ecore.XSDECoreBuilder.createFeature(XSDEcoreBuilder.java:1593)\n    at\norg.eclipse.xsd.ecore.XSDECoreBuilder.computeEClass(XSDEcoreBuilder.java:1032)\n...\norg.eclipse.xsd.ecore.XSDECoreBuilder.computeEClass(XSDEcoreBuilder.java:723)    \norg.eclipse.xsd.ecore.XSDECoreBuilder.computeEClassifier(XSDEcoreBuilder.java:319)    \norg.eclipse.xsd.ecore.XSDECoreBuilder.getEClassifier(XSDEcoreBuilder.java:271)    \norg.eclipse.xsd.ecore.XSDECoreBuilder.createFeature(XSDEcoreBuilder.java:1475)    \norg.eclipse.xsd.ecore.XSDECoreBuilder.getEStructuralFeature(XSDEcoreBuilder.java:2016)    \norg.eclipse.xsd.ecore.XSDECoreBuilder.generate(XSDEcoreBuilder.java:2117)    \norg.eclipse.xsd.ecore.XSDECoreBuilder.generate(XSDEcoreBuilder.java:2067)    \norg.eclipse.xsd.ecore.importer.XSDImporter.doComputeEPackages(XSDImporter.java:123)\n...    ",
    "Ron,\n\nDid you do anything to make this import in the schema for schema\u0027s work:\n\n\u003cxs:import namespace\u003d\"http://www.w3.org/XML/1998/namespace\" schemaLocation\u003d\"http://www.w3.org/2001/xml.xsd\"\u003e\n\nI would expect all these problems with unresolved names and schema locations to produce error messages in the dialog before you turn the page. Are you at least seeing those come up?\n",
    "On XML Schema Import page of the New EMF Model wizard, when I click the \"Create XML Schema to ECore Map\" checkbox, I see a Load Problem dialog stating:\n\nProblems were encountered processing the models\n\nReason:\nThe operation was interrupted due to an exception \u0027NullPointerException\u0027. Check the log for further details. \n\nIn the schemaLocation attribute, I am now using a file URL to locate XMLSchema.xsd. In that directory, I also have the following files:\n\ndatatypes.dtd\nMagicXMLSchema.xsd\nxml.xsd\nXMLSchema.dtd\nXMLSchema-instance.xsd\n\nXerces happily validates instance documents using the said schema.\n",
    "Try not clicking on that mapping options; it\u0027s not necessary for producing the result? Does your XMLSchema.xsd\u0027s import use a relative location to point at the xml.xsd or is it using an htpp URL (which will fail)?",
    "Voila! As you suggested, I modified my XMLSchema.xsd\u0027s import to use a relative location to point at the xml.xsd per your suggestion and it works perfectly. Am I correct that Xerces doesn\u0027t have a problem validating against my schema because it uses an internal version of XMLSchema.xsd which references its internal version of xml.xsd?\n\nThanks so much for your help and patience.",
    "I\u0027m not sure about what Xerces does, but that definitely sounds plausible.\n\nNo need to apologize at all!  I\u0027m just very relieved that you were able to get it working and am embarrassed by our poor error handling in this case.  Normally a dialog should come up telling you about all the problems so you can fix them rather than trying to proceed.\n\nWhen I have some time, I\u0027m going to try your example again after dropping my internet connection and see what all goes wrong.  \n\nThanks for being patient enough to keep trying...\n\n"
  ],
  "commentCreationDates": [
    "2006-02-22T15:34:40+01:00",
    "2006-02-22T22:34:40+01:00",
    "2006-02-23T02:43:35+01:00",
    "2006-02-23T11:22:43+01:00",
    "2006-02-23T17:19:45+01:00",
    "2006-02-23T18:41:15+01:00",
    "2006-02-23T19:20:42+01:00",
    "2006-02-23T19:29:18+01:00",
    "2006-02-23T19:46:14+01:00",
    "2006-02-23T19:54:35+01:00",
    "2006-02-23T20:04:30+01:00",
    "2006-02-23T20:09:17+01:00",
    "2006-02-23T20:19:57+01:00",
    "2006-02-23T20:32:58+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.xsd.ecore.XSDECoreBuilder.createFeature",
          "source": "XSDEcoreBuilder.java:1593"
        },
        {
          "method": "org.eclipse.xsd.ecore.XSDECoreBuilder.computeEClass",
          "source": "XSDEcoreBuilder.java:1032"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "128982",
      "date": "2006-02-22T15:34:40+01:00",
      "product": "EMF",
      "component": "Tools",
      "severity": "normal"
    }
  ],
  "groupId": "128982",
  "bugId": "128982",
  "date": "2006-02-22T15:34:40+01:00",
  "product": "EMF",
  "component": "Tools",
  "severity": "normal"
}