{
  "comments": [
    "Steps to reproduce the bug:\n\n* Run the class provided at the end of this report (any application (workbench \nor standalone) that uses the draw2d ScrollPane figure would do)\n\n* \"Tickle\" one of the ScrollBars a little - try clicking an holding the mouse \nbutton in the area between one of the arrows and the dragable bar, so that the \nview scrolls to its bound, then use the same technique to scroll to the other \nbound. Repeat.\n\n* After a while (rarely longer that, say, 20 seconds of \"tickling\") the scroll \nbar \"sticks\" to one of the boundaries and keeps scrolling that way whatever you \ndo...\n\nFurthermore:\n\n* Now when you resize the window so that the viewport is large enough to \ncontain its whole contents and the scrollbar(s) disappear, an exception is \nraised (the contents of stderr follows):\n\n    org.eclipse.swt.SWTException: Failed to execute runnable \n(java.lang.NullPointerException)\n        at org.eclipse.swt.SWT.error(SWT.java:1887)\n        at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:148)\n        at org.eclipse.swt.widgets.Display.syncExec(Display.java:1640)\n        at com.ibm.etools.draw2d.ButtonModel$1.run(ButtonModel.java:396)\n        at com.ibm.etools.draw2d.util.Timer.preformRun(Timer.java:38)\n        at com.ibm.etools.draw2d.util.Timer.run(Timer.java:54)\n        at java.lang.Thread.run(Thread.java:484)\n    org.eclipse.swt.SWTException: Failed to execute runnable \n(java.lang.NullPointerException)\n        at org.eclipse.swt.SWT.error(SWT.java:1887)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:96)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1389)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1211)\n        at Bug.main(Bug.java:47)\n    *** Stack trace of contained exception ***\n    java.lang.NullPointerException\n        at com.ibm.etools.draw2d.ButtonModel$2.run(ButtonModel.java:399)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:29)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:93)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1389)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1211)\n        at Bug.main(Bug.java:47)\n\n* If you make the window smaller again, the scrollbars will reappear and will \nwork corretly (however, you may reproduce the bug over and over again)\n\n\nI succeeded to reproduce the bug everytime I intended to (even several times I \ndidn\u0027t mean to do so, of course).\nThe bug doesn\u0027t seem to occur on the SWT ScrolledComposite control.\n\nI use the version of GEF currently downloadable from \nhttp://download.eclipse.org/tools/gef/gef.zip\n\n_____\n\n\nA minimal ScrollPane example:\n\n    import org.eclipse.swt.widgets.Display;\n    import org.eclipse.swt.widgets.Shell;\n    \n    import com.ibm.etools.draw2d.LightweightSystem;\n    import com.ibm.etools.draw2d.RectangleFigure;\n    import com.ibm.etools.draw2d.ScrollPane;\n    \n    public class Bug {\n    \n        public static void main(String[] args) {\n            Shell shell \u003d new Shell();\n            \n            LightweightSystem lws \u003d new LightweightSystem(shell);\n            \n            RectangleFigure rectangle \u003d new RectangleFigure();\n            rectangle.setPreferredSize(400, 300);\n            \n            ScrollPane scrollPane \u003d new ScrollPane();\n            scrollPane.setView(rectangle);\n            \n            lws.setContents(scrollPane);\n            \n            shell.setText(\"ScrollPane problem\");\n            shell.pack();\n            shell.open();\n            \n            Display display \u003d Display.getDefault();\n            while (!shell.isDisposed()) {\n                try {\n                    if (!display.readAndDispatch()) {\n                        display.sleep();\n                    }\n                } catch (RuntimeException re) {\n                    re.printStackTrace();\n                }\n            }\n        }\n    }",
    "Thanks for the report.  I believe this is already fixed in the \"current\" code.  \nWe will soon be making our current code available.\n\nThe problem had to do with the pressed and armed properties changing state, \nand \"resume\" being called on the firing behavior unnecessarily, which spawned \nan extra Timer thread.\n\nEventually we should change this to be \"threadless\" and use the timer function \nadded to Display post V1 SWT.",
    "Can you reproduce this using the latest download for GEF, which was uploaded \nseveral weeks ago?",
    "fixed"
  ],
  "commentCreationDates": [
    "2002-05-24T19:34:33+02:00",
    "2002-05-27T05:14:11+02:00",
    "2002-06-19T21:31:16+02:00",
    "2002-06-21T01:06:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable  (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1887"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.syncExec",
          "source": "Synchronizer.java:148"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.syncExec",
          "source": "Display.java:1640"
        },
        {
          "method": "com.ibm.etools.draw2d.ButtonModel$1.run",
          "source": "ButtonModel.java:396"
        },
        {
          "method": "com.ibm.etools.draw2d.util.Timer.preformRun",
          "source": "Timer.java:38"
        },
        {
          "method": "com.ibm.etools.draw2d.util.Timer.run",
          "source": "Timer.java:54"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:484"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "17760",
      "date": "2002-05-24T19:34:33+02:00",
      "product": "GEF",
      "component": "draw2d",
      "severity": "major"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable  (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1887"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:96"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:1389"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1211"
        },
        {
          "method": "Bug.main",
          "source": "Bug.java:47"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "17760",
      "date": "2002-05-24T19:34:33+02:00",
      "product": "GEF",
      "component": "draw2d",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "com.ibm.etools.draw2d.ButtonModel$2.run",
          "source": "ButtonModel.java:399"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:29"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:93"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:1389"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1211"
        },
        {
          "method": "Bug.main",
          "source": "Bug.java:47"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "17760",
      "date": "2002-05-24T19:34:33+02:00",
      "product": "GEF",
      "component": "draw2d",
      "severity": "major"
    }
  ],
  "groupId": "17760",
  "bugId": "17760",
  "date": "2002-05-24T19:34:33+02:00",
  "product": "GEF",
  "component": "draw2d",
  "severity": "major"
}