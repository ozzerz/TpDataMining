{
  "comments": [
    "The ManageBreakpointActionDelegate forces a reconcile of a Java compilation unit \non a selection changed event (see trace below). A reconcile is an expensive \noperation for a large compilation unit. It is not clear why it is needed. The \nselection change updates the label to either Add/Remove. To do so you should not \nhave to know which element the selection is at. To reduce the updating cost the \nlabel could just be changed to Toggle Breakpoint.\n\nAll references to ActionDelegateHelper.getCurrentMemember should be checked.\n\n        at \norg.eclipse.jdt.internal.core.WorkingCopy.reconcile(WorkingCopy.java:357)\n        at \norg.eclipse.jdt.internal.debug.ui.actions.ActionDelegateHelper.getCurrentMember(\nActionDelegateHelper.java:138)\n        - locked \u003c055BF888\u003e (a org.eclipse.jdt.internal.core.WorkingCopy)\n        at \norg.eclipse.jdt.internal.debug.ui.actions.AbstractManageBreakpointActionDelegate\n.update(AbstractManageBreakpointActionDelegate.java:45)\n        at \norg.eclipse.jdt.internal.debug.ui.actions.ManageBreakpointActionDelegate.selecti\nonChanged(ManageBreakpointActionDelegate.java:179)",
    "Can we get rid of the reconcile?",
    "Just to emphasize the importance. This can result in 3-5 secondes delays when \nworking on a large compilation unit. Also any action which triggers a selection \nchanged (e.g. shift left) slows down by the same amount.",
    "I am suprised that this is occurring so frequently...the actions attempt to not \nforce the reconcile unless the selection moves into a source range that is not \ncontained within the current type which is cached.  So unless there is errors \nin this logic (which I will check tomorrow), within a large compilation unit I \nwould not expect any time penalty changing the selection as you are not likely \nmoving outside of the type. \n\nThe reason we moved to the \"reconcile\" is that we were getting \nJavaModelExceptions attempting to get the element at a specific location within \na compilation unit.  Is there a better way around this?  \n\nWe could take the reconcile out and just handle the exception.",
    "A reconcile should never be triggered just for enabling actions, it is too \nexpensive (even if it is rare). For example, when I select a block and do a \nshift left you will always do a reconcile.\n\n\u003eWe could take the reconcile out and just handle the exception.\nwhy does adding/removing a breakpoint have to know about the method containing \nthe selection? All you need to know is whether there is already a breakpoint at \nthis particular line. I would also tolerate a less dynamic menu time that just \nsays Toggle Breakpoint. ",
    "We are actually looking for the \"member\" that is relevant...for a breakpoint it \nis a type, for add watchpoint it is a field and for add method it is a method.\n\nI agree that until contributed menu items have a better mechanism for updating \nbeside selection changed callbacks we will move the actions to only do work \nwhen the user explictly invokes them.\n\nSo we will have Toggle Breakpoint, Toggle Watchpoint, Toggle Method Breakpoint.",
    "Reworked the action hierarchy.  A reconcile will only happen when the user has \nexplictly asked to add/remove a breakpoint (is \"running\" the action) and this \nwill only happen when the current member no longer contains the current \nselection.",
    "Please verify (DarinW)",
    "Verified reconcile happens on \"add/remove\" only.\n\nI changed the action labels to \"Add/Remove...\" rather than \"Manage a...\". I \nthink users will understand this better.\n\nI still have a bug with watchpoints:\n(1) When the cursor is in a method, the \"Add/Remove Watchpoint\" action is \nenabled (and beeps when invoked).\n(2) When I select a field in the outliner, the pop-up \"Add/Remove Watchpoint\" \naction is enabled, but the action on the Run menu is not.\n",
    "(1) I don\u0027t think there is any way to do better here...how can I know whether I \ncan add remove a watchpoint unless I have resolved where I am based on the \nselection and therefore would need to reconcile...\n\n(2) This is a bug.\n",
    "Improved the actions some more.\n",
    "Please verify (DarinW).",
    "I just got this:\n\n!MESSAGE Reference action not found: additions\n!ENTRY org.eclipse.ui 4 2 May 28, 2002 20:13:58.119\n!MESSAGE Problems occurred when invoking code from plug-in: org.eclipse.ui.\n!STACK 0\njava.lang.NullPointerException\n\tat \norg.eclipse.jdt.internal.debug.ui.actions.ManageWatchpointActionDelegate.setEnab\nledState(ManageWatchpointActionDelegate.java:279)\n\tat \norg.eclipse.jdt.internal.debug.ui.actions.AbstractManageBreakpointActionDelegate\n.update(AbstractManageBreakpointActionDelegate.java:112)\n\tat \norg.eclipse.jdt.internal.debug.ui.actions.ManageBreakpointActionDelegate.selecti\nonChanged(ManageBreakpointActionDelegate.java:174)\n\tat org.eclipse.ui.internal.PluginAction.refreshEnablement\n(PluginAction.java:170)\n\tat org.eclipse.ui.internal.PluginAction.selectionChanged\n(PluginAction.java:232)\n\tat org.eclipse.ui.internal.PluginAction.selectionChanged\n(PluginAction.java:252)\n\tat org.eclipse.ui.internal.AbstractSelectionService$3.run\n(AbstractSelectionService.java:137)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:802)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:416)\n\tat org.eclipse.ui.internal.AbstractSelectionService.fireSelection\n(AbstractSelectionService.java:135)\n\tat org.eclipse.ui.internal.AbstractSelectionService.reset\n(AbstractSelectionService.java:291)\n\tat org.eclipse.ui.internal.AbstractSelectionService.partDeactivated\n(AbstractSelectionService.java:274)\n\tat org.eclipse.ui.internal.WWinPartService.partDeactivated\n(WWinPartService.java:124)\n\tat org.eclipse.ui.internal.PartListenerList$4.run\n(PartListenerList.java:97)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:802)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:416)\n\tat org.eclipse.ui.internal.PartListenerList.firePartDeactivated\n(PartListenerList.java:95)\n\tat org.eclipse.ui.internal.WorkbenchPage.firePartDeactivated\n(WorkbenchPage.java:1085)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart\n(WorkbenchPage.java:2068)\n\tat org.eclipse.ui.internal.WorkbenchPage.setPerspective\n(WorkbenchPage.java:2127)\n\tat org.eclipse.ui.internal.WorkbenchPage.busySetPerspective\n(WorkbenchPage.java:566)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$6\n(WorkbenchPage.java:554)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2191)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:56)\n\tat org.eclipse.ui.internal.WorkbenchPage.setPerspective\n(WorkbenchPage.java:2189)\n\tat org.eclipse.ui.internal.Workbench.showPerspective\n(Workbench.java:1167)\n\tat \norg.eclipse.debug.internal.ui.launchConfigurations.PerspectiveManager$1.run\n(PerspectiveManager.java:133)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:29)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:93)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1068)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:739)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:200)\n\tat org.eclipse.core.launcher.Main.run(Main.java:643)\n\tat org.eclipse.core.launcher.Main.main(Main.java:476)\n",
    "The active part can be null according to the doc.",
    "Fixed. (Re-open to re-assign)",
    "Please verify null check on active part.",
    "Fixed (again)",
    "Verified."
  ],
  "commentCreationDates": [
    "2002-05-23T11:47:52+02:00",
    "2002-05-24T20:30:05+02:00",
    "2002-05-26T20:23:45+02:00",
    "2002-05-27T02:49:15+02:00",
    "2002-05-27T13:08:11+02:00",
    "2002-05-27T21:06:21+02:00",
    "2002-05-28T19:12:36+02:00",
    "2002-05-28T19:15:45+02:00",
    "2002-05-28T23:09:01+02:00",
    "2002-05-28T23:49:48+02:00",
    "2002-05-29T02:48:15+02:00",
    "2002-05-29T02:48:27+02:00",
    "2002-05-29T03:04:27+02:00",
    "2002-05-29T03:14:46+02:00",
    "2002-05-29T03:22:00+02:00",
    "2002-05-29T03:22:16+02:00",
    "2002-05-29T03:22:27+02:00",
    "2002-05-29T03:36:21+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.debug.ui.actions.ManageWatchpointActionDelegate.setEnabledState",
          "source": "ManageWatchpointActionDelegate.java:279"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.actions.AbstractManageBreakpointActionDelegate.update",
          "source": "AbstractManageBreakpointActionDelegate.java:112"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.actions.ManageBreakpointActionDelegate.selectionChanged",
          "source": "ManageBreakpointActionDelegate.java:174"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.refreshEnablement",
          "source": "PluginAction.java:170"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.selectionChanged",
          "source": "PluginAction.java:232"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.selectionChanged",
          "source": "PluginAction.java:252"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$3.run",
          "source": "AbstractSelectionService.java:137"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:802"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:416"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.fireSelection",
          "source": "AbstractSelectionService.java:135"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.reset",
          "source": "AbstractSelectionService.java:291"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.partDeactivated",
          "source": "AbstractSelectionService.java:274"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPartService.partDeactivated",
          "source": "WWinPartService.java:124"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList$4.run",
          "source": "PartListenerList.java:97"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:802"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:416"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList.firePartDeactivated",
          "source": "PartListenerList.java:95"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.firePartDeactivated",
          "source": "WorkbenchPage.java:1085"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:2068"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setPerspective",
          "source": "WorkbenchPage.java:2127"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busySetPerspective",
          "source": "WorkbenchPage.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$6",
          "source": "WorkbenchPage.java:554"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:2191"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:56"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setPerspective",
          "source": "WorkbenchPage.java:2189"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.showPerspective",
          "source": "Workbench.java:1167"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.PerspectiveManager$1.run",
          "source": "PerspectiveManager.java:133"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:29"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:93"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1068"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:739"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:200"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:643"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:476"
        }
      ],
      "number": 0,
      "commentIndex": 12,
      "bugId": "17162",
      "date": "2002-05-29T03:04:27+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "critical"
    }
  ],
  "groupId": "17162",
  "bugId": "17162",
  "date": "2002-05-23T11:47:52+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "critical"
}