{
  "comments": [
    "Build ID: 3.2.2\n\nSteps To Reproduce:\n1. share a project using the filesystem provider\n2. delete a file using client 1\n3. update the project in client 2\n4. will throw an NPE\n\n\nMore information:\nin FileSystemOperation.internalGet(IFile, ...) there are 2 return statements missing:\n\n\t\tif (base !\u003d null \u0026\u0026 remote \u003d\u003d null) {\n\t\t\t// The remote no longer exists so remove the local\n\t\t\ttry {\n\t\t\t\tlocalFile.delete(false, true, progress);\n\t\t\t\tsynchronizer.flush(localFile, IResource.DEPTH_ZERO);\n                return;  // HERE\n\t\t\t} catch (CoreException e) {\n\t\t\t\tthrow TeamException.asTeamException(e);\n\t\t\t}\n\t\t}\n\t\tif (!synchronizer.isLocallyModified(localFile) \n\t\t\t\t\u0026\u0026 base !\u003d null \n\t\t\t\t\u0026\u0026 remote !\u003d null \n\t\t\t\t\u0026\u0026 comparator.compare(base, remote)) {\n\t\t\t// The base and remote are the same and there\u0027s no local changes\n\t\t\t// so nothing needs to be done\n          return;  // AND HERE\n\t\t}\n\t\ttry {\n\t\t\t//Copy from the local file to the remote file:\n\t\t\tInputStream source \u003d null;\n\t\t\ttry {\n\t\t\t\t// Get the remote file content.\n\t\t\t\tsource \u003d remote.getContents();  // OTHERWISE NPE HERE",
    "Could you clarify what you mean by \"client 1\" and \"client 2\"?",
    "I start 2 eclipse instances with different workspaces. This simulates 2 developers sharing a project via filesystem provider \u003d client 1 and client 2. \n\nBoth create a project which is shared by the same filesystem repository location. \nclient 1 : create a text file and check in via context menu \"Put\"\nclient 2 : update the project (receive the text file) via context menu \"Get\"\nclient 1 : delete the file and check in via context menu \"Put\"\nclient 2 : update the project via \"Get\"\n\nThe exception is\njava.lang.NullPointerException\n\tat org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet(FileSystemOperations.java:280)\n\tat org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet(FileSystemOperations.java:196)\n\tat org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet(FileSystemOperations.java:229)\n\tat org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet(FileSystemOperations.java:198)\n\tat org.eclipse.team.examples.filesystem.FileSystemOperations.get(FileSystemOperations.java:66)\n\tat org.eclipse.team.examples.filesystem.FileSystemOperations.get(FileSystemOperations.java:88)\n\tat org.eclipse.team.examples.filesystem.ui.GetOperation.execute(GetOperation.java:41)\n\tat org.eclipse.team.examples.filesystem.ui.FileSystemOperation.execute(FileSystemOperation.java:62)\n\tat org.eclipse.team.ui.synchronize.ModelOperation.run(ModelOperation.java:106)\n\tat org.eclipse.team.internal.ui.actions.JobRunnableContext.run(JobRunnableContext.java:144)\n\tat org.eclipse.team.internal.ui.actions.JobRunnableContext$ResourceJob.runInWorkspace(JobRunnableContext.java:72)\n\tat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n",
    "Thanks for the additional info. We\u0027ll have a look after M7 since this is example code.",
    "Created an attachment (id\u003d67237)\nPatch\n\nPatch with changes suggested by Andreas. NPE doesn\u0027t occur with the patch applied.",
    "Patch released to HEAD"
  ],
  "commentCreationDates": [
    "2007-04-05T09:57:41+02:00",
    "2007-04-10T20:02:29+02:00",
    "2007-04-11T08:00:23+02:00",
    "2007-04-11T14:42:35+02:00",
    "2007-05-15T15:43:36+02:00",
    "2007-05-15T16:10:55+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet",
          "source": "FileSystemOperations.java:280"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet",
          "source": "FileSystemOperations.java:196"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet",
          "source": "FileSystemOperations.java:229"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.FileSystemOperations.internalGet",
          "source": "FileSystemOperations.java:198"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.FileSystemOperations.get",
          "source": "FileSystemOperations.java:66"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.FileSystemOperations.get",
          "source": "FileSystemOperations.java:88"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.ui.GetOperation.execute",
          "source": "GetOperation.java:41"
        },
        {
          "method": "org.eclipse.team.examples.filesystem.ui.FileSystemOperation.execute",
          "source": "FileSystemOperation.java:62"
        },
        {
          "method": "org.eclipse.team.ui.synchronize.ModelOperation.run",
          "source": "ModelOperation.java:106"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.JobRunnableContext.run",
          "source": "JobRunnableContext.java:144"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.JobRunnableContext$ResourceJob.runInWorkspace",
          "source": "JobRunnableContext.java:72"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "181141",
      "date": "2007-04-11T08:00:23+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "minor"
    }
  ],
  "groupId": "181141",
  "bugId": "181141",
  "date": "2007-04-05T09:57:41+02:00",
  "product": "Platform",
  "component": "Team",
  "severity": "minor"
}