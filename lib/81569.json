{
  "comments": [
    "Under certain conditions, when applying a change summary to a data graph,\ngenerated model implementation causes ClassCastException.\n\nFor example, using a library with a single writer, I can create a book, set its\nname and writer, then add it to the library.\n\nHowever, when I add the book to the library first, then set its author\nreference, I get the following exception (when applying the (reversed) change): \n\njava.lang.ClassCastException\n    at org.eclipse.example.library.impl.BookImpl.eSet(BookImpl.java:329)\n    at\norg.eclipse.emf.ecore.change.impl.FeatureChangeImpl.apply(FeatureChangeImpl.java:526)\n    at\norg.eclipse.emf.ecore.change.impl.ChangeDescriptionImpl.apply(ChangeDescriptionImpl.java:200)\n    at org.eclipse.example.library.TestMain.main(TestMain.java:79) \n\nThis is because the generated code tries to cast the new value as Writer;\nhowever, the new value is org.eclipse.emf.ecore.impl.EObjectImpl@8530b8\n(eProxyURI: root.xml#//@writers.0) \n\nMarcelo recommends that we check if the reference is a proxy or not.",
    "Created an attachment (id\u003d16744)\nExample that demonstrates the issue.\n\nAttached is a zip with the library project. In it you will find class\norg.eclipse.example.library.TestMain, which demonstrates the issue.",
    "The fix is commited to CVS. The changes were made to the\nFeatureChangeImpl.getValue() method.",
    "Fixed in Build 2.1.0.I200412230800"
  ],
  "commentCreationDates": [
    "2004-12-17T22:46:17+01:00",
    "2004-12-17T22:48:35+01:00",
    "2004-12-19T04:09:14+01:00",
    "2004-12-23T17:10:49+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "org.eclipse.example.library.impl.BookImpl.eSet",
          "source": "BookImpl.java:329"
        },
        {
          "method": "org.eclipse.emf.ecore.change.impl.FeatureChangeImpl.apply",
          "source": "FeatureChangeImpl.java:526"
        },
        {
          "method": "org.eclipse.emf.ecore.change.impl.ChangeDescriptionImpl.apply",
          "source": "ChangeDescriptionImpl.java:200"
        },
        {
          "method": "org.eclipse.example.library.TestMain.main",
          "source": "TestMain.java:79"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "81569",
      "date": "2004-12-17T22:46:17+01:00",
      "product": "EMF",
      "component": "SDO",
      "severity": "normal"
    }
  ],
  "groupId": "81569",
  "bugId": "81569",
  "date": "2004-12-17T22:46:17+01:00",
  "product": "EMF",
  "component": "SDO",
  "severity": "normal"
}