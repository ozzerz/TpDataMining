{
  "comments": [
    "Build ID: I20061214-1445\n\nSteps To Reproduce:\nI have the following java class which I call in a webapp:\n\npublic class TestSwitch {\n  private enum FilterOptionEnum {\n    ALL,\n    NONE\n  }\n  \n  public void test() {\n    FilterOptionEnum lFilterOption \u003d FilterOptionEnum.ALL;\n    switch (lFilterOption) {\n      case ALL:\n        lFilterOption \u003d FilterOptionEnum.NONE;\n        break;\n      case NONE:\n        lFilterOption \u003d FilterOptionEnum.ALL;\n        break;\n    }\n  }\n}\n\n\nWhen loading the class, I get the following stack trace:\n[2007/11/15 16:20:57.814]**SEVR [11] trouble in:\npublic class com.bell.cts.prepaid.helpdesk.web.TestSwitch extends java.lang.Object:\n  public void \u003cinit\u003e():\n                    ALOAD_0     // Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch; this   (line 3)\n                    INVOKESPECIAL java.lang.Object.\u003cinit\u003e ()V\n    constructor-execution(void com.bell.cts.prepaid.helpdesk.web.TestSwitch.\u003cinit\u003e())\n    |               RETURN   (line 4)\n    constructor-execution(void com.bell.cts.prepaid.helpdesk.web.TestSwitch.\u003cinit\u003e())\n  end public void \u003cinit\u003e()\n\n  public void test():\n    method-execution(void com.bell.cts.prepaid.helpdesk.web.TestSwitch.test())\n    | field-get(com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ALL)\n    | |             GETSTATIC com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ALL Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch$FilterOptionEnum;   (line 10)\n    | field-get(com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ALL)\n    |               ASTORE_1\n    |               GETSTATIC com.bell.cts.prepaid.helpdesk.web.TestSwitch$1.$SwitchMap$com$bell$cts$prepaid$helpdesk$web$TestSwitch$FilterOptionEnum [I   (line 11)\n    |               ALOAD_1     // Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch$FilterOptionEnum; lFilterOption\n    | method-call(int com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ordinal())\n    | |             INVOKEVIRTUAL com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ordinal ()I\n    | method-call(int com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ordinal())\n    |               IALOAD\n    |               LOOKUPSWITCH\n    |                 1:        L0\n    |                 2:        L1\n    |                 default:  L2\n    |           L0: GETSTATIC com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.NONE Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch$FilterOptionEnum;   (line 13)\n    |               ASTORE_1     // Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch$FilterOptionEnum; lFilterOption\n    |               GOTO L2   (line 14)\n    |           L1: GETSTATIC com.bell.cts.prepaid.helpdesk.web.TestSwitch$FilterOptionEnum.ALL Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch$FilterOptionEnum;   (line 16)\n    |               ASTORE_1     // Lcom/bell/cts/prepaid/helpdesk/web/TestSwitch$FilterOptionEnum; lFilterOption\n    |           L2: RETURN   (line 19)\n    method-execution(void com.bell.cts.prepaid.helpdesk.web.TestSwitch.test())\n  end public void test()\n\nend public class com.bell.cts.prepaid.helpdesk.web.TestSwitch\n (handleMessage, com.bell.cts.common.aop.logging.LoggingMessageHandler.java)\njava.lang.ArrayIndexOutOfBoundsException: 0\n        at org.aspectj.weaver.ResolvedType.getMemberParameterizationMap(ResolvedType.java:695)\n        at org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.java:406)\n        at org.aspectj.weaver.ResolvedType.getDirectSupertypes(ResolvedType.java:65)\n        at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:352)\n        at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:276)\n        at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:300)\n        at org.aspectj.weaver.JoinPointSignatureIterator.accumulateTypesInBetween(JoinPointSignatureIterator.java:147)\n        at org.aspectj.weaver.JoinPointSignatureIterator.addSignaturesUpToFirstDefiningMember(JoinPointSignatureIterator.java:127)\n        at org.aspectj.weaver.JoinPointSignatureIterator.\u003cinit\u003e(JoinPointSignatureIterator.java:51)\n        at org.aspectj.weaver.MemberImpl.getJoinPointSignatures(MemberImpl.java:961)\n        at org.aspectj.weaver.patterns.SignaturePattern.matches(SignaturePattern.java:286)\n        at org.aspectj.weaver.patterns.KindedPointcut.matchInternal(KindedPointcut.java:106)\n        at org.aspectj.weaver.patterns.Pointcut.match(Pointcut.java:146)\n        at org.aspectj.weaver.patterns.AndPointcut.matchInternal(AndPointcut.java:52)\n        at org.aspectj.weaver.patterns.Pointcut.match(Pointcut.java:146)\n        at org.aspectj.weaver.patterns.AndPointcut.matchInternal(AndPointcut.java:52)\n        at org.aspectj.weaver.patterns.Pointcut.match(Pointcut.java:146)\n        at org.aspectj.weaver.ShadowMunger.match(ShadowMunger.java:75)\n        at org.aspectj.weaver.Advice.match(Advice.java:112)\n        at org.aspectj.weaver.bcel.BcelAdvice.match(BcelAdvice.java:118)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match(BcelClassWeaver.java:2806)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.matchInvokeInstruction(BcelClassWeaver.java:2768)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match(BcelClassWeaver.java:2506)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match(BcelClassWeaver.java:2332)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:494)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:119)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1612)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1563)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1341)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1161)\n        at org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes(WeavingAdaptor.java:353)\n        at org.aspectj.weaver.tools.WeavingAdaptor.weaveClass(WeavingAdaptor.java:260)\n        at org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:78)\n        at org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:55)\n        at sun.instrument.TransformerManager.transform(TransformerManager.java:122)\n        at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:155)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1629)\n        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at com.bell.cts.prepaid.helpdesk.web.Desktop.refreshScreen(Desktop.java:311)\n        at com.bell.cts.prepaid.helpdesk.web.Desktop.\u003cinit\u003e(Desktop.java:200)\n        at com.bell.cts.prepaid.helpdesk.Helpdesk.init(Helpdesk.java:112)\n        at nextapp.echo2.app.ApplicationInstance.doInit(ApplicationInstance.java:242)\n        at nextapp.echo2.webcontainer.ContainerInstance.init(ContainerInstance.java:215)\n        at nextapp.echo2.webcontainer.ContainerSynchronizeService.renderInit(ContainerSynchronizeService.java:418)\n        at nextapp.echo2.webrender.service.SynchronizeService.service(SynchronizeService.java:269)\n        at nextapp.echo2.webrender.WebRenderServlet.process(WebRenderServlet.java:273)\n        at com.bell.cts.prepaid.helpdesk.servlet.HelpdeskContext.process(HelpdeskContext.java:157)\n        at nextapp.echo2.webrender.WebRenderServlet.doPost(WebRenderServlet.java:189)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n        at org.apache.catalina.valves.FastCommonAccessLogValve.invoke(FastCommonAccessLogValve.java:481)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)\n        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n        at java.lang.Thread.run(Thread.java:595)\n\nMore information:\n- The problem occured only with class member enum only (private or public). Using an enum from another class work well.\n- The problem occured anytime a switch is done on that enum, whenever I have one case, all case or no case clause."
  ],
  "commentCreationDates": [
    "2007-11-15T21:51:16+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.aspectj.weaver.ResolvedType.getMemberParameterizationMap",
          "source": "ResolvedType.java:695"
        },
        {
          "method": "org.aspectj.weaver.ReferenceType.getDeclaredInterfaces",
          "source": "ReferenceType.java:406"
        },
        {
          "method": "org.aspectj.weaver.ResolvedType.getDirectSupertypes",
          "source": "ResolvedType.java:65"
        },
        {
          "method": "org.aspectj.weaver.ReferenceType.isAssignableFrom",
          "source": "ReferenceType.java:352"
        },
        {
          "method": "org.aspectj.weaver.ReferenceType.isAssignableFrom",
          "source": "ReferenceType.java:276"
        },
        {
          "method": "org.aspectj.weaver.ReferenceType.isAssignableFrom",
          "source": "ReferenceType.java:300"
        },
        {
          "method": "org.aspectj.weaver.JoinPointSignatureIterator.accumulateTypesInBetween",
          "source": "JoinPointSignatureIterator.java:147"
        },
        {
          "method": "org.aspectj.weaver.JoinPointSignatureIterator.addSignaturesUpToFirstDefiningMember",
          "source": "JoinPointSignatureIterator.java:127"
        },
        {
          "method": "org.aspectj.weaver.JoinPointSignatureIterator.\u003cinit\u003e",
          "source": "JoinPointSignatureIterator.java:51"
        },
        {
          "method": "org.aspectj.weaver.MemberImpl.getJoinPointSignatures",
          "source": "MemberImpl.java:961"
        },
        {
          "method": "org.aspectj.weaver.patterns.SignaturePattern.matches",
          "source": "SignaturePattern.java:286"
        },
        {
          "method": "org.aspectj.weaver.patterns.KindedPointcut.matchInternal",
          "source": "KindedPointcut.java:106"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.match",
          "source": "Pointcut.java:146"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.matchInternal",
          "source": "AndPointcut.java:52"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.match",
          "source": "Pointcut.java:146"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.matchInternal",
          "source": "AndPointcut.java:52"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.match",
          "source": "Pointcut.java:146"
        },
        {
          "method": "org.aspectj.weaver.ShadowMunger.match",
          "source": "ShadowMunger.java:75"
        },
        {
          "method": "org.aspectj.weaver.Advice.match",
          "source": "Advice.java:112"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelAdvice.match",
          "source": "BcelAdvice.java:118"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:2806"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.matchInvokeInstruction",
          "source": "BcelClassWeaver.java:2768"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:2506"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:2332"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:494"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:119"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1612"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:1563"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:1341"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1161"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes",
          "source": "WeavingAdaptor.java:353"
        },
        {
          "method": "org.aspectj.weaver.tools.WeavingAdaptor.weaveClass",
          "source": "WeavingAdaptor.java:260"
        },
        {
          "method": "org.aspectj.weaver.loadtime.Aj.preProcess",
          "source": "Aj.java:78"
        },
        {
          "method": "org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform",
          "source": "ClassPreProcessorAgentAdapter.java:55"
        },
        {
          "method": "sun.instrument.TransformerManager.transform",
          "source": "TransformerManager.java:122"
        },
        {
          "method": "sun.instrument.InstrumentationImpl.transform",
          "source": "InstrumentationImpl.java:155"
        },
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        },
        {
          "method": "java.lang.ClassLoader.defineClass",
          "source": "ClassLoader.java:620"
        },
        {
          "method": "java.security.SecureClassLoader.defineClass",
          "source": "SecureClassLoader.java:124"
        },
        {
          "method": "org.apache.catalina.loader.WebappClassLoader.findClassInternal",
          "source": "WebappClassLoader.java:1629"
        },
        {
          "method": "org.apache.catalina.loader.WebappClassLoader.findClass",
          "source": "WebappClassLoader.java:850"
        },
        {
          "method": "org.apache.catalina.loader.WebappClassLoader.loadClass",
          "source": "WebappClassLoader.java:1299"
        },
        {
          "method": "org.apache.catalina.loader.WebappClassLoader.loadClass",
          "source": "WebappClassLoader.java:1181"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:319"
        },
        {
          "method": "com.bell.cts.prepaid.helpdesk.web.Desktop.refreshScreen",
          "source": "Desktop.java:311"
        },
        {
          "method": "com.bell.cts.prepaid.helpdesk.web.Desktop.\u003cinit\u003e",
          "source": "Desktop.java:200"
        },
        {
          "method": "com.bell.cts.prepaid.helpdesk.Helpdesk.init",
          "source": "Helpdesk.java:112"
        },
        {
          "method": "nextapp.echo2.app.ApplicationInstance.doInit",
          "source": "ApplicationInstance.java:242"
        },
        {
          "method": "nextapp.echo2.webcontainer.ContainerInstance.init",
          "source": "ContainerInstance.java:215"
        },
        {
          "method": "nextapp.echo2.webcontainer.ContainerSynchronizeService.renderInit",
          "source": "ContainerSynchronizeService.java:418"
        },
        {
          "method": "nextapp.echo2.webrender.service.SynchronizeService.service",
          "source": "SynchronizeService.java:269"
        },
        {
          "method": "nextapp.echo2.webrender.WebRenderServlet.process",
          "source": "WebRenderServlet.java:273"
        },
        {
          "method": "com.bell.cts.prepaid.helpdesk.servlet.HelpdeskContext.process",
          "source": "HelpdeskContext.java:157"
        },
        {
          "method": "nextapp.echo2.webrender.WebRenderServlet.doPost",
          "source": "WebRenderServlet.java:189"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:709"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:802"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:252"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:173"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:213"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:178"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:126"
        },
        {
          "method": "org.apache.catalina.valves.ErrorReportValve.invoke",
          "source": "ErrorReportValve.java:105"
        },
        {
          "method": "org.apache.catalina.valves.FastCommonAccessLogValve.invoke",
          "source": "FastCommonAccessLogValve.java:481"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:107"
        },
        {
          "method": "org.apache.catalina.connector.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:148"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:856"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:744"
        },
        {
          "method": "org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket",
          "source": "PoolTcpEndpoint.java:527"
        },
        {
          "method": "org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt",
          "source": "LeaderFollowerWorkerThread.java:80"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:684"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "210032",
      "date": "2007-11-15T21:51:16+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "minor"
    }
  ],
  "groupId": "210032",
  "bugId": "210032",
  "date": "2007-11-15T21:51:16+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "minor"
}