{
  "comments": [
    "I get the following exception in some situations during startup.\n\nThe line 67 in BeehiveProject is:\nresult \u003d (BeehiveProject) project.getNature(NATURE_ID);\n\nAs from the stack trace it is caused by JDT request to resolve a classpath. Our \nprojects have a classpath container. Both extensions (project nature and \nclasspath container) are defined in the same plugin. I believe that somehow the \nproject nature is not yet initialized but I don\u0027t know. \n\nIs it possible that an internal implementation is returned in early stages \nduring startup? How can I avoid this exception? My classpath initializer needs \nour custom project nature oth the classpath can\u0027t be resolved.\n\n\njava.lang.ClassCastException\n\tat com.intershop.enfinity.studio.BeehiveProject.create\n(BeehiveProject.java:67)\n\tat \ncom.intershop.enfinity.studio.cartridge.classpath.BeehiveClassPathInitializer.in\nitialize(BeehiveClassPathInitializer.java:38)\n\tat org.eclipse.jdt.core.JavaCore$1.run(JavaCore.java:896)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1006)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.jdt.core.JavaCore.getClasspathContainer\n(JavaCore.java:891)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1531)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1463)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1439)\n\tat org.eclipse.jdt.internal.core.search.JavaSearchScope.add\n(JavaSearchScope.java:75)\n\tat org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.initialize\n(JavaWorkspaceScope.java:78)\n\tat org.eclipse.jdt.internal.core.search.JavaSearchScope.\u003cinit\u003e\n(JavaSearchScope.java:49)\n\tat org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.\u003cinit\u003e\n(JavaWorkspaceScope.java:30)\n\tat org.eclipse.jdt.internal.core.search.indexing.IndexManager.shutdown\n(IndexManager.java:507)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.shutdown\n(JavaModelManager.java:1550)\n\tat org.eclipse.jdt.core.JavaCore.shutdown(JavaCore.java:3017)\n\tat org.eclipse.core.internal.plugins.PluginRegistry$2.run\n(PluginRegistry.java:295)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1006)\n\tat org.eclipse.core.internal.plugins.PluginRegistry$1.visit\n(PluginRegistry.java:308)\n\tat org.eclipse.core.internal.plugins.PluginRegistry.accept\n(PluginRegistry.java:58)\n\tat org.eclipse.core.internal.plugins.PluginRegistry.shutdownPlugins\n(PluginRegistry.java:311)\n\tat org.eclipse.core.internal.plugins.PluginRegistry.shutdown\n(PluginRegistry.java:277)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.loaderShutdown\n(InternalPlatform.java:630)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.shutdown\n(InternalBootLoader.java:1008)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:863)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)",
    "I added a catch block for the sourrounding try to get more debug output. The \nresult is of type BeehiveProject but why is the ClassCastException thrown? Is \nthis is problem in the Java VM or are there two different classes around?",
    "It seems that, during shutdown, JDT Core is causing user provided executable\nextensions to be instantiated, when the plugin providing those extensions had\nalready been deactivated, thus causing its reactivation (and the executable\nextension is created with a new classloader - while IProject#getNature returns a\nnature object created using the original classloader).\n\nMoving to JDT Core for comments.\n",
    "You said you were getting this problem during startup, but the stack trace \nshows this happened during shutdown. Can you confirm this happened during \nshutdown?",
    "Yes, my mistake. The exception occurs during shutdown.",
    "\n\n*** This bug has been marked as a duplicate of 52347 ***"
  ],
  "commentCreationDates": [
    "2004-02-02T08:22:48+01:00",
    "2004-02-02T11:32:32+01:00",
    "2004-02-02T19:39:59+01:00",
    "2004-02-04T12:00:19+01:00",
    "2004-02-04T14:39:32+01:00",
    "2004-02-25T15:36:32+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "elements": [
        {
          "method": "com.intershop.enfinity.studio.BeehiveProject.create",
          "source": "BeehiveProject.java:67"
        },
        {
          "method": "com.intershop.enfinity.studio.cartridge.classpath.BeehiveClassPathInitializer.initialize",
          "source": "BeehiveClassPathInitializer.java:38"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore$1.run",
          "source": "JavaCore.java:896"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1006"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:891"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1531"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1463"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1439"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchScope.add",
          "source": "JavaSearchScope.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.initialize",
          "source": "JavaWorkspaceScope.java:78"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchScope.\u003cinit\u003e",
          "source": "JavaSearchScope.java:49"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.\u003cinit\u003e",
          "source": "JavaWorkspaceScope.java:30"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.indexing.IndexManager.shutdown",
          "source": "IndexManager.java:507"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.shutdown",
          "source": "JavaModelManager.java:1550"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.shutdown",
          "source": "JavaCore.java:3017"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginRegistry$2.run",
          "source": "PluginRegistry.java:295"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1006"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginRegistry$1.visit",
          "source": "PluginRegistry.java:308"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginRegistry.accept",
          "source": "PluginRegistry.java:58"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginRegistry.shutdownPlugins",
          "source": "PluginRegistry.java:311"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginRegistry.shutdown",
          "source": "PluginRegistry.java:277"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.loaderShutdown",
          "source": "InternalPlatform.java:630"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.shutdown",
          "source": "InternalBootLoader.java:1008"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:863"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "51041",
      "duplicateId": "52347",
      "date": "2004-02-02T08:22:48+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "52347",
  "bugId": "51041",
  "duplicateId": "52347",
  "date": "2004-02-02T08:22:48+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}