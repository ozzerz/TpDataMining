{
  "comments": [
    "Any string added to a form as formtext with rform.setText(text, false, true)\ncrashes.",
    "More details (os, ws, text)?",
    "Also define \u0027crashes\u0027.",
    "OS: tested on Linux, 2.4.20, Gtk\n    tested on Windows 2000 SP 4\n\ncode:\n        String data \u003d \"Here is some plain text for the text to render; this text\nis at http://www.eclipse.org web site.\";\n        rtext.setText(data, false, true);\n\n\nStack trace below:\nException in thread \"main\" java.lang.NullPointerException\n        at java.util.Hashtable.put(Hashtable.java:393)\n        at\norg.eclipse.ui.internal.forms.widgets.HyperlinkSegment.paint(HyperlinkSegment.java:45)\n        at org.eclipse.ui.internal.forms.widgets.Paragraph.paint(Paragraph.java:151)\n        at org.eclipse.ui.forms.widgets.FormText.paint(FormText.java:800)\n        at org.eclipse.ui.forms.widgets.FormText.access$3(FormText.java:762)\n        at org.eclipse.ui.forms.widgets.FormText$2.paintControl(FormText.java:226)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:82)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:954)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:978)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:963)\n        at org.eclipse.swt.widgets.Control.gtk_expose_event(Control.java:1760)\n        at org.eclipse.swt.widgets.Composite.gtk_expose_event(Composite.java:413)\n        at org.eclipse.swt.widgets.Canvas.gtk_expose_event(Canvas.java:106)\n        at org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1203)\n        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3098)\n        at org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(Native Method)\n        at org.eclipse.swt.widgets.Display.eventProc(Display.java:879)\n        at org.eclipse.swt.internal.gtk.OS.gdk_window_process_updates(Native Method)\n        at org.eclipse.swt.widgets.Control.update(Control.java:3229)\n        at org.eclipse.swt.widgets.Shell.setVisible(Shell.java:1206)\n        at org.eclipse.swt.widgets.Shell.open(Shell.java:838)\n\n",
    "Based on the exception, it looks like you createed the FormText control \noutside of the form toolkit and didn\u0027t set HyperlinkSettings on it (since the \nexception happens when the hyperlink tries to paint itself using the colors \nstored in HyperlinkSettings).\n\nYou must either create a form toolkit or create your own instance of \nHyperlinkSettings and set it on the FormText.",
    "Here is the sample:\nLet me know what I am doing wrong.\n--------------------begin-------\npackage test;\n\n\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.graphics.*;\nimport org.eclipse.swt.widgets.*;\nimport org.eclipse.ui.forms.widgets.*;\nimport org.eclipse.ui.forms.*;\nimport org.eclipse.swt.layout.*;\nimport org.eclipse.swt.custom.*;\nimport org.eclipse.ui.forms.events.*;\n\npublic class FormView {\n    private FormToolkit toolkit;\n    private ScrolledForm form;\n\n    public FormView(Composite parent, int style) {\n        toolkit \u003d new FormToolkit(parent.getDisplay());\n        form \u003d toolkit.createScrolledForm(parent);\n        form.setText(\"Hello, Eclipse Forms\");\n\n        TableWrapLayout layout \u003d new TableWrapLayout();\n        form.getBody().setLayout(layout);\n        Hyperlink link \u003d toolkit.createHyperlink(form.getBody(), \"Click here.\",\n                                                 SWT.WRAP);\n        link.addHyperlinkListener(new HyperlinkAdapter() {\n                public void linkActivated(HyperlinkEvent e) {\n                    System.out.println(\"Link activated!\");\n                }\n            });\n        link.setText(\"This is an example of a form that is much longer and will\nneed to wrap.\");\n        layout.numColumns \u003d 2;\n        TableWrapData td \u003d new TableWrapData();\n        td.colspan \u003d 2;\n        link.setLayoutData(td);\n        Label label \u003d toolkit.createLabel(form.getBody(), \"Text field label:\");\n        Text text \u003d toolkit.createText(form.getBody(), \"\");\n        text.setData(FormToolkit.KEY_DRAW_BORDER,\n                      FormToolkit.TEXT_BORDER);\n\n        td \u003d new TableWrapData(TableWrapData.FILL_GRAB);\n        text.setLayoutData(td);\n        Button button \u003d toolkit.createButton(form.getBody(),\n                                             \"An example of a checkbox in a\nform\", SWT.CHECK);\n        td \u003d new TableWrapData();\n        td.colspan \u003d 2;\n        button.setLayoutData(td);\n        Button button2 \u003d toolkit.createButton(form.getBody(),\n                                              \"Test\", SWT.PUSH);\n        td \u003d new TableWrapData();\n        td.colspan \u003d 2;\n        button2.setLayoutData(td);\n\n        final CCombo combo \u003d new CCombo(form.getBody(),\n                                      SWT.FLAT|SWT.WRAP);\n        combo.setData(FormToolkit.KEY_DRAW_BORDER,\n                      FormToolkit.TEXT_BORDER);\n        toolkit.paintBordersFor(form.getBody());\n\n        for (int i \u003d 1; i \u003c 11; i++) {\n            combo.add(i+\".) element \");\n        }\n        td \u003d new TableWrapData(TableWrapData.FILL_GRAB);\n        td.colspan \u003d 2;\n        combo.setLayoutData(td);\n\n\n        Tree tree \u003d toolkit.createTree(form.getBody(), SWT.SINGLE|SWT.WRAP);\n        for (int i \u003d 1; i \u003c 11; i++) {\n            final TreeItem item1  \u003d\n                new TreeItem(tree,SWT.NULL);\n            item1.setText(\"node \"+i);\n            for (int j \u003d 1; j \u003c 6; j++) {\n                final TreeItem item11 \u003d\n                    new TreeItem(item1,SWT.NULL);\n                item11.setText(\"node \"+i+\".\"+j);\n            }\n        }\n        td \u003d new TableWrapData();\n        td.colspan \u003d 2;\n        tree.setLayoutData(td);\n\n        Table table \u003d toolkit.createTable(form.getBody(), SWT.SINGLE|SWT.WRAP);\n        TableColumn col1  \u003d new TableColumn(table,SWT.LEFT);\n        col1.setText(\"Column 1\");\n        col1.setWidth(80);\n        TableColumn col2  \u003d new TableColumn(table,SWT.LEFT);\n        col2.setText(\"Column 2\");\n        col2.setWidth(80);\n\n        TableItem item1 \u003d new TableItem(table,0);\n        item1.setText(new String[]{\"a\",\"b\"});\n        TableItem item2 \u003d new TableItem(table,0);\n        item2.setText(new String[]{\"a\",\"b\"});\n\n        table.setHeaderVisible(true);\n        table.setLinesVisible(true);\n        td \u003d new TableWrapData();\n        td.colspan \u003d 2;\n        table.setLayoutData(td);\n\n\n\n        ExpandableComposite ec \u003d\n            toolkit.createExpandableComposite(form.getBody(),\n                                             \nExpandableComposite.TREE_NODE|ExpandableComposite.CLIENT_INDENT);\n        ec.setText(\"Expandable Composite title\");\n        String ctext \u003d \"We will now create a somewhat long text so that \"+\n            \"we can use it as content for the expandable composite. \"+\n            \"Expandable composite is used to hide or show the text using the \"+\n            \"toggle control\";\n        Label client \u003d toolkit.createLabel(ec, ctext, SWT.WRAP);\n        ec.setClient(client);\n        td \u003d new TableWrapData();\n        td.colspan \u003d 2;\n        ec.setLayoutData(td);\n        ec.addExpansionListener(new ExpansionAdapter() {\n                public void expansionStateChanged(ExpansionEvent e) {\n                    form.reflow(true);\n                }\n            });\n\n        Section section \u003d toolkit.createSection(form.getBody(),\n                                               \nSection.DESCRIPTION|Section.TWISTIE|Section.EXPANDED);\n        td \u003d new TableWrapData(TableWrapData.FILL);\n        td.colspan \u003d 2;\n        section.setLayoutData(td);\n        section.addExpansionListener(new ExpansionAdapter() {\n                public void expansionStateChanged(ExpansionEvent e) {\n                    form.reflow(true);\n                }\n            });\n        section.setText(\"Section title\");\n        toolkit.createCompositeSeparator(section);\n        section.setDescription(\"This is the description that goes below the title\");\n        Composite sectionClient \u003d toolkit.createComposite(section);\n        sectionClient.setLayout(new GridLayout());\n        button \u003d toolkit.createButton(sectionClient, \"Radio 1\", SWT.RADIO);\n        button \u003d toolkit.createButton(sectionClient, \"Radio 2\", SWT.RADIO);\n        section.setClient(sectionClient);\n\n        FormText rtext \u003d toolkit.createFormText(form.getBody(), true);\n        td \u003d new TableWrapData(TableWrapData.FILL);\n        td.colspan \u003d 2;\n        rtext.setLayoutData(td);\n        String data \u003d \"Here is some plain text for the text to render; this text\nis at http://www.eclipse.org web site.\";\n        rtext.setText(data, false, true);\n\n    }\n\n    public static void main(String[] args) {\n        Display display \u003d new Display ();\n        Shell shell \u003d new Shell (display);\n        shell.setLayout(new FillLayout());\n        FormView w \u003d new FormView(shell, SWT.NONE);\n        shell.pack();\n        shell.open();\n        while (!shell.isDisposed()) {\n            if (!display.readAndDispatch()) display.sleep();\n        }\n    }\n}\n--------------end----------------",
    "It is possible that you are seeing problems because you are not running the \nplatform UI i.e. you are running the sample as a standalone SWT application. I \nwill take a closer look but the same code when part of a plug-in works well.",
    "Yes, I am running this as a \u0027Standalone SWT Application\u0027.\n",
    "Created an attachment (id\u003d20596)\nFormView.java that works standalone\n",
    "Fixed in HEAD - check for the next integration build."
  ],
  "commentCreationDates": [
    "2004-11-21T17:14:59+01:00",
    "2004-11-21T20:58:23+01:00",
    "2004-11-21T20:58:36+01:00",
    "2004-11-22T01:00:32+01:00",
    "2004-11-23T00:02:11+01:00",
    "2004-11-23T02:37:19+01:00",
    "2004-11-23T12:50:45+01:00",
    "2004-11-23T15:34:09+01:00",
    "2005-05-02T17:50:10+02:00",
    "2005-05-02T17:50:45+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.util.Hashtable.put",
          "source": "Hashtable.java:393"
        },
        {
          "method": "org.eclipse.ui.internal.forms.widgets.HyperlinkSegment.paint",
          "source": "HyperlinkSegment.java:45"
        },
        {
          "method": "org.eclipse.ui.internal.forms.widgets.Paragraph.paint",
          "source": "Paragraph.java:151"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.FormText.paint",
          "source": "FormText.java:800"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.FormText.access$3",
          "source": "FormText.java:762"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.FormText$2.paintControl",
          "source": "FormText.java:226"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:954"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:978"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:963"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.gtk_expose_event",
          "source": "Control.java:1760"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.gtk_expose_event",
          "source": "Composite.java:413"
        },
        {
          "method": "org.eclipse.swt.widgets.Canvas.gtk_expose_event",
          "source": "Canvas.java:106"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.windowProc",
          "source": "Widget.java:1203"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3098"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.gtk_main_do_event",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.eventProc",
          "source": "Display.java:879"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.gdk_window_process_updates",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.update",
          "source": "Control.java:3229"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.setVisible",
          "source": "Shell.java:1206"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:838"
        }
      ],
      "number": 0,
      "commentIndex": 3,
      "bugId": "79149",
      "date": "2004-11-22T01:00:32+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "79149",
  "bugId": "79149",
  "date": "2004-11-21T17:14:59+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}