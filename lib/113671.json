{
  "comments": [
    "build I20051012-1200 + JDTCore head\n\nan AIOOBE occurs in SearchEngine#searchAllTypeNames when \u0027typeName\u0027 is an empty\narray.\n\nsteps to reproduce\n1) add the following test to JavaSearchTests\n\npublic void testCamelCaseTypePattern10() throws CoreException {\n  TypeNameRequestor requestor \u003d  new SearchTests.SearchTypeNameRequestor();\n  new SearchEngine().searchAllTypeNames(\n    \"aa\".toCharArray(),\n    \"\".toCharArray(),\n    SearchPattern.R_CAMELCASE_MATCH | SearchPattern.R_PREFIX_MATCH,\n    TYPE,\n    getJavaSearchScope(),\n    requestor,\n    IJavaSearchConstants.WAIT_UNTIL_READY_TO_SEARCH,\n    null);\n}\n\n2) run this test\nan exception occurs\n\njava.lang.ArrayIndexOutOfBoundsException: 0\n  at org.eclipse.jdt.internal.core.index.Index.isMatch(Index.java:53)\n  at\norg.eclipse.jdt.internal.core.index.DiskIndex.addQueryResults(DiskIndex.java:175)\n  at org.eclipse.jdt.internal.core.index.Index.query(Index.java:127)\n  at\norg.eclipse.jdt.internal.core.search.matching.TypeDeclarationPattern.queryIn(TypeDeclarationPattern.java:323)\n  at\norg.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches(InternalSearchPattern.java:75)\n  at\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches(MatchLocator.java:307)\n  at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.search(PatternSearchJob.java:114)\n  at\norg.eclipse.jdt.internal.core.search.PatternSearchJob.execute(PatternSearchJob.java:64)\n  at\norg.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob(JobManager.java:261)\n  at\norg.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllTypeNames(BasicSearchEngine.java:581)\n  at\norg.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEngine.java:596)\n  at\norg.eclipse.jdt.core.tests.model.JavaSearchTests.testCamelCaseTypePattern10(JavaSearchTests.java:3645)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n  at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n  at java.lang.reflect.Method.invoke(Method.java:585)\n  at junit.framework.TestCase.runTest(TestCase.java:154)\n  at junit.framework.TestCase.runBare(TestCase.java:127)\n  at junit.framework.TestResult$1.protect(TestResult.java:106)\n  at junit.framework.TestResult.runProtected(TestResult.java:124)\n  at junit.framework.TestResult.run(TestResult.java:109)\n  at junit.framework.TestCase.run(TestCase.java:118)\n  at junit.framework.TestSuite.runTest(TestSuite.java:208)\n  at\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.runTest(SuiteOfTestCases.java:99)\n  at junit.framework.TestSuite.run(TestSuite.java:203)\n  at\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.superRun(SuiteOfTestCases.java:83)\n  at\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$1.protect(SuiteOfTestCases.java:71)\n  at junit.framework.TestResult.runProtected(TestResult.java:124)\n  at\norg.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.run(SuiteOfTestCases.java:80)\n  at\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:478)\n  at\norg.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:344)\n  at\norg.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:57)\n  at\norg.eclipse.pde.internal.junit.runtime.CoreTestApplication.run(CoreTestApplication.java:24)\n  at\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:375)\n  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:164)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n  at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n  at java.lang.reflect.Method.invoke(Method.java:585)\n  at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\n  at org.eclipse.core.launcher.Main.basicRun(Main.java:282)\n  at org.eclipse.core.launcher.Main.run(Main.java:977)\n  at org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Fixed and released in HEAD.\n\nProblem was in Index.isMatch(char[], char[]). I optimized comparison by testing\nfirst char of pattern and word to avoid unnecessary message send but didn\u0027t\nverify lengthes before...\n\nTest cases added in JavaSearchBugsTests and JavaSearchTests",
    "Verified for 3.2 M3 using build I20051031-0010"
  ],
  "commentCreationDates": [
    "2005-10-25T17:37:58+02:00",
    "2005-10-26T20:02:07+02:00",
    "2005-10-31T11:32:46+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.index.Index.isMatch",
          "source": "Index.java:53"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.DiskIndex.addQueryResults",
          "source": "DiskIndex.java:175"
        },
        {
          "method": "org.eclipse.jdt.internal.core.index.Index.query",
          "source": "Index.java:127"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.TypeDeclarationPattern.queryIn",
          "source": "TypeDeclarationPattern.java:323"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.InternalSearchPattern.findIndexMatches",
          "source": "InternalSearchPattern.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.findIndexMatches",
          "source": "MatchLocator.java:307"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.search",
          "source": "PatternSearchJob.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.PatternSearchJob.execute",
          "source": "PatternSearchJob.java:64"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.processing.JobManager.performConcurrentJob",
          "source": "JobManager.java:261"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.BasicSearchEngine.searchAllTypeNames",
          "source": "BasicSearchEngine.java:581"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames",
          "source": "SearchEngine.java:596"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.JavaSearchTests.testCamelCaseTypePattern10",
          "source": "JavaSearchTests.java:3645"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "junit.framework.TestCase.runTest",
          "source": "TestCase.java:154"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:127"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.runTest",
          "source": "SuiteOfTestCases.java:99"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.superRun",
          "source": "SuiteOfTestCases.java:83"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$1.protect",
          "source": "SuiteOfTestCases.java:71"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "org.eclipse.jdt.core.tests.model.SuiteOfTestCases$Suite.run",
          "source": "SuiteOfTestCases.java:80"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:478"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:344"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:57"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run",
          "source": "CoreTestApplication.java:24"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:375"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:164"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "113671",
      "date": "2005-10-25T17:37:58+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "113671",
  "bugId": "113671",
  "date": "2005-10-25T17:37:58+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}