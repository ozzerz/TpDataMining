{
  "comments": [
    "Eclipse Europa. \n\nAfter starting Eclipse, I get the following NPE when trying to start a Tomcat 6 server. The workaround is to remove and add all projects and then it works.\n\nError\nSun Sep 16 13:12:10 CEST 2007\nCould not publish to the server.\n\njava.lang.NullPointerException\nat org.eclipse.jst.server.tomcat.core.internal.TomcatServer.isServeModulesWithoutPublish(TomcatServer.java:230)\nat org.eclipse.jst.server.tomcat.core.internal.PublishOperation2.publishDir(PublishOperation2.java:81)\nat org.eclipse.jst.server.tomcat.core.internal.PublishOperation2.execute(PublishOperation2.java:68)\nat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.performTasks(ServerBehaviourDelegate.java:885)\nat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:649)\nat org.eclipse.wst.server.core.internal.Server.doPublish(Server.java:887)\nat org.eclipse.wst.server.core.internal.Server.publish(Server.java:874)\nat org.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:72)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "I\u0027ve also tried 2.0.1RC2 and got the same stacktrace.",
    "Looks like isServeModulesWithoutPublish() and isSaveSeparateContextFiles() should replace versionHandler with getTomcatVersionHandler().\n\nLarry - Should we raise this for 2.0.1?",
    "Gunnar,\n\nThe only way I found to duplicate this NPE was if the Deploy Path was set to a custom location that happened to be an absolute path.  I would appreciate it if you could confirm if that is the case in your Tomcat configuration.  If so, it appears simply opening the Add and Remove Projects dialog for that Tomcat server would be sufficient to avoid the NPE for that Eclipse session.  It might also explain how I managed not to trip over the NPE during testing.  Thanks.\n\nLarry\n\nP.S. It would be pretty simple to patch your WTP 2.0 provided you have installed WTP source.  Let me know if you want to give this a try.\n\nHi Tim,\n\nIf Gunnar confirms that this NPE occurs in this somewhat atypical use case and the work around is sufficient, it might not be considered a show stopper.  However, because of the safety of the fix, it wouldn\u0027t hurt to get it in WTP 2.0.1 and save Gunnar and others the annoyance.  If not in WTP 2.0.1, then WTP 2.0.2 for sure.  I\u0027ll go ahead and attach the patch.\n\nLarry",
    "Created an attachment (id\u003d78558)\nPatch to TomcatServer to avoid NPE\n\nThis patch replaces use of a field with a call to a method that checks that field and initializes it if null.  ",
    "Yes, I have a custom deploy path set to an absolute file system path.\n\n",
    "Since we\u0027re in final 2.0.1 shutdown and this is an isolated path, I am proposing this for early in 2.0.2.",
    "Patch applied to WTP 2.0.2 and 3.0 streams.",
    "Verified the NPE no longer occurs for absolute custom deploy paths in current 2.0.2 and 3.0 builds.",
    "Closing."
  ],
  "commentCreationDates": [
    "2007-09-16T13:15:57+02:00",
    "2007-09-16T16:35:35+02:00",
    "2007-09-16T17:16:27+02:00",
    "2007-09-17T17:15:32+02:00",
    "2007-09-17T17:18:39+02:00",
    "2007-09-17T18:07:32+02:00",
    "2007-09-18T16:20:51+02:00",
    "2007-10-09T04:10:43+02:00",
    "2007-11-09T20:05:00+01:00",
    "2007-11-09T20:06:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jst.server.tomcat.core.internal.TomcatServer.isServeModulesWithoutPublish",
          "source": "TomcatServer.java:230"
        },
        {
          "method": "org.eclipse.jst.server.tomcat.core.internal.PublishOperation2.publishDir",
          "source": "PublishOperation2.java:81"
        },
        {
          "method": "org.eclipse.jst.server.tomcat.core.internal.PublishOperation2.execute",
          "source": "PublishOperation2.java:68"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.performTasks",
          "source": "ServerBehaviourDelegate.java:885"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish",
          "source": "ServerBehaviourDelegate.java:649"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:887"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:874"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:72"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "203533",
      "date": "2007-09-16T13:15:57+02:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "normal"
    }
  ],
  "groupId": "203533",
  "bugId": "203533",
  "date": "2007-09-16T13:15:57+02:00",
  "product": "Web Tools",
  "component": "jst.server",
  "severity": "normal"
}