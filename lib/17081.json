{
  "comments": [
    "Remote launch something like InfiniteLoop (no breakpoints)\nHit pause on the main thread\nThe program pauses but the ui does not fully update as:\n\ncom.sun.jdi.IncompatibleThreadStateException: Thread was not suspended\n\tat org.eclipse.jdi.internal.ThreadReferenceImpl.frames\n(ThreadReferenceImpl.java:180)\n\tat org.eclipse.jdi.internal.ThreadReferenceImpl.frames\n(ThreadReferenceImpl.java:159)\n\tat \norg.eclipse.jdt.internal.debug.core.model.JDIThread.getUnderlyingFrames\n(JDIThread.java:462)\n\tat \norg.eclipse.jdt.internal.debug.core.model.JDIThread.createAllStackFrames\n(JDIThread.java:439)\n\tat \norg.eclipse.jdt.internal.debug.core.model.JDIThread.computeStackFrames\n(JDIThread.java(Compiled Code))\n\tat \norg.eclipse.jdt.internal.debug.core.model.JDIThread.computeStackFrames\n(JDIThread.java(Compiled Code))\n\tat org.eclipse.jdt.internal.debug.core.model.JDIThread.getStackFrames\n(JDIThread.java:324)\n\tat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspen\ndThreadEvent(LaunchViewEventHandler.java:195)\n\tat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspen\ndEvent(LaunchViewEventHandler.java:175)\n\tat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleDebugE\nvents(LaunchViewEventHandler.java:95)\n\tat org.eclipse.debug.internal.ui.views.AbstractDebugEventHandler$1.run\n(AbstractDebugEventHandler.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java\n(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1068)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:739)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:200)\n\tat org.eclipse.core.launcher.Main.run(Main.java:643)\n\tat org.eclipse.core.launcher.Main.main(Main.java:476)",
    "And the error is logged twice for each pause.",
    "This is a timing problem. We tell the underlying thread to suspend \nasynchronously and then immediately ask for the stack frames. When we ask for \nframes, the thread hasn\u0027t suspended yet. This problem can happen for local \ndebugging too, but it\u0027s pretty much guaranteed to happen for remote.",
    "I\u0027m implemented a solution which solves the issue with the asynchronous \nrequest. After the JDIThread tells the underlying thread to suspend, it \nwaits (as long as the \"Debugger timeout\" preference) for the thread to \nanswer that it is suspended before firing the suspend notification to the \nUI. If the suspend fails to occur before the timeout, the JDT UI has a \nstatus handler which is notified of the failure. The status handler opens a \ndialog box informing the user of the problem.\n\nHowever, there appears to be a VM bug here in the latest JDK 1.4.1 beta. \nSteps to failure.\n\nSteps to failure:\n1. Send a suspend request for a thread.\n2. Query if the thread is suspended. The answer comes back: Yes.\n3. Ask for the thread\u0027s stack frames. The request comes back with an error \nindicating that the thread is not suspended.",
    "Please verify code change.\n\nThe JDK 1.4.1 problem is basically a \"won\u0027t fix.\"",
    "Verified.",
    "I tried to duplicate this with jdb, but failed.  However, I found another bug during the process \nthat I have filed with SUN.  If I get a bug number for it I will paste it here as it appeared to be \nrelated.",
    "*** Bug 18758 has been marked as a duplicate of this bug. ***",
    "*** Bug 20639 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2002-05-22T22:57:50+02:00",
    "2002-05-22T23:00:28+02:00",
    "2002-05-28T16:27:27+02:00",
    "2002-05-28T21:17:32+02:00",
    "2002-05-28T22:05:54+02:00",
    "2002-05-30T03:25:11+02:00",
    "2002-06-07T22:41:58+02:00",
    "2002-06-11T15:22:14+02:00",
    "2002-06-19T16:44:18+02:00"
  ],
  "traces": [
    {
      "exceptionType": "com.sun.jdi.IncompatibleThreadStateException",
      "message": "Thread was not suspended",
      "elements": [
        {
          "method": "org.eclipse.jdi.internal.ThreadReferenceImpl.frames",
          "source": "ThreadReferenceImpl.java:180"
        },
        {
          "method": "org.eclipse.jdi.internal.ThreadReferenceImpl.frames",
          "source": "ThreadReferenceImpl.java:159"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.getUnderlyingFrames",
          "source": "JDIThread.java:462"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.createAllStackFrames",
          "source": "JDIThread.java:439"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.computeStackFrames",
          "source": "JDIThread.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.computeStackFrames",
          "source": "JDIThread.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.getStackFrames",
          "source": "JDIThread.java:324"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspendThreadEvent",
          "source": "LaunchViewEventHandler.java:195"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspendEvent",
          "source": "LaunchViewEventHandler.java:175"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleDebugEvents",
          "source": "LaunchViewEventHandler.java:95"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.AbstractDebugEventHandler$1.run",
          "source": "AbstractDebugEventHandler.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java (Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1068"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:739"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:200"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:643"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:476"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "17081",
      "date": "2002-05-22T22:57:50+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "17081",
  "bugId": "17081",
  "date": "2002-05-22T22:57:50+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}