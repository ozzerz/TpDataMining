{
  "comments": [
    "Build problems when there is an instance variable name which matches \na constructor parameter name and assignment is made to this.name in a try block \nfinally clause.\n\nThis class shows the problem:\n\npublic final class TableData {\n    public final String name;\n    public TableData(String name) {\n        try {}\n        finally {\n            this.name \u003d name;\n        }\n    }\n}\n\nThe Build Problems dialog shows with \"Build problems\" as the description.\nPressing the \u003c\u003cDetails button shows:\n---------------------------------------------------------\nErrors during build.\n  org.eclipse.jdt.internal.compiler.ast.FieldReference\n---------------------------------------------------------\n\nFROM THE .log FILE:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nLog: Thu Jan 10 13:29:36 CST 2002\n2 org.eclipse.core.resources 2 Problems occurred when invoking code from \nplug-in: org.eclipse.core.resources.\njava.lang.ClassCastException: \norg.eclipse.jdt.internal.compiler.ast.FieldReference\n\tat \norg.eclipse.jdt.internal.compiler.flow.FinallyFlowContext.complainOnRedundantFi\nnalAssignments(FinallyFlowContext.java(Compiled Code))\n\tat \norg.eclipse.jdt.internal.compiler.ast.TryStatement.analyseCode(TryStatement.jav\na(Compiled Code))\n\tat \norg.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.analyseCode(Constr\nuctorDeclaration.java(Compiled Code))\n\tat \norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode(TypeDeclarati\non.java(Compiled Code))\n\tat \norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode(Co\nmpilationUnitDeclaration.java(Compiled Code))\n\tat \norg.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java(Compiled \nCode))\n\tat \norg.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java(Compiled \nCode))\n\tat \norg.eclipse.jdt.internal.core.newbuilder.AbstractImageBuilder.compile(AbstractI\nmageBuilder.java:211)\n\tat \norg.eclipse.jdt.internal.core.newbuilder.AbstractImageBuilder.compile(AbstractI\nmageBuilder.java(Compiled Code))\n\tat \norg.eclipse.jdt.internal.core.newbuilder.BatchImageBuilder.build(BatchImageBuil\nder.java:47)\n\tat \norg.eclipse.jdt.internal.core.newbuilder.JavaBuilder.buildAll(JavaBuilder.java:\n113)\n\tat \norg.eclipse.jdt.internal.core.newbuilder.JavaBuilder.build(JavaBuilder.java:67)\n\tat \norg.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:356)\n\tat \norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java(Co\nmpiled Code))\n\tat org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))\n\tat \norg.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:114)\n\tat \norg.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:179)\n\tat \norg.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:189)\n\tat \norg.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:138)\n\tat \norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java(Co\nmpiled Code))\n\tat org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))\n\tat \norg.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:152)\n\tat \norg.eclipse.core.internal.events.BuildManager.build(BuildManager.java:214)\n\tat \norg.eclipse.core.internal.resources.Workspace.build(Workspace.java:130)\n\tat \norg.eclipse.ui.internal.GlobalBuildAction.build(GlobalBuildAction.java:57)\n\tat \norg.eclipse.ui.internal.GlobalBuildAction$1.run(GlobalBuildAction.java:141)\n\tat \norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.ja\nva:98)",
    "Excellent find. Problem comes from the fact that (parsed) field references do \nnot set the FIELD bit (as other name references do). As a result, the flow \nanalysis is fooled into thinking it is dealing with a local variable.\n\nAs a work-around, you can rename your argument, and assign the field without \nusing the syntax \u0027this.name\u0027, but simply name.\n\npublic final class TableData {\n    public final String name;\n    public TableData(String initName) {\n        try {}\n        finally {\n            name \u003d initName;\n        }\n    }\n}\n\nWill be fixed in next integration build.\n\n",
    "Not fixed in 1.0.\nRunning ConformTest.test110, I got:\njava.lang.ClassCastException: \norg.eclipse.jdt.internal.compiler.ast.FieldReference\n\tat \norg.eclipse.jdt.internal.compiler.flow.FinallyFlowContext.complainOnRedundantFinalAssignments(FinallyFlowContext.java:33)\n\tat \norg.eclipse.jdt.internal.compiler.ast.TryStatement.analyseCode(TryStatement.java:132)\n\tat \norg.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.analyseCode(ConstructorDeclaration.java:54)\n\tat \norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode(TypeDeclaration.java:359)\n\tat \norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode(CompilationUnitDeclaration.java:67)\n\tat \norg.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:379)\n\tat \norg.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:202)\n\tat \norg.eclipse.jdt.tests.compiler.regression.AbstractRegressionTest.runConformTest(AbstractRegressionTest.java:129)\n\tat \norg.eclipse.jdt.tests.compiler.regression.AbstractRegressionTest.runConformTest(AbstractRegressionTest.java:114)\n\tat \norg.eclipse.jdt.tests.compiler.regression.ConformTest.test110(ConformTest.java:3317)\n\tat \njunit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat \njunit.extensions.TestDecorator.run(TestDecorator.java:28)\n\tat \norg.eclipse.jdt.tests.compiler.regression.RegressionTestSetup.run(RegressionTestSetup.java:38)",
    "Fix was incomplete, revised fix (for both 1.0 and 2.0), added regresion test \nfor both streams. \n\n",
    "Verified in rollup2."
  ],
  "commentCreationDates": [
    "2002-01-10T19:54:26+01:00",
    "2002-01-11T12:26:06+01:00",
    "2002-02-07T21:26:54+01:00",
    "2002-02-08T11:55:37+01:00",
    "2002-02-13T18:43:07+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.ast.FieldReference",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.flow.FinallyFlowContext.complainOnRedundantFinalAssignments",
          "source": "FinallyFlowContext.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TryStatement.analyseCode",
          "source": "TryStatement.jav a(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.analyseCode",
          "source": "Constr uctorDeclaration.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "TypeDeclarati on.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode",
          "source": "Co mpilationUnitDeclaration.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.core.newbuilder.AbstractImageBuilder.compile",
          "source": "AbstractI mageBuilder.java:211"
        },
        {
          "method": "org.eclipse.jdt.internal.core.newbuilder.AbstractImageBuilder.compile",
          "source": "AbstractI mageBuilder.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jdt.internal.core.newbuilder.BatchImageBuilder.build",
          "source": "BatchImageBuil der.java:47"
        },
        {
          "method": "org.eclipse.jdt.internal.core.newbuilder.JavaBuilder.buildAll",
          "source": "JavaBuilder.java: 113"
        },
        {
          "method": "org.eclipse.jdt.internal.core.newbuilder.JavaBuilder.build",
          "source": "JavaBuilder.java:67"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:356"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java(Co mpiled Code)"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:114"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:179"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:189"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:138"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java(Co mpiled Code)"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:152"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:214"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.build",
          "source": "Workspace.java:130"
        },
        {
          "method": "org.eclipse.ui.internal.GlobalBuildAction.build",
          "source": "GlobalBuildAction.java:57"
        },
        {
          "method": "org.eclipse.ui.internal.GlobalBuildAction$1.run",
          "source": "GlobalBuildAction.java:141"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.ja va:98"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "7455",
      "date": "2002-01-10T19:54:26+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "minor"
    },
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.ast.FieldReference",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.flow.FinallyFlowContext.complainOnRedundantFinalAssignments",
          "source": "FinallyFlowContext.java:33"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TryStatement.analyseCode",
          "source": "TryStatement.java:132"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ConstructorDeclaration.analyseCode",
          "source": "ConstructorDeclaration.java:54"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode",
          "source": "TypeDeclaration.java:359"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode",
          "source": "CompilationUnitDeclaration.java:67"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:379"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:202"
        },
        {
          "method": "org.eclipse.jdt.tests.compiler.regression.AbstractRegressionTest.runConformTest",
          "source": "AbstractRegressionTest.java:129"
        },
        {
          "method": "org.eclipse.jdt.tests.compiler.regression.AbstractRegressionTest.runConformTest",
          "source": "AbstractRegressionTest.java:114"
        },
        {
          "method": "org.eclipse.jdt.tests.compiler.regression.ConformTest.test110",
          "source": "ConformTest.java:3317"
        },
        {
          "method": "junit.extensions.TestDecorator.basicRun",
          "source": "TestDecorator.java:22"
        },
        {
          "method": "junit.extensions.TestDecorator.run",
          "source": "TestDecorator.java:28"
        },
        {
          "method": "org.eclipse.jdt.tests.compiler.regression.RegressionTestSetup.run",
          "source": "RegressionTestSetup.java:38"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "7455",
      "date": "2002-02-07T21:26:54+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "minor"
    }
  ],
  "groupId": "7455",
  "bugId": "7455",
  "date": "2002-01-10T19:54:26+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "minor"
}