{
  "comments": [
    "This also happens in Eclipse 2.0 build 20020214\n\n1. install the mulitpage editor example into the workspace\n2. in a project create a file of type .mpe\n3. a multipage editor opens on this new file.  Leave the editor open.\n4. select File/Export/Jar File.  Fill in the jar file and click finish.\nYou get the following Jar Export Error:\nCreation of JAR failed\nInvalid thread access",
    "Is there any stack dump in the .log file?\n",
    "The log file contains:\nLog: Mon Apr 08 11:14:36 EDT 2002\n4 org.eclipse.jdt.ui 566 Creation of JAR failed\norg.eclipse.swt.SWTException: Invalid thread access\n\nStack trace:\n   java/lang/Throwable.\u003cinit\u003e()V\n   java/lang/Throwable.\u003cinit\u003e(Ljava/lang/String;)V\n   java/lang/Exception.\u003cinit\u003e(Ljava/lang/String;)V\n   java/lang/RuntimeException.\u003cinit\u003e(Ljava/lang/String;)V\n   org/eclipse/swt/SWTException.\u003cinit\u003e(ILjava/lang/String;)V\n   org/eclipse/swt/SWTException.\u003cinit\u003e(I)V\n   org/eclipse/swt/SWT.error(ILjava/lang/Throwable;)V\n   org/eclipse/swt/SWT.error(I)V\n   org/eclipse/swt/widgets/Widget.error(I)V\n   org/eclipse/swt/widgets/Widget.checkWidget()V\n   org/eclipse/swt/widgets/Widget.getData()Ljava/lang/Object;\n   org/eclipse/ui/part/MultiPageEditorPart.getEditor(I)\nLorg/eclipse/ui/IEditorPart;\n   org/eclipse/ui/part/MultiPageEditorPart.isDirty()Z\n   org/eclipse/jdt/internal/ui/JavaPlugin.getDirtyEditors()\n[Lorg/eclipse/ui/IEditorPart;\n   \norg/eclipse/jdt/internal/ui/jarpackager/JarFileExportOperation.preconditionsOK()\nZ\n   org/eclipse/jdt/internal/ui/jarpackager/JarFileExportOperation.singleRun\n(Lorg/eclipse/core/runtime/IProgressMonitor;)V\n   org/eclipse/jdt/internal/ui/jarpackager/JarFileExportOperation.run\n(Lorg/eclipse/core/runtime/IProgressMonitor;)V\n   org/eclipse/jface/operation/ModalContext$ModalContextThread.run()V\n\n",
    "This appears to be a problem with the example - it does not occur when other \neditors are open. However it can still be replicated in 20020404",
    "Actually it occurs with a couple of other mulitpage editors that are part of \nWSDD - MultipageBundleEditor and P3mlEditor.  The three open editors that show \nthis problem are all subclasses (and the **only** subclasses that I have \ninstalled) of MultiPageEditorPart.  None of the three override isDirty(). It \nlooks like this implemenation of isDirty() leads to getting the contents of the \nCTabItem widget, which causes the check for thread access.  \n\nI looked at the PDE\u0027s plugin.xml editor to see why the problem does not occur \nthere and found that it is a subclass of EditorPart, and it\u0027s implementation of \nisDirty() does not access the contents of a widget. The same is true for other \neditor\u0027s within the workbench.",
    "Moving to JDT. Janelle is right that it is a problem independant of the example \nas the issue is with the JarFileExportOperation.preconditionsOK method.\n\nThe problem is that the jar file export operation is checking that all editors \nare saved before it runs - but this is done outside of the UI process which \ncauses the problem. This should be synchExeced in the UI.\n\nStack Trace:\n\nLog: Mon Apr 08 14:15:39 EDT 2002\n4 org.eclipse.jdt.ui 1 Internal Error\njava.lang.reflect.InvocationTargetException: org.eclipse.swt.SWTException: \nInvalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:1887)\n\tat org.eclipse.swt.SWT.error(SWT.java:1819)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:368)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Widget.getData(Widget.java:394)\n\tat org.eclipse.ui.part.MultiPageEditorPart.getEditor\n(MultiPageEditorPart.java:265)\n\tat org.eclipse.ui.part.MultiPageEditorPart.isDirty\n(MultiPageEditorPart.java:365)\n\tat org.eclipse.jdt.internal.ui.JavaPlugin.getDirtyEditors\n(JavaPlugin.java:137)\n\tat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.preconditionsOK\n(JarFileExportOperation.java:695)\n\tat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.singleRun\n(JarFileExportOperation.java:634)\n\tat org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.run\n(JarFileExportOperation.java:615)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:98)",
    "pls investigate whetehr the precondition checking be moved out of the Operation \nso that it isn\u0027t called from the ModalContext thread.\n\n",
    "This is a problem for several users of getDirtyEditors(). The\nMultiPageEditorPart code in the workbench should not access the widget to answer\nthe isDirty state. MultiPageEditorPart already has a field nestedEditors which\ncould be used to return the isDirty state.\n\nThis should be fixed for M5 since other products will be based on M5. If\nworkbench does not fix then we (JDT) should fix it.\n\n",
    "The UI components should only be called in the UI thread.\nThere is no guarantee that other editors won\u0027t talk to SWT.\nThe Jar exporter needs to be fixed.\n\nHowever, I have made the recommended change to MultiPageEditorPart as an \nexpedient solution for M5.\n\n",
    "we should fix it in JDT. Nick is correct the workbench API is consistent and \nonly allows requests in the UI thread so we should comply with this rule.",
    "Deprecated the unsafe method and added a safe one.\nUsing the safe one in my code. Other will have to adapt.\n",
    "*** Bug 23390 has been marked as a duplicate of this bug. ***",
    "Is it feasible to backport/apply this fix to 1.x?",
    "To which fix do you refer: the one in the MultiPageEditorPart or all the usages\nof isDirty in JDT UI?\n",
    "What I really want is a way to address the duplicate of this:\n\nhttp://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d23390\n\nI\u0027m tempted to say I would like the JDT_UI fix, but maybe that\u0027s because I \ndon\u0027t understand the MultiPageEditorPart fix.",
    "I see you refer to WSAD 4.0. I suggest an upgrade to WSAD 5.0 which has been\nreleased today.\n",
    "A fix is needed on WSAD 4.03 if possible. ",
    "I assume there\u0027s an official path for fixes to WSWB (i.e. WSAD). For example\nrelease 2.0.1 was provided for 2.0.",
    "Not sure I understand the last entry.  The official path for fixes is through \nthe WSWB support team in Phoenix.  WSAD reports problems to Phx and we \nnegotiate with them, the customer and development if a back port is requested.  \nWe try to keep these to a minimum.  Sometime, however, there are good reasons \nto provide fixes to a prior release.  I believe this is one of those.  Shane \ncan probably expand on this.   ...  Of course if it is not possible to do \nso, ...... that would also be good to know.",
    "I was led to believe we would explore a backport of this fix.  Can someone \nsupply some status on that?",
    "Here is a version of MultiPageEditorPart (see attachment) for the fix in 1.0.",
    "Created an attachment (id\u003d2232)\n1.0 verstion of MultiPageEditorPart with fix\n",
    "Do you have this in .jar file format?",
    "We will be doing a build with this patch in sometime this week.",
    "Created an attachment (id\u003d2257)\nUpdated patch\n"
  ],
  "commentCreationDates": [
    "2002-04-08T16:49:21+02:00",
    "2002-04-08T17:04:33+02:00",
    "2002-04-08T17:08:30+02:00",
    "2002-04-08T19:19:40+02:00",
    "2002-04-08T20:03:28+02:00",
    "2002-04-08T20:12:48+02:00",
    "2002-04-09T14:54:35+02:00",
    "2002-04-09T15:39:25+02:00",
    "2002-04-09T15:56:49+02:00",
    "2002-04-14T15:15:48+02:00",
    "2002-04-23T15:44:11+02:00",
    "2002-09-17T18:12:49+02:00",
    "2002-09-24T17:58:09+02:00",
    "2002-09-24T18:47:04+02:00",
    "2002-09-24T18:59:40+02:00",
    "2002-09-24T19:33:26+02:00",
    "2002-09-25T20:18:33+02:00",
    "2002-09-25T21:55:37+02:00",
    "2002-10-03T21:27:55+02:00",
    "2002-10-18T18:45:41+02:00",
    "2002-10-18T19:30:04+02:00",
    "2002-10-18T19:30:46+02:00",
    "2002-10-21T19:43:03+02:00",
    "2002-10-21T19:49:46+02:00",
    "2002-10-23T16:06:36+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1887"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1819"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:368"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.getData",
          "source": "Widget.java:394"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.getEditor",
          "source": "MultiPageEditorPart.java:265"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.isDirty",
          "source": "MultiPageEditorPart.java:365"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.JavaPlugin.getDirtyEditors",
          "source": "JavaPlugin.java:137"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.preconditionsOK",
          "source": "JarFileExportOperation.java:695"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.singleRun",
          "source": "JarFileExportOperation.java:634"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.run",
          "source": "JarFileExportOperation.java:615"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:98"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "12996",
      "date": "2002-04-08T20:12:48+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "12996",
  "bugId": "12996",
  "date": "2002-04-08T16:49:21+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}