{
  "comments": [
    "Another argument for not opening a modal dialog when an error occurs.  Opening a new bug for this because I\u0027m not sure if there is something else that was going on as well.\n\njava.lang.RuntimeException: WARNING: Prevented recursive attempt to activate part org.eclipse.pde.runtime.LogView while still in the middle of activating part org.eclipse.compare.CompareEditor\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3173)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:587)\n\tat org.eclipse.ui.internal.WorkbenchPage.makeActive(WorkbenchPage.java:1149)\n\tat org.eclipse.ui.internal.WorkbenchPage.bringToTop(WorkbenchPage.java:797)\n\tat org.eclipse.pde.internal.runtime.logview.LogView$20.run(LogView.java:678)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3442)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3082)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.jface.util.Policy$2.log(Policy.java:104)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:318)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:60)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:68)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:850)\n\tat org.eclipse.ui.internal.WorkbenchPage.activatePart(WorkbenchPage.java:594)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3219)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:587)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2600)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2517)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$10(WorkbenchPage.java:2509)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2494)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2489)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2473)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2464)\n\tat org.eclipse.ui.internal.NavigationHistoryEntry.restoreLocation(NavigationHistoryEntry.java:66)\n\tat org.eclipse.ui.internal.NavigationHistory.forwardForTab(NavigationHistory.java:831)\n\tat org.eclipse.ui.internal.NavigationHistory.forward(NavigationHistory.java:481)\n\tat org.eclipse.ui.internal.NavigationHistoryAction.run(NavigationHistoryAction.java:199)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:499)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\n\tat org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:443)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3465)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3079)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2083)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2047)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:449)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:145)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:170)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1124)",
    "Can we stop writing this warning to the .log? There are at least 4 other warnings related to this and neither clients nor users have a clue what to do about it.",
    "Tod, does SafeRunnable still open a modal error dialog?  Was this not converted over to the new error handling story?",
    "Right now we are using 3.2 modality but there is no reason why we can\u0027t go no modal in specific cases - our overuse of modality was one of the motivations of this work",
    "If the recursion represents a problem that the developer who wrote the code where it happened caused (and can fix), then we should leave the log message in. Of course, it would be better if we did explain enough of the problem so that developer did \"have a clue\" about how to fix it.\n\nIf however, the situation is just a side-effect of other problems that are happening (i.e. it\u0027s just a natural part of how we handle the errors in this case) then we should remove the message completely from the log.",
    "The message in the log is useful (for an example, see bug 161121).  Unfortunately, we sometimes cause a recursive part activation ourselves in the following way:\n\n1. A part is being activated, during which an error is logged\n2. The PDE error log view reacts by posting an asyncExec that will bring the error log view to the front\n3. While continuing to activate the part, we also show a modal dialog\n4. This will spin the event loop and execute the asyncExec\n-\u003e Recursive part activation\n\nStep 3. is the one we should fix - we should only open a modal error dialog if the user can do something about it at that time (while the operation is blocked).  In most situations, this is not the case.\n\nThe biggest offender is SafeRunnable in JFace - it shows a modal error dialog, after the exception has already been logged by SafeRunner (owned by core runtime).\n\nTod, is there a way to access the new error dialog from JFace?  If the error dialog is not modal, we now need to worry about cases where multiple errors occur while a non-modal dialog is still up...",
    "The new error dialog is not at the jface level - it is in the workbench only currently.\n\nAs far as the dialog goes the question is if the user should be warned of the error - silently failing especially as a large precentage of users don\u0027t know how to use the log is generally a bad idea.",
    "True, but silently failing seems like a good idea when *we* did it to ourselves and it\u0027s not something that we can fix. ;-)"
  ],
  "commentCreationDates": [
    "2007-01-24T21:10:55+01:00",
    "2007-03-22T11:49:39+01:00",
    "2007-03-22T12:15:23+01:00",
    "2007-03-22T13:19:36+01:00",
    "2007-03-22T16:02:23+01:00",
    "2007-03-22T16:36:53+01:00",
    "2007-03-22T16:55:49+01:00",
    "2007-03-22T17:29:11+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "WARNING: Prevented recursive attempt to activate part org.eclipse.pde.runtime.LogView while still in the middle of activating part org.eclipse.compare.CompareEditor",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:3173"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:587"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.makeActive",
          "source": "WorkbenchPage.java:1149"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.bringToTop",
          "source": "WorkbenchPage.java:797"
        },
        {
          "method": "org.eclipse.pde.internal.runtime.logview.LogView$20.run",
          "source": "LogView.java:678"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3442"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3082"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.jface.util.Policy$2.log",
          "source": "Policy.java:104"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:318"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:60"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:850"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activatePart",
          "source": "WorkbenchPage.java:594"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:3219"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:587"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "WorkbenchPage.java:2600"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "WorkbenchPage.java:2517"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$10",
          "source": "WorkbenchPage.java:2509"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "WorkbenchPage.java:2494"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2489"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2473"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:2464"
        },
        {
          "method": "org.eclipse.ui.internal.NavigationHistoryEntry.restoreLocation",
          "source": "NavigationHistoryEntry.java:66"
        },
        {
          "method": "org.eclipse.ui.internal.NavigationHistory.forwardForTab",
          "source": "NavigationHistory.java:831"
        },
        {
          "method": "org.eclipse.ui.internal.NavigationHistory.forward",
          "source": "NavigationHistory.java:481"
        },
        {
          "method": "org.eclipse.ui.internal.NavigationHistoryAction.run",
          "source": "NavigationHistoryAction.java:199"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:499"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:443"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3465"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3079"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2083"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2047"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:449"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:145"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:170"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "171605",
      "date": "2007-01-24T21:10:55+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "171605",
  "bugId": "171605",
  "date": "2007-01-24T21:10:55+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}