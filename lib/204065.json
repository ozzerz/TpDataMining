{
  "comments": [
    "Description:\n[Regression]NPE throws out when open the attached flat file dataset\n\nBuild number: \n2.2.1.v20070920-0630\n\nSteps to reproduce:\n1, New a flat file datasource from a connction profile\n2, New a flat file dataset\n3, Open XML Source, clear all the local properties of connection and only left the connection profile\u0027s property\n4, Go back to layout and open the flat file dataset\n\nExpected result:\nNo exception occurs \n\nActual result:\nNPE occurs and can not close the dialog by click OK BUTTON\n\nError log:\njava.lang.NullPointerException\n\tat java.util.Hashtable.put(Hashtable.java:396)\n\tat org.eclipse.datatools.connectivity.oda.flatfile.ui.wizards.FileSelectionWizardPage.getResultSetMetaData(FileSelectionWizardPage.java:1149)\n\tat org.eclipse.datatools.connectivity.oda.flatfile.ui.wizards.FileSelectionWizardPage.savePage(FileSelectionWizardPage.java:1646)\n\tat org.eclipse.datatools.connectivity.oda.flatfile.ui.wizards.FileSelectionWizardPage.collectDataSetDesign(FileSelectionWizardPage.java:270)\n\tat org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardPageCore.finishDataSetDesign(DataSetWizardPageCore.java:368)\n\tat org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardBase.collectDataSetDesignFromPage(DataSetWizardBase.java:333)\n\tat org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardBase.finishDataSetDesign(DataSetWizardBase.java:356)\n\tat org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardBase.getResponseSession(DataSetWizardBase.java:105)\n\tat org.eclipse.datatools.connectivity.oda.design.internal.designsession.DataSetDesignSessionBase.finishDataSetDesign(DataSetDesignSessionBase.java:332)\n\tat org.eclipse.datatools.connectivity.oda.design.internal.designsession.DataSetDesignSessionBase.finish(DataSetDesignSessionBase.java:167)\n\tat org.eclipse.datatools.connectivity.oda.design.ui.designsession.DataSetDesignSession.finish(DataSetDesignSession.java:153)\n\tat org.eclipse.birt.report.designer.data.ui.dataset.DataSetEditor.updateDataSetDesign(DataSetEditor.java:460)\n\tat org.eclipse.birt.report.designer.data.ui.dataset.OutputColumnsPage.performOk(OutputColumnsPage.java:243)\n\tat org.eclipse.birt.report.designer.data.ui.property.AbstractPropertyDialog.okPressed(AbstractPropertyDialog.java:730)\n\tat org.eclipse.birt.report.designer.data.ui.property.AbstractPropertyDialog.okPressed(AbstractPropertyDialog.java:715)\n\tat org.eclipse.birt.report.designer.data.ui.dataset.DataSetEditor.okPressed(DataSetEditor.java:592)\n\tat org.eclipse.birt.report.designer.data.ui.property.AbstractPropertyDialog.buttonPressed(AbstractPropertyDialog.java:597)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:616)",
    "Created an attachment (id\u003d78812)\nConnction profile\n\n",
    "Created an attachment (id\u003d78813)\nreport design\n\n",
    "Created an attachment (id\u003d78814)\nflat file\n\n",
    "We should make this fix in\n1) Fix this NPE excetpion in flatfile.ui.\n2) Get the effective properteies kept in a DataSourceDesign from DesignSessionUtil method.",
    "(In reply to comment #4)\n\u003e We should make this fix in\n\u003e 1) Fix this NPE excetpion in flatfile.ui.\n\u003e 2) Get the effective properties kept in a DataSourceDesign from\n\u003e DesignSessionUtil method.\n\nA DesignSessionUtil method (referred by item 2 above) is added in o.e.d.connectivity.oda.design.ui for use by any custom ODA designer to obtain the \"effective\" data source properties to get its data set metadata. So if a data source design has a linked connection profile, the profile\u0027s properties would take precedence.\n\n    public static java.util.Properties getEffectiveDataSourceProperties( \n            DataSourceDesign dataSourceDesign )\n        throws OdaException;\n\nAlso added the use of this new utility method in the source code generated by the ODA template wizard for a custom ODA design ui plugin.\n",
    "1) Try to use the new method getEffectiveDataSourceProperties() to get all data source properties.\n2) Fix the possible NPE in all oda custom UIs."
  ],
  "commentCreationDates": [
    "2007-09-20T04:53:42+02:00",
    "2007-09-20T04:54:18+02:00",
    "2007-09-20T04:54:39+02:00",
    "2007-09-20T04:54:57+02:00",
    "2007-09-20T12:01:33+02:00",
    "2007-10-05T09:21:55+02:00",
    "2007-10-19T08:41:09+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.util.Hashtable.put",
          "source": "Hashtable.java:396"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.flatfile.ui.wizards.FileSelectionWizardPage.getResultSetMetaData",
          "source": "FileSelectionWizardPage.java:1149"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.flatfile.ui.wizards.FileSelectionWizardPage.savePage",
          "source": "FileSelectionWizardPage.java:1646"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.flatfile.ui.wizards.FileSelectionWizardPage.collectDataSetDesign",
          "source": "FileSelectionWizardPage.java:270"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardPageCore.finishDataSetDesign",
          "source": "DataSetWizardPageCore.java:368"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardBase.collectDataSetDesignFromPage",
          "source": "DataSetWizardBase.java:333"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardBase.finishDataSetDesign",
          "source": "DataSetWizardBase.java:356"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.internal.ui.DataSetWizardBase.getResponseSession",
          "source": "DataSetWizardBase.java:105"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.internal.designsession.DataSetDesignSessionBase.finishDataSetDesign",
          "source": "DataSetDesignSessionBase.java:332"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.internal.designsession.DataSetDesignSessionBase.finish",
          "source": "DataSetDesignSessionBase.java:167"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.design.ui.designsession.DataSetDesignSession.finish",
          "source": "DataSetDesignSession.java:153"
        },
        {
          "method": "org.eclipse.birt.report.designer.data.ui.dataset.DataSetEditor.updateDataSetDesign",
          "source": "DataSetEditor.java:460"
        },
        {
          "method": "org.eclipse.birt.report.designer.data.ui.dataset.OutputColumnsPage.performOk",
          "source": "OutputColumnsPage.java:243"
        },
        {
          "method": "org.eclipse.birt.report.designer.data.ui.property.AbstractPropertyDialog.okPressed",
          "source": "AbstractPropertyDialog.java:730"
        },
        {
          "method": "org.eclipse.birt.report.designer.data.ui.property.AbstractPropertyDialog.okPressed",
          "source": "AbstractPropertyDialog.java:715"
        },
        {
          "method": "org.eclipse.birt.report.designer.data.ui.dataset.DataSetEditor.okPressed",
          "source": "DataSetEditor.java:592"
        },
        {
          "method": "org.eclipse.birt.report.designer.data.ui.property.AbstractPropertyDialog.buttonPressed",
          "source": "AbstractPropertyDialog.java:597"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:616"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "204065",
      "date": "2007-09-20T04:53:42+02:00",
      "product": "Data Tools",
      "component": "Open Data Access",
      "severity": "enhancement"
    }
  ],
  "groupId": "204065",
  "bugId": "204065",
  "date": "2007-09-20T04:53:42+02:00",
  "product": "Data Tools",
  "component": "Open Data Access",
  "severity": "enhancement"
}