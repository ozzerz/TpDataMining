{
  "comments": [
    "If an application utilizing the ApplicationWindow class on Mac OSX is quit via the menu or by through \ncommand-Q the following exception is thrown:\nException in thread \"main\" org.eclipse.swt.SWTException: Device is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2691)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.SWT.error(SWT.java:2587)\n\tat org.eclipse.swt.widgets.Display.error(Display.java:912)\n\tat org.eclipse.swt.widgets.Display.checkDevice(Display.java:536)\n\tat org.eclipse.swt.widgets.Display.update(Display.java:3411)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:674)\n\nIf the window is closed the application quits properly.\n\nRC2\nVersion: 3.0.0\nBuild id: 200406111814\n\nexample:\npublic class Test {\n\n    public static void main(String[] args) {\n            ApplicationWindow window \u003d new ApplicationWindow(null);\n        window.setBlockOnOpen(true);\n        window.open();\n        if (!Display.getCurrent().isDisposed())\n            Display.getCurrent().dispose();\n    }\n}",
    "Doesn\u0027t happen in stand alone SWT apps.",
    "Ines, weren\u0027t you seeing some weirdness with the event loop on the Mac?",
    "Yes, the \"weirdness\" I was seeing on Mac OS X is that the \"eventLoopIdle\" didn\u0027t\nseem to be triggered. I had a method that looked like this in my implementation\nof the WorkbenchAdvisor:\n\npublic void eventLoopIdle(Display display) {\n  super.eventLoopIdle(display);\n  PlatformUI.getWorkbench().close();\n}\n\nOn Windows, eclipse would restart itself once it was done processing jobs. On\nthe Mac, it wouldn\u0027t shut down by itself. I had to trigger a mouse event to make\nit close.\n\nI am not sure if this is related to this bug. If it\u0027s not, I will log a separate\none.",
    "Below is an SWT code snippet that mimics the ApplicationWindow class? behavior.\nIt runs correctly on Windows when quitting via the menu -- Alt+F4 or the x\nbutton. On the Mac, it fails when quitting via the menu -- Apple+Q, but does not\nfail when using the x button.\n\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Shell;\n\npublic class Test {\n\n\tpublic static void main(String[] args) {\n\t\tDisplay display \u003d new Display();\n\t\tShell shell \u003d new Shell(display);\n\t\tshell.setText(\"HelloWorld\");\n\t\tshell.open();\n\t\trunEventLoop(shell);\n\t\t\n\t}\n\t\n\tpublic static void runEventLoop(Shell shell) {\n\t\tDisplay display;\n\t\tif(shell \u003d\u003d null)\n\t\t\t display \u003d Display.getCurrent();\n\t\telse\n\t\t\tdisplay \u003d shell.getDisplay();\n\t\t\t\n\t\twhile (shell !\u003d null \u0026\u0026 ! shell.isDisposed()) {\n\t\t\ttry {\n\t\t\t\tif (!display.readAndDispatch())\n\t\t\t\t\tdisplay.sleep();\n\t\t\t\t\n\t\t\t} catch (Throwable e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\tdisplay.update();\n\t}\n}\n",
    "This bug could be moved to SWT.",
    "sample SWT app written, moving back to SWT",
    "Command-Q is manifested as Display.close() since there is no menu item \nassociated with the standard apple menu.  You can cancel the closing of the \ndisplay with an SWT.Close listener and exit through the event loop."
  ],
  "commentCreationDates": [
    "2004-06-21T16:06:54+02:00",
    "2004-06-21T16:31:24+02:00",
    "2004-06-21T16:45:38+02:00",
    "2004-06-21T17:03:39+02:00",
    "2004-06-21T23:07:00+02:00",
    "2004-06-22T03:32:52+02:00",
    "2004-06-22T20:40:02+02:00",
    "2004-06-24T00:35:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Device is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2691"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2587"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.error",
          "source": "Display.java:912"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.checkDevice",
          "source": "Display.java:536"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.update",
          "source": "Display.java:3411"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:674"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "67994",
      "date": "2004-06-21T16:06:54+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "67994",
  "bugId": "67994",
  "date": "2004-06-21T16:06:54+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "major"
}