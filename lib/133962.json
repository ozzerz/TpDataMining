{
  "comments": [
    "I am attempting to use the GLCanvas on Mac OS X in an RCP application.  When I quit the app, I get an exception \"org.eclipse.swt.SWTException: Widget is disposed\".  I tried to reduce the problem down to a test case.  Here is what I did:\n\n1.  Create a new plugin project using defaults\n2.  Select \"yes\" for \"Would you like to create a rich client application?\"\n3.  Select the template \"RCP application with a view\"\n4.  Substitute the TableViewer in View.java with a GLCanvas.  Code follows:\n\npackage glcanvastest;\n\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.opengl.GLCanvas;\nimport org.eclipse.swt.opengl.GLData;\nimport org.eclipse.swt.widgets.Composite;\nimport org.eclipse.ui.part.ViewPart;\n\npublic class View extends ViewPart {\npublic static final String ID \u003d \"glcanvastest.view\";\n\nprivate GLCanvas viewer;\n\n/**\n* This is a callback that will allow us to create the viewer and initialize\n* it.\n*/\npublic void createPartControl(Composite parent) {\nGLData data \u003d new GLData();\ndata.redSize \u003d 8;\ndata.greenSize \u003d 8;\ndata.blueSize \u003d 8;\ndata.depthSize \u003d 24;\ndata.doubleBuffer \u003d true;\nviewer \u003d new GLCanvas(parent, SWT.NO_BACKGROUND, data);\n}\n\n/**\n* Passing the focus request to the viewer\u0027s control.\n*/\npublic void setFocus() {\nviewer.setFocus();\n}\n}\n\nHere is the error log:\n\n!SESSION 2006-03-28 08:06:06.326 -----------------------------------------------\neclipse.buildId\u003dunknown\njava.version\u003d1.5.0_05\njava.vendor\u003dApple Computer, Inc.\nBootLoader constants: OS\u003dmacosx, ARCH\u003dppc, WS\u003dcarbon, NL\u003den_US\nFramework arguments:  -application glcanvastest.application\nCommand-line arguments:  -application glcanvastest.application -data /Users/leslie/runtime-EclipseApplication(1) -dev file:/Users/leslie/Desktop/opengltest/.metadata/.plugins/org.eclipse.pde.core/Eclipse Application (1)/dev.properties -os macosx -ws carbon -arch ppc\n\n!ENTRY org.eclipse.ui 4 4 2006-03-28 08:06:19.745\n!MESSAGE Unhandled event loop exception\n\n!ENTRY org.eclipse.ui 4 0 2006-03-28 08:06:19.747\n!MESSAGE Widget is disposed\n!STACK 0\norg.eclipse.swt.SWTException: Widget is disposed\nat org.eclipse.swt.SWT.error(SWT.java:3262)\nat org.eclipse.swt.SWT.error(SWT.java:3185)\nat org.eclipse.swt.SWT.error(SWT.java:3156)\nat org.eclipse.swt.widgets.Widget.error(Widget.java:735)\nat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:322)\nat org.eclipse.swt.widgets.Control.internal_new_GC(Control.java:1108)\nat org.eclipse.swt.opengl.GLCanvas.fixBounds(GLCanvas.java:153)\nat org.eclipse.swt.opengl.GLCanvas$2.run(GLCanvas.java:130)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3117)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2894)\nat org.eclipse.swt.widgets.Display.release(Display.java:2951)\nat org.eclipse.swt.graphics.Device.dispose(Device.java:202)\nat org.eclipse.swt.widgets.Display.close(Display.java:888)\nat org.eclipse.swt.widgets.Display.commandProc(Display.java:768)\nat org.eclipse.swt.internal.carbon.OS.MenuSelect(Native Method)\nat org.eclipse.swt.widgets.Display.mouseProc(Display.java:2694)\nat org.eclipse.swt.internal.carbon.OS.SendEventToEventTarget(Native Method)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2868)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1774)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1738)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:376)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat glcanvastest.Application.run(Application.java:18)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)\n\n!ENTRY org.eclipse.osgi 2006-03-28 08:06:19.773\n!MESSAGE Application error\n!STACK 1\norg.eclipse.swt.SWTException: Widget is disposed\nat org.eclipse.swt.SWT.error(SWT.java:3262)\nat org.eclipse.swt.SWT.error(SWT.java:3185)\nat org.eclipse.swt.SWT.error(SWT.java:3156)\nat org.eclipse.swt.widgets.Widget.error(Widget.java:735)\nat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:322)\nat org.eclipse.swt.widgets.Control.internal_new_GC(Control.java:1108)\nat org.eclipse.swt.opengl.GLCanvas.fixBounds(GLCanvas.java:153)\nat org.eclipse.swt.opengl.GLCanvas$2.run(GLCanvas.java:130)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3117)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2902)\nat org.eclipse.swt.widgets.Display.release(Display.java:2951)\nat org.eclipse.swt.graphics.Device.dispose(Device.java:202)\nat glcanvastest.Application.run(Application.java:24)\nat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:165)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d39917)\nremove listeners\n\nGrant, can you please push this out?  It\u0027s the same as in\nthe Browser widget, for the same reasons.",
    "+1",
    "+1",
    "Billy, I tried the attached patch with the test case from comment 0 and I still see the Widget is Disposed exception when I close the plug-in\u0027s view.",
    "There should be a disposed check in fixBounds() because the method is async\u0027ed.",
    "Yes, I\u0027ve confirmed that this makes the exception go away.  I put the isDisposed() check at the beginning of the asyncExec block in the SWT.Show callback, to make it obvious why the isDisposed() check is needed at all.\n",
    "fixed \u003e 0501\n  - this report has two TL +1\u0027s\n  - applied the comment 1 patch\n  - added the isDisposed() check as described in comment 6\n",
    "Verified in I20060504-0920"
  ],
  "commentCreationDates": [
    "2006-03-30T01:31:35+02:00",
    "2006-05-01T09:59:53+02:00",
    "2006-05-01T16:23:18+02:00",
    "2006-05-01T16:30:14+02:00",
    "2006-05-01T18:27:15+02:00",
    "2006-05-01T18:47:24+02:00",
    "2006-05-01T19:06:58+02:00",
    "2006-05-01T21:12:10+02:00",
    "2006-05-04T20:13:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3262"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3185"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3156"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:735"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:322"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.internal_new_GC",
          "source": "Control.java:1108"
        },
        {
          "method": "org.eclipse.swt.opengl.GLCanvas.fixBounds",
          "source": "GLCanvas.java:153"
        },
        {
          "method": "org.eclipse.swt.opengl.GLCanvas$2.run",
          "source": "GLCanvas.java:130"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3117"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2894"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.release",
          "source": "Display.java:2951"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.dispose",
          "source": "Device.java:202"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.close",
          "source": "Display.java:888"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.commandProc",
          "source": "Display.java:768"
        },
        {
          "method": "org.eclipse.swt.internal.carbon.OS.MenuSelect",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.mouseProc",
          "source": "Display.java:2694"
        },
        {
          "method": "org.eclipse.swt.internal.carbon.OS.SendEventToEventTarget",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2868"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1774"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1738"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:376"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "glcanvastest.Application.run",
          "source": "Application.java:18"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "133962",
      "date": "2006-03-30T01:31:35+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3262"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3185"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3156"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:735"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:322"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.internal_new_GC",
          "source": "Control.java:1108"
        },
        {
          "method": "org.eclipse.swt.opengl.GLCanvas.fixBounds",
          "source": "GLCanvas.java:153"
        },
        {
          "method": "org.eclipse.swt.opengl.GLCanvas$2.run",
          "source": "GLCanvas.java:130"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3117"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2902"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.release",
          "source": "Display.java:2951"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.dispose",
          "source": "Device.java:202"
        },
        {
          "method": "glcanvastest.Application.run",
          "source": "Application.java:24"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:165"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "133962",
      "date": "2006-03-30T01:31:35+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "133962",
  "bugId": "133962",
  "date": "2006-03-30T01:31:35+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "major"
}