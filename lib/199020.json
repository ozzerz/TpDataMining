{
  "comments": [
    "Created an attachment (id\u003d75502)\nsnippet plugin\n\nBuild ID: Eclipse 3.3 RC3\n\nSteps To Reproduce:\n1. Copy the snippet plugin to Eclipse 3.3 RC3/plugins\n2. Launch the eclipse from console:  ./eclipse -console -debug  Or double click the Eclipse.app directly\n3. I got the error message that\u0027s Can\u0027t start the AWT because Java was started on the first thread. see below.\n\n\n\n\nMore information:\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\nError message in console:\n\n\nosgi\u003e Time to load bundles: 4\nStarting application: 1151\nApplication Started: 5719\n2007-08-07 16:15:26.296 eclipse[1543:10b] Apple AWT Java VM was loaded on first thread -- can\u0027t start AWT.\n\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\n\nError message in log:\n\n\n!ENTRY org.eclipse.ui 4 0 2007-08-07 16:15:26.305\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (org.eclipse.swt.SWTError: Not implemented [need SWT compatibility pack from Apple] (java.lang.InternalError: Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line))\n\tat org.eclipse.swt.SWT.error(SWT.java:3563)\n\tat org.eclipse.swt.SWT.error(SWT.java:3481)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3213)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2957)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\nCaused by: org.eclipse.swt.SWTError: Not implemented [need SWT compatibility pack from Apple] (java.lang.InternalError: Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line)\n\tat org.eclipse.swt.SWT.error(SWT.java:3589)\n\tat org.eclipse.swt.awt.SWT_AWT.new_Frame(SWT_AWT.java:108)\n\tat com.ibm.rcp.bugs.snippets.awt.Startup$1.run(Startup.java:23)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 22 more\nCaused by: java.lang.InternalError: Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1822)\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1723)\n\tat java.lang.Runtime.loadLibrary0(Runtime.java:822)\n\tat java.lang.System.loadLibrary(System.java:993)\n\tat sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:50)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.awt.NativeLibLoader.loadLibraries(NativeLibLoader.java:38)\n\tat sun.awt.DebugHelper.\u003cclinit\u003e(DebugHelper.java:29)\n\tat java.awt.Component.\u003cclinit\u003e(Component.java:545)\n\tat java.lang.Class.forName0(Native Method)\n\tat java.lang.Class.forName(Class.java:242)\n\tat org.eclipse.swt.awt.SWT_AWT.new_Frame(SWT_AWT.java:103)\n\t... 25 more",
    "Created an attachment (id\u003d75503)\nsource code of plugin\n\n",
    "I believe that this is a known issue; you have to run without the -XstartOnFirstThread. However, if you do that, you can\u0027t run SWT.\n\nBy the way; why aren\u0027t you using Eclipse 3.3? It\u0027s been released for a good time already.\n",
    "I tried the Eclipse 3.3 (20070606), it still has this problem.\n\nMy Mac OS is 10.5.\n\njava version \"1.5.0_11\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_11-196)\nJava HotSpot(TM) Client VM (build 1.5.0_11-105, mixed mode, sharing)\n\n\nSeem like it\u0027s work on Mac OS X 10.4.10, Java version is 1.5.0_07.\n\n\n",
    "The 3.3 launcher loads the jvm on the main thread by default.  If you need the vm to be started on a secondary thread you need to specify the option --launcher.secondThread\n\nNote that SWT does not work with this option.  Sending to swt for comment since this seems to be using both AWT \u0026 SWT.",
    "Assigning to Scott.  He indicated that he had a way out of this madness ...",
    "What project has the launching code? I made some changes to how we interpret the -XstartOnFirstThread argument that I will need to contribute to the launcher. Nothing big, just a couple of environment variables.\n",
    "Never mind, I found it. org.eclipse.equinox.executable.",
    "Sorry Scott, going insane right now.  Just catching up on email now.  As you found out, the Eclipse launcher is not SWT, but the bug involves mixing SWT and AWT so it stays here.",
    "Created an attachment (id\u003d81549)\nPatch to set environment variable for AWT\n\nThe code change took me about 15 minutes to write because I knew where to make it via code inspection, but it took me about four hours to figure out equinox\u0027s whole shared library/built binary architecture. Anyway, this patch fixes the issue above.\n\nThis is my fault, because I updated the java command-line tool in Leopard to set this environment variable so we no longer have to guess what thread the JVM was started on. In the back of my mind I knew you guys changed the launch architecture in 3.3 but never got around to updating this.",
    "\u003e but it took me about four hours to figure out equinox\u0027s\n\u003e whole shared library/built binary architecture. \n\nI\u0027m sure it\u0027s just as horrible as everyone else\u0027s (no more, no less).  Moving to the launcher because this is not SWT.  Andrew, please apply the patch.",
    "This looks like it should be a 3.3.2 candidate.  Andrew?",
    "I have released this change to HEAD for M3.\nThe attached plugin works for me.  However, it also worked for me without this change.  Can others please verify this fix in the upcoming build I20071031-1800\n\nIf this is shown to fix things, I am in favor of doing it in 3.3.2 as well.",
    "Any chance of a binary of the fixed launcher? I\u0027d like to test it as well to see if it should fix the problem with Swing Designer (that sounds like it\u0027s the same).",
    "You won\u0027t necessarily get an alert -- in my testing on 3.3.1.1 it always appeared in Console.app in the \u0027Console messages\u0027 section. There have been a couple of reports where Eclipse had to shut down (Instantiations WindowBuilder, Jalopy).",
    "Created an attachment (id\u003d81772)\nbinary with fix\n\nAttached is the binary with this change.\nPut it in Eclipse/plugins/org.eclipse.equinox.launcher.carbon.macosx_*\nYou should probably remove or rename the library that is in there already to be sure this new one gets used.",
    "Well. I can confirm that the patched binary fixes the issue I had with using Swing Designer (of WindowBuilderPro).",
    "Created an attachment (id\u003d81844)\nEclipse crash file\n\nI may, or may not, have been too hasty in saying it worked. It seems Eclipse likest to crash a lot while using Swing Designer. I am not really sure if it is because of bug #207827 or it is something new.\n\nI\u0027ve attached a crash log just in case it is a thing related to this.",
    "Re #17, that trace looks like you\u0027ve found a bug in HIToolbox. If you can reproduce it readily, please file a new bug here in bugzilla as well as http://bugreport.apple.com. It does look similar to bug #207827 but you didn\u0027t say you were closing a window.",
    "this patch also gets swing designer working for me on Leopard with Eclipse 3.3.1 -- thanks! Anyone told the people at Instantiations yet?",
    "To Darrell Berry: we (Instantiations) read this. :-)",
    "Created an attachment (id\u003d81943)\nConsole log after crashes using Eclipse Integration build I20071101\n\nI\u0027ve been experiencing Eclipse crashes when using 3.3.1.1 and Instantiation\u0027s SWT Designer plugins on Leopard. The crashes seem to manifest when using SWT Designer\u0027s UI design view.\n\nI initially tried the latest integrations build of 3.3 (I20071101) and oddly enough this seemed to resolve the issues for about an hour or two. Now, out of the blue, while working on almost exactly the same classes with SWT Designer that were originally causing the crashes, then seemed to be fixed, are now causing crashes again. ",
    "(In reply to comment #21)\n\u003e Created an attachment (id\u003d81943) [details]\n\u003e Console log after crashes using Eclipse Integration build I20071101\n\u003e \n\u003e I\u0027ve been experiencing Eclipse crashes when using 3.3.1.1 and Instantiation\u0027s\n\u003e SWT Designer plugins on Leopard. The crashes seem to manifest when using SWT\n\u003e Designer\u0027s UI design view.\n\u003e \n\u003e I initially tried the latest integrations build of 3.3 (I20071101) and oddly\n\u003e enough this seemed to resolve the issues for about an hour or two. Now, out of\n\u003e the blue, while working on almost exactly the same classes with SWT Designer\n\u003e that were originally causing the crashes, then seemed to be fixed, are now\n\u003e causing crashes again. \n\u003e \n\nThis crash looks unrelated to the issues reported in this bug report.  Please open a separate bug against SWT.",
    "(In reply to comment #22)\n\u003e (In reply to comment #21)\n\u003e \u003e Created an attachment (id\u003d81943) [details] [details]\n\u003e \u003e Console log after crashes using Eclipse Integration build I20071101\n\u003e \u003e \n\u003e \u003e I\u0027ve been experiencing Eclipse crashes when using 3.3.1.1 and Instantiation\u0027s\n\u003e \u003e SWT Designer plugins on Leopard. The crashes seem to manifest when using SWT\n\u003e \u003e Designer\u0027s UI design view.\n\u003e \u003e \n\u003e \u003e I initially tried the latest integrations build of 3.3 (I20071101) and oddly\n\u003e \u003e enough this seemed to resolve the issues for about an hour or two. Now, out of\n\u003e \u003e the blue, while working on almost exactly the same classes with SWT Designer\n\u003e \u003e that were originally causing the crashes, then seemed to be fixed, are now\n\u003e \u003e causing crashes again. \n\u003e \u003e \n\u003e \n\u003e This crash looks unrelated to the issues reported in this bug report.  Please\n\u003e open a separate bug against SWT.\n\u003e \n\nAnd, please log a bug with steps to reproduce it at bugreport.apple.com, since this appears to be a bug in Carbon.",
    "New issue created: https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d208571",
    "Tom, can you +1 for completeness before I release this to 3.3.2, not sure if comment #11 was an implicit +1 or not.",
    "Need PMC approval.  Jeff?  Patch has been reviewed and tested.  The fix is simple and fixes a critical bug.",
    "I have released this into the 3.3.2 stream.",
    "*** Bug 212342 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2007-08-07T10:50:45+02:00",
    "2007-08-07T10:52:55+02:00",
    "2007-08-07T12:52:50+02:00",
    "2007-08-08T08:15:41+02:00",
    "2007-08-13T16:49:16+02:00",
    "2007-10-05T00:06:13+02:00",
    "2007-10-29T17:40:41+01:00",
    "2007-10-29T20:12:51+01:00",
    "2007-10-30T03:20:19+01:00",
    "2007-10-30T06:02:42+01:00",
    "2007-10-30T07:28:09+01:00",
    "2007-10-30T14:17:59+01:00",
    "2007-10-31T19:14:00+01:00",
    "2007-10-31T19:18:29+01:00",
    "2007-10-31T19:21:53+01:00",
    "2007-10-31T20:59:11+01:00",
    "2007-11-01T09:31:58+01:00",
    "2007-11-01T10:00:51+01:00",
    "2007-11-01T17:46:11+01:00",
    "2007-11-01T23:59:51+01:00",
    "2007-11-02T06:57:09+01:00",
    "2007-11-02T12:30:02+01:00",
    "2007-11-02T13:48:23+01:00",
    "2007-11-02T18:04:25+01:00",
    "2007-11-06T11:22:50+01:00",
    "2007-11-09T15:33:32+01:00",
    "2007-11-09T16:15:37+01:00",
    "2007-11-13T19:35:34+01:00",
    "2007-12-11T19:42:00+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.InternalError",
      "message": "Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line))",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3563"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3481"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3213"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2957"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.InternalError",
        "message": "Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line)",
        "elements": [
          {
            "method": "org.eclipse.swt.SWT.error",
            "source": "SWT.java:3589"
          },
          {
            "method": "org.eclipse.swt.awt.SWT_AWT.new_Frame",
            "source": "SWT_AWT.java:108"
          },
          {
            "method": "com.ibm.rcp.bugs.snippets.awt.Startup$1.run",
            "source": "Startup.java:23"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "causedBy": {
          "exceptionType": "java.lang.InternalError",
          "message": "Can\u0027t start the AWT because Java was started on the first thread.  Make sure StartOnFirstThread is not specified in your application\u0027s Info.plist or on the command line",
          "elements": [
            {
              "method": "java.lang.ClassLoader$NativeLibrary.load",
              "source": "Native Method"
            },
            {
              "method": "java.lang.ClassLoader.loadLibrary0",
              "source": "ClassLoader.java:1822"
            },
            {
              "method": "java.lang.ClassLoader.loadLibrary",
              "source": "ClassLoader.java:1723"
            },
            {
              "method": "java.lang.Runtime.loadLibrary0",
              "source": "Runtime.java:822"
            },
            {
              "method": "java.lang.System.loadLibrary",
              "source": "System.java:993"
            },
            {
              "method": "sun.security.action.LoadLibraryAction.run",
              "source": "LoadLibraryAction.java:50"
            },
            {
              "method": "java.security.AccessController.doPrivileged",
              "source": "Native Method"
            },
            {
              "method": "sun.awt.NativeLibLoader.loadLibraries",
              "source": "NativeLibLoader.java:38"
            },
            {
              "method": "sun.awt.DebugHelper.\u003cclinit\u003e",
              "source": "DebugHelper.java:29"
            },
            {
              "method": "java.awt.Component.\u003cclinit\u003e",
              "source": "Component.java:545"
            },
            {
              "method": "java.lang.Class.forName0",
              "source": "Native Method"
            },
            {
              "method": "java.lang.Class.forName",
              "source": "Class.java:242"
            },
            {
              "method": "org.eclipse.swt.awt.SWT_AWT.new_Frame",
              "source": "SWT_AWT.java:103"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "199020",
      "date": "2007-08-07T10:50:45+02:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "critical"
    }
  ],
  "groupId": "199020",
  "bugId": "199020",
  "date": "2007-08-07T10:50:45+02:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "critical"
}