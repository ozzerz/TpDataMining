{
  "comments": [
    "3.3 RC1\n\n- Open this link, select all, copy to clipboard:\nhttps://bugs.eclipse.org/bugs/attachment.cgi?id\u003d67469\u0026action\u003ddiff\u0026context\u003dpatch\u0026collapsed\u003d\u0026headers\u003d1\u0026format\u003draw\n(link is from bug 182917: click \u0027Diff\u0027 for attachment and then \u0027Raw Unified\u0027)\n\n- In Eclipse, invoke Apply Patch...\n\n\u003d\u003e Unhandled event loop exception in the log:\n\njava.lang.ArrayIndexOutOfBoundsException: -1\nat java.util.ArrayList.get(ArrayList.java:324)\nat org.eclipse.compare.internal.patch.PatchReader.parse(PatchReader.java:168)\nat org.eclipse.compare.internal.patch.PatchReader.parse(PatchReader.java:79)\nat org.eclipse.compare.internal.patch.Patcher.parse(Patcher.java:152)\nat org.eclipse.compare.internal.patch.InputPatchPage.isPatchFile(InputPatchPage.java:752)\nat org.eclipse.compare.internal.patch.InputPatchPage.adjustToCurrentTarget(InputPatchPage.java:728)\nat org.eclipse.compare.internal.patch.InputPatchPage.createControl(InputPatchPage.java:132)\nat org.eclipse.jface.wizard.Wizard.createPageControls(Wizard.java:170)\nat org.eclipse.jface.wizard.WizardDialog.createPageControls(WizardDialog.java:669)\nat org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:543)\nat org.eclipse.jface.window.Window.create(Window.java:426)\nat org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1081)\nat org.eclipse.jface.window.Window.open(Window.java:785)\nat org.eclipse.compare.patch.ApplyPatchOperation.openWizard(ApplyPatchOperation.java:154)\nat org.eclipse.compare.patch.ApplyPatchOperation.run(ApplyPatchOperation.java:198)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\nat org.eclipse.team.internal.ui.actions.ApplyPatchAction.execute(ApplyPatchAction.java:35)\nat org.eclipse.team.internal.ui.actions.TeamAction.run(TeamAction.java:477)\nat org.eclipse.team.internal.ui.actions.TeamAction.runWithEvent(TeamAction.java:511)\nat org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)\nat org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)\nat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\nat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\nat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3673)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\nat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\nat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:497)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:436)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1162)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1137)",
    "When you click on the \"Raw Unified\" link, the resulting patch format is different than that of the original patch in the sense that a header line that we expect to be on a single line spans multiple lines. Technically, I\u0027m not sure if this violates the spec for the patch format (since I\u0027ve never seen such a spec) but every other tool I\u0027ve encountered puts the header info on a single line. We should improve the Apply Patch wizard to handle this situation but not for 3.3.",
    "Of course, we should improve the error handling for 3.3 so that the contents of the clipboard is ignored and the wizard opens.",
    "Created an attachment (id\u003d68208)\nPatch to improve error handling\n\n",
    "Bogdan, can you review this patch for RC2?",
    "Markus, could I get you to review it as well?",
    "Do you really want to log this exception in InputPatchPage#isPatchFile(..)? I\nthink it\u0027s a normal situation that the clipboard can contain something that\nlooks like a patch but is not parseable in the end.\n\nWhen I manually set the patch location to clipboard, I got 2 error dialogs. I\nthink the dialog in InputPatchPage#readInPatch() could be removed, since the\npatcher never contains diffs if the parsing failed.",
    "Created an attachment (id\u003d68336)\nUpdated patch\n\nI logged the exception so that the user would know that the patch didn\u0027t parse properly. However, I agree that this is probably not helpful. Here is an updated patch that doesn\u0027t log and only prompts once.",
    "Updated patch looks good and works fine with patch, almost-a-patch and no patch in clipboard.",
    "Patch released",
    "Verified in I20070525-0010\n"
  ],
  "commentCreationDates": [
    "2007-05-22T15:56:23+02:00",
    "2007-05-22T22:33:55+02:00",
    "2007-05-22T22:35:45+02:00",
    "2007-05-22T22:43:51+02:00",
    "2007-05-23T14:50:28+02:00",
    "2007-05-23T14:50:56+02:00",
    "2007-05-23T15:45:28+02:00",
    "2007-05-23T15:59:50+02:00",
    "2007-05-23T17:05:54+02:00",
    "2007-05-23T17:28:09+02:00",
    "2007-05-25T19:17:21+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "-1",
      "elements": [
        {
          "method": "java.util.ArrayList.get",
          "source": "ArrayList.java:324"
        },
        {
          "method": "org.eclipse.compare.internal.patch.PatchReader.parse",
          "source": "PatchReader.java:168"
        },
        {
          "method": "org.eclipse.compare.internal.patch.PatchReader.parse",
          "source": "PatchReader.java:79"
        },
        {
          "method": "org.eclipse.compare.internal.patch.Patcher.parse",
          "source": "Patcher.java:152"
        },
        {
          "method": "org.eclipse.compare.internal.patch.InputPatchPage.isPatchFile",
          "source": "InputPatchPage.java:752"
        },
        {
          "method": "org.eclipse.compare.internal.patch.InputPatchPage.adjustToCurrentTarget",
          "source": "InputPatchPage.java:728"
        },
        {
          "method": "org.eclipse.compare.internal.patch.InputPatchPage.createControl",
          "source": "InputPatchPage.java:132"
        },
        {
          "method": "org.eclipse.jface.wizard.Wizard.createPageControls",
          "source": "Wizard.java:170"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.createPageControls",
          "source": "WizardDialog.java:669"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.createContents",
          "source": "WizardDialog.java:543"
        },
        {
          "method": "org.eclipse.jface.window.Window.create",
          "source": "Window.java:426"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.create",
          "source": "Dialog.java:1081"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:785"
        },
        {
          "method": "org.eclipse.compare.patch.ApplyPatchOperation.openWizard",
          "source": "ApplyPatchOperation.java:154"
        },
        {
          "method": "org.eclipse.compare.patch.ApplyPatchOperation.run",
          "source": "ApplyPatchOperation.java:198"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.ApplyPatchAction.execute",
          "source": "ApplyPatchAction.java:35"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.TeamAction.run",
          "source": "TeamAction.java:477"
        },
        {
          "method": "org.eclipse.team.internal.ui.actions.TeamAction.runWithEvent",
          "source": "TeamAction.java:511"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:246"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:229"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3673"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3284"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:597"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:497"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:436"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1162"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1137"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "188314",
      "date": "2007-05-22T15:56:23+02:00",
      "product": "Platform",
      "component": "Compare",
      "severity": "normal"
    }
  ],
  "groupId": "188314",
  "bugId": "188314",
  "date": "2007-05-22T15:56:23+02:00",
  "product": "Platform",
  "component": "Compare",
  "severity": "normal"
}