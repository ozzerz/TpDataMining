{
  "comments": [
    "Build ID:  M20070921-1145\n\nSteps To Reproduce:\nThe exception appears from time to time with my big project. There is clear flaw in WebTools source code - see below.\n\nMy workspace contains an EAR file with EJB and set of JARs inside. Upon creation the XML file EAR-PROJECT/org.eclipse.wst.common.component contains an entry \"\u003cdependent-object\u003e\u003c/dependent-object\u003e\" inside  \u003cdependent-module\u003e tag for EJB module. The entry in the file changes to \u003cdependent-object/\u003e from time to time. I can not provide repeatable sequence to achieve the change. \nHowever, once the saved file has the change, subsequent load of the workspace shows the following in the log file\n-------------\n!MESSAGE An internal error occurred during: \"Initializing Java Tooling\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObject(ResourceImpl.java:718)\n\tat org.eclipse.wst.common.componentcore.internal.util.HRefTranslator.convertStringToValue(HRefTranslator.java:78)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.extractValue(EMF2DOMAdapterImpl.java:1153)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFFeature(EMF2DOMAdapterImpl.java:1396)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1775)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:933)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:913)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:461)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:1488)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature(EMF2DOMAdapterImpl.java:1702)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1757)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:933)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:913)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:461)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:1488)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature(EMF2DOMAdapterImpl.java:1702)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1757)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:933)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:913)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:461)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFRootFeature(EMF2DOMAdapterImpl.java:954)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:929)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:913)\n\tat org.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doLoad(EMF2DOMRenderer.java:64)\n\tat org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad(TranslatorResourceImpl.java:144)\n\tat org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad(CompatibilityXMIResourceImpl.java:175)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1354)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:1155)\n\tat org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.load(CompatibilityXMIResourceImpl.java:261)\n\tat org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load(TranslatorResourceImpl.java:390)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(ResourceSetImpl.java:256)\n\tat org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.demandLoad(ProjectResourceSetImpl.java:143)\n\tat org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(ResourceSetImpl.java:271)\n\tat org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource(ProjectResourceSetImpl.java:390)\n\tat org.eclipse.wst.common.internal.emfworkbench.WorkbenchResourceHelper.getOrCreateResource(WorkbenchResourceHelper.java:384)\n\tat org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource(EditModel.java:684)\n\tat org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryResource(ModuleStructuralModel.java:303)\n\tat org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.prepareProjectModulesIfNecessary(ModuleStructuralModel.java:241)\n\tat org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryRootObject(ModuleStructuralModel.java:115)\n\tat org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRoot(StructureEdit.java:450)\n\tat org.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules(StructureEdit.java:486)\n\tat org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponent(StructureEdit.java:929)\n\tat org.eclipse.jst.j2ee.componentcore.util.EARVirtualComponent.getHardReferences(EARVirtualComponent.java:87)\n\tat org.eclipse.jst.j2ee.componentcore.util.EARVirtualComponent.getReferences(EARVirtualComponent.java:187)\n\tat org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getManifestReferences(J2EEModuleVirtualComponent.java:255)\n\tat org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getReferences(J2EEModuleVirtualComponent.java:86)\n\tat org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getReferences(J2EEModuleVirtualComponent.java:79)\n\tat org.eclipse.jst.j2ee.internal.common.classpath.J2EEComponentClasspathContainer.update(J2EEComponentClasspathContainer.java:163)\n\tat org.eclipse.jst.j2ee.internal.common.classpath.J2EEComponentClasspathContainer.install(J2EEComponentClasspathContainer.java:281)\n\tat org.eclipse.jst.j2ee.internal.common.classpath.J2EEComponentClasspathInitializer.initialize(J2EEComponentClasspathInitializer.java:29)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:2218)\n\tat org.eclipse.jdt.internal.core.JavaModelManager$9.run(JavaModelManager.java:2148)\n\tat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:2164)\n\tat org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1544)\n\tat org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1571)\n\tat org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2558)\n\tat org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1848)\n\tat org.eclipse.jdt.core.JavaCore.initializeAfterLoad(JavaCore.java:3254)\n\tat org.eclipse.jdt.internal.ui.InitializeAfterLoadJob$RealJob.run(InitializeAfterLoadJob.java:35)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n------------\n\nMore information:\n\nDebugger shows that the following function in the above stack trace:\n\norg.eclipse.wst.common.componentcore.internal.util.HRefTranslator.convertStringToValue\n\nreceives null instead of empty string as the first argument in case when the file contains \u003cdependent-object/\u003e tag instead of \u003cdependent-object\u003e\u003c/dependent-object\u003e. Null argument is not checked in the function.\n\nAdding null-checking with the patch below closes the issue.\n\n\n---------------\n..\\modulecore-src\\org\\eclipse\\wst\\common\\componentcore\\internal\\util\u003ediff -C 2 HRefTranslator.java.OLD HRefTranslator.java\n*** HRefTranslator.java.OLD     Mon Oct  8 23:49:11 2007\n--- HRefTranslator.java Sat Oct  6 17:47:46 2007\n***************\n*** 75,79 ****\n                        if( edit.getContentModelRoot() \u003d\u003d null ) return null;\n                        res \u003d edit.getContentModelRoot().eResource();\n!                       if (res !\u003d null)\n                                return res.getEObject(aValue);\n                        return null;\n--- 75,79 ----\n                        if( edit.getContentModelRoot() \u003d\u003d null ) return null;\n                        res \u003d edit.getContentModelRoot().eResource();\n!                       if (res !\u003d null \u0026\u0026 aValue !\u003d null)\n                                return res.getEObject(aValue);\n                        return null;\n---------------",
    "\n\n*** This bug has been marked as a duplicate of bug 205004 ***"
  ],
  "commentCreationDates": [
    "2007-10-09T05:58:01+02:00",
    "2007-10-09T23:05:00+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.getEObject",
          "source": "ResourceImpl.java:718"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.util.HRefTranslator.convertStringToValue",
          "source": "HRefTranslator.java:78"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.extractValue",
          "source": "EMF2DOMAdapterImpl.java:1153"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFFeature",
          "source": "EMF2DOMAdapterImpl.java:1396"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature",
          "source": "EMF2DOMAdapterImpl.java:1775"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF",
          "source": "EMF2DOMAdapterImpl.java:933"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF",
          "source": "EMF2DOMAdapterImpl.java:913"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:461"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1488"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1702"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature",
          "source": "EMF2DOMAdapterImpl.java:1757"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF",
          "source": "EMF2DOMAdapterImpl.java:933"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF",
          "source": "EMF2DOMAdapterImpl.java:913"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:461"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1488"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:1702"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature",
          "source": "EMF2DOMAdapterImpl.java:1757"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF",
          "source": "EMF2DOMAdapterImpl.java:933"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF",
          "source": "EMF2DOMAdapterImpl.java:913"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature",
          "source": "EMF2DOMAdapterImpl.java:461"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFRootFeature",
          "source": "EMF2DOMAdapterImpl.java:954"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF",
          "source": "EMF2DOMAdapterImpl.java:929"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF",
          "source": "EMF2DOMAdapterImpl.java:913"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doLoad",
          "source": "EMF2DOMRenderer.java:64"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad",
          "source": "TranslatorResourceImpl.java:144"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad",
          "source": "CompatibilityXMIResourceImpl.java:175"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1354"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.java:1155"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.load",
          "source": "CompatibilityXMIResourceImpl.java:261"
        },
        {
          "method": "org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load",
          "source": "TranslatorResourceImpl.java:390"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad",
          "source": "ResourceSetImpl.java:256"
        },
        {
          "method": "org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.demandLoad",
          "source": "ProjectResourceSetImpl.java:143"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper",
          "source": "ResourceSetImpl.java:271"
        },
        {
          "method": "org.eclipse.jem.internal.util.emf.workbench.ProjectResourceSetImpl.getResource",
          "source": "ProjectResourceSetImpl.java:390"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.WorkbenchResourceHelper.getOrCreateResource",
          "source": "WorkbenchResourceHelper.java:384"
        },
        {
          "method": "org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource",
          "source": "EditModel.java:684"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryResource",
          "source": "ModuleStructuralModel.java:303"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.prepareProjectModulesIfNecessary",
          "source": "ModuleStructuralModel.java:241"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryRootObject",
          "source": "ModuleStructuralModel.java:115"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRoot",
          "source": "StructureEdit.java:450"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules",
          "source": "StructureEdit.java:486"
        },
        {
          "method": "org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponent",
          "source": "StructureEdit.java:929"
        },
        {
          "method": "org.eclipse.jst.j2ee.componentcore.util.EARVirtualComponent.getHardReferences",
          "source": "EARVirtualComponent.java:87"
        },
        {
          "method": "org.eclipse.jst.j2ee.componentcore.util.EARVirtualComponent.getReferences",
          "source": "EARVirtualComponent.java:187"
        },
        {
          "method": "org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getManifestReferences",
          "source": "J2EEModuleVirtualComponent.java:255"
        },
        {
          "method": "org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getReferences",
          "source": "J2EEModuleVirtualComponent.java:86"
        },
        {
          "method": "org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent.getReferences",
          "source": "J2EEModuleVirtualComponent.java:79"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.common.classpath.J2EEComponentClasspathContainer.update",
          "source": "J2EEComponentClasspathContainer.java:163"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.common.classpath.J2EEComponentClasspathContainer.install",
          "source": "J2EEComponentClasspathContainer.java:281"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.common.classpath.J2EEComponentClasspathInitializer.initialize",
          "source": "J2EEComponentClasspathInitializer.java:29"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer",
          "source": "JavaModelManager.java:2218"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager$9.run",
          "source": "JavaModelManager.java:2148"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1797"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers",
          "source": "JavaModelManager.java:2164"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer",
          "source": "JavaModelManager.java:1544"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:1571"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.resolveClasspath",
          "source": "JavaProject.java:2558"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1848"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.initializeAfterLoad",
          "source": "JavaCore.java:3254"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.InitializeAfterLoadJob$RealJob.run",
          "source": "InitializeAfterLoadJob.java:35"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "205775",
      "duplicateId": "205004",
      "date": "2007-10-09T05:58:01+02:00",
      "product": "Web Tools",
      "component": "wst.common",
      "severity": "trivial"
    }
  ],
  "groupId": "205004",
  "bugId": "205775",
  "duplicateId": "205004",
  "date": "2007-10-09T05:58:01+02:00",
  "product": "Web Tools",
  "component": "wst.common",
  "severity": "trivial"
}