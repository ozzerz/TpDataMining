{
  "comments": [
    "I20051018-0800, GTK+ 2.6.8, KDE 3.4.1, X.org 6.8.2, Linux 2.6.13  \n \nAfter running Eclipse for several hours (with a lot of code being written), \nEclipse crashes with \"No more handles\" in the log.  When the problem occurs, \ntwo dialogs open.  The top one says simply \"ERROR\".  The second says \"An SWT \nerror has occurred.  You are recommended (sic) to exit the workbench....\"  It \ngoes on to say Eclipse is unstable. \n \nIf left in this state for a while, it will eventually prompt with a third \ndialog saying \"An internal error occurred while showing an internal error\". \n \nI\u0027m assigning this bug to Platform/SWT to comment on first.  However, due to \nthe nature of the traces (all very similar), I\u0027m adding Tod as a CC to comment \non whether this might be a leak in the [Progress] component area in \nPlatform/UI.  I\u0027ll take a quick look at the code in the traces and see if I \ncan spot an obvious leak. \n \n \norg.eclipse.swt.SWTError: No more handles \n        at org.eclipse.swt.SWT.error(SWT.java:3288) \n        at org.eclipse.swt.SWT.error(SWT.java:3185) \n        at org.eclipse.swt.SWT.error(SWT.java:3156) \n        at org.eclipse.swt.widgets.Control.internal_new_GC(Control.java:2129) \n        at org.eclipse.swt.graphics.GC.\u003cinit\u003e(GC.java:131) \n        at org.eclipse.swt.graphics.GC.\u003cinit\u003e(GC.java:98) \n        at org.eclipse.jface.dialogs.Dialog.shortenText(Dialog.java:345) \n        at \norg.eclipse.ui.internal.progress.ProgressInfoItem.setLinkText(ProgressInfoItem.java:714) \n        at \norg.eclipse.ui.internal.progress.ProgressInfoItem.refresh(ProgressInfoItem.java:502) \n        at \norg.eclipse.ui.internal.progress.DetailedProgressViewer.internalRefresh(DetailedProgressViewer. \njava:266) \n        at \norg.eclipse.jface.viewers.StructuredViewer.internalRefresh(StructuredViewer.java:1110) \n        at \norg.eclipse.jface.viewers.StructuredViewer$8.run(StructuredViewer.java:1291) \n        at \norg.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1201) \n        at \norg.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1289) \n        at \norg.eclipse.ui.internal.progress.ProgressViewerContentProvider.refresh(ProgressViewerContentPro \nvider.java:134) \n        at \norg.eclipse.ui.internal.progress.ProgressViewUpdater$1.runInUIThread(ProgressViewUpdater.java:2 \n61) \n        at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:93) \n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) \n        at \norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123) \n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2919) \n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2633) \n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1763) \n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1727) \n        at \norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:371) \n        at \norg.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143) \n        at \norg.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106) \n        at \norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226) \n        at \norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:375) \n        at \norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:164) \n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \n        at \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \n        at \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \n        at java.lang.reflect.Method.invoke(Method.java:585) \n        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338) \n        at org.eclipse.core.launcher.Main.basicRun(Main.java:282) \n        at org.eclipse.core.launcher.Main.run(Main.java:977) \n        at org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Created an attachment (id\u003d28569)\nRelevent log snippet\n",
    "Created an attachment (id\u003d28570)\nSegfault Dump\n\nWhen selecting \"yes\" (to exit the workbench), a segmentation fault ensues.",
    "Looking at ProgressInfoItem#shortenText we are disposing GCs before we return so\nI suspect something else is leaking",
    "And of course, this isn\u0027t reproducable yet, is it?",
    "No, this is not reproducible.  I only saw it the one time. \n ",
    "I have experienced the same problem, and the circumstances were similar to the\nones from comment #1. Running eclipse 3.1.1, gtk+ 2.8.6, xorg 6.8.2, Linux\n2.6.13.4. If there\u0027s any other information I can provide, let me know.",
    "WTP0.7.1, GTK+ 2.4.0 ???, KDE 3.3, X.Org 6.8.1, Linux 2.6.13.1, RedHat FC3 distro\n\nI too get this.  No stack trace from me.  This happens about twice a week for\nme, using eclipse heavily during 3 days a week and leaving it running while away\nfrom the office (like overnight), so I have some pretty long running sessions.\n\nIs there anyway I can enable an option to start logging all X11, GTK, SWT\nresource usage and resource reclaimation, is there such debugging code inside\neclipse/SWT/GTK that would allow for a post mortem from a log file (no matter\nhow big).\n\nI\u0027m willing to give such a thing a go if it helps.\n\n\nAll I get emitted is:\n\nReason:\nNo more handles\nUnhandled event loop exception\nReason:\nNo more handles\nUnhandled event loop exception\nReason:\nNo more handles\nUnhandled event loop exception\nReason:\nNo more handles\nRemoving Info from map\nRemoving Info from map\nUnhandled event loop exception\nReason:\nNo more handles\n",
    "See Bug 115304. ",
    "Darryl, your problem does sound like a memory leak, but given that you are also\nusing WTP it is hard to say whether it is the same issue as the one described\nhere.  I would advise you to open a new bug report first against WTP and\ninvestigate it from there.  Even better, watch Eclipse using a resource checker\nsuch as \"xrestop\" or \"wininfo\", both from freedesktop.org, to try and detect\nwhat operations in Eclipse/WTP are causing the leak.",
    "I\u0027d just like to note that this happened again to me, but I also have WTP\ninstalled, so my issue may be the same as Darryl\u0027s.",
    "Perhaps a dupe of bug 115304?",
    "Of course, this was already mentioned in comment #8.  I will immediately commence with the flogging.",
    "Given that the original problem was with the SDK without further plugins, and\nthat the final error was in the progress dialog, I am marking this as a dup of\nbug 115304.  Darryl and Ismael, please monitor your systems and post a new bug\nwith the stack trace from your log file.\n\n*** This bug has been marked as a duplicate of 115304 ***"
  ],
  "commentCreationDates": [
    "2005-10-20T23:02:07+02:00",
    "2005-10-20T23:04:24+02:00",
    "2005-10-20T23:05:04+02:00",
    "2005-10-21T13:29:11+02:00",
    "2005-10-27T01:34:05+02:00",
    "2005-10-27T15:29:02+02:00",
    "2005-10-28T19:13:24+02:00",
    "2005-10-30T08:32:54+01:00",
    "2005-11-07T15:39:24+01:00",
    "2005-11-07T15:49:49+01:00",
    "2005-11-08T15:39:01+01:00",
    "2005-11-08T15:41:05+01:00",
    "2005-11-08T15:44:07+01:00",
    "2005-11-08T16:43:24+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTError",
      "message": "No more handles",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3288"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3185"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3156"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.internal_new_GC",
          "source": "Control.java:2129"
        },
        {
          "method": "org.eclipse.swt.graphics.GC.\u003cinit\u003e",
          "source": "GC.java:131"
        },
        {
          "method": "org.eclipse.swt.graphics.GC.\u003cinit\u003e",
          "source": "GC.java:98"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog.shortenText",
          "source": "Dialog.java:345"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressInfoItem.setLinkText",
          "source": "ProgressInfoItem.java:714"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressInfoItem.refresh",
          "source": "ProgressInfoItem.java:502"
        },
        {
          "method": "org.eclipse.ui.internal.progress.DetailedProgressViewer.internalRefresh",
          "source": "DetailedProgressViewer.  java:266"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.internalRefresh",
          "source": "StructuredViewer.java:1110"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$8.run",
          "source": "StructuredViewer.java:1291"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:1201"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
          "source": "StructuredViewer.java:1289"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressViewerContentProvider.refresh",
          "source": "ProgressViewerContentPro  vider.java:134"
        },
        {
          "method": "org.eclipse.ui.internal.progress.ProgressViewUpdater$1.runInUIThread",
          "source": "ProgressViewUpdater.java:2  61"
        },
        {
          "method": "org.eclipse.ui.progress.UIJob$1.run",
          "source": "UIJob.java:93"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2919"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2633"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1763"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1727"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:371"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:375"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:164"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "113291",
      "duplicateId": "115304",
      "date": "2005-10-20T23:02:07+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "critical"
    }
  ],
  "groupId": "115304",
  "bugId": "113291",
  "duplicateId": "115304",
  "date": "2005-10-20T23:02:07+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "critical"
}