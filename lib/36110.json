{
  "comments": [
    "In aspectj 1.1rc / jdk1.4.1 / linux the following aspect causes an illegal\naccess error:\n\naspect RequestDispatcherAspect\n{\n   public ServletContext ActionServlet.servletContext \u003d null;\n   public ServletContext ActionServlet.getServletContext()\n   {\n      if ( this.servletContext \u003d\u003d null )\n      {\n          this.servletContext \u003d\n            (ServletContext) Proxy.newProxyInstance(\n               getClass().getClassLoader(),\n               new Class[] { ServletContext.class },\n               new RequestDispatcherInvocator(super.getServletContext()));\n      }\n      return this.servletContext;\n   }\n}\n\n\n\n\njava.lang.IllegalAccessError: tried to access field\norg.apache.struts.action.ActionServlet.class$0 from class\ncom.syngenio.struts.performance.measurement.RequestDispatcherAspect\n        at\ncom.syngenio.struts.performance.measurement.RequestDispatcherAspect.ajc$interMethod$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$getServletContext(RequestDispatcherAspect.java:42)\n        at\norg.apache.struts.action.ActionServlet.getServletContext(ActionServlet.java)\n        at javax.servlet.GenericServlet.log(GenericServlet.java:300)\n        at javax.servlet.GenericServlet.init(GenericServlet.java:257)\n        at\norg.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:918)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:810)\n        at\norg.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3279)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3421)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:785)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:478)\n        at org.apache.catalina.core.StandardHost.install(StandardHost.java:738)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:324)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:389)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:232)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:155)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1131)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:638)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:343)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:388)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:506)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:781)\n        at org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n        at org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n\n\nJad:\nimport java.lang.reflect.Proxy;\nimport javax.servlet.ServletContext;\nimport org.apache.struts.action.ActionServlet;\nimport org.aspectj.lang.NoAspectBoundException;\n\n// Referenced classes of package com.syngenio.struts.performance.measurement:\n//            RequestDispatcherInvocator\n\npublic class RequestDispatcherAspect\n{\n\n    RequestDispatcherAspect()\n    {\n    }\n\n    public static void\najc$interFieldInit$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$servletContext(ActionServlet\narg0)\n    {\n       \narg0.ajc$interField$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$servletContext\n\u003d null;\n    }\n\n    public static ServletContext\najc$interFieldGetDispatch$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$servletContext(ActionServlet\narg0)\n    {\n        return\narg0.ajc$interField$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$servletContext;\n    }\n\n    public static void\najc$interFieldSetDispatch$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$servletContext(ActionServlet\narg0, ServletContext arg1)\n    {\n       \narg0.ajc$interField$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$servletContext\n\u003d arg1;\n    }\n\n    public static ServletContext\najc$interMethod$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$getServletContext(ActionServlet\narg0)\n    {\n       \nif(ajc$interFieldGetDispatch$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$servletContext(arg0)\n!\u003d null) goto _L2; else goto _L1\n_L1:\n        arg0;\n        arg0.getClass().getClassLoader();\n        Class aclass[] \u003d new Class[1];\n        aclass;\n        aclass;\n        0;\n        ActionServlet.class$0;\n        if(ActionServlet.class$0 !\u003d null) goto _L4; else goto _L3\n_L3:\n        JVM INSTR pop ;\n        ActionServlet.class$0 \u003d Class.forName(\"javax.servlet.ServletContext\");\n          goto _L4\n        JVM INSTR new #60  \u003cClass NoClassDefFoundError\u003e;\n        getMessage();\n        NoClassDefFoundError();\n        throw ;\n_L4:\n        JVM INSTR aastore ;\n        new\nRequestDispatcherInvocator(arg0.ajc$superDispatch$org_apache_struts_action_ActionServlet$getServletContext());\n        Proxy.newProxyInstance();\n        (ServletContext);\n       \najc$interFieldSetDispatch$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$servletContext();\n_L2:\n        return\najc$interFieldGetDispatch$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$servletContext(arg0);\n    }\n\n    public static ServletContext\najc$interMethodDispatch1$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$getServletContext(ActionServlet\narg0)\n    {\n        return arg0.getServletContext();\n    }\n\n    public static RequestDispatcherAspect aspectOf()\n    {\n        ajc$perSingletonInstance;\n        if(ajc$perSingletonInstance \u003d\u003d null) goto _L2; else goto _L1\n_L1:\n        return;\n_L2:\n        throw new NoAspectBoundException();\n    }\n\n    public static boolean hasAspect()\n    {\n        return ajc$perSingletonInstance !\u003d null;\n    }\n\n    private static void ajc$postClinit()\n    {\n        ajc$perSingletonInstance \u003d new RequestDispatcherAspect();\n    }\n\n    public static final RequestDispatcherAspect ajc$perSingletonInstance;\n\n    static\n    {\n        ajc$postClinit();\n    }\n}",
    "Raising priority to make sure this is fixed.\n\nIt would help a lot if you could provide a small self-contained test case with \n1-2 source files that would reproduce this bug.",
    "This has been isolated to be a result of use .class in an introduction that \naffects a type in a different package from the aspect.  This is now fixed in \nthe current tree with a test in bugs/interSpecials.\n\n"
  ],
  "commentCreationDates": [
    "2003-04-06T13:23:04+02:00",
    "2003-04-10T20:46:53+02:00",
    "2003-04-12T02:53:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalAccessError",
      "message": "tried to access field org.apache.struts.action.ActionServlet.class$0 from class com.syngenio.struts.performance.measurement.RequestDispatcherAspect",
      "elements": [
        {
          "method": "com.syngenio.struts.performance.measurement.RequestDispatcherAspect.ajc$interMethod$com_syngenio_struts_performance_measurement_RequestDispatcherAspect$org_apache_struts_action_ActionServlet$getServletContext",
          "source": "RequestDispatcherAspect.java:42"
        },
        {
          "method": "org.apache.struts.action.ActionServlet.getServletContext",
          "source": "ActionServlet.java"
        },
        {
          "method": "javax.servlet.GenericServlet.log",
          "source": "GenericServlet.java:300"
        },
        {
          "method": "javax.servlet.GenericServlet.init",
          "source": "GenericServlet.java:257"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapper.loadServlet",
          "source": "StandardWrapper.java:918"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapper.load",
          "source": "StandardWrapper.java:810"
        },
        {
          "method": "org.apache.catalina.core.StandardContext.loadOnStartup",
          "source": "StandardContext.java:3279"
        },
        {
          "method": "org.apache.catalina.core.StandardContext.start",
          "source": "StandardContext.java:3421"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.addChild",
          "source": "ContainerBase.java:785"
        },
        {
          "method": "org.apache.catalina.core.StandardHost.addChild",
          "source": "StandardHost.java:478"
        },
        {
          "method": "org.apache.catalina.core.StandardHost.install",
          "source": "StandardHost.java:738"
        },
        {
          "method": "org.apache.catalina.startup.HostConfig.deployApps",
          "source": "HostConfig.java:324"
        },
        {
          "method": "org.apache.catalina.startup.HostConfig.start",
          "source": "HostConfig.java:389"
        },
        {
          "method": "org.apache.catalina.startup.HostConfig.lifecycleEvent",
          "source": "HostConfig.java:232"
        },
        {
          "method": "org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent",
          "source": "LifecycleSupport.java:155"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.start",
          "source": "ContainerBase.java:1131"
        },
        {
          "method": "org.apache.catalina.core.StandardHost.start",
          "source": "StandardHost.java:638"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.start",
          "source": "ContainerBase.java:1123"
        },
        {
          "method": "org.apache.catalina.core.StandardEngine.start",
          "source": "StandardEngine.java:343"
        },
        {
          "method": "org.apache.catalina.core.StandardService.start",
          "source": "StandardService.java:388"
        },
        {
          "method": "org.apache.catalina.core.StandardServer.start",
          "source": "StandardServer.java:506"
        },
        {
          "method": "org.apache.catalina.startup.Catalina.start",
          "source": "Catalina.java:781"
        },
        {
          "method": "org.apache.catalina.startup.Catalina.execute",
          "source": "Catalina.java:681"
        },
        {
          "method": "org.apache.catalina.startup.Catalina.process",
          "source": "Catalina.java:179"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.apache.catalina.startup.Bootstrap.main",
          "source": "Bootstrap.java:243"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "36110",
      "date": "2003-04-06T13:23:04+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "36110",
  "bugId": "36110",
  "date": "2003-04-06T13:23:04+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}