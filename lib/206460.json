{
  "comments": [
    "Build ID: I20070625-1500\n\nSteps To Reproduce:\n1. Create a Java project \"test\" and switch to the Java perspective\n2. Create empty file META-INF/MANIFEST.MF\n3. Execute \"Refactor-\u003eRename\" on the project with new name \"test2\"\n4. Observe an error pop-up and an entry in the PDE error log\n\n\nMore information:\nThis happens if you work with Java projects which are no plug-in projects but have a manifest file located in META-INF/MANIFEST.MF (which is not a bundle manifest). \n\nAs the stack trace reveals:\n\njava.lang.NullPointerException\nat org.eclipse.pde.internal.ui.refactoring.ContainerRenameParticipant.createManifestChange(ContainerRenameParticipant.java:88)\nat org.eclipse.pde.internal.ui.refactoring.ContainerRenameParticipant.createChange(ContainerRenameParticipant.java:68)\nat org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.createChange(ProcessorBasedRefactoring.java:250)\nat org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:121)\nat org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:209)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1797)\nat org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)\nat org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)\n\nthe problem lies in the ContainerRenameParticipant. It assumes that a file named META-INF/MANIFEST.MF is a OSGi bundle manifest, tries to read the BundleSymbolicNameHeader and does not check whether it exists.\n\nIt should do a null check on the BundleSymbolicNameHeader here.",
    "Created an attachment (id\u003d80816)\nPatch\n\n",
    "I inserted an \"if ( header !\u003d null )\" statement and reorganized the code a little bit.\n\n ",
    "Thanks Joern for the patch.  We appreciate the extra help!\n\nYour patch completely resolves the NPE.  The one thing I slightly modified was to include the rest of the try/catch block in the if (BundleSymbolicHeader !\u003d null) block.  The reason is, if the Manifest does not have the header, we should exit right away.  If we don\u0027t, when the user clicks the preview button in the wizard, we show an empty change.\n\nThanks again for your contributions.",
    "Darin, can you verify this bug when you get a chance."
  ],
  "commentCreationDates": [
    "2007-10-16T15:35:10+02:00",
    "2007-10-20T09:37:48+02:00",
    "2007-10-20T09:39:25+02:00",
    "2007-10-22T17:16:46+02:00",
    "2007-10-30T20:17:46+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.ui.refactoring.ContainerRenameParticipant.createManifestChange",
          "source": "ContainerRenameParticipant.java:88"
        },
        {
          "method": "org.eclipse.pde.internal.ui.refactoring.ContainerRenameParticipant.createChange",
          "source": "ContainerRenameParticipant.java:68"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.createChange",
          "source": "ProcessorBasedRefactoring.java:250"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.CreateChangeOperation.run",
          "source": "CreateChangeOperation.java:121"
        },
        {
          "method": "org.eclipse.ltk.core.refactoring.PerformChangeOperation.run",
          "source": "PerformChangeOperation.java:209"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1797"
        },
        {
          "method": "org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run",
          "source": "WorkbenchRunnableAdapter.java:87"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:113"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "206460",
      "date": "2007-10-16T15:35:10+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "206460",
  "bugId": "206460",
  "date": "2007-10-16T15:35:10+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}