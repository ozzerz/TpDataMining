{
  "comments": [
    "I\u0027m trying to upgrade from AspectJ1.2.1 to AspectJ1.5.\nI\u0027m trying to aspectize a jar and make a new jar. But this is working fine in \nAspectJ1.2.1 even now. But this problem occurs in aspectJ1.5. Is thr any \nworkaround for this \n\n---- Compiler Messages ---\nabort ABORT -- (BCException) Can\u0027t open archive: struts.jar: \njava.util.zip.ZipException: error in opening zip file\nCan\u0027t open archive: struts.jar: java.util.zip.ZipException: error in opening \nzip file\norg.aspectj.weaver.BCException: Can\u0027t open archive: struts.jar: \njava.util.zip.ZipException: error in opening zip file\n\tat org.aspectj.weaver.bcel.ClassPathManager$ZipFileEntry.ensureOpen\n(ClassPathManager.java:253)\n\tat org.aspectj.weaver.bcel.ClassPathManager$ZipFileEntry.find\n(ClassPathManager.java:225)\n\tat org.aspectj.weaver.bcel.ClassPathManager.find\n(ClassPathManager.java:92)\n\tat org.aspectj.weaver.bcel.BcelWorld.lookupJavaClass\n(BcelWorld.java:259)\n\tat org.aspectj.weaver.bcel.BcelWorld.resolveDelegate\n(BcelWorld.java:234)\n\tat org.aspectj.weaver.World.resolveToReferenceType(World.java:282)\n\tat org.aspectj.weaver.World.resolve(World.java:205)\n\tat org.aspectj.weaver.World.resolve(World.java:127)\n\tat org.aspectj.weaver.World.resolve(World.java:250)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld\n(AjBuildManager.java:594)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild\n(AjBuildManager.java:189)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:140)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:324)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:238)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:82)\n\n---- org.aspectj.weaver.bcel.BcelWorld ----",
    "Hmmm, is struts.jar definetly a valid jar file?  you can unzip/unjar it OK\noutside of AspectJ?  Is this only happening on solaris like the other bug, or is\nit also happening on windows?\n\nAll the code that is failing is basically doing is:\n\nzipFile \u003d new ZipFile(new File(\"struts.jar\"))  \n\nAspectj hasn\u0027t even had a chance to touch the contents of it by the time it goes\nwrong.",
    "No this is happening even in windows when i tried with AspectJ1.5. But itz \nworking quite fine when i tried with Ver1.2.1. Is thr any work around for \nthis.. I was stuck up in the middle as i\u0027m unable to change completely to \nVer1.5 because of this kind of error nor i cudn\u0027t proceed with 1.2.1 because \nof that internal compiler error\n ",
    "But have you tried opening the struts.jar outside of AspectJ, just on the\ncommand line - is the jar OK??\n\nIt is possible that extra processing in AspectJ5 is requiring us to open that\njar where we didn\u0027t bother previously - under AspectJ1.2.1 we may never have\ntried to open it.  \n\nAll I can suggest is moving struts.jar to the end of your classpath - AspectJ is\nnot necessarily looking for a class from that archive, it is just opening all\nthe jars on the classpath in turn trying to find something.",
    "Yeah. I\u0027m manually able to open tht jar. But this is not the case only with \nstruts.jar. I\u0027m getting this error for all the jars that i\u0027m tryin to \naspectize.. \n",
    "FWIW, I\u0027ve verified that I can open (and weave) struts.jar on Windows with AJ 5. ",
    "Is this still a problem for you?",
    "Finally I recreated this today by accident.  It occurs if the output jar you are\nwriting to is on your classpath !!",
    "or if a jar on the classpath is zero size - which happens if you have it as the\noutjar - we open the file to write to then attempt to open it when resolving\nsomething from the classpath, bang.",
    "investigate if still a problem for 1.5.4"
  ],
  "commentCreationDates": [
    "2005-09-23T07:50:07+02:00",
    "2005-09-23T09:59:48+02:00",
    "2005-09-23T10:09:20+02:00",
    "2005-09-23T10:12:26+02:00",
    "2005-09-23T11:13:19+02:00",
    "2005-09-23T13:11:30+02:00",
    "2005-10-28T15:31:48+02:00",
    "2005-11-02T16:40:40+01:00",
    "2005-11-02T16:43:02+01:00",
    "2007-10-23T15:12:26+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.zip.ZipException",
      "message": "error in opening zip file",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.ClassPathManager$ZipFileEntry.ensureOpen",
          "source": "ClassPathManager.java:253"
        },
        {
          "method": "org.aspectj.weaver.bcel.ClassPathManager$ZipFileEntry.find",
          "source": "ClassPathManager.java:225"
        },
        {
          "method": "org.aspectj.weaver.bcel.ClassPathManager.find",
          "source": "ClassPathManager.java:92"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.lookupJavaClass",
          "source": "BcelWorld.java:259"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.resolveDelegate",
          "source": "BcelWorld.java:234"
        },
        {
          "method": "org.aspectj.weaver.World.resolveToReferenceType",
          "source": "World.java:282"
        },
        {
          "method": "org.aspectj.weaver.World.resolve",
          "source": "World.java:205"
        },
        {
          "method": "org.aspectj.weaver.World.resolve",
          "source": "World.java:127"
        },
        {
          "method": "org.aspectj.weaver.World.resolve",
          "source": "World.java:250"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.initBcelWorld",
          "source": "AjBuildManager.java:594"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:189"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:140"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.doCommand",
          "source": "AjdtCommand.java:112"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:60"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:324"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:238"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:82"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "110396",
      "date": "2005-09-23T07:50:07+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "110396",
  "bugId": "110396",
  "date": "2005-09-23T07:50:07+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}