{
  "comments": [
    "Add a new custom page under the extension point org.eclipse.cdt.managedbuilder.ui.newWizardPages and add more than one toolchain as filter to this wizard page. When trying to create a new C/C++ project for one of the defined tool chains a ClassCastException is being thrown upon trying to add the new custom page. Stack trace:\n\njava.lang.ClassCastException: org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageData$ToolchainData\n\tat java.util.TreeMap.compare(TreeMap.java:1085)\n\tat java.util.TreeMap.put(TreeMap.java:463)\n\tat java.util.TreeSet.add(TreeSet.java:209)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageData.addToolchain(MBSCustomPageData.java:338)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadToolchain(MBSCustomPageManager.java:299)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadWizardPage(MBSCustomPageManager.java:244)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadExtensionsSynchronized(MBSCustomPageManager.java:165)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadExtensions(MBSCustomPageManager.java:129)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.CDTConfigWizardPage.addCustomPages(CDTConfigWizardPage.java:97)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.CDTConfigWizardPage.getNextPage(CDTConfigWizardPage.java:335)\n\tat org.eclipse.jface.wizard.WizardPage.canFlipToNextPage(WizardPage.java:115)\n\tat org.eclipse.jface.wizard.WizardDialog.updateButtons(WizardDialog.java:1250)\n\tat org.eclipse.jface.wizard.WizardPage.setPageComplete(WizardPage.java:299)\n\tat org.eclipse.cdt.managedbuilder.ui.wizards.CDTConfigWizardPage.setVisible(CDTConfigWizardPage.java:277)\n\tat org.eclipse.jface.wizard.WizardDialog.updateForPage(WizardDialog.java:1161)\n\tat org.eclipse.jface.wizard.WizardDialog.access$2(WizardDialog.java:1139)\n\tat org.eclipse.jface.wizard.WizardDialog$4.run(WizardDialog.java:1128)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.jface.wizard.WizardDialog.showPage(WizardDialog.java:1126)\n\tat org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:820)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:369)\n\tat org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:616)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1101)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3319)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2971)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:820)\n\tat org.eclipse.jface.window.Window.open(Window.java:796)\n\tat org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:182)\n\tat org.eclipse.ui.actions.NewWizardDropDownAction.run(NewWizardDropDownAction.java:174)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:498)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\n\tat org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:443)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1101)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3319)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2971)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:497)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:436)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1162)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1137)\n\nThe problem is that the class org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageData$ToolchainData does not implement Comparable and thus is not fit for insertion into a TreeSet/TreeMap. Proposed patch:\n\n--- MBSCustomPageData.java.org  2007-05-29 10:34:43.387669496 +0100\n+++ MBSCustomPageData.java      2007-05-29 10:32:23.027657521 +0100\n@@ -44,12 +44,30 @@\n        /**\n         *  Stores data on a particular toolchain that a custom wizard page supports.\n         */\n-       public class ToolchainData\n+       public class ToolchainData implements Comparable\n        {\n                private String id \u003d null;\n\n                private String[] versionsSupported \u003d null;\n\n+               /* (non-Javadoc)\n+                * @see java.lang.Comparable#compareTo(java.lang.Object)\n+                */\n+               public int compareTo(Object o) {\n+                       ToolchainData other \u003d (ToolchainData)o;\n+                       return this.id.compareTo(other.id);\n+               }\n+\n+               /* (non-Javadoc)\n+                * @see java.lang.Object#equals(java.lang.Object)\n+                */\n+               public boolean equals(Object obj) {\n+                       if (this \u003d\u003d obj) {\n+                               return true;\n+                       }\n+                       return this.id.equals(((ToolchainData)obj).id);\n+               }\n+\n                /**\n                 * @param id The id to set.\n                 * @since 3.0\n\nNote that I do not know whether comparing on the \u0027id\u0027 field is enough or whether the \u0027supportedVersions\u0027 must be taken into account as well.\nNote also that I overwrote the \u0027equals()\u0027 method to fulfil the \u0027consistent with equals\u0027 constraint for Comparable.",
    "Problem reproduced.\nWorking...",
    "Your patch is applied with minimal changes.\nProblem seems to be disappear.\nClosing bug.\n"
  ],
  "commentCreationDates": [
    "2007-05-29T11:38:51+02:00",
    "2007-05-29T12:17:41+02:00",
    "2007-05-29T12:35:13+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageData$ToolchainData",
      "elements": [
        {
          "method": "java.util.TreeMap.compare",
          "source": "TreeMap.java:1085"
        },
        {
          "method": "java.util.TreeMap.put",
          "source": "TreeMap.java:463"
        },
        {
          "method": "java.util.TreeSet.add",
          "source": "TreeSet.java:209"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageData.addToolchain",
          "source": "MBSCustomPageData.java:338"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadToolchain",
          "source": "MBSCustomPageManager.java:299"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadWizardPage",
          "source": "MBSCustomPageManager.java:244"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadExtensionsSynchronized",
          "source": "MBSCustomPageManager.java:165"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.MBSCustomPageManager.loadExtensions",
          "source": "MBSCustomPageManager.java:129"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.CDTConfigWizardPage.addCustomPages",
          "source": "CDTConfigWizardPage.java:97"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.CDTConfigWizardPage.getNextPage",
          "source": "CDTConfigWizardPage.java:335"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardPage.canFlipToNextPage",
          "source": "WizardPage.java:115"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.updateButtons",
          "source": "WizardDialog.java:1250"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardPage.setPageComplete",
          "source": "WizardPage.java:299"
        },
        {
          "method": "org.eclipse.cdt.managedbuilder.ui.wizards.CDTConfigWizardPage.setVisible",
          "source": "CDTConfigWizardPage.java:277"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.updateForPage",
          "source": "WizardDialog.java:1161"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.access$2",
          "source": "WizardDialog.java:1139"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog$4.run",
          "source": "WizardDialog.java:1128"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.showPage",
          "source": "WizardDialog.java:1126"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.nextPressed",
          "source": "WizardDialog.java:820"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:369"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$2.widgetSelected",
          "source": "Dialog.java:616"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:227"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1101"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3319"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2971"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:820"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:796"
        },
        {
          "method": "org.eclipse.ui.actions.NewWizardAction.run",
          "source": "NewWizardAction.java:182"
        },
        {
          "method": "org.eclipse.ui.actions.NewWizardDropDownAction.run",
          "source": "NewWizardDropDownAction.java:174"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:498"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$6.handleEvent",
          "source": "ActionContributionItem.java:443"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1101"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3319"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2971"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:497"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:436"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1162"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1137"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "189623",
      "date": "2007-05-29T11:38:51+02:00",
      "product": "CDT",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "189623",
  "bugId": "189623",
  "date": "2007-05-29T11:38:51+02:00",
  "product": "CDT",
  "component": "UI",
  "severity": "critical"
}