{
  "comments": [
    "Using N20040509\n\nIf I select the Perspective chevron but do not select anything, i.e., I let \nthe drop-down appear, the following excpetion occurs.\n\njava.lang.NullPointerException\n        at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n        at java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n        at java.lang.NullPointerException.\u003cinit\u003e(NullPointerException.java:60)\n        at org.eclipse.ui.internal.PerspectiveBarManager.handleChevron\n(PerspectiveBarManager.java:157)\n        at org.eclipse.ui.internal.WorkbenchWindow$4.widgetSelected\n(WorkbenchWindow.java:831)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:243)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n        at org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:90)\n        at org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:298)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:249)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:126)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:84)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:59)\n        at java.lang.reflect.Method.invoke(Method.java:390)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:269)\n        at org.eclipse.core.launcher.Main.run(Main.java:722)\n        at org.eclipse.core.launcher.Main.main(Main.java:706)",
    "The trick is to hit the chevron twice, once to expand, the other to hide.\nThe hide causes handleChevron to be invoked again, where you dispose it and \nset it to null which causes the NPE in the loop.  The simple solution is to \ncheck for null as part of the loop, but I am not sure if this is the most \nappropriate way to fix it.",
    "I was able to reproduce this bug in 200405140800.\nCurrently investigating.\n",
    "Created an attachment (id\u003d10667)\nPatch for show/hide the chevron\n\nAdded a null check in the \"PerspectiveBarManager#handleChevron()\" method so\nthat if the chevron is clicked twice in a row, the chevron is disposed and also\ndoes not execute the \"isVisible()\" loop.",
    "Re-assigning to Stefan. \n\nStefan, let me know if you run into any problems with my proposed patch. It does\nthe trick. The check you had at the beginning of the \"handleChevron()\" method\nfor (popup !\u003d null) was being executed but it would then jump back to the\n\"isVisible\" loop and crash.\n",
    "committed Ines\u0027 patch"
  ],
  "commentCreationDates": [
    "2004-05-10T00:51:15+02:00",
    "2004-05-10T01:05:17+02:00",
    "2004-05-14T21:10:55+02:00",
    "2004-05-14T21:51:02+02:00",
    "2004-05-14T21:52:44+02:00",
    "2004-05-14T22:19:29+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.NullPointerException.\u003cinit\u003e",
          "source": "NullPointerException.java:60"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectiveBarManager.handleChevron",
          "source": "PerspectiveBarManager.java:157"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$4.widgetSelected",
          "source": "WorkbenchWindow.java:831"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1324"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:243"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:90"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:298"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:249"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:126"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:84"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:57"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:59"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:390"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:269"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:722"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:706"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "61546",
      "date": "2004-05-10T00:51:15+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "61546",
  "bugId": "61546",
  "date": "2004-05-10T00:51:15+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}