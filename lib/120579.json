{
  "comments": [
    "Build Id: I20051213-0010\n\nHave the following code:\n\n-----------\npackage p;\npublic class Bar {\n\t{\n\t\tchar[] array\u003d new char[0];\n\t\tfor (char element: array) {\n\t\t}\n\t}\n}\n------------\n\nPlace cursor directly before \"f\" of the for loop. Press Ctrl+1 and wait a second -\u003e Nullpointer:\n\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)\n\tat org.eclipse.swt.SWT.error(SWT.java:3283)\n\tat org.eclipse.swt.SWT.error(SWT.java:3206)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3218)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2864)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1762)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1726)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:397)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:379)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.jdt.internal.corext.fix.AbstractFix.createChange(AbstractFix.java:95)\n\tat org.eclipse.jdt.internal.ui.text.correction.FixCorrectionProposal.createTextChange(FixCorrectionProposal.java:63)\n\tat org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.createChange(CUCorrectionProposal.java:282)\n\tat org.eclipse.jdt.internal.ui.text.correction.ChangeCorrectionProposal.getChange(ChangeCorrectionProposal.java:198)\n\tat org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.getTextChange(CUCorrectionProposal.java:291)\n\tat org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.getAdditionalProposalInfo(CUCorrectionProposal.java:117)\n\tat org.eclipse.jface.text.contentassist.AdditionalInfoController.computeInformation(AdditionalInfoController.java:221)\n\tat org.eclipse.jface.text.AbstractInformationControlManager.doShowInformation(AbstractInformationControlManager.java:820)\n\tat org.eclipse.jface.text.AbstractInformationControlManager.showInformation(AbstractInformationControlManager.java:810)\n\tat org.eclipse.jface.text.contentassist.AdditionalInfoController$1.run(AdditionalInfoController.java:173)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 20 more",
    "Benno, can you fix this for M4?",
    "I can try. But at first quick look it seams like a bug in ASTRewrite. The quick fix does remove the decl node \u0027char element\u0027 in the ASTRewrite, but then the ASTRewrite#rewriteAST does return an empty edit. But maybe it\u0027s not possible to apply the quick fix there at all (it\u0027s for sure not a very good idea).",
    "The parameter in the enhanced for loop is mandatory, it can\u0027t be removed.\n\nI would suggest to fix the AbstractFix to also work with empty edits.\nYou can also have a look at the unused quick fix code to not remove variables in a for loop parameter.",
    "Ok, will do that tomorrow for M4. Just needs an additional check if var decl is part of for loop, should be no problem.",
    "Created an attachment (id\u003d31714)\nfix\n\nThis fix adds checks for null pointers. The proposal is still shown but nothing happens when the fix is applyed.",
    "Created an attachment (id\u003d31717)\nfix\n\nWith this fix the proposal for removing the declaration is not shown anymore if the decl is a formal parameter of an enhanced for loop.",
    "Second patch released 20051214-0010 after review by Martin\n\nFollowing files have changed:\nAbstractFix.java\nUnusedCodeFix.java\nFixCorrectionProposal.java\nLocalCorrectionsQuickFixTest.java",
    "Verified in I20051214-0800."
  ],
  "commentCreationDates": [
    "2005-12-13T15:13:23+01:00",
    "2005-12-13T16:36:09+01:00",
    "2005-12-13T16:58:10+01:00",
    "2005-12-13T17:16:31+01:00",
    "2005-12-13T17:53:15+01:00",
    "2005-12-14T09:15:04+01:00",
    "2005-12-14T09:41:18+01:00",
    "2005-12-14T09:55:17+01:00",
    "2005-12-14T15:59:41+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.lang.NullPointerException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3283"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3206"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3218"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2864"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1762"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1726"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:397"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:109"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:379"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.jdt.internal.corext.fix.AbstractFix.createChange",
            "source": "AbstractFix.java:95"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.text.correction.FixCorrectionProposal.createTextChange",
            "source": "FixCorrectionProposal.java:63"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.createChange",
            "source": "CUCorrectionProposal.java:282"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.text.correction.ChangeCorrectionProposal.getChange",
            "source": "ChangeCorrectionProposal.java:198"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.getTextChange",
            "source": "CUCorrectionProposal.java:291"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.text.correction.CUCorrectionProposal.getAdditionalProposalInfo",
            "source": "CUCorrectionProposal.java:117"
          },
          {
            "method": "org.eclipse.jface.text.contentassist.AdditionalInfoController.computeInformation",
            "source": "AdditionalInfoController.java:221"
          },
          {
            "method": "org.eclipse.jface.text.AbstractInformationControlManager.doShowInformation",
            "source": "AbstractInformationControlManager.java:820"
          },
          {
            "method": "org.eclipse.jface.text.AbstractInformationControlManager.showInformation",
            "source": "AbstractInformationControlManager.java:810"
          },
          {
            "method": "org.eclipse.jface.text.contentassist.AdditionalInfoController$1.run",
            "source": "AdditionalInfoController.java:173"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "120579",
      "date": "2005-12-13T15:13:23+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "120579",
  "bugId": "120579",
  "date": "2005-12-13T15:13:23+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}