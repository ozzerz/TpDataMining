{
  "comments": [
    "This occurs in the AspectJ build in AJDT from August 1 but not from July 31:\n\njava.lang.NullPointerException\nat org.aspectj.weaver.bcel.BcelTypeMunger.enforceDecpRule1_abstractMethodsImplemented(BcelTypeMunger.java:250)\nat org.aspectj.weaver.bcel.BcelTypeMunger.mungeNewParent(BcelTypeMunger.java:194)\nat org.aspectj.weaver.bcel.BcelTypeMunger.munge(BcelTypeMunger.java:106)\nat org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:454)\nat org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:119)\nat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1597)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1548)\nat org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1328)\nat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1124)\nat org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.weaveQueuedEntries(AjPipeliningCompilerAdapter.java:451)\nat org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.queueForWeaving(AjPipeliningCompilerAdapter.java:389)\nat org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.afterProcessing(AjPipeliningCompilerAdapter.java:377)\nat org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$after$org_aspectj_ajdt_internal_compiler_CompilerAdapter$5$6b855184(CompilerAdapter.aj:98)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:533)\nat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:891)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:246)\nat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:165)\nat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)\nat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\ntrouble in:public class glassbox.agent.ErrorContainmentTest$ErrorMockAspect extends java.lang.Object implements glassbox.agent.api.NotSerializable:\nprivate static Throwable ajc$initFailureCause [Synthetic]\npublic static final glassbox.agent.ErrorContainmentTest$ErrorMockAspect ajc$perSingletonInstance [Synthetic]\nstatic void \u003cclinit\u003e():\ncatch java.lang.Throwable -\u003e E0\n|               INVOKESTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$postClinit ()V   (line 60)\ncatch java.lang.Throwable -\u003e E0\nGOTO L0\nE0: ASTORE_0\nALOAD_0\nPUTSTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$initFailureCause Ljava/lang/Throwable;\nL0: RETURN\nend static void \u003cclinit\u003e()\nvoid \u003cinit\u003e():\nALOAD_0     // Lglassbox/agent/ErrorContainmentTest$ErrorMockAspect; this   (line 60)\nINVOKESPECIAL java.lang.Object.\u003cinit\u003e ()V\nRETURN\nend void \u003cinit\u003e()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$1$9589fc()    AdviceAttribute(before, (scope() \u0026\u0026 call(* hook1())), 0, 1670)\n:\nNEW java.lang.RuntimeException   (line 64)\nDUP\nLDC \"rte\"\nINVOKESPECIAL java.lang.RuntimeException.\u003cinit\u003e (Ljava/lang/String;)V\nATHROW\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$1$9589fc()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$2$f75db3e2()    AdviceAttribute(before, execution(* glassbox.agent.ErrorContainmentTest.hook5()), 0, 1764)\n:\nNEW java.lang.RuntimeException   (line 67)\nDUP\nLDC \"rte\"\nINVOKESPECIAL java.lang.RuntimeException.\u003cinit\u003e (Ljava/lang/String;)V\nATHROW\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$2$f75db3e2()\npublic void ajc$around$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$3$a3a17d(org.aspectj.runtime.internal.AroundClosure)    AdviceAttribute(around, (scope() \u0026\u0026 call(* hook2())), 1, 1913)\n:\nNEW java.lang.Error   (line 71)\nDUP\nLDC \"foo\"\nINVOKESPECIAL java.lang.Error.\u003cinit\u003e (Ljava/lang/String;)V\nATHROW\nend public void ajc$around$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$3$a3a17d(org.aspectj.runtime.internal.AroundClosure)\nstatic void ajc$around$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$3$a3a17dproceed(org.aspectj.runtime.internal.AroundClosure) throws java.lang.Throwable    org.aspectj.weaver.AjAttribute$AjSynthetic@19a01f9\n:\nALOAD_0     // Lglassbox/agent/ErrorContainmentTest$ErrorMockAspect; this   (line 1)\nICONST_0\nANEWARRAY java.lang.Object\nINVOKEVIRTUAL org.aspectj.runtime.internal.AroundClosure.run ([Ljava/lang/Object;)Ljava/lang/Object;\nINVOKESTATIC org.aspectj.runtime.internal.Conversions.voidValue (Ljava/lang/Object;)Ljava/lang/Object;\nRETURN\nend static void ajc$around$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$3$a3a17dproceed(org.aspectj.runtime.internal.AroundClosure) throws java.lang.Throwable\npublic void ajc$after$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$4$bfd07f()    AdviceAttribute(after, (scope() \u0026\u0026 call(* hook4())), 0, 1991)\n:\nNEW org.aspectj.lang.SoftException   (line 74)\nDUP\nACONST_NULL\nINVOKESPECIAL org.aspectj.lang.SoftException.\u003cinit\u003e (Ljava/lang/Throwable;)V\nATHROW\nend public void ajc$after$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$4$bfd07f()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$5$e5bddfdc()    AdviceAttribute(before, logErrorInTest(), 0, 2446)\n:\nGETSTATIC glassbox.agent.ErrorContainmentTest.logCount I   (line 84)\nICONST_1\nIADD\nPUTSTATIC glassbox.agent.ErrorContainmentTest.logCount I\nRETURN   (line 85)\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$5$e5bddfdc()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$6$16ecfe62()    AdviceAttribute(before, (adviceexecution(* *) \u0026\u0026 (within(glassbox.util.logging.api.LogManagement) \u0026\u0026 (cflow(logError()) \u0026\u0026 cflow((execution(* testLoggingError(..)) \u0026\u0026 within(glassbox.agent.ErrorContainmentTest)))))), 0, 2506)\n:\nGETSTATIC java.lang.System.err Ljava/io/PrintStream;   (line 87)\nLDC \"match\"\nINVOKEVIRTUAL java.io.PrintStream.println (Ljava/lang/String;)V\nRETURN   (line 88)\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$6$16ecfe62()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$7$e9ae8482()    AdviceAttribute(before, (adviceexecution(* *) \u0026\u0026 (within(glassbox.util.logging.api.LogManagement) \u0026\u0026 cflow((execution(* testLoggingError(..)) \u0026\u0026 within(glassbox.agent.ErrorContainmentTest))))), 0, 2721)\n:\nGETSTATIC java.lang.System.err Ljava/io/PrintStream;   (line 90)\nLDC \"match in test\"\nINVOKEVIRTUAL java.io.PrintStream.println (Ljava/lang/String;)V\nRETURN   (line 91)\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$7$e9ae8482()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$8$c6ac5351()    AdviceAttribute(before, (adviceexecution(* *) \u0026\u0026 (within(glassbox.util.logging.api.LogManagement) \u0026\u0026 cflow(logError()))), 0, 2923)\n:\nGETSTATIC java.lang.System.err Ljava/io/PrintStream;   (line 93)\nLDC \"match in log\"\nINVOKEVIRTUAL java.io.PrintStream.println (Ljava/lang/String;)V\nRETURN   (line 94)\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$8$c6ac5351()\npublic void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$9$16ecfe62()    AdviceAttribute(before, (adviceexecution(* *) \u0026\u0026 (within(glassbox.util.logging.api.LogManagement) \u0026\u0026 (cflow(logError()) \u0026\u0026 cflow((execution(* testLoggingError(..)) \u0026\u0026 within(glassbox.agent.ErrorContainmentTest)))))), 0, 3069)\n:\nGETSTATIC glassbox.agent.ErrorContainmentTest.recursiveThrows I   (line 96)\nICONST_1\nIADD\nPUTSTATIC glassbox.agent.ErrorContainmentTest.recursiveThrows I\nGETSTATIC glassbox.agent.ErrorContainmentTest.recursiveThrows I   (line 97)\nICONST_2\nIF_ICMPGE L0\nNEW java.lang.RuntimeException   (line 98)\nDUP\nLDC \"recursive logging failure\"\nINVOKESPECIAL java.lang.RuntimeException.\u003cinit\u003e (Ljava/lang/String;)V\nATHROW\nL0: RETURN   (line 100)\nend public void ajc$before$glassbox_agent_ErrorContainmentTest$ErrorMockAspect$9$16ecfe62()\npublic static glassbox.agent.ErrorContainmentTest$ErrorMockAspect aspectOf()    org.aspectj.weaver.AjAttribute$AjSynthetic@3cd8fe\n:\nGETSTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$perSingletonInstance Lglassbox/agent/ErrorContainmentTest$ErrorMockAspect;   (line 1)\nIFNONNULL L0\nNEW org.aspectj.lang.NoAspectBoundException\nDUP\nLDC \"glassbox_agent_ErrorContainmentTest$ErrorMockAspect\"\nGETSTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$initFailureCause Ljava/lang/Throwable;\nINVOKESPECIAL org.aspectj.lang.NoAspectBoundException.\u003cinit\u003e (Ljava/lang/String;Ljava/lang/Throwable;)V\nATHROW\nL0: GETSTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$perSingletonInstance Lglassbox/agent/ErrorContainmentTest$ErrorMockAspect;\nARETURN\nend public static glassbox.agent.ErrorContainmentTest$ErrorMockAspect aspectOf()\npublic static boolean hasAspect()    org.aspectj.weaver.AjAttribute$AjSynthetic@1bd4f6\n:\nGETSTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$perSingletonInstance Lglassbox/agent/ErrorContainmentTest$ErrorMockAspect;   (line 1)\nIFNULL L0\nICONST_1\nIRETURN\nL0: ICONST_0\nIRETURN\nend public static boolean hasAspect()\nprivate static void ajc$postClinit()    org.aspectj.weaver.AjAttribute$AjSynthetic@1febf91\n:\nNEW glassbox.agent.ErrorContainmentTest$ErrorMockAspect   (line 1)\nDUP\nINVOKESPECIAL glassbox.agent.ErrorContainmentTest$ErrorMockAspect.\u003cinit\u003e ()V\nPUTSTATIC glassbox.agent.ErrorContainmentTest$ErrorMockAspect.ajc$perSingletonInstance Lglassbox/agent/ErrorContainmentTest$ErrorMockAspect;\nRETURN\nend private static void ajc$postClinit()\nend public class glassbox.agent.ErrorContainmentTest$ErrorMockAspect\nwhen type munging with (BcelTypeMunger ResolvedTypeMunger(Parent, null))\nwhen weaving aspects\nwhen weaving\nwhen batch building BuildConfig[C:\\devel\\glassbox\\.metadata\\.plugins\\org.eclipse.ajdt.core\\glassboxMonitor.generated.lst] #Files\u003d107\n\nThe source is:\n\npublic class ErrorContainmentTest extends TestCase {\n...\n\tstatic aspect ErrorMockAspect implements NotSerializable {\n...\n\nI will try to narrow this down if the problem isn\u0027t obvious.",
    "Created an attachment (id\u003d47247)\nSelf-contained AJDT project that reproduces the problem\n\nThis uses an already-built version of Glassbox built by a recent but earlier dev build. The failure depends on the effects of at least one other aspect.",
    "By the way, the previous dev build that works is actually from July 28.",
    "i think i know what it\u0027ll be.",
    "...but I would like to recreate it first.  Is that project really standalone?  I get all kinds of errors if I try and build it:\n\neg. \"can\u0027t determine whether missing type javax.servlet.ServletContext is an instance of\"\n\nSo I used the 5meg of jars we have had before from you and stuffed them on the classpath, now it fails with:\n\n\"can\u0027t determine whether missing type glassbox.bootstrap.log.BootstrapLog is an instance of glassbox.util.logging.api.LogOwner\"\n\nare you running with cant find type switched off?  Are you getting this on a full build or an incremental build?",
    "Hi Andy,\n\nI think I didn\u0027t see the missing classpath entries because I ran into this error before I got that far. But I commented out the erroring out part and you are right: if you compile with -Xlint:ignore or turn off cantFindType switched off (although it looks like AJDT no longer lets you configure this) it should work unless you add the extra advice. \n\nI am uploading the glassboxBootstrap.jar that resolves some missing type references. The other jar that you will is the commons http client which I\u0027ll attach too. This is interesting because it isn\u0027t even on the build path of the project when compiling the jar but resolving this pointcut at weave time with the jar on the aspect path seems to require it:\n    args(org.apache.commons.httpclient.HostConfiguration, httpMethod, ..)\n\nThis error happens with both full and incremental builds. ",
    "Created an attachment (id\u003d47339)\nJar for classpath\n\n",
    "Created an attachment (id\u003d47341)\nCommons httpclient jar for classpath\n\n",
    "A simple standalone testcase for the problem:\n\n\u003d\u003d\u003d\u003d\npublic aspect EMA {\n    before() : cflow(execution(* *(..))) {}\n}\n\naspect Goo {\n  declare parents: EMA extends C;\n  public void EMA.m() {}\n}\n\nabstract class C {\n  abstract void m();\n}\n\u003d\u003d\u003d\u003d\n\nthis occurs because of the declare parents targeting the aspect and the aspect has a cflow pointcut in it.  this fix is as expected, coping with null - but it was nice to verify that it is completely safe.  (Fails on 1.5.1a/1.5.2/HEAD)\n\ntestcase and fix committed ... and nothing to do with pipelining ;)",
    "fix available."
  ],
  "commentCreationDates": [
    "2006-08-02T19:26:23+02:00",
    "2006-08-02T20:06:07+02:00",
    "2006-08-02T20:07:45+02:00",
    "2006-08-02T20:14:24+02:00",
    "2006-08-03T16:52:03+02:00",
    "2006-08-03T18:21:09+02:00",
    "2006-08-03T18:23:14+02:00",
    "2006-08-03T18:25:09+02:00",
    "2006-08-04T12:25:34+02:00",
    "2006-08-09T08:53:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.enforceDecpRule1_abstractMethodsImplemented",
          "source": "BcelTypeMunger.java:250"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.mungeNewParent",
          "source": "BcelTypeMunger.java:194"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelTypeMunger.munge",
          "source": "BcelTypeMunger.java:106"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:454"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:119"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1597"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:1548"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:1328"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1124"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.weaveQueuedEntries",
          "source": "AjPipeliningCompilerAdapter.java:451"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.queueForWeaving",
          "source": "AjPipeliningCompilerAdapter.java:389"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjPipeliningCompilerAdapter.afterProcessing",
          "source": "AjPipeliningCompilerAdapter.java:377"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$after$org_aspectj_ajdt_internal_compiler_CompilerAdapter$5$6b855184",
          "source": "CompilerAdapter.aj:98"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:533"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:891"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:246"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:165"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:122"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "152631",
      "date": "2006-08-02T19:26:23+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "152631",
  "bugId": "152631",
  "date": "2006-08-02T19:26:23+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}