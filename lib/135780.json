{
  "comments": [
    "The thisJoinPoint.printString() fails on a 1.1 VM because it relies on a java.lang.ref.SoftReference. I need this to work because we\u0027re using AspectJ on an embedded device that is still using a pre-1.2 VM.\n\nThe problem lies in org.aspectj.runtime.reflect.SignatureImpl. The attached patch fixes it and passes all the tests. I tested the failing program manually on a 1.1 VM, but automating the test would require adding a 1.1 VM to the regression test infrastructure.\n\nSample:\n\npublic aspect Java11Test {\n    before() : execution(* *(..)) {\n        System.out.println(thisJoinPoint.toString());\n    }\n    public static void main(String args[]) {}\n}\n\n\u003eajc -target 1.1 Java11Test.aj\n\n\u003e\\java\\jre1.1.8_010\\bin\\jre -cp .;%CLASSPATH% Java11Test\nException in thread \"main\" java.lang.NoClassDefFoundError: java/lang/ref/SoftRef\nerence\n        at org.aspectj.runtime.reflect.JoinPointImpl$StaticPartImpl.toString(Joi\nnPointImpl.java:43)\n        at org.aspectj.runtime.reflect.JoinPointImpl$StaticPartImpl.toString(Joi\nnPointImpl.java:48)\n        at Java11Test.ajc$before$Java11Test$1$3444dde4(Java11Test.aj:3)\n        at Java11Test.main(Java11Test.aj)",
    "Created an attachment (id\u003d38106)\nPatch to the runtime module (in SignatureImpl) to fix this bug.\n\nThe patch adds a cache private static inner interface and class that encapsulates the dependency on SoftReference. For a 1.1 VM, failure to find the SoftReference class results in disabling caching but the code still functions.",
    "patches integrated.  relevant aspectjrt.jars upgraded in the build system.",
    "fixed"
  ],
  "commentCreationDates": [
    "2006-04-10T04:27:37+02:00",
    "2006-04-10T04:30:24+02:00",
    "2006-05-03T18:19:42+02:00",
    "2006-05-05T11:59:23+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "java/lang/ref/SoftRef erence",
      "elements": [
        {
          "method": "org.aspectj.runtime.reflect.JoinPointImpl$StaticPartImpl.toString",
          "source": "Joi nPointImpl.java:43"
        },
        {
          "method": "org.aspectj.runtime.reflect.JoinPointImpl$StaticPartImpl.toString",
          "source": "Joi nPointImpl.java:48"
        },
        {
          "method": "Java11Test.ajc$before$Java11Test$1$3444dde4",
          "source": "Java11Test.aj:3"
        },
        {
          "method": "Java11Test.main",
          "source": "Java11Test.aj"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "135780",
      "date": "2006-04-10T04:27:37+02:00",
      "product": "AspectJ",
      "component": "Library",
      "severity": "normal"
    }
  ],
  "groupId": "135780",
  "bugId": "135780",
  "date": "2006-04-10T04:27:37+02:00",
  "product": "AspectJ",
  "component": "Library",
  "severity": "normal"
}