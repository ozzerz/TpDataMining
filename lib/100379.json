{
  "comments": [
    "Prepare *.jsp file with code \u003cbody class\u003d\"\" foo\u003d\"\"\u003e\u003c/body\u003e\nClose editor and open JSP Page Source Editor. Click once inside start tag \n\u003cbody\u003e. Check Properties View. You will find two attributes \u0027class\u0027 and no \nattribute \u0027foo\u0027. If you click once more into tag \u003cbody\u003e, most probably \nProperties View will became correct. The same error will take place for any tag \ncontaining a declared attribute followed by a non-declared attribute.\n\nCause: XMLPropertySourceAdapter has error in method \nprivate IPropertyDescriptor[] createPropertyDescriptors()\nwhich finds declaration object for a declared attribute but does not set the \nvariable to null before it proceeds to next attribute, so that if new attribute \nis not declared it is processed with the same (now incorrect) declaration.\nMethod \nprotected void updatePropertyDescriptors()\nuses another algorithm that does not have this error, and since update is \ncalled after each change in selection, Property View becames correct. \n\nProbably related bug: If you have text \u003cbody class\u003d\"\" \u003e\u003c/body\u003e and try to type  \nattribute \u0027foo\u003d\"\"\u0027 after \u0027class\u0027, sometimes you get error message caused by \nexception \njava.lang.ArrayIndexOutOfBoundsException: 34\nat org.eclipse.ui.views.properties.PropertySheetViewer.updateChildrenOf\n(PropertySheetViewer.java:1195)\nWith most probability exception is thrown after first \u0027\"\u0027 symbol.\n\nIn Debug mode I found that when I am in the process of typing \u0027foo\u003d\"\"\u0027, \nrequests from Properties View several times result in creating new \nXMLPropertySourceAdapter instead of updating the existing one. That means that \nseveral times Properties View gets incorrect set of attributes (provided by \ncreatePropertyDescriptors() method) which may cause Properties View failure.",
    "Created an attachment (id\u003d23311)\nPatch\n\nWith patch proposed, the \u0027probably related bug\u0027 that I mentioned in description\nnever was reproduced. ",
    "Phil, Please assess this patch and related code.",
    "Thanks for the detailed explanation, that made it easy to reproduce, and the\nbug/fix is clear.\n\nThe patch tests out fine.\nApplied and checked into HEAD.",
    "moving verified bugs to closed."
  ],
  "commentCreationDates": [
    "2005-06-16T13:30:32+02:00",
    "2005-06-16T13:35:53+02:00",
    "2005-06-16T16:44:59+02:00",
    "2005-06-16T18:48:11+02:00",
    "2005-07-21T05:11:47+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "34",
      "elements": [
        {
          "method": "org.eclipse.ui.views.properties.PropertySheetViewer.updateChildrenOf",
          "source": "PropertySheetViewer.java:1195"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "100379",
      "date": "2005-06-16T13:30:32+02:00",
      "product": "Web Tools",
      "component": "wst.xml",
      "severity": "normal"
    }
  ],
  "groupId": "100379",
  "bugId": "100379",
  "date": "2005-06-16T13:30:32+02:00",
  "product": "Web Tools",
  "component": "wst.xml",
  "severity": "normal"
}