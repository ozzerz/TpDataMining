{
  "comments": [
    "I am using AspectJ 1.1b1 on Linux version 2.4.18-4GB (root@Pentium.suse.de) (gcc\nversion 2.95.3 20010315 (SuSE)) #1 Wed Mar 27 13:57:05 UTC 2002 with java\nversion \"1.4.0_01\".\n\nUsing:\n\najc -Xlint\n-warn:constructorName,packageDefaultMethod,deprecation,maskedCatchBlocks,unusedLocals,unusedImports,syntheticAccess,-classpath\n .:aspectj1.1/lib/aspectjrt.jar CrashAspectJ.java\n\nI get this output / stack trace:\n\ntrouble in:\npublic class CrashAspectJ extends java.lang.Object:\n  public void \u003cinit\u003e():\n                    ALOAD_0     // CrashAspectJ this   (line 1)\n                    INVOKESPECIAL java.lang.Object.\u003cinit\u003e ()V\n    constructor-execution(void CrashAspectJ.\u003cinit\u003e())\n    |               RETURN\n    constructor-execution(void CrashAspectJ.\u003cinit\u003e())\n  end public void \u003cinit\u003e()\n\n  public static void main(String[]):\n    method-execution(void CrashAspectJ.main(java.lang.String[]))\n    |               NEW CrashAspectJ   (line 3)\n    | constructor-call(void CrashAspectJ.\u003cinit\u003e())\n    | |             INVOKESPECIAL CrashAspectJ.\u003cinit\u003e ()V\n    | constructor-call(void CrashAspectJ.\u003cinit\u003e())\n    |               RETURN   (line 4)\n    method-execution(void CrashAspectJ.main(java.lang.String[]))\n  end public static void main(String[])\n\n  public void testCrashMe():\n    method-execution(void CrashAspectJ.testCrashMe())\n    |               NEW Cloned   (line 7)\n    | constructor-call(void Cloned.\u003cinit\u003e())\n    | |             INVOKESPECIAL Cloned.\u003cinit\u003e ()V\n    | constructor-call(void Cloned.\u003cinit\u003e())\n    |               RETURN   (line 8)\n    method-execution(void CrashAspectJ.testCrashMe())\n  end public void testCrashMe()\nend public class CrashAspectJ\nException thrown from AspectJ 1.1b1\n\nPlease email to us as follows:\n       to: jitterbug@aspectj.org\n  subject: top stack trace File:line, e.g., \"SomeFile.java:243\"\n  message: copy the entire stack trace.\n\nYour message can also request follow-up or provide a workaround.\nTo make the bug a priority, please include a test program.\n\nYou may search for duplicate bugs (i.e., known workarounds):\n\nhttp://aspectj.org/bugs\nhttp://aspectj.org/bugs/incoming?expression\u003dSomeFile.java:243\n\nUnhandled kind of new\nUnhandled kind of new\njava.lang.RuntimeException: Unhandled kind of new\n        at org.aspectj.weaver.bcel.BcelShadow.deleteNewAndDup(BcelShadow.java:164)\n        at org.aspectj.weaver.bcel.BcelShadow.prepareSelf0(BcelShadow.java:121)\n        at org.aspectj.weaver.Shadow.implement(Shadow.java:211)\n        at\norg.aspectj.weaver.bcel.BcelClassWeaver.implement(BcelClassWeaver.java:245)\n        at\norg.aspectj.weaver.bcel.BcelClassWeaver.matchAndImplement(BcelClassWeaver.java:154)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:120)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:261)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:229)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerateClassFiles(AjBuildManager.java:371)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:127)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:75)\n        at org.aspectj.tools.ajc.Main.run(Main.java:144)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:94)\n        at org.aspectj.tools.ajc.Main.main(Main.java:55)\n\n\nThis program should reproduce the problem:\n\npublic class CrashAspectJ {\n    public static void main(String args[]) {\n        new CrashAspectJ();\n    }\n\n    public void testCrashMe() {\n        new Cloned();\n    }\n}\n\nclass Cloned implements Cloneable {\n}\n\naspect ClonableContract {\n    after(Cloneable newObj) throws NoSuchMethodException:\n    this(newObj) \u0026\u0026 call(Cloneable+.new(..)) {\n        System.out.println(\"Clonable check for \" + newObj);\n    }\n}\n\nWorkaround: The program does not crash if I assign to a variable instead of\ncalling the constructor and not assigning the created object, i.e. if I write\nthe above method as:\n\n    public void testCrashMe() {\n        Cloned c \u003d new Cloned();\n    }\n\nI wrote it without the local variable to get rid of the warning for an unused\nlocal variable. The program should just print a message for the constructor of\nsomething implementing Cloneable.",
    "The problem does not occur with AspectJ1.1b2.",
    "fixed in 1.1beta2"
  ],
  "commentCreationDates": [
    "2003-01-03T18:35:04+01:00",
    "2003-01-06T19:01:32+01:00",
    "2003-01-07T21:11:55+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Unhandled kind of new",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.deleteNewAndDup",
          "source": "BcelShadow.java:164"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.prepareSelf0",
          "source": "BcelShadow.java:121"
        },
        {
          "method": "org.aspectj.weaver.Shadow.implement",
          "source": "Shadow.java:211"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.implement",
          "source": "BcelClassWeaver.java:245"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.matchAndImplement",
          "source": "BcelClassWeaver.java:154"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:120"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:261"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:229"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerateClassFiles",
          "source": "AjBuildManager.java:371"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:127"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:75"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:144"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:94"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "28978",
      "date": "2003-01-03T18:35:04+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "minor"
    }
  ],
  "groupId": "28978",
  "bugId": "28978",
  "date": "2003-01-03T18:35:04+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "minor"
}