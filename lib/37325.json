{
  "comments": [
    "Version:\nAspectJ Compiler 1.1rc1\n\nFor very large source files, i.e number of lines exceeds 32762 lines (!)\nthe ajc fails with a NullPointerException. One might ask if anyone would\nwrite such a large class but this could be the case with generated java\ncode...\n\nTo reproduce:\n1: Create the aspect file:\n*** File: A.aj\nimport org.aspectj.lang.JoinPoint;\naspect A  {\n\n    pointcut executionAll() : (execution(* *.*(..)));\n\n    Object around(): executionAll() {\n     report(\"DEBUG TRACE:\",thisJoinPoint);\n     return proceed();\n    }\n    private void report(String t, JoinPoint x)\n    {    \n      System.out.println(t + x.toString());\n    }\n}\n*** End of A.aj\n2. Create the Test.java file. Note you must insert an enormous amount of \ncomment lines ... \n*** File: Test.java\npublic class Test {\n// Line 2\n// INSERT something line Short.MAX_VALUE (32767) comment lines here \n// ...\n// Line \u003e 32768\npublic String getBug()\n{\n  return \"test\";\n}\n\n}\n*** End of Test.java\n\n3. Compile\najc -sourceroots .\nStack trace:\ntrouble in: \npublic class Test extends java.lang.Object:\n  public static final org.aspectj.lang.JoinPoint$StaticPart ajc$tjp_0\n  public void \u003cinit\u003e():\n                    ALOAD_0     // Test this   (line 1)\n                    INVOKESPECIAL java.lang.Object.\u003cinit\u003e ()V\n    constructor-execution(void Test.\u003cinit\u003e())\n    |               RETURN\n    constructor-execution(void Test.\u003cinit\u003e())\n  end public void \u003cinit\u003e()\n\n  public String getBug():\n                    GETSTATIC Test.ajc$tjp_0 \nLorg/aspectj/lang/JoinPoint$StaticPart;\n                    ALOAD_0\n                    ALOAD_0\n                    BIPUSH 0\n                    ANEWARRAY java.lang.Object\n                    ASTORE_2\n                    ALOAD_2\n                    INVOKESTATIC org.aspectj.runtime.reflect.Factory.makeJP \n(Lorg/aspectj/lang/JoinPoint$StaticPart;Ljava/lang/Object;Ljava/lang/Object;\n[Ljava/lang/Object;)Lorg/aspectj/lang/JoinPoint;\n                    ASTORE_1\n    method-execution(java.lang.String Test.getBug())\n    |               INVOKESTATIC A.aspectOf ()LA;\n    |               ACONST_NULL\n    |               ALOAD_1\n    |               ASTORE 5\n    |               ASTORE 4\n    |               ASTORE_3\n    | advice-execution(java.lang.Object A.ajc$around$A$77\n(org.aspectj.runtime.internal.AroundClosure, org.aspectj.lang.JoinPoint))\n    | |             ALOAD_3   (line 7)\n    | |             LDC \"DEBUG TRACE:\"\n    | |             ALOAD 5\n    | |             INVOKESTATIC A.ajc$inlineAccessMethod$A$A$report \n(LA;Ljava/lang/String;Lorg/aspectj/lang/JoinPoint;)V\n    | |             ALOAD 4   (line 8)\n    | |             ASTORE 6\n    | |             ALOAD_0\n    | |             ALOAD_1\n    | |             INVOKESTATIC Test.getBug_aroundBody0 \n(LTest;Lorg/aspectj/lang/JoinPoint;)Ljava/lang/String;\n    | |             GOTO L0\n    | advice-execution(java.lang.Object A.ajc$around$A$77\n(org.aspectj.runtime.internal.AroundClosure, org.aspectj.lang.JoinPoint))\n    |           L0: NOP\n    |               CHECKCAST java.lang.String\n    |               ARETURN\n    method-execution(java.lang.String Test.getBug())\n  end public String getBug()\n\n  static final String getBug_aroundBody0(Test, org.aspectj.lang.JoinPoint):\n                    LDC \"HHHH\"   (line 32774)\n                    ARETURN\n  end static final String getBug_aroundBody0(Test, org.aspectj.lang.JoinPoint)\nend public class Test\nABORT\nException thrown from AspectJ 1.1rc1\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack, \ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n\tat org.aspectj.weaver.bcel.Utility.createConstant(Utility.java:334)\n\tat org.aspectj.weaver.bcel.LazyClassGen.initializeTjp\n(LazyClassGen.java:472)\n\tat org.aspectj.weaver.bcel.LazyClassGen.initializeAllTjps\n(LazyClassGen.java:443)\n\tat org.aspectj.weaver.bcel.LazyClassGen.addAjcInitializers\n(LazyClassGen.java:401)\n\tat org.aspectj.weaver.bcel.LazyClassGen.writeBack(LazyClassGen.java:155)\n\tat org.aspectj.weaver.bcel.LazyClassGen.getJavaClass\n(LazyClassGen.java:169)\n\tat org.aspectj.weaver.bcel.BcelWeaver.dump(BcelWeaver.java:376)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:323)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:302)\n\tat org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:265)\n\tat \norg.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerateClassFiles\n(AjBuildManager.java:394)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild\n(AjBuildManager.java:149)\n\tat org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n\tat org.aspectj.tools.ajc.Main.run(Main.java:216)\n\tat org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n\tat org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n1 fail|abort\nSignal 127\n\nReason:\nThe org.aspectj.weaver.bcel.Utility.createConstant branches dependent on\nthe source line number. When the number is greater than Short.MAX_VALUE\na NullPointerException is thrown because of a null \"fact.getClassGen()\".",
    "fixed in tree with test in bugs/LongFile.java"
  ],
  "commentCreationDates": [
    "2003-05-07T16:23:05+02:00",
    "2003-05-11T20:53:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.Utility.createConstant",
          "source": "Utility.java:334"
        },
        {
          "method": "org.aspectj.weaver.bcel.LazyClassGen.initializeTjp",
          "source": "LazyClassGen.java:472"
        },
        {
          "method": "org.aspectj.weaver.bcel.LazyClassGen.initializeAllTjps",
          "source": "LazyClassGen.java:443"
        },
        {
          "method": "org.aspectj.weaver.bcel.LazyClassGen.addAjcInitializers",
          "source": "LazyClassGen.java:401"
        },
        {
          "method": "org.aspectj.weaver.bcel.LazyClassGen.writeBack",
          "source": "LazyClassGen.java:155"
        },
        {
          "method": "org.aspectj.weaver.bcel.LazyClassGen.getJavaClass",
          "source": "LazyClassGen.java:169"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.dump",
          "source": "BcelWeaver.java:376"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:323"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:302"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:265"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerateClassFiles",
          "source": "AjBuildManager.java:394"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:149"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "37325",
      "date": "2003-05-07T16:23:05+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "major"
    }
  ],
  "groupId": "37325",
  "bugId": "37325",
  "date": "2003-05-07T16:23:05+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "major"
}