{
  "comments": [
    "3.3 pre M1\n\nWhen you select all of the entries in a tree and then change the parents of those entries you will get the following exception when you update the list.\n\nI will attach and example project.\n\nThread [main] (Suspended (exception Assert$AssertionFailedException))\t\n\tAssert.isNotNull(Object, String) line: 150\t\n\tAssert.isNotNull(Object) line: 126\t\n\tTreeViewer(AbstractTreeViewer).getTreePathFromItem(Item) line: 2544\t\n\tTreeViewer(AbstractTreeViewer).getSelection() line: 2567\t\n\tTreeViewer(StructuredViewer).handleSelect(SelectionEvent) line: 1128\t\n\tStructuredViewer$4.widgetSelected(SelectionEvent) line: 1154\t\n\tOpenStrategy.fireSelectionEvent(SelectionEvent) line: 213\t\n\tOpenStrategy.access$3(OpenStrategy, SelectionEvent) line: 207\t\n\tOpenStrategy$1.handleEvent(Event) line: 374\t\n\tEventTable.sendEvent(Event) line: 66\t\n\tTree(Widget).sendEvent(Event) line: 928\t\n\tTree(Widget).sendEvent(int, Event, boolean) line: 952\t\n\tTree(Widget).sendEvent(int, Event) line: 937\t\n\tTreeItem.setExpanded(boolean) line: 1148\t\n\tTreeViewer.setExpanded(Item, boolean) line: 647\t\n\tTreeViewer(AbstractTreeViewer).updateChildren(Widget, Object, Object[], boolean) line: 2414\t\n\tTreeViewer(AbstractTreeViewer).internalRefreshStruct(Widget, Object, boolean) line: 1640\t\n\tTreeViewer.internalRefreshStruct(Widget, Object, boolean) line: 955\t\n\tTreeViewer(AbstractTreeViewer).internalRefresh(Widget, Object, boolean, boolean) line: 1616\t\n\tTreeViewer(AbstractTreeViewer).internalRefresh(Object, boolean) line: 1571\t\n\tTreeViewer(AbstractTreeViewer).internalRefresh(Object) line: 1557\t\n\tStructuredViewer$7.run() line: 1388\t\n\tTreeViewer(StructuredViewer).preservingSelection(Runnable) line: 1323\t\n\tTreeViewer(StructuredViewer).refresh(Object) line: 1386\t\n\tTreeViewer(StructuredViewer).refresh() line: 1345\t\n\tSelectionTest$1.widgetSelected(SelectionEvent) line: 74\t\n\tTypedListener.handleEvent(Event) line: 90\t\n\tEventTable.sendEvent(Event) line: 66\t\n\tButton(Widget).sendEvent(Event) line: 928\t\n\tDisplay.runDeferredEvents() line: 3348\t\n\tDisplay.readAndDispatch() line: 2968\t\n\tSelectionTest.main(String[]) line: 98",
    "Created an attachment (id\u003d44991)\nTest application\n\n",
    "3.2.1 candidate",
    "This was not an issue in 3.1 as we were not trying to look up using TreePaths in 3.1. \n\nThe issue is that when we update the struct if there is more than one item a setSelection gets called on the incomplete tree (i.e. we have not finished the associations).\n\nBefore this didn\u0027t matter as we were using getSelection from widget which drops null data.\n\nI think the answer is to drop the assert.isNotNull from getSelection but I want Boris\u0027s opinion",
    "Created an attachment (id\u003d44995)\nPatch\n\nHere is a patch to make the behaviour more consistent with getSelectionFromWidget()",
    "Created an attachment (id\u003d45006)\nUpdated patch\n\nAfter talking with Boris we both agreed that it was better to do the expansion after update rather than in the loop and leave the behaviour of getTreePathForItem as it is.",
    "Created an attachment (id\u003d45020)\nyet another patch\n\nTod, looking at the patch again I realized that what we were doing was not the minimal solution - there is no need to create ArrayLists etc.  I would like to release the updated patch into HEAD and TARGET_321 if that\u0027s ok with you.",
    "Your patch looks better Boris. Lets use that.",
    "Fixed in 3.2.1 and 3.3 builds \u003e 20060621",
    "Verified in 20060830-0800",
    "Because modify the code?Cbirt has some incorrect behaviours.When we refresh a TreeViewer?Cthe select TreeItem \u0027s parent will setExpanded and sent a selection event, and the select TreeItem lost focus. I don\u0027t know why. But under eclipse 3.2?Cit runs correct.\n\nI set \"new Exception().printStackTrace( );\" at the TreeItem class at setExpanded method:\t\n\njava.lang.Exception\n\tat org.eclipse.swt.widgets.TreeItem.setExpanded(TreeItem.java:1156)\n\tat org.eclipse.jface.viewers.TreeViewer.setExpanded(TreeViewer.java:504)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.updateChildren(AbstractTreeViewer.java:2521)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct(AbstractTreeViewer.java:1717)\n\tat org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct(TreeViewer.java:841)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct(AbstractTreeViewer.java:1724)\n\tat org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct(TreeViewer.java:841)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1692)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1648)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1634)\n\tat org.eclipse.jface.viewers.StructuredViewer$7.run(StructuredViewer.java:1391)\n\tat org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1326)\n\tat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1389)\n\tat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1348)\n\tat org.eclipse.birt.report.designer.internal.ui.views.outline.DesignerOutlinePage$9.run(DesignerOutlinePage.java:574)",
    "By the way , the TreeViewer\u0027s every TreeItem\u0027s getData() !\u003d null , so under eclipse 3.2,it\u0027s not need setExpanded() always.But under eclipse 3.3?Cit\u0027s not.",
    "Chao this sounds like a different problem. Please log a new bug with some steps to replicate.",
    "I have broken this new issue into Bug 161036."
  ],
  "commentCreationDates": [
    "2006-06-21T14:44:49+02:00",
    "2006-06-21T14:45:56+02:00",
    "2006-06-21T15:37:09+02:00",
    "2006-06-21T15:45:31+02:00",
    "2006-06-21T15:56:33+02:00",
    "2006-06-21T17:38:48+02:00",
    "2006-06-21T21:03:55+02:00",
    "2006-06-21T22:03:18+02:00",
    "2006-06-21T22:14:44+02:00",
    "2006-08-31T16:16:11+02:00",
    "2006-10-16T05:07:14+02:00",
    "2006-10-16T05:41:21+02:00",
    "2006-10-16T13:50:25+02:00",
    "2006-10-16T13:53:46+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.TreeItem.setExpanded",
          "source": "TreeItem.java:1156"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.setExpanded",
          "source": "TreeViewer.java:504"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.updateChildren",
          "source": "AbstractTreeViewer.java:2521"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct",
          "source": "AbstractTreeViewer.java:1717"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct",
          "source": "TreeViewer.java:841"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct",
          "source": "AbstractTreeViewer.java:1724"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct",
          "source": "TreeViewer.java:841"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh",
          "source": "AbstractTreeViewer.java:1692"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh",
          "source": "AbstractTreeViewer.java:1648"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh",
          "source": "AbstractTreeViewer.java:1634"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$7.run",
          "source": "StructuredViewer.java:1391"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:1326"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
          "source": "StructuredViewer.java:1389"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
          "source": "StructuredViewer.java:1348"
        },
        {
          "method": "org.eclipse.birt.report.designer.internal.ui.views.outline.DesignerOutlinePage$9.run",
          "source": "DesignerOutlinePage.java:574"
        }
      ],
      "number": 0,
      "commentIndex": 10,
      "bugId": "148025",
      "date": "2006-10-16T05:07:14+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "148025",
  "bugId": "148025",
  "date": "2006-06-21T14:44:49+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}