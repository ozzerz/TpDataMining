{
  "comments": [
    "Using RC2 I have one source file which, when using \"toggle comment\" over a\nmethod always gives the error below. It aborts having commented \"//\" the first\nline, but not the rest. The part that causes it to be \"normal\" severity is tha\nany attempt to remove that line\u0027s comment or continue typing causes additional\npairs of \"Unhandled event loop exception\" and the same \"Assertion failure\"s to\nappear in the error log. Closing the file\u0027s tab without saving solves the\nproblem until you try and toggle the same thing again. \n\nI will see if I can create a typical case in which this always fails...\n\nException and build data follows:\n\norg.eclipse.jface.util.Assert$AssertionFailedException: Assertion failed:\nat org.eclipse.jface.util.Assert.isTrue(Assert.java:180)\nat org.eclipse.jface.util.Assert.isTrue(Assert.java:165)\nat\norg.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findDifferencesUkkonen(RangeDifferencer.java:167)\nat\norg.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findDifferences(RangeDifferencer.java:79)\nat\norg.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findRanges(RangeDifferencer.java:221)\nat\norg.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findRanges(RangeDifferencer.java:206)\nat\norg.eclipse.ui.internal.texteditor.quickdiff.DocumentLineDiffer.handleChanged(DocumentLineDiffer.java:885)\nat\norg.eclipse.ui.internal.texteditor.quickdiff.DocumentLineDiffer.documentChanged(DocumentLineDiffer.java:724)\nat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2(AbstractDocument.java:724)\nat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged(AbstractDocument.java:687)\nat\norg.eclipse.jface.text.AbstractDocument.doFireDocumentChanged(AbstractDocument.java:672)\nat\norg.eclipse.jface.text.AbstractDocument.fireDocumentChanged(AbstractDocument.java:749)\nat org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:1104)\nat\norg.eclipse.jdt.internal.ui.javaeditor.PartiallySynchronizedDocument.replace(PartiallySynchronizedDocument.java:111)\nat org.eclipse.jface.text.AbstractDocument.replace(AbstractDocument.java:1111)\nat\norg.eclipse.jdt.internal.ui.javaeditor.PartiallySynchronizedDocument.replace(PartiallySynchronizedDocument.java:102)\nat org.eclipse.jface.text.TextViewer.shiftRight(TextViewer.java:3854)\nat org.eclipse.jface.text.TextViewer.shift(TextViewer.java:3806)\nat org.eclipse.jface.text.TextViewer.doOperation(TextViewer.java:3534)\nat org.eclipse.jface.text.source.SourceViewer.doOperation(SourceViewer.java:801)\nat\norg.eclipse.jface.text.source.projection.ProjectionViewer.doOperation(ProjectionViewer.java:1472)\nat\norg.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.doOperation(JavaSourceViewer.java:177)\nat\norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:211)\nat\norg.eclipse.jdt.internal.ui.javaeditor.ToggleCommentAction$1.run(ToggleCommentAction.java:106)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat\norg.eclipse.jdt.internal.ui.javaeditor.ToggleCommentAction.run(ToggleCommentAction.java:104)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\nat org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:182)\nat\norg.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:108)\nat org.eclipse.core.commands.Command.execute(Command.java:311)\nat\norg.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:396)\nat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:459)\nat org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:781)\nat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:828)\nat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:550)\nat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:493)\nat\norg.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:117)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Display.filterEvent(Display.java:1237)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1020)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1045)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1030)\nat org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1057)\nat org.eclipse.swt.widgets.Widget.gtk_key_press_event(Widget.java:621)\nat org.eclipse.swt.widgets.Control.gtk_key_press_event(Control.java:1964)\nat org.eclipse.swt.widgets.Composite.gtk_key_press_event(Composite.java:560)\nat org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1359)\nat org.eclipse.swt.widgets.Display.windowProc(Display.java:3412)\nat org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)\nat org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:4777)\nat org.eclipse.swt.widgets.Display.eventProc(Display.java:1052)\nat org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)\nat org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1158)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2554)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\nat org.eclipse.core.launcher.Main.run(Main.java:973)\nat org.eclipse.core.launcher.Main.main(Main.java:948)\n\neclipse.buildId\u003dI20050527-1300\njava.version\u003d1.5.0\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_GB\nCommand-line arguments:  -os linux -ws gtk -arch x86\nThis is a continuation of log file\n/home/tdm25/eclipse-workspace/.metadata/.bak_0.log\nCreated Time: 2005-06-08 10:44:22.700",
    "Sorry, i believe this is RC3 (Build id: I20050617-1618), not RC2.",
    "Created an attachment (id\u003d23990)\nSource file in which problem occurs, but poss not repeatable outside project\n",
    "I\u0027ve attached the file for which it occurs - unfortunately, I cannot get it to\nbe repeatable on the file in isolation. It in fact requires two steps, which\nwhen used within my open project are repeatable.\n\n1) Toggle comment on as below, i.e to get:\n\n//\t/**\n//\t * This is \u003ci\u003e\u003cb\u003efirst\u003c/b\u003e\u003c/i\u003e hash SHA1\n//\t */\n//        public static final SecureHash FIRST_HASH \u003d\n//\t    new SHA1Hash(new byte[]{Byte.MIN_VALUE, Byte.MIN_VALUE,\n//\t        Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE,\n//\t        Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE,\n//\t        Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE,\n//\t        Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE, Byte.MIN_VALUE,\n//\t        Byte.MIN_VALUE, Byte.MIN_VALUE}, true);\n//\n//\t/**\n//\t * This is \u003ci\u003e\u003cb\u003elast\u003c/b\u003e\u003c/i\u003e hash SHA1\n//\t */\n//        public static final SecureHash LAST_HASH \u003d\n//\t    new SHA1Hash(new byte[]{Byte.MAX_VALUE, Byte.MAX_VALUE,\n//\t        Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE,\n//\t        Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE,\n//\t        Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE,\n//\t        Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE, Byte.MAX_VALUE,\n//\t        Byte.MAX_VALUE, Byte.MAX_VALUE}, true);\n\n2) Toggle comment on as below, to try to get:\n\n//\t/**\n//\t * Returns the implementation\u0027s NULL hash\n//\t * (typically all zeroes).\n//\t * @return the implementation\u0027s null hash\n//\t */\n//\tpublic SecureHash nullHash() {\n//\t\treturn NULL_HASH;\n//\t}\n\nThe toggling fails, leaving the first line commented, the rest not.\nThe only thing I can think of is that NULL_HASH is defined just previous to the\nfirst now-commented region. Commenting in/out other combinations or orders of\nmethods or lines all work fine.\n",
    "Tom, please investigate.\n",
    "I cannot reproduce using RC4. This seems to be a duplicate of bug 99490 for\nwhich we have no steps yet but that has occurred to several reporters independently.\n\nThe exception in RangeDifferencer is IMO only the symptom of the corrupt\ndocument structures.\n\nMarking as dup.\n\n*** This bug has been marked as a duplicate of 99490 ***"
  ],
  "commentCreationDates": [
    "2005-06-25T14:44:15+02:00",
    "2005-06-25T14:49:21+02:00",
    "2005-06-25T15:00:57+02:00",
    "2005-06-25T15:01:56+02:00",
    "2005-06-27T11:38:38+02:00",
    "2005-06-27T11:49:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jface.util.Assert$AssertionFailedException",
      "message": "Assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.jface.util.Assert.isTrue",
          "source": "Assert.java:180"
        },
        {
          "method": "org.eclipse.jface.util.Assert.isTrue",
          "source": "Assert.java:165"
        },
        {
          "method": "org.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findDifferencesUkkonen",
          "source": "RangeDifferencer.java:167"
        },
        {
          "method": "org.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findDifferences",
          "source": "RangeDifferencer.java:79"
        },
        {
          "method": "org.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findRanges",
          "source": "RangeDifferencer.java:221"
        },
        {
          "method": "org.eclipse.ui.internal.texteditor.quickdiff.compare.rangedifferencer.RangeDifferencer.findRanges",
          "source": "RangeDifferencer.java:206"
        },
        {
          "method": "org.eclipse.ui.internal.texteditor.quickdiff.DocumentLineDiffer.handleChanged",
          "source": "DocumentLineDiffer.java:885"
        },
        {
          "method": "org.eclipse.ui.internal.texteditor.quickdiff.DocumentLineDiffer.documentChanged",
          "source": "DocumentLineDiffer.java:724"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged2",
          "source": "AbstractDocument.java:724"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:687"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.doFireDocumentChanged",
          "source": "AbstractDocument.java:672"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.fireDocumentChanged",
          "source": "AbstractDocument.java:749"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.replace",
          "source": "AbstractDocument.java:1104"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.PartiallySynchronizedDocument.replace",
          "source": "PartiallySynchronizedDocument.java:111"
        },
        {
          "method": "org.eclipse.jface.text.AbstractDocument.replace",
          "source": "AbstractDocument.java:1111"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.PartiallySynchronizedDocument.replace",
          "source": "PartiallySynchronizedDocument.java:102"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.shiftRight",
          "source": "TextViewer.java:3854"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.shift",
          "source": "TextViewer.java:3806"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.doOperation",
          "source": "TextViewer.java:3534"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.doOperation",
          "source": "SourceViewer.java:801"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionViewer.doOperation",
          "source": "ProjectionViewer.java:1472"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.doOperation",
          "source": "JavaSourceViewer.java:177"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation",
          "source": "CompilationUnitEditor.java:211"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ToggleCommentAction$1.run",
          "source": "ToggleCommentAction.java:106"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ToggleCommentAction.run",
          "source": "ToggleCommentAction.java:104"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:996"
        },
        {
          "method": "org.eclipse.ui.commands.ActionHandler.execute",
          "source": "ActionHandler.java:182"
        },
        {
          "method": "org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute",
          "source": "LegacyHandlerWrapper.java:108"
        },
        {
          "method": "org.eclipse.core.commands.Command.execute",
          "source": "Command.java:311"
        },
        {
          "method": "org.eclipse.core.commands.ParameterizedCommand.execute",
          "source": "ParameterizedCommand.java:396"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand",
          "source": "WorkbenchKeyboard.java:459"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.press",
          "source": "WorkbenchKeyboard.java:781"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:828"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java:550"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3",
          "source": "WorkbenchKeyboard.java:493"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent",
          "source": "WorkbenchKeyboard.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:1237"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1020"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1045"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1030"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendKeyEvent",
          "source": "Widget.java:1057"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.gtk_key_press_event",
          "source": "Widget.java:621"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.gtk_key_press_event",
          "source": "Control.java:1964"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.gtk_key_press_event",
          "source": "Composite.java:560"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.windowProc",
          "source": "Widget.java:1359"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3412"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS._gtk_main_do_event",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.gtk_main_do_event",
          "source": "OS.java:4777"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.eventProc",
          "source": "Display.java:1052"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS._g_main_context_iteration",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.gtk.OS.g_main_context_iteration",
          "source": "OS.java:1158"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2554"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "101762",
      "duplicateId": "99490",
      "date": "2005-06-25T14:44:15+02:00",
      "product": "JDT",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "99490",
  "bugId": "101762",
  "duplicateId": "99490",
  "date": "2005-06-25T14:44:15+02:00",
  "product": "JDT",
  "component": "Text",
  "severity": "normal"
}