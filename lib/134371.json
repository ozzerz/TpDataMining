{
  "comments": [
    "I got this exception while working on a static inner aspect. A full rebuild avoided the problem. \n\njava.lang.ClassCastException: org.aspectj.weaver.MissingResolvedTypeWithKnownSignature\n\tat org.aspectj.ajdt.internal.core.builder.AjState.recordClassFile(AjState.java:774)\n\tat org.aspectj.ajdt.internal.core.builder.AjState.noteResult(AjState.java:627)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager$3.acceptResult(AjBuildManager.java:867)\n\tat org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterProcessing(AjCompilerAdapter.java:206)\n\tat org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$4$6b855184(CompilerAdapter.aj:90)\n\tat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:528)\n\tat org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:845)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:266)\n\tat org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:168)\n\tat org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\n\tat org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)",
    "I got a similar exception (ClassCastException thrown in recordClassFile) when using a perthis(..) aspect.  A full rebuild fixed it.\n\nHowever this aspect, even after it builds, is causing me problems with Spring.  Basically, I\u0027m using Spring AOP to decorate the object with transaction semantics, and also using a plain-old compile-time aspect (this one), and I think they are interacting poorly.  I don\u0027t know if perthis() is part of the problem.  I\u0027ll probably open up another bug if it comes up.\n\n(In reply to comment #0)\n\u003e I got this exception while working on a static inner aspect. A full rebuild\n\u003e avoided the problem. \n\u003e \n\u003e java.lang.ClassCastException:\n\u003e org.aspectj.weaver.MissingResolvedTypeWithKnownSignature\n\u003e         at\n\u003e org.aspectj.ajdt.internal.core.builder.AjState.recordClassFile(AjState.java:774)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.core.builder.AjState.noteResult(AjState.java:627)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.core.builder.AjBuildManager$3.acceptResult(AjBuildManager.java:867)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterProcessing(AjCompilerAdapter.java:206)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$4$6b855184(CompilerAdapter.aj:90)\n\u003e         at\n\u003e org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:528)\n\u003e         at\n\u003e org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:845)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:266)\n\u003e         at\n\u003e org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:168)\n\u003e         at\n\u003e org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)\n\u003e         at\n\u003e org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)\n\u003e \n\n",
    "Created an attachment (id\u003d39519)\npatch containing failing testcase\n\nWhilst trying to recreate another bug I stumbled into this one. The attached patch should be applied to the tests project and contains a failing testcase.",
    "nice little testcase ;)  initially looks like just an unnecessary cast...",
    "interesting that the \u0027missing type\u0027 is actually one generated during weaving:\n\nA$ajcMightHaveAspect\n\nin Helens case (caused by the PerThis).  ",
    "Created an attachment (id\u003d39642)\npatch containing proposed fix\n\nApply the attached patch to the org.aspectj.ajdt.core project.\n\nFrom discussions with Andy......the fix involves removing the unnecessary cast along with putting the A$ajcMightHaveAspect into the tMap within the world. It was placed in the typeXtoBinding map in the EclipseFactory but wasn\u0027t recorded in the world (Note that the first time through on the full build the A$ajcMightHaveAspect isn\u0027t generated because of the \"abstract\" keyword. When \"abstract\" is removed we generate this class.) This fix means that in all the tests the check \"!newResolvedType.isMissing()\" (AjState.java:784) returns true.",
    "test and fix committed."
  ],
  "commentCreationDates": [
    "2006-04-01T18:05:56+02:00",
    "2006-04-17T23:57:39+02:00",
    "2006-04-26T15:09:00+02:00",
    "2006-04-26T17:35:40+02:00",
    "2006-04-26T17:39:04+02:00",
    "2006-04-27T10:39:24+02:00",
    "2006-05-05T11:49:08+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.aspectj.weaver.MissingResolvedTypeWithKnownSignature",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjState.recordClassFile",
          "source": "AjState.java:774"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjState.noteResult",
          "source": "AjState.java:627"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$3.acceptResult",
          "source": "AjBuildManager.java:867"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterProcessing",
          "source": "AjCompilerAdapter.java:206"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$4$6b855184",
          "source": "CompilerAdapter.aj:90"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:528"
        },
        {
          "method": "org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:329"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation",
          "source": "AjBuildManager.java:845"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild",
          "source": "AjBuildManager.java:266"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild",
          "source": "AjBuildManager.java:168"
        },
        {
          "method": "org.aspectj.ajde.internal.CompilerAdapter.compile",
          "source": "CompilerAdapter.java:117"
        },
        {
          "method": "org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run",
          "source": "AspectJBuildManager.java:191"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "134371",
      "date": "2006-04-01T18:05:56+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "134371",
  "bugId": "134371",
  "date": "2006-04-01T18:05:56+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}