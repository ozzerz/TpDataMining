{
  "comments": [
    "3.0.1: M200408250800\n\nSometimes I get the IOOB exception when pasting java code.\nI\u0027ve seen that on 3.0 but not on 3.1.\nHowever, it reappeared after switching back tp 3.0.1.\n\n\n!ENTRY org.eclipse.ui 4 4 Aug 27, 2004 16:46:32.233\n!MESSAGE Unhandled event loop exception\nUnhandled event loop exception\nReason:\n\n!ENTRY org.eclipse.ui 4 0 Aug 27, 2004 16:46:32.237\n!MESSAGE Index out of bounds\n!STACK 0\njava.lang.IllegalArgumentException: Index out of bounds\n\tat org.eclipse.swt.SWT.error(SWT.java:2677)\n\tat org.eclipse.swt.SWT.error(SWT.java:2616)\n\tat org.eclipse.swt.SWT.error(SWT.java:2587)\n\tat org.eclipse.swt.custom.StyledText.getLocationAtOffset(StyledText.java:3816)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.JavaEditor$MouseClickListener.getMinimumLocation(JavaEditor.java:\n1341)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor$MouseClickListener.paintControl(JavaEditor.java:\n1318)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:82)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1196)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1220)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1205)\n\tat org.eclipse.swt.widgets.Control.drawWidget(Control.java:546)\n\tat org.eclipse.swt.widgets.Widget.kEventControlDraw(Widget.java:867)\n\tat org.eclipse.swt.widgets.Canvas.kEventControlDraw(Canvas.java:105)\n\tat org.eclipse.swt.widgets.Widget.controlProc(Widget.java:314)\n\tat org.eclipse.swt.widgets.Display.controlProc(Display.java:746)\n\tat org.eclipse.swt.internal.carbon.OS.ShowWindow(Native Method)\n\tat org.eclipse.swt.widgets.Shell.setWindowVisible(Shell.java:1321)\n\tat org.eclipse.swt.widgets.Shell.setVisible(Shell.java:1290)\n\tat org.eclipse.swt.widgets.Shell.open(Shell.java:1010)\n\tat org.eclipse.jface.window.Window.open(Window.java:644)\n\tat org.eclipse.jface.dialogs.ErrorDialog.open(ErrorDialog.java:257)\n\tat org.eclipse.jface.dialogs.ErrorDialog.openError(ErrorDialog.java:319)\n\tat org.eclipse.jface.dialogs.ErrorDialog.openError(ErrorDialog.java:285)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.logException(WorkbenchKeyboard.java:664)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:932)\n\tat \norg.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:\n548)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:496)\n\tat org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:261)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Display.filterEvent(Display.java:919)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1195)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1220)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1205)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1994)\n\tat org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1989)\n\tat org.eclipse.swt.widgets.Control.kEventTextInputUnicodeForKeyEvent(Control.java:1509)\n\tat org.eclipse.swt.widgets.Composite.kEventTextInputUnicodeForKeyEvent(Composite.java:392)\n\tat org.eclipse.swt.widgets.Widget.textInputProc(Widget.java:1607)\n\tat org.eclipse.swt.widgets.Display.textInputProc(Display.java:3310)\n\tat org.eclipse.swt.internal.carbon.OS.SendEventToEventTarget(Native Method)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2523)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:184)\n\tat org.eclipse.core.launcher.Main.run(Main.java:680)\n\tat org.eclipse.core.launcher.Main.main(Main.java:664)\nIndex out of bounds",
    "Sorry, I was wrong, the IOOB exception happens when cutting java text to clipboard.",
    "Created an attachment (id\u003d14209)\nErrorDialog appears immediately after pressing Command-X\n",
    "Before doing anything we need to know why the key press failed. Unfortunately we\ndo not have the log for this because it never gets written since opening the\nerror dialog fails:\n\n       ErrorDialog.openError(workbench.getActiveWorkbenchWindow().getShell(),\n                title, message, status);\n        WorkbenchPlugin.log(message, status);\n\nWorkbenchKeyboard.logException should first log the exception and then try to\nbring up the error dialog.\n\nAndr?: can you try to reproduce the error in a target workspace with a\nbreakpoint in WorkbenchKeyboard.logException so that we can get the real exception?\n\nMoving to Platform UI but keeping in touch via cc-list.",
    "I\u0027ve moved the logging before the error dialog opens.  This should help you \nguys out, but it looks like SWT has ended up in a very bad state. \n \nRe-assigning to SWT to continue investigation.... \n ",
    "From the inital comment, this occurs in 3.0 and 3.0.1 but not in 3.1.  Is this \ntrue?  Before trying to figure out how this was fixed in 3.1 and possibly \npatching back to 3.0.1, do we consider this a bug that needs to be fixed in \n3.0.1?",
    "The problem is that we don\u0027t know what the \"real\" bug is since it never got\nlogged. We couldn\u0027t reproduce it yet on 3.1 which doesn\u0027t necessarily mean it\u0027s\nfixed.\n\nIf WorkbenchKeyboard got fixed in 3.0.1 we would get the stack trace for the\n\"real\" bug. ",
    "Doug, Is the fix to WorkbenchKeyboard in 3.0.1 ?",
    "No, and I don\u0027t currently have any plans to put the fix into 3.0.1.  I\u0027m not \nsure yet whether the change might have other consequences.  (I can\u0027t see why, \nbut I\u0027d rather not put code into the 3.0.1 stream just to gather information \nthat can be gathered with a debugger.) \n ",
    "Doug, Can you attach the code change as a patch to this bug report so that we \ncan get the required results from 3.0.1?",
    "See comment #3 ",
    "It does not look like SWT.\nSome code from MouseClickListener.paintControl is calling \nStyledText.getLocationAtOffset with a out of bounds offset.\n\nThe error on WorkbenchKeyboard.processKeyEvent also doesn\u0027t seem to be related \nwith SWT in any way.\n\nThere is no StyledTex/TextLayout difference between HEAD and 3.0.1 that can \ncause this problem.",
    "I will create a patched version for 3.0.1 so that we can try to reproduce this\non Andre\u0027s machine. Feel free to move this back to Platform Text.",
    "Marking as duplicate of a bug that now has the stack trace without the error\ndialog in-between.\n\n*** This bug has been marked as a duplicate of 76890 ***"
  ],
  "commentCreationDates": [
    "2004-08-27T16:58:53+02:00",
    "2004-08-27T17:16:11+02:00",
    "2004-08-27T17:40:28+02:00",
    "2004-08-27T18:08:17+02:00",
    "2004-08-27T19:34:53+02:00",
    "2004-08-30T19:10:46+02:00",
    "2004-08-30T19:16:50+02:00",
    "2004-08-30T23:50:40+02:00",
    "2004-08-31T01:37:10+02:00",
    "2004-08-31T16:57:05+02:00",
    "2004-08-31T17:02:33+02:00",
    "2004-08-31T22:43:55+02:00",
    "2004-09-01T09:38:59+02:00",
    "2004-11-02T08:07:14+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2677"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2616"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2587"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getLocationAtOffset",
          "source": "StyledText.java:3816"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor$MouseClickListener.getMinimumLocation",
          "source": "JavaEditor.java: 1341"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor$MouseClickListener.paintControl",
          "source": "JavaEditor.java: 1318"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1196"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1220"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1205"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.drawWidget",
          "source": "Control.java:546"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.kEventControlDraw",
          "source": "Widget.java:867"
        },
        {
          "method": "org.eclipse.swt.widgets.Canvas.kEventControlDraw",
          "source": "Canvas.java:105"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.controlProc",
          "source": "Widget.java:314"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.controlProc",
          "source": "Display.java:746"
        },
        {
          "method": "org.eclipse.swt.internal.carbon.OS.ShowWindow",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.setWindowVisible",
          "source": "Shell.java:1321"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.setVisible",
          "source": "Shell.java:1290"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.open",
          "source": "Shell.java:1010"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:644"
        },
        {
          "method": "org.eclipse.jface.dialogs.ErrorDialog.open",
          "source": "ErrorDialog.java:257"
        },
        {
          "method": "org.eclipse.jface.dialogs.ErrorDialog.openError",
          "source": "ErrorDialog.java:319"
        },
        {
          "method": "org.eclipse.jface.dialogs.ErrorDialog.openError",
          "source": "ErrorDialog.java:285"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.logException",
          "source": "WorkbenchKeyboard.java:664"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent",
          "source": "WorkbenchKeyboard.java:932"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings",
          "source": "WorkbenchKeyboard.java: 548"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2",
          "source": "WorkbenchKeyboard.java:496"
        },
        {
          "method": "org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent",
          "source": "WorkbenchKeyboard.java:261"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.filterEvent",
          "source": "Display.java:919"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1195"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1220"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:1205"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1994"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.sendKeyEvent",
          "source": "Control.java:1989"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.kEventTextInputUnicodeForKeyEvent",
          "source": "Control.java:1509"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.kEventTextInputUnicodeForKeyEvent",
          "source": "Composite.java:392"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.textInputProc",
          "source": "Widget.java:1607"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.textInputProc",
          "source": "Display.java:3310"
        },
        {
          "method": "org.eclipse.swt.internal.carbon.OS.SendEventToEventTarget",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2523"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1377"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1348"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:254"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:335"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:184"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:680"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:664"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "72786",
      "duplicateId": "76890",
      "date": "2004-08-27T16:58:53+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "76890",
  "bugId": "72786",
  "duplicateId": "76890",
  "date": "2004-08-27T16:58:53+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "normal"
}