{
  "comments": [
    "Build ID: 3.3.RC4\n\nSteps To Reproduce:\nI have a compartment which shows labels with icons like in the mindmap tutorial. They layout is set to list layout \u003d true in gmfgen. All models validate and it worked in M7. With RC3 and N180607 i get an NPE exception on adding an element to the compartment or on opening old diagram files. \n\norg.eclipse.core.commands.ExecutionException: While executing the operation, an exception occurred\nat org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:519)\nat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:205)\nat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:168)\nat org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute(DiagramCommandStack.java:155)\nat org.eclipse.gef.tools.AbstractTool.executeCommand(AbstractTool.java:388)\nat org.eclipse.gef.tools.AbstractTool.executeCurrentCommand(AbstractTool.java:400)\nat org.eclipse.gmf.runtime.diagram.ui.tools.CreationTool.performCreation(CreationTool.java:133)\nat org.eclipse.gef.tools.CreationTool.handleButtonUp(CreationTool.java:178)\nat org.eclipse.gef.tools.AbstractTool.mouseUp(AbstractTool.java:1053)\nat org.eclipse.gef.EditDomain.mouseUp(EditDomain.java:259)\nat org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased(DomainEventDispatcher.java:374)\nat org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp(LightweightSystem.java:538)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:206)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\nat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\nat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\nat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\nat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1144)\nCaused by: java.lang.NullPointerException\nat org.eclipse.draw2d.Figure.add(Figure.java:146)\nat org.eclipse.draw2d.Figure.add(Figure.java:179)\nat org.eclipse.gef.editparts.AbstractGraphicalEditPart.addChildVisual(AbstractGraphicalEditPart.java:198)\nat org.eclipse.gef.editparts.AbstractEditPart.addChild(AbstractEditPart.java:197)\nat org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.addChild(GraphicalEditPart.java:1292)\nat org.eclipse.gef.editparts.AbstractEditPart.refreshChildren(AbstractEditPart.java:727)\nat org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.handleNotificationEvent(GraphicalEditPart.java:1437)\nat org.eclipse.gmf.runtime.diagram.ui.editparts.ResizableCompartmentEditPart.handleNotificationEvent(ResizableCompartmentEditPart.java:142)\nat org.eclipse.gmf.runtime.diagram.ui.editparts.ListCompartmentEditPart.handleNotificationEvent(ListCompartmentEditPart.java:150)\nat org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.notifyChanged(GraphicalEditPart.java:1411)\nat org.eclipse.gmf.runtime.diagram.core.listener.DiagramEventBroker.fireNotification(DiagramEventBroker.java:492)\nat org.eclipse.gmf.runtime.diagram.core.listener.DiagramEventBroker.resourceSetChanged(DiagramEventBroker.java:393)\nat org.eclipse.gmf.runtime.diagram.ui.internal.DiagramEventBrokerThreadSafe.resourceSetChanged(DiagramEventBrokerThreadSafe.java:72)\nat org.eclipse.gmf.runtime.diagram.core.DiagramEditingDomainFactory$DiagramEditingDomain.postcommit(DiagramEditingDomainFactory.java:213)\nat org.eclipse.emf.transaction.impl.TransactionalEditingDomainImpl.deactivate(TransactionalEditingDomainImpl.java:475)\nat org.eclipse.emf.transaction.impl.TransactionImpl.close(TransactionImpl.java:531)\nat org.eclipse.emf.transaction.impl.TransactionImpl.commit(TransactionImpl.java:372)\nat org.eclipse.emf.workspace.AbstractEMFOperation.execute(AbstractEMFOperation.java:140)\nat org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)\nat org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)\nat org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult(CompositeCommand.java:406)\nat org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute(AbstractCommand.java:134)\nat org.eclipse.core.commands.operations.DefaultOperationHistory.execute(DefaultOperationHistory.java:511)\n... 37 more\n\n\nMore information:\nMight also be related to the two bugs I reported just before this one.",
    "Looks like there\u0027s smth wrong with gmfgraph model.",
    "You were right, good guess :-) The issue was that the label which should get displayed in the compartment was defined as child of a Rectangle in GMFGraph, something which seemed to be legacy from migrating the models for 1,5 year now. Obviously GMF2 M7 and earlier had no problem with this, but RC2 now has. I consider the GMFGraph as it was before as invalid, right? I would suggest, there should be a constraint that checks that labels which are used in compartments directly are the only child of a figure description - or something similar.",
    "(In reply to comment #2)\nLabels inside compartment are full-fledged nodes, just represented with a simple line of text. Nested figures (e.g. child label inside a rectangle) are not for such usecases, they should be used to denote e.g. predefined position of label or to ensure its instantiation at apropriate moment of time. IOW, figure inside figure represents exact instance, while DiagramElement (and the figure it links) represents *class* of instances, hence, using child figures for this is not appropriate."
  ],
  "commentCreationDates": [
    "2007-06-18T21:40:48+02:00",
    "2007-06-19T17:43:33+02:00",
    "2007-06-20T00:26:39+02:00",
    "2007-06-20T11:35:48+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.commands.ExecutionException",
      "message": "While executing the operation, an exception occurred",
      "elements": [
        {
          "method": "org.eclipse.core.commands.operations.DefaultOperationHistory.execute",
          "source": "DefaultOperationHistory.java:519"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute",
          "source": "DiagramCommandStack.java:205"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute",
          "source": "DiagramCommandStack.java:168"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.parts.DiagramCommandStack.execute",
          "source": "DiagramCommandStack.java:155"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.executeCommand",
          "source": "AbstractTool.java:388"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.executeCurrentCommand",
          "source": "AbstractTool.java:400"
        },
        {
          "method": "org.eclipse.gmf.runtime.diagram.ui.tools.CreationTool.performCreation",
          "source": "CreationTool.java:133"
        },
        {
          "method": "org.eclipse.gef.tools.CreationTool.handleButtonUp",
          "source": "CreationTool.java:178"
        },
        {
          "method": "org.eclipse.gef.tools.AbstractTool.mouseUp",
          "source": "AbstractTool.java:1053"
        },
        {
          "method": "org.eclipse.gef.EditDomain.mouseUp",
          "source": "EditDomain.java:259"
        },
        {
          "method": "org.eclipse.gef.ui.parts.DomainEventDispatcher.dispatchMouseReleased",
          "source": "DomainEventDispatcher.java:374"
        },
        {
          "method": "org.eclipse.draw2d.LightweightSystem$EventHandler.mouseUp",
          "source": "LightweightSystem.java:538"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:206"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3682"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3293"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.draw2d.Figure.add",
            "source": "Figure.java:146"
          },
          {
            "method": "org.eclipse.draw2d.Figure.add",
            "source": "Figure.java:179"
          },
          {
            "method": "org.eclipse.gef.editparts.AbstractGraphicalEditPart.addChildVisual",
            "source": "AbstractGraphicalEditPart.java:198"
          },
          {
            "method": "org.eclipse.gef.editparts.AbstractEditPart.addChild",
            "source": "AbstractEditPart.java:197"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.addChild",
            "source": "GraphicalEditPart.java:1292"
          },
          {
            "method": "org.eclipse.gef.editparts.AbstractEditPart.refreshChildren",
            "source": "AbstractEditPart.java:727"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.handleNotificationEvent",
            "source": "GraphicalEditPart.java:1437"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.ResizableCompartmentEditPart.handleNotificationEvent",
            "source": "ResizableCompartmentEditPart.java:142"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.ListCompartmentEditPart.handleNotificationEvent",
            "source": "ListCompartmentEditPart.java:150"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.editparts.GraphicalEditPart.notifyChanged",
            "source": "GraphicalEditPart.java:1411"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.core.listener.DiagramEventBroker.fireNotification",
            "source": "DiagramEventBroker.java:492"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.core.listener.DiagramEventBroker.resourceSetChanged",
            "source": "DiagramEventBroker.java:393"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.ui.internal.DiagramEventBrokerThreadSafe.resourceSetChanged",
            "source": "DiagramEventBrokerThreadSafe.java:72"
          },
          {
            "method": "org.eclipse.gmf.runtime.diagram.core.DiagramEditingDomainFactory$DiagramEditingDomain.postcommit",
            "source": "DiagramEditingDomainFactory.java:213"
          },
          {
            "method": "org.eclipse.emf.transaction.impl.TransactionalEditingDomainImpl.deactivate",
            "source": "TransactionalEditingDomainImpl.java:475"
          },
          {
            "method": "org.eclipse.emf.transaction.impl.TransactionImpl.close",
            "source": "TransactionImpl.java:531"
          },
          {
            "method": "org.eclipse.emf.transaction.impl.TransactionImpl.commit",
            "source": "TransactionImpl.java:372"
          },
          {
            "method": "org.eclipse.emf.workspace.AbstractEMFOperation.execute",
            "source": "AbstractEMFOperation.java:140"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult",
            "source": "CompositeCommand.java:406"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute",
            "source": "AbstractCommand.java:134"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.CompositeCommand.doExecuteWithResult",
            "source": "CompositeCommand.java:406"
          },
          {
            "method": "org.eclipse.gmf.runtime.common.core.command.AbstractCommand.execute",
            "source": "AbstractCommand.java:134"
          },
          {
            "method": "org.eclipse.core.commands.operations.DefaultOperationHistory.execute",
            "source": "DefaultOperationHistory.java:511"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "193186",
      "date": "2007-06-18T21:40:48+02:00",
      "product": "GMF",
      "component": "Generation",
      "severity": "normal"
    }
  ],
  "groupId": "193186",
  "bugId": "193186",
  "date": "2007-06-18T21:40:48+02:00",
  "product": "GMF",
  "component": "Generation",
  "severity": "normal"
}