{
  "comments": [
    "JDT does not consider the following statement as an error:\n\nString[] s \u003d  {\"\",};",
    "Also note:\n  String[] s \u003d  {\"\",,,};\ncauses IAE:\n!ENTRY org.eclipse.jdt.ui 4 2 2006-02-02 08:57:30.126\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.jdt.ui\".\n!STACK 0\njava.lang.IllegalArgumentException\n\tat org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2599)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convertToVariableDeclarationStatement(ASTConverter.java:2997)\n\tat org.eclipse.jdt.core.dom.ASTConverter.checkAndAddMultipleLocalDeclaration(ASTConverter.java:399)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:512)\n\tat org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations(ASTConverter.java:182)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:2636)\n\tat org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:1238)\n\tat org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:270)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent(ReconcileWorkingCopyOperation.java:160)\n\tat org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:71)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:720)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:779)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1120)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:97)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:804)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:82)\n\tat org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:175)\n\tat org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)\n\tat org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:120)\n\tat org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:103)\n\tat org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:328)\n\tat org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:170)\n\n",
    "(In reply to comment #0)\n\u003e JDT does not consider the following statement as an error:\n\u003e \n\u003e String[] s \u003d  {\"\",};\n\nIt *is* no error - arrays may have a trailing comma after the last element.\n",
    "Adapted summary.",
    "\u003e It *is* no error - arrays may have a trailing comma after the last element.\nThen javac has error :)\n\n",
    "What makes you say that javac is wrong?\nI could compile the following code with javac 1.4.2, 1.3.1 and 1.5.0.\n\npublic class X {\n\n    public static void main(String[] args) {\n    \tString[] s \u003d  {\"\",};\n    \tSystem.out.println(s.length);\n    }\n}\n",
    "(In reply to comment #1)\n\u003e Also note:\n\u003e   String[] s \u003d  {\"\",,,};\n\u003e causes IAE:\n\u003e !ENTRY org.eclipse.jdt.ui 4 2 2006-02-02 08:57:30.126\n\u003e !MESSAGE Problems occurred when invoking code from plug-in:\n\u003e \"org.eclipse.jdt.ui\".\n\u003e !STACK 0\n\u003e java.lang.IllegalArgumentException\n\u003e         at org.eclipse.jdt.core.dom.ASTNode.setSourceRange(ASTNode.java:2599)\n\u003e         at\n\u003e org.eclipse.jdt.core.dom.ASTConverter.convertToVariableDeclarationStatement(ASTConverter.java:2997)\n\u003e         at\n\nDaniel,\n\nWhat version did you use? I cannot reproduce this failure. I am getting a syntax error.",
    "Daniel,\n\nDon\u0027t worry. I reproduced it.\nI needed to enable statement recovery.",
    "The problem comes from the local variable that has no declaration source end set. The declaration end is set to the end of the name, but the declaration source end is not set.\nDavid, I will investigate. If I cannot figure out where the bug is, I\u0027ll reassign it to you.",
    "David,\n\nThe problem is inside the statement recovery. Once the method\u0027s statements are recovered, the local declaration has no declaration source end.",
    "(In reply to comment #5)\n\u003e What makes you say that javac is wrong?\n\u003e I could compile the following code with javac 1.4.2, 1.3.1 and 1.5.0.\n\u003e \n\u003e public class X {\n\u003e \n\u003e     public static void main(String[] args) {\n\u003e         String[] s \u003d  {\"\",};\n\u003e         System.out.println(s.length);\n\u003e     }\n\u003e }\n\u003e \nSorry, this was my mistake with a wrong code.\nWhy a trailing space has no problem? What is the effect?",
    "*** Bug 126309 has been marked as a duplicate of this bug. ***",
    "(In reply to comment #10)\n\u003e Sorry, this was my mistake with a wrong code.\n\u003e Why a trailing space has no problem? What is the effect?\nA trailing comma has no meaning. It is spec\u0027d that way. Don\u0027t ask us why? \u003cg\u003e",
    "Fixed and test added\n  ASTConverterRecoveryTest#test0005\n\nThe problems are\n1) the end of statements are not computed at the end of recovery if missing\n2) to much Expression nodes are recovered if the statements recovery can\u0027t be complete\n3) the mapping non-terminals -\u003e terminals is missing for ArrayInitializer. So the statement recovery isn\u0027t completed\n\nI fix these three problems",
    "Verified for 3.2 M5 using build I20060215-0010."
  ],
  "commentCreationDates": [
    "2006-02-02T07:49:54+01:00",
    "2006-02-02T07:59:39+01:00",
    "2006-02-02T08:27:00+01:00",
    "2006-02-02T08:42:57+01:00",
    "2006-02-02T09:46:48+01:00",
    "2006-02-02T17:11:53+01:00",
    "2006-02-02T20:04:02+01:00",
    "2006-02-02T21:01:23+01:00",
    "2006-02-02T21:06:17+01:00",
    "2006-02-02T21:46:44+01:00",
    "2006-02-03T05:37:33+01:00",
    "2006-02-03T10:08:52+01:00",
    "2006-02-03T14:08:56+01:00",
    "2006-02-06T14:12:43+01:00",
    "2006-02-15T15:28:43+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.ASTNode.setSourceRange",
          "source": "ASTNode.java:2599"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convertToVariableDeclarationStatement",
          "source": "ASTConverter.java:2997"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.checkAndAddMultipleLocalDeclaration",
          "source": "ASTConverter.java:399"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:512"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.buildBodyDeclarations",
          "source": "ASTConverter.java:182"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:2636"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTConverter.convert",
          "source": "ASTConverter.java:1238"
        },
        {
          "method": "org.eclipse.jdt.core.dom.AST.convertCompilationUnit",
          "source": "AST.java:270"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.makeConsistent",
          "source": "ReconcileWorkingCopyOperation.java:160"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation",
          "source": "ReconcileWorkingCopyOperation.java:71"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:720"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:779"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1120"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run",
          "source": "JavaReconcilingStrategy.java:97"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:804"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile",
          "source": "JavaReconcilingStrategy.java:175"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile",
          "source": "CompositeReconcilingStrategy.java:114"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile",
          "source": "JavaCompositeReconcilingStrategy.java:120"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess",
          "source": "MonoReconciler.java:103"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess",
          "source": "JavaReconciler.java:328"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:170"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "126148",
      "date": "2006-02-02T07:59:39+01:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "126148",
  "bugId": "126148",
  "date": "2006-02-02T07:49:54+01:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}