{
  "comments": [
    "3.0RC1\n\n- start a job holding the workspace lock during the following steps (e.g., with\nthe org.eclipse.ui.examples.job plugin)\n- open properties of a Java project\n- on the Java Build Path Source page click Add Folder\n- click Create New Folder\n- enter some name\n- click Ok\n- press cancel in the progress dialog\n-\u003e the following exception is written to the log:\n\njava.lang.NullPointerException\n        at org.eclipse.jdt.internal.ui.wizards.buildpaths.MultipleFolderSelectio\nnDialog.newFolderButtonPressed(MultipleFolderSelectionDialog.java:292)\n        at org.eclipse.jdt.internal.ui.wizards.buildpaths.MultipleFolderSelectio\nnDialog$3.widgetSelected(MultipleFolderSelectionDialog.java:237)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:\n89)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n        at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n        at org.eclipse.jface.window.Window.open(Window.java:648)\n        at org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceContainerWorkboo\nkPage.openSourceContainerDialog(SourceContainerWorkbookPage.java:586)\n        at org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceContainerWorkboo\nkPage.sourcePageCustomButtonPressed(SourceContainerWorkbookPage.java:273)\n        at org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceContainerWorkboo\nkPage$SourceContainerAdapter.customButtonPressed(SourceContainerWorkbookPage.jav\na:191)\n        at org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField.\nbuttonPressed(TreeListDialogField.java:167)\n        at org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField.\ndoButtonSelected(TreeListDialogField.java:381)\n        at org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField.\naccess$2(TreeListDialogField.java:377)\n        at org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField$\n2.widgetSelected(TreeListDialogField.java:344)\n        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:\n89)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n        at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)\n        at org.eclipse.jface.window.Window.open(Window.java:648)\n        at org.eclipse.ui.dialogs.PropertyDialogAction.run(PropertyDialogAction.\njava:177)\n        at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\n        at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:915)\n        at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContri\nbutionItem.java:866)\n        at org.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionC\nontributionItem.java:785)\n        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)\n        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)\n        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)\n        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.jav\na:253)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)\n        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96\n)\n        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformAct\nivator.java:334)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja\nva:273)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja\nva:128)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n        at org.eclipse.core.launcher.Main.run(Main.java:638)\n        at org.eclipse.core.launcher.Main.main(Main.java:622)\njava.lang.NullPointerException",
    "Bug is that the \u0027NewFolderDialog\u0027 returns with Window.OK but null as result.\nNewFolderDialog is Platform UI",
    "We are working according to the spec (as you cancelled the operation)\n/**\n\t * Returns the list of selections made by the user, or \n\u003ccode\u003enull\u003c/code\u003e\n\t * if the selection was canceled.\n\t * \n\t * @return the array of selected elements, or \u003ccode\u003enull\u003c/code\u003e if \nCancel\n\t *         was pressed\n\t */\n\tpublic Object[] getResult() {\n\t\treturn result;\n\t}\n\nyou likely want to use getFirstResult() instead",
    "Tod,\n\nMartin didn\u0027t complain about the fact that getResult() returns null. He \ncomplains that it returns null although Window.open returned OK. If the \noperation got canceled then Window.open should return CANCEL.\n\nMoving to Platform/UI.",
    "Right - but either way the code is not following spec.\n\nWe have done it correctly. The user hit cancel, an operation started and the \nresult was nul..",
    "I assume this is not fixed yet? Reopening and moving to JDT.",
    "Correct.",
    "No your code didn\u0027t do it correctly. It returned \u0027OK\u0027 as result on open(), so \nfollowing the Javadoc I can assume the result is not null.\n\nHowever, I think the correct behaviour is that when cancel is pressed on the \nprogress monitor only the progress monitor dialog closes and the control goes \nback to the folder dialog where the user can modify its values again and press \nok again.\n\nBack to Platform\n",
    "I can see it both ways - the user has pressed both OK and cancel at some point.\n\nNick we need to decide on a policy about this pattern.\n\nUser hits OK\nOperation is blocked \nUser cancels operation\nDialog closes.\n\nI think Martin has a good point about that being functionally equivalent to \ncancelling.\n\nEither way Martin you should fix your code to make sure that you satisfy the \nspec. We won\u0027t be making this change for 3.0 as I am afraid of possible knock \non effects of people relying on the current behaviour.",
    "If the dialog is responsible for doing the operation, before open() returns,\nthen I agree that it should return CANCEL if the operation was cancelled part\nway through.\n\nHowever, since there is a workaround (just check getResult() \u003d\u003d null), I don\u0027t\nsee this as critical for 3.0.\n\nShould check our own usage of this dialog though.\n",
    "My I suggest this as a patch to the NewFolderDialog (replaces the current \nmethod computeResult)?\nI still think that I\u0027m currently following the specs (I tested for cancel!), \nso adding the null check would be a workaround for a bug that probably other \nwill also run into (it\u0027s a API class)\n\nWith this fix the dialog will stay open if the user pressed ok but cancels the \nprogress monitor. I think this is the correct behaviour.\n\n------\n\nprotected void computeResult() {\n}\n\t\n/*\n * @see Dialog#okPressed()\n */\nprotected void okPressed() {\n  String linkTarget \u003d linkedResourceGroup.getLinkTarget();\n  IFolder folder \u003d createNewFolder(folderNameField.getText(), linkTarget);\n  if(folder \u003d\u003d null)\n    return;\n\t\t\t\n  setSelectionResult(new IFolder[] {folder});\n  super.okPressed();\n}",
    "*** Bug 74745 has been marked as a duplicate of this bug. ***",
    "what\u0027s the status of this bug? I suggest to apply the simple fix as suggested in\ncomment 10.\nCancelling the progress dialog should not close the underlying dialog. ",
    "I agree that cancelling the progress dialog should not cancel the underlying\ndialog.  Comparing this new folder dialog with others that add items to the\nworkspace, it seems that this dialog in particular is not using jobs in the same\nway and is causing this behaviour.  Reassigning to Tod so he can take a look at it.",
    "This should behave the same way as the NewFolder wizard",
    "I have released Martins patch with some minor style modification for build \n\u003e20041005",
    "Verified in 20041102"
  ],
  "commentCreationDates": [
    "2004-06-01T18:26:41+02:00",
    "2004-06-07T11:57:22+02:00",
    "2004-06-08T14:42:34+02:00",
    "2004-06-08T15:29:02+02:00",
    "2004-06-08T16:33:02+02:00",
    "2004-06-08T20:33:58+02:00",
    "2004-06-08T20:38:38+02:00",
    "2004-06-09T10:21:27+02:00",
    "2004-06-09T13:48:27+02:00",
    "2004-06-09T14:05:04+02:00",
    "2004-06-09T14:44:08+02:00",
    "2004-10-04T14:07:29+02:00",
    "2004-10-04T14:10:06+02:00",
    "2004-10-05T15:52:00+02:00",
    "2004-10-05T16:01:30+02:00",
    "2004-10-05T21:12:53+02:00",
    "2004-11-03T16:08:50+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.MultipleFolderSelectionDialog.newFolderButtonPressed",
          "source": "MultipleFolderSelectionDialog.java:292"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.MultipleFolderSelectionDialog$3.widgetSelected",
          "source": "MultipleFolderSelectionDialog.java:237"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java: 89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceContainerWorkbookPage.openSourceContainerDialog",
          "source": "SourceContainerWorkbookPage.java:586"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceContainerWorkbookPage.sourcePageCustomButtonPressed",
          "source": "SourceContainerWorkbookPage.java:273"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.buildpaths.SourceContainerWorkbookPage$SourceContainerAdapter.customButtonPressed",
          "source": "SourceContainerWorkbookPage.jav a:191"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField.buttonPressed",
          "source": "TreeListDialogField.java:167"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField.doButtonSelected",
          "source": "TreeListDialogField.java:381"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField.access$2",
          "source": "TreeListDialogField.java:377"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.dialogfields.TreeListDialogField$2.widgetSelected",
          "source": "TreeListDialogField.java:344"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java: 89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:668"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:648"
        },
        {
          "method": "org.eclipse.ui.dialogs.PropertyDialogAction.run",
          "source": "PropertyDialogAction. java:177"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:915"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContri butionItem.java:866"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "ActionC ontributionItem.java:785"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:796"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2716"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2382"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1363"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.jav a:253"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:96 "
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformAct ivator.java:334"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.ja va:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.ja va:128"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAcces sorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:638"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:622"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "65049",
      "date": "2004-06-01T18:26:41+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "65049",
  "bugId": "65049",
  "date": "2004-06-01T18:26:41+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}