{
  "comments": [
    "Build ID: HEAD as of filing date\n\nSteps To Reproduce:\n1. Setup Aperi debug environment on SLES10 Linux\n2. Build and run Aperi DB, data server, device server and agent, from the Eclipse debugger\n3. RunLegacyAperiGUI\n4. Select Topology-\u003eFabrics and the attached exception is thrown and displayed by the GUI.\n\n\n\nMore information:\nError --\nServer: localhost           Status: 0\n \norg.apache.derby.client.am.SqlException: Types \u0027INTEGER\u0027 and \u0027CHAR\u0027 are not type compatible. Neither type is assignable to the other type.  \n\tat org.apache.derby.client.am.Statement.completeSqlca(Unknown Source)\n\tat org.apache.derby.client.net.NetStatementReply.parsePrepareError(Unknown Source)\n\tat org.apache.derby.client.net.NetStatementReply.parsePRPSQLSTTreply(Unknown Source)\n\tat org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput(Unknown Source)\n\tat org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput(Unknown Source)\n\tat org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_(Unknown Source)\n\tat org.apache.derby.client.am.Statement.readPrepareDescribeOutput(Unknown Source)\n\tat org.apache.derby.client.am.PreparedStatement.readPrepareDescribeInputOutput(Unknown Source)\n\tat org.apache.derby.client.am.PreparedStatement.flowPrepareDescribeInputOutput(Unknown Source)\n\tat org.apache.derby.client.am.PreparedStatement.prepare(Unknown Source)\n\tat org.apache.derby.client.am.Connection.prepareStatementX(Unknown Source)\n\tat org.apache.derby.client.am.Connection.prepareStatement(Unknown Source)\n\tat org.eclipse.aperi.server.guireq.topology.views.ViewerSanL0.getView(ViewerSanL0.java:484)\n\tat org.eclipse.aperi.server.guireq.topology.request.handler.ViewerRequestHandler.handleRequest(ViewerRequestHandler.java:102)\n\tat org.eclipse.aperi.server.handler.gui.TopologyViewerHndlr.handle(TopologyViewerHndlr.java:41)\n\tat org.eclipse.aperi.server.RequestManager$RmThread.run(RequestManager.java:312)",
    "The error comes from the \"COUNT (CASE ... END)\" segment of the following SQL statement (this error appears only in Derby):\n\nij\u003e SELECT  HOST2FABRIC.FABRIC_ID FABRIC_ID,  COUNT(HOST2FABRIC.HOST_ID) TOTAL_HOST,  COUNT(CASE WHEN HOST.PROPAGATED_STATUS \u003e 0 and HOST.PROPAGATED_STATUS !\u003d 4 THEN HOST.COMPUTER_ID  WHEN HOST.DETECTABLE \u003d 0 THEN HOST.COMPUTER_ID  else NULL END) TOTAL_ABNORMAL_HOST FROM  T_VIEW_VHOST2FABRIC HOST2FABRIC , T_VIEW_VHOST HOST  WHERE  HOST2FABRIC.PREFIX_ID \u003d HOST.PREFIX_ID and  HOST2FABRIC.HOST_ID\u003dHOST.COMPUTER_ID  GROUP BY HOST2FABRIC.FABRIC_ID;\n\nERROR 42X89: Types \u0027INTEGER\u0027 and \u0027CHAR\u0027 are not type compatible. Neither type is assignable to the other type\n\nTo solve it I replaced COUNT(CASE ... else NULL END) with COUNT(CASE ... else CAST(NULL as INTEGER) END) for the following SQL statements in ViewerSANL0.java: DO_SUBSYSTEM_COUNTS, DO_TAPE_COUNTS, DO_HOST_COUNTS. \n\nI noticed that this kind of modifications was already made for other queries in ViewerSANL0.java and ViewerRoot.java"
  ],
  "commentCreationDates": [
    "2007-03-09T16:32:43+01:00",
    "2007-03-13T12:04:37+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.apache.derby.client.am.SqlException",
      "message": "Types \u0027INTEGER\u0027 and \u0027CHAR\u0027 are not type compatible. Neither type is assignable to the other type.",
      "elements": [
        {
          "method": "org.apache.derby.client.am.Statement.completeSqlca",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.net.NetStatementReply.parsePrepareError",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.net.NetStatementReply.parsePRPSQLSTTreply",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.am.Statement.readPrepareDescribeOutput",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.am.PreparedStatement.readPrepareDescribeInputOutput",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.am.PreparedStatement.flowPrepareDescribeInputOutput",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.am.PreparedStatement.prepare",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.am.Connection.prepareStatementX",
          "source": "Unknown Source"
        },
        {
          "method": "org.apache.derby.client.am.Connection.prepareStatement",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.aperi.server.guireq.topology.views.ViewerSanL0.getView",
          "source": "ViewerSanL0.java:484"
        },
        {
          "method": "org.eclipse.aperi.server.guireq.topology.request.handler.ViewerRequestHandler.handleRequest",
          "source": "ViewerRequestHandler.java:102"
        },
        {
          "method": "org.eclipse.aperi.server.handler.gui.TopologyViewerHndlr.handle",
          "source": "TopologyViewerHndlr.java:41"
        },
        {
          "method": "org.eclipse.aperi.server.RequestManager$RmThread.run",
          "source": "RequestManager.java:312"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "176832",
      "date": "2007-03-09T16:32:43+01:00",
      "product": "Aperi",
      "component": "aperi.gui",
      "severity": "major"
    }
  ],
  "groupId": "176832",
  "bugId": "176832",
  "date": "2007-03-09T16:32:43+01:00",
  "product": "Aperi",
  "component": "aperi.gui",
  "severity": "major"
}