{
  "comments": [
    "I getting some odd behaviour when a plugin is being loaded. I beleive the \nfollowing is a defect, but perhaps this is a restriction or a clarification is \nrequired instead.\n\nPlugin com.ibm.etools.server.ui is displaying a wizard containing a tree view. \nWhen the user selects an object from the tree, it uses an IRunnable to call a \nlong running method in a non-ui plugin called com.ibm.etools.server.core. This \nallows the progress bar on the wizard to be used for status.\n\nThe com.ibm.etools.server.core plugin tries to load an extension point and uses \ncreateExecutableExtension(). The extension point is \"implemented\" by the \ncom.ibm.etools.tcpip.monitor, which happens to be a UI plugin.\n\nI\u0027ve included the code below, and the exception that occurs below that. It \nappears as if the loading of an AbstractUI plugin has a side-effect of checking \nthe current selection on the tree. Since this is in an IRunnable and not on the \nmain UI thread, an invalid access error occurs.\n\nShouldn\u0027t the AbstractUIPlugin (or maybe WWinPluginAction) check which thread \nit is on and use Display.syncExec() before calling back to the UI? I don\u0027t want \nto preload the extension points or use the UI thread for this operation - is \nthere another way around this? Thanks.\n\n--------------------\n\nIRunnableWithProgress runnable \u003d new IRunnableWithProgress() {\n  public void run(IProgressMonitor monitor) {\n    try {\n      monitor.beginTask(\"task\", \"label\", 100);\n      // ...\n      tempElement \u003d cache.getServerResource(..., monitor);\n    } catch (Exception e) {\n      Trace.trace(\"Error creating element\", e);\n    } finally {\n      monitor.done();\n    }\n  }\n};\ntry {\n  getWizard().getContainer().run(true, false, runnable);\n} catch (Exception e) {\n  Trace.trace(\"Error with runnable\", e);\n}\n\n--------------------\n\nLog: Fri Jan 25 15:52:40 EST 2002\n2 org.eclipse.core.runtime 2 Problems occurred when invoking code from plug-in: \norg.eclipse.core.runtime.\norg.eclipse.swt.SWTException: Invalid thread access\n\tat org.eclipse.swt.SWT.error(SWT.java:1887)\n\tat org.eclipse.swt.SWT.error(SWT.java:1819)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:366)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java(Compiled \nCode))\n\tat org.eclipse.swt.widgets.Tree.getSelection(Tree.java:504)\n\tat org.eclipse.jface.viewers.TreeViewer.getSelection\n(TreeViewer.java:158)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.getSelectionFromWidget\n(AbstractTreeViewer.java:586)\n\tat org.eclipse.jface.viewers.StructuredViewer.getSelection\n(StructuredViewer.java:365)\n\tat org.eclipse.ui.internal.SelectionService.getSelection\n(SelectionService.java:64)\n\tat org.eclipse.ui.internal.WWinPluginAction.refreshSelection\n(WWinPluginAction.java:128)\n\tat org.eclipse.ui.internal.WWinPluginAction.refreshActionList\n(WWinPluginAction.java:52)\n\tat org.eclipse.ui.internal.Workbench.refreshPluginActions\n(Workbench.java:978)\n\tat org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions\n(AbstractUIPlugin.java:382)\n\tat org.eclipse.ui.plugin.AbstractUIPlugin.startup\n(AbstractUIPlugin.java:421)\n\tat com.ibm.etools.tcpip.monitor.internal.MonitorServerPlugin.startup\n(MonitorServerPlugin.java:238)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor$1.run\n(PluginDescriptor.java:643)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:818)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation\n(PluginDescriptor.java:655)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation\n(PluginDescriptor.java:135)\n\tat org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin\n(PluginClassLoader.java:52)\n\tat \norg.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf\n(PluginClassLoader.java(Compiled Code))\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java(Compiled Code))\n\tat org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass\n(DelegatingURLClassLoader.java(Compiled Code))\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java(Compiled Code))\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:79)\n\tat \norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension\n(PluginDescriptor.java:116)\n\tat \norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension\n(ConfigurationElement.java:96)\n\tat \ncom.ibm.etools.server.core.internal.ServerConfigurationFactory.getDelegate\n(ServerConfigurationFactory.java:30)\n\tat com.ibm.etools.server.core.internal.ServerConfigurationFactory.create\n(ServerConfigurationFactory.java:42)\n\tat \ncom.ibm.etools.server.ui.internal.wizardpage.ElementCreationCache.getServerResou\nrce(ElementCreationCache.java:78)\n\tat \ncom.ibm.etools.server.ui.internal.wizardpage.CreateServerResourceWizardPage$8.ru\nn(CreateServerResourceWizardPage.java:324)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:98)",
    "I believe this has been fixed.  What build are you using?  Probably a duplicate \nof bug 6623.",
    "Yes, this is a duplicate, and I\u0027ve verified that it is now fixed in Friday\u0027s \nbuild.\nThanks, John.\n\n*** This bug has been marked as a duplicate of 6623 ***",
    "Closing."
  ],
  "commentCreationDates": [
    "2002-01-26T00:14:47+01:00",
    "2002-01-28T17:38:40+01:00",
    "2002-01-29T16:58:39+01:00",
    "2006-06-14T18:55:58+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1887"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1819"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:366"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java(Compiled  Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.getSelection",
          "source": "Tree.java:504"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.getSelection",
          "source": "TreeViewer.java:158"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.getSelectionFromWidget",
          "source": "AbstractTreeViewer.java:586"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getSelection",
          "source": "StructuredViewer.java:365"
        },
        {
          "method": "org.eclipse.ui.internal.SelectionService.getSelection",
          "source": "SelectionService.java:64"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.refreshSelection",
          "source": "WWinPluginAction.java:128"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.refreshActionList",
          "source": "WWinPluginAction.java:52"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.refreshPluginActions",
          "source": "Workbench.java:978"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.refreshPluginActions",
          "source": "AbstractUIPlugin.java:382"
        },
        {
          "method": "org.eclipse.ui.plugin.AbstractUIPlugin.startup",
          "source": "AbstractUIPlugin.java:421"
        },
        {
          "method": "com.ibm.etools.tcpip.monitor.internal.MonitorServerPlugin.startup",
          "source": "MonitorServerPlugin.java:238"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor$1.run",
          "source": "PluginDescriptor.java:643"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:818"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:655"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:135"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:52"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf",
          "source": "PluginClassLoader.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java(Compiled Code)"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:79"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:116"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:96"
        },
        {
          "method": "com.ibm.etools.server.core.internal.ServerConfigurationFactory.getDelegate",
          "source": "ServerConfigurationFactory.java:30"
        },
        {
          "method": "com.ibm.etools.server.core.internal.ServerConfigurationFactory.create",
          "source": "ServerConfigurationFactory.java:42"
        },
        {
          "method": "com.ibm.etools.server.ui.internal.wizardpage.ElementCreationCache.getServerResource",
          "source": "ElementCreationCache.java:78"
        },
        {
          "method": "com.ibm.etools.server.ui.internal.wizardpage.CreateServerResourceWizardPage$8.run",
          "source": "CreateServerResourceWizardPage.java:324"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:98"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "8523",
      "duplicateId": "6623",
      "date": "2002-01-26T00:14:47+01:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "6623",
  "bugId": "8523",
  "duplicateId": "6623",
  "date": "2002-01-26T00:14:47+01:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}