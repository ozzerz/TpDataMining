{
  "comments": [
    "From:\tMatthias Bohlen \u003cinfomail@mbohlen.de\u003e\n\tNewsgroups:\teclipse.modeling.m2m\n\tSubject:\t[ATL] NPE in content assist\n\tDate:\tThu, 13 Dec 2007 19:06:26 +0100\n\nHello,\n\nwhen I activate the new checkbox \"Enable auto activation\" inside Eclipse, Preferences, ATL, Editor, Code Assist, and then I click Ctrl-Space, I get the following NullPointerException:\n\nWarning: one refSetting crashed:\njava.lang.NullPointerException\n\tat org.eclipse.gmt.tcs.injector.TCSInjector$RefSetting.doItForContext(TCSInjector.java:554)\n\tat \norg.eclipse.gmt.tcs.injector.TCSInjector$RefSetting.doIt(TCSInjector.java:695)\n\tat org.eclipse.gmt.tcs.injector.TCSInjector.performImportation(TCSInjector.java:284)\n\tat \norg.eclipse.gmt.tcs.injector.TCSInjector.performImportation(TCSInjector.java:218)\n\tat \norg.eclipse.gmt.tcs.injector.TCSInjector.performImportation(TCSInjector.java:167)\n\tat \norg.eclipse.gmt.tcs.injector.TCSInjector.inject(TCSInjector.java:97)\n\tat org.eclipse.m2m.atl.adt.ui.text.atl.AtlCompletionHelper.parseExpression(AtlCompletionHelper.java:170)\n\tat \norg.eclipse.m2m.atl.adt.ui.text.atl.AtlCompletionHelper.computeContext(AtlCompletionHelper.java:88)\n\tat \norg.eclipse.m2m.atl.adt.ui.text.atl.AtlCompletionProcessor.computeCompletionProposals(AtlCompletionProcessor.java:82)\n\tat \norg.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1759)\n\tat \norg.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:478)\n\tat \norg.eclipse.jface.text.contentassist.CompletionProposalPopup.access$16(CompletionProposalPopup.java:475)\n\tat \norg.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run(CompletionProposalPopup.java:410)\n\tat \norg.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\n\tat org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:404)\n\tat \norg.eclipse.jface.text.contentassist.ContentAssistant$2.run(ContentAssistant.java:354)\n\tat \norg.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\tat \norg.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3212)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2956)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat \norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat \norg.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat \norg.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat \norg.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat \norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat \nsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat \njava.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1144)\n\nMy transformation script:\n\nmodule UML2EnterpriseApp;\ncreate OUT : EnterpriseApp from PRO: UML2, IN: UML2;\n\nuses UML2Helpers;\n\n-- @nsURI UML2\u003dhttp://www.eclipse.org/uml2/2.1.0/UML\n\n-- get the root node of the UML model (there is only one)\nhelper def: modelRoot: UML2!Model \u003d UML2!Model.allInstances()-\u003easSequence()-\u003efirst();\n\n-- Transform UML model to EnterpriseApp model\nrule UMLModelToEnterpriseAppModel {\n\tfrom model : UML2!Model\n\tto out : EnterpriseApp!EAppModel (\n\t    model  \u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c---------- I pressed Ctrl-Space after the word \"model\", pressing \".\" does not do anything else.\n\t)\n}\n-- Transform UML2 classes that have the stereotype \"Service\"\n-- to EnterpriseApp services.\nrule UMLServiceToEnterpriseAppService {\n\tfrom class : UML2!Class (class.oclIsTypeOf(UML2!Class) and class.hasStereotype(\u0027Service\u0027))\n\tto out : EnterpriseApp!Service (\n\t\tname \u003c- class.name-\u003edebug(\u0027UMLServiceToEnterpriseAppService\u0027),\n\t\tmethods \u003c- class.ownedOperation-\u003edebug(\u0027UMLServiceToEnterpriseAppService\u0027),\n\t\tsourceReferences \u003c- class.clientDependency-\u003edebug(\u0027UMLServiceToEnterpriseAppService\u0027),\n\t\tmodel \u003c- thisModule.modelRoot\n\t)\n\tdo {\n\t\tthisModule.links-\u003edebug(\u0027TransientLinkSet\u0027);\n\t}\n}\n\n-- Transform UML2 classes that have the stereotype \"Entity\"\n-- to EnterpriseApp entities.\nrule UMLEntityToEnterpriseAppEntity {\n\tfrom class : UML2!Class (class.oclIsTypeOf(UML2!Class) and class.hasStereotype(\u0027Entity\u0027))\n\tto out : EnterpriseApp!Entity (\n\t\tname \u003c- class.name-\u003edebug(\u0027UMLEntityToEnterpriseAppEntity\u0027),\n\t\tmethods \u003c- class.ownedOperation-\u003edebug(\u0027UMLEntityToEnterpriseAppEntity\u0027),\n\t\tproperties \u003c- class.ownedAttribute-\u003edebug(\u0027UMLEntityToEnterpriseAppEntity\u0027),\n\t\tmodel \u003c- thisModule.modelRoot\n\t)\n\tdo {\n\t\tthisModule.links-\u003edebug(\u0027TransientLinkSet\u0027);\n\t}\n}\n\n-- Transform UML dependencies to EnterpriseApp references\nrule UMLDependencyToEnterpriseAppReference {\n\tfrom dep : UML2!Dependency (dep.supplier-\u003efirst().hasStereotype(\u0027Entity\u0027))\n\tto out : EnterpriseApp!Reference (\n\t\ttarget \u003c- dep.supplier-\u003efirst()\n\t)\n}\n\n-- Transform UML2 operations to OOP methods.\nrule UMLOpToOOPMethod {\n\tfrom method : UML2!Operation\n\tto out : EnterpriseApp!Method (\n\t\tname \u003c- method.name\n\t\t,returnType \u003c- method.type\n\t\t,parameters \u003c- method.ownedParameter-\u003eselect(x|x.direction\u003c\u003e#return)-\u003easSequence()\n\t\t,instanceScope \u003c- not method.isStatic\n\t)\n}\n\n\n-- Transform UML2 parameters to OOP parameters.\nrule UMLParameterToOOPParameter {\n \tfrom param : UML2!Parameter (param.direction \u003c\u003e #return)\n \tto out : EnterpriseApp!Parameter (\n \t\tname \u003c- param.name ,\n \t\ttype \u003c- param.type\n \t)\n}\n\n-- Transform UML2 datatype to OOP datatype.\nrule UMLDataTypeToOOPDatatype {\n\tfrom type : UML2!DataType\n\tto out : EnterpriseApp!Type (\n\t\tname \u003c- type.name-\u003edebug(\u0027UMLDataTypeToOOPDatatype\u0027)\n\t)\n}\n\n-- Transform UML2 property to OOP property\nrule UMLPropertyToOOPProperty {\n\tfrom attr : UML2!Property (attr.featuringClassifier-\u003efirst().hasStereotype(\u0027Service\u0027) or attr.featuringClassifier-\u003efirst().hasStereotype(\u0027Entity\u0027))\n\tto out : EnterpriseApp!Property (\n\t\tname \u003c- attr.name-\u003edebug(\u0027UMLPropertyToOOPProperty\u0027),\n\t\ttype \u003c- attr.type-\u003edebug(\u0027UMLPropertyToOOPProperty\u0027)\n\t)\n\tdo {\n\t\tthisModule.links-\u003edebug(\u0027TransientLinkSet\u0027);\n\t}\n}\n\nCan somebody check this, please?\nThanks!\nMatthias",
    "\tFrom:\tFr??d??ric Jouault\u003cfrederic.jouault@univ-nantes.fr\u003e\n\tNewsgroups:\teclipse.modeling.m2m\n\tSubject:\tRe: [ATL] NPE in content assist\n\tDate:\tThu, 13 Dec 2007 14:46:05 -0600\n\nHi Matthias,\n\n \u003e\u003e rule UMLModelToEnterpriseAppModel {\n \u003e\u003e     from model : UML2!Model\n \u003e\u003e     to out : EnterpriseApp!EAppModel (\n \u003e\u003e         model\n \u003e\u003e     )\n \u003e\u003e }\n \u003e\n \u003e The word \"model\" before the round closing parenthesis is the place where\n \u003e I pressed Ctrl-Space.\n\nThe content assist code uses TCS to parse programs into models that it can navigate to provide completion suggestions.\n\nIn some cases, the program is not valid when you press Ctrl-Space, which can generate errors.\n\nThese errors should be caught and, for instance, added to the Problem model that the TCS injector can generate. Please, feel free to file a bug about this.\n\n\nDo you get this error in the console, or in the error log? For instance, if it is in the console, it is probably not preventing you from using content assist correctly.\n\n\nRegards,\n\nFr??d??ric Jouault\n",
    "\tFrom:\tMatthias Bohlen \u003cinfomail@mbohlen.de\u003e\n\tNewsgroups:\teclipse.modeling.m2m\n\tSubject:\tRe: [ATL] NPE in content assist\n\tDate:\tThu, 13 Dec 2007 23:24:08 +0100\n\nOn 2007-12-13 21:46:05 +0100, Fr??d??ric Jouault \u003cfrederic.jouault@univ-nantes.fr\u003e said:\n\nHi Matthias,\n\n \u003e\u003e rule UMLModelToEnterpriseAppModel {\n \u003e\u003e     from model : UML2!Model\n \u003e\u003e     to out : EnterpriseApp!EAppModel (\n \u003e\u003e         model\n \u003e\u003e     )\n \u003e\u003e }\n \u003e\n \u003e The word \"model\" before the round closing parenthesis is the place where\n \u003e I pressed Ctrl-Space.\n\n\u003e The content assist code uses TCS to parse programs into models that it can navigate to provide completion suggestions.\n\n\u003e In some cases, the program is not valid when you press Ctrl-Space, which can generate errors.\n\nWell, in the first place, I expected a list of attributes to appear when I type \".\" or Ctrl-Space. The list should contain the attributes of the model, so that I can select one of them, for example \"name\", and then continue typing the rest of the expression/statement.\n\n\u003e These errors should be caught and, for instance, added to the Problem model that the TCS injector can generate. Please, feel free to file a bug about this.\n\n\u003e Do you get this error in the console, or in the error log? For instance, if it is in the console, it is probably not preventing you from using content assist correctly.\n\nI get the error inside the console of the parent instance of Eclipse. ATL runs inside a runtime workbench, and the exception is displayed in the console of the original Eclipse instance from where I started the runtime workbench. Content assist does not work at all, though. No assistance visible.\n\nI\u0027ll add an entry to Bugzilla.\n\nCheers\nMatthias\n",
    "Hello,\n\nMatthias Bohlen a ?crit :\n\u003e Well, in the first place, I expected a list of attributes to appear when I type \".\" or Ctrl-Space. The list should contain the attributes of the model, so that I can select one of them, for example \"name\", and then continue typing the rest of the expression/statement.\n\u003e\n\nAt this time, content assist is in a minimal version. It provides attribute/references completion in context of left part of bindings only.\nFor instance, you should have content assist in place of \"model\" in your example, attempting you set a path or an uri for the EnterpriseApp metamodel.\n\nNote that -- @nsURI or -- @path declaration must be located BEFORE any ATL header, at the top of the file (that\u0027s not the case of your UML uri declaration).\n\n\u003e I get the error inside the console of the parent instance of Eclipse. ATL runs inside a runtime workbench, and the exception is displayed in the console of the original Eclipse instance from where I started the runtime workbench. Content assist does not work at all, though. No assistance visible.\n\u003e\n\nThis trace is caused by a \"printStackTrace\" in the TCSInjector, so it is not catchable... \nI submit a bug in TCS for that problem, see : https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d213022\n"
  ],
  "commentCreationDates": [
    "2007-12-13T22:28:11+01:00",
    "2007-12-13T22:29:10+01:00",
    "2007-12-13T22:30:22+01:00",
    "2007-12-14T14:50:42+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.gmt.tcs.injector.TCSInjector$RefSetting.doItForContext",
          "source": "TCSInjector.java:554"
        },
        {
          "method": "org.eclipse.gmt.tcs.injector.TCSInjector$RefSetting.doIt",
          "source": "TCSInjector.java:695"
        },
        {
          "method": "org.eclipse.gmt.tcs.injector.TCSInjector.performImportation",
          "source": "TCSInjector.java:284"
        },
        {
          "method": "org.eclipse.gmt.tcs.injector.TCSInjector.performImportation",
          "source": "TCSInjector.java:218"
        },
        {
          "method": "org.eclipse.gmt.tcs.injector.TCSInjector.performImportation",
          "source": "TCSInjector.java:167"
        },
        {
          "method": "org.eclipse.gmt.tcs.injector.TCSInjector.inject",
          "source": "TCSInjector.java:97"
        },
        {
          "method": "org.eclipse.m2m.atl.adt.ui.text.atl.AtlCompletionHelper.parseExpression",
          "source": "AtlCompletionHelper.java:170"
        },
        {
          "method": "org.eclipse.m2m.atl.adt.ui.text.atl.AtlCompletionHelper.computeContext",
          "source": "AtlCompletionHelper.java:88"
        },
        {
          "method": "org.eclipse.m2m.atl.adt.ui.text.atl.AtlCompletionProcessor.computeCompletionProposals",
          "source": "AtlCompletionProcessor.java:82"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals",
          "source": "ContentAssistant.java:1759"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals",
          "source": "CompletionProposalPopup.java:478"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$16",
          "source": "CompletionProposalPopup.java:475"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run",
          "source": "CompletionProposalPopup.java:410"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals",
          "source": "CompletionProposalPopup.java:404"
        },
        {
          "method": "org.eclipse.jface.text.contentassist.ContentAssistant$2.run",
          "source": "ContentAssistant.java:354"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:123"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3212"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2956"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1144"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "212949",
      "date": "2007-12-13T22:28:11+01:00",
      "product": "M2M",
      "component": "ATL-UI",
      "severity": "normal"
    }
  ],
  "groupId": "212949",
  "bugId": "212949",
  "date": "2007-12-13T22:28:11+01:00",
  "product": "M2M",
  "component": "ATL-UI",
  "severity": "normal"
}