{
  "comments": [
    "I was debugging an application and when stepping (F6) the following error is \ndumped to the log and the Debug view is un-useable.\n\njava.lang.NullPointerException\nat org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getSourceName\n(JDIStackFrame.java:837)\nat \norg.eclipse.jdt.launching.sourcelookup.JavaSourceLocator.getFullyQualfiedName\n(JavaSourceLocator.java:274)\nat org.eclipse.jdt.launching.sourcelookup.JavaSourceLocator.getSourceElement\n(JavaSourceLocator.java:242)\nat org.eclipse.jdt.debug.ui.JavaUISourceLocator.findSourceElement\n(JavaUISourceLocator.java:199)\nat org.eclipse.jdt.debug.ui.JavaUISourceLocator.getSourceElement\n(JavaUISourceLocator.java:145)\nat org.eclipse.debug.internal.ui.views.launch.LaunchView.lookupEditorInput\n(LaunchView.java:595)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchView.openEditorForStackFrame\n(LaunchView.java:650)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchView.showEditorForCurrentSelec\ntion(LaunchView.java:574)\nat org.eclipse.debug.internal.ui.views.launch.LaunchView.selectionChanged\n(LaunchView.java:450)\nat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:159)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1018)\nat org.eclipse.core.runtime.Platform.run(Platform.java:461)\nat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:157)\nat org.eclipse.jface.viewers.StructuredViewer.updateSelection\n(StructuredViewer.java:1282)\nat org.eclipse.jface.viewers.StructuredViewer.setSelection\n(StructuredViewer.java:1012)\nat org.eclipse.debug.internal.ui.views.launch.LaunchView.autoExpand\n(LaunchView.java:964)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspe\nndThreadEvent(LaunchViewEventHandler.java:243)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspe\nndEvent(LaunchViewEventHandler.java:193)\nat \norg.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleDebug\nEvents(LaunchViewEventHandler.java:103)\nat org.eclipse.debug.internal.ui.views.AbstractDebugEventHandler$1.run\n(AbstractDebugEventHandler.java:70)\nat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\nat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:102)\nat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2150)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1867)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2334)\nat org.eclipse.ui.internal.Workbench.run(Workbench.java:2317)\nat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:858)\nat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:299)\nat org.eclipse.core.launcher.Main.run(Main.java:765)\nat org.eclipse.core.launcher.Main.main(Main.java:599)",
    "Luc, it looks like we recently removed some null checks in the related code. It \nlooks safe, but obviously, an NPE is ocurring. The JDI spec claims that \nabstract methods can return a \"null\" location (but you shouldn\u0027t be able to \nstep through an abstract method).\n\nJean-Michel, what method were you stepping through?",
    "Our implementation of Method#location() returns null if there is no debug\ninformation for the method. It\u0027s not specified in the doc, but I thing our\nimplementation should return a Location object with -1 as codeIndex.\n\nAnyway, I don\u0027t like the code of JDIStackFrame#getSourceName() (and\ngetSourceName(stratum)), and I think it is wrong.\ngetUnderlyingMethod().location() returns the first valid location of the method.\nIt was OK in Java only world, but with JSR-045, the orginal source file used to\ncreated the beginning of the method may not be the source file used to created\nthe current position in the method.\nUsing getUnderlyingStackFrame().location() will return the correct location, and\nwill never return null.",
    "I was stepping through an anonymous class and there happened to be an NPE in \nthe code. When the NPE occured as I was stepping, I was unable to step anymore \nand that is when the Debug window went empty, actually it had the tree + signs \nbut no labels.\n\nAlso, if I wasn\u0027t stepping but just ran in Debug mode, this happened as well.",
    "*** Bug 44589 has been marked as a duplicate of this bug. ***",
    "We need to fix this for M4 - it\u0027s a regression.",
    "Fixed. Please verify, Luc. We\u0027ll need to open a different bug for the other bug \nyou noted (Our implementation of Method#location() returns null if there is no \ndebug information for the method. It\u0027s not specified in the doc, but I thing our\nimplementation should return a Location object with -1 as codeIndex). However, \nthis fixes the NPE/regression.\n",
    "Reproduced the problem and verified the fix.",
    "After working on the new code all day, I just got another NPE on the same line.",
    "This might be because of code I checked in this afternoon. :) Investigating.",
    "Yeah. Nevermind. :)",
    "Mark as verified."
  ],
  "commentCreationDates": [
    "2003-10-10T03:57:06+02:00",
    "2003-10-10T04:11:08+02:00",
    "2003-10-10T08:29:26+02:00",
    "2003-10-10T15:07:27+02:00",
    "2003-10-10T15:15:48+02:00",
    "2003-10-10T15:27:22+02:00",
    "2003-10-10T15:59:05+02:00",
    "2003-10-10T17:05:49+02:00",
    "2003-10-10T23:41:46+02:00",
    "2003-10-10T23:44:51+02:00",
    "2003-10-10T23:56:02+02:00",
    "2003-10-14T20:47:21+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getSourceName",
          "source": "JDIStackFrame.java:837"
        },
        {
          "method": "org.eclipse.jdt.launching.sourcelookup.JavaSourceLocator.getFullyQualfiedName",
          "source": "JavaSourceLocator.java:274"
        },
        {
          "method": "org.eclipse.jdt.launching.sourcelookup.JavaSourceLocator.getSourceElement",
          "source": "JavaSourceLocator.java:242"
        },
        {
          "method": "org.eclipse.jdt.debug.ui.JavaUISourceLocator.findSourceElement",
          "source": "JavaUISourceLocator.java:199"
        },
        {
          "method": "org.eclipse.jdt.debug.ui.JavaUISourceLocator.getSourceElement",
          "source": "JavaUISourceLocator.java:145"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.lookupEditorInput",
          "source": "LaunchView.java:595"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.openEditorForStackFrame",
          "source": "LaunchView.java:650"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.showEditorForCurrentSelection",
          "source": "LaunchView.java:574"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.selectionChanged",
          "source": "LaunchView.java:450"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:159"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1018"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:461"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:157"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1282"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:1012"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchView.autoExpand",
          "source": "LaunchView.java:964"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspendThreadEvent",
          "source": "LaunchViewEventHandler.java:243"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleSuspendEvent",
          "source": "LaunchViewEventHandler.java:193"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.launch.LaunchViewEventHandler.doHandleDebugEvents",
          "source": "LaunchViewEventHandler.java:103"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.AbstractDebugEventHandler$1.run",
          "source": "AbstractDebugEventHandler.java:70"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:102"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:2150"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1867"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2334"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:2317"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:299"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:765"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:599"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "44628",
      "date": "2003-10-10T03:57:06+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "44628",
  "bugId": "44628",
  "date": "2003-10-10T03:57:06+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}