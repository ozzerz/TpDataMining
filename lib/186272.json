{
  "comments": [
    "Ever since 2.2M5, BIRT has been unable to find my Java event handler classes \nat runtime.  I execute my reports from the API and whenever I try to use a \nJava event handler (I use them on datasets), I get the following:\n\nMay 9, 2007 2:55:30 PM \norg.eclipse.birt.report.engine.script.internal.ScriptExecutor getInstance\nWARNING: org.test.report.BirtHandler\njava.lang.ClassNotFoundException: org.test.report.BirtHandler\n at java.lang.ClassLoader.findClass(Unknown Source)\n at java.lang.ClassLoader.loadClass(Unknown Source)\n at java.lang.ClassLoader.loadClass(Unknown Source)\n at \norg.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal(BundleLoader.java:429)\n at \norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:369)\n at \norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:357)\n at \norg.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)\n at java.lang.ClassLoader.loadClass(Unknown Source)\n at \norg.eclipse.birt.report.engine.executor.ExecutionContext$ApplicationClassLoader.loadClass(ExecutionContext.java:1495)\n at \norg.eclipse.birt.report.engine.script.internal.ScriptExecutor.getInstance(ScriptExecutor.java:92)\n at \norg.eclipse.birt.report.engine.script.internal.DataSetScriptExecutor.initEventHandler(DataSetScriptExecutor.java:49)\n at \norg.eclipse.birt.report.engine.script.internal.ScriptDataSetScriptExecutor.initEventHandler(ScriptDataSetScriptExecutor.java:47)\n at \norg.eclipse.birt.report.engine.script.internal.DataSetScriptExecutor.\u003cinit\u003e(DataSetScriptExecutor.java:39)\n at \norg.eclipse.birt.report.engine.script.internal.ScriptDataSetScriptExecutor.\u003cinit\u003e(ScriptDataSetScriptExecutor.java:42)\n at \norg.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.newScriptDataSet(ModelDteApiAdapter.java:551)\n at \norg.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.createDataSetDesign(ModelDteApiAdapter.java:206)\n at \norg.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.doDefineDataSet(ModelDteApiAdapter.java:274)\n at \norg.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.defineDataSet(ModelDteApiAdapter.java:233)\n at \norg.eclipse.birt.report.engine.data.dte.AbstractDataEngine.prepare(AbstractDataEngine.java:124)\n at \norg.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:104)\n at \norg.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportExecutor.execute(LocalizedReportExecutor.java:50)\n at \norg.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:76)\n at \norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:205)\n at \norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:125)\n\n\nPrior to 2.2M5, this has always worked flawlessly. I\u0027ve put all jar files \nfrom BirtRuntime/ReportEngine/lib into my web app\u0027s lib dir.\nI rely heavily on the event handlers, and they\u0027re integrated into my app \nrather than a separate jar for scriptlib (I think I saw to do that for when \nusing the sample web viewer).\n\n\n\n\n\n\n\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nANOTHER NOTE:  When starting up the engine, I now get this message (even \nthough I don\u0027t want a sample db).\n\nAlthough I didn\u0027t notice it having any effect, it might be related.\n\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nMay 9, 2007 2:54:38 PM \norg.eclipse.birt.report.data.oda.sampledb.SampledbPlugin start\n\nINFO: Sampledb plugin starts up. Current startCount\u003d0\n\nMay 9, 2007 2:54:38 PM \norg.eclipse.birt.report.data.oda.sampledb.SampledbPlugin init\n\nINFO: Creating Sampledb database at location \nC:\\Program Files\\Apache\\Tomcat\\temp/BIRTSampleDB_1178744078729_1f9f538\n\nMay 9, 2007 2:54:41 PM \norg.eclipse.birt.report.model.metadata.ExtensionLoader handleError\n\nSEVERE: Message:The element type \"org.eclipse.birt.chart.reportitem\" is \ninvalid. Error code:INVALID_ELEMENT_TYPE\n\nMay 9, 2007 2:54:41 PM \norg.eclipse.birt.report.model.metadata.ExtensionLoader handleError\n\nSEVERE: Message:The element type \"org.eclipse.birt.report.engine\" is \ninvalid. Error code:INVALID_ELEMENT_TYPE",
    "do you set the appclassloader of the report engine? it is set in the appContext through EngineConstants.APPCONTEXT_CLASSLOADER_KEY. It should be the web app class loader in your case.",
    "No, I hadn\u0027t done that, so I tried it and it worked!  Sorry for the false alarm.  It used to work without doing this in previous versions.\n\nengine.getConfig().getAppContext().put(EngineConstants.APPCONTEXT_CLASSLOADER_KEY, ReportEngine.class.getClassLoader())\n\nThanks for the quick response.\n\n\n\n(In reply to comment #1)\n\u003e do you set the appclassloader of the report engine? it is set in the appContext\n\u003e through EngineConstants.APPCONTEXT_CLASSLOADER_KEY. It should be the web app\n\u003e class loader in your case.\n\u003e \n\n"
  ],
  "commentCreationDates": [
    "2007-05-10T00:57:10+02:00",
    "2007-05-10T05:48:44+02:00",
    "2007-05-10T06:21:15+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassNotFoundException",
      "message": "org.test.report.BirtHandler",
      "elements": [
        {
          "method": "java.lang.ClassLoader.findClass",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal",
          "source": "BundleLoader.java:429"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:369"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:357"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass",
          "source": "DefaultClassLoader.java:83"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext$ApplicationClassLoader.loadClass",
          "source": "ExecutionContext.java:1495"
        },
        {
          "method": "org.eclipse.birt.report.engine.script.internal.ScriptExecutor.getInstance",
          "source": "ScriptExecutor.java:92"
        },
        {
          "method": "org.eclipse.birt.report.engine.script.internal.DataSetScriptExecutor.initEventHandler",
          "source": "DataSetScriptExecutor.java:49"
        },
        {
          "method": "org.eclipse.birt.report.engine.script.internal.ScriptDataSetScriptExecutor.initEventHandler",
          "source": "ScriptDataSetScriptExecutor.java:47"
        },
        {
          "method": "org.eclipse.birt.report.engine.script.internal.DataSetScriptExecutor.\u003cinit\u003e",
          "source": "DataSetScriptExecutor.java:39"
        },
        {
          "method": "org.eclipse.birt.report.engine.script.internal.ScriptDataSetScriptExecutor.\u003cinit\u003e",
          "source": "ScriptDataSetScriptExecutor.java:42"
        },
        {
          "method": "org.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.newScriptDataSet",
          "source": "ModelDteApiAdapter.java:551"
        },
        {
          "method": "org.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.createDataSetDesign",
          "source": "ModelDteApiAdapter.java:206"
        },
        {
          "method": "org.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.doDefineDataSet",
          "source": "ModelDteApiAdapter.java:274"
        },
        {
          "method": "org.eclipse.birt.report.engine.adapter.ModelDteApiAdapter.defineDataSet",
          "source": "ModelDteApiAdapter.java:233"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.prepare",
          "source": "AbstractDataEngine.java:124"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ReportExecutor.execute",
          "source": "ReportExecutor.java:104"
        },
        {
          "method": "org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportExecutor.execute",
          "source": "LocalizedReportExecutor.java:50"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:76"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
          "source": "RunAndRenderTask.java:205"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:125"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "186272",
      "date": "2007-05-10T00:57:10+02:00",
      "product": "BIRT",
      "component": "Report Engine",
      "severity": "blocker"
    }
  ],
  "groupId": "186272",
  "bugId": "186272",
  "date": "2007-05-10T00:57:10+02:00",
  "product": "BIRT",
  "component": "Report Engine",
  "severity": "blocker"
}