{
  "comments": [
    "build 20020430\n\ngetTopIndex has undefined semantics when no line is fully visible (e.g., \nbecause the client area is not high enough). It is spec\u0027d to return the topmost \nfully visible line which leaves open this boundary condition.\nThe current behavior in this case is unexpected from a visual point of view \n(i.e., from the users perspective).\nWhen the second of three lines is only partially visible (index 1) but the line \nat index 2 is not visible at all (or also only partially visible) getTopIndex \nreturns 2 because that is the index of the line that would be fully visible if \nthere was enough vertical space.\nThis causes similar problems as reported in bug 8648 when moving the cursor \ndown. When the cursor is moved from index 1 down the line at index 2 is not \nrevealed unless cursor down is pressed again.",
    "Should be fixed, but I think we should defer for now (i.e., it\u0027s a special, \nunlikely case).  Do you agree?",
    "Agree",
    "Reopen",
    "There are essentially two options to define the behavior when no line is fully \nvisible.\n1) The top most partially visible line is the top index\n2) The partially visible line that is visible to the greatest extent is the top \nindex\n\nThe difference is that with two partially visible lines a and b, a being the \ntopmost line, line b could actually be \"more\" visible than line a. \nE.g., line a has 5 out of 20 pixels visible and line b has 10 out of 20 pixels \nvisible.\nFrom a visual point of view line b should probably be the top index since line \na is hardly visible. This would also automatically result in better keyboard \nline up/down navigation behavior in this special case.\nThe disadvantage is that the specification would be slightly more complex and \nawkward than the straightforward \"top index \u003d\u003d top fully visible line or top \npartially visible line if there is no fully visible line\".",
    "Do the simpler option - the top most partially visible line.",
    "Fixed",
    "In the following scenario the top index is left invalid by calculateTopIndex:\nIn Eclipse:\n-make sure the console has some lines\n-resize the console very small (\u003c one line visible) \n-scroll the console all the way to the bottom so that the last line is only \npartially visible\n-resize the console so that no lines are visible (text widget height \u003d\u003d 0) \n-\u003ethe following walkback occurs:\njava.lang.IllegalArgumentException: Argument not valid\n\tat org.eclipse.swt.SWT.error(SWT.java:2125)\n\tat org.eclipse.swt.SWT.error(SWT.java:2071)\n\tat org.eclipse.jface.text.DocumentAdapter.getOffsetAtLine\n(DocumentAdapter.java(Compiled Code))\n\tat org.eclipse.swt.custom.StyledText.calculateTopIndex\n(StyledText.java:1735)\n\tat org.eclipse.swt.custom.StyledText.handleResize(StyledText.java:4960)\n[...]\n\nUsually the top index identifies the topmost fully visible line, if no line is \nfully visible it identifies the partially visible line (we added this to fix \nthis bug). However, if the client area height is 0 the code that fixes the top \nindex to be the partially visible line does not run. \nWe should change this so that the top index is never greater than the last line \nin the content.",
    "Fixed in build \u003e20021025.\nSee also bug 24264."
  ],
  "commentCreationDates": [
    "2002-05-02T16:14:09+02:00",
    "2002-05-02T17:21:06+02:00",
    "2002-05-02T18:35:36+02:00",
    "2002-07-08T16:50:57+02:00",
    "2002-07-10T23:51:21+02:00",
    "2002-07-11T16:16:17+02:00",
    "2002-07-11T19:46:35+02:00",
    "2002-10-21T23:20:53+02:00",
    "2002-10-25T18:38:55+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Argument not valid",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2125"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2071"
        },
        {
          "method": "org.eclipse.jface.text.DocumentAdapter.getOffsetAtLine",
          "source": "DocumentAdapter.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.calculateTopIndex",
          "source": "StyledText.java:1735"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.handleResize",
          "source": "StyledText.java:4960"
        }
      ],
      "number": 0,
      "commentIndex": 7,
      "bugId": "15088",
      "date": "2002-10-21T23:20:53+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "15088",
  "bugId": "15088",
  "date": "2002-05-02T16:14:09+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}