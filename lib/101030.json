{
  "comments": [
    "NOTE: Using a new Eclipse SDK Version: 3.1.0 Build id: I20050610-1757 (RC2)\n\nWhen deactivating the Thumbnail object, it calls the ThumbnailUpdater to stop\n(), which in turn calls thumbnailGC.dispose()and afterwards calls \nthumbnailGraphics.dispose(), now, the thumbnailGraphics.dispose() calls its \nSWTGraphics to popState() whihc ends up accessing the GC object -the very same \nthumbnailGC that was disposed earlier by the ThumbnailUpdater- and this throws \nan SWTException indicating that the Graphics object is disposed and hence \nshould not be accessed.\n\nThis is the stack trace:\n\norg.eclipse.swt.SWTException: Graphic is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2940)\n\tat org.eclipse.swt.SWT.error(SWT.java:2863)\n\tat org.eclipse.swt.SWT.error(SWT.java:2834)\n\tat org.eclipse.swt.graphics.GC.getAdvanced(GC.java:2521)\n\tat org.eclipse.draw2d.SWTGraphics.restoreState(SWTGraphics.java:829)\n\tat org.eclipse.draw2d.SWTGraphics.popState(SWTGraphics.java:736)\n\tat org.eclipse.draw2d.ScaledGraphics.popState(ScaledGraphics.java:495)\n\tat org.eclipse.draw2d.ScaledGraphics.dispose(ScaledGraphics.java:167)\n\tat org.eclipse.draw2d.parts.Thumbnail$ThumbnailUpdater.stop\n(Thumbnail.java:258)\n\tat org.eclipse.draw2d.parts.Thumbnail$ThumbnailUpdater.run\n(Thumbnail.java:179)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:118)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3035)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2694)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1716)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1680)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:365)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:103)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "I can\u0027t reproduce this problem. When I get to the dispose() path, the \nstackpointer is at zero, and no states are restored. Is there any reason why \nthe ScaledGraphics still has a pushed state in your scenario? After all figures \nare finished painting, the state should be back to initial.",
    "We\u0027ll have a look at our figure code to see if we\u0027re missing a popState in one \nof our figure paint routines.  Could this be the issue?  However, should the \nGEF code be resilient to this?",
    "It\u0027s basically a bug.  Because of advanced graphics support, we now access the \nGC during restore state, which means that you can\u0027t dispose an SWTGraphics \nafter disposing its GC (it\u0027s perfectly valid to leave a graphics with pushed \nstates, but typically figures don\u0027t do this). So this is a new requirement on \nusing Graphics which wasn\u0027t there in 3.0.\n\nBut, it\u0027s also very late in the 3.1 cycle so all changes are scrutinized and we \ndon\u0027t want to make any changes unless its critical."
  ],
  "commentCreationDates": [
    "2005-06-21T14:46:33+02:00",
    "2005-06-21T15:55:23+02:00",
    "2005-06-21T23:31:46+02:00",
    "2005-06-22T00:18:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Graphic is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2940"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2863"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2834"
        },
        {
          "method": "org.eclipse.swt.graphics.GC.getAdvanced",
          "source": "GC.java:2521"
        },
        {
          "method": "org.eclipse.draw2d.SWTGraphics.restoreState",
          "source": "SWTGraphics.java:829"
        },
        {
          "method": "org.eclipse.draw2d.SWTGraphics.popState",
          "source": "SWTGraphics.java:736"
        },
        {
          "method": "org.eclipse.draw2d.ScaledGraphics.popState",
          "source": "ScaledGraphics.java:495"
        },
        {
          "method": "org.eclipse.draw2d.ScaledGraphics.dispose",
          "source": "ScaledGraphics.java:167"
        },
        {
          "method": "org.eclipse.draw2d.parts.Thumbnail$ThumbnailUpdater.stop",
          "source": "Thumbnail.java:258"
        },
        {
          "method": "org.eclipse.draw2d.parts.Thumbnail$ThumbnailUpdater.run",
          "source": "Thumbnail.java:179"
        },
        {
          "method": "org.eclipse.swt.widgets.RunnableLock.run",
          "source": "RunnableLock.java:35"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:118"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3035"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2694"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1716"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1680"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:365"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "101030",
      "date": "2005-06-21T14:46:33+02:00",
      "product": "GEF",
      "component": "draw2d",
      "severity": "normal"
    }
  ],
  "groupId": "101030",
  "bugId": "101030",
  "date": "2005-06-21T14:46:33+02:00",
  "product": "GEF",
  "component": "draw2d",
  "severity": "normal"
}