{
  "comments": [
    "Inserting text into the task editor can be terribly slow (~5 characters / second). The CPU jumps to 100% but I can\u0027t tell for sure what it is processing. When I turn of spell checking and restart Eclipse the problem seems to go away.\n\nThis might have started when Quick Fix was added.\n\nEnvironment:\n\nUbuntu/feisty, Eclipse 3.3, Mylyn bootstrapped",
    "When I set the platform dictionary to None the performance problems also disappear.",
    "Steffen: by inserting text do you mean typing or pasting?",
    "Typing.",
    "I don\u0027t see any slowness of this sort.  The squiggly annotations show up lazily, i.e. only when I stop typing.\n\nDani: are you aware of any performance of this sort, in particular ones that could have to do with a dictionary setting on Linux?",
    "It can especially happen if you have long lines (this is fixed in 3.4 M2, see my comments in bug 204054) and if you have tons of spelling errors. Try out upcoming M2.\n\nAlso, if the task editor uses SWT.WRAP and hence the lines don\u0027t look long but indeed are due to auto-wrapping, then this \"might\" cause trouble as Platform Text currently neither supports nor tests with SWT.WRAP style.",
    "Regarding last paragraph in previous comment: this SWT bug might be of interest too: bug 168557.",
    "Daniel:  Thanks for clarifying.  We will test with M2 and report back if that does not resolve the problem.\n\nSteffen: please post back when you get a chance to verify the behavior on an M2 integration build.\n\nRob: please investigate our use of SWT.WRAP as suggested by comment#5.",
    "Here are more details:\n\n- the problem is not related to the amount of text or line length, it is slow as soon as I start typing\n- most of the CPU time is spent by the system (hinting at I/O)\n- I have a large user dictionary (~1.3 MB)\n\nI am now using an empty user dictionary and have system dictionary turned back on which seems to have helped. I need to narrow down better when the problem appears and check older versions of Mylyn to determine if this is system, Eclipse or Mylyn related.",
    "I have profiled the problem on Eclipse 3.4M2 but I am not sure how to interpret the results that are attached as a PostScript file:\n\nEssentially StyledText.handleKeyDown() triggers a call to AnnotationPainter.drawDecoration() which calls StyledText.getOffsetAtLocation() somewhere down the line. This call spends 70% of its time in the SWT error handling code which I suspect is causing the slow down,\n\nI can\u0027t reliably reproduce the problem but once Eclipse gets into this state only a restart can fix the slow task editors. It seems to also affect other text input fields but it is not as noticeable as with the Mylyn task editors.\n\nDaniel, has this been reported before or do you have hints how to debug further?",
    "Created an attachment (id\u003d83369)\nprofiler output\n\n",
    "This is possibly unrelated but I found this on the console while working bootstrapped in Eclipse 3.4M3:\n\nException in thread \"Thread-757\" java.util.ConcurrentModificationException\n\tat java.util.HashMap$HashIterator.nextEntry(HashMap.java:793)\n\tat java.util.HashMap$KeyIterator.next(HashMap.java:828)\n\tat org.eclipse.jface.text.source.AnnotationModel.getAnnotationIterator(AnnotationModel.java:553)\n\tat org.eclipse.jface.text.source.AnnotationModel.getAnnotationIterator(AnnotationModel.java:531)\n\tat org.eclipse.jface.text.source.projection.ProjectionSummary.removeSummaries(ProjectionSummary.java:193)\n\tat org.eclipse.jface.text.source.projection.ProjectionSummary.internalUpdateSummaries(ProjectionSummary.java:166)\n\tat org.eclipse.jface.text.source.projection.ProjectionSummary.access$3(ProjectionSummary.java:148)\n\tat org.eclipse.jface.text.source.projection.ProjectionSummary$Summarizer.run(ProjectionSummary.java:70)\n"
  ],
  "commentCreationDates": [
    "2007-09-19T17:30:54+02:00",
    "2007-09-19T17:50:05+02:00",
    "2007-09-20T06:55:18+02:00",
    "2007-09-20T06:56:18+02:00",
    "2007-09-20T07:05:15+02:00",
    "2007-09-20T09:38:13+02:00",
    "2007-09-20T09:39:41+02:00",
    "2007-09-20T21:27:26+02:00",
    "2007-09-20T21:59:24+02:00",
    "2007-11-20T22:04:53+01:00",
    "2007-11-20T22:07:50+01:00",
    "2007-11-29T22:51:03+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.ConcurrentModificationException",
      "elements": [
        {
          "method": "java.util.HashMap$HashIterator.nextEntry",
          "source": "HashMap.java:793"
        },
        {
          "method": "java.util.HashMap$KeyIterator.next",
          "source": "HashMap.java:828"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationModel.getAnnotationIterator",
          "source": "AnnotationModel.java:553"
        },
        {
          "method": "org.eclipse.jface.text.source.AnnotationModel.getAnnotationIterator",
          "source": "AnnotationModel.java:531"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSummary.removeSummaries",
          "source": "ProjectionSummary.java:193"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSummary.internalUpdateSummaries",
          "source": "ProjectionSummary.java:166"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSummary.access$3",
          "source": "ProjectionSummary.java:148"
        },
        {
          "method": "org.eclipse.jface.text.source.projection.ProjectionSummary$Summarizer.run",
          "source": "ProjectionSummary.java:70"
        }
      ],
      "number": 0,
      "commentIndex": 11,
      "bugId": "203991",
      "date": "2007-11-29T22:51:03+01:00",
      "product": "Mylyn",
      "component": "Tasks",
      "severity": "normal"
    }
  ],
  "groupId": "203991",
  "bugId": "203991",
  "date": "2007-09-19T17:30:54+02:00",
  "product": "Mylyn",
  "component": "Tasks",
  "severity": "normal"
}