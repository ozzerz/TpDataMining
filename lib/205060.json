{
  "comments": [
    "The testcase testDescriptorEvents01 fails intermittently on win32, but I suspect it could fail on other platforms.  The testcase is testing the dynamic support of the applications extension point.  The timing issues may be related to the fact that extension registry events are sent asynchronously.",
    "Stacktrace when this testcase fails:\n\njunit.framework.AssertionFailedError: failed waiting for descriptor event: appadmin.test01.simpleApp modified true true\nat org.eclipse.osgi.tests.appadmin.ApplicationAdminTest$ApplicationDescriptorTracker.waitForEvent(ApplicationAdminTest.java:652)\nat org.eclipse.osgi.tests.appadmin.ApplicationAdminTest.testDescriptorEvents01(ApplicationAdminTest.java:218)\nat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\nat org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:58)\nat org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run(CoreTestApplication.java:24)\nat org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod(EclipseAppContainer.java:570)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:176)\nat org.eclipse.equinox.internal.app.AnyThreadAppLauncher.run(AnyThreadAppLauncher.java:26)\nat java.lang.Thread.run(Thread.java:534)\n\nThe testcase is waiting for the ApplicationDescriptor service properties to be modified with a True value for the locked property.  This does not appear to be related to the async nature of extension registry events because we have a valid ApplicationDescriptor at this point.  The test simply locks the app descriptor and waits for the service modified event.  This should happen synchronously so there should not be a timing issue at this point.  Perhaps there is another unrelated service event occurring during the test which is inserting itself into the test results.\n",
    "I released some additional diagnostics into the testcase to show what events have been processed by the listeners.  This should help us determine if there are extra events flying around.",
    "Created an attachment (id\u003d80301)\npatch\n\nThis is failing because the thread processing the registry changed events has not been able to set the ServiceRegistration for the ApplicationDescriptor yet.  When another thread tries to lock the descriptor it is not able to refresh the service registration properties because the registration is missing.  We need some thread synchronization to allow the registration to be set.  The EclipseAppHandle has a similar issue.  This patch fixes both issues.",
    "Patch released."
  ],
  "commentCreationDates": [
    "2007-10-01T16:42:27+02:00",
    "2007-10-02T17:07:55+02:00",
    "2007-10-02T17:28:18+02:00",
    "2007-10-13T14:42:35+02:00",
    "2007-10-13T14:52:23+02:00"
  ],
  "traces": [
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "message": "failed waiting for descriptor event: appadmin.test01.simpleApp modified true true",
      "elements": [
        {
          "method": "org.eclipse.osgi.tests.appadmin.ApplicationAdminTest$ApplicationDescriptorTracker.waitForEvent",
          "source": "ApplicationAdminTest.java:652"
        },
        {
          "method": "org.eclipse.osgi.tests.appadmin.ApplicationAdminTest.testDescriptorEvents01",
          "source": "ApplicationAdminTest.java:218"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run",
          "source": "JUnit3TestReference.java:130"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.TestExecution.run",
          "source": "TestExecution.java:38"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:460"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:673"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main",
          "source": "RemotePluginTestRunner.java:58"
        },
        {
          "method": "org.eclipse.pde.internal.junit.runtime.CoreTestApplication.run",
          "source": "CoreTestApplication.java:24"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod",
          "source": "EclipseAppContainer.java:570"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:176"
        },
        {
          "method": "org.eclipse.equinox.internal.app.AnyThreadAppLauncher.run",
          "source": "AnyThreadAppLauncher.java:26"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "205060",
      "date": "2007-10-02T17:07:55+02:00",
      "product": "Equinox",
      "component": "Bundles",
      "severity": "normal"
    }
  ],
  "groupId": "205060",
  "bugId": "205060",
  "date": "2007-10-01T16:42:27+02:00",
  "product": "Equinox",
  "component": "Bundles",
  "severity": "normal"
}