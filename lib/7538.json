{
  "comments": [
    "When \"Show source of selected element only\" ist selected, the workbench crashes \nwhen a changed method is replaced from local history twice in a row. i.e. \nchange a method, save it, select \"Replace With / Local History\" from the \ncontext menu in the outline view , click \"Replace\", select \"Replace With / \nLocal History\" again, click \"Replace\" again and the workbench crashes with an \nindex out of bounds exception",
    "Could you please append below the stacktrace you can find inside the .log file \n(under \u003cworkspace\u003e/.metadata) ?\n\nThis will help diagnose the problem.",
    "Log: Fri Jan 18 15:31:43 GMT+01:00 2002\n1 org.eclipse.core.resources 4 Unhandled exception caught in event loop.\nLog: Fri Jan 18 15:31:43 GMT+01:00 2002\n4 org.eclipse.ui 0 Index out of bounds\njava.lang.IllegalArgumentException: Index out of bounds\n\tat org.eclipse.swt.SWT.error(SWT.java:1873)\n\tat org.eclipse.swt.SWT.error(SWT.java:1819)\n\tat org.eclipse.swt.custom.StyledText.getLocationAtOffset\n(StyledText.java:3294)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$BracketHighlighter$\nHighlightBrackets.draw(CompilationUnitEditor.java:231)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$BracketHighlighter$\nHighlightBrackets.handleDrawRequest(CompilationUnitEditor.java:222)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$BracketHighlighter$\nHighlightBrackets.paintControl(CompilationUnitEditor.java:211)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:78)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:74)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:839)\n\tat org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java:652)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:2637)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:1794)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1160)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1198)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:815)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:798)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:821)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:151)\n\tat org.eclipse.core.launcher.Main.run(Main.java:502)\n\tat org.eclipse.core.launcher.Main.main(Main.java:362)\nLog: Fri Jan 18 15:31:43 GMT+01:00 2002\n4 org.eclipse.core.runtime 0 Unhandled exception caught in event loop.\norg.eclipse.swt.SWTException: Failed to execute runnable \n(java.lang.IllegalArgumentException: Index out of bounds)\n\tat org.eclipse.swt.SWT.error(SWT.java:1887)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:96)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1385)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1203)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:536)\n\tat org.eclipse.jface.window.Window.open(Window.java:523)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError\n(MessageDialog.java:318)\n\tat org.eclipse.ui.internal.Workbench.handleExceptionInEventLoop\n(Workbench.java:387)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:818)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:798)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:821)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:151)\n\tat org.eclipse.core.launcher.Main.run(Main.java:502)\n\tat org.eclipse.core.launcher.Main.main(Main.java:362)\nLog: Fri Jan 18 15:31:43 GMT+01:00 2002\n4 org.eclipse.core.runtime 0 Failed to execute runnable \n(java.lang.IllegalArgumentException: Index out of bounds)\norg.eclipse.swt.SWTException: Failed to execute runnable \n(java.lang.IllegalArgumentException: Index out of bounds)\n\tat org.eclipse.swt.SWT.error(SWT.java:1887)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages\n(Synchronizer.java:96)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1385)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1203)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:536)\n\tat org.eclipse.jface.window.Window.open(Window.java:523)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError\n(MessageDialog.java:318)\n\tat org.eclipse.ui.internal.Workbench.handleExceptionInEventLoop\n(Workbench.java:387)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:818)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:798)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:821)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:151)\n\tat org.eclipse.core.launcher.Main.run(Main.java:502)\n\tat org.eclipse.core.launcher.Main.main(Main.java:362)\n",
    "Then this indicates a JDT/UI bug (likely the refresh against shorter source bug)",
    "Andreas,\n\nI cannot reproduce this with 20020115-I or 20020122-I.\nCan you give a minimal example file together with the exact key/mouse strokes\nto produce the exception? Also, which build are you using?",
    "Hi,\n\nI\u0027m using build 20011219.\n1. Create a java project \"crash\"\n2. Create a class \"x\" in the default package\n3. Add a method \"void i() {}\" to the class\n4. Make sure that the \"Show source of selected item only\" is selected\n5. Select the method \"i\" in the outline and make a change to it\n6. Save the change\n7. In the outline select \"i\", popup the context menu and select \"Replace \nwith\\Local History...\"\n8. In the dialog just click \"Replace\"\n9. Perform steps 7 and 8 again.\n\nSometimes the workbench crashs after step 9, sometimes you need perform step 9 \nagain.\n\nHope this helps\n",
    "I\u0027m sorry Andreas, I still can\u0027t reproduce it w/ S-20011219.\nI assume that after step 3, you do a save? Otherwise the replace from local \nhistory won\u0027t show any difference. As a change to the method, I added a line of \ncomment or a print statement. In any case, I didn\u0027t manage to get the exception.",
    "Yes, I do a save after entering the method and after changing it.\nI made the following observation with lastest stable build 20020214:\nThe problem didn\u0027t show up but now the class is selected in the outline after I \ndid a replace of the method from local history. To be more precise before doing \na replace the method is selected and the edit pane shows only the method \nsource, after the replace the class is selected and the edit pane shows the \nclass source.\n",
    "I changed priority and severity since it\u0027s no longer crashing.",
    "In 2.0 replace a method from local histroy with \"Show source of selected \nelement\" doesn\u0027t select the type anymore.\n\n"
  ],
  "commentCreationDates": [
    "2002-01-14T16:29:08+01:00",
    "2002-01-16T14:13:04+01:00",
    "2002-01-18T14:31:57+01:00",
    "2002-01-23T12:38:51+01:00",
    "2002-01-23T17:20:00+01:00",
    "2002-01-25T16:48:44+01:00",
    "2002-02-08T09:52:07+01:00",
    "2002-02-25T09:37:02+01:00",
    "2002-03-08T11:53:42+01:00",
    "2002-08-09T10:23:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1873"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1819"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getLocationAtOffset",
          "source": "StyledText.java:3294"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$BracketHighlighter$HighlightBrackets.draw",
          "source": "CompilationUnitEditor.java:231"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$BracketHighlighter$HighlightBrackets.handleDrawRequest",
          "source": "CompilationUnitEditor.java:222"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$BracketHighlighter$HighlightBrackets.paintControl",
          "source": "CompilationUnitEditor.java:211"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:78"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:74"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:839"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_PAINT",
          "source": "Composite.java:652"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:1794"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1160"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1198"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:815"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:798"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:821"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:151"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:502"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:362"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "7538",
      "date": "2002-01-18T14:31:57+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1887"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:96"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:1385"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1203"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:536"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:523"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:318"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.handleExceptionInEventLoop",
          "source": "Workbench.java:387"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:818"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:798"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:821"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:151"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:502"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:362"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "7538",
      "date": "2002-01-18T14:31:57+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:1887"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:96"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:1385"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1203"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:536"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:523"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:318"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.handleExceptionInEventLoop",
          "source": "Workbench.java:387"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:818"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:798"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:821"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:151"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:502"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:362"
        }
      ],
      "number": 2,
      "commentIndex": 2,
      "bugId": "7538",
      "date": "2002-01-18T14:31:57+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "7538",
  "bugId": "7538",
  "date": "2002-01-14T16:29:08+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}