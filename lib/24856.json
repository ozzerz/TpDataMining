{
  "comments": [
    " ",
    "In the emacs key configuration, open a new file, and type\n\u0027abcdefghij\u0027. hold the shift key, and back up over the last five letters. press \nshift-delete (cut). press shift-insert (paste). back up over the last five \nletters again. shift-delete (cut). press \u0027ctrl-x U\u0027 to undo. does not undo. \npress \u0027ctrl-x U\u0027 again. IllegalArgumentException in log: \u0027Index out of bounds\u0027.\n\nThis does not happen in the default key configuration using Ctrl+X, Ctrl+V, \nCtrl+Z, etc, but does happens in I1015, as well as today with the entirely new \nkey bindings engine, so were not convinced that key bindings are the cause. \nThis may be related the fact the emacs configuration uses a special \nsequence \u0027Ctrl-X U\u0027, perhaps conflicting with another key listener somewhere?\n\n\n!SESSION Oct 16, 2002 15:39:04.155 ---------------------------------------------\njava.version\u003d1.4.1-rc\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -os win32 -ws win32 -arch x86 -install file:D:/eclipse-\nSDK-I20021015-win32/eclipse/\n!ENTRY org.eclipse.ui 4 4 Oct 16, 2002 15:39:04.155\n!MESSAGE Unhandled exception caught in event loop.\n!ENTRY org.eclipse.ui 4 0 Oct 16, 2002 15:39:04.185\n!MESSAGE Index out of bounds\n!STACK 0\njava.lang.IllegalArgumentException: Index out of bounds\n\tat org.eclipse.swt.SWT.error(SWT.java:2125)\n\tat org.eclipse.swt.SWT.error(SWT.java:2071)\n\tat org.eclipse.swt.custom.StyledText.replaceTextRange\n(StyledText.java:6124)\n\tat org.eclipse.jface.text.DefaultUndoManager$TextCommand.undoTextChange\n(DefaultUndoManager.java:82)\n\tat org.eclipse.jface.text.DefaultUndoManager$TextCommand.undo\n(DefaultUndoManager.java:93)\n\tat org.eclipse.jface.text.DefaultUndoManager.internalUndo\n(DefaultUndoManager.java:506)\n\tat org.eclipse.jface.text.DefaultUndoManager.undo\n(DefaultUndoManager.java:783)\n\tat org.eclipse.jface.text.TextViewer.doOperation(TextViewer.java:2576)\n\tat org.eclipse.jface.text.source.SourceViewer.doOperation\n(SourceViewer.java:435)\n\tat org.eclipse.ui.texteditor.TextOperationAction$1.run\n(TextOperationAction.java:119)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:66)\n\tat org.eclipse.ui.texteditor.TextOperationAction.run\n(TextOperationAction.java:117)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:749)\n\tat \norg.eclipse.ui.internal.registry.AcceleratorScope$AcceleratorAction.run\n(AcceleratorScope.java:289)\n\tat org.eclipse.ui.internal.registry.AcceleratorScope.processKey\n(AcceleratorScope.java:249)\n\tat org.eclipse.ui.internal.KeyBindingMenu$1.keyPressed\n(KeyBindingMenu.java:54)\n\tat org.eclipse.ui.internal.KeyTable.handleEvent(KeyTable.java:75)\n\tat org.eclipse.ui.internal.KeyTable$3.handleEvent(KeyTable.java:116)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1622)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1368)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1360)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1343)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:775)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:247)\n\tat org.eclipse.core.launcher.Main.run(Main.java:703)\n\tat org.eclipse.core.launcher.Main.main(Main.java:539)",
    "Simplified scenario using Emacs keybindings:\n\n1) type a line of text\n2) select the second half of the line\n3) Shift+Del\n4) Ctrl+X U\n-\u003e Nothing happens\n\nThat nothings happens eventually caused the problem described. The undo \noperation is triggered by the key binding service and wants to manipulate the \ntext widget. The widget sends out a verify event that is silently turned down \nby the key binding service. -\u003e The widget is not changed, although the undo \nmanager thinks it has been changed. The undo manager can be made more robust, \nbut this does not solve the problem that undo does not work. See the following \nstack:\n\norg.eclipse.ui.internal.WWinKeyBindingService$1.verifyText\n(org.eclipse.swt.events.VerifyEvent) line: 66\norg.eclipse.ui.internal.AcceleratorMenu$1.handleEvent\n(org.eclipse.swt.widgets.Event) line: 40\norg.eclipse.swt.widgets.EventTable.sendEvent(org.eclipse.swt.widgets.Event) \nline: 77\norg.eclipse.swt.custom.StyledText(org.eclipse.swt.widgets.Widget).sendEvent\n(int, org.eclipse.swt.widgets.Event) line: 849\norg.eclipse.swt.custom.StyledText\n(org.eclipse.swt.widgets.Widget).notifyListeners(int, \norg.eclipse.swt.widgets.Event) line: 637\norg.eclipse.swt.custom.StyledText.modifyContent(org.eclipse.swt.widgets.Event, \nboolean) line: 5328\norg.eclipse.swt.custom.StyledText.replaceTextRange(int, int, java.lang.String) \nline: 6132\norg.eclipse.jface.text.DefaultUndoManager$TextCommand.undoTextChange\n(org.eclipse.swt.custom.StyledText) line: 82\norg.eclipse.jface.text.DefaultUndoManager$TextCommand.undo\n(org.eclipse.swt.custom.StyledText) line: 93\norg.eclipse.jface.text.DefaultUndoManager.internalUndo() line: 506\norg.eclipse.jface.text.DefaultUndoManager.undo() line: 783\norg.eclipse.jface.text.source.SourceViewer\n(org.eclipse.jface.text.TextViewer).doOperation(int) line: 2651\norg.eclipse.jface.text.source.SourceViewer.doOperation(int) line: 445\norg.eclipse.ui.texteditor.TextOperationAction$1.run() line: 119\norg.eclipse.swt.custom.BusyIndicator.showWhile(org.eclipse.swt.widgets.Display, \njava.lang.Runnable) line: 66\norg.eclipse.ui.texteditor.TextOperationAction.run() line: 117\norg.eclipse.ui.internal.WWinKeyBindingService.invoke(java.lang.String) line: 134\norg.eclipse.ui.internal.WWinKeyBindingService.pressed\n(org.eclipse.ui.internal.keybindings.KeyStroke) line: 108\norg.eclipse.ui.internal.WWinKeyBindingService$5.widgetSelected\n(org.eclipse.swt.events.SelectionEvent) line: 325\norg.eclipse.ui.internal.AcceleratorMenu$2.handleEvent\n(org.eclipse.swt.widgets.Event) line: 53\norg.eclipse.swt.widgets.EventTable.sendEvent(org.eclipse.swt.widgets.Event) \nline: 77\norg.eclipse.swt.custom.StyledText(org.eclipse.swt.widgets.Widget).sendEvent\n(org.eclipse.swt.widgets.Event) line: 833\norg.eclipse.swt.widgets.Display.runDeferredEvents() line: 1622\norg.eclipse.swt.widgets.Display.readAndDispatch() line: 1368\norg.eclipse.ui.internal.Workbench.runEventLoop() line: 1420\norg.eclipse.ui.internal.Workbench.run(java.lang.Object) line: 1403\norg.eclipse.core.internal.boot.InternalBootLoader.run(java.lang.String, \njava.net.URL, java.lang.String, java.lang.String[], java.lang.Runnable) line: \n775\norg.eclipse.core.boot.BootLoader.run(java.lang.String, java.net.URL, \njava.lang.String, java.lang.String[]) line: 432\nEclipseRuntimeLauncher.main(java.lang.String[]) line: 24\n",
    "Fixed. Action invokation occured while still in Ctrl-X mode. This means the hidden menu was still trapping verify. Changed code to clear the mode before invoking an action. "
  ],
  "commentCreationDates": [
    "2002-10-16T21:18:30+02:00",
    "2002-10-16T21:23:38+02:00",
    "2002-10-17T17:11:50+02:00",
    "2002-10-18T16:16:28+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2125"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2071"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.replaceTextRange",
          "source": "StyledText.java:6124"
        },
        {
          "method": "org.eclipse.jface.text.DefaultUndoManager$TextCommand.undoTextChange",
          "source": "DefaultUndoManager.java:82"
        },
        {
          "method": "org.eclipse.jface.text.DefaultUndoManager$TextCommand.undo",
          "source": "DefaultUndoManager.java:93"
        },
        {
          "method": "org.eclipse.jface.text.DefaultUndoManager.internalUndo",
          "source": "DefaultUndoManager.java:506"
        },
        {
          "method": "org.eclipse.jface.text.DefaultUndoManager.undo",
          "source": "DefaultUndoManager.java:783"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.doOperation",
          "source": "TextViewer.java:2576"
        },
        {
          "method": "org.eclipse.jface.text.source.SourceViewer.doOperation",
          "source": "SourceViewer.java:435"
        },
        {
          "method": "org.eclipse.ui.texteditor.TextOperationAction$1.run",
          "source": "TextOperationAction.java:119"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:66"
        },
        {
          "method": "org.eclipse.ui.texteditor.TextOperationAction.run",
          "source": "TextOperationAction.java:117"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:749"
        },
        {
          "method": "org.eclipse.ui.internal.registry.AcceleratorScope$AcceleratorAction.run",
          "source": "AcceleratorScope.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.registry.AcceleratorScope.processKey",
          "source": "AcceleratorScope.java:249"
        },
        {
          "method": "org.eclipse.ui.internal.KeyBindingMenu$1.keyPressed",
          "source": "KeyBindingMenu.java:54"
        },
        {
          "method": "org.eclipse.ui.internal.KeyTable.handleEvent",
          "source": "KeyTable.java:75"
        },
        {
          "method": "org.eclipse.ui.internal.KeyTable$3.handleEvent",
          "source": "KeyTable.java:116"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1622"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1368"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1360"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1343"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:775"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:462"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:247"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:703"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 1,
      "bugId": "24856",
      "date": "2002-10-16T21:23:38+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "critical"
    }
  ],
  "groupId": "24856",
  "bugId": "24856",
  "date": "2002-10-16T21:18:30+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "critical"
}