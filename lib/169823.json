{
  "comments": [
    "The Equinox pre-built web application archive could not run successfully in IBM WebSphere 6.1. Exception throws when I try to access http://{server}:{port}/bridge/sp_test: \nCaused by: java.lang.RuntimeException\n\tat org.eclipse.equinox.servletbridge.FrameworkLauncher.start(FrameworkLauncher.java:218)\n\tat org.eclipse.equinox.servletbridge.BridgeServlet.init(BridgeServlet.java:59)\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:241)\n\tat com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:190)\n\t... 98 more\n\nThis is because WebSphere 6.1 is based on eclipse itself, which causes Equinox sample archive fail to initialize its Eclipse instance. I\u0027ve tried to set the application class loader order in WAS to application class loader first, but this did not solve my problem.",
    "Hi Peter,\n\nThe problem here isn\u0027t classloaders, it\u0027s the inheriting of the various \"osgi\", \"org.osgi\", and \"eclipse\" System properties from WAS 6.1.\n\nOne approach to get this working is to use a fairly exhaustive \"/WEB-INF/eclipse/launch.ini\"\nwith something like:\neclipse.application\u003d@null\neclipse.buildId\u003d@null\neclipse.commands\u003d@null\neclipse.security\u003d@null\neclipse.startTime\u003d@null\norg.osgi.framework.bootdelegation\u003d@null\norg.osgi.framework.executionenvironment\u003d@null\norg.osgi.framework.language\u003d@null\norg.osgi.framework.os.name\u003d@null\norg.osgi.framework.os.version\u003d@null\norg.osgi.framework.processor\u003d@null\norg.osgi.framework.system.packages\u003d@null\norg.osgi.framework.vendor\u003d@null\norg.osgi.framework.version\u003d@null\norg.osgi.supports.framework.extension\u003d@null\nosgi.adaptor\u003d@null\nosgi.arch\u003d@null\nosgi.bundles\u003d@null\nosgi.bundles.defaultStartLevel\u003d@null\nosgi.bundlestore\u003d@null\nosgi.checkConfiguration\u003d@null\nosgi.configuration.area\u003d@null\nosgi.contextClassLoaderParent\u003dext\nosgi.framework.beginningstartlevel\u003d@null\nosgi.framework.extensions\u003d@null\nosgi.framework.shape\u003d@null\nosgi.framework.useSystemProperties\u003d@null\nosgi.framework.version\u003d@null\nosgi.frameworkClassPath\u003d@null\nosgi.instance.area.default\u003d@null\nosgi.logfile\u003d@null\nosgi.manifest.cache\u003d@null\nosgi.nl\u003d@null\nosgi.noLazyStateLoading\u003d@null\nosgi.os\u003d@null\nosgi.parentClassloader\u003dext\nosgi.sharedConfiguration.area\u003d@null\nosgi.splashPath\u003d@null\nosgi.syspath\u003d@null\nosgi.ws\u003d@null\n\nHowever, I\u0027m beginning to think it might be simpler to always null out the \"osgi\", \"org.osgi\", and \"eclipse\" in the framework\u0027s properties. For one  thing it would reduce the number of required settings in \"launch.ini\". I\u0027ll attach a patch shortly.",
    "Created an attachment (id\u003d56588)\nProposed patch\n\nThis patch will null out any inherited System Properties that begin with \"osgi.\", \"org.osgi.\", and \"eclipse\". launch.ini has also been updated as nulling a few of the properties is no longer necessary.",
    "Created an attachment (id\u003d56589)\nUpdated bridge.war\n\nPeter,\n\nHere\u0027s an updated bridge.war that uses the code from the patch.\nCould you try it out and let me know if this works for you.\nThanks.",
    "Tom has suggested an approach that I liked better, where instead of just arbitrarily clearing the \"osgi\", \"org.osgi\", and \"eclipse\" properties we instead allow prefix wildcarding to be used with null.\n\nThe launch.ini now uses:\nosgi.*\u003d@null\norg.osgi.*\u003d@null\neclipse.*\u003d@null\n\nThese settings allow us to work in environments like WAS 6.1 where the various System Properties might conflict.\n\nFixed in Head. Also updating bridge.war on the web site.\nPeter, please re-open if you run into problems.\n\n\n",
    "All checked in now.",
    "I\u0027ve checked out the new FrameworkLauncher.java and bridge.war. It works fine on WAS 6.1. Thanks."
  ],
  "commentCreationDates": [
    "2007-01-08T09:52:57+01:00",
    "2007-01-08T20:01:10+01:00",
    "2007-01-08T21:44:24+01:00",
    "2007-01-08T21:46:36+01:00",
    "2007-01-09T21:24:28+01:00",
    "2007-01-09T21:47:38+01:00",
    "2007-01-10T05:43:34+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "elements": [
        {
          "method": "org.eclipse.equinox.servletbridge.FrameworkLauncher.start",
          "source": "FrameworkLauncher.java:218"
        },
        {
          "method": "org.eclipse.equinox.servletbridge.BridgeServlet.init",
          "source": "BridgeServlet.java:59"
        },
        {
          "method": "javax.servlet.GenericServlet.init",
          "source": "GenericServlet.java:241"
        },
        {
          "method": "com.ibm.ws.webcontainer.servlet.ServletWrapper.init",
          "source": "ServletWrapper.java:190"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "169823",
      "date": "2007-01-08T09:52:57+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "169823",
  "bugId": "169823",
  "date": "2007-01-08T09:52:57+01:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}