{
  "comments": [
    "I have an library with an aspect that includes advice, which I compile into an \noutjar. In my client project I extend it, and make a concrete pointcut that \nresults in the library aspect affecting parts of my system. \n\nThere is a bug and an enhancement request here:\n\n1) A bug: when you look at the structure view for affected classes, there is a \nproblem if you try to navigate from calls to advice (in AJDT, it results in an \nNPE). Here is the stack trace in AJDT:\njava.lang.NullPointerException\nat org.aspectj.asm.internal.ProgramElement.toLinkLabelString\n(ProgramElement.java:403)\nat org.eclipse.ajdt.internal.core.AJDTStructureViewNode.getLabel\n(AJDTStructureViewNode.java:171)\nat org.eclipse.ajdt.internal.core.AJDTStructureViewNodeAdapter.getLabel\n(AJDTStructureViewNodeAdapter.java:89)\nat org.eclipse.ui.model.WorkbenchLabelProvider.getText\n(WorkbenchLabelProvider.java:142)\nat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:95)\nat org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run\n(AbstractTreeViewer.java:87)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1006)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:406)\nat org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run\n(StructuredViewer.java:119)\nat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:1006)\nat org.eclipse.core.runtime.Platform.run(Platform.java:413)\nat org.eclipse.jface.viewers.StructuredViewer.updateItem\n(StructuredViewer.java:1271)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem\n(AbstractTreeViewer.java:320)\nat org.eclipse.jface.viewers.AbstractTreeViewer$1.run\n(AbstractTreeViewer.java:303)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren\n(AbstractTreeViewer.java:289)\nat org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand\n(AbstractTreeViewer.java:697)\nat org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded\n(AbstractTreeViewer.java:709)\nat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:175)\nat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:865)\nat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:849)\nat org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:1909)\nat org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:3815)\nat org.eclipse.swt.widgets.Composite.WM_NOTIFY(Composite.java:642)\nat org.eclipse.swt.widgets.Control.windowProc(Control.java:2816)\nat org.eclipse.swt.widgets.Display.windowProc(Display.java:2361)\nat org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)\nat org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1236)\nat org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:156)\nat org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:1517)\nat org.eclipse.swt.widgets.Control.windowProc(Control.java:2799)\nat org.eclipse.swt.widgets.Display.windowProc(Display.java:2361)\nat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\nat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1303)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1543)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\nat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\nat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:858)\nat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\nat org.eclipse.core.launcher.Main.run(Main.java:747)\nat org.eclipse.core.launcher.Main.main(Main.java:583)\n \n\n2) The enhancement request: the concrete aspect that applies the advice should \nalso show what is affected in the project. Of course, it would also be nice to \nsee how a given concrete library aspect in the aspect path affects your \nproject too.",
    "The bad news is that the NPE shows in the typical uninformative Eclipse \ndialog.  The good news is that once the user click\u0027s \"OK\" there are no \nproblems other than the lack of a label for that node.  The problem stems from \nthe fact that I never implemented the case of structure model elements living \ninside JARs.\n\nI\u0027ve fixed this, added a corresponding test project to AJDT, and added some UI \nsupport to make it clear when something is being advised by an aspect in an \ninjar.  Since navigating to the sourceline of the aspect in the injar is not \npossible the label is grayed-out.  Also note that I finally added hyperlink \nstyle coloring to the link nodes in the outline (by adding an \nAspectJLabelProvider).\n\nSo it\u0027s all working in CVS.  But the label for injar could be improved (e.g. \ngive the path to the injar, and the full signature of the advice).  That\u0027s \ndoable but might require us to change the IProgramElement String handle \nformat, since elements in bytecode aren\u0027t naturally identified by sourcelines--\nso at the moment we can only look up the sourcefile containing the aspect."
  ],
  "commentCreationDates": [
    "2003-09-26T00:30:52+02:00",
    "2003-09-26T07:23:56+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.asm.internal.ProgramElement.toLinkLabelString",
          "source": "ProgramElement.java:403"
        },
        {
          "method": "org.eclipse.ajdt.internal.core.AJDTStructureViewNode.getLabel",
          "source": "AJDTStructureViewNode.java:171"
        },
        {
          "method": "org.eclipse.ajdt.internal.core.AJDTStructureViewNodeAdapter.getLabel",
          "source": "AJDTStructureViewNodeAdapter.java:89"
        },
        {
          "method": "org.eclipse.ui.model.WorkbenchLabelProvider.getText",
          "source": "WorkbenchLabelProvider.java:142"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:95"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:87"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1006"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:406"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:119"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1006"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1271"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:320"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:303"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:289"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand",
          "source": "AbstractTreeViewer.java:697"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded",
          "source": "AbstractTreeViewer.java:709"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:175"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:865"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:849"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.wmNotifyChild",
          "source": "Tree.java:1909"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_NOTIFY",
          "source": "Control.java:3815"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_NOTIFY",
          "source": "Composite.java:642"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2816"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2361"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProcW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.CallWindowProc",
          "source": "OS.java:1236"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.callWindowProc",
          "source": "Tree.java:156"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN",
          "source": "Tree.java:1517"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:2799"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:2361"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1303"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1543"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:858"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "43709",
      "date": "2003-09-26T00:30:52+02:00",
      "product": "AJDT",
      "component": "Core",
      "severity": "critical"
    }
  ],
  "groupId": "43709",
  "bugId": "43709",
  "date": "2003-09-26T00:30:52+02:00",
  "product": "AJDT",
  "component": "Core",
  "severity": "critical"
}