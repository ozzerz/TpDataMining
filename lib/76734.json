{
  "comments": [
    "We have a job that looks through a project to find all types inheriting from a \nspecific class to build a model. For this purpose it uses \nIJavaProject#isOnClasspath. This job is executed with our own rule to prevent \nconcurrency issues.\n\nSometimes we get an IllegalArgumentException \"Attempted to beginRule: R/, does \nnot match outer scope rule: My Loading Model Rule\" while calling \nIJavaProject#isOnClasspath. The problem turns out to be a container \ninitialization. JavaCore#setClasspathContainer wants to lock the complete \nworkspace.\n\nThe problem we have now is what to do? We can\u0027t include the COMPLETE workspace \nrule into our own rule. Furthermore are API clients of \nIJavaProject#isOnClasspath expected to lock the whole workspace?\n\nThis is the detailed stack trace:\n\njava.lang.IllegalArgumentException: Attempted to beginRule: R/, does not match \nouter scope rule: My Loading Model Rule\n at org.eclipse.core.internal.runtime.Assert.isLegal(Assert.java:58)\n at org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:106)\n at org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:200)\n at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:80)\n at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:170)\n at org.eclipse.core.internal.resources.WorkManager.checkIn\n(WorkManager.java:95)\n at org.eclipse.core.internal.resources.Workspace.prepareOperation\n(Workspace.java:1628)\n at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1668)\n at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation\n(JavaModelOperation.java:744)\n at org.eclipse.jdt.internal.core.JavaProject.setRawClasspath\n(JavaProject.java:2650)\n at org.eclipse.jdt.core.JavaCore$3.run(JavaCore.java:3433)\n at org.eclipse.jdt.internal.core.BatchOperation.executeOperation\n(BatchOperation.java:34)\n at org.eclipse.jdt.internal.core.JavaModelOperation.run\n(JavaModelOperation.java:700)\n at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1673)\n at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3246)\n at org.eclipse.jdt.core.JavaCore.setClasspathContainer(JavaCore.java:3416)\n at org.eclipse.jdt.internal.launching.JREContainerInitializer.initialize\n(JREContainerInitializer.java:51)\n at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer\n(JavaModelManager.java:1261)\n at org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers\n(JavaModelManager.java:1226)\n at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer\n(JavaModelManager.java:833)\n at org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1184)\n at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1888)\n at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath\n(JavaProject.java:1798)\n at org.eclipse.jdt.internal.core.JavaProject.isOnClasspath\n(JavaProject.java:2130)\n at my.custom.code.MyRegistry.findMySpecialClassesInFolder()",
    "Classpath related operations now don\u0027t take any lock (see ChangeClasspathOperation#getSchedulingRule()).\n\nReleased for 3.3M1 in HEAD.",
    "Verified for 3.3 M1 using build I20060807-0010"
  ],
  "commentCreationDates": [
    "2004-10-21T12:26:15+02:00",
    "2006-06-13T15:05:24+02:00",
    "2006-08-07T10:58:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: R/, does not match  outer scope rule: My Loading Model Rule",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Assert.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:106"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:80"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:170"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:95"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1628"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1668"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:744"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.setRawClasspath",
          "source": "JavaProject.java:2650"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore$3.run",
          "source": "JavaCore.java:3433"
        },
        {
          "method": "org.eclipse.jdt.internal.core.BatchOperation.executeOperation",
          "source": "BatchOperation.java:34"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:700"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1673"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.run",
          "source": "JavaCore.java:3246"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.setClasspathContainer",
          "source": "JavaCore.java:3416"
        },
        {
          "method": "org.eclipse.jdt.internal.launching.JREContainerInitializer.initialize",
          "source": "JREContainerInitializer.java:51"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer",
          "source": "JavaModelManager.java:1261"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers",
          "source": "JavaModelManager.java:1226"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer",
          "source": "JavaModelManager.java:833"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:1184"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1888"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1798"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.isOnClasspath",
          "source": "JavaProject.java:2130"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "76734",
      "date": "2004-10-21T12:26:15+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "76734",
  "bugId": "76734",
  "date": "2004-10-21T12:26:15+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}