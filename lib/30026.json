{
  "comments": [
    "With the following program I get a NullPointerException during compiling and a\nwarning that the source code of Object is not available for weaving:\n\npublic class NullPtr {\n    public static void main(String args[]) {\n        NullPtr np \u003d new NullPtr();\n        np \u003d null;\n    }\n\n    public void finalize() throws Throwable {\n    }\n}\n\naspect FinalizeContract {\n    pointcut finalizeCall(Object o):\n        this(Object+) \u0026\u0026\n        this(o) \u0026\u0026\n        execution(void finalize());\n\n    void around(Object o) throws Throwable: finalizeCall(o) {\n        o.finalize();               // error\n        ((NullPtr) o).finalize();   // ok\n        proceed(o);\n    }\n}\n\nIt works if I comment out the line indicated by the // error comment or if I\ndeclare the aspect as privileged.",
    "The correct behavior is for the compiler to signal that the finalize method is \nnot visible to the aspect because its a protected method on Object.  This is \nthe behavior that I observe for 1.1beta4.\n\nCan you confirm that you\u0027re seeing it with the latest version of the compiler, \nand if so include the text of the stack trace and warning?\n",
    "The compiler claims to be AspectJ Compiler 1.1beta4\nBelow is what I get when compiling and running the program:\n\nrobert@Knochenmehl:~/daten/text/publications/aspecttesting/code\u003e make NullPtr\nCLASSPATH\u003d.:/opt/java/junit3.8.1/junit.jar:/home/robert/programme/aspectj1.1b4/lib/aspectjrt.jar:/home/robert/programme/aspectj1.1b4/lib/aspectjtools.jar\n/home/robert/programme/aspectj1.1b4/bin/ajc -Xlint -XnoInline\n-warn:constructorName,packageDefaultMethod,deprecation,maskedCatchBlocks,unusedImports,syntheticAccess\n NullPtr.java\njava.lang.NullPointerException\n        at\norg.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.fromBinding(EclipseWorld.java:142)\n        at\norg.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.makeResolvedMember(EclipseWorld.java:166)\n        at\norg.aspectj.ajdt.internal.compiler.lookup.PrivilegedHandler.getPrivilegedAccessMethod(PrivilegedHandler.java:44)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AccessForInlineVisitor.endVisit(AccessForInlineVisitor.java:70)\n        at\norg.eclipse.jdt.internal.compiler.ast.MessageSend.traverse(MessageSend.java:319)\n        at\norg.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:98)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:153)\n        at\norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:325)\n        at\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:922)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:63)\n        at\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:954)\n        at\norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:235)\n        at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:536)\n        at org.aspectj.ajdt.internal.compiler.AjCompiler.process(AjCompiler.java:63)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:340)\n        at\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:232)\n        at\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:171)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run(AjBuildManager.java:612)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:54)\n        at org.aspectj.tools.ajc.Main.run(Main.java:199)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:138)\n        at org.aspectj.tools.ajc.Main.main(Main.java:58)\n/home/robert/daten/text/publications/aspecttesting/code/NullPtr.java:0: Internal\ncompiler error\njava.lang.NullPointerException\n        at\norg.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.fromBinding(EclipseWorld.java:142)\n        at\norg.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.makeResolvedMember(EclipseWorld.java:166)\n        at\norg.aspectj.ajdt.internal.compiler.lookup.PrivilegedHandler.getPrivilegedAccessMethod(PrivilegedHandler.java:44)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AccessForInlineVisitor.endVisit(AccessForInlineVisitor.java:70)\n        at\norg.eclipse.jdt.internal.compiler.ast.MessageSend.traverse(MessageSend.java:319)\n        at\norg.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:98)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:153)\n        at\norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:325)\n        at\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:922)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:63)\n        at\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:954)\n        at\norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:235)\n        at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:536)\n        at org.aspectj.ajdt.internal.compiler.AjCompiler.process(AjCompiler.java:63)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:340)\n        at\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:232)\n        at\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:171)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run(AjBuildManager.java:612)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:54)\n        at org.aspectj.tools.ajc.Main.run(Main.java:199)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:138)\n        at org.aspectj.tools.ajc.Main.main(Main.java:58)\n\n\n!! no source information available !!\n/home/robert/daten/text/publications/aspecttesting/code/NullPtr.java:16: The\nmethod finalize() from the type java.lang.Object is not visible\no.finalize();               // error\n  ^^^^^^^^\nException thrown from AspectJ 1.1beta4\n\nThis might be logged as a bug already -- see the bug database at\n  http://dev.eclipse.org (product: AspectJ, component: compiler)\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\nnull\njava.lang.NullPointerException\n        at\norg.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.fromBinding(EclipseWorld.java:142)\n        at\norg.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.makeResolvedMember(EclipseWorld.java:166)\n        at\norg.aspectj.ajdt.internal.compiler.lookup.PrivilegedHandler.getPrivilegedAccessMethod(PrivilegedHandler.java:44)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AccessForInlineVisitor.endVisit(AccessForInlineVisitor.java:70)\n        at\norg.eclipse.jdt.internal.compiler.ast.MessageSend.traverse(MessageSend.java:319)\n        at\norg.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:98)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:153)\n        at\norg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:325)\n        at\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:922)\n        at\norg.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:63)\n        at\norg.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:954)\n        at\norg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:235)\n        at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:536)\n        at org.aspectj.ajdt.internal.compiler.AjCompiler.process(AjCompiler.java:63)\n        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:340)\n        at\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:232)\n        at\norg.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:171)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run(AjBuildManager.java:612)\n        at\norg.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:102)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:54)\n        at org.aspectj.tools.ajc.Main.run(Main.java:199)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:138)\n        at org.aspectj.tools.ajc.Main.main(Main.java:58)\n\n\n1 fail|abort, 2 errors\nmake: *** [NullPtr] Fehler 255\n",
    "fixed in current cvs tree, test case in bugs/Finalizer.java\n\nthanks for confirming that this bug was found in 1.1beta4.  it is now fixed in \nthe current cvs tree."
  ],
  "commentCreationDates": [
    "2003-01-22T22:06:50+01:00",
    "2003-02-14T01:21:21+01:00",
    "2003-02-16T10:13:28+01:00",
    "2003-03-06T19:30:08+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.fromBinding",
          "source": "EclipseWorld.java:142"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.makeResolvedMember",
          "source": "EclipseWorld.java:166"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.PrivilegedHandler.getPrivilegedAccessMethod",
          "source": "PrivilegedHandler.java:44"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AccessForInlineVisitor.endVisit",
          "source": "AccessForInlineVisitor.java:70"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.traverse",
          "source": "MessageSend.java:319"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse",
          "source": "MethodDeclaration.java:98"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements",
          "source": "AdviceDeclaration.java:153"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:325"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:922"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve",
          "source": "AspectDeclaration.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:954"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:235"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:536"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompiler.process",
          "source": "AjCompiler.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:340"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:612"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:54"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:199"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:138"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "30026",
      "date": "2003-02-16T10:13:28+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "minor"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.fromBinding",
          "source": "EclipseWorld.java:142"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.makeResolvedMember",
          "source": "EclipseWorld.java:166"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.PrivilegedHandler.getPrivilegedAccessMethod",
          "source": "PrivilegedHandler.java:44"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AccessForInlineVisitor.endVisit",
          "source": "AccessForInlineVisitor.java:70"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.traverse",
          "source": "MessageSend.java:319"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse",
          "source": "MethodDeclaration.java:98"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements",
          "source": "AdviceDeclaration.java:153"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:325"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:922"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve",
          "source": "AspectDeclaration.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:954"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:235"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:536"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompiler.process",
          "source": "AjCompiler.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:340"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:612"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:54"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:199"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:138"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 2,
      "bugId": "30026",
      "date": "2003-02-16T10:13:28+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "minor"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.fromBinding",
          "source": "EclipseWorld.java:142"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.EclipseWorld.makeResolvedMember",
          "source": "EclipseWorld.java:166"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.lookup.PrivilegedHandler.getPrivilegedAccessMethod",
          "source": "PrivilegedHandler.java:44"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AccessForInlineVisitor.endVisit",
          "source": "AccessForInlineVisitor.java:70"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.traverse",
          "source": "MessageSend.java:319"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse",
          "source": "MethodDeclaration.java:98"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements",
          "source": "AdviceDeclaration.java:153"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaration.java:325"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:922"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve",
          "source": "AspectDeclaration.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:954"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.java:235"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:536"
        },
        {
          "method": "org.aspectj.ajdt.internal.compiler.AjCompiler.process",
          "source": "AjCompiler.java:63"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:340"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:171"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run",
          "source": "AjBuildManager.java:612"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBuildManager.java:102"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:54"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:199"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:138"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:58"
        }
      ],
      "number": 2,
      "commentIndex": 2,
      "bugId": "30026",
      "date": "2003-02-16T10:13:28+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "minor"
    }
  ],
  "groupId": "30026",
  "bugId": "30026",
  "date": "2003-01-22T22:06:50+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "minor"
}