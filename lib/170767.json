{
  "comments": [
    "The following SecurityException can be thrown from EclipseLazyStarter when it attempts to call Bundle.start().  EclipseLazyStarter should be doing the proper doPriv to protect callers from the security check when Bundle.start() is called.  This bug is against 3.2.x a fix has already been released in 3.3 when the implementation of the OSGi 4.1 activation policy was released.\n\n\njava.security.AccessControlException: Access denied (org.osgi.framework.AdminPermission (id\u003d80) execute)\n \tat java.security.AccessController.checkPermission(AccessController.java:104)\n \tat java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\n \tat com.ibm.ws.security.core.SecurityManager.checkPermission(SecurityManager.java:189)\n \tat org.eclipse.osgi.framework.internal.core.Framework.checkAdminPermission(Framework.java:1266)\n \tat org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:252)\n \tat org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass(EclipseLazyStarter.java:86)\n \tat org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:409)\n \tat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:188)\n \tat org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:334)\n \tat org.eclipse.osgi.framework.internal.core.SingleSourcePackage.loadClass(SingleSourcePackage.java:37)\n \tat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:374)\n \tat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:347)\n \tat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)\n \tat java.lang.ClassLoader.loadClass(ClassLoader.java:568)",
    "Created an attachment (id\u003d57016)\n3.2.x patch\n\npatch for 3.2.x just in case we want this fixed in 3.2.2.",
    "Need approval for a 3.2.2 fix from Jeff.\n\nNeed a code review from Pascal.",
    "This change seems pretty harmless. It just adds a new secure action following the standard coding pattern for it, and the other change is just invoking this action. The only question: why does the action take an int as a parameter that it never uses? This looks like a copy / paste from the 3.3 code.\nIt will be good to go while the spurious int will be removed (or explained).",
    "Created an attachment (id\u003d57085)\n3.2.x patch\n\nI removed the int option.  I will add a method to 3.3 that does not take an int option in case others use the method, they will not start failing on 3.3.",
    "+1 for 3.2.2 with alot of review/testing",
    "Fix released for 3.2.2."
  ],
  "commentCreationDates": [
    "2007-01-17T14:24:11+01:00",
    "2007-01-17T15:18:40+01:00",
    "2007-01-17T22:52:29+01:00",
    "2007-01-18T15:10:59+01:00",
    "2007-01-18T15:38:23+01:00",
    "2007-01-18T21:24:07+01:00",
    "2007-01-18T22:42:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.security.AccessControlException",
      "message": "Access denied (org.osgi.framework.AdminPermission (id\u003d80) execute)",
      "elements": [
        {
          "method": "java.security.AccessController.checkPermission",
          "source": "AccessController.java:104"
        },
        {
          "method": "java.lang.SecurityManager.checkPermission",
          "source": "SecurityManager.java:547"
        },
        {
          "method": "com.ibm.ws.security.core.SecurityManager.checkPermission",
          "source": "SecurityManager.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.checkAdminPermission",
          "source": "Framework.java:1266"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "AbstractBundle.java:252"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass",
          "source": "EclipseLazyStarter.java:86"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass",
          "source": "ClasspathManager.java:409"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass",
          "source": "DefaultClassLoader.java:188"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:334"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.SingleSourcePackage.loadClass",
          "source": "SingleSourcePackage.java:37"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:374"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:347"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass",
          "source": "DefaultClassLoader.java:83"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:568"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "170767",
      "date": "2007-01-17T14:24:11+01:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "170767",
  "bugId": "170767",
  "date": "2007-01-17T14:24:11+01:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}