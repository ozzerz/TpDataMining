{
  "comments": [
    "TM (6/7/2001 14:05:54)\n\tSDK 119\n\n\t1) I opened the file \u003corg.eclipse.jdt.launching/doc/org_eclipse_jdt_launching.html\u003e via a double click in the packages view\n\t2) Netscape 4.75 opens as an inplace editor\n\t3) There is a link (to a non-existing file) in there. Hovering over this link,  I selected \"open link in composer\"\n\t4) observe: an error dialog box pops up saying:\n\n\t\tTitle: \"cvs over ssh - one project locks the workbench: netscape.exe - Application Error\"\n\n\t\tMsg: \"The instruction at \"...\" referenced memory at \"...\". The memory could not be \"read\".\n\n\t\tWhen I clicked ok, netscape was terminated and I ended up with a blank editor tab.\n\n\tFollow up: I double clicked the html file again and got an error dialog box: \"an error occurred when\n\t\t\t\t\t opening this editor\" and the workbench died.\n\t\t\t\t\t The log showed:\n\nLog: Thu Jun 07 14:09:53 GMT+02:00 2001\n2 org.eclipse.ui 2 Problems occurred when invoking code from plug-in: org.eclipse.ui.\njava.lang.NegativeArraySizeException\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java(Compiled Code))\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java(Compiled Code))\n\tat org.eclipse.jface.action.MenuManager.updateAll(MenuManager.java:515)\n\tat org.eclipse.jface.action.MenuManager.update(MenuManager.java(Compiled Code))\n\tat org.eclipse.jface.action.MenuManager.updateAll(MenuManager.java:515)\n\tat org.eclipse.ui.internal.WorkbenchWindow.updateActionBars(WorkbenchWindow.java:1025)\n\tat org.eclipse.ui.internal.WorkbenchPage.updateActionBars(WorkbenchPage.java:1464)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:1333)\n\tat org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:1152)\n\tat org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:239)\n\tat org.eclipse.ui.internal.PartPane.handleEvent(PartPane.java:191)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Control.WM_SETFOCUS(Control.java:3205)\n\tat org.eclipse.swt.widgets.Tree.WM_SETFOCUS(Tree.java:1269)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))\n\tat org.eclipse.swt.internal.win32.OS.SetFocus(Native Method)\n\tat org.eclipse.swt.widgets.Control.forceFocus(Control.java:474)\n\tat org.eclipse.swt.widgets.Decorations.restoreFocus(Decorations.java:465)\n\tat org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:889)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))\n\tat org.eclipse.swt.internal.ole.win32.COM.VtblCall(Native Method)\n\tat org.eclipse.swt.internal.ole.win32.IOleObject.DoVerb(IOleObject.java:21)\n\tat org.eclipse.swt.ole.win32.OleClientSite.doVerb(OleClientSite.java:536)\n\tat org.eclipse.ui.internal.editorsupport.OleEditor.setFocus(OleEditor.java:433)\n\tat org.eclipse.ui.internal.WorkbenchPage$1.run(WorkbenchPage.java:112)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java(Compiled Code))\n\tat org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))\n\tat org.eclipse.ui.internal.WorkbenchPage.activatePart(WorkbenchPage.java:107)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:1327)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:95)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:1001)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:922)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:120)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:101)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:91)\n\tat org.eclipse.jdt.internal.ui.packageview.OpenResourceAction.run(OpenResourceAction.java:57)\n\tat org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.handleDoubleClick(PackageExplorerPart.java:619)\n\tat org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.access$1(PackageExplorerPart.java:608)\n\tat org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$3.doubleClick(PackageExplorerPart.java:293)\n\tat org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick(StructuredViewer.java:281)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect(StructuredViewer.java:431)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$1.widgetDefaultSelected(AbstractTreeViewer.java:654)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:732)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:815)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:285)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:69)\n\tat org.eclipse.core.launcher.Main.run(Main.java:311)\n\tat org.eclipse.core.launcher.UIMain.main(UIMain.java:43)\n\nTM (6/7/2001 14:17:49)\n\tWhile the crash might very well be a Netscape bug. We should handle the crashed editor better.\n\nKM (6/7/01 12:40:24 PM)\n\tMoving to UI for consideration on exception in MenuManager.\n\nDS (6/7/01 6:06:42 PM)\n\tFrom the stack trace it looks like we are trying to update a pulldown within\n\tthe window menu.\n\n\tNegativeArraySizeException \u003d  Thrown if an application tries to create \n\tan array with negative size.\n\n\tI am confused.  Within MenuManager we don\u0027t allocate any arrays.  The only\n\tallocation is a \"new ArrayList\" (see below).  If some inline optimization is performed \n\tthe error may occur in the ArrayList constructor where a real array is allocated.  But that \n\timplies that \"items.length\" \u003c 0.  According to the java spec \"length may be positive \n\tor zero\".\n\n\t\tprotected void update(boolean force, boolean recursive) {\n\t\t\tif (isDirty() || force) {\n\t\t\t\tif (menu !\u003d null \u0026\u0026 !menu.isDisposed()) {\n\t\t\t\t\t// clean contains all active items without double separators\n\t\t\t\t\tIContributionItem[] items\u003d getItems();\n\t\t\t\t\tList clean\u003d new ArrayList(items.length);\n\n\tWe also call menu.getItems further down in the method.  The getItems method will\n\tquery the system to determine the item count for the menu.  If an error occurs in\n\tOS.GetMenuItemCount the result is -1.  Then menu.getItems tries to\n\tallocate an array of size -1.  This probably causes the exception.\n\n\tThe netscape editor opens  in an OleEditor, so it will replace some pulldown menus\n\twithin the window menubar.   It is not clear how MenuManager.update will cooperate if\n\twe do an update.  \n\n\tHypothesis # 1: The menubar contains a combination of our own menus and those \n\tcontributed by netscape.  MenuManager.update removes all which are unknown.  And \n\tour own pulldown menus which have a menu manager ( probably the case above ) may \n\tnot be \"realized\".  Either type of pulldown menu may return -1 if OS.GetMenuItemCount\n\tis called.\n\n\tHypothesis # 2: Kevin says there is complete separation between the ole menu and\n\tour own.  In my own testing I find that we can normally query the items in our menubar\n\teven when another menu is active.  The error situation above may just be a\n\tside effect of the netscape error.\n\n\tHave asked Veronika to comment.\n\nVI (6/8/2001 10:02:50 AM)\n\tOLE creates its own menubar which it super imposes on the applications menubar.\n\tThe ole menu bar is completely separate from the applications menubar.\n\tThe only entries in the ole menu bar that come  from the application are those provided\n\tin OleFrame.setFileMenus, OleFrame.setWindowMenus and OleFrame.setContainerMenus.\n\n\tIs some cleanup being done on the MenuItem objects passed in to these methods?\n\nDS (6/8/01 11:37:01 AM)\n\tWe may modify the contents of these menus while the ole editor is active.  For\n\tinstance, we may add items to File New or the Perspective menu.\n\nDS (6/8/01 12:44:25 PM)\n\tI talked with VI about this.  It should be OK to modify the contents of our menus while\n\tan OLE editor is active.  And in my own testing I am able to modify the actions which\n\tappear in the menu ( via action sets ) with no problems.\n\n\tGetting back to the original problem, ie the workbench died without putting up a dialog,\n\tour menu bar is corrupted.  There is nothing we can do.  At least we log the\n\tproblem.  We can do a readme for this scenario.\n\nNE (6/15/01 12:17:29 PM)\n\tReadme doc:\n99.1.1.1 If an OLE editor crashes, it can cause the Workbench to also crash\n\nIf an OLE editor crashes, this can cause the Workbench to either crash, or to have its menus become inconsistent.",
    "Another attempt was made to fix this. The changes were very risky. ",
    "Reopen for investigation",
    "Pls try again with latest Netscape. List time it was determined to be a defect \nin their OLE control.",
    "i tried this again with netscape 7.0 and eclipse 2.0.1. i altered the registry to open composer on the open verb. i was not able to get netscape 7.0 to open inplace. i embedded an html document in word and could also not get composer to open in place. possibly inplace editing functionality is absent in netscape 7.0 (it is a new codebase from 4.75)",
    "Closing based on comments above. "
  ],
  "commentCreationDates": [
    "2001-10-11T04:27:49+02:00",
    "2002-01-22T02:01:09+01:00",
    "2002-08-07T22:18:02+02:00",
    "2002-09-03T20:45:23+02:00",
    "2002-09-04T16:52:21+02:00",
    "2002-09-05T20:43:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NegativeArraySizeException",
      "elements": [
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.updateAll",
          "source": "MenuManager.java:515"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.update",
          "source": "MenuManager.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.action.MenuManager.updateAll",
          "source": "MenuManager.java:515"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.updateActionBars",
          "source": "WorkbenchWindow.java:1025"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.updateActionBars",
          "source": "WorkbenchPage.java:1464"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:1333"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.requestActivation",
          "source": "WorkbenchPage.java:1152"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.requestActivation",
          "source": "PartPane.java:239"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.handleEvent",
          "source": "PartPane.java:191"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.WM_SETFOCUS",
          "source": "Control.java:3205"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.WM_SETFOCUS",
          "source": "Tree.java:1269"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.SetFocus",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.forceFocus",
          "source": "Control.java:474"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.restoreFocus",
          "source": "Decorations.java:465"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.WM_ACTIVATE",
          "source": "Decorations.java:889"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.internal.ole.win32.COM.VtblCall",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.ole.win32.IOleObject.DoVerb",
          "source": "IOleObject.java:21"
        },
        {
          "method": "org.eclipse.swt.ole.win32.OleClientSite.doVerb",
          "source": "OleClientSite.java:536"
        },
        {
          "method": "org.eclipse.ui.internal.editorsupport.OleEditor.setFocus",
          "source": "OleEditor.java:433"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$1.run",
          "source": "WorkbenchPage.java:112"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activatePart",
          "source": "WorkbenchPage.java:107"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:1327"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:95"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1001"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:922"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:120"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:101"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:91"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.OpenResourceAction.run",
          "source": "OpenResourceAction.java:57"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.handleDoubleClick",
          "source": "PackageExplorerPart.java:619"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.access$1",
          "source": "PackageExplorerPart.java:608"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$3.doubleClick",
          "source": "PackageExplorerPart.java:293"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick",
          "source": "StructuredViewer.java:281"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect",
          "source": "StructuredViewer.java:431"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.widgetDefaultSelected",
          "source": "AbstractTreeViewer.java:654"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:732"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:815"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:285"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:69"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:311"
        },
        {
          "method": "org.eclipse.core.launcher.UIMain.main",
          "source": "UIMain.java:43"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "2168",
      "date": "2001-10-11T04:27:49+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "2168",
  "bugId": "2168",
  "date": "2001-10-11T04:27:49+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}