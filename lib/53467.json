{
  "comments": [
    "20040226 integration build\nBundles that are installed with reference:.....jar - running directly from \njars work for the first time, but in subsequent launches, when bundles are \ncached by the runtime, \"java.lang.IllegalStateException: zip file closed\" is \nthrown and logged, whenever resources of the bundle are accessed.\n\nFor example openning and closing workbench twice produces the following:\n!SESSION ----------------------------------------------------------------------\n!ENTRY org.eclipse.core.launcher 4 0 Mar 01, 2004 20:19:39.505\n!MESSAGE Exception launching the Eclipse Platform:\n!STACK\njava.lang.IllegalStateException: zip file closed\n\tat java.util.zip.ZipFile.ensureOpen(ZipFile.java:398)\n\tat java.util.zip.ZipFile.getEntry(ZipFile.java:145)\n\tat \norg.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.get\nZipEntry(BundleFile.java:152)\n\tat \norg.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.get\nEntry(BundleFile.java:243)\n\tat \norg.eclipse.osgi.framework.internal.defaultadaptor.DefaultBundleData.getEntry\n(DefaultBundleData.java:197)\n\tat org.eclipse.core.runtime.adaptor.EclipseBundleData.loadManifest\n(EclipseBundleData.java:198)\n\tat org.eclipse.core.runtime.adaptor.CachedManifest.getManifest\n(CachedManifest.java:31)\n\tat org.eclipse.core.runtime.adaptor.CachedManifest.get\n(CachedManifest.java:67)\n\tat \norg.eclipse.osgi.framework.internal.core.ManifestLocalization.getResourceBundle\n(ManifestLocalization.java:104)\n\tat \norg.eclipse.osgi.framework.internal.core.ManifestLocalization.getHeaders\n(ManifestLocalization.java:48)\n\tat org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1078)\n\tat org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1032)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor.isLegacy\n(PluginDescriptor.java:508)\n\tat org.eclipse.core.internal.plugins.PluginStopper.run\n(PluginStopper.java:50)\n\tat \norg.eclipse.core.internal.runtime.PlatformActivator.stopLegacyBundles\n(PlatformActivator.java:285)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:267)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:100)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n\tat org.eclipse.core.launcher.Main.run(Main.java:742)\n\tat org.eclipse.core.launcher.Main.main(Main.java:581)\n\nLaunching Workbench twice and going to Help-\u003eAbout-\u003ePlug-in Details does \nnothing and logs\n!SESSION Mar 01, 2004 20:21:56.342 --------------------------------------------\n-\njava.version\u003d1.4.2_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -data d:\\workspaceUpdate\\runtime-workspace -update -\ndev bin\n!ENTRY org.eclipse.ui 4 4 Mar 01, 2004 20:21:56.342\n!MESSAGE Unhandled event loop exception\n!ENTRY org.eclipse.ui 4 0 Mar 01, 2004 20:21:56.342\n!MESSAGE zip file closed\n!STACK 0\njava.lang.IllegalStateException: zip file closed\n\tat java.util.zip.ZipFile.ensureOpen(ZipFile.java:398)\n\tat java.util.zip.ZipFile.getEntry(ZipFile.java:145)\n\tat \norg.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.get\nZipEntry(BundleFile.java:152)\n\tat \norg.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.get\nEntry(BundleFile.java:243)\n\tat \norg.eclipse.osgi.framework.internal.defaultadaptor.DefaultBundleData.getEntry\n(DefaultBundleData.java:197)\n\tat org.eclipse.core.runtime.adaptor.EclipseBundleData.loadManifest\n(EclipseBundleData.java:198)\n\tat org.eclipse.core.runtime.adaptor.CachedManifest.getManifest\n(CachedManifest.java:31)\n\tat org.eclipse.core.runtime.adaptor.CachedManifest.get\n(CachedManifest.java:67)\n\tat \norg.eclipse.osgi.framework.internal.core.ManifestLocalization.getResourceBundle\n(ManifestLocalization.java:104)\n\tat \norg.eclipse.osgi.framework.internal.core.ManifestLocalization.getHeaders\n(ManifestLocalization.java:48)\n\tat org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1078)\n\tat org.eclipse.osgi.framework.internal.core.Bundle.getHeaders\n(Bundle.java:1032)\n\tat org.eclipse.core.internal.plugins.PluginDescriptor.getProviderName\n(PluginDescriptor.java:174)\n\tat org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog$3.compare\n(AboutPluginsDialog.java:433)\n\tat java.util.Arrays.mergeSort(Arrays.java:1278)\n\tat java.util.Arrays.mergeSort(Arrays.java:1290)\n\tat java.util.Arrays.mergeSort(Arrays.java:1289)\n\tat java.util.Arrays.mergeSort(Arrays.java:1289)\n\tat java.util.Arrays.mergeSort(Arrays.java:1289)\n\tat java.util.Arrays.sort(Arrays.java:1219)\n\tat \norg.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.sortByProvider\n(AboutPluginsDialog.java:427)\n\tat org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e\n(AboutPluginsDialog.java:111)\n\tat org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e\n(AboutPluginsDialog.java:92)\n\tat org.eclipse.ui.internal.ide.dialogs.AboutDialog.buttonPressed\n(AboutDialog.java:93)\n\tat org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:402)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2352)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2033)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:643)\n\tat org.eclipse.jface.window.Window.open(Window.java:623)\n\tat org.eclipse.ui.internal.ide.actions.AboutAction.run\n(AboutAction.java:81)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:881)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:550)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2\n(ActionContributionItem.java:502)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent\n(ActionContributionItem.java:435)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2352)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2033)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1566)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1542)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench\n(Workbench.java:263)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run\n(IDEApplication.java:47)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:256)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:100)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:279)\n\tat org.eclipse.core.launcher.Main.run(Main.java:742)\n\tat org.eclipse.core.launcher.Main.main(Main.java:581)\n\nIf the bundle contributes any actions to the workbench, the workbench will not \neven start second time.",
    "Does your Bundle have a bundle manfest (/META-INF/MANIFEST.MF) file?  It looks \nlike the failure occured during the first shutdown after you installed the \nbundle.  The code that failed should only get called if your bundle manifest \nfile has a legacy header in it (I may be wrong).  Can you attach you bundle \nmanifest to this defect?\n\nAlso how do you get the installed reference bundle to stay installed? Each time \nI install a bundle by reference manually from the console the \nupdate.configurator ends up uninstalling the bundle on the next startup.  Are \nyou using a different update.configurator or disabling it? How are you \ninstalling the bundle jar?",
    "I have been able to reproduce the problem.\n\nThe problem is occuring in EclipseStarter when it does a refreshPackages each \ntime it starts up on the base bundles.  This is probably not necessary but it \nhas exposed a bug in PackageAdmin.  PackageAdmin is closing all the BundleFiles \nfor the bundles that it is refreshing but is not making sure they are reopened \nwhen the bundles are resolved.  This is causing the zip errors.\n\nI will integrate a fix for PackageAdmin to prevent problem.",
    "I fix has been integrated and should make today\u0027s I-Build respin.",
    "Thanks Thomas.\n\nWhen I reported the bug, I was working on the update code to add support for \nrunning from bundles.\nIt is realesed in head now (any build after this week integration builds).  \nJust drop a bundle jar in the plugins directory or use Update Manager to \ninstall a feature with unpack\u003d\"false\" attribute on some of the plugin elements \ninside feature.xml."
  ],
  "commentCreationDates": [
    "2004-03-02T01:40:10+01:00",
    "2004-03-02T13:53:14+01:00",
    "2004-03-02T16:12:38+01:00",
    "2004-03-02T16:36:23+01:00",
    "2004-03-02T22:05:24+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "zip file closed",
      "elements": [
        {
          "method": "java.util.zip.ZipFile.ensureOpen",
          "source": "ZipFile.java:398"
        },
        {
          "method": "java.util.zip.ZipFile.getEntry",
          "source": "ZipFile.java:145"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.getZipEntry",
          "source": "BundleFile.java:152"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.getEntry",
          "source": "BundleFile.java:243"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.defaultadaptor.DefaultBundleData.getEntry",
          "source": "DefaultBundleData.java:197"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseBundleData.loadManifest",
          "source": "EclipseBundleData.java:198"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.CachedManifest.getManifest",
          "source": "CachedManifest.java:31"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.CachedManifest.get",
          "source": "CachedManifest.java:67"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ManifestLocalization.getResourceBundle",
          "source": "ManifestLocalization.java:104"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ManifestLocalization.getHeaders",
          "source": "ManifestLocalization.java:48"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1078"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1032"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.isLegacy",
          "source": "PluginDescriptor.java:508"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginStopper.run",
          "source": "PluginStopper.java:50"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator.stopLegacyBundles",
          "source": "PlatformActivator.java:285"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:267"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:100"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "53467",
      "date": "2004-03-02T01:40:10+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "zip file closed",
      "elements": [
        {
          "method": "java.util.zip.ZipFile.ensureOpen",
          "source": "ZipFile.java:398"
        },
        {
          "method": "java.util.zip.ZipFile.getEntry",
          "source": "ZipFile.java:145"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.getZipEntry",
          "source": "BundleFile.java:152"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.defaultadaptor.BundleFile$ZipBundleFile.getEntry",
          "source": "BundleFile.java:243"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.defaultadaptor.DefaultBundleData.getEntry",
          "source": "DefaultBundleData.java:197"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseBundleData.loadManifest",
          "source": "EclipseBundleData.java:198"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.CachedManifest.getManifest",
          "source": "CachedManifest.java:31"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.CachedManifest.get",
          "source": "CachedManifest.java:67"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ManifestLocalization.getResourceBundle",
          "source": "ManifestLocalization.java:104"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.ManifestLocalization.getHeaders",
          "source": "ManifestLocalization.java:48"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1078"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Bundle.getHeaders",
          "source": "Bundle.java:1032"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.getProviderName",
          "source": "PluginDescriptor.java:174"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog$3.compare",
          "source": "AboutPluginsDialog.java:433"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1278"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1290"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1289"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1289"
        },
        {
          "method": "java.util.Arrays.mergeSort",
          "source": "Arrays.java:1289"
        },
        {
          "method": "java.util.Arrays.sort",
          "source": "Arrays.java:1219"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.sortByProvider",
          "source": "AboutPluginsDialog.java:427"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e",
          "source": "AboutPluginsDialog.java:111"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutPluginsDialog.\u003cinit\u003e",
          "source": "AboutPluginsDialog.java:92"
        },
        {
          "method": "org.eclipse.ui.internal.ide.dialogs.AboutDialog.buttonPressed",
          "source": "AboutDialog.java:93"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2352"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2033"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:643"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:623"
        },
        {
          "method": "org.eclipse.ui.internal.ide.actions.AboutAction.run",
          "source": "AboutAction.java:81"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:881"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:550"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:502"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:435"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2352"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2033"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1566"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1542"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:263"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:139"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:47"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:256"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:100"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:279"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:742"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:581"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "53467",
      "date": "2004-03-02T01:40:10+01:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "53467",
  "bugId": "53467",
  "date": "2004-03-02T01:40:10+01:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}