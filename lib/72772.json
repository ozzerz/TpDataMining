{
  "comments": [
    "Build I20040824: Searching method declaration references does not work with \nclasses having type parameters.\n\nStack trace:\njava.lang.ClassCastException: \norg.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding\n\tat \norg.eclipse.jdt.internal.core.search.matching.MethodLocator.reportDeclaration\n(MethodLocator.java:192)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReferenc\ne(MethodLocator.java:154)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching\n(MatchLocator.java:1408)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching\n(MatchLocator.java:1643)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching\n(MatchLocator.java:1498)\n\tat org.eclipse.jdt.internal.core.search.matching.MatchLocator.process\n(MatchLocator.java:1162)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches\n(MatchLocator.java:766)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches\n(MatchLocator.java:805)\n\tat \norg.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches\n(MatchLocator.java:921)\n\tat \norg.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches\n(JavaSearchParticipant.java:94)\n\tat org.eclipse.jdt.core.search.SearchEngine.searchDeclarations\n(SearchEngine.java:1066)\n\tat \norg.eclipse.jdt.core.search.SearchEngine.searchDeclarationsOfSentMessages\n(SearchEngine.java:1300)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMe\nthodReferencesIn(ReferenceFinderUtil.java:112)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMe\nthodReferencesIn(ReferenceFinderUtil.java:104)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMe\nthodsReferencedIn(ReferenceFinderUtil.java:95)\n\naso.",
    "I tried some cases \u0026 they worked fine for me.\n\nDo you have a testcase that fails?",
    "The problem only occurs with the new 1.5 implementation of the push down/pull \nup refactoring which has not been released yet. I was hoping that the error \ncould be understood based on the stack trace.\n\nAfter some investigation, I am now able to give some more information:\n\nThe problem occurs if parameterized type bindings occur. Consider a generic \nclass A\u003cT\u003e with a method \"public void bar(){}\" and a class B\u003cR\u003e which extends \nA and has a method \"public void foo(){super.bar()}\"\n\nCalling \norg.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMe\nthodsReferencedIn(IJavaElement[],IProgressMonitor) with a java element array \ncontaining the java element corresponding to B#foo yields the class cast \nexception in MethodLocator, line 192 (see stack trace)\n\nVariable \"declaringClass\" is a parameterized type binding which does not \nextend source type bindings. Therefore the exception.\n\n\n",
    "But when you construct your case, you can find references to the method foo() \nwithout any problems... so the problem is likely in the way the refactoring \ncode is calling the SearchEngine.\n\nI\u0027ll look into protecting ourselves against this, but you should look into how \nyou call the SearchEngine.",
    "I can duplicate this now with the existing \u0027push down\u0027 code... I\u0027ll look into \nit further.",
    "Fixed. We now protect the 3 places where he expect SourceTypeBindings.\n\nIf a Parameterized or Raw type shows up, we\u0027ll extract the SourceTypeBinding.",
    "Verified in I200409240100."
  ],
  "commentCreationDates": [
    "2004-08-27T12:48:50+02:00",
    "2004-08-30T22:40:59+02:00",
    "2004-08-31T10:15:40+02:00",
    "2004-08-31T16:49:22+02:00",
    "2004-08-31T16:57:44+02:00",
    "2004-08-31T17:20:26+02:00",
    "2004-09-23T13:30:24+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedTypeBinding",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MethodLocator.reportDeclaration",
          "source": "MethodLocator.java:192"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchReportReference",
          "source": "MethodLocator.java:154"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:1408"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:1643"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.reportMatching",
          "source": "MatchLocator.java:1498"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.process",
          "source": "MatchLocator.java:1162"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:766"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:805"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches",
          "source": "MatchLocator.java:921"
        },
        {
          "method": "org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches",
          "source": "JavaSearchParticipant.java:94"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchDeclarations",
          "source": "SearchEngine.java:1066"
        },
        {
          "method": "org.eclipse.jdt.core.search.SearchEngine.searchDeclarationsOfSentMessages",
          "source": "SearchEngine.java:1300"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMethodReferencesIn",
          "source": "ReferenceFinderUtil.java:112"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMethodReferencesIn",
          "source": "ReferenceFinderUtil.java:104"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.refactoring.structure.ReferenceFinderUtil.getMethodsReferencedIn",
          "source": "ReferenceFinderUtil.java:95"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "72772",
      "date": "2004-08-27T12:48:50+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "72772",
  "bugId": "72772",
  "date": "2004-08-27T12:48:50+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}