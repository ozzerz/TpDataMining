{
  "comments": [
    "The following NPE gets thrown when my XSD is validated:\njava.lang.NullPointerException\n\tat org.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.validate\n(XSDComplexTypeDefinitionImpl.java:1708)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.validate\n(XSDConcreteCompo\n\tat org.eclipse.xsd.impl.XSDSchemaImpl.validate(XSDSchemaImpl.java:1513)\n\n\nAttached is the e-mail conversation with Ed, Merks\n\n\nRandall, \n\nOf course!  This change in handleAnalysis did the trick for me. \n\n\nIndex: XSDComplexTypeDefinitionImpl.java \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d \nRCS \nfile: /home/technology/org.eclipse.xsd/plugins/org.eclipse.xsd/src/org/eclipse/\nxsd/impl/XSDComplexTypeDefinitionImpl.java,v \nretrieving revision 1.4 \ndiff -u -r1.4 XSDComplexTypeDefinitionImpl.java \n--- XSDComplexTypeDefinitionImpl.java        19 Jul 2004 14:41:23 -0000        \n1.4 \n+++ XSDComplexTypeDefinitionImpl.java        14 Sep 2004 13:50:47 -0000 \n@@ -1238,6 +1238,10 @@ \n             } \n           } \n         } \n+        else if (isEmptyContent) \n+        { \n+          newContentTypeCategory \u003d XSDContentTypeCategory.EMPTY_LITERAL; \n+        } \n       } \n       else \n       { \n\n\n\n\nEd Merks/Toronto/IBM@IBMCA\nmailto: merks@ca.ibm.com\n905-413-3265  (t/l 969)\n\n\n\n\nRandall Hauch \u003crhauch@metamatrix.com\u003e \n09/14/2004 09:40 AM \n To Ed Merks/Toronto/IBM@IBMCA, Goutam Chadalavada \n\u003cgchadalavada@metamatrix.com\u003e  \ncc  \nSubject RE: Problems validating xsd in xsd metamodel. \n\n  \n\n \n\n\n\nEd: \n  \nThanks for looking into this so quickly.  We will open a buzilla.  \nUnfortunately, we are on the 1.1.1 codebase, and we\u0027ll need to patch the \nsoftware so that our customers do not run into this (and so they won\u0027t \ncontinue to see it if they already have).  Is there a chance you could supply \nus with the simple fix (either to 2.0.1 and/or 1.1.1)?   \n  \nThanks, \n  \nRandall \n\n\n-------------------------------------------------------------------------------\n-\nFrom: Ed Merks [mailto:merks@ca.ibm.com] \nSent: Tuesday, September 14, 2004 6:58 AM\nTo: Goutam Chadalavada\nCc: Randall Hauch\nSubject: Re: Problems validating xsd in xsd metamodel.\n\n\nGoutam, \n\nI could reproduce a problem (with 2.0.1), but only if I comment out the import \nstatement.   The XSDComplexTypeDefinitionImpl.handleAnalysis methods needs to \nbe changed so that if the base type is unresolved and the local element \ncontent is empty, the content type category is properly set to EMPTY.  You \nguys should open a bugzilla for this.   Unfortunately, I don\u0027t think I\u0027ll be \nallowed to make any changes to 2.0.1 unless I can argue that this is a serious \n(stop ship) problem that must be fixed immediately (even though I already have \nthe simple fix and consider it to be zero risk). \n\nPerhaps fixing the underlying problem which is causing the valid import not to \nresolve in your environment will be sufficient?  (I.e., perhaps your process \ndoesn\u0027t have network access.)   \n\n\nEd Merks/Toronto/IBM@IBMCA\nmailto: merks@ca.ibm.com\n905-413-3265  (t/l 969)\n\n\n\nGoutam Chadalavada \u003cgchadalavada@metamatrix.com\u003e \n09/13/2004 05:27 PM \n \nTo Ed Merks/Toronto/IBM@IBMCA  \ncc Randall Hauch \u003crhauch@metamatrix.com\u003e  \nSubject Re: Problems validating xsd in xsd metamodel. \n\n\n  \n\n \n\n\n\n\n\nEd,\n\nThanks for the quick reply. I\u0027m attaching the xsd I\u0027m using that is throwing\nthis NPE during validation. I would greatly appreciate it if there can be a\nworkaround for this problem at this point.\n\nRegards,\nGoutam\n\n\nGoutam,\n\nIt might be a bug, but probably not because getComplexType should be \nnull only if the category is SIMPLE or EMPTY.   I\u0027d need to see the \nschema to be sure. \n\n\nGoutam Chadalavada wrote:\n\n\u003eAdding further info on the NPE:\n\u003e\n\u003eThe NPE is being thrown in the if block below beacuse:\n\u003e\n\u003exsdComplexTypeDefinition.getComplexType() is null.\n\u003e\n\u003e            if (xsdComplexTypeDefinition.getContentTypeCategory() \u003d\u003d\n\u003eXSDContentTypeCategory.SIMPLE_LITERAL ||\n\u003e                  xsdComplexTypeDefinition.getContentTypeCategory() !\u003d\n\u003eXSDContentTypeCategory.EMPTY_LITERAL \u0026\u0026\n\u003e                  !xsdComplexTypeDefinition.getComplexType().isEmptiable())\n\u003e            {\n\u003e              createDiagnostic(XSDDiagnosticSeverity.ERROR_LITERAL,\n\u003e\"derivation-ok-restriction.5.2\");\n\u003e            }\n\u003e\n\u003eGoutam Chadalavada wrote:\n\u003e\n\u003e  \n\u003e\n\u003e\u003eHi,\n\u003e\u003e    \n\u003e\u003e\n\u003e\n\u003e  \n\u003e\n\u003e\u003eWe are using 1.1.1 version of the EMF xsd metamodel (version number of the\n\u003e\u003eplugin org.eclipse.xsd). I\u0027m trying to validate an xsd and getting an NPE\n\u003e\u003ebelow(I could send the xsd if needed). I would expect this to be a bug,\n\u003e\u003ececause even if the xsd were bad, we should be getting validation errors\n\u003e\u003enot NPEs. Does any one know if this has been fixed in any subsequent\n\u003e\u003eversions of the plugin? Any help is greatly appreciated.\n\u003e\u003e    \n\u003e\u003e\n\u003e\n\u003e  \n\u003e\n\u003e\u003ejava.lang.NullPointerException\n\u003e\u003e                 at\n\u003e\u003e\n\u003e\u003e    \n\u003e\u003e\n\u003eorg.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.validate(XSDComplexTypeDe\nfinitionImpl.java:1708)\n\u003e  \n\u003e\n\u003e\u003e                 at\n\u003e\u003e\n\u003e\u003e    \n\u003e\u003e\n\u003eorg.eclipse.xsd.impl.XSDConcreteComponentImpl.validate(XSDConcreteComponent\nImpl.java:544)\n\u003e  \n\u003e\n\u003e\u003e                 at\norg.eclipse.xsd.impl.XSDSchemaImpl.validate(XSDSchemaImpl.java:1513)\n\u003e\u003e    \n\u003e\u003e\n\u003e\n\u003e  \n\u003e\n\u003e\u003eThanks,\n\u003e\u003eGoutam\n\n[attachment \"wsdlsoap.xsd\" deleted by Ed Merks/Toronto/IBM]",
    "Created an attachment (id\u003d14538)\nXSD that is causing the NPE when validated.\n\nThis XSD when validated would produce the NPE.",
    "Thanks.  I\u0027ll assign it to the runtime component and we\u0027ll fix it in the next cycle.",
    "The fix is committed to CVS for the 2.1.0 stream.",
    "Fixed in most recent 2.1.0 build"
  ],
  "commentCreationDates": [
    "2004-09-14T20:26:50+02:00",
    "2004-09-14T20:30:38+02:00",
    "2004-09-15T01:19:48+02:00",
    "2004-09-28T16:48:12+02:00",
    "2004-10-14T20:46:09+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.validate",
          "source": "XSDComplexTypeDefinitionImpl.java:1708"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "73906",
      "date": "2004-09-14T20:26:50+02:00",
      "product": "MDT",
      "component": "XSD",
      "severity": "major"
    }
  ],
  "groupId": "73906",
  "bugId": "73906",
  "date": "2004-09-14T20:26:50+02:00",
  "product": "MDT",
  "component": "XSD",
  "severity": "major"
}