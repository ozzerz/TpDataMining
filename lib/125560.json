{
  "comments": [
    "I peformed an update to a tree viewer from a non-UI thread which resulted in an Invalid Thread Access error as one would expect. However, the viewer tried to prompt for the error which resulted in an NPE since the prompt was being attempted from a non-UI thread (or, at least, I assume that\u0027s why the display variable was null). Hre\u0027s the trace:\n\njava.lang.NullPointerException\n\tat org.eclipse.jface.dialogs.IconAndMessageDialog.getSWTImage(IconAndMessageDialog.java:265)\n\tat org.eclipse.jface.dialogs.IconAndMessageDialog.getErrorImage(IconAndMessageDialog.java:212)\n\tat org.eclipse.jface.dialogs.MessageDialog.\u003cinit\u003e(MessageDialog.java:141)\n\tat org.eclipse.jface.dialogs.MessageDialog.openError(MessageDialog.java:310)\n\tat org.eclipse.jface.util.SafeRunnable.handleException(SafeRunnable.java:59)\n\tat org.eclipse.core.runtime.SafeRunner.handleException(SafeRunner.java:65)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:39)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:785)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n\tat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:1859)\n\tat org.eclipse.jface.viewers.StructuredViewer.internalUpdate(StructuredViewer.java:1842)\n\tat org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:1792)\n\tat org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:1747)\n\tat org.eclipse.team.internal.ui.mapping.ResourceTeamAwareContentProvider.propertyChanged(ResourceTeamAwareContentProvider.java:233)\n\tat org.eclipse.team.core.diff.provider.DiffTree$1.run(DiffTree.java:254)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:785)\n\tat org.eclipse.team.core.diff.provider.DiffTree.fireChanges(DiffTree.java:242)\n\tat org.eclipse.team.core.diff.provider.DiffTree.endInput(DiffTree.java:220)\n\tat org.eclipse.team.internal.core.subscribers.SubscriberDiffTreeEventHandler.dispatchEvents(SubscriberDiffTreeEventHandler.java:162)\n\tat org.eclipse.team.internal.core.subscribers.SubscriberEventHandler.doDispatchEvents(SubscriberEventHandler.java:390)\n\tat org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)\n\tat org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)\n\tat org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "This looks like the same problem reported in bug 142299.",
    "The problem here does not have anything to do with class loading - it\u0027s just that SafeRunnable.handleException incorrectly assumes that it is always executed in the UI thread.",
    "Fixed \u003e20070427.",
    "Verified on Windows XP using I20070503-0842."
  ],
  "commentCreationDates": [
    "2006-01-27T20:23:16+01:00",
    "2006-07-31T20:02:28+02:00",
    "2006-07-31T22:03:05+02:00",
    "2007-04-28T05:45:13+02:00",
    "2007-05-04T15:33:16+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.dialogs.IconAndMessageDialog.getSWTImage",
          "source": "IconAndMessageDialog.java:265"
        },
        {
          "method": "org.eclipse.jface.dialogs.IconAndMessageDialog.getErrorImage",
          "source": "IconAndMessageDialog.java:212"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.\u003cinit\u003e",
          "source": "MessageDialog.java:141"
        },
        {
          "method": "org.eclipse.jface.dialogs.MessageDialog.openError",
          "source": "MessageDialog.java:310"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.handleException",
          "source": "SafeRunnable.java:59"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.handleException",
          "source": "SafeRunner.java:65"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:39"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:785"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1859"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.internalUpdate",
          "source": "StructuredViewer.java:1842"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.update",
          "source": "StructuredViewer.java:1792"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.update",
          "source": "StructuredViewer.java:1747"
        },
        {
          "method": "org.eclipse.team.internal.ui.mapping.ResourceTeamAwareContentProvider.propertyChanged",
          "source": "ResourceTeamAwareContentProvider.java:233"
        },
        {
          "method": "org.eclipse.team.core.diff.provider.DiffTree$1.run",
          "source": "DiffTree.java:254"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:785"
        },
        {
          "method": "org.eclipse.team.core.diff.provider.DiffTree.fireChanges",
          "source": "DiffTree.java:242"
        },
        {
          "method": "org.eclipse.team.core.diff.provider.DiffTree.endInput",
          "source": "DiffTree.java:220"
        },
        {
          "method": "org.eclipse.team.internal.core.subscribers.SubscriberDiffTreeEventHandler.dispatchEvents",
          "source": "SubscriberDiffTreeEventHandler.java:162"
        },
        {
          "method": "org.eclipse.team.internal.core.subscribers.SubscriberEventHandler.doDispatchEvents",
          "source": "SubscriberEventHandler.java:390"
        },
        {
          "method": "org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents",
          "source": "BackgroundEventHandler.java:354"
        },
        {
          "method": "org.eclipse.team.internal.core.BackgroundEventHandler.processEvents",
          "source": "BackgroundEventHandler.java:334"
        },
        {
          "method": "org.eclipse.team.internal.core.BackgroundEventHandler$1.run",
          "source": "BackgroundEventHandler.java:173"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "125560",
      "date": "2006-01-27T20:23:16+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "125560",
  "bugId": "125560",
  "date": "2006-01-27T20:23:16+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}