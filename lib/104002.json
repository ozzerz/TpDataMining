{
  "comments": [
    "I am not sure if this is related to bug 53657 or not, but this worked just fine\nin 3.0.x and now does not. \n\nThe first time I call addPage(FormPage) on the editor a null object is first\nadded to the pages attribute and then the page is added.  So after the call the\npages.size() now returns 2 instead of 1 as expected.  Adding additional pages\nonly increments the size of the pages vector by one as expected.  However, now\nsince the size is off by one and there is a null object in that slot, I get the\nfollowing when attempting to open a FormEditor:\n\norg.eclipse.ui.internal.misc.AssertionFailedException: null argument;\n\tat org.eclipse.ui.internal.misc.Assert.isNotNull(Assert.java:81)\n\tat org.eclipse.ui.internal.misc.Assert.isNotNull(Assert.java:68)\n\tat org.eclipse.ui.internal.PartTester.testWorkbenchPart(PartTester.java:101)\n\tat org.eclipse.ui.internal.PartTester.testEditor(PartTester.java:37)\n\tat\norg.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:595)\n\tat org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:365)\n\tat\norg.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:552)\n\tat org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:283)\n\tat\norg.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:126)\n\tat\norg.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:268)\n\tat\norg.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)\n\tat\norg.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:391)\n[snip]\n\nUpon inspecting the FormEditor source I noticed there is an addition in\nregisterPage(int, Object) that seems to be introducing the extra null object in\nthe pages vector.\n\nI will attached a zip that contains an exported plugin that demonstrates the\nproblem.  If you set a breakpoint at line 13 in MyFormEditor and step over it\nthe first time, you will notice that the pages vector now stands at a size of 2.",
    "Created an attachment (id\u003d24838)\nSample Plugin\n",
    "It seems as if the call of page.getPartControl() in the method FormEditor.addPage() causes the insertion of null:\n\n\u003ccode\u003e\npublic int addPage(IFormPage page) throws PartInitException {\n\tint i \u003d super.addPage(page.getPartControl());\n\tconfigurePage(i, page);\n\treturn i;\n}\n\u003c/code\u003e\n\nThe FormPage.getPartControl() returns the FormPage\u0027s ManagedForm, which is not yet created when FormEditor.addPages() and FormEditor.addPage() respectively is called.",
    "(In reply to comment #2)\n\u003e It seems as if the call of page.getPartControl() in the method\n\u003e FormEditor.addPage() causes the insertion of null:\n\u003e \n\u003e \u003ccode\u003e\n\u003e public int addPage(IFormPage page) throws PartInitException {\n\u003e         int i \u003d super.addPage(page.getPartControl());\n\u003e         configurePage(i, page);\n\u003e         return i;\n\u003e }\n\u003e \u003c/code\u003e\n\u003e \n\u003e The FormPage.getPartControl() returns the FormPage\u0027s ManagedForm, which is not\n\u003e yet created when FormEditor.addPages() and FormEditor.addPage() respectively is\n\u003e called.\n\u003e \n\n(In reply to comment #2)\n\u003e It seems as if the call of page.getPartControl() in the method\n\u003e FormEditor.addPage() causes the insertion of null:\n\u003e \n\u003e \u003ccode\u003e\n\u003e public int addPage(IFormPage page) throws PartInitException {\n\u003e         int i \u003d super.addPage(page.getPartControl());\n\u003e         configurePage(i, page);\n\u003e         return i;\n\u003e }\n\u003e \u003c/code\u003e\n\u003e \n\u003e The FormPage.getPartControl() returns the FormPage\u0027s ManagedForm, which is not\n\u003e yet created when FormEditor.addPages() and FormEditor.addPage() respectively is\n\u003e called.\n\u003e \n    protected void addPages() {\n        try {\n            /* MAGIC CODE START */   \n           this.createPartControl(this.getContainer());\n            /* MAGIC CODE END */   \n            super.addPage(MyPage(this,\"OK\",\"My Title\") ,super.getEditorInput());            \n            \n        } catch (PartInitException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n\n\nWhen I added the \"magic code section\", the assertion error disappeared. The editor appears but contains no pages. ",
    "The attached plug-in works when tested with RC1. I needed to modify MyFormPage.java a bit though:\n\n\tprotected void createFormContent(IManagedForm managedForm) {\n\t\tScrolledForm form \u003d managedForm.getForm();\n\t\tform.setText(getTitle());\n\t\tform.getBody().setLayout(new GridLayout());\n\t\tmanagedForm.getToolkit().createLabel( form.getBody(), \"Test Label\" );\n\t}\t\n\nWith this change, all three pages have titles and the label shows up.",
    "A problem with addPage(IFormPage) in 3.3M6 is that it assumes the control was already created, which is not the case with lazily created page controls."
  ],
  "commentCreationDates": [
    "2005-07-15T15:54:52+02:00",
    "2005-07-15T16:00:35+02:00",
    "2005-12-13T12:02:53+01:00",
    "2006-03-10T12:20:10+01:00",
    "2006-04-18T22:52:49+02:00",
    "2007-04-10T16:49:08+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.ui.internal.misc.AssertionFailedException",
      "message": "null argument;",
      "elements": [
        {
          "method": "org.eclipse.ui.internal.misc.Assert.isNotNull",
          "source": "Assert.java:81"
        },
        {
          "method": "org.eclipse.ui.internal.misc.Assert.isNotNull",
          "source": "Assert.java:68"
        },
        {
          "method": "org.eclipse.ui.internal.PartTester.testWorkbenchPart",
          "source": "PartTester.java:101"
        },
        {
          "method": "org.eclipse.ui.internal.PartTester.testEditor",
          "source": "PartTester.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "EditorReference.java:595"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "EditorReference.java:365"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:552"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.setVisible",
          "source": "PartPane.java:283"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PresentablePart.setVisible",
          "source": "PresentablePart.java:126"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select",
          "source": "PresentablePartFolder.java:268"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select",
          "source": "LeftToRightTabOrder.java:65"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart",
          "source": "TabbedStackPresentation.java:391"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "104002",
      "date": "2005-07-15T15:54:52+02:00",
      "product": "Platform",
      "component": "User Assistance",
      "severity": "normal"
    }
  ],
  "groupId": "104002",
  "bugId": "104002",
  "date": "2005-07-15T15:54:52+02:00",
  "product": "Platform",
  "component": "User Assistance",
  "severity": "normal"
}