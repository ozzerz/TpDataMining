{
  "comments": [
    "build I20050419-1200\n\nSaw the following in the (linux-gtk) console output for this build.\nThere are some earlier exceptions (reported separately), so this may be a\nsecondary effect.\n\n  [java] !ENTRY org.eclipse.ui 4 0 2005-04-19 14:35:25.733\n     [java] !MESSAGE Widget is disposed\n     [java] !STACK 0\n     [java] org.eclipse.swt.SWTException: Widget is disposed\n     [java] \tat org.eclipse.swt.SWT.error(SWT.java:2940)\n     [java] \tat org.eclipse.swt.SWT.error(SWT.java:2863)\n     [java] \tat org.eclipse.swt.SWT.error(SWT.java:2834)\n     [java] \tat org.eclipse.swt.widgets.Widget.error(Widget.java:402)\n     [java] \tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:338)\n     [java] \tat org.eclipse.swt.widgets.Tree.getItems(Tree.java:1005)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.AbstractStructuredCommand.findMatches(AbstractStructuredCommand.java:140)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.AbstractStructuredCommand.playback(AbstractStructuredCommand.java:125)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroCommandShell$4.run(MacroCommandShell.java:509)\n     [java] \tat org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:147)\n     [java] \tat\norg.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:28)\n     [java] \tat org.eclipse.swt.widgets.Display.syncExec(Display.java:3262)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroCommandShell.playInGUIThread(MacroCommandShell.java:524)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroCommandShell.playback(MacroCommandShell.java:465)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroCommandShell$NestedShell.run(MacroCommandShell.java:111)\n     [java] \tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n     [java] \tat\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n     [java] \tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2755)\n     [java] \tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2475)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroUtil.processDisplayEvents(MacroUtil.java:654)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroUtil.forceMenuOpen(MacroUtil.java:640)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroUtil.locateMenuItem(MacroUtil.java:605)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroUtil.locateMenuBarItem(MacroUtil.java:556)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroUtil.locateCommandTarget(MacroUtil.java:524)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.BooleanSelectionCommand.playback(BooleanSelectionCommand.java:124)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroCommandShell$4.run(MacroCommandShell.java:509)\n     [java] \tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n     [java] \tat\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n     [java] \tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2755)\n     [java] \tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2475)\n     [java] \tat org.eclipse.jface.window.Window.runEventLoop(Window.java:803)\n     [java] \tat org.eclipse.jface.window.Window.open(Window.java:781)\n     [java] \tat\norg.eclipse.ui.actions.NewProjectAction.run(NewProjectAction.java:114)\n     [java] \tat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n     [java] \tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)\n     [java] \tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\n     [java] \tat\norg.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\n     [java] \tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n     [java] \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1012)\n     [java] \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1036)\n     [java] \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)\n     [java] \tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:891)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.BooleanSelectionCommand.doClick(BooleanSelectionCommand.java:140)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.BooleanSelectionCommand.playback(BooleanSelectionCommand.java:130)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroCommandShell$4.run(MacroCommandShell.java:509)\n     [java] \tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n     [java] \tat\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n     [java] \tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2755)\n     [java] \tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2475)\n     [java] \tat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:153)\n     [java] \tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:303)\n     [java] \tat\norg.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:624)\n     [java] \tat\norg.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n     [java] \tat\norg.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:621)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2133)\n     [java] \tat\norg.eclipse.pde.internal.ui.tests.macro.MacroManager.play(MacroManager.java:228)\n     [java] \tat org.eclipse.pde.ui.tests.PDETestCase.playScript(PDETestCase.java:55)\n     [java] \tat\norg.eclipse.pde.ui.tests.wizards.plugin.BasicJavaPluginTestCase.testMinimalJavaPluginWithoutManifest(BasicJavaPluginTestCase.java:47)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat java.lang.reflect.Method.invoke(Method.java:324)\n     [java] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n     [java] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n     [java] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n     [java] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n     [java] \tat junit.framework.TestResult.run(TestResult.java:109)\n     [java] \tat junit.framework.TestCase.run(TestCase.java:118)\n     [java] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n     [java] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n     [java] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n     [java] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n     [java] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n     [java] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n     [java] \tat org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:313)\n     [java] \tat org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:199)\n     [java] \tat org.eclipse.test.UITestApplication$3.run(UITestApplication.java:188)\n     [java] \tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n     [java] \tat\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n     [java] \tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2755)\n     [java] \tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2475)\n     [java] \tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)\n     [java] \tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)\n     [java] \tat\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)\n     [java] \tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n     [java] \tat\norg.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n     [java] \tat\norg.eclipse.test.UITestApplication.runApplication(UITestApplication.java:131)\n     [java] \tat org.eclipse.test.UITestApplication.run(UITestApplication.java:58)\n     [java] \tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n     [java] \tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)\n     [java] \tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat java.lang.reflect.Method.invoke(Method.java:324)\n     [java] \tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:319)\n     [java] \tat org.eclipse.core.launcher.Main.basicRun(Main.java:272)\n     [java] \tat org.eclipse.core.launcher.Main.run(Main.java:951)\n     [java] \tat org.eclipse.core.launcher.Main.main(Main.java:935)\n     [java] Widget is disposed",
    "There are lots of occurrences of this one.\n",
    "how did you get these macro errors?  do you have pde.ui.tests in your \nworkspace or something?  it\u0027s not part of the build. ",
    "This was in the console log of the build, not my workspace.\n",
    "Each script works individually, but when played as part of JUnit test, \nsomething wierd happens. \n\nI placed a ClassCastException breakpoint, and I stop in several scripts:\n\n    private WorkbenchPartReference getReference(IEditorPart editor) {\n        return (WorkbenchPartReference)((EditorSite)(editor.getEditorSite\n())).getPartReference();\n    }\n\nHere is the complete stack:\n\nThread [main] (Suspended (exception ClassCastException))\n\tWorkbenchPage.getReference(IEditorPart) line: 2230\n\tWorkbenchPage.closeEditor(IEditorPart, boolean) line: 1176\n\tAbstractTextEditor$17.run() line: 3043\n\tRunnableLock.run() line: 35\n\tUISynchronizer(Synchronizer).runAsyncMessages(boolean) line: 118\n\tDisplay.runAsyncMessages(boolean) line: 2874\n\tDisplay.readAndDispatch() line: 2533\n\tModalContext$ModalContextThread.block() line: 153\n\tModalContext.run(IRunnableWithProgress, boolean, IProgressMonitor, \nDisplay) line: 303\n\tApplicationWindow$1.run() line: 624\n\tBusyIndicator.showWhile(Display, Runnable) line: 69\n\tWorkbenchWindow(ApplicationWindow).run(boolean, boolean, \nIRunnableWithProgress) line: 621\n\tWorkbenchWindow.run(boolean, boolean, IRunnableWithProgress) line: 2133\n\tMacroManager.play(Display, IRunnableContext, String, InputStream) \nline: 228\n\tFeatureWithPluginTestCase(PDETestCase).playScript(String) line: 55\n\tFeatureWithPluginTestCase.testFeatureWithExternalPlugin() line: 33\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not \navailable [native method]\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25\n\tMethod.invoke(Object, Object[]) line: 324\n\tFeatureWithPluginTestCase(TestCase).runTest() line: 154\n\tFeatureWithPluginTestCase(TestCase).runBare() line: 127\n\tTestResult$1.protect() line: 106\n\tTestResult.runProtected(Test, Protectable) line: 124\n\tTestResult.run(TestCase) line: 109\n\tFeatureWithPluginTestCase(TestCase).run(TestResult) line: 118\n\tTestSuite.runTest(Test, TestResult) line: 208\n\tTestSuite.run(TestResult) line: 203\n\tTestSuite.runTest(Test, TestResult) line: 208\n\tTestSuite.run(TestResult) line: 203\n\tTestSuite.runTest(Test, TestResult) line: 208\n\tTestSuite.run(TestResult) line: 203\n\tRemotePluginTestRunner(RemoteTestRunner).runTests(String[], String) \nline: 474\n\tRemotePluginTestRunner(RemoteTestRunner).run() line: 342\n\tRemotePluginTestRunner.main(String[]) line: 57\n\tUITestApplication$1.run() line: 99\n\tRunnableLock.run() line: 35\n\tUISynchronizer(Synchronizer).runAsyncMessages(boolean) line: 118\n\tDisplay.runAsyncMessages(boolean) line: 2874\n\tDisplay.readAndDispatch() line: 2533\n\tWorkbench.runEventLoop(Window$IExceptionHandler, Display) line: 1570\n\tWorkbench.runUI() line: 1534\n\tWorkbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 306\n\tPlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 143\n\tIDEApplication.run(Object) line: 103\n\tUITestApplication.run(Object) line: 39\n\tPlatformActivator$1.run(Object) line: 228\n\tEclipseStarter.run(Object) line: 344\n\tEclipseStarter.run(String[], Runnable) line: 156\n\tNativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not \navailable [native method]\n\tNativeMethodAccessorImpl.invoke(Object, Object[]) line: 39\n\tDelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25\n\tMethod.invoke(Object, Object[]) line: 324\n\tMain.invokeFramework(String[], URL[]) line: 328\n\tMain.basicRun(String[]) line: 272\n\tMain.run(String[]) line: 964\n\tMain.main(String[]) line: 948\n\nI am not sure if this is the problem, but it seems strange that closing an \neditor throws a class cast exception.",
    "The following cast is the problem:\n\n private WorkbenchPartReference getReference(IEditorPart editor) {\n        return (WorkbenchPartReference)((EditorSite)(editor.getEditorSite\n())).getPartReference();\n    }\n\nThe editor in question is a nested source page in the PDE editor and has \nMultiPageEditorSite. This class directly implements IEditorSite. The cast \nabove to \u0027EditorSite\u0027 fails. It looks like that the UI code somehow \u0027eats\u0027 the \nexception but the state it leaves behind prevents the proper tear down.\n\nThere may still be problems with the script, but I verified that the same set \nof test cases work well with 0414 integration build (without class cast \nexceptions in the UI code).\n\nWhen the UI code is fixed, please return back to me to verify that there are \nno remaining problems with the scripts.\n",
    "The nested text editor is trying to close itself.\n\nWhat kind of multi\u003dpage editor is being used here?\nI couldn\u0027t reproduce it using the manifest editor.\n\n",
    "I\u0027ve released some changes to WorkbenchPage to check for this case.\n\nStefan, could you please review my changes?\n",
    "Confirmed that this fix made the scripts run again.\n\nI opened a separate bug 93049 to make the macro player more robust when faced \nwith the runtime exceptions from the platform. "
  ],
  "commentCreationDates": [
    "2005-04-20T04:34:40+02:00",
    "2005-04-20T04:34:50+02:00",
    "2005-04-20T04:41:08+02:00",
    "2005-04-20T15:38:05+02:00",
    "2005-04-26T01:49:48+02:00",
    "2005-04-26T02:12:06+02:00",
    "2005-04-26T17:27:43+02:00",
    "2005-04-26T17:47:37+02:00",
    "2005-04-29T22:47:05+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed      [java]",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2940"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "92020",
      "date": "2005-04-20T04:34:40+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "92020",
  "bugId": "92020",
  "date": "2005-04-20T04:34:40+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}