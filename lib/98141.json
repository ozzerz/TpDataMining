{
  "comments": [
    "From bug 96964.\n\nWhen suspended in a \u003cclinit\u003e method of an interface, attempting an evaluation \nin the context of that interface results in an error message of: \"Evaluations \nmust contain either an expression or a block of well-formed statements\".\n\nThe real problem is that we are attempting to generate source for a run() \nmethod in an interface - which won\u0027t work.\n\nNot a regression. Test case follows:\n\n* Create classes that follow\n* Place a breakpoint on first line of AClass.doit()\n* Debug to breakpoint\n* select 2nd frame from top (AnInterface.\u003cclinit\u003e() line: 4 [local variables \nunavailable])\n* in variables view, deselct all variables and in detail pane, \nevaluate \"aConstant \u003d\u003d null\"\n\nCode:\n\npublic class AClass implements AnInterface {\n\t\n\tObject thing;\n\t\n\tpublic AClass() {\n\t\tthing \u003d AnInterface.aConstant;\n\t}\n\n\tpublic static Object doit() {\n\t\tStringBuffer buf \u003d new StringBuffer();\n\t\tbuf.append(\"CONST\");\n\t\treturn buf.toString();\n\t}\n\n}\n\nublic class ASubClass extends AClass {\n\n\tpublic ASubClass() {\n\t\tsuper();\n\t\tSystem.out.println(\"ok\");\n\t}\n}\n\n\npublic interface AnInterface {\n\t\n\tpublic static Object aConstant \u003d AClass.doit(); \n\n}\n\npublic class MainClass {\n\t\n\tObject aVar;\n\n\tpublic static void main(String[] args) {\n\t\tnew ASubClass();\n\t}\n\t\n\tpublic MainClass() {\n\t\taVar \u003d AnInterface.aConstant;\n\t}\n\n}",
    "deferred for post 3.1 consderation.",
    "Looking at JDI, it\u0027s not possible to perform an assignment to a field defined \nin an interface type (only a class type). So we need to provide a better error \nmessage, rather than support the evaluation.",
    "Open for 3.2",
    "Fixed. Also fixed problem of perform the evaluation AnInterface.aConstant \u003d \nnull in a class context.\n\njava.lang.ClassCastException: org/eclipse/jdi/internal/InterfaceTypeImpl \nincompatible with com/sun/jdi/ClassType\n    at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.setJDIValue\n(JDIFieldVariable.java:103)\n    at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.setValue\n(JDIFieldVariable.java:259)\n    at \norg.eclipse.jdt.internal.debug.eval.ast.instructions.AssignmentOperator.execute\n(AssignmentOperator.java:66)\n    at org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute\n(Interpreter.java:50)\n    at org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1\n$EvaluationRunnable.run(ASTEvaluationEngine.java:347)\n    at org.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation\n(JDIThread.java:565)\n    at \norg.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable\n.run(ASTEvaluationEngine.java:381)\n    at org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run\n(JDIThread.java:2446)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\n\nChanges to ASTEvaluationEngine, JDIFieldVariable, EvaluationEngineMessages, \nJDIDebugModelMessages.",
    "Please verify, Luc.",
    "Verified."
  ],
  "commentCreationDates": [
    "2005-06-02T18:40:02+02:00",
    "2005-06-02T18:40:23+02:00",
    "2005-07-14T18:17:56+02:00",
    "2005-07-14T18:19:05+02:00",
    "2005-07-14T19:54:48+02:00",
    "2005-07-14T19:55:10+02:00",
    "2005-07-15T23:20:14+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org/eclipse/jdi/internal/InterfaceTypeImpl  incompatible with com/sun/jdi/ClassType",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.setJDIValue",
          "source": "JDIFieldVariable.java:103"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.setValue",
          "source": "JDIFieldVariable.java:259"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.instructions.AssignmentOperator.execute",
          "source": "AssignmentOperator.java:66"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.Interpreter.execute",
          "source": "Interpreter.java:50"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$1$EvaluationRunnable.run",
          "source": "ASTEvaluationEngine.java:347"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread.runEvaluation",
          "source": "JDIThread.java:565"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.eval.ast.engine.ASTEvaluationEngine$EvalRunnable.run",
          "source": "ASTEvaluationEngine.java:381"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.core.model.JDIThread$ThreadJob.run",
          "source": "JDIThread.java:2446"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 4,
      "bugId": "98141",
      "date": "2005-07-14T19:54:48+02:00",
      "product": "JDT",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "98141",
  "bugId": "98141",
  "date": "2005-06-02T18:40:02+02:00",
  "product": "JDT",
  "component": "Debug",
  "severity": "normal"
}