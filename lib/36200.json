{
  "comments": [
    "When generating a New Class as a subclass of an abstract class, a null pointer \nexception is thrown (at least every other time). Stack trace from log below.\n\nI will attach the class.\n\njava.lang.reflect.InvocationTargetException\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:313)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:252)\n\tat org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:758)\n\tat org.eclipse.jdt.internal.ui.wizards.NewElementWizard.performFinish\n(NewElementWizard.java:96)\n\tat \norg.eclipse.jdt.internal.ui.wizards.NewClassCreationWizard.performFinish\n(NewClassCreationWizard.java:66)\n\tat org.eclipse.jface.wizard.WizardDialog.finishPressed\n(WizardDialog.java:608)\n\tat org.eclipse.jface.wizard.WizardDialog.buttonPressed\n(WizardDialog.java:321)\n\tat org.eclipse.jface.dialogs.Dialog$1.widgetSelected(Dialog.java:423)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:89)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1838)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1545)\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java:583)\n\tat org.eclipse.jface.window.Window.open(Window.java:563)\n\tat org.eclipse.jdt.internal.ui.wizards.AbstractOpenWizardAction.run\n(AbstractOpenWizardAction.java:158)\n\tat org.eclipse.jdt.internal.ui.wizards.NewTypeDropDownAction.run\n(NewTypeDropDownAction.java:75)\n\tat org.eclipse.jdt.internal.ui.wizards.NewTypeDropDownAction.run\n(NewTypeDropDownAction.java:106)\n\tat org.eclipse.ui.internal.PluginAction.runWithEvent\n(PluginAction.java:251)\n\tat org.eclipse.ui.internal.WWinPluginAction.runWithEvent\n(WWinPluginAction.java:207)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection\n(ActionContributionItem.java:456)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent\n(ActionContributionItem.java:403)\n\tat org.eclipse.jface.action.ActionContributionItem.access$0\n(ActionContributionItem.java:397)\n\tat \norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent\n(ActionContributionItem.java:72)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:81)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:840)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1838)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1545)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1402)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1385)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:291)\n\tat org.eclipse.core.launcher.Main.run(Main.java:747)\n\tat org.eclipse.core.launcher.Main.main(Main.java:583)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.jdt.internal.core.SourceType.equalsDOMNode\n(SourceType.java:127)\n\tat org.eclipse.jdt.internal.core.JavaElement.followPath\n(JavaElement.java:217)\n\tat org.eclipse.jdt.internal.core.JavaElement.findNode\n(JavaElement.java:207)\n\tat \norg.eclipse.jdt.internal.core.CreateTypeMemberOperation.generateNewCompilationU\nnitDOM(CreateTypeMemberOperation.java:65)\n\tat \norg.eclipse.jdt.internal.core.CreateElementInCUOperation.executeOperation\n(CreateElementInCUOperation.java:133)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.execute\n(JavaModelOperation.java:365)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.run\n(JavaModelOperation.java:684)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1595)\n\tat org.eclipse.jdt.internal.core.JavaElement.runOperation\n(JavaElement.java:543)\n\tat org.eclipse.jdt.internal.core.SourceType.createMethod\n(SourceType.java:109)\n\tat org.eclipse.jdt.ui.wizards.NewTypeWizardPage.createInheritedMethods\n(NewTypeWizardPage.java:1715)\n\tat org.eclipse.jdt.ui.wizards.NewClassWizardPage.createTypeMembers\n(NewClassWizardPage.java:242)\n\tat org.eclipse.jdt.ui.wizards.NewTypeWizardPage.createType\n(NewTypeWizardPage.java:1406)\n\tat \norg.eclipse.jdt.internal.ui.wizards.NewClassCreationWizard.finishPage\n(NewClassCreationWizard.java:52)\n\tat org.eclipse.jdt.internal.ui.wizards.NewElementWizard$2.run\n(NewElementWizard.java:89)\n\tat org.eclipse.jdt.internal.core.BatchOperation.executeOperation\n(BatchOperation.java:34)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.execute\n(JavaModelOperation.java:365)\n\tat org.eclipse.jdt.internal.core.JavaModelOperation.run\n(JavaModelOperation.java:684)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1595)\n\tat org.eclipse.jdt.core.JavaCore.run(JavaCore.java:2711)\n\tat org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run\n(WorkbenchRunnableAdapter.java:42)\n\tat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:302)\n\t... 38 more",
    "Created an attachment (id\u003d4493)\nVisitor.java\n\nThis is the abstract superclass. I have performed this operation prior to 2.1\nfinal without any problems.",
    "Martin, can you please comment. ",
    "could not reproduce.\nBob, do you have an other reproducible case? The attached code refers to lots of\nother types from your project. I tried to simulate such a project but couldn\u0027t\nreproduce the problem.\nPlease also have a look at the \u0027new file template\u0027. Do you have something\nspecial in there (then the bug is that we don\u0027t prevent you from doing that).\n\nFrom the stacktrace, JCore has the problem: equalsDomNode does gets null as\nargument. followPath uses the method with dom.getFirstChild() which seems to be\nnull.\nMoving to JCore",
    "I will investigate.",
    "I could not reproduce with your test case. Do you have any error prior to save\nthe subclass? Did you get the error over and over again? If it is repeatable,\ncould you please provide us with steps to reproduce?\n\nThanks.",
    "For this particular example, it happens about half the time. Usually the pattern\nis, I try it, it fails. I delete the (empty) generated file and try it again. It\nsucceeds. Nothing special about it. The new class is not in the same package as\nthe  Elem, Exp, Factory classes, is in the same package as all others.\n\nTo bring up dialog I right-click on a file in the package explorer that is\nalready in the desired package, New \u003e Java Class. Dialog comes up. Type the\nclass name. Below hit Browse button. Dialog comes up. Type Visitor. Click OK.\nClick Finish.\n\nI don\u0027t feel right about supplying entire package, esp. since there\u0027s no\nguarantee that would enable you to reproduce it. Since it doesn\u0027t happen every\ntime for me, I hope the fact it doesn\u0027t happen anytime for you won\u0027t prevent\nsomeone from following up on the stack trace I sent.",
    "I already looked at the stack trace and I don\u0027t see why the node is suddendly \nnull. I will try your test case again.",
    "Could not reproduce after about twenty tries. Do you use specific settings? I \nknow something is wrong, but I still need to find a reproducable test case to \nfix it.",
    "Deja vu. Seems to me I filed an earlier bug involving visitors that couldn\u0027t be\nreproduced there. Even when I tried to boil it down with the usual binary chop I\ncouldn\u0027t get a small, consistently failing case. Are multiple threads involved\nin this refactoring?\n\nVisitors are recursively self-referential. That is, each class overrides a\nvisit(visitor) method to call a visitor.visitXXX(XXX item) method, where XXX is\nthe class. But this is just the Visitor pattern.\n\nAgain, the fact that it doesn\u0027t fail consistently, even for me, suggests some\nkind of race.",
    "Moving to JDT/UI for comment.\nCould you please comment 9 from Bob Foster?\n\nMove it back to JDT/Core when done. I tried unsuccessfully to reproduce the\nproblem. It looks like the compilation unit changed during the iteration of the\npath to a JDOM element.",
    "There are no other threads involved in the creation of the class, but of course\nthe reconciler thread could interfere. Olivier, what about that?",
    "Bob, could it be possible that you had syntax error in your code?",
    "The first time, maybe. But when I tried to reproduce it again a few days later\nand saw it about 50% of the time, I don\u0027t think so.\n\nBut if you have a bug like that, it would be good to fix it. ;-}",
    "Did you get it lately using 3.0 integration build?",
    "Closing as WORKSFORME.\nPlease reopen if you get it again."
  ],
  "commentCreationDates": [
    "2003-04-08T12:57:16+02:00",
    "2003-04-08T12:59:54+02:00",
    "2003-04-08T14:31:43+02:00",
    "2003-04-08T15:06:13+02:00",
    "2003-04-08T15:38:50+02:00",
    "2003-04-08T20:27:18+02:00",
    "2003-04-09T00:19:11+02:00",
    "2003-04-09T16:29:29+02:00",
    "2003-04-09T16:37:36+02:00",
    "2003-04-10T06:59:13+02:00",
    "2003-04-15T19:43:49+02:00",
    "2003-04-16T09:31:47+02:00",
    "2003-04-16T20:20:32+02:00",
    "2003-04-17T01:30:50+02:00",
    "2003-10-03T17:48:34+02:00",
    "2004-02-23T21:42:28+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:313"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:252"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.run",
          "source": "WizardDialog.java:758"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.NewElementWizard.performFinish",
          "source": "NewElementWizard.java:96"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.NewClassCreationWizard.performFinish",
          "source": "NewClassCreationWizard.java:66"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.finishPressed",
          "source": "WizardDialog.java:608"
        },
        {
          "method": "org.eclipse.jface.wizard.WizardDialog.buttonPressed",
          "source": "WizardDialog.java:321"
        },
        {
          "method": "org.eclipse.jface.dialogs.Dialog$1.widgetSelected",
          "source": "Dialog.java:423"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:89"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1838"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1545"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java:583"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:563"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.AbstractOpenWizardAction.run",
          "source": "AbstractOpenWizardAction.java:158"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.NewTypeDropDownAction.run",
          "source": "NewTypeDropDownAction.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.wizards.NewTypeDropDownAction.run",
          "source": "NewTypeDropDownAction.java:106"
        },
        {
          "method": "org.eclipse.ui.internal.PluginAction.runWithEvent",
          "source": "PluginAction.java:251"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPluginAction.runWithEvent",
          "source": "WWinPluginAction.java:207"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:456"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:403"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:397"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:72"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:840"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1838"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1545"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1402"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1385"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:291"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:747"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:583"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.jdt.internal.core.SourceType.equalsDOMNode",
            "source": "SourceType.java:127"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaElement.followPath",
            "source": "JavaElement.java:217"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaElement.findNode",
            "source": "JavaElement.java:207"
          },
          {
            "method": "org.eclipse.jdt.internal.core.CreateTypeMemberOperation.generateNewCompilationUnitDOM",
            "source": "CreateTypeMemberOperation.java:65"
          },
          {
            "method": "org.eclipse.jdt.internal.core.CreateElementInCUOperation.executeOperation",
            "source": "CreateElementInCUOperation.java:133"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaModelOperation.execute",
            "source": "JavaModelOperation.java:365"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
            "source": "JavaModelOperation.java:684"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1595"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaElement.runOperation",
            "source": "JavaElement.java:543"
          },
          {
            "method": "org.eclipse.jdt.internal.core.SourceType.createMethod",
            "source": "SourceType.java:109"
          },
          {
            "method": "org.eclipse.jdt.ui.wizards.NewTypeWizardPage.createInheritedMethods",
            "source": "NewTypeWizardPage.java:1715"
          },
          {
            "method": "org.eclipse.jdt.ui.wizards.NewClassWizardPage.createTypeMembers",
            "source": "NewClassWizardPage.java:242"
          },
          {
            "method": "org.eclipse.jdt.ui.wizards.NewTypeWizardPage.createType",
            "source": "NewTypeWizardPage.java:1406"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.wizards.NewClassCreationWizard.finishPage",
            "source": "NewClassCreationWizard.java:52"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.wizards.NewElementWizard$2.run",
            "source": "NewElementWizard.java:89"
          },
          {
            "method": "org.eclipse.jdt.internal.core.BatchOperation.executeOperation",
            "source": "BatchOperation.java:34"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaModelOperation.execute",
            "source": "JavaModelOperation.java:365"
          },
          {
            "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
            "source": "JavaModelOperation.java:684"
          },
          {
            "method": "org.eclipse.core.internal.resources.Workspace.run",
            "source": "Workspace.java:1595"
          },
          {
            "method": "org.eclipse.jdt.core.JavaCore.run",
            "source": "JavaCore.java:2711"
          },
          {
            "method": "org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run",
            "source": "WorkbenchRunnableAdapter.java:42"
          },
          {
            "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
            "source": "ModalContext.java:302"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "36200",
      "date": "2003-04-08T12:57:16+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "36200",
  "bugId": "36200",
  "date": "2003-04-08T12:57:16+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}