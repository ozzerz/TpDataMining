{
  "comments": [
    "An ArrayIndexOutOfBoundsException is thrown when setting an image through \nTreeItem.setImage() on 3.1M5a. This is specific to Linux-GTK, works on Windows \nXP platform. The image is a 16x18 png icon.\n\nHere is the exception message that is thrown:\n\n!ENTRY org.eclipse.ui.workbench 4 2 2005-03-10 07:51:26.245\n!MESSAGE Problems occurred when invoking code from plug-\nin: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException: 288\n        at org.eclipse.swt.widgets.ImageList.add(ImageList.java:81)\n        at org.eclipse.swt.widgets.TreeItem.setImage(TreeItem.java:1147)\n        at org.eclipse.swt.widgets.TreeItem.setImage(TreeItem.java:1157)\n\nThere error appears to be thrown down in ImageList.add() method. Specifically \nin the for loops within the if(hasAlpah) block:\n\n      if (hasAlpha) {\n         byte [] alpha \u003d data.alphaData;\n         int stride \u003d OS.gdk_pixbuf_get_rowstride (pixbuf);\n         int /*long*/ pixels \u003d OS.gdk_pixbuf_get_pixels (pixbuf);\n         byte [] line \u003d new byte [stride];\n         for (int y \u003d 0; y \u003c h [0]; y++) {\n            int /*long*/ offset \u003d pixels + (y * stride);\n            OS.memmove (line, offset, stride);\n            for (int x \u003d 0; x\u003cw [0]; x++) {\n               line [x*4+3] \u003d alpha [y*h [0]+x];\n            }\n            OS.memmove (offset, line, stride);\n         }\n      }\n\nalpha\u003dbyte[288] is returned by data.alphaData. The array exception is thrown \nat 288.",
    "Chrix, make sure that this problem is fixed for both Table and Tree since they \nshould have almost identical code.",
    "BB to investigate with SSQ.",
    "Ouch, that should be alpha [y*w [0]+x] not alpha [y*h [0]+x].  As it turns out,\nwhile this code has no copies in SWT, I found the same mistake in Display.java.\n\nFixed \u003e 20050502"
  ],
  "commentCreationDates": [
    "2005-03-10T13:09:27+01:00",
    "2005-03-10T15:16:28+01:00",
    "2005-04-12T06:21:59+02:00",
    "2005-05-03T05:42:47+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "288",
      "elements": [
        {
          "method": "org.eclipse.swt.widgets.ImageList.add",
          "source": "ImageList.java:81"
        },
        {
          "method": "org.eclipse.swt.widgets.TreeItem.setImage",
          "source": "TreeItem.java:1147"
        },
        {
          "method": "org.eclipse.swt.widgets.TreeItem.setImage",
          "source": "TreeItem.java:1157"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "87636",
      "date": "2005-03-10T13:09:27+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "87636",
  "bugId": "87636",
  "date": "2005-03-10T13:09:27+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}