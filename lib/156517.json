{
  "comments": [
    "I would like to request a change to the org.eclipse.atf.mozilla.swt.browser_1.0.1/META-INF/MANIFEST.MF file.\n\nFrom:\n\nFragment-Host: org.eclipse.swt;bundle-version\u003d\"3.1.0\"\n\nTo:\n\nFragment-Host: org.eclipse.swt;bundle-version\u003d\"[3.1.0,4.0.0)\"\n\n\nThis allows users to use later versions of SWT with ATF.  I am currently trying to use newer version of WTP which uses a newer base platform that ships with SWT   org.eclipse.swt_3.2.1.v3234a.jar.",
    "This is my understanding of the rules for bundle-version match now that we are suing OSGI. \n\nGreater-than-or-equal\nRequire-Bundle: org.eclipse.foo; bundle-version\u003d3.1.0\n\nOnly a certain version\nRequire-Bundle: org.eclipse.foo; bundle-version\u003d\"[3.1.0,3.1.0]\"\n\nAll version greaterthan-or-equal 3.1.0 versions but less than 4.0.0\nRequire-Bundle: org.eclipse.foo; bundle-version\u003d\"[3.1.0,4.0.0)\"\n\n\nIt looks the what is being specifying today for bundle-version is version greater than or equal to 3.1.0. I noticed that the editor is putting quotes around the version number. Not sure quotes are required. I think your request is more restrictive than what we are specifying. I\u0027m not having problem running against eclipse 3.2 with the latest builds. If you are bringing the source into eclipse and building it, the .classpath file has to manually edited to match the version for the jar (org.eclipse.swt_3.2.1.v3234a.jar). I know of no way around this, and I don\u0027t think your change fixes this problem.  \n\nAre you bring the source into eclipse and building it or just installing a build using update manager?",
    "I\u0027m installing from ZIPs (SDK version of many eclipse components), the error I was getting:\n\njava.lang.NoClassDefFoundError: org/eclipse/swt/browser/MozillaCloseWindowListener\n        at java.lang.Class.getDeclaredConstructors0(Native Method)\n        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)\n        at java.lang.Class.getConstructor0(Class.java:2671)\n        at java.lang.Class.newInstance0(Class.java:321)\n        at java.lang.Class.newInstance(Class.java:303)\n        at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:157)\n        at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:759)\n        at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)\n        at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:51)\n        at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:234)\n...SNIP...\n        at org.eclipse.ui.ide.IDE.openEditor(IDE.java:290)\n        at org.eclipse.atf.mozilla.ide.ui.browser.util.MozBrowserUtil.openMozillaBrowser(MozBrowserUtil.java:39)\n        at org.eclipse.atf.mozilla.ide.ui.browser.OpenMozBrowserEditorAction.run(OpenMozBrowserEditorAction.java:57)\n        at org.eclipse.atf.mozilla.ide.ui.browser.OpenMozBrowserEditorAction.run(OpenMozBrowserEditorAction.java:85)\n        at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:254)\n\n\nEven though the other parts of ATF installed correctly.  When I looked into why I found somewhere that org.eclipse.atf.mozilla.swt.browser_1.0.1 would not activate.  So I looked through and found it to be the only component to hardwire  a specific version of a prerequisite.\n\nI didn\u0027t know that:\n\nFragment-Host: org.eclipse.swt;bundle-version\u003d\"3.1.0\"\n\nreally means Greater-than-or-equal.  I also tryed a number of other things to get rid of the NoClassDefFoundError so maybe one of those things fixed it.  I did not reinstall anything in the process of trying to get rid of the Error/Exception and am still using the edited MANIFEST.MF right now.\n\n\nSo maybe you are correct and I fixed my error some other way but thought that change of MANIFEST fixed the problem (maybe I shall try to reverse the MANIFEST change and restart -clean and see if ATF generates that error again).\n",
    "Which build and what version of Java (1.4 or 1.5) are you using? Could you have changed the version of Java from 1.4 to 1.5.\n\n\n\n",
    "eclipse.buildId\u003dM20060830-0800\njava.version\u003d1.5.0_08\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86_64, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86_64 -clean\n\nI\u0027ve been using Sun JDK5 for the past 20+ months.  I\u0027ve removed my MANIFEST edits and restarted with -clean and get the same error.\n\nOkay I am less concinced this made any real difference the plugin doesn\u0027t show up at all and there is no plugin.xml in org.eclipse.atf.mozilla.swt.browser_1.0.1.jar, so I really don\u0027t know how that might get picked up anyway.\n\n[dlm@tyr] jar -tvf atf-linux-sdk-0.1-20060830-1000/plugins/org.eclipse.atf.mozilla.swt.browser_1.0.1.jar\n     0 Wed Aug 30 10:17:04 BST 2006 META-INF/\n   409 Wed Aug 30 10:17:04 BST 2006 META-INF/MANIFEST.MF\n 39419 Wed Aug 30 10:17:04 BST 2006 mozilla_swt.jar\n 28423 Wed Aug 30 10:17:04 BST 2006 mozilla_swtsrc.zip\n[dlm@tyr$ jar -tvf atf-linux-sdk-0.1-20060713-1700/plugins/org.eclipse.atf.mozilla.swt.browser_1.0.1.jar\n     0 Thu Jul 13 00:53:12 BST 2006 META-INF/\n   409 Thu Jul 13 00:53:12 BST 2006 META-INF/MANIFEST.MF\n 39803 Thu Jul 13 00:53:12 BST 2006 mozilla_swt.jar\n 28423 Thu Jul 13 00:53:12 BST 2006 mozilla_swtsrc.zip\n",
    "When eclipse moved to using OSGI in the plugin mechanism, part of the plugin.xml information was moved into the MANIFEST.MF file. A plugin.xml file is only required for certain options. \n\nThe reason I asked about the version of Java you were using is that we have seen a problem with running on Java 1.4. We were building with Java 1.5 setting the flags to be 1.4 compatible. For some reason this it doesn\u0027t work and the failure is similar to the problem you are getting. We now build with Java 1.4. \n\nI would just make the change you request, but since I don\u0027t understand why it is failing I worry that the change will just cause a different problem. I will try to reproduce the problem.\n",
    "Do you have Eclipse Visual Editor project installed? I have been able to duplicate the problem. It seems to be a bug with Eclipse Visual Editor project. I dropped your proposed change since it seems to work around the problem. I will need to get a hold of the Eclipse Visual Editor team to find out what is going on. ",
    "Yes I do, I have most (maybe all) of Castillo.\n\nI have just lodged a new bug:\n\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d157852\n\n\nThis change is a suggestion if you are correct that bundle-version\u003d\"3.1.0\" means greaterThanOrEqual than I am happy no changes are necessary.  It was one avenue of the cause for my java.lang.NoClassDefFoundError problem, but I have now found the real cause and loged a bug for that.\n\nFeel free to close this bug if you are happy no change is needed.  At least you have thought about it.",
    "I have backed out all my plugins so I am using the minimum set needed for ATF with a 32bit Sun JVM 1.4.2_12.  This is with org.eclipse.swt.gtk.linux.x86_3.2.0.v3232m using the release WTP 1.5.0 and its prerequisites.  I do not have VE, BIRT, CDT nor TPTP installed.\n\n\n!SESSION 2006-09-19 18:40:11.849 -----------------------------------------------\neclipse.buildId\u003dM20060912-1730\njava.version\u003d1.4.2_12\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dlinux, ARCH\u003dx86, WS\u003dgtk, NL\u003den_US\nCommand-line arguments:  -os linux -ws gtk -arch x86 -clean -debug /home/dlm/.options -clean\n\n\n!MESSAGE Bundle update@../../home/dlm/.eclipseextension/eclipse/plugins/org.eclipse.atf.mozilla.swt.browser_1.0.1/ [744] was not resolved.\n!SUBENTRY 2 org.eclipse.atf.mozilla.swt.browser 2 0 2006-09-19 18:40:19.382\n!MESSAGE Constraints from the fragment conflict with the host: Require-Bundle: org.mozilla.xpcom; bundle-version\u003d\"0.0.0\"\n!SUBENTRY 2 org.eclipse.atf.mozilla.swt.browser 2 0 2006-09-19 18:40:19.382\n!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.swt; bundle-version\u003d\"3.1.0\"\n\nIf my memory serves be correct this was the initial indication that there was a problem with the dependancy matching being too narrow.\n\n\nNo I am having most sucess by modifing the rg.eclipse.atf.mozilla.swt.browser_1.0.1/META-INF/MANIFEST.MF to read:\n\nManifest-Version: 1.0\nBundle-ManifestVersion: 2\nBundle-Name: Mozilla Browser Fragment\nBundle-SymbolicName: org.eclipse.atf.mozilla.swt.browser\nBundle-Version: 1.0.1\nBundle-Vendor: IBM\nFragment-Host: org.eclipse.swt; bundle-version\u003d\"3.1.0\"\nBundle-Localization: plugin\nExport-Package: org.eclipse.swt.browser\nBundle-ClassPath: mozilla_swt.jar\n\n\nNote the removal of the lines:\n\nRequire-Bundle: org.mozilla.xpcom,\n org.eclipse.atf.mozilla.ide.core\n\n\nAfter checking the fragment code (which is a single class eclipse_cvs/atf/components/plugins/org.eclipse.atf.mozilla.swt.browser/gtk_linux_src/org/eclipse/swt/browser/MozillaBrowser.java there isn\u0027t any dependancy on org.eclipse.atf.mozilla.ide.core anyway.\n\nI am trying to find the OSGi manifest specific for a fragment, but I can\u0027t find any documentation on that.  But there is the Wiki page http://wiki.eclipse.org/index.php/FAQ_What_is_a_plug-in_fragment%3F and other reference which say that a fragment is allow to add/inject new require dependancies for its own use.  These should be added to the Fragment-Host\u0027s (org.eclipse.swt) own dependancies.\n\nBut I am unable to find the correct specification to do this in the manifest, since Require-Bundle: always throws out the error and causes the.\n\nNote, I get past the problem of loading MozillaCloeOpenListener.class when I remove the Require-Bundle: line.  I now get an error CNFE for org/mozilla/xpcom/nsIWebProgressListener which is caused by the lack of the correct Require directive for a fragment.  Since the OSGi class loader does not add it to the class path.",
    "I\u0027m closing this bug as a duplicate of 157852, since I think it was really a problem with running on Linux 64 bit\n\n*** This bug has been marked as a duplicate of bug 157852 ***"
  ],
  "commentCreationDates": [
    "2006-09-07T16:01:30+02:00",
    "2006-09-11T17:21:55+02:00",
    "2006-09-11T19:41:46+02:00",
    "2006-09-11T20:31:59+02:00",
    "2006-09-13T12:37:26+02:00",
    "2006-09-14T04:58:08+02:00",
    "2006-09-19T17:58:23+02:00",
    "2006-09-19T18:15:34+02:00",
    "2006-09-19T22:26:21+02:00",
    "2007-02-28T22:54:29+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "org/eclipse/swt/browser/MozillaCloseWindowListener",
      "elements": [
        {
          "method": "java.lang.Class.getDeclaredConstructors0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.privateGetDeclaredConstructors",
          "source": "Class.java:2357"
        },
        {
          "method": "java.lang.Class.getConstructor0",
          "source": "Class.java:2671"
        },
        {
          "method": "java.lang.Class.newInstance0",
          "source": "Class.java:321"
        },
        {
          "method": "java.lang.Class.newInstance",
          "source": "Class.java:303"
        },
        {
          "method": "org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension",
          "source": "RegistryStrategyOSGI.java:157"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension",
          "source": "ExtensionRegistry.java:759"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:243"
        },
        {
          "method": "org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension",
          "source": "ConfigurationElementHandle.java:51"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPlugin.createExtension",
          "source": "WorkbenchPlugin.java:234"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "156517",
      "duplicateId": "157852",
      "date": "2006-09-11T19:41:46+02:00",
      "product": "ATF",
      "component": "core",
      "severity": "normal"
    }
  ],
  "groupId": "157852",
  "bugId": "156517",
  "duplicateId": "157852",
  "date": "2006-09-07T16:01:30+02:00",
  "product": "ATF",
  "component": "core",
  "severity": "normal"
}