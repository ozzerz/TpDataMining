{
  "comments": [
    "Took me a while to discover how to recreate this problem, but this class:\n\npublic class A {\n  public static void main(String []argv) {\n    byte[][] bytes \u003d new byte[][]{{0},{1}};\n  }\n}\n\ncauses this bytecode:\n\n0:   iconst_2\n1:   anewarray       #18; //class \"[B\"\n\nand this causes the newarray joinpoint code to go bang.\n(eg. before(): call(*[].new(..)) {})\n\njava.lang.NullPointerException\n        at org.aspectj.weaver.bcel.BcelWorld.fromBcel(BcelWorld.java:236)\n        at org.aspectj.weaver.bcel.BcelWorld.makeJoinPointSignatureForArrayConstruction(BcelWorld.java:483)\n        at org.aspectj.weaver.bcel.BcelShadow.makeArrayConstructorCall(BcelShadow.java:801)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match(BcelClassWeaver.java:2510)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.match(BcelClassWeaver.java:2325)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:490)\n        at org.aspectj.weaver.bcel.BcelClassWeaver.weave(BcelClassWeaver.java:115)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1574)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1525)\n        at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1305)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1127)",
    "tiny localized fix committed (only changes anything when -Xjoinpoints:arrayconstruction active)"
  ],
  "commentCreationDates": [
    "2006-06-27T11:42:49+02:00",
    "2006-06-27T13:31:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.fromBcel",
          "source": "BcelWorld.java:236"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWorld.makeJoinPointSignatureForArrayConstruction",
          "source": "BcelWorld.java:483"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelShadow.makeArrayConstructorCall",
          "source": "BcelShadow.java:801"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:2510"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.match",
          "source": "BcelClassWeaver.java:2325"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:490"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelClassWeaver.weave",
          "source": "BcelClassWeaver.java:115"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1574"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump",
          "source": "BcelWeaver.java:1525"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify",
          "source": "BcelWeaver.java:1305"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:1127"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "148786",
      "date": "2006-06-27T11:42:49+02:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "normal"
    }
  ],
  "groupId": "148786",
  "bugId": "148786",
  "date": "2006-06-27T11:42:49+02:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "normal"
}