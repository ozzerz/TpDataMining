{
  "comments": [
    "Applies to Tree widget with SWT.MULTI and SWT.VIRTUAL styles (other styles doesn\u0027t seem to make difference). When rows from different nodes are selected (sub-row from one node and either top-row or sub-row from another node, but doesn\u0027t occur when several only top-rows are selected), NPE is thrown. I was able to made a test case to demonstrate this. Using Sun SDK 1.5_05, and SWT/JFace libraries from 3.2M3, that is\norg.eclipse.core.runtime_3.1.0.v20051027.jar\norg.eclipse.jface_3.2.0.jar\norg.eclipse.swt_3.1.0.v3212c.jar\norg.eclipse.swt.win32.win32.x86_3.1.0.v3212.jar\n\n\n\nimport org.eclipse.jface.viewers.TreeViewer;\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.layout.FillLayout;\nimport org.eclipse.swt.widgets.Display;\nimport org.eclipse.swt.widgets.Shell;\n\npublic class Test\n{\n\tpublic static void main(String[] args)\n\t{\n\t\tDisplay display \u003d new Display();\n\t\tShell shell \u003d new Shell(display);\n\t\tshell.setLayout(new FillLayout());\n\t\tTreeViewer tv \u003d new TreeViewer(shell, SWT.BORDER | SWT.MULTI | SWT.FULL_SELECTION | SWT.VIRTUAL);\n\t\tTestTreeProvider ttp \u003d new TestTreeProvider();\n\t\ttv.setContentProvider(ttp);\n\t\ttv.setInput(\"\");\n\t\tshell.pack();\n\t\tshell.setSize(400, 300);\n\t\tshell.open();\n\t\twhile (!shell.isDisposed())\n\t\t{\n\t\t\tif (!display.readAndDispatch())\n\t\t\t\tdisplay.sleep();\n\t\t}\n\t\tdisplay.dispose();\n\t}\n}\n\n\n\nimport org.eclipse.jface.viewers.IStructuredContentProvider;\nimport org.eclipse.jface.viewers.ITreeContentProvider;\nimport org.eclipse.jface.viewers.Viewer;\n\npublic class TestTreeProvider implements ITreeContentProvider, IStructuredContentProvider\n{\n\tInteger[] level1 \u003d new Integer[] { 1, 2 };\n\tString[] level2 \u003d new String[] { \"a\", \"b\"};\n\t\n\tpublic Object[] getElements(Object inputElement)\n\t{\n\t\treturn level1;\n\t}\n\t\n    public Object[] getChildren(Object parentElement)\n    {\n    \tif (parentElement instanceof Integer)\n    \t{\n    \t\treturn level2;\n    \t}\n    \telse\n    \t\treturn null;\n    }\n\n    public Object getParent(Object element)\n    {\n    \treturn null;\n    }\n\n    public boolean hasChildren(Object element)\n    {\n    \treturn (element instanceof Integer);\n    }\n\n    public void dispose() {}\n    \n    public void inputChanged(Viewer v, Object a, Object b) {}\n}\n\n\nException in thread \"main\" java.lang.NullPointerException\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.getSelectionFromWidget(AbstractTreeViewer.java:922)\n\tat org.eclipse.jface.viewers.StructuredViewer.getSelection(StructuredViewer.java:883)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:1027)\n\tat org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:1053)\n\tat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:209)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:204)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:364)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:896)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3236)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2856)\n\tat lt.dpk.entity.swt.Test.main(Test.java:25)",
    "Further, I have tested it with jars from eclipse 3.2M5a\n\norg.eclipse.equinox.common_1.0.0.v20060215a.jar\norg.eclipse.jface_3.2.0I20060216-1600.jar\norg.eclipse.swt_3.2.0.v3224m.jar\norg.eclipse.swt.win32.win32.x86_3.2.0.v3224.jar\norg.eclipse.core.commands_3.2.0.v3224m.jar\n\nMultiple selections are working properly. Closing this for now."
  ],
  "commentCreationDates": [
    "2006-02-28T08:13:43+01:00",
    "2006-02-28T09:32:40+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.getSelectionFromWidget",
          "source": "AbstractTreeViewer.java:922"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getSelection",
          "source": "StructuredViewer.java:883"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:1027"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:1053"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:209"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:204"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:364"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:896"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3236"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2856"
        },
        {
          "method": "lt.dpk.entity.swt.Test.main",
          "source": "Test.java:25"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "129726",
      "date": "2006-02-28T08:13:43+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "129726",
  "bugId": "129726",
  "date": "2006-02-28T08:13:43+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}