{
  "comments": [
    "Pressing \"save\" on an XML Schema file (or in an XML document that references a\nSchema) hangs forever. CPU is not maxed, and memory use doesn\u0027t seem to be going\nup, but the save action never returns. File is stored on a local file system.\n\nThis means the Schema editor is unusable. I\u0027ve tried turning off auto save, auto\nbuild etc but this seems to have no affect.\n\nCheers,\n\n  Chris.",
    "My Eclipse seems to have become unusable now, as I\u0027m unable to close the the\nschema editor without Eclipse hanging forever.\n\nIf it helps, before I kill Eclipse I get the following in my log file\n(\"XMLSchema.dtd\" is not a filename used anywhere in my code or documents, BTW)\n\norg.xml.sax.SAXParseException: Relative URI \"XMLSchema.dtd\"; can not be resolved\nwithout a base URI.",
    "It it helps debug this ... in HEAD version, I\u0027m not seeing a \"hang forever\", \nbut a VERY long delay (where there\u0027s a messaging saying UI job is blocked by \nback ground job). It evetually goes away, and seems to save fine, but another\ntell-tale sign is a NPE in createMessageInfo(String, Object[])\nThe string (errorID) is null, but the message its tryinging to create is \nas follows:\n\n_message\u003d \"Referenced file contains errors\n(file:/D:/builds/WTP/Targets/RC2/eclipse/plugins/org.eclipse.xsd_2.1.0/cache/www.w3.org/2001/XMLSchema.xsd).\n For more information, right click on the message and select \"Show Details...\"\"\n\nHope this helps. \n\n",
    "Oh, and I meant to say I was tesitng with the catalogue example. \n\nXSDSchemalNodeAdapter.baseLocation\u003d/XMLExamples/PublicationCatalogue/Catalogue.xsd",
    "Changed Version field given new release numbering.\n",
    "Hi Chris,\n\nI cannot reproduce this problem.  Can you please attach the testcase?\n\nThanks.",
    "Created an attachment (id\u003d23433)\nDemo Schema that replicates the problem\n",
    "Keith,\n\n  There is nothing special to replicate this fault. Simply open any Schema\n(.xsd) file, edit it, and press \"save\".\n\n  Attached is the Schema I was trying to write using the editor, if it helps.\n\nChris.",
    "Also, once this bug has been triggered, if I choose to cancel the save, close\nthe editor (loosing any edits) then do any other action in eclipse (e.g. create\na directory, edit an XML file, or close eclipse) then it also hangs forever.\n\nIf there\u0027s any more information you need, please let me know. ",
    "In which Eclipse and WTP builds are you seeing this?",
    "I\u0027m using Eclipse 3.1 M6, with WTP M4 (i.e. the latest version of WTP), on a\nWindows 2000 SP1 machine with Sun JDK 1.4.2_05-b04",
    "FWIW, I could not reproduce on M4 or recent I-build. \n\nChris, there\u0027s a couple of things you can do to help us understand. \n\nDo you have any other plugins installed besides WTP?\n\nCan you check if you have all the right versions of prereqs installed\n(e.g. EMF?) as described on downloads page. \n\nAnything in the .log file? \n\nLastly, and hardest, if you can reproduce this easily, you might try getting\nsome \"thread dumps\" and attaching to this bug. Here\u0027s how:\n\nStart Eclipse with the -debug -consolelog options. \nThis will open a \"dos window\" along with Eclipse, where the .log messages are\nechoed. \nOnce you create the hang in Eclipse, go the the command (dos) window, and \npress cntl-break. \nThis will, after a few seconds produce a listing in the dos window you can\n\"select all\", paste to a text file, and attach to this bug. \nYou might take 3 of them, each a few seconds apart. \n\nThanks, \n\nAssigning to Keith so it has a clear owner for disposition. \n",
    "The only other plugin I\u0027m using, other that WTP, is a checkstyle plugin\n(http://eclipse-cs.sourceforge.net/). However, Checkstyle validation is turned\noff for the project that contains the XSD files, so this should have no affect.\n\nI\u0027m using all the pre-reqs from the WTP download page, i.e.\n\nGEF-SDK-3.1M6.zip\nJEM-SDK-I20050415.zip\nwtp-1.0M4.zip\nemf-sdo-xsd-SDK-I20050414117.zip\n\nI\u0027ve had trouble capturing a stack dump, as when I run up Eclipse with the\nconsole on, this bug goes away! However, once I run up eclipse normally (i.e.\n\"\\\\Pc55-abmuk\\c$\\eclipse\\eclipse.exe -vm C:\\j2sdk1.4.2_05\\jre\\bin\\javaw -vmargs\n-client -Xms128M -Xmx128M\") the fault comes back. I also get \"Tacit Migration\nOperation\" the first time Eclipse is subsequently run, which also hangs Eclipse\nforever. Is there a way of triggering a JVM Stack Dump on Windows without the\nconsole option, and if so where does the stack dump get written to? I\u0027m afraid I\nonly have experience of capturing stack dumps on Unix systems.\n\nHowever, the following stack trace is written to the workspace/.metadata/.log\neach time the XSD editor is opened:\n\n!ENTRY org.eclipse.xsd 2 0 2005-06-21 08:39:30.91\n!MESSAGE Relative URI \"XMLSchema.dtd\"; can not be resolved without a base URI.\n!STACK 0\norg.xml.sax.SAXParseException: Relative URI \"XMLSchema.dtd\"; can not be resolved\n without a base URI.\n        at org.apache.crimson.parser.Parser2.fatal(Parser2.java:3376)\n        at org.apache.crimson.parser.Parser2.fatal(Parser2.java:3370)\n        at org.apache.crimson.parser.Parser2.resolveURI(Parser2.java:2952)\n        at org.apache.crimson.parser.Parser2.maybeExternalID(Parser2.java:2924)\n        at org.apache.crimson.parser.Parser2.maybeDoctypeDecl(Parser2.java:1309)\n\n        at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:656)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:337)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:448)\n\n        at org.apache.crimson.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl\n.java:185)\n        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:76)\n        at org.eclipse.xsd.util.XSDResourceImpl.getDocument(XSDResourceImpl.java\n:238)\n        at org.eclipse.xsd.util.XSDResourceImpl.doLoad(XSDResourceImpl.java:394)\n\n        at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.ja\nva:977)\n        at org.eclipse.xsd.impl.XSDSchemaDirectiveImpl.resolve(XSDSchemaDirectiv\neImpl.java:398)\n        at org.eclipse.xsd.impl.XSDImportImpl.importSchema(XSDImportImpl.java:47\n6)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.resolveSchema(XSDSchemaImpl.java:2\n115)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.resolveNamedComponent(XSDSchemaImp\nl.java:2138)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.resolveAttributeDeclaration(XSDSch\nemaImpl.java:2163)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.resolveAttributeDeclara\ntion(XSDConcreteComponentImpl.java:2471)\n        at org.eclipse.xsd.impl.XSDAttributeDeclarationImpl.patch(XSDAttributeDe\nclarationImpl.java:203)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch(XSDConcreteCompon\nentImpl.java:526)\n        at org.eclipse.xsd.impl.XSDAttributeUseImpl.patch(XSDAttributeUseImpl.ja\nva:738)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch(XSDConcreteCompon\nentImpl.java:526)\n        at org.eclipse.xsd.impl.XSDNamedComponentImpl.patch(XSDNamedComponentImp\nl.java:727)\n        at org.eclipse.xsd.impl.XSDTypeDefinitionImpl.patch(XSDTypeDefinitionImp\nl.java:249)\n        at org.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.patch(XSDComplexTyp\neDefinitionImpl.java:994)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch(XSDConcreteCompon\nentImpl.java:526)\n        at org.eclipse.xsd.impl.XSDNamedComponentImpl.patch(XSDNamedComponentImp\nl.java:727)\n        at org.eclipse.xsd.impl.XSDElementDeclarationImpl.patch(XSDElementDeclar\nationImpl.java:546)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch(XSDConcreteCompon\nentImpl.java:526)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.patch(XSDSchemaImpl.java:1488)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.changeAttribute(XSDSchemaImpl.java\n:2309)\n        at org.eclipse.xsd.impl.XSDConcreteComponentImpl.eNotify(XSDConcreteComp\nonentImpl.java:1219)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.setSchemaLocation(XSDSchemaImpl.ja\nva:832)\n        at org.eclipse.xsd.util.XSDResourceImpl.doLoad(XSDResourceImpl.java:471)\n\n        at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.ja\nva:977)\n        at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.ja\nva:832)\n        at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad(Resour\nceSetImpl.java:249)\n        at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper(\nResourceSetImpl.java:264)\n        at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource(Resou\nrceSetImpl.java:349)\n        at org.eclipse.xsd.impl.XSDSchemaImpl.getSchemaForSchema(XSDSchemaImpl.j\nava:614)\n        at org.eclipse.wst.xsd.contentmodel.internal.XSDImpl.buildXSDModel(XSDIm\npl.java:198)\n        at org.eclipse.wst.xsd.contentmodel.internal.XSDImpl.buildCMDocument(XSD\nImpl.java:172)\n        at org.eclipse.wst.xsd.contentmodel.internal.CMDocumentFactoryXSD.create\nCMDocument(CMDocumentFactoryXSD.java:61)\n        at org.eclipse.wst.xml.core.internal.contentmodel.ContentModelManager.cr\neateCMDocument(ContentModelManager.java:56)\n        at org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.CMDocum\nentManagerImpl.buildCMDocument(CMDocumentManagerImpl.java:277)\n        at org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.CMDocum\nentManagerImpl$AsyncBuildOperation.run(CMDocumentManagerImpl.java:262)\n        at org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.CMDocum\nentManagerImpl$1.run(CMDocumentManagerImpl.java:228)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n",
    "Running eclipse -clean also resolves the problem, but the fault then comes back\nthe next time Eclipse is started without the \"-clean\" option.\n\nUpgrading to the latest 1.4.2 JDK (1.4.2_08) also fails to resolve this problem.",
    "The SAXParseException is a crimson problem.\n\nSee bug 100612.",
    "I also tried using the M4 build and started eclipse using the same\nstartup parameters that you\u0027ve used, and I can\u0027t reproduce the problem.\n\nChris, can you help us out by setting up a self host environment (ie. to debug \nthe workbench) and when it hangs, click the pause button so that you can see \nthe stack trace.",
    "Sorry, can you please explain what a \"self host environement\" is?\n\nA search of www.eclipse.org returned no helpful results.",
    "This tutorial partly describes self-hosting:\n\nhttp://www.eclipse.org/webtools/testtutorials/developingwtp/DevelopingWTP.html\n\nLook at the section Setting up the Target Platform\n\nOnce you set it up, you can start a debug session.  Look at the first three \nsteps in the section Running your Eclipse Application, but Debug, instead of \nRun.",
    "Hi Chris,\n\nAny luck?  I\u0027ll reduce the severity to normal.",
    "After a couple of hours of trying I couldn\u0027t get the self-hosting debug session\nworking, unfortunately the instructions don\u0027t include everything and I don\u0027t\nhave a large amount of time (at work) to dedicate to this.\n\nHowever I did upgrade to Eclipse 3.1 final version - this also had the same issue.\n\nLooking closer at my desktop PC, I also checked I had no classpath set. However\nI did have Oracle 10g App Server (not running - all services disabled), so I\nremoved it. This seems to have resolved the issue!\n\nI can only imagine that there\u0027s a registry setting that the Sun JDK uses\n(perhaps for XML, as Ora10gAS uses non-standard XML libraries) that I\u0027ve managed\nto remove.\n\nPlease close this bug.",
    "This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). \n\n",
    "Per comment #19 and confirmation from Chris (email), I am changing the state of this bug to verified.",
    "Close."
  ],
  "commentCreationDates": [
    "2005-06-14T17:06:30+02:00",
    "2005-06-14T18:54:43+02:00",
    "2005-06-14T20:37:42+02:00",
    "2005-06-14T20:40:01+02:00",
    "2005-06-15T07:23:27+02:00",
    "2005-06-17T15:12:09+02:00",
    "2005-06-17T15:19:02+02:00",
    "2005-06-17T15:20:59+02:00",
    "2005-06-17T16:22:22+02:00",
    "2005-06-17T20:00:18+02:00",
    "2005-06-18T09:28:16+02:00",
    "2005-06-21T04:56:40+02:00",
    "2005-06-22T10:21:44+02:00",
    "2005-06-22T10:43:07+02:00",
    "2005-06-22T16:42:59+02:00",
    "2005-06-22T17:08:28+02:00",
    "2005-06-22T17:12:35+02:00",
    "2005-06-22T17:28:14+02:00",
    "2005-06-23T20:48:01+02:00",
    "2005-07-06T10:24:27+02:00",
    "2006-03-04T06:04:38+01:00",
    "2006-06-26T17:05:37+02:00",
    "2006-06-26T17:05:45+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.xml.sax.SAXParseException",
      "message": "Relative URI \"XMLSchema.dtd\"; can not be resolved  without a base URI.",
      "elements": [
        {
          "method": "org.apache.crimson.parser.Parser2.fatal",
          "source": "Parser2.java:3376"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.fatal",
          "source": "Parser2.java:3370"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.resolveURI",
          "source": "Parser2.java:2952"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.maybeExternalID",
          "source": "Parser2.java:2924"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.maybeDoctypeDecl",
          "source": "Parser2.java:1309"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.parseInternal",
          "source": "Parser2.java:656"
        },
        {
          "method": "org.apache.crimson.parser.Parser2.parse",
          "source": "Parser2.java:337"
        },
        {
          "method": "org.apache.crimson.parser.XMLReaderImpl.parse",
          "source": "XMLReaderImpl.java:448"
        },
        {
          "method": "org.apache.crimson.jaxp.DocumentBuilderImpl.parse",
          "source": "DocumentBuilderImpl .java:185"
        },
        {
          "method": "javax.xml.parsers.DocumentBuilder.parse",
          "source": "DocumentBuilder.java:76"
        },
        {
          "method": "org.eclipse.xsd.util.XSDResourceImpl.getDocument",
          "source": "XSDResourceImpl.java :238"
        },
        {
          "method": "org.eclipse.xsd.util.XSDResourceImpl.doLoad",
          "source": "XSDResourceImpl.java:394"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.ja va:977"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaDirectiveImpl.resolve",
          "source": "XSDSchemaDirectiv eImpl.java:398"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDImportImpl.importSchema",
          "source": "XSDImportImpl.java:47 6"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.resolveSchema",
          "source": "XSDSchemaImpl.java:2 115"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.resolveNamedComponent",
          "source": "XSDSchemaImp l.java:2138"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.resolveAttributeDeclaration",
          "source": "XSDSch emaImpl.java:2163"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDConcreteComponentImpl.resolveAttributeDeclaration",
          "source": "XSDConcreteComponentImpl.java:2471"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDAttributeDeclarationImpl.patch",
          "source": "XSDAttributeDe clarationImpl.java:203"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch",
          "source": "XSDConcreteCompon entImpl.java:526"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDAttributeUseImpl.patch",
          "source": "XSDAttributeUseImpl.ja va:738"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch",
          "source": "XSDConcreteCompon entImpl.java:526"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDNamedComponentImpl.patch",
          "source": "XSDNamedComponentImp l.java:727"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDTypeDefinitionImpl.patch",
          "source": "XSDTypeDefinitionImp l.java:249"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDComplexTypeDefinitionImpl.patch",
          "source": "XSDComplexTyp eDefinitionImpl.java:994"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch",
          "source": "XSDConcreteCompon entImpl.java:526"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDNamedComponentImpl.patch",
          "source": "XSDNamedComponentImp l.java:727"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDElementDeclarationImpl.patch",
          "source": "XSDElementDeclar ationImpl.java:546"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDConcreteComponentImpl.patch",
          "source": "XSDConcreteCompon entImpl.java:526"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.patch",
          "source": "XSDSchemaImpl.java:1488"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.changeAttribute",
          "source": "XSDSchemaImpl.java :2309"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDConcreteComponentImpl.eNotify",
          "source": "XSDConcreteComp onentImpl.java:1219"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.setSchemaLocation",
          "source": "XSDSchemaImpl.ja va:832"
        },
        {
          "method": "org.eclipse.xsd.util.XSDResourceImpl.doLoad",
          "source": "XSDResourceImpl.java:471"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.ja va:977"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceImpl.load",
          "source": "ResourceImpl.ja va:832"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoad",
          "source": "Resour ceSetImpl.java:249"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandLoadHelper",
          "source": " ResourceSetImpl.java:264"
        },
        {
          "method": "org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.getResource",
          "source": "Resou rceSetImpl.java:349"
        },
        {
          "method": "org.eclipse.xsd.impl.XSDSchemaImpl.getSchemaForSchema",
          "source": "XSDSchemaImpl.j ava:614"
        },
        {
          "method": "org.eclipse.wst.xsd.contentmodel.internal.XSDImpl.buildXSDModel",
          "source": "XSDIm pl.java:198"
        },
        {
          "method": "org.eclipse.wst.xsd.contentmodel.internal.XSDImpl.buildCMDocument",
          "source": "XSD Impl.java:172"
        },
        {
          "method": "org.eclipse.wst.xsd.contentmodel.internal.CMDocumentFactoryXSD.createCMDocument",
          "source": "CMDocumentFactoryXSD.java:61"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.ContentModelManager.createCMDocument",
          "source": "ContentModelManager.java:56"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.CMDocumentManagerImpl.buildCMDocument",
          "source": "CMDocumentManagerImpl.java:277"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.CMDocumentManagerImpl$AsyncBuildOperation.run",
          "source": "CMDocumentManagerImpl.java:262"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.CMDocumentManagerImpl$1.run",
          "source": "CMDocumentManagerImpl.java:228"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 12,
      "bugId": "99976",
      "date": "2005-06-22T10:21:44+02:00",
      "product": "Web Tools",
      "component": "wst.xsd",
      "severity": "normal"
    }
  ],
  "groupId": "99976",
  "bugId": "99976",
  "date": "2005-06-14T17:06:30+02:00",
  "product": "Web Tools",
  "component": "wst.xsd",
  "severity": "normal"
}