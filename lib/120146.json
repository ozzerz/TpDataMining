{
  "comments": [
    "This problem description was split out of bug 119939\n\nUsing build 1.0RC2 (though problem has existed well before this build) on Windows XP\n\nAttempting to publish a dynamic web project resulted in the following message\nin the error log. The referenced file that could not be renamed\n(tmp38123.class) was present in the plugins metadata directory and could be\nmanually renamed.\n\nA nearly identical problem was reported in bug 116963 and resolved as\nunreproducible.\n\nSee also bug 119934 related to EAR publishing to WAS 6.\n\nAll publishing to Websphere is blocked. Our only work around is to export a war\nfile and manually install via WAS admin console.\n\nError 2005-12-08 10:22:44.338 Publish failed using Ant publisher\norg.eclipse.core.runtime.CoreException[0]: java.lang.Exception: Error renaming\nC:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.jst.server.core\\tmp38123.class\nto\nC:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.....server.wtpWeb\\org.eclipse.jst.server.websphere.core\\com.....server.wtpWeb\\WEB-INF\\classes\\com\\...\\...\\...\\server\\bean\\XXXXXX.class\n        at\norg.eclipse.jst.server.core.PublishUtil.copyFile(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.copyFile(PublishUtil.java:154)\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled\nCode))\n        at\norg.eclipse.jst.server.generic.core.internal.publishers.AbstractModuleAssembler.copyModule(AbstractModuleAssembler.java:126)\n        at\norg.eclipse.jst.server.generic.core.internal.publishers.WarModuleAssembler.assemble(WarModuleAssembler.java:28)\n        at\norg.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.assembleModule(AntPublisher.java:103)\n        at\norg.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.publish(AntPublisher.java:90)\n        at\norg.eclipse.jst.server.generic.core.internal.GenericServerBehaviour.publishModule(GenericServerBehaviour.java:90)\n        at\norg.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModule(ServerBehaviourDelegate.java:658)\n        at\norg.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules(ServerBehaviourDelegate.java:738)\n        at\norg.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:596)\n        at\norg.eclipse.wst.server.core.internal.Server.doPublish(Server.java:765)\n        at org.eclipse.wst.server.core.internal.Server.publish(Server.java:754)\n        at\norg.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:145)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\n\n------- Comment #1 From Jim DAnjou 2005-12-08 19:32 [reply] -------\n\nI ran WTP in debug mode. The statement throwing the exception is: \nclass: PulishUtil.copyFile(InputStream in, IPath to, long ts)\nstatement: if (!tempFile.renameTo(file))\n                throw new Exception(NLS.bind(Messages.errorRename,\ntempFile.toString(), file.toString()));\n\nThe problem seems to be that the target file path in variable file is 265\ncharacters which is \u003e 256. \n\nThe same project publish to Tomcat OK because the path for the same class file\nis 209 characters.\n\nPublishing to Websphere uses a longer path than publish to Tomcat.\n\nTomcat path uses path that looks something like this:\nC:\\eclipse\\workspaces\\workspace-wtp-eval5\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp4\\webapps....\n\nThe Websphere path is considerable longer and looks something like this:\nC:\\eclipse\\workspaces\\workspace-wtp-eval5\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.ibm.xxxx.xxxx.server.wtpWeb\\org.eclipse.jst.server.websphere.core\\\n\nWe can shorten workspace path name and maybe the project name to get under 256\nbut it would helpful trim path length contibuted by WTP. For example in the\noverall path the project name is included twice. \n\n\nI trimed my workspace path to get under the 256 character limit issue. The\npublishing succeeded. That is an acceptable workaround for 1.0 but needs to be fixed in 1.0.1, please. I am aware that that the path limit is a JRE issue and some 1.5 JRE\u0027s have fixed it. We need to use a 1.4 JRE",
    "Added to Hot List at the request of Jim and setting priority to P2 and target to 1.0.1 with his agreement.",
    "It seems a windows problem the path length can not be greater than 256.",
    "My understanding is that Windows/XP lifted this restriction but JRE\u0027s have not. I would like to encourage examination of the current path to see if it can be shorted to offer relief. We are have to use workspace path lengths of \u003c 5 characters.",
    "I can change the assembly area for ant publisher to server temp directory which is a shorter path then currently used project working dir.",
    "\n\n*** This bug has been marked as a duplicate of 119588 ***",
    "Closing old bugs."
  ],
  "commentCreationDates": [
    "2005-12-09T18:28:25+01:00",
    "2005-12-09T19:57:09+01:00",
    "2005-12-15T18:31:55+01:00",
    "2005-12-15T18:54:08+01:00",
    "2005-12-15T19:00:41+01:00",
    "2005-12-17T06:36:14+01:00",
    "2006-11-21T19:29:45+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Error renaming C:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.jst.server.core\\tmp38123.class to C:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.....server.wtpWeb\\org.eclipse.jst.server.websphere.core\\com.....server.wtpWeb\\WEB-INF\\classes\\com\\...\\...\\...\\server\\bean\\XXXXXX.class",
      "elements": [
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.copyFile",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.copyFile",
          "source": "PublishUtil.java:154"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AbstractModuleAssembler.copyModule",
          "source": "AbstractModuleAssembler.java:126"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.WarModuleAssembler.assemble",
          "source": "WarModuleAssembler.java:28"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.assembleModule",
          "source": "AntPublisher.java:103"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.publish",
          "source": "AntPublisher.java:90"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.GenericServerBehaviour.publishModule",
          "source": "GenericServerBehaviour.java:90"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModule",
          "source": "ServerBehaviourDelegate.java:658"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules",
          "source": "ServerBehaviourDelegate.java:738"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish",
          "source": "ServerBehaviourDelegate.java:596"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:765"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:754"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "120146",
      "duplicateId": "119588",
      "date": "2005-12-09T18:28:25+01:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "major"
    }
  ],
  "groupId": "119588",
  "bugId": "120146",
  "duplicateId": "119588",
  "date": "2005-12-09T18:28:25+01:00",
  "product": "Web Tools",
  "component": "jst.server",
  "severity": "major"
}