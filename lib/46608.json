{
  "comments": [
    "I20031111 + Introduce Factory patch\n\nTest Case\n\n/*\n * Created on Nov 10, 2003\n *\n * To change the template for this generated file go to\n * Window - Preferences - Java - Code Generation - Code and Comments\n */\npackage p2;\n\n/**\n * @author dbaeumer\n *\n * To change the template for this generated type comment go to\n * Window - Preferences - Java - Code Generation - Code and Comments\n */\npublic class TT {\n\tpublic void foo() {\n\t\tnew TT();\n\t}\n\tpublic void bar() {\n\t\tnew TT();\n\t}\n}\n\n\n- select TT in foo\n- introduce factory.\n\n!ENTRY org.eclipse.jdt.ui 4 10001 Nov 13, 2003 19:30:44.143\n!MESSAGE Internal Error\n!STACK 0\njava.lang.reflect.InvocationTargetException\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java:104)\n\tat java.lang.reflect.InvocationTargetException.\u003cinit\u003e\n(InvocationTargetException.java:66)\n\tat org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run\n(CreateChangeOperation.java:112)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)\nCaused by: Java Model Exception: Java Model Status [Unexpected AST node type \nfor constructor search hit: org.eclipse.jdt.core.dom.SimpleName(\u0027Sub\u0027)in \ncompilation unit TT.java]\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat java.lang.Throwable.\u003cinit\u003e(Throwable.java)\n\tat org.eclipse.core.runtime.CoreException.\u003cinit\u003e(CoreException.java:35)\n\tat org.eclipse.jdt.core.JavaModelException.\u003cinit\u003e\n(JavaModelException.java:67)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.IntroduceFactoryRefactoring.ge\ntCtorCallAt(IntroduceFactoryRefactoring.java:795)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.IntroduceFactoryRefactoring.re\nplaceConstructorCalls(IntroduceFactoryRefactoring.java:730)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.IntroduceFactoryRefactoring.ad\ndAllChangesFor(IntroduceFactoryRefactoring.java:691)\n\tat \norg.eclipse.jdt.internal.corext.refactoring.code.IntroduceFactoryRefactoring.cr\neateChange(IntroduceFactoryRefactoring.java:839)\n\tat org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run\n(CreateChangeOperation.java:104)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:101)",
    "Are you testing with the latest code supplied in the patch attached to the \nBugzilla feature request?\n\n  https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d23026\n\nI\u0027m unable to reproduce the problem.",
    "Yes. I released the code to head so that you can test it.",
    "I updated to I20031111 and synched up with HEAD for jdt.ui (so I\u0027m running with \nthe newly-released version of IntroduceFactory), and I\u0027m still not seeing this \nerror. I then updated my HEAD versions of core.filebuffers, ui.editors, \nui.workbench.texteditor, text, and jface.text (for which I previuosly needed \nHEAD to run jdt.ui HEAD), and still can\u0027t reproduce the problem.",
    "The problem is triggered by the fact that I have another CU TT in a different \npackage. In my setup there is a second class TT int package ct\n\n/*\n * Created on Nov 7, 2003\n *\n * To change the template for this generated file go to\n * Window - Preferences - Java - Code Generation - Code and Comments\n */\npackage ct;\n\n/**\n * @author dbaeumer\n *\n * To change the template for this generated type comment go to\n * Window - Preferences - Java - Code Generation - Code and Comments\n */\npublic class TT {\n\tString foo() {\n\t\treturn new String();\n\t}\n}\n\nclass Sub extends TT {\n\tString foo() {\n\t\treturn null;\n\t}\n}\n\nFor some reason your refactoring starts using this CU.\n",
    "Created an attachment (id\u003d6787)\nPatch to IntroduceFactoryRefactoring that fixes the bug\n",
    "The search engine call wasn\u0027t properly qualifying the method name when the \nconstructor is implicit (compiler-generated). In that case, Bindings.findMethod\n() returns a null IMethod, and a textual search pattern is used instead; hence \nthe necessity of explicitly qualifying the method. A patch with the fix is \nattached.",
    "Created an attachment (id\u003d6799)\nPatch to add JUnit regression tests for this bug\n",
    "Fix released to HEAD"
  ],
  "commentCreationDates": [
    "2003-11-13T18:41:47+01:00",
    "2003-11-13T20:27:47+01:00",
    "2003-11-13T20:59:48+01:00",
    "2003-11-13T23:40:14+01:00",
    "2003-11-14T09:54:00+01:00",
    "2003-11-14T19:10:13+01:00",
    "2003-11-14T19:10:32+01:00",
    "2003-11-14T22:16:25+01:00",
    "2003-11-17T11:12:31+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java"
        },
        {
          "method": "java.lang.Throwable.\u003cinit\u003e",
          "source": "Throwable.java:104"
        },
        {
          "method": "java.lang.reflect.InvocationTargetException.\u003cinit\u003e",
          "source": "InvocationTargetException.java:66"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.refactoring.CreateChangeOperation.run",
          "source": "CreateChangeOperation.java:112"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:101"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "46608",
      "date": "2003-11-13T18:41:47+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "46608",
  "bugId": "46608",
  "date": "2003-11-13T18:41:47+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}