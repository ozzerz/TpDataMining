{
  "comments": [
    "Build ID: M20070212-1330\n\nSteps To Reproduce:\n1. create a testDeployment.deploy deployment which contains no artifacts and artifacts/location pairs but does contain a single workspace location reference (the default location)\n\n2. run multiple JUnit Plug-In tests by executing an ant script target similar to this one:\n\u003ctarget name\u003d\"test.execution\"\u003e\n\t\u003ctptp:execution deployment\u003d\"testDeployment.deploy\" resultsrefid\u003d\"tptp.test.results\"\u003e\n\t\t\u003cfileset dir\u003d\"${project.dir}\"\u003e\n\t\t\t\u003cinclude name\u003d\"**/*.testsuite\"/\u003e\n\t\t\u003c/fileset\u003e\n\t\u003c/tptp:execution\u003e\n\u003c/target\u003e\n\n3. the first test should execute successfully but upon the execution of the second one you should get an exception similar to the following:\njava.lang.NullPointerException\nat org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getPropertyValue(WorkbenchLocationUtil.java:155)\nat org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getUseDefaultPlugins(WorkbenchLocationUtil.java:325)\nat org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getExternalPlugins(WorkbenchLocationUtil.java:313)\nat org.eclipse.hyades.test.tools.core.internal.plugin.harness.WorkbenchExecutionDeploymentAdapter.collectTestSuiteFiles(WorkbenchExecutionDeploymentAdapter.java:169)\nat org.eclipse.hyades.execution.harness.JavaExecutionDeploymentAdapter.collectDeployableArtifacts(JavaExecutionDeploymentAdapter.java:325)\nat org.eclipse.hyades.execution.harness.JavaExecutionDeploymentAdapter.collectDeployableFiles(JavaExecutionDeploymentAdapter.java:241)\nat org.eclipse.hyades.test.tools.core.internal.plugin.harness.WorkbenchExecutionDeploymentAdapter.collectDeployableFiles(WorkbenchExecutionDeploymentAdapter.java:106)\nat org.eclipse.hyades.execution.harness.JavaExecutionDeploymentAdapter.deployTestAssets(JavaExecutionDeploymentAdapter.java:469)\nat org.eclipse.hyades.test.tools.core.internal.plugin.harness.WorkbenchExecutionDeploymentAdapter.deployTestAssets(WorkbenchExecutionDeploymentAdapter.java:102)\nat org.eclipse.hyades.execution.harness.util.ExecutionAdapterUtilities.adaptExecutionDeployment(ExecutionAdapterUtilities.java:159)\nat org.eclipse.hyades.execution.harness.TestExecutionHarness.launchTestExecution(TestExecutionHarness.java:1973)\nat org.eclipse.hyades.execution.harness.TestExecutionHarness.access$3(TestExecutionHarness.java:1817)\nat org.eclipse.hyades.execution.harness.TestExecutionHarness$2.run(TestExecutionHarness.java:741)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\norg.eclipse.core.runtime.CoreException: IWAT4039E The Test Execution Harness reported the following problems:java.lang.NullPointerException\nat org.eclipse.hyades.test.core.launch.delegates.AbstractLaunchConfigurationDelegate2.launch(AbstractLaunchConfigurationDelegate2.java:196)\nat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:639)\nat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:565)\nat org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:558)\nat org.eclipse.hyades.test.core.services.AbstractTestExecutionService.launch(AbstractTestExecutionService.java:633)\nat org.eclipse.hyades.test.core.services.AbstractTestExecutionService.execute(AbstractTestExecutionService.java:443)\nat org.eclipse.hyades.automation.server.AbstractService.execute(AbstractService.java:43)\nat org.eclipse.hyades.automation.server.ServiceProxy$1.run(ServiceProxy.java:140)\nat org.eclipse.hyades.automation.core.utils.ReusableThread.run(ReusableThread.java:131)\nat java.lang.Thread.run(Thread.java:595)\n\n\nMore information:\nTh sequence of things leading to the exception is as follows:\n1. There are no Artifact/Location pairs present in the deployment (the in-memory representation of the *.deploy file) before the test execution begins.\n\n2. Before the first testsuite is executed an \"artificial\" pair is added into the artifact/location pair list in the deployment containing a dummy artifact and the default location as returned by the\nCFGLocation org.eclipse.hyades.models.common.configuration.util.ConfigurationUtil.getDefaultLocation(TPFDeployment deployment)\nmethod.\nThis method returns the default location (the single location present in the deployment) only when there are no artifact/location pairs present in the deployment.\n\n3. Before the execution of the second test the above mentioned method returns null (and not the default location) - because the of the \"artificial\" pair added to the artifact/location pair list before the first test was executed. (This \"artificial\" pair doesn\u0027t seem to be ever removed.)\n\n4. The consequence is that a dummy location created in\nCFGArtifactLocationPair org.eclipse.hyades.test.core.util.DeploymentUtil.associateTestAsset(CFGClass testAsset, TPFDeployment deployment)\nand this location is used instead of the default location from the deployment.\nThe dummy location (in contrast to the default location) does not contain the `org.eclipse.hyades.test.tools.plugin\u0027 property group as returned by the\nCFGPropertyGroup org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getWorbenchPropertyGroup(CFGLocation location)\nmethod which is the cause of the above mentioned exception.\n\nAdditional  notes:\nIt seems that the logic in\nCFGLocation org.eclipse.hyades.models.common.configuration.util.ConfigurationUtil.getDefaultLocation(TPFDeployment deployment)\nneeds to be revised to handle this case properly.\nAccording to a comment in the implementation of this method this kind of a use case have been intended as per bugzilla bug 62096.",
    "*** Bug 182375 has been marked as a duplicate of this bug. ***",
    "*** Bug 182378 has been marked as a duplicate of this bug. ***",
    "Sorry for the duplicate submissions, they were not intentional. It must have been that I left the submission page open in a tab of my FireFox browser which is configured to reload the tabs on startup.",
    "Please provide a sizing.",
    "All P1s must be addressed in 4.5.",
    "Please provide a sizing for this defect before Monday, November 12, 2007.",
    "Correcting component.",
    "adding estimate and target iteration."
  ],
  "commentCreationDates": [
    "2007-04-13T20:42:10+02:00",
    "2007-04-16T14:36:16+02:00",
    "2007-04-16T14:36:34+02:00",
    "2007-04-16T19:46:18+02:00",
    "2007-04-23T15:39:08+02:00",
    "2007-08-23T12:56:22+02:00",
    "2007-11-05T19:44:21+01:00",
    "2007-11-26T13:41:35+01:00",
    "2007-11-28T14:21:19+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getPropertyValue",
          "source": "WorkbenchLocationUtil.java:155"
        },
        {
          "method": "org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getUseDefaultPlugins",
          "source": "WorkbenchLocationUtil.java:325"
        },
        {
          "method": "org.eclipse.hyades.test.tools.core.internal.plugin.util.WorkbenchLocationUtil.getExternalPlugins",
          "source": "WorkbenchLocationUtil.java:313"
        },
        {
          "method": "org.eclipse.hyades.test.tools.core.internal.plugin.harness.WorkbenchExecutionDeploymentAdapter.collectTestSuiteFiles",
          "source": "WorkbenchExecutionDeploymentAdapter.java:169"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.JavaExecutionDeploymentAdapter.collectDeployableArtifacts",
          "source": "JavaExecutionDeploymentAdapter.java:325"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.JavaExecutionDeploymentAdapter.collectDeployableFiles",
          "source": "JavaExecutionDeploymentAdapter.java:241"
        },
        {
          "method": "org.eclipse.hyades.test.tools.core.internal.plugin.harness.WorkbenchExecutionDeploymentAdapter.collectDeployableFiles",
          "source": "WorkbenchExecutionDeploymentAdapter.java:106"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.JavaExecutionDeploymentAdapter.deployTestAssets",
          "source": "JavaExecutionDeploymentAdapter.java:469"
        },
        {
          "method": "org.eclipse.hyades.test.tools.core.internal.plugin.harness.WorkbenchExecutionDeploymentAdapter.deployTestAssets",
          "source": "WorkbenchExecutionDeploymentAdapter.java:102"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.util.ExecutionAdapterUtilities.adaptExecutionDeployment",
          "source": "ExecutionAdapterUtilities.java:159"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.TestExecutionHarness.launchTestExecution",
          "source": "TestExecutionHarness.java:1973"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.TestExecutionHarness.access$3",
          "source": "TestExecutionHarness.java:1817"
        },
        {
          "method": "org.eclipse.hyades.execution.harness.TestExecutionHarness$2.run",
          "source": "TestExecutionHarness.java:741"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "182374",
      "date": "2007-04-13T20:42:10+02:00",
      "product": "TPTP ASF",
      "component": "ASF.Runtime",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.test.core.launch.delegates.AbstractLaunchConfigurationDelegate2.launch",
          "source": "AbstractLaunchConfigurationDelegate2.java:196"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:639"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:565"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:558"
        },
        {
          "method": "org.eclipse.hyades.test.core.services.AbstractTestExecutionService.launch",
          "source": "AbstractTestExecutionService.java:633"
        },
        {
          "method": "org.eclipse.hyades.test.core.services.AbstractTestExecutionService.execute",
          "source": "AbstractTestExecutionService.java:443"
        },
        {
          "method": "org.eclipse.hyades.automation.server.AbstractService.execute",
          "source": "AbstractService.java:43"
        },
        {
          "method": "org.eclipse.hyades.automation.server.ServiceProxy$1.run",
          "source": "ServiceProxy.java:140"
        },
        {
          "method": "org.eclipse.hyades.automation.core.utils.ReusableThread.run",
          "source": "ReusableThread.java:131"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "182374",
      "date": "2007-04-13T20:42:10+02:00",
      "product": "TPTP ASF",
      "component": "ASF.Runtime",
      "severity": "major"
    }
  ],
  "groupId": "182374",
  "bugId": "182374",
  "date": "2007-04-13T20:42:10+02:00",
  "product": "TPTP ASF",
  "component": "ASF.Runtime",
  "severity": "major"
}