{
  "comments": [
    "build I20050413 + latest UI from head\n\n- run with -pluginCustomization d:\\custom.ini\nwhere custom.ini has:\norg.eclipse.ui/CLOSE_EDITORS_ON_EXIT\u003dtrue\n- open some editors\n- File \u003e Exit\n\nGet the following in the log.\nNot sure if the \"leaked a refcount\" messages are related.\n\n!ENTRY org.eclipse.ui.workbench 4 2 2005-04-19 17:10:48.820\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.ui.workbench\".\n!STACK 0\norg.eclipse.jface.util.Assert$AssertionFailedException: Assertion failed: \n\tat org.eclipse.jface.util.Assert.isTrue(Assert.java:180)\n\tat org.eclipse.jface.util.Assert.isTrue(Assert.java:165)\n\tat org.eclipse.ui.internal.PartList.removePart(PartList.java:141)\n\tat org.eclipse.ui.internal.WorkbenchPage.partRemoved(WorkbenchPage.java:1316)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1143)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeAllEditors(WorkbenchPage.java:994)\n\tat org.eclipse.ui.internal.Workbench$8.run(Workbench.java:485)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1026)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:478)\n\tat org.eclipse.ui.internal.Workbench.access$6(Workbench.java:461)\n\tat org.eclipse.ui.internal.Workbench$12.run(Workbench.java:644)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:642)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:617)\n\tat org.eclipse.ui.internal.QuitAction.run(QuitAction.java:57)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:996)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)\n\tat\norg.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2895)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2528)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1569)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1533)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:319)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:272)\n\tat org.eclipse.core.launcher.Main.run(Main.java:951)\n\tat org.eclipse.core.launcher.Main.main(Main.java:935)\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.626\n!MESSAGE WorkbenchPage leaked a refcount for view org.eclipse.pde.ui.PluginsView\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.636\n!MESSAGE WorkbenchPage leaked a refcount for view org.eclipse.ui.views.TaskList\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.646\n!MESSAGE WorkbenchPage leaked a refcount for view org.eclipse.ui.views.PropertySheet\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.646\n!MESSAGE WorkbenchPage leaked a refcount for view\norg.eclipse.team.ccvs.ui.AnnotateView\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.646\n!MESSAGE WorkbenchPage leaked a refcount for view org.eclipse.pde.runtime.LogView\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.646\n!MESSAGE WorkbenchPage leaked a refcount for view\norg.eclipse.ui.views.ContentOutline\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.646\n!MESSAGE WorkbenchPage leaked a refcount for view\norg.eclipse.team.ccvs.ui.HistoryView\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.676\n!MESSAGE WorkbenchPage leaked a refcount for view org.eclipse.jdt.ui.PackageExplorer\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.676\n!MESSAGE WorkbenchPage leaked a refcount for view org.eclipse.ui.views.ProblemView\n\n!ENTRY org.eclipse.ui 2 0 2005-04-19 17:10:52.686\n!MESSAGE WorkbenchPage leaked a refcount for view\norg.eclipse.team.ccvs.ui.RepositoriesView",
    "Please investigate this regression for M7.\n",
    "Easly reproduced.\n\nThe assertation failure indicates that the workbench page tried to fire a\npartClosed event before the partDeactivated event.\n\nInvestigating further.",
    "The \"leaked refcount\" warnings are a dupe of bug 91956.",
    "This also appears in the console log of the I-build:\n\n     [java] !ENTRY org.eclipse.ui.workbench 4 0 2005-04-19 14:28:40.08\n     [java] !MESSAGE null argument;\n     [java] !STACK 0\n     [java] org.eclipse.jface.util.Assert$AssertionFailedException: null argument;\n     [java] \tat org.eclipse.jface.util.Assert.isNotNull(Assert.java:149)\n     [java] \tat org.eclipse.jface.util.Assert.isNotNull(Assert.java:125)\n     [java] \tat org.eclipse.jface.util.ListenerList.remove(ListenerList.java:155)\n     [java] \tat\norg.eclipse.ui.internal.PartListenerList.removePartListener(PartListenerList.java:142)\n     [java] \tat\norg.eclipse.ui.internal.PartService.removePartListener(PartService.java:55)\n     [java] \tat\norg.eclipse.ui.internal.WWinPartService.removePartListener(WWinPartService.java:97)\n     [java] \tat\norg.eclipse.ui.intro.config.CustomizableIntroPart.dispose(CustomizableIntroPart.java:369)\n     [java] \tat\norg.eclipse.ui.internal.ViewIntroAdapterPart.dispose(ViewIntroAdapterPart.java:109)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchPartReference.dispose(WorkbenchPartReference.java:527)\n     [java] \tat org.eclipse.ui.internal.ViewReference.dispose(ViewReference.java:95)\n     [java] \tat\norg.eclipse.ui.internal.ViewFactory.releaseView(ViewFactory.java:259)\n     [java] \tat org.eclipse.ui.internal.Perspective.dispose(Perspective.java:252)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchPage.dispose(WorkbenchPage.java:1369)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow.closeAllPages(WorkbenchWindow.java:778)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow.hardClose(WorkbenchWindow.java:1403)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:661)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow.access$0(WorkbenchWindow.java:642)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow$2.run(WorkbenchWindow.java:743)\n     [java] \tat\norg.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n     [java] \tat\norg.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:741)\n     [java] \tat org.eclipse.jface.window.WindowManager.close(WindowManager.java:108)\n     [java] \tat org.eclipse.ui.internal.Workbench$10.run(Workbench.java:528)\n     [java] \tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1026)\n     [java] \tat org.eclipse.core.runtime.Platform.run(Platform.java:757)\n     [java] \tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:525)\n     [java] \tat org.eclipse.ui.internal.Workbench.access$6(Workbench.java:461)\n     [java] \tat org.eclipse.ui.internal.Workbench$12.run(Workbench.java:645)\n     [java] \tat\norg.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n     [java] \tat org.eclipse.ui.internal.Workbench.close(Workbench.java:643)\n     [java] \tat org.eclipse.ui.internal.Workbench.close(Workbench.java:618)\n     [java] \tat\norg.eclipse.ui.internal.testing.WorkbenchTestable$2.run(WorkbenchTestable.java:97)\n     [java] \tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n     [java] \tat\norg.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:118)\n     [java] \tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2755)\n     [java] \tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2475)\n     [java] \tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)\n     [java] \tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)\n     [java] \tat\norg.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)\n     [java] \tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n     [java] \tat\norg.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n     [java] \tat\norg.eclipse.test.UITestApplication.runApplication(UITestApplication.java:131)\n     [java] \tat org.eclipse.test.UITestApplication.run(UITestApplication.java:58)\n     [java] \tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)\n     [java] \tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)\n     [java] \tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat java.lang.reflect.Method.invoke(Method.java:324)\n     [java] \tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:319)\n     [java] \tat org.eclipse.core.launcher.Main.basicRun(Main.java:272)\n     [java] \tat org.eclipse.core.launcher.Main.run(Main.java:951)\n     [java] \tat org.eclipse.core.launcher.Main.main(Main.java:935)\n",
    "Here\u0027s what\u0027s happening.\n\nWhen the CLOSE_EDITORS_ON_EXIT flag is enabled, the workbench calls\ncloseAllEditors on the workbench page at the start of shutdown.\n\nThe workbench page correctly determines that there are no more valid editors and\nattempts to activate a view. However, WorkbenchPage.activate contains a\nheuristic turning it into a NOP during shutdown, leaving a stale pointer to the\n(now closed) active editor.\n\nI\u0027ve recently added some sanity checking to ensure that we really are following\nour stated contracts about event ordering. It picks up the fact that the editor\nwas never deactivated and throws the assert.\n\nI\u0027ve fixed this by ensuring that WorkbenchPage always activates the null part\nduring shutdown. An alternative (probably safer but less efficient) approach\nwould be to only enable the isClosing flag after the call to\nIWorkbenchPage.closeAllEditors(). (The isClosing flag stops clients from calling\nmethods that create things inside the page and window, but we shouldn\u0027t set the\nflag until we\u0027re done using those same methods ourselves.) If my heuristic ends\nup causing unforseen problems, we can still fall back to the latter approach.\n\nFixed in HEAD.",
    "Comment 4 seems to be a different bug. I\u0027ve moved it to bug 92024.",
    "*** Bug 92024 has been marked as a duplicate of this bug. ***",
    "Verified in I20050510-0010\n"
  ],
  "commentCreationDates": [
    "2005-04-19T23:18:04+02:00",
    "2005-04-19T23:18:28+02:00",
    "2005-04-20T04:11:42+02:00",
    "2005-04-20T04:14:44+02:00",
    "2005-04-20T04:23:13+02:00",
    "2005-04-20T05:07:07+02:00",
    "2005-04-20T05:11:32+02:00",
    "2005-04-20T12:19:02+02:00",
    "2005-05-12T18:57:08+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jface.util.Assert$AssertionFailedException",
      "message": "Assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.jface.util.Assert.isTrue",
          "source": "Assert.java:180"
        },
        {
          "method": "org.eclipse.jface.util.Assert.isTrue",
          "source": "Assert.java:165"
        },
        {
          "method": "org.eclipse.ui.internal.PartList.removePart",
          "source": "PartList.java:141"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.partRemoved",
          "source": "WorkbenchPage.java:1316"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditors",
          "source": "WorkbenchPage.java:1143"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeAllEditors",
          "source": "WorkbenchPage.java:994"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$8.run",
          "source": "Workbench.java:485"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1026"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:757"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.busyClose",
          "source": "Workbench.java:478"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$6",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$12.run",
          "source": "Workbench.java:644"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:642"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.close",
          "source": "Workbench.java:617"
        },
        {
          "method": "org.eclipse.ui.internal.QuitAction.run",
          "source": "QuitAction.java:57"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:996"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:538"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:488"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:400"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:842"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2895"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2528"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1569"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1533"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:306"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:228"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:344"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:156"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:319"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:272"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:951"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:935"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "92000",
      "date": "2005-04-19T23:18:04+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.jface.util.Assert$AssertionFailedException",
      "message": "null argument;      [java]",
      "elements": [
        {
          "method": "org.eclipse.jface.util.Assert.isNotNull",
          "source": "Assert.java:149"
        }
      ],
      "number": 1,
      "commentIndex": 4,
      "bugId": "92000",
      "date": "2005-04-20T04:23:13+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "92000",
  "bugId": "92000",
  "date": "2005-04-19T23:18:04+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}