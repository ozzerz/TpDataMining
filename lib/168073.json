{
  "comments": [
    "I\u0027m not quite sure whether this is a feature request or a bug report, but read yourself:\n\nI have installed eclipse and mylar with bugzilla connector on one hand and a bugzilla reporting system on the other.\n\nBugzilla is only available in the network with private certificates in that form:\nhttps://bugzilla-server/bugzilla\nThat means, only users with a valid certificate can access the server.\n\nI can install my certificate on a prominent place in a browser (usally called \"options - certificates\" or something like that) and can successfully access the bugzilla page via https.\n\nIs it possible to use mylar with the same and if so, where do I have to store my certificate?\n\nI already tried with the current plugin, but it doesn\u0027t work in the default configuration (yes, it can\u0027t, because it doesn\u0027t know anything about the certificate).",
    "Have you tried bullet 5 from http://wiki.eclipse.org/index.php/Mylar_FAQ#Authentication_Troubleshooting?",
    "Rob, I thought we are using trust manager that accepts everything?",
    "hmmmm yes... so could you post what errors you are receiving? ",
    " (In reply to comment #2)\n\u003e Rob, I thought we are using trust manager that accepts everything?\nbug#144256",
    "So, where that error could come from? Is it because certificate is used for the auth?",
    "To avoid misunderstanding, here some more explanations.\n\nI have two certificates which I need to import to my \"keystore\" used by mylar: a cert of my Company (Certification Authority) and one from me (signed by the CA).\n\nAs I guess from http://www.ahtik.com/blog/2006/05/11/fixing-eclipse-mylar-jira-integration/ (Link in the FAQ which you gave here), I need something like .eclipsekeystore in my home dir, do I?\n\nThen I have to import both certificates to the keystore? If so, how can I do that? And Where I have to place the keystore (homedir? how does eclipse now?)? Am I on the right way?\n\nOK, after all that questions here the messages I got:\n\nWhen I press \"Validate\":\n  Authentication credentials are valid.\n\nBut nothing happens when I press \"OK\" (The repository is shown, but the \"Task List\" is empty).\n\n------------------\n\nWhen I right click on the repository and choose \"Update Attributes\" I got (from ErrorLog):\n\nError updating attributes.Received fatal alert: handshake_failure\n\norg.eclipse.core.runtime.CoreException: Error updating attributes.\nReceived fatal alert: handshake_failure\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaCorePlugin.getRepositoryConfiguration(BugzillaCorePlugin.java:129)\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaRepositoryConnector.updateAttributes(BugzillaRepositoryConnector.java:293)\nat org.eclipse.mylar.internal.tasks.ui.views.ResetRepositoryConfigurationAction$1.run(ResetRepositoryConfigurationAction.java:65)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\norg.eclipse.core.runtime.CoreException[1]: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\nat com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:150)\nat com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:117)\nat com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1584)\nat com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:866)\nat com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1030)\nat com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:622)\nat com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)\nat java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\nat java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\nat org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:827)\nat org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.flushRequestOutputStream(MultiThreadedHttpConnectionManager.java:1525)\nat org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:1975)\nat org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:993)\nat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:397)\nat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:170)\nat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)\nat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaClient.connectInternal(BugzillaClient.java:261)\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaClient.getConnect(BugzillaClient.java:221)\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaClient.getRepositoryConfiguration(BugzillaClient.java:554)\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaCorePlugin.getRepositoryConfiguration(BugzillaCorePlugin.java:121)\nat org.eclipse.mylar.internal.bugzilla.core.BugzillaRepositoryConnector.updateAttributes(BugzillaRepositoryConnector.java:293)\nat org.eclipse.mylar.internal.tasks.ui.views.ResetRepositoryConfigurationAction$1.run(ResetRepositoryConfigurationAction.java:65)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n",
    "From the stack trace it seems like these certificates are used for auth purposes. So, the only work around I know, is to import these certificates into the default keystore in JVM you are using to run Eclipse. Location is at \u003cjvm home\u003e\\jre\\lib\\security\\cacerts (you should be able to see actual jre command in Help -\u003e About Eclipse SDK -\u003e Configuration Details).\n\nTo support it in Mylar, we\u0027ll have to provide some UI, backend and key and trust manager that would allow to deal with these certificates inside Eclipse. Something similar to Preferences -\u003e Team -\u003e CVS -\u003e SSH2 Connection Method; or repository settings in Subversive svn plugin.\n",
    "\u003e So, the only work around I know, is to import these\n\u003e certificates into the default keystore in JVM you\n\u003e are using to run Eclipse. Location is at\n\u003e \u003cjvm home\u003e\\jre\\lib\\security\\cacerts\n\nThank you for this information. So, I only need the information how to import (openssl created) ca cert to keystore \u0027cacerts\u0027.\n\nOK, this is not your responsibility, but maybe you know how to import? I mean,\n$ keytool -import -trustcacerts -file ca.crt -keystore cacerts\nrequires a password, but I don\u0027t have one (giving no one ends up in a NullPointException, trying one returns \"Wrong password\").\n\nAny idea how I can import the cert (or where I can read something about)?",
    " (In reply to comment #8)\n\u003e Thank you for this information. So, I only need the information how to import\n\u003e (openssl created) ca cert to keystore \u0027cacerts\u0027.\n\u003e OK, this is not your responsibility, but maybe you know how to import? I mean,\n\u003e $ keytool -import -trustcacerts -file ca.crt -keystore cacerts\n\u003e requires a password, but I don\u0027t have one (giving no one ends up in a\n\u003e NullPointException, trying one returns \"Wrong password\").\n\u003e Any idea how I can import the cert (or where I can read something about)?\n\nSure. You can find initial password of the \"cacerts\" keystore in keytool documentation. I.e. at http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/keytool.html\n\nOther then that, make sure that certificate file is either binary or includes BEGIN and END CERTIFICATE rows if it is base64 encoded.",
    "Vossi: assuming this works for you could you add setup instructions to: http://wiki.eclipse.org/index.php/Mylar_FAQ#Authentication_Troubleshooting ?",
    "@Eugene: Thanks for the hint! Stupid me, I already had the right document, but I didn\u0027t expect the password there...\n\nAfter some trials I finally managed the import:\n\n$\u003ekeytool -import -noprompt -alias bugzillarootca -keystore cacerts -storepass ******** -file ca.crt\nCertificate was added to your Keystore.\n\n$\u003ekeytool -import -noprompt -alias bugzillaclient -keystore cacerts -storepass ******** -file bugzilla.cer\nCertificate was added to your Keystore.\n\n$\u003ekeytool -list -keystore cacerts -storepass ********\nKeystore-Typ: jks\nKeystore-Provider: SUN\n\nYour Keystore contains ** entries.\n\nbugzillarootca, 19.12.2006, trustedCertEntry,\nCertificate fingerprint (MD5): **:**:**:**:**:**:**:**:**:**:**:**:**:**:**:**\nbugzillaclient, 19.12.2006, trustedCertEntry,\nCertificate fingerprint (MD5): **:**:**:**:**:**:**:**:**:**:**:**:**:**:**:**\n[...]\n\n--------------\n\nNotes:\n- Output was translated by me and may vary from original English text\n- Private information was replaced with \u0027*\u0027\n\n--------------\n\nBut, unfortunatly, it didn\u0027t solve the problem. I still have the message \"handshake_failure\" (see previous comments).\n\n--------------\n\n@Mik:\n\u003e [update setup instructions in FAQ]\n\nYes, sure, when I\u0027ve solved the problem, I\u0027ll update the text.",
    "It seems like we actually have to explicitly support secure CLIENT-CERT auth. Unless that is a not trusted certificate or it requires a restricted crypto an policy is not installed. That we can only tell from the debug trace, there was some system properties in JSSE to turn it on...\n\nBTW, here is some info how that can be done for Axis http://www.ivoa.net/internal/IVOA/IvoaGridAndWebServices/Java-security-howto.html#sec4.2",
    "Just tuning back in here... So from a quick read over it appears we need to add explicit support for this certificate hand shake at the client (httpclient) level Eugene?",
    "That was my theory. Though we\u0027ll need some test bugzilla instance with configured cert-based auth to confirm that.",
    "Hmm okay, if we don\u0027t have access to such a server I\u0027ll have to set up a test server for this purpose. My understanding is that we\u0027ll have to improve our SslProtocolSocketFactory to handle this form of handshake.",
    "If somebody has access to a server with this type configuration and is willing to take this on it would be great! Tentatively scheduling for 2.0. ",
    "Created an attachment (id\u003d58704)\nSelf-signed cert patch\n\nHere is a fix so that Bugzilla does not complain about self-signed certs.  This patch trusts all websites (as you were trying to before).  \n\nIt would be best if this was eventually changed to use jks files and a trust manager that verified these files so that client security could be maintained.\n\nHere is the location of the ssl guide for HTTPClient:\nhttp://jakarta.apache.org/commons/httpclient/sslguide.html",
    "Created an attachment (id\u003d58705)\nmylar/context/zip\n\ncontext for patch",
    "Excellent! Patch applied.",
    "I tested the applied patch and it works.",
    "That patch does not address certificate authentication. Please see bug 177886 for a fix."
  ],
  "commentCreationDates": [
    "2006-12-14T16:02:33+01:00",
    "2006-12-14T17:44:36+01:00",
    "2006-12-14T18:21:09+01:00",
    "2006-12-14T18:31:50+01:00",
    "2006-12-14T21:07:42+01:00",
    "2006-12-14T21:14:46+01:00",
    "2006-12-15T09:05:31+01:00",
    "2006-12-15T19:31:34+01:00",
    "2006-12-18T13:15:47+01:00",
    "2006-12-18T22:41:52+01:00",
    "2006-12-19T02:41:41+01:00",
    "2006-12-19T14:29:48+01:00",
    "2007-01-02T21:39:34+01:00",
    "2007-01-23T19:21:12+01:00",
    "2007-01-23T22:25:20+01:00",
    "2007-01-26T21:22:30+01:00",
    "2007-01-26T21:27:23+01:00",
    "2007-02-09T22:49:28+01:00",
    "2007-02-09T22:50:56+01:00",
    "2007-02-09T23:28:09+01:00",
    "2007-02-10T00:32:09+01:00",
    "2007-03-17T22:30:36+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Error updating attributes. Received fatal alert: handshake_failure",
      "elements": [
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaCorePlugin.getRepositoryConfiguration",
          "source": "BugzillaCorePlugin.java:129"
        },
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaRepositoryConnector.updateAttributes",
          "source": "BugzillaRepositoryConnector.java:293"
        },
        {
          "method": "org.eclipse.mylar.internal.tasks.ui.views.ResetRepositoryConfigurationAction$1.run",
          "source": "ResetRepositoryConfigurationAction.java:65"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 6,
      "bugId": "168073",
      "date": "2006-12-15T09:05:31+01:00",
      "product": "Mylyn",
      "component": "Bugzilla",
      "severity": "enhancement"
    },
    {
      "exceptionType": "javax.net.ssl.SSLHandshakeException",
      "message": "Received fatal alert: handshake_failure",
      "elements": [
        {
          "method": "com.sun.net.ssl.internal.ssl.Alerts.getSSLException",
          "source": "Alerts.java:150"
        },
        {
          "method": "com.sun.net.ssl.internal.ssl.Alerts.getSSLException",
          "source": "Alerts.java:117"
        },
        {
          "method": "com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert",
          "source": "SSLSocketImpl.java:1584"
        },
        {
          "method": "com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord",
          "source": "SSLSocketImpl.java:866"
        },
        {
          "method": "com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake",
          "source": "SSLSocketImpl.java:1030"
        },
        {
          "method": "com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord",
          "source": "SSLSocketImpl.java:622"
        },
        {
          "method": "com.sun.net.ssl.internal.ssl.AppOutputStream.write",
          "source": "AppOutputStream.java:59"
        },
        {
          "method": "java.io.BufferedOutputStream.flushBuffer",
          "source": "BufferedOutputStream.java:65"
        },
        {
          "method": "java.io.BufferedOutputStream.flush",
          "source": "BufferedOutputStream.java:123"
        },
        {
          "method": "org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream",
          "source": "HttpConnection.java:827"
        },
        {
          "method": "org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.flushRequestOutputStream",
          "source": "MultiThreadedHttpConnectionManager.java:1525"
        },
        {
          "method": "org.apache.commons.httpclient.HttpMethodBase.writeRequest",
          "source": "HttpMethodBase.java:1975"
        },
        {
          "method": "org.apache.commons.httpclient.HttpMethodBase.execute",
          "source": "HttpMethodBase.java:993"
        },
        {
          "method": "org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry",
          "source": "HttpMethodDirector.java:397"
        },
        {
          "method": "org.apache.commons.httpclient.HttpMethodDirector.executeMethod",
          "source": "HttpMethodDirector.java:170"
        },
        {
          "method": "org.apache.commons.httpclient.HttpClient.executeMethod",
          "source": "HttpClient.java:396"
        },
        {
          "method": "org.apache.commons.httpclient.HttpClient.executeMethod",
          "source": "HttpClient.java:324"
        },
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaClient.connectInternal",
          "source": "BugzillaClient.java:261"
        },
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaClient.getConnect",
          "source": "BugzillaClient.java:221"
        },
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaClient.getRepositoryConfiguration",
          "source": "BugzillaClient.java:554"
        },
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaCorePlugin.getRepositoryConfiguration",
          "source": "BugzillaCorePlugin.java:121"
        },
        {
          "method": "org.eclipse.mylar.internal.bugzilla.core.BugzillaRepositoryConnector.updateAttributes",
          "source": "BugzillaRepositoryConnector.java:293"
        },
        {
          "method": "org.eclipse.mylar.internal.tasks.ui.views.ResetRepositoryConfigurationAction$1.run",
          "source": "ResetRepositoryConfigurationAction.java:65"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 6,
      "bugId": "168073",
      "date": "2006-12-15T09:05:31+01:00",
      "product": "Mylyn",
      "component": "Bugzilla",
      "severity": "enhancement"
    }
  ],
  "groupId": "168073",
  "bugId": "168073",
  "date": "2006-12-14T16:02:33+01:00",
  "product": "Mylyn",
  "component": "Bugzilla",
  "severity": "enhancement"
}