{
  "comments": [
    "I get this error when upgrading to m5 and launching any ant target. If I \nchange the settings to not use a separate jre, then the launch starts but it \ncan\u0027t find a java compiler...no matter how I set my classpath. This basically \nrenders M5 unusable for me.\n\nHere\u0027s my log and I\u0027ll attach the launch file.\n\n\norg.eclipse.jdt.internal.core.Assert$AssertionFailedException: Assertion\nfailed; Path for IClasspathEntry must be absolute\n at org.eclipse.jdt.internal.core.Assert.isTrue(Assert.java:89)\n at org.eclipse.jdt.core.JavaCore.newLibraryEntry(JavaCore.java:2520)\n at org.eclipse.jdt.core.JavaCore.newLibraryEntry(JavaCore.java:2481)\n at\norg.eclipse.jdt.launching.JavaRuntime.newArchiveRuntimeClasspathEntry(JavaRu\nntime.java:500)\n at\norg.eclipse.ant.internal.ui.launchConfigurations.AntClasspathProvider.resolv\neClasspath(AntClasspathProvider.java:89)\n at\norg.eclipse.jdt.internal.launching.RuntimeClasspathProvider.resolveClasspath\n(RuntimeClasspathProvider.java:60)\n at\norg.eclipse.jdt.launching.JavaRuntime.resolveRuntimeClasspath(JavaRuntime.ja\nva:971)\n at\norg.eclipse.jdt.launching.AbstractJavaLaunchConfigurationDelegate.getClasspa\nth(AbstractJavaLaunchConfigurationDelegate.java:311)\n at\norg.eclipse.jdt.internal.launching.JavaLocalApplicationLaunchConfigurationDe\nlegate.launch(JavaLocalApplicationLaunchConfigurationDelegate.java:85)\n at\norg.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.runInSepa\nrateVM(AntLaunchDelegate.java:366)\n at\norg.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.launch(An\ntLaunchDelegate.java:190)\n at\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfigurati\non.java:156)\n at\norg.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.jav\na:739)\n at org.eclipse.debug.ui.DebugUITools.buildAndLaunch(DebugUITools.java:625)\n at org.eclipse.debug.ui.DebugUITools$3.run(DebugUITools.java:581)\n at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)\n!ENTRY org.eclipse.core.runtime 4 2 Nov 24, 2003 12:14:15.875\n!MESSAGE An internal error occurred during: \"Launch\".",
    "Created an attachment (id\u003d6945)\nlaunch file   \n",
    "I am having no luck reproducing this.\nBrian, are you able to provide me the exact details of your Ant runtime \nclasspath for when the build fails? Thanks.",
    "I have the same or very similar problem. Couple of additional observations. I\nget \"NoClassDefFoundError: org/apache/tools/ant/BuildException\" if I open ant\nlaunch configuration dialog window. This problem looks like workspace migration\nissue -- everything works just fine if I create new workspace and import\nexisting projects into it. Let me know if need additional information\n(igorf@ca.ibm.com).",
    "My classpath is as follows:\n\nD:/stc/j2sdk1.4.1_02/lib/tools.jar\nD:/stc/junit/junit3.8.1/src.jar\nD:/stc/junit/junit3.8.1/junit.jar\nD:/stc/eclipse/plugins/org.apacje.ant_1.5.4/lib/optional.jar\nD:/stc/eclipse/plugins/org.apache.ant_1.5.4/lib/ant.jar",
    "Igor or Brian, anything further to report here? I have yet experience Brian\u0027s \nproblem. \n\nIgor, did you ensure that your Ant runtime classpath was correct? Eclipse \nautomatically updates classpaths if you have not modified the classpath. Your \nerror typically indicates that your classpath is missing an ant.jar",
    "I stopped using M5 because I couldn\u0027t build anything so I don\u0027t have anything \nfurther to report. I can try some more tomorrow. Any suggestions on what might \nhelp you figure this out?",
    "Yes, I did, ant classpath settings were identical, well, they looked identical \nin the UI. I have not had any ant related problems with M5 since I\u0027ve recreated \nmy workspace.\n\nBrian, I wounder if you could create fresh workspace, import your project into \nit and see if ant works after that.",
    "I have steps to reproduce a workspace migration problem which looks very \nsimilar to Brian\u0027s problem.\n\n1. Using M4 start brand new workspace, \n2. Create new java project \"test\"\n3. Create trivial build.xml file\n   \u003cproject default\u003d\"test\"\u003e\n   \u003ctarget name\u003d\"test\"\u003e\u003cecho\u003esomething\u003c/echo\u003e\u003c/target\u003e\n   \u003c/project\u003e\n4. Add a jar file to ant runtime classpath\n5. Run ant for the build.xml file\n6. Shutdown M4 and start M5\nObserve\n- attempt to edit ant launch configuration results in NoClassDefFoundError\n- attempt to run the build.xml file results in NoClassDefFoundError\n\n7. Edit ant launch configuration to run in separate JRE \nObserve\n- attempt to run build.xml results in AssertionFailedException\n\nHope this helps.",
    "Thanks both of you for your patience and help on this.\nIgor, I will use your test case tommorrow to find (and hopefully fix) your \nproblem(s). Thanks!",
    "Unfortunately no luck.\nI still must be missing something...no problems using the defined test case.\nIgor can you attach the .launch file for the Ant build that is causing the \ntrouble? Can be found \nin ./pathToYourWorkspace/.metadata/.plugins/org.eclipse.debug.core/.launches",
    "I did not make myself clear -- in step 4 you need to change *global* ant\nclasspath, not classpath of a launch configuration. Anyways, I compared\n.metadata/.plugins/org.eclipse.ant.core/pref_store.ini of migrated and \"fresh\"\nworkspaces.\n\nFresh workspace has\nant_home_entries\u003dC\\:/Temp/eclipse.test/eclipse-M5/plugins/org.apache.ant_1.5.4/lib/ant.jar,C\\:/Temp/eclipse.test/eclipse-M5/plugins/org.apache.ant_1.5.4/lib/optional.jar,S\\:/eclipse.workspace/thirdparty/apache/commons-beanutils-1.1/lib/commons-beanutils.jar,\n\nMigrated workspace has\nant_home_entries\u003dfile\\:C\\:/Temp/eclipse.test/eclipse-M4/plugins/org.apache.ant_1.5.4/lib/ant.jar,file\\:C\\:/Temp/eclipse.test/eclipse-M4/plugins/org.apache.ant_1.5.4/lib/optional.jar,file\\:c\\:/j2sdk1.4.2_02/lib/tools.jar,file\\:S\\:/eclipse.workspace/thirdparty/apache/commons-beanutils-1.1/lib/commons-beanutils.jar,\n\nAs you can see, migrated workspace has \"file:\" protocol (I guess this is the\nreason of AssertionFailedException). Also, it still references old M4\ninstallation path, what does not look too good.\n",
    "I have reproduced some problems with our migration in the changes in the Ant \nruntime classpath.\n\nAs Igor noticed we are incorrectly migrating the Ant home entries.\nAs a workaround, remove the \"file\\:\" prefixes in the ant_home_entries entries \nor in the additional_entries listings.",
    "I am not sure I was clear...the changes need to be made in \nthe .metadata/.plugins/org.eclipse.ant.core/pref_store.ini file",
    "Removed blocker designation due to the workaround discussed in comment #12 and \ncomment #13.\nFixed in AntCorePreferences.",
    "Please verify Jared.",
    "I don\u0027t entirely follow this code.\n\nIt looks to me like it will cause the preferences to be reset to their defaults \neverytime they\u0027re changed. When the \"Ant home entries\" preference changes, we \ncall restoreAntHomeEntries(Preferences). But in that method if the current \npreferences are non-empty we call prefs.setToDefault(\"ant_urls\").\n\nAm I just misreading the code?",
    "The restore*(Preferences) methods resynchronizes the in memory cache stored in \nAntCorePreferences with the persistented state in the Preferences class for \nthe plugin.\n\nThe default state of the preferences is not persisted...it is recalculated on \neach synchronize (as the default may change). If the preferences are not in \nthere default state (not presisted as an empty string), the extract* methods \nare called.",
    "My read of the code still doesn\u0027t match your description, sorry. \nAntCorePreferences propertyChange(...) callback calls restoreAntHomeEntries(...) \n..) whenever Ant home is set. And restoreAntHomeEntries(...) always calls \nsetToDefault if the preference is not empty.",
    "I see now that the listener is temporary. :)  Verified."
  ],
  "commentCreationDates": [
    "2003-11-25T14:45:31+01:00",
    "2003-11-25T14:46:52+01:00",
    "2003-11-26T04:18:02+01:00",
    "2003-11-27T15:56:01+01:00",
    "2003-12-01T14:36:17+01:00",
    "2003-12-04T23:42:27+01:00",
    "2003-12-05T00:28:44+01:00",
    "2003-12-05T01:18:53+01:00",
    "2003-12-05T04:06:20+01:00",
    "2003-12-05T04:39:20+01:00",
    "2003-12-05T22:20:01+01:00",
    "2003-12-06T01:36:56+01:00",
    "2003-12-09T16:59:13+01:00",
    "2003-12-09T17:37:19+01:00",
    "2003-12-09T22:31:18+01:00",
    "2003-12-09T22:34:21+01:00",
    "2003-12-13T21:01:48+01:00",
    "2003-12-15T15:58:56+01:00",
    "2003-12-15T17:44:32+01:00",
    "2003-12-15T18:10:39+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jdt.internal.core.Assert$AssertionFailedException",
      "message": "Assertion failed; Path for IClasspathEntry must be absolute",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.Assert.isTrue",
          "source": "Assert.java:89"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.newLibraryEntry",
          "source": "JavaCore.java:2520"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.newLibraryEntry",
          "source": "JavaCore.java:2481"
        },
        {
          "method": "org.eclipse.jdt.launching.JavaRuntime.newArchiveRuntimeClasspathEntry",
          "source": "JavaRu ntime.java:500"
        },
        {
          "method": "org.eclipse.ant.internal.ui.launchConfigurations.AntClasspathProvider.resolveClasspath",
          "source": "AntClasspathProvider.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.launching.RuntimeClasspathProvider.resolveClasspath",
          "source": "RuntimeClasspathProvider.java:60"
        },
        {
          "method": "org.eclipse.jdt.launching.JavaRuntime.resolveRuntimeClasspath",
          "source": "JavaRuntime.ja va:971"
        },
        {
          "method": "org.eclipse.jdt.launching.AbstractJavaLaunchConfigurationDelegate.getClasspath",
          "source": "AbstractJavaLaunchConfigurationDelegate.java:311"
        },
        {
          "method": "org.eclipse.jdt.internal.launching.JavaLocalApplicationLaunchConfigurationDelegate.launch",
          "source": "JavaLocalApplicationLaunchConfigurationDelegate.java:85"
        },
        {
          "method": "org.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.runInSeparateVM",
          "source": "AntLaunchDelegate.java:366"
        },
        {
          "method": "org.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.launch",
          "source": "An tLaunchDelegate.java:190"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfigurati on.java:156"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.jav a:739"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools.buildAndLaunch",
          "source": "DebugUITools.java:625"
        },
        {
          "method": "org.eclipse.debug.ui.DebugUITools$3.run",
          "source": "DebugUITools.java:581"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:62"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "47422",
      "date": "2003-11-25T14:45:31+01:00",
      "product": "Platform",
      "component": "Ant",
      "severity": "major"
    }
  ],
  "groupId": "47422",
  "bugId": "47422",
  "date": "2003-11-25T14:45:31+01:00",
  "product": "Platform",
  "component": "Ant",
  "severity": "major"
}