{
  "comments": [
    "rc1, linux-motif\n\n- I checked out a bunch of projects from the technology and tools repositories\n- some builds failed because dependant projects didn\u0027t exist in my workspace\n(emf, etc)\n- I had the progress view open\n- I noticed that I had 2 \"Building Workspace\" job...one was sleeping and one was\nwaiting\n- I toggled Verbose mode and the sleeping one disappeared\n- I still have the \"Building Workspace (waiting)\" job in the list\n- it won\u0027t go away\n- I toggle Verbose mode and it won\u0027t go away\n- I cancel the job and it won\u0027t go away\n- I close the view and reopen it and it won\u0027t go away\n\nI have the Jobs examples installed and the dump of the Job Manager job list is: \n\n**** BEGIN DUMP JOB MANAGER INFORMATION ****\n**** END DUMP JOB MANAGER INFORMATION ****\n\nSo it looks like the view has a stale entry. But why won\u0027t it let me delete it?",
    "Created an attachment (id\u003d11413)\nscreen shot of progress view\n\nAfter checking out a couple more projects, I seemed to get a lot of duplicate\nentries in the Progress View. Here is a screen shot showing them.",
    "Some of the build failures (as mentioned above) looked like this:\n\norg.eclipse.core.runtime.CoreException: Variable references non-existent\nresource : ${workspace_loc:/omelet.examples/build.xml}\nat\norg.eclipse.debug.internal.ui.stringsubstitution.ResourceResolver.abort(ResourceResolver.java:104)\nat\norg.eclipse.debug.internal.ui.stringsubstitution.ResourceResolver.resolveValue(ResourceResolver.java:50)\nat\norg.eclipse.core.internal.variables.DynamicVariable.getValue(DynamicVariable.java:54)\nat\norg.eclipse.core.internal.variables.StringSubstitutionEngine.resolve(StringSubstitutionEngine.java:267)\nat\norg.eclipse.core.internal.variables.StringSubstitutionEngine.substitute(StringSubstitutionEngine.java:192)\nat\norg.eclipse.core.internal.variables.StringSubstitutionEngine.performStringSubstitution(StringSubstitutionEngine.java:86)\nat\norg.eclipse.core.internal.variables.StringVariableManager.performStringSubstitution(StringVariableManager.java:549)\nat\norg.eclipse.core.internal.variables.StringVariableManager.performStringSubstitution(StringVariableManager.java:341)\nat\norg.eclipse.ui.externaltools.internal.launchConfigurations.ExternalToolsUtil.getLocation(ExternalToolsUtil.java:72)\nat\norg.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.launch(AntLaunchDelegate.java:95)\nat\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:569)\nat\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:150)\nat\norg.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.launchBuild(ExternalToolBuilder.java:137)\nat\norg.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.build(ExternalToolBuilder.java:80)\nat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:558)\nat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:615)\nat org.eclipse.core.runtime.Platform.run(Platform.java:758)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:154)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:246)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)\nat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:226)\nat org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:615)\nat org.eclipse.core.runtime.Platform.run(Platform.java:758)\nat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:229)\nat\norg.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:265)\nat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:294)\nat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:153)\nat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:207)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n",
    "Andre handles the view but this might be a good case for the progress \nindicator not clearing either.",
    "Which projects did you check out? And when you say build failed do you \nmean \"had errors\" or something else?",
    "I checked out several projects from the tools and technology repositories.\nomelet*, koi, etc. There were 2 ant script build failures as well as some of the\nprojects didn\u0027t build because they required project which weren\u0027t in my\nworkspace or target platform. (emf, etc)",
    "Created an attachment (id\u003d11462)\nlog file\n\nHere is my full log file. It shows the build failures.",
    "I have a replicable case for these stale jobs\n\n1) Load whatever\n2) Select Show View-\u003ePDE-\u003ePlug-ins\n3) Select \"Add all to Java Search\"\n4) Build will finish and not remove itself from the view when it is done - it \nis acting as if it was set to stay in it.",
    "Cannot reproduce your steps.\nI don\u0027t even see any job while doing this.\n\nI started with a freshly installed Eclipse RC1, imported junit from a local repository and \nfollowed the steps from above. Is there anything else I\u0027ll have to do?",
    "Maybe it needs to have some more specific project.\n\nI went into home/technology at dev.eclipse.org and loaded all of the project \nunder org.eclipse.omelet\n\nYou will get a pile of Ant errors. I\u0027ll play around more from a fresh \nworkspace this afternoon.",
    "Also have the progress view in verbose mode.",
    "Do you have autobuild enabled?\n\nI tried the omelette but nothing would stick :-)",
    "Yes I did.",
    "I also found that if I cleaned the workspace and then close the External Plug-\nin libraries project I could generate the finished build job.\n\nI added a breakpoint and it appears that the kept jobs is holding onto the \nTaskInfo for the job but you are looking up on the JobInfo when I try and \nclear it. If you can find a case where a TaskInfo gets added to FinishedJobs \nyou will have nailed it. This may also be why it is hanging about.\n\nthis\u003d FinishedJobs  (id\u003d6375)\n\tfinishedTime\u003d HashMap  (id\u003d6376)\n\tkeptjobinfos\u003d HashSet  (id\u003d6377)\n\t\tmap\u003d HashMap  (id\u003d6380)\n\t\t\tentrySet\u003d null\n\t\t\tkeySet\u003d HashMap$KeySet  (id\u003d6381)\n\t\t\tloadFactor\u003d 0.75\n\t\t\tmodCount\u003d 3\n\t\t\tsize\u003d 1\n\t\t\ttable\u003d HashMap$Entry[16]  (id\u003d6382)\n\t\t\t\t[0]\u003d null\n\t\t\t\t[1]\u003d null\n\t\t\t\t[2]\u003d null\n\t\t\t\t[3]\u003d null\n\t\t\t\t[4]\u003d null\n\t\t\t\t[5]\u003d null\n\t\t\t\t[6]\u003d null\n\t\t\t\t[7]\u003d null\n\t\t\t\t[8]\u003d null\n\t\t\t\t[9]\u003d null\n\t\t\t\t[10]\u003d null\n\t\t\t\t[11]\u003d null\n\t\t\t\t[12]\u003d null\n\t\t\t\t[13]\u003d null\n\t\t\t\t[14]\u003d HashMap$Entry  (id\u003d6383)\n\t\t\t\t\thash\u003d -1118929202\n\t\t\t\t\tkey\u003d TaskInfo  (id\u003d6384)\n\t\t\t\t\t\tjobInfo\u003d JobInfo  (id\u003d6355)\n\t\t\t\t\t\tpreWork\u003d 99.0\n\t\t\t\t\t\ttaskName\u003d null\n\t\t\t\t\t\ttotalWork\u003d 99\n\t\t\t\t\tnext\u003d null\n\t\t\t\t\tvalue\u003d Object  (id\u003d6385)\n\t\t\t\t[15]\u003d null\n\t\t\tthreshold\u003d 12\n\t\t\tvalues\u003d null\n\tlistener\u003d FinishedJobs$1  (id\u003d6378)\n",
    "I think it might be here\n\nprivate void checkTasks(JobInfo info) {\n        if (keep(info)) {\n\t        TaskInfo tinfo \u003d info.getTaskInfo();\n\t        if (tinfo !\u003d null) {\n\t            JobTreeElement[] toBeRemoved\u003d null;        \n\t            boolean fire \u003d false;\n\t        \tJobTreeElement element \u003d (JobTreeElement) \ntinfo.getParent();\n\t        \tsynchronized (keptjobinfos) {\n\t\t        \tif (element \u003d\u003d info \u0026\u0026 !keptjobinfos.contains\n(tinfo)) {\t\t        \t\t\n\t\t        \t\ttoBeRemoved\u003d findJobsToRemove(element);\n\t\t                keptjobinfos.add(tinfo);\n\t\t                finishedTime.put(tinfo, new Long\n(System.currentTimeMillis()));\n\t\t       \n\nit looks like you are adding the task not the job here",
    "Here is a patch\n\nIndex: FinishedJobs.java\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nRCS file: /home/eclipse/org.eclipse.ui.workbench/Eclipse \nUI/org/eclipse/ui/internal/progress/FinishedJobs.java,v\nretrieving revision 1.15\ndiff -u -r1.15 FinishedJobs.java\n--- FinishedJobs.java\t27 May 2004 14:54:04 -0000\t1.15\n+++ FinishedJobs.java\t2 Jun 2004 20:31:34 -0000\n@@ -233,8 +233,8 @@\n \t        \tsynchronized (keptjobinfos) {\n \t\t        \tif (element \u003d\u003d info \u0026\u0026 !keptjobinfos.contains\n(tinfo)) {\t\t        \t\t\n \t\t        \t\ttoBeRemoved\u003d findJobsToRemove(element);\n-\t\t                keptjobinfos.add(tinfo);\n-\t\t                finishedTime.put(tinfo, new Long\n(System.currentTimeMillis()));\n+\t\t                keptjobinfos.add(element);\n+\t\t                finishedTime.put(element, new Long\n(System.currentTimeMillis()));\n \t\t            }\n \t        \t}\n \t        \t\n",
    "Still seeing this in RC2.",
    "Using this patch a worse problem occurs. If you cancel a job then it will not \nbe removed from the view. I don\u0027t think this is the solution",
    "Note that the sync job we cannot remove is a group",
    "\n\n*** This bug has been marked as a duplicate of 62474 ***"
  ],
  "commentCreationDates": [
    "2004-06-01T21:33:47+02:00",
    "2004-06-01T21:46:39+02:00",
    "2004-06-01T21:54:36+02:00",
    "2004-06-02T14:52:15+02:00",
    "2004-06-02T15:16:49+02:00",
    "2004-06-02T15:30:05+02:00",
    "2004-06-02T15:41:46+02:00",
    "2004-06-02T16:38:35+02:00",
    "2004-06-02T17:25:06+02:00",
    "2004-06-02T17:36:15+02:00",
    "2004-06-02T17:47:10+02:00",
    "2004-06-02T17:49:10+02:00",
    "2004-06-02T19:11:11+02:00",
    "2004-06-02T22:30:06+02:00",
    "2004-06-02T22:32:02+02:00",
    "2004-06-02T22:33:11+02:00",
    "2004-06-17T01:08:13+02:00",
    "2004-06-21T21:02:46+02:00",
    "2004-06-21T21:27:42+02:00",
    "2004-09-01T17:51:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Variable references non-existent resource : ${workspace_loc:/omelet.examples/build.xml}",
      "elements": [
        {
          "method": "org.eclipse.debug.internal.ui.stringsubstitution.ResourceResolver.abort",
          "source": "ResourceResolver.java:104"
        },
        {
          "method": "org.eclipse.debug.internal.ui.stringsubstitution.ResourceResolver.resolveValue",
          "source": "ResourceResolver.java:50"
        },
        {
          "method": "org.eclipse.core.internal.variables.DynamicVariable.getValue",
          "source": "DynamicVariable.java:54"
        },
        {
          "method": "org.eclipse.core.internal.variables.StringSubstitutionEngine.resolve",
          "source": "StringSubstitutionEngine.java:267"
        },
        {
          "method": "org.eclipse.core.internal.variables.StringSubstitutionEngine.substitute",
          "source": "StringSubstitutionEngine.java:192"
        },
        {
          "method": "org.eclipse.core.internal.variables.StringSubstitutionEngine.performStringSubstitution",
          "source": "StringSubstitutionEngine.java:86"
        },
        {
          "method": "org.eclipse.core.internal.variables.StringVariableManager.performStringSubstitution",
          "source": "StringVariableManager.java:549"
        },
        {
          "method": "org.eclipse.core.internal.variables.StringVariableManager.performStringSubstitution",
          "source": "StringVariableManager.java:341"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.launchConfigurations.ExternalToolsUtil.getLocation",
          "source": "ExternalToolsUtil.java:72"
        },
        {
          "method": "org.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.launch",
          "source": "AntLaunchDelegate.java:95"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:569"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:150"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.launchBuild",
          "source": "ExternalToolBuilder.java:137"
        },
        {
          "method": "org.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.build",
          "source": "ExternalToolBuilder.java:80"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:558"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:615"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:758"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:154"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:246"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:199"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:226"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:615"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:758"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:229"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuildLoop",
          "source": "BuildManager.java:265"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:294"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.doBuild",
          "source": "AutoBuildJob.java:153"
        },
        {
          "method": "org.eclipse.core.internal.events.AutoBuildJob.run",
          "source": "AutoBuildJob.java:207"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "65131",
      "duplicateId": "62474",
      "date": "2004-06-01T21:54:36+02:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "62474",
  "bugId": "65131",
  "duplicateId": "62474",
  "date": "2004-06-01T21:33:47+02:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}