{
  "comments": [
    "I seem to have some problems loading and saving certain types of images in\nSWT.  I\u0027m running Eclipse 2.1 on Windows XP.\n\nI have a set of JPEGs taken from the same digital camera and at the same\nresolution (1600x1200) and compression settings, and most of these\npictures can be loaded with\n\nImage image \u003d new Image( Display.getCurrent(), filename );\n\nbut a small number of them raise this exception:\n\norg.eclipse.swt.SWTException: Invalid image\n\tat org.eclipse.swt.SWT.error(SWT.java:2316)\n\tat org.eclipse.swt.SWT.error(SWT.java:2246)\n\tat\norg.eclipse.swt.internal.image.JPEGFileFormat.nextBit(JPEGFileFormat.java:1567)\n\tat\norg.eclipse.swt.internal.image.JPEGFileFormat.decodeUsingTable\n(JPEGFileFormat.java:748)\n\tat\norg.eclipse.swt.internal.image.JPEGFileFormat.decodeDCCoefficient\n(JPEGFileFormat.java:597)\n\tat\norg.eclipse.swt.internal.image.JPEGFileFormat.decodeMCUAtXAndY\n(JPEGFileFormat.java:673)\n\tat\norg.eclipse.swt.internal.image.JPEGFileFormat.decodeScan\n(JPEGFileFormat.java:736)\n\tat\norg.eclipse.swt.internal.image.JPEGFileFormat.loadFromByteStream\n(JPEGFileFormat.java:1450)\n\tat\norg.eclipse.swt.internal.image.FileFormat.loadFromStream(FileFormat.java:43)\n\tat org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:71)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:120)\n\tat org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:146)\n\tat org.eclipse.swt.graphics.ImageData.\u003cinit\u003e(ImageData.java:350)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:774)\n...\n\nAll of the pictures can be loaded by other apps, including Corel\nPhotopaint which says they are all JPEGs... \n\nWhen I try to load (using the same method as above) and save the same GIF\nimages, loading works and I can see the images, but saving fails.  The GIF\nimages are 8-bit images.\n\nThe code:\n\nImageLoader saver \u003d new ImageLoader();\nsaver.data \u003d new ImageDat[a] { image.getImageData() };\nsaver.save( filename, SWT.IMAGE_GIF );\n\nThe exception:\n\norg.eclipse.swt.SWTException: Unsupported color depth\n\tat org.eclipse.swt.SWT.error(SWT.java:2316)\n\tat org.eclipse.swt.SWT.error(SWT.java:2246)\n\tat\norg.eclipse.swt.internal.image.GIFFileFormat.unloadIntoByteStream\n(GIFFileFormat.java:428)\n\tat\norg.eclipse.swt.internal.image.FileFormat.unloadIntoStream(FileFormat.java:103)\n\tat org.eclipse.swt.internal.image.FileFormat.save(FileFormat.java:95)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:190)\n\tat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:230)\n...\n\nI also get an exception when loading and saving 24-bit PNGs (using\nSWT.IMAGE_PNG):\n\norg.eclipse.swt.SWTError: Not implemented\nat org.eclipse.swt.SWT.error(SWT.java:2342)\nat org.eclipse.swt.SWT.error(SWT.java:2246)\nat\norg.eclipse.swt.internal.image.PNGFileFormat.unloadIntoByteStream\n(PNGFileFormat.java:123)\nat\norg.eclipse.swt.internal.image.FileFormat.unloadIntoStream(FileFormat.java:103)\nat org.eclipse.swt.internal.image.FileFormat.save(FileFormat.java:95)\nat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:190)\nat org.eclipse.swt.graphics.ImageLoader.save(ImageLoader.java:230)\n\nI seem to be having no problems with BMP files, thankfully.",
    "Created an attachment (id\u003d4985)\nExample JPEG image that raises loading exception\n",
    "Created an attachment (id\u003d4986)\nExample GIF that raises exception when saving\n",
    "Created an attachment (id\u003d4987)\nExample PNG image that raises saving exception\n",
    "CC to investigate and advise.\n",
    "This PR will only deal with the JPEG loading problem.\nFor the other savings issues, I have opened bug 38232. Please add yourself to \nthe CC list.\n\n",
    "The JPEG from comment #1 can now be loaded using new Image(Device, String);\nSee bug 24451 comment 51 for details.\n\nThis is not a fix, but it will most likely be a suitable work-around.\nI will leave this bug open, but I will reduce the priority to P4.\n\nNote that the GIF saving problem is covered in bug 38232, and the PNG saving problem is covered in bug 24697."
  ],
  "commentCreationDates": [
    "2003-05-28T14:23:45+02:00",
    "2003-05-28T14:30:41+02:00",
    "2003-05-28T14:31:11+02:00",
    "2003-05-28T14:31:34+02:00",
    "2003-05-28T17:07:51+02:00",
    "2003-05-29T15:17:32+02:00",
    "2005-12-02T17:16:46+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid image",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2316"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2246"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.nextBit",
          "source": "JPEGFileFormat.java:1567"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.decodeUsingTable",
          "source": "JPEGFileFormat.java:748"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.decodeDCCoefficient",
          "source": "JPEGFileFormat.java:597"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.decodeMCUAtXAndY",
          "source": "JPEGFileFormat.java:673"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.decodeScan",
          "source": "JPEGFileFormat.java:736"
        },
        {
          "method": "org.eclipse.swt.internal.image.JPEGFileFormat.loadFromByteStream",
          "source": "JPEGFileFormat.java:1450"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.loadFromStream",
          "source": "FileFormat.java:43"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.load",
          "source": "FileFormat.java:71"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:120"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.load",
          "source": "ImageLoader.java:146"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageData.\u003cinit\u003e",
          "source": "ImageData.java:350"
        },
        {
          "method": "org.eclipse.swt.graphics.Image.\u003cinit\u003e",
          "source": "Image.java:774"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "38186",
      "date": "2003-05-28T14:23:45+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Unsupported color depth",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2316"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2246"
        },
        {
          "method": "org.eclipse.swt.internal.image.GIFFileFormat.unloadIntoByteStream",
          "source": "GIFFileFormat.java:428"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.unloadIntoStream",
          "source": "FileFormat.java:103"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.save",
          "source": "FileFormat.java:95"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:190"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:230"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "38186",
      "date": "2003-05-28T14:23:45+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.swt.SWTError",
      "message": "Not implemented",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2342"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2246"
        },
        {
          "method": "org.eclipse.swt.internal.image.PNGFileFormat.unloadIntoByteStream",
          "source": "PNGFileFormat.java:123"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.unloadIntoStream",
          "source": "FileFormat.java:103"
        },
        {
          "method": "org.eclipse.swt.internal.image.FileFormat.save",
          "source": "FileFormat.java:95"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:190"
        },
        {
          "method": "org.eclipse.swt.graphics.ImageLoader.save",
          "source": "ImageLoader.java:230"
        }
      ],
      "number": 2,
      "commentIndex": 0,
      "bugId": "38186",
      "date": "2003-05-28T14:23:45+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "38186",
  "bugId": "38186",
  "date": "2003-05-28T14:23:45+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}