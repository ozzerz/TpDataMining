{
  "comments": [
    "Using Eclipse 3.2M5.\nI have created a custom implementation of TextConsolePage and a custom implementation of TextConsoleViewer with a VerticalRuler.\nWhat happens is that if there is a large amount of output (13000+ lines) in the console, the vertical scrollbar in the console page allows me to scroll down past the end of the console output. When I do this until the output goes off the screen, the error occurs. The stack trace is below.\n(This problem does not occur in Eclipse 3.1)\n\njava.lang.IllegalArgumentException: Index out of bounds\n\tat org.eclipse.swt.SWT.error(SWT.java:3333)\n\tat org.eclipse.swt.SWT.error(SWT.java:3272)\n\tat org.eclipse.swt.SWT.error(SWT.java:3243)\n\tat org.eclipse.swt.custom.StyledText.getOffsetAtLine(StyledText.java:3702)\n\tat org.eclipse.jface.internal.text.JFaceTextUtil.getPartialTopIndex(JFaceTextUtil.java:100)\n\tat org.eclipse.jface.internal.text.JFaceTextUtil.getPartialTopIndex(JFaceTextUtil.java:148)\n\tat org.eclipse.jface.text.source.VerticalRuler.getInclusiveTopIndexStartOffset(VerticalRuler.java:256)\n\tat org.eclipse.jface.text.source.VerticalRuler.doPaint(VerticalRuler.java:286)\n\tat org.eclipse.jface.text.source.VerticalRuler.doubleBufferPaint(VerticalRuler.java:236)\n\tat org.eclipse.jface.text.source.VerticalRuler.access$3(VerticalRuler.java:210)\n\tat org.eclipse.jface.text.source.VerticalRuler$1.paintControl(VerticalRuler.java:152)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:83)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:934)\n\tat org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java:1240)\n\tat org.eclipse.swt.widgets.Control.windowProc(Control.java:3289)\n\tat org.eclipse.swt.widgets.Display.windowProc(Display.java:3965)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1799)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2905)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1899)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:282)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "What the stacktrace tells me is that JFaceTextUtil#getPartialTopIndex() is calling StyledText#getOffsetAtLine() with a out of range line index.\n\nReassigning.",
    "If you take a closer look at the code in JFaceUtil.getPartialTopIndex() it will also tell you that it does the following:\n\n\t(final) int top\u003d widget.getTopIndex();\n        ...\n\twidget.getOffsetAtLine(top)))\n\n\u003d\u003d\u003e according to the API spec in getTopIndex() is 0-based and returns a valid line number \u003d\u003d\u003e getOffsetAtLine() should not fail unless there\u0027s a bug in getTopIndex(). See also bug 132779.",
    "icemank: does your custom implementation have word wrap on ? How can I reproduce this problem ?\n\n\nDani, you didn\u0027t mean \u0027See also bug 132779\u0027.\n",
    "No, of course not. I meant bug 123770.",
    "No it does not have word wrap on.\nI will try to create a sample plugin which demonstrates the problem and upload it.",
    "The problem doesn\u0027t seem to be occurring with 3.2M6.\nWas it fixed?",
    "I\u0027m always fixing (and breaking \u003cgr\u003e) StyledText, probably this got fixed indirectly by changes in the code.\nClosing as fixed. But please reopen this problem report if the error occur again.\n"
  ],
  "commentCreationDates": [
    "2006-03-22T05:28:40+01:00",
    "2006-04-10T23:16:01+02:00",
    "2006-04-11T09:59:36+02:00",
    "2006-04-11T18:10:53+02:00",
    "2006-04-11T18:14:29+02:00",
    "2006-04-11T18:36:23+02:00",
    "2006-04-11T23:43:12+02:00",
    "2006-04-12T00:00:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Index out of bounds",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3333"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3272"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3243"
        },
        {
          "method": "org.eclipse.swt.custom.StyledText.getOffsetAtLine",
          "source": "StyledText.java:3702"
        },
        {
          "method": "org.eclipse.jface.internal.text.JFaceTextUtil.getPartialTopIndex",
          "source": "JFaceTextUtil.java:100"
        },
        {
          "method": "org.eclipse.jface.internal.text.JFaceTextUtil.getPartialTopIndex",
          "source": "JFaceTextUtil.java:148"
        },
        {
          "method": "org.eclipse.jface.text.source.VerticalRuler.getInclusiveTopIndexStartOffset",
          "source": "VerticalRuler.java:256"
        },
        {
          "method": "org.eclipse.jface.text.source.VerticalRuler.doPaint",
          "source": "VerticalRuler.java:286"
        },
        {
          "method": "org.eclipse.jface.text.source.VerticalRuler.doubleBufferPaint",
          "source": "VerticalRuler.java:236"
        },
        {
          "method": "org.eclipse.jface.text.source.VerticalRuler.access$3",
          "source": "VerticalRuler.java:210"
        },
        {
          "method": "org.eclipse.jface.text.source.VerticalRuler$1.paintControl",
          "source": "VerticalRuler.java:152"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:83"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:925"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:949"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:934"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.WM_PAINT",
          "source": "Composite.java:1240"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.windowProc",
          "source": "Control.java:3289"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.windowProc",
          "source": "Display.java:3965"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1799"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2905"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1899"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1863"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:417"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:99"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:374"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:338"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:282"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "132779",
      "date": "2006-03-22T05:28:40+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "normal"
    }
  ],
  "groupId": "132779",
  "bugId": "132779",
  "date": "2006-03-22T05:28:40+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "normal"
}