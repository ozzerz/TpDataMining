{
  "comments": [
    "this test file (Test.java) crashes the weaver:\n\npublic class Test {\n    static aspect MockProcessing {\n        pointcut testFlow(final Thread thread) : \n            cflow(execution(void run()) \u0026\u0026 this(thread) \u0026\u0026 within(Thread)); // \nthe within is an optimization\n\n        Object around() :\n                call(* DummyConfiguration.createRootApplicationModule(..)) \u0026\u0026 \ntestFlow(Thread)\n        {\n            return null;\n        }\n    }\n}\n\nclass Bar {\n    void foo() {\n        DummyConfiguration.createRootApplicationModule();\n    }\n}\n\nclass DummyConfiguration {\n    static Object createRootApplicationModule() {\n        return null;\n    }\n}\n\nprompt\u003eajc -d 11bin -1.4 Test.java\nException thrown from AspectJ 1.1rc1\n\nThis might be logged as a bug already -- find current bugs at\n  http://bugs.eclipse.org/bugs/buglist.cgi?product\u003dAspectJ\u0026component\u003dCompiler\n\nBugs for exceptions thrown have titles File:line from the top stack,\ne.g., \"SomeFile.java:243\"\n\nIf you don\u0027t find the exception below in a bug, please add a new bug\nat http://bugs.eclipse.org/bugs/enter_bug.cgi?product\u003dAspectJ\nTo make the bug a priority, please include a test program\nthat can reproduce this exception.\n0\n0\njava.lang.ArrayIndexOutOfBoundsException: 0\n        at org.aspectj.weaver.IntMap.get(IntMap.java:109)\n        at org.aspectj.weaver.patterns.CflowPointcut.concretize1(CflowPointcut.j\nava:170)\n        at org.aspectj.weaver.patterns.ReferencePointcut.concretize1(ReferencePo\nintcut.java:270)\n        at org.aspectj.weaver.patterns.AndPointcut.concretize1(AndPointcut.java:\n88)\n        at org.aspectj.weaver.patterns.Pointcut.concretize(Pointcut.java:127)\n        at org.aspectj.weaver.patterns.Pointcut.concretize(Pointcut.java:120)\n        at org.aspectj.weaver.Advice.concretize(Advice.java:207)\n        at org.aspectj.weaver.CrosscuttingMembers.addShadowMunger(CrosscuttingMe\nmbers.java:78)\n        at org.aspectj.weaver.CrosscuttingMembers.addShadowMungers(CrosscuttingM\nembers.java:72)\n        at org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers(ResolvedT\nypeX.java:328)\n        at org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect(Crosscut\ntingMembersSet.java:54)\n        at org.aspectj.weaver.bcel.BcelWeaver.prepareForWeave(BcelWeaver.java:16\n4)\n        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:214)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerat\neClassFiles(AjBuildManager.java:394)\n        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBu\nildManager.java:149)\n        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)\n        at org.aspectj.tools.ajc.Main.run(Main.java:216)\n        at org.aspectj.tools.ajc.Main.runMain(Main.java:155)\n        at org.aspectj.tools.ajc.Main.main(Main.java:72)\n\n\n1 fail|abort",
    "I\u0027ve reproduced this bug easily from the submitted test.  It should be fixed \ntoday for the rc1 release.",
    "fixed in tree, tests in bings/CflowBinding*.java\n\nissue was with cflow capturing state that was not actually exposed to any \nadvice"
  ],
  "commentCreationDates": [
    "2003-03-12T19:50:32+01:00",
    "2003-03-12T19:59:49+01:00",
    "2003-03-12T23:07:52+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "message": "0",
      "elements": [
        {
          "method": "org.aspectj.weaver.IntMap.get",
          "source": "IntMap.java:109"
        },
        {
          "method": "org.aspectj.weaver.patterns.CflowPointcut.concretize1",
          "source": "CflowPointcut.j ava:170"
        },
        {
          "method": "org.aspectj.weaver.patterns.ReferencePointcut.concretize1",
          "source": "ReferencePo intcut.java:270"
        },
        {
          "method": "org.aspectj.weaver.patterns.AndPointcut.concretize1",
          "source": "AndPointcut.java: 88"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.concretize",
          "source": "Pointcut.java:127"
        },
        {
          "method": "org.aspectj.weaver.patterns.Pointcut.concretize",
          "source": "Pointcut.java:120"
        },
        {
          "method": "org.aspectj.weaver.Advice.concretize",
          "source": "Advice.java:207"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembers.addShadowMunger",
          "source": "CrosscuttingMe mbers.java:78"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembers.addShadowMungers",
          "source": "CrosscuttingM embers.java:72"
        },
        {
          "method": "org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers",
          "source": "ResolvedT ypeX.java:328"
        },
        {
          "method": "org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect",
          "source": "Crosscut tingMembersSet.java:54"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.prepareForWeave",
          "source": "BcelWeaver.java:16 4"
        },
        {
          "method": "org.aspectj.weaver.bcel.BcelWeaver.weave",
          "source": "BcelWeaver.java:214"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerateClassFiles",
          "source": "AjBuildManager.java:394"
        },
        {
          "method": "org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild",
          "source": "AjBu ildManager.java:149"
        },
        {
          "method": "org.aspectj.ajdt.ajc.AjdtCommand.runCommand",
          "source": "AjdtCommand.java:55"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.run",
          "source": "Main.java:216"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.runMain",
          "source": "Main.java:155"
        },
        {
          "method": "org.aspectj.tools.ajc.Main.main",
          "source": "Main.java:72"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "34858",
      "date": "2003-03-12T19:50:32+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "critical"
    }
  ],
  "groupId": "34858",
  "bugId": "34858",
  "date": "2003-03-12T19:50:32+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "critical"
}