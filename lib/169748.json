{
  "comments": [
    "This problem was found by Duwayne on the 4.4.0 driver. \n\nThe NPE exception (see the stack trace at the end of the comment) happens after you restart the workbench and try to view in the Test navigator existing testcases created in advance.\n\nI tried Manual, AGR, and URL tests and for all I get the same behaviour.\n\nI was able to reproduce it on 4.3 also.\n\nI found that the NPE happens for those mementos that don\u0027t have \"nodeKind\" attribute on the root element.\n\nHere is an example with not null and null case.\n\nNot null case:\n++++ HyadesProxyNodeFactory.recreate() memento\u003d\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cproxyStateMemento nodeKind\u003d\"executionResultNode\" timestamp\u003d\"1168043120634\" type\u003d\"org.eclipse.hyades.test.http.junit.testSuite\" uriFragment\u003d\"C2DDBDF65C2703BAD42D06809D1B11DB\" uriRoot\u003d\"/testproj/Copy of yahoo2.execution\" verdict\u003d\"3\"\u003e\u0026#x0A;\u003cchildNode nodeKind\u003d\"executionResultNode\" timestamp\u003d\"1168043120634\" type\u003d\"org.eclipse.hyades.test.http.junit.testCase\" uriFragment\u003d\"C2DDBDF65C2703BAE0D932509D1B11DB\" verdict\u003d\"3\"/\u003e\u0026#x0A;\u003c/proxyStateMemento\u003e\n\nNPE happens for this memento:\n---- HyadesProxyNodeFactory.recreate() memento\u003d\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cproxyStateMemento uriRoot\u003d\"/testproj/Copy of yahoo2.testsuite\"\u003e\u0026#x0A;\u003cchildNode nodeKind\u003d\"testCaseNode\" type\u003d\"org.eclipse.hyades.test.http.junit.testCase\" uriFragment\u003d\"C2DDBDF65C2703BADCA880F09D1B11DB\"/\u003e\u0026#x0A;\u003c/proxyStateMemento\u003e\n\n\nThe NPE stack trace:\n\njava.lang.NullPointerException\nat org.eclipse.hyades.test.ui.navigator.HyadesProxyNodeFactory.recreate(HyadesProxyNodeFactory.java:172)\nat org.eclipse.hyades.test.ui.internal.navigator.proxy.EMFResourceProxyFactory.recreate(EMFResourceProxyFactory.java:127)\nat org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyMarkerPersister.buildProxyFromSavedState(FileProxyMarkerPersister.java:103)\nat org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyMarkerPersister.loadProxy(FileProxyMarkerPersister.java:78)\nat org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyNodeCache.loadProxy(FileProxyNodeCache.java:214)\nat org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyNodeCache.getProxy(FileProxyNodeCache.java:200)\nat org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyManager.getProxy(FileProxyManager.java:63)\nat org.eclipse.hyades.test.ui.internal.navigator.ResourceTestNavigatorProvider.getContainerChildren(ResourceTestNavigatorProvider.java:121)\nat org.eclipse.hyades.test.ui.internal.navigator.ResourceTestNavigatorProvider.getChildren(ResourceTestNavigatorProvider.java:93)\nat org.eclipse.jface.viewers.AbstractTreeViewer.getRawChildren(AbstractTreeViewer.java:1215)\nat org.eclipse.jface.viewers.TreeViewer.getRawChildren(TreeViewer.java:490)\nat org.eclipse.jface.viewers.AbstractTreeViewer.getFilteredChildren(AbstractTreeViewer.java:613)\nat org.eclipse.jface.viewers.AbstractTreeViewer.getSortedChildren(AbstractTreeViewer.java:579)\nat org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:773)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\nat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:750)\nat org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:622)\nat org.eclipse.jface.viewers.AbstractTreeViewer.internalSetExpanded(AbstractTreeViewer.java:1862)\nat org.eclipse.jface.viewers.AbstractTreeViewer.setExpandedElements(AbstractTreeViewer.java:2218)\nat org.eclipse.hyades.ui.internal.navigator.TreeNavigator.loadExpandState(TreeNavigator.java:255)\nat org.eclipse.hyades.ui.internal.navigator.TreeNavigator.loadMemento(TreeNavigator.java:193)\nat org.eclipse.hyades.ui.internal.navigator.Navigator.createPartControl(Navigator.java:273)\nat org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:345)\nat org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:210)\nat org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:566)\nat org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:293)\nat org.eclipse.ui.internal.ViewPane.setVisible(ViewPane.java:524)\nat org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:140)\nat org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:268)\nat org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)\nat org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:394)\nat org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1156)\nat org.eclipse.ui.internal.PartStack.createControl(PartStack.java:623)\nat org.eclipse.ui.internal.PartStack.createControl(PartStack.java:535)\nat org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:570)\nat org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:247)\nat org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:840)\nat org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:2412)\nat org.eclipse.ui.internal.WorkbenchWindow$6.run(WorkbenchWindow.java:2631)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)\nat org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:2612)\nat org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1994)\nat org.eclipse.ui.internal.Workbench.doRestoreState(Workbench.java:2888)\nat org.eclipse.ui.internal.Workbench.access$13(Workbench.java:2836)\nat org.eclipse.ui.internal.Workbench$20.run(Workbench.java:1712)\nat org.eclipse.ui.internal.Workbench.runStartupWithProgress(Workbench.java:1452)\nat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1710)\nat org.eclipse.ui.internal.Workbench.access$11(Workbench.java:1681)\nat org.eclipse.ui.internal.Workbench$18.run(Workbench.java:1560)\nat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\nat org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1504)\nat org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:183)\nat org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:751)\nat org.eclipse.ui.internal.Workbench.init(Workbench.java:1109)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:425)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:615)\nat org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod(EclipseAppContainer.java:522)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:147)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:170)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:615)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:339)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:283)\nat org.eclipse.core.launcher.Main.run(Main.java:984)\nat org.eclipse.core.launcher.Main.main(Main.java:959)",
    "Created an attachment (id\u003d56591)\nproject with testsuite\n\n",
    "Just to add clarification.  Once the NPE happens on re-start of Eclipse, the associated test is marked in the Test Navigator with a yellow caution icon and cannot be executed.  So, it is very much a permanent fatal error.\n\nImport the same project into TPTP 4.3 and the executable status is restored.\n\nI have attached a project with the NPE problem to help re-produce.",
    "Fixed.",
    "Reporter: Please verify and close in preparation for shutting down the TPTP 4.4 release.  Thanks."
  ],
  "commentCreationDates": [
    "2007-01-06T04:10:18+01:00",
    "2007-01-08T22:10:04+01:00",
    "2007-01-08T22:11:19+01:00",
    "2007-01-10T14:19:07+01:00",
    "2007-06-02T20:51:21+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.hyades.test.ui.navigator.HyadesProxyNodeFactory.recreate",
          "source": "HyadesProxyNodeFactory.java:172"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.proxy.EMFResourceProxyFactory.recreate",
          "source": "EMFResourceProxyFactory.java:127"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyMarkerPersister.buildProxyFromSavedState",
          "source": "FileProxyMarkerPersister.java:103"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyMarkerPersister.loadProxy",
          "source": "FileProxyMarkerPersister.java:78"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyNodeCache.loadProxy",
          "source": "FileProxyNodeCache.java:214"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyNodeCache.getProxy",
          "source": "FileProxyNodeCache.java:200"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.proxy.FileProxyManager.getProxy",
          "source": "FileProxyManager.java:63"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.ResourceTestNavigatorProvider.getContainerChildren",
          "source": "ResourceTestNavigatorProvider.java:121"
        },
        {
          "method": "org.eclipse.hyades.test.ui.internal.navigator.ResourceTestNavigatorProvider.getChildren",
          "source": "ResourceTestNavigatorProvider.java:93"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.getRawChildren",
          "source": "AbstractTreeViewer.java:1215"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.getRawChildren",
          "source": "TreeViewer.java:490"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.getFilteredChildren",
          "source": "AbstractTreeViewer.java:613"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.getSortedChildren",
          "source": "AbstractTreeViewer.java:579"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:773"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:750"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.createChildren",
          "source": "TreeViewer.java:622"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalSetExpanded",
          "source": "AbstractTreeViewer.java:1862"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.setExpandedElements",
          "source": "AbstractTreeViewer.java:2218"
        },
        {
          "method": "org.eclipse.hyades.ui.internal.navigator.TreeNavigator.loadExpandState",
          "source": "TreeNavigator.java:255"
        },
        {
          "method": "org.eclipse.hyades.ui.internal.navigator.TreeNavigator.loadMemento",
          "source": "TreeNavigator.java:193"
        },
        {
          "method": "org.eclipse.hyades.ui.internal.navigator.Navigator.createPartControl",
          "source": "Navigator.java:273"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPartHelper",
          "source": "ViewReference.java:345"
        },
        {
          "method": "org.eclipse.ui.internal.ViewReference.createPart",
          "source": "ViewReference.java:210"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "WorkbenchPartReference.java:566"
        },
        {
          "method": "org.eclipse.ui.internal.PartPane.setVisible",
          "source": "PartPane.java:293"
        },
        {
          "method": "org.eclipse.ui.internal.ViewPane.setVisible",
          "source": "ViewPane.java:524"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PresentablePart.setVisible",
          "source": "PresentablePart.java:140"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select",
          "source": "PresentablePartFolder.java:268"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select",
          "source": "LeftToRightTabOrder.java:65"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart",
          "source": "TabbedStackPresentation.java:394"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.refreshPresentationSelection",
          "source": "PartStack.java:1156"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.createControl",
          "source": "PartStack.java:623"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.createControl",
          "source": "PartStack.java:535"
        },
        {
          "method": "org.eclipse.ui.internal.PartSashContainer.createControl",
          "source": "PartSashContainer.java:570"
        },
        {
          "method": "org.eclipse.ui.internal.PerspectiveHelper.activate",
          "source": "PerspectiveHelper.java:247"
        },
        {
          "method": "org.eclipse.ui.internal.Perspective.onActivate",
          "source": "Perspective.java:840"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.onActivate",
          "source": "WorkbenchPage.java:2412"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow$6.run",
          "source": "WorkbenchWindow.java:2631"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.setActivePage",
          "source": "WorkbenchWindow.java:2612"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.restoreState",
          "source": "WorkbenchWindow.java:1994"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.doRestoreState",
          "source": "Workbench.java:2888"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$13",
          "source": "Workbench.java:2836"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$20.run",
          "source": "Workbench.java:1712"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runStartupWithProgress",
          "source": "Workbench.java:1452"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.restoreState",
          "source": "Workbench.java:1710"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$11",
          "source": "Workbench.java:1681"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$18.run",
          "source": "Workbench.java:1560"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.restoreState",
          "source": "Workbench.java:1504"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchConfigurer.restoreState",
          "source": "WorkbenchConfigurer.java:183"
        },
        {
          "method": "org.eclipse.ui.application.WorkbenchAdvisor.openWindows",
          "source": "WorkbenchAdvisor.java:751"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.init",
          "source": "Workbench.java:1109"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:425"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppContainer.callMethod",
          "source": "EclipseAppContainer.java:522"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:147"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:170"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:339"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:283"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:984"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:959"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "169748",
      "date": "2007-01-06T04:10:18+01:00",
      "product": "TPTP Testing",
      "component": "Test.UI",
      "severity": "critical"
    }
  ],
  "groupId": "169748",
  "bugId": "169748",
  "date": "2007-01-06T04:10:18+01:00",
  "product": "TPTP Testing",
  "component": "Test.UI",
  "severity": "critical"
}