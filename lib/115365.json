{
  "comments": [
    "The BIRT team is trying to use TPTP to profile and test their application. I \nwas helping them identify a performance problem when I got into this blocking \nissue.\n\nI am running the following scenario on the TPTP-4.1.0-200511071152 build:\n\n- clean copy of this driver\n- copy RAC zip, unzipped it and run it from the command line\n\n- have Tomcat 4.1.31 installed \n- deploy the BIRT war attached into Tomcat ( see the attachment ); to deploy \nit, simply copy the war under the yourTomcatPath\\webapps directory. It will be \ndeployed automatically when Tomcat starts\n- start Tomcat using jdk 1.4\n- verify that the following report can be run http://localhost:8080/birt-\nviewer/run?__report\u003dSalesInvoice.rptdesign\n\nNow try to create a TPTP URL test using the BIRT report and run it:\n- Start RAC using a jdk 1.4 version\n- open Eclipse TPTP, create a HTTP recording by using File \u003e New \u003e Test \u003e \nRecording \u003e Http Recording\nWhen the browser opens, select this linkhttp://localhost:8080/birt-viewer/run?\n__report\u003dSalesInvoice.rptdesign, then stop the recording.\n- generate the java content for this testsuite\n- try to run the testsuite using Run as \u003e Test \u003e testuiste on localdeployement\n I get a message that the test suite is deployed and run and it takes about \ntwo minutes to get to 92% done when it stalls. If I cancel the execution, the \nexecution history is created with this content, one testcase was failed.\n\nThe test run takes all my CPU so I have to open Task Manager and kill the java \napp before I can do anything else. It seems that the exception is caused by a \nNumberFormat exception on the java stack but this shouldn\u0027t result in such a \nfailure\n\nI will attach my workspace",
    "Created an attachment (id\u003d29455)\ntptp workspace\n",
    "I can\u0027t attach the war file because the size is bigger than the maximum \nallowed for a non patch.\nI can send it by email ",
    "\nHi Mark, could you take a look at this, I think it might be a URL test type\nspecific issue. ",
    "\nValentina, if you still have it please attach the Java stack trace you mention\nbelow with the NumberFormatException. ",
    "The UI does not allow me to copy/paste the exception\n\nYou can see the exception if you open the execution result in the editor and \nthen go to the failing testcase; I attached the workspace in the defect\n\nThis is the exception copied from the emf resource\n\n              \u003cexecutionEvents xsi:type\u003d\"Common_Testprofile:TPFMessageEvent\" \ntimestamp\u003d\"1131387415370\" \ntext\u003d\"System.out:\u0026#xA;java.lang.NumberFormatException: For input string: \n\u0026quot;iv\u0026quot;\u0026#xD;\u0026#xA;\"/\u003e\n              \u003cexecutionEvents xsi:type\u003d\"Common_Testprofile:TPFVerdictEvent\" \nid\u003d\"D4379D2BBCC780D47A17EA774FBA11DA(1)(1)(1)_verdict\" \ntimestamp\u003d\"1131387415680\" text\u003d\"java.lang.Exception: \n\u0026#xA;\u0026#xA;java.lang.NumberFormatException: For input string: \n\u0026quot;iv\u0026quot;\u0026#xD;\u0026#xA;\u0026#x9;at test.Birt.executeRequest(Birt.java:219)\n\u0026#xD;\u0026#xA;\u0026#x9;at test.Birt.c1GETLocalhost(Birt.java:129)\u0026#xD;\u0026#xA;\u0026#x9;at \nsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u0026#xD;\u0026#xA;\u0026#x9;at \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\n\u0026#xD;\u0026#xA;\u0026#x9;at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:41)\u0026#xD;\u0026#xA;\u0026#x9;at \njava.lang.reflect.Method.invoke(Method.java:386)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.framework.TestCase.runTest(TestCase.java:154)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.framework.TestCase.runBare(TestCase.java:127)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.framework.TestResult$1.protect(TestResult.java:106)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.framework.TestResult.runProtected(TestResult.java:124)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.framework.TestResult.run(TestResult.java:109)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.framework.TestCase.run(TestCase.java:118)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestCase.run\n(HyadesTestCase.java:173)\u0026#xD;\u0026#xA;\u0026#x9;at junit.framework.TestSuite.runTest\n(TestSuite.java:208)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.runTest\n(HyadesTestSuite.java:428)\u0026#xD;\u0026#xA;\u0026#x9;at junit.framework.TestSuite.run\n(TestSuite.java:203)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.doRun\n(HyadesTestSuite.java:396)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.run\n(HyadesTestSuite.java:311)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\u0026#xD;\u0026#xA;\u0026#x9;at junit.extensions.TestDecorator.run(TestDecorator.java:28)\n\u0026#xD;\u0026#xA;\u0026#x9;at junit.extensions.RepeatedTest.run(RepeatedTest.java:25)\n\u0026#xD;\u0026#xA;\u0026#x9;at junit.framework.TestSuite.runTest(TestSuite.java:208)\n\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.test.common.junit.HyadesTestSuite.runTest\n(HyadesTestSuite.java:428)\u0026#xD;\u0026#xA;\u0026#x9;at junit.framework.TestSuite.run\n(TestSuite.java:203)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.doRun\n(HyadesTestSuite.java:396)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.run\n(HyadesTestSuite.java:311)\u0026#xD;\u0026#xA;\u0026#x9;at \njunit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\u0026#xD;\u0026#xA;\u0026#x9;at junit.extensions.TestDecorator.run(TestDecorator.java:28)\n\u0026#xD;\u0026#xA;\u0026#x9;at junit.extensions.RepeatedTest.run(RepeatedTest.java:25)\n\u0026#xD;\u0026#xA;\u0026#x9;at junit.framework.TestSuite.runTest(TestSuite.java:208)\n\u0026#xD;\u0026#xA;\u0026#x9;at org.eclipse.hyades.test.common.junit.HyadesTestSuite.runTest\n(HyadesTestSuite.java:428)\u0026#xD;\u0026#xA;\u0026#x9;at junit.framework.TestSuite.run\n(TestSuite.java:203)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.doRun\n(HyadesTestSuite.java:396)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestSuite.run\n(HyadesTestSuite.java:311)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.common.junit.HyadesTestRunner.run\n(HyadesTestRunner.java:294)\u0026#xD;\u0026#xA;\u0026#x9;at \norg.eclipse.hyades.test.java.runner.HyadesJUnitRunner.main\n(HyadesJUnitRunner.java:164)\u0026#xD;\u0026#xA;\" verdict\u003d\"error\" \nreason\u003d\"seeDescription\"/\u003e\n              \u003cexecutionEvents xsi:type\u003d\"Common_Testprofile:TPFTypedEvent\" \nownerId\u003d\"D4379D2BBCC780D47A17EA774FBA11DA\" timestamp\u003d\"1131387415680\" \ntype\u003d\"stop\"\u003e\n                \u003cinteractionFragment \nxsi:type\u003d\"Common_Behavior_Interactions:BVRExecutionOccurrence\" \nhref\u003d\"birt.testsuite#D4379D2BBCC780D47A17EA774FBA11DA\"/\u003e\n              \u003c/executionEvents\u003e\n",
    "\nThe test case itself throws an exception and then it seems to hang after this. \nSo the runner is not handling this exception.  For the time being, please adjust\nthe test case not to throw this non-JUnit exception and see if this changes the\noutcome please.  In the meantime I will figure out why it is hanging.",
    "\nAlso, if you have a remote machine setup running tomcat, etc, let me know and I\ncan hit that machine instead of having to setup this entire environment on my box.",
    "\nValentina, please let me know if the workaround I suggest below (not throwing\nthe exception) and trapping it instead and using a JUnit method such as \"fail()\"\ninstead is an acceptable workaround for TPTP 4.1, I will reduce the severity to\nmajor since I believe this is a valid workaround please adjust it back if not.",
    "\nMy mistake, the code that is generated is the code that throws this exception. \nPlease ignore the part about the workaround.",
    "Sorry, I don\u0027t have a server machine you can use for running the scenario. \nThe steps are pretty simple and doesn\u0027t require a lot of disk space though\n\nLet me know if you still need the war",
    "\nJust please send the war file to scott.schneider@us.ibm.com as well as any other\ninstructions not yet listed in the defect text.",
    "I\u0027ve sent you a note with instructions on how to get the war and run the sample",
    "\nI get similar NumberFormatExceptions but no hang on my system.  It fails\nimmediately after going through all the 10 or so HTTP GET requests.  Two of the\nrequests have \"x\" errors.\n\nSeems to be a problem in either recorder or HTTP test runner.  Will investigate\nmore but since it does not hang with the latest TPTP 4.1 build (after testing\nmultiple times ) I will reduce to normal.\n\nI tested another BIRT report, \"test.rptdesign\" and this worked fine (however\nsimple it is).",
    "\nThis does not appear to be a regression, some type of case they never worked. \nNot sure of the details of that specific case yet though.",
    "Scott, I\u0027ve tested the same scenario with TPTP 4.0 and I could experience the \nhangging after the second or third run. So it doesn\u0027t seem to be a regression\n\nWhat worries me though is that real users ( Birt in this case ) is trying to \nrun this scenario, so from their point of view this is a blocking issue. \nI am currenlty working with them to solve some performance issues while using \nTPTP to test/profile BIRT and I have a feeling that this failure is the main \ncause for their problems.\nThey are using TPTP 4.0",
    "\nValentina, I will speak with Mark Dunn that owns the recorder feature and get\nsome more ideas from him to see if this is something that could be easily fixed\nwith fix in hand today.  I will update this defect with more information.",
    "\nI will continue to find a fix for this even though I\u0027m switching it to target\nmilestone 4.2 -- if the release continues longer than expected then perhaps I\ncan roll in a fix.  For now, the thinking is this will go into 4.2.",
    "\nValentina, just to verify, are the hangs you experienced while running on\nWindows or Linux (or both?)...",
    "Reassign to DuWayne since this is test execution related.",
    "this defect has been high severity and high priority for many months. I am not sure how it got past iteration exit criteria, but this needs to be resolved in the current I2 iteration.",
    "Hi Harm, I read your comment about fixing this in I2.  \n\nAfter looking at the exception event and the recording in the attached workspace, I have good news.  This is a duplicate of two other defects on my list, so that it makes it easier to address and fix without jumping through all the hoops with Birt and Tomcat.\n\nBasically, the issue (that must be fixed in I2) is that playback is broken against a chunk encoded server response, producing a NumberFormatException.  Somewhere there must have been a change in code that results in our trying to get the number of bytes for the next chunk in the wrong place (where there is http content).  Hence, we choke on the exception.\n\nThere are other servers, such as a simple Google search that provide chunk encoded responses, so it should be relatively straight-foward to fix.  I will put this at the top of my defect list, since it is a 3 for 1 special!\n\n*** This bug has been marked as a duplicate of 130144 ***",
    "Thanks for the update DuWayne. It is important that key uses cases like BIRT work. After all this is a prime user that has been broken for several months. I am glad this is a dup in one sense, but on the other it means several people have been hung up for a long time.\nLooking forward to the fix now that it is on your radar.",
    "ACTION: Please verify/close this defect.",
    "Closing by default since not closed by the originator in the 7+ months since being resolved.  \n\nPlease reopen if the issue is still present in the latest TPTP release or the resolution is not correct."
  ],
  "commentCreationDates": [
    "2005-11-07T18:40:59+01:00",
    "2005-11-07T18:45:36+01:00",
    "2005-11-07T18:49:16+01:00",
    "2005-11-08T04:00:16+01:00",
    "2005-11-08T16:28:13+01:00",
    "2005-11-08T16:34:57+01:00",
    "2005-11-08T21:29:41+01:00",
    "2005-11-08T21:31:23+01:00",
    "2005-11-08T21:33:49+01:00",
    "2005-11-08T21:37:29+01:00",
    "2005-11-09T02:24:37+01:00",
    "2005-11-09T15:49:46+01:00",
    "2005-11-09T15:59:42+01:00",
    "2005-11-09T19:02:18+01:00",
    "2005-11-09T19:04:18+01:00",
    "2005-11-09T19:31:03+01:00",
    "2005-11-09T19:39:32+01:00",
    "2005-11-10T22:44:15+01:00",
    "2005-11-10T23:36:52+01:00",
    "2006-02-17T14:53:08+01:00",
    "2006-03-17T18:50:04+01:00",
    "2006-03-17T19:28:43+01:00",
    "2006-03-17T21:22:45+01:00",
    "2006-11-16T14:02:29+01:00",
    "2007-02-12T17:58:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NumberFormatException",
      "message": "For input string:  \u0026quot;iv\u0026quot;\u0026#xD;\u0026#xA;\u0026#x9;",
      "elements": [
        {
          "method": "test.Birt.executeRequest",
          "source": "Birt.java:219"
        }
      ],
      "number": 0,
      "commentIndex": 5,
      "bugId": "115365",
      "duplicateId": "130144",
      "date": "2005-11-08T16:34:57+01:00",
      "product": "TPTP Testing",
      "component": "Test.Execution.URLRunner",
      "severity": "major"
    }
  ],
  "groupId": "130144",
  "bugId": "115365",
  "duplicateId": "130144",
  "date": "2005-11-07T18:40:59+01:00",
  "product": "TPTP Testing",
  "component": "Test.Execution.URLRunner",
  "severity": "major"
}