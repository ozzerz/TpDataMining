{
  "comments": [
    "Eclipse Web Tools Platform 1.5 (on Eclipse 3.2) running in the java 1.5.0_7 VM, and using CVS.\n\nReceived the following error message in the JSP editor while performing a CVS Annotation:\nAn error has occurred. See error log for more details.\n\n100% reproducible.\nAlso verified to occur in WTP 1.0.2\n\nSteps to reproduce:\nFrom a JSP opened in the JSP Editor, right click, select Team -\u003e Show Annotation\nWhen the new editor opens, the error message will appear.\nAdditionally, any time the user clicks the mouse in the editor, the error will reappear.\n\nNote: on my machine, it is setup to open the annotation in the CVS Repository perspective, but switching back to the Java perspective and clicking anywhere in the editor still generated the error message.\n\nThe following more detailed error message is in the Error Log view:\n\nProblems occurred when invoking code from plug-in: \"org.eclipse.wst.sse.ui\".\n\njava.lang.ClassCastException: org.eclipse.jst.jsp.core.internal.domdocument.ElementImplForJSP\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.listSelectionChanged(AnnotateView.java:259)\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged(AnnotateView.java:189)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$6.run(StructuredTextEditor.java:901)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged(StructuredTextEditor.java:899)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged(StructuredTextEditor.java:957)\n\tat org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged(StructuredTextEditor.java:880)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2321)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2273)\n\tat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2252)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:3411)\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2693)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1923)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "a workaround is to change the file association of *.jsp to use the plain text editor, then cvs annotations work properly.\n\nWindow -\u003e Preferences... -\u003e General -\u003e Editors -\u003e File Associations -\u003e *.jsp -\u003e select Text Editor -\u003e press the Default button",
    "also see bug 153462 (a very similiar bug related to css files rather than jsp files)",
    "Moving to CVS.  Our editor provides an IStructuredSelection and it appears that the Annotate View does not behave properly, then.",
    "It appears to be easier to trigger by just choosing the Show Annotation action from a navigator.",
    "Similar cause for this stack trace:\n\n!ENTRY org.eclipse.jface 4 2 2006-08-10 12:58:04.887\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.jface\".\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.team.internal.ui.history.GenericHistoryView.getHistoryPage(GenericHistoryView.java:678)\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.listSelectionChanged(AnnotateView.java:291)\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged(AnnotateView.java:189)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:162)\n\tat org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:843)\n\tat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\n\tat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:149)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:160)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1976)\n\tat org.eclipse.jface.viewers.StructuredViewer.setSelection(StructuredViewer.java:1577)\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.textSelectionChanged(AnnotateView.java:228)\n\tat org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged(AnnotateView.java:191)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2321)\n\tat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2273)\n\tat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2252)\n\tat org.eclipse.swt.widgets.Display.runTimer(Display.java:3411)\n\tat org.eclipse.swt.widgets.Display.messageProc(Display.java:2693)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\n\tat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1923)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "Thanks for looking into this Nitin!! Eclipse and WTP both rock!",
    "\n\n*** This bug has been marked as a duplicate of 143270 ***"
  ],
  "commentCreationDates": [
    "2006-08-08T17:34:41+02:00",
    "2006-08-10T18:07:59+02:00",
    "2006-08-10T18:18:37+02:00",
    "2006-08-10T19:01:21+02:00",
    "2006-08-10T19:03:02+02:00",
    "2006-08-10T19:04:37+02:00",
    "2006-08-10T19:13:05+02:00",
    "2006-08-10T19:32:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jst.jsp.core.internal.domdocument.ElementImplForJSP",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.listSelectionChanged",
          "source": "AnnotateView.java:259"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged",
          "source": "AnnotateView.java:189"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$6.run",
          "source": "StructuredTextEditor.java:901"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.fireSelectionChanged",
          "source": "StructuredTextEditor.java:899"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$StructuredSelectionProvider.handlePostSelectionChanged",
          "source": "StructuredTextEditor.java:957"
        },
        {
          "method": "org.eclipse.wst.sse.ui.StructuredTextEditor$5.selectionChanged",
          "source": "StructuredTextEditor.java:880"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2321"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2273"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2252"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3411"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2693"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1923"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "153100",
      "duplicateId": "143270",
      "date": "2006-08-08T17:34:41+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "minor"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.team.internal.ui.history.GenericHistoryView.getHistoryPage",
          "source": "GenericHistoryView.java:678"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.listSelectionChanged",
          "source": "AnnotateView.java:291"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged",
          "source": "AnnotateView.java:189"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:162"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:843"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:149"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:160"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1976"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:1577"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.textSelectionChanged",
          "source": "AnnotateView.java:228"
        },
        {
          "method": "org.eclipse.team.internal.ccvs.ui.AnnotateView.selectionChanged",
          "source": "AnnotateView.java:191"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2321"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2273"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2252"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:3411"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2693"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1923"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2966"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:92"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:68"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 1,
      "commentIndex": 5,
      "bugId": "153100",
      "duplicateId": "143270",
      "date": "2006-08-10T19:04:37+02:00",
      "product": "Platform",
      "component": "CVS",
      "severity": "minor"
    }
  ],
  "groupId": "143270",
  "bugId": "153100",
  "duplicateId": "143270",
  "date": "2006-08-08T17:34:41+02:00",
  "product": "Platform",
  "component": "CVS",
  "severity": "minor"
}