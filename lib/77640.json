{
  "comments": [
    "M3 test candidate\n\nGot the following exception after importing core.resources and core.expression\nusing PDE importer with source folder option.\n\n!ENTRY org.eclipse.core.runtime 4 2 2004-11-03 15:37:02.342\n!MESSAGE An internal error occurred during: \"Periodic workspace save.\".\n!STACK 0\njava.lang.IllegalArgumentException: Attempted to beginRule: R/, does not match\nouter scope rule: L/Refactoring/src/p/A.java\n\tat org.eclipse.core.internal.runtime.Assert.isLegal(Assert.java:58)\n\tat org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:106)\n\tat org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:200)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:58)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:183)\n\tat org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:95)\n\tat\norg.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1631)\n\tat org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1309)\n\tat\norg.eclipse.core.internal.resources.DelayedSnapshotJob.run(DelayedSnapshotJob.java:44)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)",
    "It looks like the previous operation never released the rule on\nL/Refactoring/src/p/A.java. The snapshot job just happened to be the next job to\nbe executed in that thread. The culprit will be the job that ran immediately\nprior to snapshot that locked the A.java file. ",
    "*** Bug 77692 has been marked as a duplicate of this bug. ***",
    "As it stands it is impossible to determine the code that is at fault here. I am\ngoing to try to add some assertion checking when jobs complete to ensure all of\ntheir rules are released. That will allow us to narrow down the culprit.",
    "*** Bug 77699 has been marked as a duplicate of this bug. ***",
    "*** Bug 77662 has been marked as a duplicate of this bug. ***",
    "*** Bug 77726 has been marked as a duplicate of this bug. ***",
    "I have released more diagnostic information for the midnight build. If anyone\nsees this again, please attach all nearby entries in the log file.",
    "I200411040010\n\nThis seems to be a different case, I filed a seperate bug 77816 for this.\n\n!ENTRY org.eclipse.core.runtime 4 1 2004-11-04 12:19:20.839\n!MESSAGE Worker thread ended job: Reading saved version of file for quick diff(4\n70), but still holds rule: ThreadJob(Reading saved version of file for quick dif\nf(470),[L/org.eclipse.text/projection/org/eclipse/jface/text2/ISlaveDocumentMana\nger.java,])\n\n!ENTRY org.eclipse.core.runtime 4 1 2004-11-04 12:19:21.610\n!MESSAGE Worker thread ended job: Reading saved version of file for quick diff(4\n73), but still holds rule: ThreadJob(Reading saved version of file for quick dif\nf(470),[L/org.eclipse.text/projection/org/eclipse/jface/text2/ISlaveDocumentMana\nger.java,L/org.eclipse.text/projection/org/eclipse/jface/text2/IRepairableDocume\nnt.java,])\n\n!ENTRY org.eclipse.core.runtime 4 2 2004-11-04 12:19:21.630\n!MESSAGE An internal error occurred during: \"Reading saved version of file for q\nuick diff\".\n!STACK 0\njava.lang.IllegalArgumentException: Attempted to beginRule: L/org.eclipse.text/p\nrojection/org/eclipse/jface/text2/IRepairableDocument.java, does not match outer\n scope rule: L/org.eclipse.text/projection/org/eclipse/jface/text2/ISlaveDocumen\ntManager.java\n        at org.eclipse.core.internal.runtime.Assert.isLegal(Assert.java:58)\n        at org.eclipse.core.internal.jobs.ThreadJob.illegalPush(ThreadJob.java:1\n06)\n        at org.eclipse.core.internal.jobs.ThreadJob.push(ThreadJob.java:200)\n        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:8\n2)\n        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:1\n83)\n        at org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider.l\nockDocument(LastSaveReferenceProvider.java:280)\n        at org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider.r\neadDocument(LastSaveReferenceProvider.java:233)\n        at org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider.a\nccess$0(LastSaveReferenceProvider.java:198)\n        at org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider$R\neadJob.run(LastSaveReferenceProvider.java:108)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n",
    "We fixed bug 77816 for 20041104. The original change that may have caused the\ntrouble went in on Tuesday, 20041102, fitting John\u0027s assession (bug 77662\ncomment 2) that \"It must be due to a recent change since we\u0027ve had four or five\nduplicates today.\". \n\nSo... this might have been the one.",
    "*** Bug 77794 has been marked as a duplicate of this bug. ***",
    "The output in comment #8 shows the diagnostic information that I added for this\nfailure case last night. This matches what I would expect to see in the failure\ncase. I think we\u0027ve found the bug, but I\u0027ll leave this open until we get\nconfirmation that the fix is working.",
    "It looks like bug 77816 was the culprit here. In addition to the diagnostic code\nI already added, I\u0027m going to write some clean-up code to ensure that these\nfailures don\u0027t affect subsequent jobs running in the thread where the problem\noccurs. I didn\u0027t feel comfortable doing this close the milestone, but I will add\nit early in the M4 development period.",
    "Fix released. I now do an \"endRule\" automatically if a job has done a beginRule\nbut it never ended  before the job completed.  It still prints the same\ndiagnostic error message to the log.\n\nThis won\u0027t help code running outside of a job that does beginRule without endRule.\n\nTest cases added to IJobManagerTest."
  ],
  "commentCreationDates": [
    "2004-11-03T15:07:34+01:00",
    "2004-11-03T16:21:55+01:00",
    "2004-11-03T17:08:38+01:00",
    "2004-11-03T17:10:15+01:00",
    "2004-11-03T17:24:11+01:00",
    "2004-11-03T18:10:40+01:00",
    "2004-11-03T19:25:33+01:00",
    "2004-11-04T01:10:30+01:00",
    "2004-11-04T11:44:31+01:00",
    "2004-11-04T12:24:36+01:00",
    "2004-11-04T12:53:11+01:00",
    "2004-11-04T15:07:45+01:00",
    "2004-11-05T17:22:37+01:00",
    "2004-11-05T23:16:03+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: R/, does not match outer scope rule: L/Refactoring/src/p/A.java",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Assert.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:106"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:183"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "WorkManager.java:95"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Workspace.java:1631"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.save",
          "source": "SaveManager.java:1309"
        },
        {
          "method": "org.eclipse.core.internal.resources.DelayedSnapshotJob.run",
          "source": "DelayedSnapshotJob.java:44"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "77640",
      "date": "2004-11-03T15:07:34+01:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: L/org.eclipse.text/p rojection/org/eclipse/jface/text2/IRepairableDocument.java, does not match outer  scope rule: L/org.eclipse.text/projection/org/eclipse/jface/text2/ISlaveDocumen tManager.java",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Assert.java:58"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "ThreadJob.java:1 06"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "ThreadJob.java:200"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "ImplicitJobs.java:8 2"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "JobManager.java:1 83"
        },
        {
          "method": "org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider.lockDocument",
          "source": "LastSaveReferenceProvider.java:280"
        },
        {
          "method": "org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider.readDocument",
          "source": "LastSaveReferenceProvider.java:233"
        },
        {
          "method": "org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider.access$0",
          "source": "LastSaveReferenceProvider.java:198"
        },
        {
          "method": "org.eclipse.ui.internal.editors.quickdiff.LastSaveReferenceProvider$ReadJob.run",
          "source": "LastSaveReferenceProvider.java:108"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 1,
      "commentIndex": 8,
      "bugId": "77640",
      "date": "2004-11-04T11:44:31+01:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    }
  ],
  "groupId": "77640",
  "bugId": "77640",
  "date": "2004-11-03T15:07:34+01:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "normal"
}