{
  "comments": [
    "Build ID: 1015 head\n\nSteps To Reproduce:\n1. After successfully launching director application, remove the configuration directory and move to the location specified by the -configuration argument.\n2. bundles.txt will not be found.\n\n\n\nMore information:\nI successfully created a director application and launched it to provision the sdk using the -data C:\\temp\\workspace -configuration C:\\temp\\workspace\\.config when there was still a configuration directory in the directory application install tree. However when I removed this configuration and depend only on the C:\\temp\\workspace\\.config directory I get an error. bundles.txt and config.ini are located in the .config directory.  It is finding the location of config.ini but it isn\u0027t finding the bundles.txt.\norg.osgi.framework.BundleException: Exception in org.eclipse.equinox.simpleconfigurator.internal.Activator.start() of bundle org.eclipse.equinox.simpleconfigurator.\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:1018)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:974)\n\tat org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:346)\n\tat org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:260)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.startBundle(EclipseStarter.java:1140)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.startBundles(EclipseStarter.java:1133)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.loadBasicBundles(EclipseStarter.java:630)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:303)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:172)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1170)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1145)\nCaused by: java.io.FileNotFoundException: configuration\\org.eclipse.equinox.simpleconfigurator\\bundles.txt (The system cannot find the path specified.)\n\tat java.io.FileInputStream.\u003cinit\u003e(FileInputStream.java:135)\n\tat java.io.FileInputStream.\u003cinit\u003e(FileInputStream.java:95)\n\tat sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:85)\n\tat sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:176)\n\tat java.net.URL.openStream(URL.java:1041)\n\tat org.eclipse.equinox.internal.simpleconfigurator.utils.SimpleConfiguratorUtils.readConfiguration(SimpleConfiguratorUtils.java:131)\n\tat org.eclipse.equinox.simpleconfigurator.internal.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:75)\n\tat org.eclipse.equinox.simpleconfigurator.internal.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:96)\n\tat org.eclipse.equinox.simpleconfigurator.internal.Activator.start(Activator.java:47)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:999)\n\tat java.security.AccessController.doPrivileged(AccessController.java:242)\n\tat org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:993)\n\t... 16 more\nRoot exception:\njava.io.FileNotFoundException: configuration\\org.eclipse.equinox.simpleconfigurator\\bundles.txt (The system cannot find the path specified.)\n\n  \n\nLaunch command\n.\\eclipse.exe -debug -data c:\\temp\\workspace -configuration c:\\temp\\workspace\\.config -console -consolelog -noExit -vm C:/java50sr4/jre/bin/java.exe -application org.eclipse.equinox.p2.director.app.application -metadataRepository file:c:/tmp/equinox.p2/servers/metadataRepository/ -artifactRepository file:c:/tmp/equinox.p2/servers/artifactRepository/ -installIU sdk -destination c:/tmp/equinox.p2.bat/eclipseApp -flavor tooling -profile foo -vmargs -Declipse.p2.data.area\u003dc:/tmp/equinox.p2.bat/agentData",
    "When I tried to test the relative paths in bundles.txt, I could successfully do it when I added the -bp \"\u003cdestination\u003e\" argument. It is placed bundles.txt in the eclipseApp/configuration/org.eclipse.equinox.simpleconfigurator directory as expected and it is relative. However if I add the \"-configuration c:/tmp/workspace/.config -data c:/tmp/workspace\" arguments bundles.txt is still placed in the eclipseApp/configuration/org.eclipse.equinox.simpleconfigurator directory. config.ini is also placed in eclipseApp/configuration. All other configuration data flows the configuration location.\n\nThis is a problem. In the case of a multiuser scenario we need to be able to configure this file for each user. bundles.txt stored in the eclipseApp tree is of limited use even if nested. Loading all of the bundles specified in this file may not be what each user config requires or wants. While it may be useful to share this file it should only be an option. The location for platform.xml in the current eclipse does not behave this way.",
    "I\u0027m wondering if there is not a confusion around the meaning of -configuration.\n-configuration does *not* control the path of the configuration folder of the provisioned application. -configuration is a runtime option read by OSGi (see http://help.eclipse.org/help33/index.jsp?topic\u003d/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)\n\nThe parameter controlling the place where p2 will write the configuration folder of the provisioned application is set by -destination.",
    "I will try the -destination. Does that get us back to the full paths again?\n\nAre the arguments that can be used documented anywhere? I can try to distill it from the code or we can ping back and forth in bugs and notes but that seems inefficient.\n\nDoesn\u0027t -destination control more than where the p2 configuration data is written? It seems to control where eclipse.exe, etc. is written also.\n\nHere is what I am trying to do. In one area\n\u003cinstall dir\u003e/eclipse.exe\n\u003cinstall dir\u003e/other files {eclipse.ini,..]\n\u003cinstall dir./plugins/...\n\n\nSomewhere else\n\u003cworkspace dir\u003e/whatever\n\u003cworkspace dir\u003e/\u003cconfiguration dir\u003e/all the normal configuration stuff\n                          stuff written by osgi\n                          stuff written by p2\n\nIn the current eclipse, update and configurator honored the OSGi osgi.configuration.area property.",
    "-destination controls the folder where the launch point will be located. As you mentioned this folder is used as the root to store eclipse.exe, eclipse.ini, config.ini and the bundles.txt.\n\nThere is currently no argument to control the location of the configuration folder and it may be needed.\n\n-bp controls the location of bundle pool.\n\nThere is no document about the parameters supported by the director app. However they are all pretty clearly called out in the Application class of o.e.e.p2.director.app. Would you mind putting the description of the arguments on the wiki. This would likely be useful to more than one person.\n\nCould you detail the setup you are trying to create?",
    "The bug keeping track of separating the configuration folder from the install location at provisioning time is #185826.",
    "I will post in new bug also. There are 2 testcases that need to be supported. I was zeroed on in just one specific one and was not clear as to why. We will have to support both cases.\n\ncase 1: This is the one I was checking. Each client contains its own provisioning director and it is upgrading its own configuration.\n\ncase 2: Provisioning resides separate from any products and has its own configuration. It is used to update these other products and in that case we need a second argument so the product configuration can be updated.\n\nIn order to be similar to the current behavior I believe that if only a \n\"-configuration  $location\" argument is specified then the second argument should default to the same $location. I am not saying that this is a requirement but it is my recommendation.\n\nI can start the documentation but I am sure you will need to edit. Likely what I will do is incrementally write it as I am checking out director app."
  ],
  "commentCreationDates": [
    "2007-10-17T00:14:43+02:00",
    "2007-10-18T00:22:59+02:00",
    "2007-10-18T16:07:47+02:00",
    "2007-10-18T16:54:27+02:00",
    "2007-10-18T18:53:38+02:00",
    "2007-10-18T20:34:10+02:00",
    "2007-10-18T22:59:30+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Exception in org.eclipse.equinox.simpleconfigurator.internal.Activator.start() of bundle org.eclipse.equinox.simpleconfigurator.",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
          "source": "BundleContextImpl.java:1018"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.start",
          "source": "BundleContextImpl.java:974"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleHost.startWorker",
          "source": "BundleHost.java:346"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "AbstractBundle.java:260"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.startBundle",
          "source": "EclipseStarter.java:1140"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.startBundles",
          "source": "EclipseStarter.java:1133"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.loadBasicBundles",
          "source": "EclipseStarter.java:630"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.startup",
          "source": "EclipseStarter.java:303"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:172"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1170"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1145"
        }
      ],
      "causedBy": {
        "exceptionType": "java.io.FileNotFoundException",
        "message": "configuration\\org.eclipse.equinox.simpleconfigurator\\bundles.txt (The system cannot find the path specified.)",
        "elements": [
          {
            "method": "java.io.FileInputStream.\u003cinit\u003e",
            "source": "FileInputStream.java:135"
          },
          {
            "method": "java.io.FileInputStream.\u003cinit\u003e",
            "source": "FileInputStream.java:95"
          },
          {
            "method": "sun.net.www.protocol.file.FileURLConnection.connect",
            "source": "FileURLConnection.java:85"
          },
          {
            "method": "sun.net.www.protocol.file.FileURLConnection.getInputStream",
            "source": "FileURLConnection.java:176"
          },
          {
            "method": "java.net.URL.openStream",
            "source": "URL.java:1041"
          },
          {
            "method": "org.eclipse.equinox.internal.simpleconfigurator.utils.SimpleConfiguratorUtils.readConfiguration",
            "source": "SimpleConfiguratorUtils.java:131"
          },
          {
            "method": "org.eclipse.equinox.simpleconfigurator.internal.SimpleConfiguratorImpl.applyConfiguration",
            "source": "SimpleConfiguratorImpl.java:75"
          },
          {
            "method": "org.eclipse.equinox.simpleconfigurator.internal.SimpleConfiguratorImpl.applyConfiguration",
            "source": "SimpleConfiguratorImpl.java:96"
          },
          {
            "method": "org.eclipse.equinox.simpleconfigurator.internal.Activator.start",
            "source": "Activator.java:47"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run",
            "source": "BundleContextImpl.java:999"
          },
          {
            "method": "java.security.AccessController.doPrivileged",
            "source": "AccessController.java:242"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator",
            "source": "BundleContextImpl.java:993"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "206545",
      "date": "2007-10-17T00:14:43+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "normal"
    }
  ],
  "groupId": "206545",
  "bugId": "206545",
  "date": "2007-10-17T00:14:43+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "normal"
}