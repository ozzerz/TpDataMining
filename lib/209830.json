{
  "comments": [
    "Build id: I20070621-1340\n\nGREEN WARNING: A critical error has occurred. You should copy this message along with the stack trace below and send it to the contact address provided with this software.\njava.lang.NullPointerException\n        at org.eclipse.draw2d.DeferredUpdateManager.sendUpdateRequest(DeferredUpdateManager.java:239)\n        at org.eclipse.draw2d.DeferredUpdateManager.queueWork(DeferredUpdateManager.java:229)\n        at org.eclipse.draw2d.DeferredUpdateManager.addInvalidFigure(DeferredUpdateManager.java:124)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1349)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.PolylineConnection.revalidate(PolylineConnection.java:215)\n        at org.eclipse.draw2d.Figure.revalidate(Figure.java:1351)\n        at org.eclipse.draw2d.Label.setText(Label.java:609)\n        at edu.buffalo.cse.green.editor.controller.RelationshipPart.updateCardinalityLabel(RelationshipPart.java:371)\n        at edu.buffalo.cse.green.editor.controller.RelationshipPart.access$0(RelationshipPart.java:363)\n        at edu.buffalo.cse.green.editor.controller.RelationshipPart$RelationshipCardinalityHandler.notify(RelationshipPart.java:488)\n        at edu.buffalo.cse.green.editor.model.AbstractModel.firePropertyChange(AbstractModel.java:269)\n        at edu.buffalo.cse.green.editor.model.RelationshipModel.updateCardinality(RelationshipModel.java:540)\n        at edu.buffalo.cse.green.editor.DiagramEditor.refreshRelationships(DiagramEditor.java:1396)\n        at edu.buffalo.cse.green.editor.DiagramEditor.forceRefreshRelationships(DiagramEditor.java:1333)\n        at edu.buffalo.cse.green.JavaModelListener.elementChanged(JavaModelListener.java:158)\n        at org.eclipse.jdt.internal.core.DeltaProcessor$3.run(DeltaProcessor.java:1552)\n        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n        at org.eclipse.jdt.internal.core.DeltaProcessor.notifyListeners(DeltaProcessor.java:1542)\n        at org.eclipse.jdt.internal.core.DeltaProcessor.fireReconcileDelta(DeltaProcessor.java:1395)\n        at org.eclipse.jdt.internal.core.DeltaProcessor.fire(DeltaProcessor.java:1350)\n        at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:761)\n        at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:780)\n        at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1169)\n        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:101)\n        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)\n        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:82)\n        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:149)\n        at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)\n        at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:96)\n        at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:75)\n        at org.eclipse.jdt.internal.ui.text.JavaReconciler.process(JavaReconciler.java:378)\n        at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:204)",
    "The NPE is in Display.getCurrent().asyncExec(new UpdateRequest());\n\nAlmost definitely the Display.getCurrent() in null as you are trying to run on a non UI thread.\n\nYou need to fix your notification listener to run the UI updates on the UI thread.\n\nIn theory we could add some protection code so that the NPE is not thrown.",
    "Making changes outside the UI thread can cause several problems.  This is a good way to bring to the client\u0027s attention that they\u0027re doing something unintended.",
    "(In reply to comment #2)\n\u003e Making changes outside the UI thread can cause several problems.  This is a\n\u003e good way to bring to the client\u0027s attention that they\u0027re doing something\n\u003e unintended.\n\u003e \n\nGee ... wouldn\u0027t an \"invalid thread access\" exception be better? :) \n",
    "Yeah, you\u0027re right, that would be better.  At least that will stop clients from opening such invalid defects.",
    "We should fix to throw an \"invalid thread access\" exception when this issue occurs.",
    "Created an attachment (id\u003d84150)\nPatch trhowing SWTException\n\n",
    "Hi all,\n\nPlease Find attached a patch throwing an SWTException with the\nINVALID_THREAD_ACCESS code when trying to get the current display from a non UI\nthread.\n\nI am not sure this the good exception to throw ... maybe we have to create a\nnew \"Exception\" or use an existing draw2d\u0027s one ... ???\n\nManuel"
  ],
  "commentCreationDates": [
    "2007-11-14T16:18:56+01:00",
    "2007-11-14T17:59:23+01:00",
    "2007-11-14T19:41:56+01:00",
    "2007-11-14T21:01:04+01:00",
    "2007-11-16T06:18:42+01:00",
    "2007-11-16T14:55:23+01:00",
    "2007-11-30T09:59:16+01:00",
    "2007-11-30T10:00:23+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.draw2d.DeferredUpdateManager.sendUpdateRequest",
          "source": "DeferredUpdateManager.java:239"
        },
        {
          "method": "org.eclipse.draw2d.DeferredUpdateManager.queueWork",
          "source": "DeferredUpdateManager.java:229"
        },
        {
          "method": "org.eclipse.draw2d.DeferredUpdateManager.addInvalidFigure",
          "source": "DeferredUpdateManager.java:124"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1349"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.PolylineConnection.revalidate",
          "source": "PolylineConnection.java:215"
        },
        {
          "method": "org.eclipse.draw2d.Figure.revalidate",
          "source": "Figure.java:1351"
        },
        {
          "method": "org.eclipse.draw2d.Label.setText",
          "source": "Label.java:609"
        },
        {
          "method": "edu.buffalo.cse.green.editor.controller.RelationshipPart.updateCardinalityLabel",
          "source": "RelationshipPart.java:371"
        },
        {
          "method": "edu.buffalo.cse.green.editor.controller.RelationshipPart.access$0",
          "source": "RelationshipPart.java:363"
        },
        {
          "method": "edu.buffalo.cse.green.editor.controller.RelationshipPart$RelationshipCardinalityHandler.notify",
          "source": "RelationshipPart.java:488"
        },
        {
          "method": "edu.buffalo.cse.green.editor.model.AbstractModel.firePropertyChange",
          "source": "AbstractModel.java:269"
        },
        {
          "method": "edu.buffalo.cse.green.editor.model.RelationshipModel.updateCardinality",
          "source": "RelationshipModel.java:540"
        },
        {
          "method": "edu.buffalo.cse.green.editor.DiagramEditor.refreshRelationships",
          "source": "DiagramEditor.java:1396"
        },
        {
          "method": "edu.buffalo.cse.green.editor.DiagramEditor.forceRefreshRelationships",
          "source": "DiagramEditor.java:1333"
        },
        {
          "method": "edu.buffalo.cse.green.JavaModelListener.elementChanged",
          "source": "JavaModelListener.java:158"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor$3.run",
          "source": "DeltaProcessor.java:1552"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor.notifyListeners",
          "source": "DeltaProcessor.java:1542"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor.fireReconcileDelta",
          "source": "DeltaProcessor.java:1395"
        },
        {
          "method": "org.eclipse.jdt.internal.core.DeltaProcessor.fire",
          "source": "DeltaProcessor.java:1350"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.run",
          "source": "JavaModelOperation.java:761"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelOperation.runOperation",
          "source": "JavaModelOperation.java:780"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.reconcile",
          "source": "CompilationUnit.java:1169"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run",
          "source": "JavaReconcilingStrategy.java:101"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:82"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile",
          "source": "JavaReconcilingStrategy.java:149"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile",
          "source": "CompositeReconcilingStrategy.java:86"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile",
          "source": "JavaCompositeReconcilingStrategy.java:96"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.MonoReconciler.process",
          "source": "MonoReconciler.java:75"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.text.JavaReconciler.process",
          "source": "JavaReconciler.java:378"
        },
        {
          "method": "org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run",
          "source": "AbstractReconciler.java:204"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "209830",
      "date": "2007-11-14T16:18:56+01:00",
      "product": "GEF",
      "component": "draw2d",
      "severity": "normal"
    }
  ],
  "groupId": "209830",
  "bugId": "209830",
  "date": "2007-11-14T16:18:56+01:00",
  "product": "GEF",
  "component": "draw2d",
  "severity": "normal"
}