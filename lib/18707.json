{
  "comments": [
    "I did Check Out As... of eclipse plugin org.eclipse.jdt.launching.j9, and \naccepted \"Copy of org.eclipse.jdt.launching.j9\" as name, and got the following \nNPE:\n\n!ENTRY org.eclipse.team.ui 4 1 Jun 03, 2002 15:55:56.415\n!MESSAGE Internal error occured.\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.core.internal.watson.ElementTree.findOldest\n(ElementTree.java:430)\n\tat org.eclipse.core.internal.resources.SaveManager.sortTrees\n(SaveManager.java:914)\n\tat org.eclipse.core.internal.resources.SaveManager.collapseTrees\n(SaveManager.java:198)\n\tat org.eclipse.core.internal.resources.SaveManager.save\n(SaveManager.java:1174)\n\tat org.eclipse.core.internal.resources.SaveManager.snapshotIfNeeded\n(SaveManager.java:829)\n\tat org.eclipse.core.internal.resources.Workspace.endOperation\n(Workspace.java:745)\n\tat org.eclipse.core.internal.resources.Workspace.run\n(Workspace.java:1366)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run\n(WorkspaceModifyOperation.java:78)\n\tat org.eclipse.jface.operation.ModalContext$ModalContextThread.run\n(ModalContext.java:98)",
    "I believe its not us - we are simply the ones triggering the snapshot after the \noperation.  The failure appears in core.",
    "Aldo, which build were you using?",
    "Was it reproducible?  What side-effects (if any) did the error have?",
    "I know what the problem is, and I have a recommended fix.  Certain situations \ncan cause a builder to have a null last built state. E.g., if the builder\u0027s \nnature is disabled or missing, or if someone called \nIncrementalProjectBuilder.forgetLastBuiltState().  We handle this case on save, \nbut we don\u0027t handle it correctly in the snapshot code.  I will attach a \nrecommended fix in the method \nBuildManager#createBuildersPersistentInfo(IProject).\n",
    "Created an attachment (id\u003d1191)\nNew method with recommended fix\n",
    "Now I understand why this is appearing now.  The fix for bug 17478 made us much \nmore vulnerable to this possibility.  Here are reproducible steps to recreate \nthe bug:\n\n1) Create a new simple project\n2) Add an \"External Tool Builder\" from the project properties page\n3) Create another simple project (this just triggers the snapshot)\n\nInternal error occurs.  I\u0027m surprised this didn\u0027t come out during sniff \ntesting or while verifying the fix for bug 17478.\n\nAfter applying my recommended fix the problem no longer occurs.",
    "Fixed released."
  ],
  "commentCreationDates": [
    "2002-06-03T15:48:36+02:00",
    "2002-06-03T18:39:21+02:00",
    "2002-06-03T20:03:00+02:00",
    "2002-06-03T20:09:48+02:00",
    "2002-06-03T20:24:36+02:00",
    "2002-06-03T20:26:33+02:00",
    "2002-06-03T20:39:17+02:00",
    "2002-06-07T15:24:52+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.core.internal.watson.ElementTree.findOldest",
          "source": "ElementTree.java:430"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.sortTrees",
          "source": "SaveManager.java:914"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.collapseTrees",
          "source": "SaveManager.java:198"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.save",
          "source": "SaveManager.java:1174"
        },
        {
          "method": "org.eclipse.core.internal.resources.SaveManager.snapshotIfNeeded",
          "source": "SaveManager.java:829"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.endOperation",
          "source": "Workspace.java:745"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1366"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "WorkspaceModifyOperation.java:78"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.java:98"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "18707",
      "date": "2002-06-03T15:48:36+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "critical"
    }
  ],
  "groupId": "18707",
  "bugId": "18707",
  "date": "2002-06-03T15:48:36+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "critical"
}