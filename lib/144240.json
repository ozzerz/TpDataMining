{
  "comments": [
    "My Plug-in Unit tests never run when run straight from the build. They do run if I modify (touch) the MANIFEST.MF file of the test plug-in however. \n\nI am using the PDE Build system to build my product. After the build I use Ant to copy my plugins into the Eclipse Testing Framework (ETF) distribution. Then I run the runtests.bat file in the ETF. I have added a target for my tests into the test.xml file in the ETF. \n\nHere is the output when I run the tests straight from the build:\n\neclipse-test:\n     [echo] Running com.pilz.sample.mail.test.AllTests\n     [java] !SESSION 2006-05-29 15:24:20.984 -----------------------------------\n------------\n     [java] eclipse.buildId\u003dunknown\n     [java] java.version\u003d1.5.0_06\n     [java] java.vendor\u003dSun Microsystems Inc.\n     [java] BootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_IE\n     [java] Framework arguments:  -application org.eclipse.test.coretestapplicat\nion formatter\u003dorg.apache.tools.ant.taskdefs.optional.junit.XMLJUnitResultFormatt\ner,com.pilz.sample.mail.test.AllTests.xml -testPluginName com.pilz.sample.mail.t\nest -className com.pilz.sample.mail.test.AllTests\n     [java] Command-line arguments:  -application org.eclipse.test.coretestappli\ncation -dev bin -data C:\\sample-testing/test-eclipse/eclipse/eclipse_text_folder\n formatter\u003dorg.apache.tools.ant.taskdefs.optional.junit.XMLJUnitResultFormatter,\ncom.pilz.sample.mail.test.AllTests.xml -testPluginName com.pilz.sample.mail.test\n -className com.pilz.sample.mail.test.AllTests -os win32 -ws win32 -arch x86 -co\nnsolelog\n\n     [java] !ENTRY org.eclipse.update.configurator 2006-05-29 15:24:28.500\n     [java] !MESSAGE Could not install bundle plugins/com.pilz.sample.mail.test_\n1.0.0.jar   Bundle \"com.pilz.sample.mail.test\" version \"1.0.0\" has already been\ninstalled from: update@plugins/com.pilz.sample.mail.test_1.0.0/\n\n     [java] !ENTRY org.eclipse.osgi 2 0 2006-05-29 15:24:30.046\n     [java] !MESSAGE The following is a complete list of bundles which are not r\nesolved, see the prior log entry for the root cause if it exists:\n     [java] !SUBENTRY 1 org.eclipse.osgi 2 0 2006-05-29 15:24:30.046\n     [java] !MESSAGE Bundle update@plugins/org.eclipse.ant.optional.junit_2.1.0/\n [18] was not resolved.\n     [java] !SUBENTRY 2 org.eclipse.ant.optional.junit 2 0 2006-05-29 15:24:30.0\n62\n     [java] !MESSAGE Constraints from the fragment conflict with the host: Requi\nre-Bundle: org.junit; bundle-version\u003d\"0.0.0\"\n     [java] !SUBENTRY 2 org.eclipse.ant.optional.junit 2 0 2006-05-29 15:24:30.0\n62\n     [java] !MESSAGE Missing Constraint: Fragment-Host: org.apache.ant; bundle-v\nersion\u003d\"[1.4.1,2.0.0)\"\n\n     [java] !ENTRY org.eclipse.osgi 4 0 2006-05-29 15:24:30.500\n     [java] !MESSAGE Application error\n     [java] !STACK 1\n     [java] java.lang.NoClassDefFoundError: junit/framework/TestListener\n     [java]     at java.lang.ClassLoader.defineClass1(Native Method)\n     [java]     at java.lang.ClassLoader.defineClass(Unknown Source)\n     [java]     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defi\nneClass(DefaultClassLoader.java:160)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineCl\nass(ClasspathManager.java:491)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClas\nsImpl(ClasspathManager.java:461)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLoca\nlClassImpl(ClasspathManager.java:420)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLoca\nlClass(ClasspathManager.java:403)\n     [java]     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.find\nLocalClass(DefaultClassLoader.java:188)\n     [java]     at org.eclipse.osgi.framework.internal.core.BundleLoader.findLoc\nalClass(BundleLoader.java:338)\n     [java]     at org.eclipse.osgi.framework.internal.core.BundleLoader.findCla\nss(BundleLoader.java:390)\n     [java]     at org.eclipse.osgi.framework.internal.core.BundleLoader.findCla\nss(BundleLoader.java:351)\n     [java]     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.load\nClass(DefaultClassLoader.java:83)\n     [java]     at java.lang.ClassLoader.loadClass(Unknown Source)\n     [java]     at java.lang.ClassLoader.loadClassInternal(Unknown Source)\n     [java]     at java.lang.ClassLoader.defineClass1(Native Method)\n     [java]     at java.lang.ClassLoader.defineClass(Unknown Source)\n     [java]     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defi\nneClass(DefaultClassLoader.java:160)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineCl\nass(ClasspathManager.java:491)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClas\nsImpl(ClasspathManager.java:461)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLoca\nlClassImpl(ClasspathManager.java:420)\n     [java]     at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLoca\nlClass(ClasspathManager.java:403)\n     [java]     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.find\nLocalClass(DefaultClassLoader.java:188)\n     [java]     at org.eclipse.osgi.framework.internal.core.BundleLoader.findLoc\nalClass(BundleLoader.java:338)\n     [java]     at org.eclipse.osgi.framework.internal.core.SingleSourcePackage.\nloadClass(SingleSourcePackage.java:37)\n     [java]     at org.eclipse.osgi.framework.internal.core.BundleLoader.findCla\nss(BundleLoader.java:387)\n     [java]     at org.eclipse.osgi.framework.internal.core.BundleLoader.findCla\nss(BundleLoader.java:351)\n     [java]     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.load\nClass(DefaultClassLoader.java:83)\n     [java]     at java.lang.ClassLoader.loadClass(Unknown Source)\n     [java]     at org.eclipse.test.EclipseTestRunner.createFormatter(EclipseTes\ntRunner.java:448)\n     [java]     at org.eclipse.test.EclipseTestRunner.createAndStoreFormatter(Ec\nlipseTestRunner.java:428)\n     [java]     at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java\n:174)\n     [java]     at org.eclipse.test.CoreTestApplication.runTests(CoreTestApplica\ntion.java:35)\n     [java]     at org.eclipse.test.CoreTestApplication.run(CoreTestApplication.\njava:31)\n     [java]     at org.eclipse.core.internal.runtime.PlatformActivator$1.run(Pla\ntformActivator.java:78)\n     [java]     at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.\nrunApplication(EclipseAppLauncher.java:92)\n     [java]     at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.\nstart(EclipseAppLauncher.java:68)\n     [java]     at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseSt\narter.java:376)\n     [java]     at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseSt\narter.java:169)\n     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Sourc\ne)\n     [java]     at java.lang.reflect.Method.invoke(Unknown Source)\n     [java]     at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\n     [java]     at org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n     [java]     at org.eclipse.core.launcher.Main.run(Main.java:977)\n     [java]     at org.eclipse.core.launcher.Main.main(Main.java:952)\n\n     [java] !ENTRY org.eclipse.osgi 2 0 2006-05-29 15:24:30.531\n     [java] !MESSAGE The following is a complete list of bundles which are not r\nesolved, see the prior log entry for the root cause if it exists:\n     [java] !SUBENTRY 1 org.eclipse.osgi 2 0 2006-05-29 15:24:30.531\n     [java] !MESSAGE Bundle update@plugins/org.eclipse.ant.optional.junit_2.1.0/\n [18] was not resolved.\n     [java] !SUBENTRY 2 org.eclipse.ant.optional.junit 2 0 2006-05-29 15:24:30.5\n31\n     [java] !MESSAGE Constraints from the fragment conflict with the host: Requi\nre-Bundle: org.junit; bundle-version\u003d\"0.0.0\"\n     [java] !SUBENTRY 2 org.eclipse.ant.optional.junit 2 0 2006-05-29 15:24:30.6\n25\n     [java] !MESSAGE Missing Constraint: Fragment-Host: org.apache.ant; bundle-v\nersion\u003d\"[1.4.1,2.0.0)\"\n     [java] Java Result: 13\n\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nI have found that if I modify the MANIFEST.MF file of my test plug-in in any way , (add a space, delete the space and then save) the my plugins then run:\n\neclipse-test:\n     [echo] Running com.pilz.sample.mail.test.AllTests\n     [java] !SESSION 2006-05-29 15:26:01.921 -----------------------------------\n------------\n     [java] eclipse.buildId\u003dunknown\n     [java] java.version\u003d1.5.0_06\n     [java] java.vendor\u003dSun Microsystems Inc.\n     [java] BootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_IE\n     [java] Framework arguments:  -application org.eclipse.test.coretestapplicat\nion formatter\u003dorg.apache.tools.ant.taskdefs.optional.junit.XMLJUnitResultFormatt\ner,com.pilz.sample.mail.test.AllTests.xml -testPluginName com.pilz.sample.mail.t\nest -className com.pilz.sample.mail.test.AllTests\n     [java] Command-line arguments:  -application org.eclipse.test.coretestappli\ncation -dev bin -data C:\\sample-testing/test-eclipse/eclipse/eclipse_text_folder\n formatter\u003dorg.apache.tools.ant.taskdefs.optional.junit.XMLJUnitResultFormatter,\ncom.pilz.sample.mail.test.AllTests.xml -testPluginName com.pilz.sample.mail.test\n -className com.pilz.sample.mail.test.AllTests -os win32 -ws win32 -arch x86 -co\nnsolelog\n\n     [java] setUp()\n     [java] tearDown()\n     [java] setUp()\n     [java] tearDown()\n     [java] setUp()\n     [java] tearDown()\n     [java] Ran!\n     [java] Java Result: 1\n\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nThe tests run just fine from Eclipse when run as Plug-in Unit Tests.",
    "Created an attachment (id\u003d42863)\nSample Test Plugin\n\nAttached is the sample plug-in unit test file that is run. ",
    "Moving to PDE for comment."
  ],
  "commentCreationDates": [
    "2006-05-29T16:42:22+02:00",
    "2006-05-29T16:43:42+02:00",
    "2006-05-29T16:50:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoClassDefFoundError",
      "message": "junit/framework/TestListener      [java]",
      "elements": [
        {
          "method": "java.lang.ClassLoader.defineClass1",
          "source": "Native Method"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "144240",
      "date": "2006-05-29T16:42:22+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "144240",
  "bugId": "144240",
  "date": "2006-05-29T16:42:22+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}