{
  "comments": [
    "When starting the OSGi framework in a directory that has a space in its name (like anything under C:\\Documents and Settings on Windows), the framework dies with the NPE below.\n\nThe root cause appears to be that in SystemBundleData.getOsgiBase(), Equinox is getting a URL for the name of the JAR where it came from. Since there were spaces in the file name, these were translated into \"%20\" in the URL. It then passes it to the \"File\" constructor, which dutifully creates a file name with \"%20\"s instead of spaces, but that file doesn\u0027t exist. This results in an NPE later on.\n\nThe fix appears to be to call java.net.URLDecoder.decode() before creating the File, which will restore the spaces.\n\nHowever, the code appears to have changed a lot in 3.2 and I don\u0027t know where this fix would go.\n\nA workaround is to always set \"-Dosgi.framework\" to the location of the equinox JAR file when running the framework.\n\nHere\u0027s the NPE:\n\nException in thread \"main\" java.lang.NullPointerException\n        at org.eclipse.osgi.framework.adaptor.core.AbstractBundleData.getEntry(AbstractBundleData.java:163)\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getEntry(AbstractBundle.java:1284)\n        at org.eclipse.osgi.framework.internal.core.Framework.findVMProfile(Framework.java:415)\n        at org.eclipse.osgi.framework.internal.core.Framework.loadVMProfile(Framework.java:367)\n        at org.eclipse.osgi.framework.internal.core.Framework.initialize(Framework.java:181)\n        at org.eclipse.osgi.framework.internal.core.Framework.\u003cinit\u003e(Framework.java:106)\n        at org.eclipse.osgi.framework.internal.core.OSGi.createFramework(OSGi.java:90)\n        at org.eclipse.osgi.framework.internal.core.OSGi.\u003cinit\u003e(OSGi.java:31)",
    "This kind of bug has been mentioned before and I thought we fixed it in December (during ApacheCon).  The challenge was that some startup sequences were passing in encoded URLs while others were passing in unencoded URLs.  I suspect that you are not using startup.jar correct?\n\nIn any event, we should be robust with how we use/generate URLs inside the EclipseStarter API boundary.",
    "Notice this was opened against 3.1.1.  Please try 3.1.2 or the upcoming 3.1 M5 build.",
    "I tried this with a download of 3.2M2 and I got the same exception. If I get a chance to build a different release, I\u0027ll update this.\n",
    "Greg, have you had a chance to try this on 3.2 M6?",
    "This works for me now, on a recent 3.2 drop. I\u0027ll come back and update this when I have the exact number.\n"
  ],
  "commentCreationDates": [
    "2006-02-09T22:51:18+01:00",
    "2006-02-11T17:29:40+01:00",
    "2006-02-12T01:38:31+01:00",
    "2006-02-13T22:57:36+01:00",
    "2006-04-09T23:39:01+02:00",
    "2006-04-10T19:43:13+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractBundleData.getEntry",
          "source": "AbstractBundleData.java:163"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.getEntry",
          "source": "AbstractBundle.java:1284"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.findVMProfile",
          "source": "Framework.java:415"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.loadVMProfile",
          "source": "Framework.java:367"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.initialize",
          "source": "Framework.java:181"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.\u003cinit\u003e",
          "source": "Framework.java:106"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.createFramework",
          "source": "OSGi.java:90"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.OSGi.\u003cinit\u003e",
          "source": "OSGi.java:31"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "127187",
      "date": "2006-02-09T22:51:18+01:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "major"
    }
  ],
  "groupId": "127187",
  "bugId": "127187",
  "date": "2006-02-09T22:51:18+01:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "major"
}