{
  "comments": [
    "I20030304\n\nI get the following NPE when debugging using the latest integration build. It \nmostly happens when clicking on an entry in the vaiable view. This is really \nannoying since you have to shutdown eclipse when it happens.\n\njava.lang.NullPointerException\n\tat org.eclipse.jface.viewers.TreeViewer.getExpanded\n(TreeViewer.java:127)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalCollectExpanded\n(AbstractTreeViewer.java:764)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.getExpandedElements\n(AbstractTreeViewer.java:527)\n\tat org.eclipse.debug.internal.ui.views.ViewerState.saveState\n(ViewerState.java:38)\n\tat org.eclipse.debug.internal.ui.views.ViewerState.\u003cinit\u003e\n(ViewerState.java:28)\n\tat \norg.eclipse.debug.internal.ui.views.variables.VariablesView.setViewerInput\n(VariablesView.java:350)\n\tat \norg.eclipse.debug.internal.ui.views.variables.VariablesView.selectionChanged\n(VariablesView.java:1090)\n\tat org.eclipse.ui.internal.AbstractPartSelectionTracker$1.run\n(AbstractPartSelectionTracker.java:105)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:867)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.ui.internal.AbstractPartSelectionTracker.fireSelection\n(AbstractPartSelectionTracker.java:103)\n\tat org.eclipse.ui.internal.PagePartSelectionTracker$1.selectionChanged\n(PagePartSelectionTracker.java:32)\n\tat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:153)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:867)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:413)\n\tat org.eclipse.jface.viewers.Viewer.fireSelectionChanged\n(Viewer.java:151)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateSelection\n(StructuredViewer.java:1287)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleSelect\n(StructuredViewer.java:654)\n\tat org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected\n(StructuredViewer.java:678)\n\tat org.eclipse.jface.util.OpenStrategy.fireSelectionEvent\n(OpenStrategy.java:172)\n\tat org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:167)\n\tat org.eclipse.jface.util.OpenStrategy$1.handleEvent\n(OpenStrategy.java:302)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:77)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:836)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1775)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1483)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1268)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:1251)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:845)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:247)\n\tat org.eclipse.core.launcher.Main.run(Main.java:703)\n\tat org.eclipse.core.launcher.Main.main(Main.java:539)",
    "I don\u0027t see how this can happen, since \nAbstractTreeViewer.internalCollectExpanded just iterates over the items \nobtained from SWT, passing some of them to getExpanded.\nUnless Tree.getItems() gets a null in it.\n\nI\u0027m wondering if it\u0027s a JIT bug.  We\u0027ve seen one recently on IBM 1.3.1 SR2, \nwhich was causing an NPE in the Tasks view (this happened in SR1 as well, but \napparently more frequently in SR2).  Which VM are you using, and have you \nrecently changed?\n",
    "Actually, the presence of line numbers in the stack trace suggests it\u0027s not a \nJIT problem.\n\nChristophe, do you think this could be caused by bug 32734?  I guess not since \nthe stacks appear different, and 32734 was fixed for I20030304.\n\nDirk, a reproduceable case here would really help.\n",
    "The VM I am using\n\njava version \"1.4.1_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.1_01-b01)\nJava HotSpot(TM) Client VM (build 1.4.1_01-b01, mixed mode)",
    "Not a duplicate of bug 32734 - which causes a NPE inside SWT\nIt would be really interesting to have a reproduceable case and verify \nTree.getItems return a null element.\n",
    "This could be a variant of bug 4434. Bug 4434 causes an internal call to SWT \nTree.getItems to return an array with a null item.\n",
    "Veronika mentioned that SWT has fixed a similar problem in the variables view.\nThis was in the variables view too.",
    "Fixed.  Not in time for RC2.",
    "Fix available in version \u003e v20030307\nWe have released a fix for a similar problem (bug 4434). It should also fix this \nproblem.\n\nDirk, please reopen if you can reproduce with version \u003e v20030307.\n"
  ],
  "commentCreationDates": [
    "2003-03-05T14:26:48+01:00",
    "2003-03-06T02:55:14+01:00",
    "2003-03-06T03:13:49+01:00",
    "2003-03-06T08:57:41+01:00",
    "2003-03-07T14:53:13+01:00",
    "2003-03-07T15:04:33+01:00",
    "2003-03-07T15:18:46+01:00",
    "2003-03-07T18:32:00+01:00",
    "2003-03-07T20:37:17+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.getExpanded",
          "source": "TreeViewer.java:127"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalCollectExpanded",
          "source": "AbstractTreeViewer.java:764"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.getExpandedElements",
          "source": "AbstractTreeViewer.java:527"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.ViewerState.saveState",
          "source": "ViewerState.java:38"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.ViewerState.\u003cinit\u003e",
          "source": "ViewerState.java:28"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.VariablesView.setViewerInput",
          "source": "VariablesView.java:350"
        },
        {
          "method": "org.eclipse.debug.internal.ui.views.variables.VariablesView.selectionChanged",
          "source": "VariablesView.java:1090"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractPartSelectionTracker$1.run",
          "source": "AbstractPartSelectionTracker.java:105"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:867"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractPartSelectionTracker.fireSelection",
          "source": "AbstractPartSelectionTracker.java:103"
        },
        {
          "method": "org.eclipse.ui.internal.PagePartSelectionTracker$1.selectionChanged",
          "source": "PagePartSelectionTracker.java:32"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:153"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:867"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:413"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:151"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1287"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleSelect",
          "source": "StructuredViewer.java:654"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected",
          "source": "StructuredViewer.java:678"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.fireSelectionEvent",
          "source": "OpenStrategy.java:172"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy.access$3",
          "source": "OpenStrategy.java:167"
        },
        {
          "method": "org.eclipse.jface.util.OpenStrategy$1.handleEvent",
          "source": "OpenStrategy.java:302"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:77"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:836"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1775"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1483"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1268"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:1251"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:845"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:461"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:247"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:703"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:539"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "33834",
      "date": "2003-03-05T14:26:48+01:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "blocker"
    }
  ],
  "groupId": "33834",
  "bugId": "33834",
  "date": "2003-03-05T14:26:48+01:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "blocker"
}