{
  "comments": [
    "Steps to reproduce:\n\n1. Run setconfig.bat for AC (version 4.2.0.1).\n2. Change the security enabled option to \"true\" by typing \"true\" when prompted\n3. Accept all other defaults (including allowing \"ANY\" users)\n4. Start the AC on the localhost\n5. Start an Eclipse workbench\n6. Create a plugin project or import one\n7. Create a new TPTP automated test case for this plugin\n8. Record a simple test case and add its invocation under the \u0027Behaviour\u0027 Tab\n9. Select the automated test and select Run As \u003e Test (or create a new launch configuration for it and Run)\n10. Enter a valid localhost userid and password when prompted.\n11. An org.eclipse.core.runtime.CoreException is thrown during the launch with the following output in the Command Prompt running the AC:\n\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:85)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:58)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java(Compiled Code))\n        at java.lang.reflect.Method.invoke(Method.java(Compiled Code))\n        at org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl.executeCommand(FileClientHandlerExtendedImpl.java:157)\n        at org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl.run(FileClientHandlerExtendedImpl.java:289)\n        at java.lang.Thread.run(Thread.java:570)\nCaused by: java.io.IOException: Socket closed\n        at com.ibm.sslite.t.a(t.java(Compiled Code))\n        at com.ibm.sslite.b.write(b.java(Compiled Code))\n        at com.ibm.jsse.b.write(Unknown Source)\n        at java.io.FilterOutputStream.write(FilterOutputStream.java(Compiled Cod\ne))\n        at java.io.FilterOutputStream.write(FilterOutputStream.java(Compiled Cod\ne))\n        at java.nio.channels.Channels$WritableByteChannelImpl.write(Channels.jav\na:283)\n        at org.eclipse.hyades.internal.execution.core.file.socket.SocketChannel.\nwrite(SocketChannel.java:180)\n        at org.eclipse.hyades.internal.execution.core.file.communicator.ChannelC\nommunicator.send(ChannelCommunicator.java:296)\n        at org.eclipse.hyades.internal.execution.core.file.communicator.ChannelC\nommunicator.receive(ChannelCommunicator.java:91)\n        at org.eclipse.hyades.internal.execution.core.file.dynamic.PutFileComman\nd$Server.execute(PutFileCommand.java:184)\n        at org.eclipse.hyades.internal.execution.core.file.dynamic.AbstractFileS\nerverCommand.execute(AbstractFileServerCommand.java:318)\n        \n\nNote: This will also occur if you create and run a TPTP JUnit test case but it does not happen when running a manual test case.",
    "Note that this has been re-tested with AC 4.2.1 and TPTP 4.2.1 which both produce this error during TPTP AGR and JUnit execution as well as when running a TPTP manual test.",
    "Changed severity to critical because later testing revealed more errors (see previous comment) and the work around is to turn off security which would not be suitable when security is depended upon.",
    "This defect is caused by the client execution code (org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl) since the socket is prematurely closed when executing a test with security enabled. \n\nPlease assign to the Platform.Execution component.",
    "I have changed the component. Scott, could you please reassign this to Guru Nagarajan.",
    "Liz, I cannot reproduce the problem. I can run JUnit test case successfully. Can you tell me what JDKs are you using on the Eclipse side and the RAC side?",
    "I am using IBM 1.4.2 on both. Also, some other test cases resulted in failures and had this bug listed as the cause. They were in the Platform.Execution.ManualRunner.Windows_IA32 [manual]\ntest suite and I am not sure who ran them but I will see if I can find out so you can reproduce the manual case as well.",
    "I can reproduce the 54% hang with a JUnit test suite.  Here are the steps to reproduce it:\n\n\n1) Quit the workbench\n2) Start the workbench again\n3) Wait until the workbench comes up and start AC on command line with security on.\n\nHere\u0027s the stack trace that I got:\n\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou\nrce)\n        at java.lang.reflect.Constructor.newInstance(Unknown Source)\n        at org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCom\nmandFactory.createFileServerCommand(FileServerCommandFactory.java:430)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl.executeCommand(FileClientHandlerExtendedImpl.java:142)\n        at org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl.run(FileClientHandlerExtendedImpl.java:289)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n        at org.eclipse.hyades.execution.core.loader.ScopedChannelClassLoader$Con\nsumer$ContextClassLoader.loadClass(ScopedChannelClassLoader.java:334)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClassInternal(Unknown Source)\n        at org.eclipse.hyades.internal.execution.core.file.dynamic.DetermineServ\nerReachCommand.\u003cinit\u003e(DetermineServerReachCommand.java:218)\n        ... 12 more\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl.executeCommand(FileClientHandlerExtendedImpl.java:142)\n        at org.eclipse.hyades.internal.collection.framework.FileClientHandlerExt\nendedImpl.run(FileClientHandlerExtendedImpl.java:289)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: org.eclipse.hyades.internal.execution.core.file.dynamic.InvalidFileSe\nrverCommandException\n        at org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCom\nmandFactory.createFileServerCommand(FileServerCommandFactory.java:466)\n        ... 7 more\n\n\n\nI can successfully run this test when I start AC in secure mode BEFORE I start the workbench.",
    "If you allow sufficient time between when the AC is started and the test suite is launched, then it will work.\nI believe the problem is that we don\u0027t give enough time for the AC to initialize before a test suite is launched.  Maybe the AC can block any incoming requests until it has fully initialized or output a message that it has successfully started (we don\u0027t do that on windows).",
    "So it ends up to be a startup timing issue. Do you agree that this can be looked at in 4.3 and a readme added to 4.2.1 instead?\n",
    "Forgot to copy Ali. Do you agree this can be documented in 4.2.1 and revisited in 4.3?",
    "The Agent Controller server port (10002) is a native port while the secured and file server ports (10003 and 10005) are Java ports. Port 10002 comes up quickest (since it is native code) and will start receiving incomming connection requests. The Java ports (10003 and 10005) will take a while to come up because it takes some time for the native code to create JVMs and load up the security and file service classes. If the Agent Controller is secured, any incomming connection will be rejected when trying to connect to 10002 and the client will be asked to reconnect to port 10003. Secured connection will fail if the time for the AC to create port 10003 is longer than the time for the client to connect to 10003. This will only happen if the AC is first started and then the workbench immediately trying to connect. This will not happen if the AC is already running (standalone or as a service).\n\nThe workaround is to check if those ports are available before trying to use the Agent Controller. The command to use on Windows is:\n\n\"netstat -a -p tcp\"\n\nThe output should look like:\n\nActive Connections\n\n  Proto  Local Address          Foreign Address        State\n  TCP    neko:10002             neko:0                 LISTENING\n  TCP    neko:10003             neko:0                 LISTENING\n  TCP    neko:10005             neko:0                 LISTENING\n  TCP    neko:10006             neko:0                 LISTENING\n\nMake sure port 10003 and 10005 are listening before connecting to the AC.\n",
    "I think one of the bad side effects of launching a test suite before the AC is fully functional is that subsequent launches will all hang at 54%.",
    "Liz is the reporter but my personal opinion is that it can be documented and re-visited in 4.3 timeframe.",
    "I agree that as long as it is documented it can be pushed to 4.3.",
    "Please assign to Samson.",
    "Changed component to \"Platform.Communication\". Karla, could you please re-assign this to Samson as I am not able to?",
    "Doc bug 153910 has been opened.\n",
    "Transferred to 4.3 and a doc bug is opened for 4.2.1",
    "Set to 4.3 w/o iteration for bug triaging.",
    "Changing the summary.",
    "Not containable in 4.3 and retarget to 4.4. Please let me know if you have any concern.\n",
    "Not containable in 4.4.",
    "*** Bug 100937 has been marked as a duplicate of this bug. ***",
    "Hi Bing. I have transferred my bugs to you for triage. Thanks."
  ],
  "commentCreationDates": [
    "2006-08-01T17:30:16+02:00",
    "2006-08-02T14:51:43+02:00",
    "2006-08-08T18:36:27+02:00",
    "2006-08-09T15:01:57+02:00",
    "2006-08-09T15:20:55+02:00",
    "2006-08-10T19:32:11+02:00",
    "2006-08-10T19:45:16+02:00",
    "2006-08-10T21:26:34+02:00",
    "2006-08-10T22:06:14+02:00",
    "2006-08-11T14:56:30+02:00",
    "2006-08-14T18:02:43+02:00",
    "2006-08-14T18:24:57+02:00",
    "2006-08-14T19:18:45+02:00",
    "2006-08-14T19:25:12+02:00",
    "2006-08-14T19:45:52+02:00",
    "2006-08-14T20:58:44+02:00",
    "2006-08-14T21:05:35+02:00",
    "2006-08-15T16:17:35+02:00",
    "2006-08-17T18:10:06+02:00",
    "2006-09-11T17:54:38+02:00",
    "2006-09-20T18:11:14+02:00",
    "2006-10-30T15:27:10+01:00",
    "2007-01-31T16:31:17+01:00",
    "2007-04-30T18:27:59+02:00",
    "2007-11-27T14:33:44+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl. java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAcces sorImpl.java(Compiled Code)"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.hyades.internal.collection.framework.FileClientHandlerExtendedImpl.executeCommand",
          "source": "FileClientHandlerExtendedImpl.java:157"
        },
        {
          "method": "org.eclipse.hyades.internal.collection.framework.FileClientHandlerExtendedImpl.run",
          "source": "FileClientHandlerExtendedImpl.java:289"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:570"
        }
      ],
      "causedBy": {
        "exceptionType": "java.io.IOException",
        "message": "Socket closed",
        "elements": [
          {
            "method": "com.ibm.sslite.t.a",
            "source": "t.java(Compiled Code)"
          },
          {
            "method": "com.ibm.sslite.b.write",
            "source": "b.java(Compiled Code)"
          },
          {
            "method": "com.ibm.jsse.b.write",
            "source": "Unknown Source"
          },
          {
            "method": "java.io.FilterOutputStream.write",
            "source": "FilterOutputStream.java(Compiled Cod e)"
          },
          {
            "method": "java.io.FilterOutputStream.write",
            "source": "FilterOutputStream.java(Compiled Cod e)"
          },
          {
            "method": "java.nio.channels.Channels$WritableByteChannelImpl.write",
            "source": "Channels.jav a:283"
          },
          {
            "method": "org.eclipse.hyades.internal.execution.core.file.socket.SocketChannel.write",
            "source": "SocketChannel.java:180"
          },
          {
            "method": "org.eclipse.hyades.internal.execution.core.file.communicator.ChannelCommunicator.send",
            "source": "ChannelCommunicator.java:296"
          },
          {
            "method": "org.eclipse.hyades.internal.execution.core.file.communicator.ChannelCommunicator.receive",
            "source": "ChannelCommunicator.java:91"
          },
          {
            "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.PutFileCommand$Server.execute",
            "source": "PutFileCommand.java:184"
          },
          {
            "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.AbstractFileServerCommand.execute",
            "source": "AbstractFileServerCommand.java:318"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "152468",
      "date": "2006-08-01T17:30:16+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeConstructorAccessorImpl.newInstance",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingConstructorAccessorImpl.newInstance",
          "source": "Unknown Sou rce"
        },
        {
          "method": "java.lang.reflect.Constructor.newInstance",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.createFileServerCommand",
          "source": "FileServerCommandFactory.java:430"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.hyades.internal.collection.framework.FileClientHandlerExtendedImpl.executeCommand",
          "source": "FileClientHandlerExtendedImpl.java:142"
        },
        {
          "method": "org.eclipse.hyades.internal.collection.framework.FileClientHandlerExtendedImpl.run",
          "source": "FileClientHandlerExtendedImpl.java:289"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.hyades.execution.core.loader.ScopedChannelClassLoader$Consumer$ContextClassLoader.loadClass",
            "source": "ScopedChannelClassLoader.java:334"
          },
          {
            "method": "java.lang.ClassLoader.loadClass",
            "source": "Unknown Source"
          },
          {
            "method": "java.lang.ClassLoader.loadClassInternal",
            "source": "Unknown Source"
          },
          {
            "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.DetermineServerReachCommand.\u003cinit\u003e",
            "source": "DetermineServerReachCommand.java:218"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 1,
      "commentIndex": 7,
      "bugId": "152468",
      "date": "2006-08-10T21:26:34+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "critical"
    },
    {
      "exceptionType": "java.lang.reflect.InvocationTargetException",
      "elements": [
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.hyades.internal.collection.framework.FileClientHandlerExtendedImpl.executeCommand",
          "source": "FileClientHandlerExtendedImpl.java:142"
        },
        {
          "method": "org.eclipse.hyades.internal.collection.framework.FileClientHandlerExtendedImpl.run",
          "source": "FileClientHandlerExtendedImpl.java:289"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "number": 2,
      "commentIndex": 7,
      "bugId": "152468",
      "date": "2006-08-10T21:26:34+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "critical"
    },
    {
      "exceptionType": "rverCommandException",
      "elements": [
        {
          "method": "org.eclipse.hyades.internal.execution.core.file.dynamic.FileServerCommandFactory.createFileServerCommand",
          "source": "FileServerCommandFactory.java:466"
        }
      ],
      "number": 3,
      "commentIndex": 7,
      "bugId": "152468",
      "date": "2006-08-10T21:26:34+02:00",
      "product": "TPTP Agent Controller",
      "component": "Platform.Communication",
      "severity": "critical"
    }
  ],
  "groupId": "152468",
  "bugId": "152468",
  "date": "2006-08-01T17:30:16+02:00",
  "product": "TPTP Agent Controller",
  "component": "Platform.Communication",
  "severity": "critical"
}