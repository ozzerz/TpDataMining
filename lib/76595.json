{
  "comments": [
    "Build: eclipse-I200410190941\ngtk+-2.4.10\n\nOn shutdown, I got a progress dialog with a CVS update and a build workspace\njob.  I tried to cancel both, the CVS update cancelled fine, the build workspace\njob won\u0027t go away.  Here is the thread dump.\n\nFull thread dump Java HotSpot(TM) Client VM (1.4.2_03-b02 mixed mode):\n\n\"ModalContext\" prio\u003d1 tid\u003d0x0843f678 nid\u003d0x74e1 runnable [5b0c3000..5b0c3854]\n\tat java.lang.Object.wait(Native Method)\n\tat org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:159)\n\t- locked \u003c0x447a4548\u003e (a org.eclipse.core.internal.jobs.ThreadJob)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:170)\n\tat org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:95)\n\tat\norg.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1631)\n\tat org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1309)\n\tat org.eclipse.core.internal.resources.Workspace.save(Workspace.java:1710)\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor$5.run(IDEWorkbenchAdvisor.java:508)\n\tat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:105)\n\n\"Worker-20\" prio\u003d1 tid\u003d0x0880c028 nid\u003d0x74e1 in Object.wait() [58f44000..58f44854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45f2fae0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n\tat org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n\t- locked \u003c0x45f2fae0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n\tat org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Worker-19\" prio\u003d1 tid\u003d0x08a21af0 nid\u003d0x74e1 in Object.wait() [5b880000..5b880854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45f2fae0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n\tat org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n\t- locked \u003c0x45f2fae0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n\tat org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Worker-17\" prio\u003d1 tid\u003d0x08996630 nid\u003d0x74e1 in Object.wait() [5a2ff000..5a2ff854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45f2fae0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n\tat org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:166)\n\t- locked \u003c0x45f2fae0\u003e (a org.eclipse.core.internal.jobs.WorkerPool)\n\tat org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:193)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)\n\n\"Worker-13\" prio\u003d1 tid\u003d0x08a32418 nid\u003d0x74e1 in Object.wait() [5b301000..5b301854]\n\tat java.lang.Object.wait(Native Method)\n\tat org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:159)\n\t- locked \u003c0x47adc4b8\u003e (a org.eclipse.core.internal.jobs.ThreadJob)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:170)\n\tat\norg.eclipse.ui.views.markers.internal.MarkerView.internalRefresh(MarkerView.java:195)\n\tat org.eclipse.ui.views.markers.internal.MarkerView.access$3(MarkerView.java:181)\n\tat org.eclipse.ui.views.markers.internal.MarkerView$3.run(MarkerView.java:281)\n\tat\norg.eclipse.ui.views.markers.internal.RestartableJob$2.run(RestartableJob.java:85)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\"Worker-10\" prio\u003d1 tid\u003d0x088e6e08 nid\u003d0x74e1 in Object.wait() [5b280000..5b280854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x484b89b8\u003e (a org.eclipse.ui.console.IOConsoleInputStream)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.eclipse.ui.console.IOConsoleInputStream.waitForData(IOConsoleInputStream.java:139)\n\tat org.eclipse.ui.console.IOConsoleInputStream.read(IOConsoleInputStream.java:85)\n\t- locked \u003c0x484b89b8\u003e (a org.eclipse.ui.console.IOConsoleInputStream)\n\tat org.eclipse.ui.console.IOConsoleInputStream.read(IOConsoleInputStream.java:110)\n\tat\norg.eclipse.debug.internal.ui.views.console.ProcessConsole$InputReadJob.run(ProcessConsole.java:480)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\"Worker-9\" prio\u003d1 tid\u003d0x08954900 nid\u003d0x74e1 runnable [5b601000..5b601854]\n\tat java.lang.Object.wait(Native Method)\n\tat org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:159)\n\t- locked \u003c0x479dd450\u003e (a org.eclipse.core.internal.jobs.ThreadJob)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:170)\n\tat\norg.eclipse.team.internal.core.subscribers.BatchingLock$ThreadInfo.pushRule(BatchingLock.java:78)\n\tat\norg.eclipse.team.internal.core.subscribers.BatchingLock.acquire(BatchingLock.java:275)\n\tat\norg.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.beginBatching(EclipseSynchronizer.java:462)\n\tat\norg.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.ignoreFilesChanged(EclipseSynchronizer.java:606)\n\tat\norg.eclipse.team.internal.ccvs.core.syncinfo.DeferredResourceChangeHandler.doDispatchEvents(DeferredResourceChangeHandler.java:80)\n\tat\norg.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:335)\n\tat\norg.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:315)\n\tat\norg.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:154)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\"Worker-8\" prio\u003d1 tid\u003d0x5b49c6a0 nid\u003d0x74e1 waiting for monitor entry\n[5b57f000..5b580854]\n\tat org.eclipse.swt.internal.gtk.OS.gdk_pixbuf_new(Native Method)\n\t- waiting to lock \u003c0x54ba49a0\u003e (a java.lang.Class)\n\tat org.eclipse.swt.graphics.Image.init(Image.java:767)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:434)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:186)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:123)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:101)\n\tat\norg.eclipse.pde.internal.ui.editor.feature.FeatureAdapterFactory.\u003cinit\u003e(FeatureAdapterFactory.java:23)\n\tat org.eclipse.pde.internal.ui.PDEPlugin.start(PDEPlugin.java:198)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:958)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:954)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:937)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:421)\n\tat\norg.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:293)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:110)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\n\tat\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.loadClass(BundleLoader.java:307)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:336)\n\tat\norg.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1313)\n\tat\norg.eclipse.core.internal.plugins.PluginClassLoader.findClass(PluginClassLoader.java:76)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:289)\n\t- locked \u003c0x484b9100\u003e (a org.eclipse.core.internal.plugins.PluginClassLoader)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat\norg.eclipse.ant.internal.core.AntClassLoader.loadClassPlugins(AntClassLoader.java:62)\n\tat org.eclipse.ant.internal.core.AntClassLoader.findClass(AntClassLoader.java:35)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:289)\n\t- locked \u003c0x484b9170\u003e (a org.eclipse.ant.internal.core.AntClassLoader)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat org.eclipse.ant.core.AntRunner.getInternalAntRunner(AntRunner.java:375)\n\tat org.eclipse.ant.core.AntRunner.run(AntRunner.java:301)\n\tat\norg.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.runInSameVM(AntLaunchDelegate.java:200)\n\tat\norg.eclipse.ant.internal.ui.launchConfigurations.AntLaunchDelegate.launch(AntLaunchDelegate.java:163)\n\tat\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:569)\n\tat\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:150)\n\tat\norg.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.launchBuild(ExternalToolBuilder.java:126)\n\tat\norg.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.doBuildBasedOnScope(ExternalToolBuilder.java:114)\n\tat\norg.eclipse.ui.externaltools.internal.model.ExternalToolBuilder.build(ExternalToolBuilder.java:72)\n\tat org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:574)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:158)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:192)\n\tat org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:221)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:224)\n\tat\norg.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:243)\n\tat org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:272)\n\tat org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:155)\n\tat org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:212)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\"Java indexing\" daemon prio\u003d1 tid\u003d0x08567c78 nid\u003d0x74e1 in Object.wait()\n[5a5cd000..5a5cd854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x46816d18\u003e (a\norg.eclipse.jdt.internal.core.search.indexing.IndexManager)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:345)\n\t- locked \u003c0x46816d18\u003e (a\norg.eclipse.jdt.internal.core.search.indexing.IndexManager)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Reference Cleaner - 2\" prio\u003d1 tid\u003d0x081dda20 nid\u003d0x74e1 in Object.wait()\n[59f09000..59f09854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x46415b18\u003e (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n\t- locked \u003c0x46415b18\u003e (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\tat\norg.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:216)\n\n\"Reference Cleaner - 1\" prio\u003d1 tid\u003d0x081dd7b0 nid\u003d0x74e1 in Object.wait()\n[59156000..59156854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x46415b88\u003e (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n\t- locked \u003c0x46415b88\u003e (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\tat\norg.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:216)\n\n\"Start Level Event Dispatcher\" daemon prio\u003d1 tid\u003d0x08265b90 nid\u003d0x74e1 in\nObject.wait() [590d5000..590d5854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45b1d490\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:162)\n\t- locked \u003c0x45b1d490\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:100)\n\n\"Framework Event Dispatcher\" daemon prio\u003d1 tid\u003d0x08242258 nid\u003d0x74e1 in\nObject.wait() [59054000..59054854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45b14a28\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:162)\n\t- locked \u003c0x45b14a28\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:100)\n\n\"Signal Dispatcher\" daemon prio\u003d1 tid\u003d0x0809d758 nid\u003d0x74e1 waiting on condition\n[0..0]\n\n\"Finalizer\" daemon prio\u003d1 tid\u003d0x08088918 nid\u003d0x74e1 in Object.wait()\n[589da000..589da854]\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n\t- locked \u003c0x45af9750\u003e (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio\u003d1 tid\u003d0x08087d28 nid\u003d0x74e1 in Object.wait()\n[58959000..58959854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45af97b8\u003e (a java.lang.ref.Reference$Lock)\n\tat java.lang.Object.wait(Object.java:429)\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)\n\t- locked \u003c0x45af97b8\u003e (a java.lang.ref.Reference$Lock)\n\n\"main\" prio\u003d1 tid\u003d0x08052538 nid\u003d0x74e1 runnable [bfffa000..bfffbb18]\n\tat org.eclipse.swt.internal.gtk.OS.Call(Native Method)\n\tat org.eclipse.swt.widgets.Display.sleep(Display.java:2967)\n\tat\norg.eclipse.jface.operation.ModalContext$ModalContextThread.block(ModalContext.java:142)\n\tat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:279)\n\tat\norg.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)\n\tat\norg.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run(ProgressMonitorJobsDialog.java:268)\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.disconnectFromWorkspace(IDEWorkbenchAdvisor.java:515)\n\tat\norg.eclipse.ui.internal.ide.IDEWorkbenchAdvisor.postShutdown(IDEWorkbenchAdvisor.java:231)\n\tat org.eclipse.ui.internal.Workbench.shutdown(Workbench.java:1724)\n\tat org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:498)\n\tat org.eclipse.ui.internal.Workbench.access$8(Workbench.java:421)\n\tat org.eclipse.ui.internal.Workbench$12.run(Workbench.java:606)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:604)\n\tat org.eclipse.ui.internal.Workbench.close(Workbench.java:579)\n\tat org.eclipse.ui.internal.QuitAction.run(QuitAction.java:55)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:988)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:946)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:896)\n\tat\norg.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContributionItem.java:810)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:979)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2661)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2360)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1443)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1414)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:271)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\n\"VM Thread\" prio\u003d1 tid\u003d0x08086a08 nid\u003d0x74e1 runnable \n\n\"VM Periodic Task Thread\" prio\u003d1 tid\u003d0x0809ff68 nid\u003d0x74e1 waiting on condition \n\"Suspend Checker Thread\" prio\u003d1 tid\u003d0x0809cdb8 nid\u003d0x74e1 runnable",
    "Created an attachment (id\u003d15282)\nScreenshot of the progress dialog\n",
    "Once again adding the thread dudes.",
    "The UI Thread is just running the readAndDispatch - the out of date dialog is \nbecause we are blocked on this image creation code \n\n     if (!display.readAndDispatch())\n                        display.sleep();\n\nHere is the one that is interesing:\n\"Worker-8\" prio\u003d1 tid\u003d0x5b49c6a0 nid\u003d0x74e1 waiting for monitor entry\n[5b57f000..5b580854]\n\tat org.eclipse.swt.internal.gtk.OS.gdk_pixbuf_new(Native Method)\n\t- waiting to lock \u003c0x54ba49a0\u003e (a java.lang.Class)\n\tat org.eclipse.swt.graphics.Image.init(Image.java:767)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:434)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage\n(ImageDescriptor.java:186)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage\n(ImageDescriptor.java:123)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage\n(ImageDescriptor.java:101)\n\tat\norg.eclipse.pde.internal.ui.editor.feature.FeatureAdapterFactory.\u003cinit\u003e\n(FeatureAdapterFactory.java:23)\n\tat org.eclipse.pde.internal.ui.PDEPlugin.start(PDEPlugin.java:198)\n\tat\n\nWhy is the PDEPlugin starting on shutdown?",
    "From a core point of view the Workbench application is still running, so we are\nnot in shutdown mode. The PDE plugin is loading because a builder touched it.\n\nMoving to SWT, since the deadlock seems to be between OS.gdk_pixbuf_new\n(Worker-8) and OS.Call (main thread).",
    "SN and I to work this out when he is back.",
    "Fixed \u003e 20041025.",
    "I just had Eclipse I200410260800 hang on shutdown with a worker thread in\nOS.gdk_pixbuf_new.  Did the fix for this make it into this build?\n\nFull thread dump Java HotSpot(TM) Client VM (1.4.2_03-b02 mixed mode):\n\n\"Worker-44\" prio\u003d1 tid\u003d0x085e6740 nid\u003d0x4afa waiting for monitor entry\n[5b581000..5b582854]\n\tat org.eclipse.swt.internal.gtk.OS.gdk_pixbuf_new(Native Method)\n\t- waiting to lock \u003c0x54ba5178\u003e (a java.lang.Class)\n\tat org.eclipse.swt.graphics.Image.init(Image.java:767)\n\tat org.eclipse.swt.graphics.Image.\u003cinit\u003e(Image.java:434)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:186)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:123)\n\tat org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:101)\n\tat\norg.eclipse.pde.internal.ui.editor.feature.FeatureAdapterFactory.\u003cinit\u003e(FeatureAdapterFactory.java:23)\n\tat org.eclipse.pde.internal.ui.PDEPlugin.start(PDEPlugin.java:198)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:958)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:954)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:937)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:421)\n\tat\norg.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:293)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:110)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\n\tat\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleLoader.loadClass(BundleLoader.java:307)\n\tat\norg.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:336)\n\tat\norg.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1313)\n\tat\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:131)\n\tat\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:124)\n\tat\norg.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:113)\n\tat\norg.eclipse.debug.internal.core.LaunchConfigurationType.getDelegate(LaunchConfigurationType.java:231)\n\tat\norg.eclipse.debug.internal.core.LaunchConfiguration.getDelegate(LaunchConfiguration.java:360)\n\tat\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:514)\n\tat\norg.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:732)\n\tat org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:904)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n\n\"Framework Event Dispatcher\" daemon prio\u003d1 tid\u003d0x0823b888 nid\u003d0x4afa in\nObject.wait() [59054000..59054854]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x45b147a0\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:162)\n\t- locked \u003c0x45b147a0\u003e (a org.eclipse.osgi.framework.eventmgr.EventThread)\n\tat org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:100)\n\n\"Signal Dispatcher\" daemon prio\u003d1 tid\u003d0x0809d798 nid\u003d0x4afa waiting on condition\n[0..0]\n\n\"Finalizer\" daemon prio\u003d1 tid\u003d0x08088950 nid\u003d0x4afa in Object.wait()\n[589da000..589da854]\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n\t- locked \u003c0x45af9920\u003e (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio\u003d1 tid\u003d0x08087d60 nid\u003d0x4afa in Object.wait()\n[58959000..58959854]\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.Object.wait(Object.java:429)\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)\n\t- locked \u003c0x45af9988\u003e (a java.lang.ref.Reference$Lock)\n\n\"main\" prio\u003d1 tid\u003d0x08052570 nid\u003d0x4afa in Object.wait() [bfffb000..bfffbbe8]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on \u003c0x44d22d30\u003e (a org.eclipse.core.runtime.adaptor.Semaphore)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.eclipse.core.runtime.adaptor.Semaphore.acquire(Semaphore.java:33)\n\t- locked \u003c0x44d22d30\u003e (a org.eclipse.core.runtime.adaptor.Semaphore)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.stopSystemBundle(EclipseStarter.java:920)\n\tat\norg.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:296)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:144)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:704)\n\tat org.eclipse.core.launcher.Main.main(Main.java:688)\n\n\"VM Thread\" prio\u003d1 tid\u003d0x08086a40 nid\u003d0x4afa runnable \n\n\"VM Periodic Task Thread\" prio\u003d1 tid\u003d0x0809ffa8 nid\u003d0x4afa waiting on condition \n\"Suspend Checker Thread\" prio\u003d1 tid\u003d0x0809cdf8 nid\u003d0x4afa runnable ",
    "Yes, the fix is in that build.",
    "Then mark this but report as fixed SSQ?",
    "Well not if I\u0027m still experiencing hangs with that build :)",
    "I found this in my log, it may explain what\u0027s going on.\n\n!ENTRY org.eclipse.osgi 2004-10-27 15:08:03.517\n!MESSAGE While loading class\n\"org.eclipse.pde.internal.ui.launcher.LaunchListener\", thread \"Worker-51\" timed\nout waiting (5000ms) for thread \"Worker-44\" to finish starting bundle\n\"org.eclipse.pde.ui\". To avoid deadlock, thread \"Worker-51\" is proceeding but\n\"org.eclipse.pde.internal.ui.launcher.LaunchListener\" may not be fully initialized.\n!STACK 0\njava.lang.Exception: Generated exception.\n        at\norg.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:102)\n        at\norg.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:371)\n        at\norg.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)\n        at\norg.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n        at\norg.eclipse.pde.internal.ui.PDEPlugin.getLaunchListener(PDEPlugin.java:240)\n        at\norg.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.launch(WorkbenchLaunchConfigurationDelegate.java:73)\n        at\norg.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:569)\n        at\norg.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:732)\n        at org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:904)\n        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)\n",
    "I\u0027ve seen this as well.  It hung while Eclipse was running. ",
    "Interestingly, it eventually comes back.  The problem for me is that class \nloading is being blocked by this deadlock condition as well.  This leads to 5 \nsecond timeouts while loading classes.  Eventually, all the necessary classes \nare loaded and work can continue. \n ",
    "Note: I don\u0027t normally see this problem.  I only saw it when I switched to the \nSun VM for a bit. ",
    "Yes, I believe this is a bug in the JNI functions MonitorEnter() and \nMonitorExit() for this VM. We are using these functions to temporarily leave \nthe OS monitor when we go to sleep in a stacked event loop so that other \nthreads can call OS functions.\n\nTo work around this bug, we are going to implement our own locking mechanism \ninstead of just synchronize every method in OS. So that we can leave the lock \nproperly while in Display.sleep().",
    "How long have you been using this locking mechanism?  I\u0027m curious, as I used to \nuse Sun VMs all the time, and never saw this problem.  It feels like something \nhas changed recently (in our code) to make this happen. \n \nAlso, if this is a bug with Sun VM, should we maybe file a bug with them? \n ",
    "We are using this mechanism for a month (maybe two). We used to implement \nDisplay.sleep() by calling OS_LOCK.wait(50), which is the only way to leave a \nsynchronized block properly in java.  The problem with wait() is that the UI \nthread would not wake up right away when an event or a sync runnable was \navailable.\n\nSo the code that uses MonitorEnter() and MonitorExit() is in place since we \nimplement Display.sleep() using the GUI sleep way and not Object.wait().",
    "Fixed \u003e 20041110.",
    "*** Bug 78377 has been marked as a duplicate of this bug. ***",
    "Did this go into I20041116? It seems to have gotten a lot worse in that build.",
    "The fix did NOT go into the build."
  ],
  "commentCreationDates": [
    "2004-10-19T21:05:46+02:00",
    "2004-10-19T21:07:31+02:00",
    "2004-10-19T21:29:51+02:00",
    "2004-10-19T21:35:56+02:00",
    "2004-10-19T22:36:09+02:00",
    "2004-10-20T23:10:43+02:00",
    "2004-10-25T17:50:22+02:00",
    "2004-10-27T21:25:35+02:00",
    "2004-10-28T18:39:58+02:00",
    "2004-10-28T18:51:22+02:00",
    "2004-10-28T18:54:14+02:00",
    "2004-10-28T18:55:49+02:00",
    "2004-11-08T16:38:06+01:00",
    "2004-11-08T16:57:01+01:00",
    "2004-11-08T16:57:54+01:00",
    "2004-11-08T17:08:25+01:00",
    "2004-11-08T17:12:28+01:00",
    "2004-11-08T17:35:45+01:00",
    "2004-11-10T19:31:35+01:00",
    "2004-11-11T23:37:07+01:00",
    "2004-11-16T18:02:04+01:00",
    "2004-11-16T18:45:21+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Generated exception.",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass",
          "source": "EclipseClassLoader.java:102"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:371"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:402"
        },
        {
          "method": "org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass",
          "source": "AbstractClassLoader.java:93"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:235"
        },
        {
          "method": "java.lang.ClassLoader.loadClassInternal",
          "source": "ClassLoader.java:302"
        },
        {
          "method": "org.eclipse.pde.internal.ui.PDEPlugin.getLaunchListener",
          "source": "PDEPlugin.java:240"
        },
        {
          "method": "org.eclipse.pde.internal.ui.launcher.WorkbenchLaunchConfigurationDelegate.launch",
          "source": "WorkbenchLaunchConfigurationDelegate.java:73"
        },
        {
          "method": "org.eclipse.debug.internal.core.LaunchConfiguration.launch",
          "source": "LaunchConfiguration.java:569"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch",
          "source": "DebugUIPlugin.java:732"
        },
        {
          "method": "org.eclipse.debug.internal.ui.DebugUIPlugin$6.run",
          "source": "DebugUIPlugin.java:904"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:66"
        }
      ],
      "number": 0,
      "commentIndex": 11,
      "bugId": "76595",
      "date": "2004-10-28T18:55:49+02:00",
      "product": "Platform",
      "component": "SWT",
      "severity": "major"
    }
  ],
  "groupId": "76595",
  "bugId": "76595",
  "date": "2004-10-19T21:05:46+02:00",
  "product": "Platform",
  "component": "SWT",
  "severity": "major"
}