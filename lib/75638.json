{
  "comments": [
    "\u003c\u003c\u003c recreation step \u003e\u003e\u003e\n1. create a text file and open it with text editor\n2. modify the file in the text editor\n2. open the same file with notepad (outside workbench)\n3. modify and save the file in the notepad\n4. go back to workbench, then \"File Changed\" message box is shown\n5. press [No] button on the message box\n6. try to revert file from [File]-\u003e[Revert] menu\n -\u003e IllegalArgumentException is thrown internally, and text editor\u0027s content \nis not reverted !\n\nHere is the stack trace reported in .log file:\n\n!ENTRY org.eclipse.ui 4 0 10 05, 2004 22:08:28.665\n!MESSAGE Attempted to beginRule: F/test/folder, does not match outer scope \nrule: L/test/folder/a.txt\n!STACK 0\njava.lang.IllegalArgumentException: Attempted to beginRule: F/test/folder, \ndoes not match outer scope rule: L/test/folder/a.txt\n\tat org.eclipse.core.internal.runtime.Assert.isLegal(Unknown Source)\n\tat org.eclipse.core.internal.jobs.ThreadJob.illegalPush(Unknown Source)\n\tat org.eclipse.core.internal.jobs.ThreadJob.push(Unknown Source)\n\tat org.eclipse.core.internal.jobs.ImplicitJobs.begin(Unknown Source)\n\tat org.eclipse.core.internal.jobs.JobManager.beginRule(Unknown Source)\n\tat org.eclipse.core.internal.resources.WorkManager.checkIn(Unknown \nSource)\n\tat org.eclipse.core.internal.resources.Workspace.prepareOperation\n(Unknown Source)\n\tat org.eclipse.core.internal.resources.Resource.refreshLocal(Unknown \nSource)\n\tat org.eclipse.core.internal.resources.File.refreshLocal(Unknown \nSource)\n\tat org.eclipse.core.internal.filebuffers.ResourceFileBuffer.refreshFile\n(Unknown Source)\n\tat org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.revert\n(Unknown Source)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider$1.execute\n(Unknown Source)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.\nrun(Unknown Source)\n\tat org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute\n(Unknown Source)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(Unknown \nSource)\n\tat org.eclipse.core.internal.resources.Workspace.run(Unknown Source)\n\tat org.eclipse.ui.actions.WorkspaceModifyOperation.run(Unknown Source)\n\tat org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run\n(Unknown Source)\n\tat org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run\n(Unknown Source)\n\tat \norg.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation(Unknown \nSource)\n\tat org.eclipse.ui.editors.text.TextFileDocumentProvider.resetDocument\n(Unknown Source)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.performRevert(Unknown \nSource)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.doRevertToSaved\n(Unknown Source)\n\tat org.eclipse.ui.texteditor.StatusTextEditor.doRevertToSaved(Unknown \nSource)\n\tat org.eclipse.ui.texteditor.RevertToSavedAction.run(Unknown Source)\n\tat org.eclipse.jface.action.Action.runWithEvent(Unknown Source)\n\tat org.eclipse.ui.actions.RetargetAction.runWithEvent(Unknown Source)\n\tat \norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(Unknown \nSource)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(Unknown \nSource)\n\tat org.eclipse.jface.action.ActionContributionItem$7.handleEvent\n(Unknown Source)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runUI(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown \nSource)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(Unknown Source)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(Unknown \nSource)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:58)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:60)\n\tat java.lang.reflect.Method.invoke(Method.java:391)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:684)\n\tat org.eclipse.core.launcher.Main.main(Main.java:668)",
    "Seems that we need to compute a MultiRule everywhere where a refresh can \nhappen internally.",
    "Yes, if refresh is possible you\u0027ll need to do MultiRule.combine(modifyRule,\nrefreshRule) in TextFileDocumentProvider.resetDocument.",
    "Come to think of it, I don\u0027t think modifyRule is needed at all. Presumably\nrevert never actually modifies files in the workspace.  All you need is the\nrefresh rule (assuming a refresh is always done).  You were getting lucky here\nbecause core optimizes refreshLocal on files that have not changed and avoids\nany kind of locking.  When a scenario is created where revert runs into a file\nthat is out of sync, the error presumably always occurs.",
    "Deferred.",
    "*** Bug 124353 has been marked as a duplicate of this bug. ***",
    "Fixed in TextFileDocumentProvider and FileDocumentProvider.\nAvailable in builds \u003e N20060119-0010.",
    "Verified with eclipse-platform-SDK-M20060915-1045-win32.zip."
  ],
  "commentCreationDates": [
    "2004-10-05T15:41:48+02:00",
    "2004-10-05T15:47:02+02:00",
    "2004-10-06T22:57:25+02:00",
    "2004-10-07T23:20:37+02:00",
    "2005-05-25T23:49:54+02:00",
    "2006-01-19T08:22:58+01:00",
    "2006-01-19T08:27:13+01:00",
    "2006-09-25T18:48:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Attempted to beginRule: F/test/folder,  does not match outer scope rule: L/test/folder/a.txt",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.Assert.isLegal",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.illegalPush",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ThreadJob.push",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.jobs.ImplicitJobs.begin",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.jobs.JobManager.beginRule",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkManager.checkIn",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.prepareOperation",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.Resource.refreshLocal",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.File.refreshLocal",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceFileBuffer.refreshFile",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.revert",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$1.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider$DocumentProviderOperation.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyDelegatingOperation.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation$1.run",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceModifyOperation.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.ui.editors.text.TextFileDocumentProvider.resetDocument",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.performRevert",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.doRevertToSaved",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.texteditor.StatusTextEditor.doRevertToSaved",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.ui.texteditor.RevertToSavedAction.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.actions.RetargetAction.runWithEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$7.handleEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "Unknown  Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:85"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:58"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:60"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:391"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:684"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:668"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "75638",
      "date": "2004-10-05T15:41:48+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "normal"
    }
  ],
  "groupId": "75638",
  "bugId": "75638",
  "date": "2004-10-05T15:41:48+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "normal"
}