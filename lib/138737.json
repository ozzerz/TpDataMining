{
  "comments": [
    "During startup, Eclipse WTP launches multiple background jobs to validate various aspects of J2EE projects in the workspace. Sometimes, I get ConcurrentModificationException below from two or more such jobs. Possible solution is to make WorkspaceRoot.getProject(String) synchronized.\n\n!ENTRY org.eclipse.wst.html.core 4 4 2006-04-26 15:06:23.992\n!MESSAGE concurrent access to HashMap attempted by Thread[Worker-9,5,main]\n!STACK 0\njava.util.ConcurrentModificationException: concurrent access to HashMap attempted by Thread[Worker-9,5,main]\n\tat java.util.HashMap.onEntry(HashMap.java:205)\n\tat java.util.HashMap.transfer(HashMap.java:510)\n\tat java.util.HashMap.resize(HashMap.java:500)\n\tat java.util.HashMap.addEntry(HashMap.java:800)\n\tat java.util.HashMap.put(HashMap.java:441)\n\tat org.eclipse.core.internal.resources.WorkspaceRoot.getProject(WorkspaceRoot.java:166)\n\tat org.eclipse.core.internal.resources.Workspace.newResource(Workspace.java:1575)\n\tat org.eclipse.core.internal.resources.Container.getChildren(Container.java:103)\n\tat org.eclipse.core.internal.resources.WorkspaceRoot.getProjects(WorkspaceRoot.java:182)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.pathForLocation(FileSystemResourceManager.java:579)\n\tat org.eclipse.core.internal.localstore.FileSystemResourceManager.fileForLocation(FileSystemResourceManager.java:308)\n\tat org.eclipse.core.internal.resources.WorkspaceRoot.getFileForLocation(WorkspaceRoot.java:117)\n\tat org.eclipse.wst.common.uriresolver.internal.ExtensibleURIResolver.computeFile(ExtensibleURIResolver.java:181)\n\tat org.eclipse.wst.common.uriresolver.internal.ExtensibleURIResolver.resolve(ExtensibleURIResolver.java:56)\n\tat org.eclipse.wst.xml.core.internal.modelquery.XMLCatalogIdResolver.resolve(XMLCatalogIdResolver.java:82)\n\tat org.eclipse.wst.html.core.internal.modelquery.XHTMLAssociationProvider.getXHTMLCMDocument(XHTMLAssociationProvider.java:61)\n\tat org.eclipse.wst.html.core.internal.modelquery.HTMLModelQueryCMProvider.getCorrespondingCMDocument(HTMLModelQueryCMProvider.java:65)\n\tat org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.SimpleAssociationProvider.getCorrespondingCMDocument(SimpleAssociationProvider.java:36)\n\tat org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.SimpleAssociationProvider.getCMElementDeclaration(SimpleAssociationProvider.java:42)\n\tat org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.ModelQueryImpl.getCMElementDeclaration(ModelQueryImpl.java:116)\n\tat org.eclipse.jst.jsp.core.internal.modelquery.JSPModelQueryImpl.getCMElementDeclaration(JSPModelQueryImpl.java:49)\n\tat org.eclipse.wst.html.core.internal.validate.CMUtil.getDeclaration(CMUtil.java:47)\n\tat org.eclipse.wst.html.core.internal.validate.NamespaceValidator.isUnknownElement(NamespaceValidator.java:82)\n\tat org.eclipse.wst.html.core.internal.validate.NamespaceValidator.hasUnknownPrefix(NamespaceValidator.java:78)\n\tat org.eclipse.wst.html.core.internal.validate.NamespaceValidator.validate(NamespaceValidator.java:40)\n\tat org.eclipse.wst.html.core.internal.validate.CompositeValidator.validate(CompositeValidator.java:54)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:37)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements(Propagator.java:41)\n\tat org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate(AbstractPropagatingValidator.java:40)\n\tat org.eclipse.wst.html.core.internal.validate.DocumentPropagatingValidator.validate(DocumentPropagatingValidator.java:32)\n\tat org.eclipse.wst.html.internal.validation.HTMLValidator.validate(HTMLValidator.java:420)\n\tat org.eclipse.wst.html.internal.validation.HTMLValidator.validateFile(HTMLValidator.java:474)\n\tat org.eclipse.wst.html.internal.validation.HTMLValidator.validateDelta(HTMLValidator.java:456)\n\tat org.eclipse.wst.html.internal.validation.HTMLValidator.validate(HTMLValidator.java:207)\n\tat org.eclipse.wst.html.internal.validation.HTMLValidator.validateInJob(HTMLValidator.java:514)\n\tat org.eclipse.wst.validation.internal.operations.ValidatorJob.run(ValidatorJob.java:70)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\n\n!ENTRY org.eclipse.wst.validation 4 0 2006-04-26 15:06:23.992\n!MESSAGE \n*** ERROR ***: Wed Apr 26 15:06:23 EDT 2006    java.util.ConcurrentModificationException: concurrent access to HashMap attempted by Thread[Worker-11,5,main]\n    \tat java.util.HashMap.onExit(HashMap.java:217)\n    \tat java.util.HashMap.transfer(HashMap.java:514)\n    \tat java.util.HashMap.resize(HashMap.java:500)\n    \tat java.util.HashMap.addEntry(HashMap.java:800)\n    \tat java.util.HashMap.put(HashMap.java:441)\n    \tat org.eclipse.core.internal.resources.WorkspaceRoot.getProject(WorkspaceRoot.java:166)\n    \tat org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addProjectEntry(TaglibHelper.java:481)\n    \tat org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addClasspathEntries(TaglibHelper.java:408)\n    \tat org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addClasspathEntriesForProject(TaglibHelper.java:379)\n    \tat org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.getClassloader(TaglibHelper.java:353)\n    \tat org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addTEIVariables(TaglibHelper.java:199)\n    \tat org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.getTaglibVariables(TaglibHelper.java:128)\n    \tat org.eclipse.jst.jsp.core.internal.java.JSPTranslator.addTaglibVariables(JSPTranslator.java:693)\n    \tat org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateXMLNode(JSPTranslator.java:1004)\n    \tat org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateRegionContainer(JSPTranslator.java:850)\n    \tat org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translate(JSPTranslator.java:741)\n    \tat org.eclipse.jst.jsp.core.internal.java.JSPTranslationAdapter.getJSPTranslation(JSPTranslationAdapter.java:131)\n    \tat org.eclipse.jst.jsp.core.internal.validation.JSPJavaValidator.validateFile(JSPJavaValidator.java:46)\n    \tat org.eclipse.jst.jsp.core.internal.validation.JSPValidator.validate(JSPValidator.java:155)\n    \tat org.eclipse.jst.jsp.core.internal.validation.JSPValidator.validateInJob(JSPValidator.java:351)\n    \tat org.eclipse.wst.validation.internal.operations.ValidatorJob.run(ValidatorJob.java:70)\n    \tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Fix released.",
    "*** Bug 193402 has been marked as a duplicate of this bug. ***",
    "I request a backport of this fix to 3.0.2.x maintenance.  Please, provide a prognosis.",
    "The fix on Eclipse 3.0.2 is to replace this line in WorkspaceRoot:\n\nprivate HashMap projectTable \u003d new HashMap(10);\n\nwith:\n\nprivate Map projectTable \u003d Collections.synchronizedMap(new HashMap(10));\n"
  ],
  "commentCreationDates": [
    "2006-04-26T21:47:41+02:00",
    "2006-04-26T22:35:50+02:00",
    "2007-06-19T22:58:24+02:00",
    "2007-06-20T19:01:43+02:00",
    "2007-06-20T20:11:13+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.util.ConcurrentModificationException",
      "message": "concurrent access to HashMap attempted by Thread[Worker-9,5,main]",
      "elements": [
        {
          "method": "java.util.HashMap.onEntry",
          "source": "HashMap.java:205"
        },
        {
          "method": "java.util.HashMap.transfer",
          "source": "HashMap.java:510"
        },
        {
          "method": "java.util.HashMap.resize",
          "source": "HashMap.java:500"
        },
        {
          "method": "java.util.HashMap.addEntry",
          "source": "HashMap.java:800"
        },
        {
          "method": "java.util.HashMap.put",
          "source": "HashMap.java:441"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkspaceRoot.getProject",
          "source": "WorkspaceRoot.java:166"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.newResource",
          "source": "Workspace.java:1575"
        },
        {
          "method": "org.eclipse.core.internal.resources.Container.getChildren",
          "source": "Container.java:103"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkspaceRoot.getProjects",
          "source": "WorkspaceRoot.java:182"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.pathForLocation",
          "source": "FileSystemResourceManager.java:579"
        },
        {
          "method": "org.eclipse.core.internal.localstore.FileSystemResourceManager.fileForLocation",
          "source": "FileSystemResourceManager.java:308"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkspaceRoot.getFileForLocation",
          "source": "WorkspaceRoot.java:117"
        },
        {
          "method": "org.eclipse.wst.common.uriresolver.internal.ExtensibleURIResolver.computeFile",
          "source": "ExtensibleURIResolver.java:181"
        },
        {
          "method": "org.eclipse.wst.common.uriresolver.internal.ExtensibleURIResolver.resolve",
          "source": "ExtensibleURIResolver.java:56"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.modelquery.XMLCatalogIdResolver.resolve",
          "source": "XMLCatalogIdResolver.java:82"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.modelquery.XHTMLAssociationProvider.getXHTMLCMDocument",
          "source": "XHTMLAssociationProvider.java:61"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.modelquery.HTMLModelQueryCMProvider.getCorrespondingCMDocument",
          "source": "HTMLModelQueryCMProvider.java:65"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.SimpleAssociationProvider.getCorrespondingCMDocument",
          "source": "SimpleAssociationProvider.java:36"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.SimpleAssociationProvider.getCMElementDeclaration",
          "source": "SimpleAssociationProvider.java:42"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.contentmodel.modelqueryimpl.ModelQueryImpl.getCMElementDeclaration",
          "source": "ModelQueryImpl.java:116"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.modelquery.JSPModelQueryImpl.getCMElementDeclaration",
          "source": "JSPModelQueryImpl.java:49"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.validate.CMUtil.getDeclaration",
          "source": "CMUtil.java:47"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.validate.NamespaceValidator.isUnknownElement",
          "source": "NamespaceValidator.java:82"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.validate.NamespaceValidator.hasUnknownPrefix",
          "source": "NamespaceValidator.java:78"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.validate.NamespaceValidator.validate",
          "source": "NamespaceValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.validate.CompositeValidator.validate",
          "source": "CompositeValidator.java:54"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:37"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.Propagator.propagateToChildElements",
          "source": "Propagator.java:41"
        },
        {
          "method": "org.eclipse.wst.xml.core.internal.validate.AbstractPropagatingValidator.validate",
          "source": "AbstractPropagatingValidator.java:40"
        },
        {
          "method": "org.eclipse.wst.html.core.internal.validate.DocumentPropagatingValidator.validate",
          "source": "DocumentPropagatingValidator.java:32"
        },
        {
          "method": "org.eclipse.wst.html.internal.validation.HTMLValidator.validate",
          "source": "HTMLValidator.java:420"
        },
        {
          "method": "org.eclipse.wst.html.internal.validation.HTMLValidator.validateFile",
          "source": "HTMLValidator.java:474"
        },
        {
          "method": "org.eclipse.wst.html.internal.validation.HTMLValidator.validateDelta",
          "source": "HTMLValidator.java:456"
        },
        {
          "method": "org.eclipse.wst.html.internal.validation.HTMLValidator.validate",
          "source": "HTMLValidator.java:207"
        },
        {
          "method": "org.eclipse.wst.html.internal.validation.HTMLValidator.validateInJob",
          "source": "HTMLValidator.java:514"
        },
        {
          "method": "org.eclipse.wst.validation.internal.operations.ValidatorJob.run",
          "source": "ValidatorJob.java:70"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "138737",
      "date": "2006-04-26T21:47:41+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    },
    {
      "exceptionType": "java.util.ConcurrentModificationException",
      "message": "concurrent access to HashMap attempted by Thread[Worker-11,5,main]",
      "elements": [
        {
          "method": "java.util.HashMap.onExit",
          "source": "HashMap.java:217"
        },
        {
          "method": "java.util.HashMap.transfer",
          "source": "HashMap.java:514"
        },
        {
          "method": "java.util.HashMap.resize",
          "source": "HashMap.java:500"
        },
        {
          "method": "java.util.HashMap.addEntry",
          "source": "HashMap.java:800"
        },
        {
          "method": "java.util.HashMap.put",
          "source": "HashMap.java:441"
        },
        {
          "method": "org.eclipse.core.internal.resources.WorkspaceRoot.getProject",
          "source": "WorkspaceRoot.java:166"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addProjectEntry",
          "source": "TaglibHelper.java:481"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addClasspathEntries",
          "source": "TaglibHelper.java:408"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addClasspathEntriesForProject",
          "source": "TaglibHelper.java:379"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.getClassloader",
          "source": "TaglibHelper.java:353"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.addTEIVariables",
          "source": "TaglibHelper.java:199"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.taglib.TaglibHelper.getTaglibVariables",
          "source": "TaglibHelper.java:128"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.addTaglibVariables",
          "source": "JSPTranslator.java:693"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateXMLNode",
          "source": "JSPTranslator.java:1004"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translateRegionContainer",
          "source": "JSPTranslator.java:850"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslator.translate",
          "source": "JSPTranslator.java:741"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.java.JSPTranslationAdapter.getJSPTranslation",
          "source": "JSPTranslationAdapter.java:131"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.validation.JSPJavaValidator.validateFile",
          "source": "JSPJavaValidator.java:46"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.validation.JSPValidator.validate",
          "source": "JSPValidator.java:155"
        },
        {
          "method": "org.eclipse.jst.jsp.core.internal.validation.JSPValidator.validateInJob",
          "source": "JSPValidator.java:351"
        },
        {
          "method": "org.eclipse.wst.validation.internal.operations.ValidatorJob.run",
          "source": "ValidatorJob.java:70"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "138737",
      "date": "2006-04-26T21:47:41+02:00",
      "product": "Platform",
      "component": "Resources",
      "severity": "normal"
    }
  ],
  "groupId": "138737",
  "bugId": "138737",
  "date": "2006-04-26T21:47:41+02:00",
  "product": "Platform",
  "component": "Resources",
  "severity": "normal"
}