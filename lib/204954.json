{
  "comments": [
    "While using RAD 7004 and doing routine development (republishing my application), after a while the server entry becomes corrupted.  This has now happened about six times. The last time, I was trying to restart the server in debug mode when it happened.\n\nWhen you double click on the server (in the Server View) you get this:\n\norg.eclipse.core.runtime.AssertionFailedException: assertion failed: \n\tat org.eclipse.core.runtime.Assert.isTrue(Unknown Source)\n\tat org.eclipse.core.runtime.Assert.isTrue(Unknown Source)\n\tat org.eclipse.ui.part.MultiPageEditorPart.setActivePage(Unknown Source)\n\tat org.eclipse.ui.part.MultiPageEditorPart.createPartControl(Unknown Source)\n\tat org.eclipse.ui.internal.EditorReference.createPartHelper(Unknown Source)\n\tat org.eclipse.ui.internal.EditorReference.createPart(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.getPart(Unknown Source)\n\tat org.eclipse.ui.internal.EditorReference.getEditor(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.access$10(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage$9.run(Unknown Source)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor(Unknown Source)\n\tat org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer(Unknown Source)\n\tat org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer(Unknown Source)\n\tat org.eclipse.wst.server.ui.internal.view.servers.ServersView$1.widgetDefaultSelected(Unknown Source)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.runUI(Unknown Source)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(Unknown Source)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(Unknown Source)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Unknown Source)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Unknown Source)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Unknown Source)\n\tat org.eclipse.core.launcher.Main.run(Unknown Source)\n\tat org.eclipse.core.launcher.Main.main(Unknown Source)",
    "Stopping and restarting RAD doesn\u0027t help.\n\nThat server entry is now complete broken. Trying to start that server gives you this error message: \"Cannot connect to the server process. Make sure the server is already started.\"\n\nThe only workaround that I have found so far is to delete the server and then recreate it. ",
    "Hi Gary,\n\nThe error indicates that the server editor UI failed to open, but doesn\u0027t give the actual cause. The failure could be in the framework\u0027s general section, or it could be in the editor extensions provided by the server adapter you are using. It is mostly likely a NPE or similar in one of these two, causing the entire editor to fail. Since you haven\u0027t said what kind of server you\u0027re using, I assume it is not one provided by WTP.\n\nCan you check the .log or use a console to see if Eclipse spits out the real exception? Without knowing which UI caused this (or if it is even in WTP) there isn\u0027t much we can do.",
    "Created an attachment (id\u003d79461)\n.log fragment\n\n",
    "There are so many errors in the .log file, it\u0027s hard to know what to choose :-)\n\nI think I have attached the relevant section to this bug report. I\u0027m using the WAS 6.1 server, and it is a server that I had preinstalled, i.e. not as part of the RAD install.\n\nThe problem happened again, about 5 minutes after opening this bug report, and again the trigger seem to be restarting the server in debug mode. But it hasn\u0027t happened since then. If it happens again, I\u0027ll be more careful to get the right log entries. ",
    "I spoke too soon, it happened again this morning.\n\nI noticed that when I went to stop the server, a little warning icon appeared in the server entry. When I went to open the server, I got the same error as before.\n\nI\u0027ll attach the full .log entry for today, but I don\u0027t think it adds anything new.",
    "Created an attachment (id\u003d79471)\nsecond .log attachment\n\nI don\u0027t think this adds any new information, other than, it\u0027s the complete .log entry for my session this morning. There doesn\u0027t look like there is any additional information, that will help you to solve this problem .... someone is probably eating the relevant exception. ",
    "Agreed, .log doesn\u0027t contain the info either. You may want to open another bug for all of the validation problems though. :)\n\nAssigning to Angel. Hopefully you can send your workspace to Angel and he can reproduce, or he can stop by to debug on your machine.",
    "Angel, I\u0027ll send you an email with FTP instructions. \n\nI\u0027m a creature of habit, so I tend to do the same things:\n\n1) I turn off the publishing of the Universal Test Client\n2) I set Automatic Publishing to \"Never Publish Automatically\"\n\nBecause of this I often have to press the \"Publish to Server Button\", I also find that I often have to Restart the EAR. (If I change anything to do with Struts -- like a form bean) I find I have to restart the EAR or I get class cast exceptions.\n\nAnd then I switch the server between debug mode and normal mode. (I don\u0027t do this very often -- only when I need to debug something).",
    "I received an email from Gary but neither the log nor the info I received are enough to help me identify the problem. I have asked Gary to provide me with the .metadata of his workspace so that I can review the info and understand the problem.\n",
    "Created an attachment (id\u003d80167)\noutput from running -debug\n\nAngel was me to turn on some tracing options. This is the result of doing that.\n\nFor this run, all that I did was start RAD, ask the server to check on it\u0027s initialization status, and then I double clicked on the server, and got the original error.",
    "The tracing options for o.e.wst.server.ui need to be enabled as well, and should show the exact error. I thought Angel mentioned that he\u0027s found the problem, so maybe this isn\u0027t required anymore.",
    "Created an attachment (id\u003d80168)\n-debug output (part 1)\n\nHere is the first of four attachments. Each one captures the -debug output that Angel asked for. The problem shows itself in the fourth attachment.\n\nSteps in this attachment:\n\n14:40 Start RAD, Delete the old server,turn off UTC and autopublish\n14:43 Start server\n14:44 Add my ear, check the server by double clicking it\n14:45 Run a servlet, then publish to server (NOP)\n14:46 Restart in debug mode, run some servlets, shutdown RAD\n",
    "Created an attachment (id\u003d80169)\n-debug output\n\nIn this attachment\n\n2:48 Start RAD\n2:49 republish\n2:49 restart in non debug\n2:50 change web.xml\n2:51 republish\nswitch to Java Perspective, Shutdown RAD",
    "Created an attachment (id\u003d80171)\n-debug output\n\nIn this attachment\n\nswitch to J2EE Perspective\ninitialize server status\nrepublish\nstop server\nswitch to Java Perspective\nstop RAD\n",
    "Created an attachment (id\u003d80172)\n-debug output\n\nStart RAD\ndouble click on server\nthe problem appears",
    "Sorry for the confusion guys, but what I a found was a  potential problem. \n\nI had asked Gary for the logs to confirm the problem that I was seeing was indeed what was causing this failure. But after receiving the log the potential problem that I found is not what is causing the failure in Gary\u0027s case. \n\nI have asked him to send me the entire workspace so that I can actually recreate the problem locally and resolve this defect.",
    "(In reply to comment #12)\n\u003e Created an attachment (id\u003d80168) [details]\n\u003e -debug output (part 1)\n\u003e \n\u003e Here is the first of four attachments. Each one captures the -debug output that\n\u003e Angel asked for. The problem shows itself in the fourth attachment.\n\u003e \n\u003e Steps in this attachment:\n\u003e \n\u003e 14:40 Start RAD, Delete the old server,turn off UTC and autopublish\n\u003e 14:43 Start server\n\u003e 14:44 Add my ear, check the server by double clicking it\n\u003e 14:45 Run a servlet, then publish to server (NOP)\n\u003e 14:46 Restart in debug mode, run some servlets, shutdown RAD\n\u003e \n\nWhich servlet did you ran..? There is a few servlets in the workspace.\n",
    "(In reply to comment #17)\n\n\u003e \n\u003e Which servlet did you ran..? There is a few servlets in the workspace.\n\u003e \n\nI can\u0027t remember but I strongly suspect that it doesn\u0027t matter.\n\n",
    "Hi Gary, \n\nI tried to recreate the problem but I was not able. I hope you don\u0027t mind to setup a new trace, this time with the suggested changes from Tim and possibly see where the exception is happening. \n\nHere are the new trace settings:\n\n#Master Tracing Options\n#Sun Dec 09 11:17:26 EST 2007\norg.eclipse.wst.server.ui/performance\u003dfalse\norg.eclipse.wst.server.ui/extension_point\u003dtrue\norg.eclipse.wst.server.ui/debug\u003dtrue\norg.eclipse.wst.server.core/debug\u003dtrue\norg.eclipse.wst.server.core/extension_point\u003dtrue\norg.eclipse.wst.server.core/resources\u003dtrue\norg.eclipse.wst.server.core/listeners\u003dtrue\norg.eclipse.wst.server.core/performance\u003dfalse\n\nOnce you have more information please re-open the bug."
  ],
  "commentCreationDates": [
    "2007-09-28T22:38:42+02:00",
    "2007-09-28T22:42:28+02:00",
    "2007-09-28T23:24:26+02:00",
    "2007-10-01T12:38:22+02:00",
    "2007-10-01T12:40:47+02:00",
    "2007-10-01T14:43:27+02:00",
    "2007-10-01T14:48:42+02:00",
    "2007-10-01T15:02:47+02:00",
    "2007-10-01T19:50:44+02:00",
    "2007-10-03T17:37:42+02:00",
    "2007-10-11T20:38:57+02:00",
    "2007-10-11T20:53:05+02:00",
    "2007-10-11T21:04:12+02:00",
    "2007-10-11T21:06:37+02:00",
    "2007-10-11T21:08:14+02:00",
    "2007-10-11T21:08:55+02:00",
    "2007-10-12T16:15:31+02:00",
    "2007-11-22T19:47:36+01:00",
    "2007-11-26T15:41:15+01:00",
    "2007-12-09T16:39:03+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.AssertionFailedException",
      "message": "assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.core.runtime.Assert.isTrue",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.Assert.isTrue",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.setActivePage",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.part.MultiPageEditorPart.createPartControl",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPartHelper",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.createPart",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.getPart",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.EditorReference.getEditor",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.access$10",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$9.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.wst.server.ui.internal.view.servers.ServersView$1.widgetDefaultSelected",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "204954",
      "date": "2007-09-28T22:38:42+02:00",
      "product": "Web Tools",
      "component": "wst.server",
      "severity": "critical"
    }
  ],
  "groupId": "204954",
  "bugId": "204954",
  "date": "2007-09-28T22:38:42+02:00",
  "product": "Web Tools",
  "component": "wst.server",
  "severity": "critical"
}