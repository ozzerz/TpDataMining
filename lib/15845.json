{
  "comments": [
    "These instructions were posted on the newsgroup by Alan Boxall to help a user\nmanually debug JNI code:\n\n1) Add a breakpoint early in your java application before the JNI call is made.\n2) launch your java application in debug from within Eclipse.\n3) when you hit the java breakpoint, launch the cdt debugger and get it to\nattach to the debug JVM process\n4) If you are at the point where the C/C++ code has already been loaded then\nadd a breakpoint in the target of the JNI call.\n5) allow the process to resume\n6) now step or run the java code. \n\nThey should work.  In fact, since we support deferred breakpoints it should be\neven easier, because the user can stop in their main(String[]) function and\nset breakpoints in their to-be-loaded shared libraries.\n\nBut, the advice doesn\u0027t work, for a number of reasons:\n\n1. GDB 5.0 doesn\u0027t attach correctly to multithreaded programs.  This seems to be\nfixed in GDB 5.1.1, so users need to be told to upgrade their GDB or how to\npoint CDT at a second installed GDB in a nonstandard location.\n\n2. It then does work if you run gdb 5.1.1 manually, substituting these\ninstructions for Alan\u0027s step 3\n    % ps -eo flag,pid,fname\n        \u003clook for the last \"javaw\" process with flag\u003d000\u003e\n    % gdb511 /opt/IBMJava2-13/jre/bin/exe/javaw\n     (gdb)  attach  \u003cPID of process found before\u003e\n     (gdb)  break Java_class_method   # mangled name of JNI native method\n     (gdb)  c\n\n3. However I can\u0027t do that attach from within CDT.  The problems are\n     a. The process miner doesn\u0027t show enough info to pick the right javaw\n     b. When I try to attach to /opt/IBMJava2-13/jre/bin/exe/javaw I get \n        this exception\n\norg.eclipse.core.internal.boot.DelegatingLoaderException:\norg.eclipse.core.runtime.CoreException[2]: java.lang.NoSuchMethodException: \u003cinit\u003e\n\tat java.lang.Class.getConstructor0(Native Method)\n\tat java.lang.Class.getConstructor(Class.java:959)\n\tat\norg.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation(PluginDescriptor.java:674)\n\tat\norg.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation(PluginDescriptor.java:184)\n\tat\norg.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin(PluginClassLoader.java:52)\n\tat\norg.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf(PluginClassLoader.java(Compiled\nCode))\n\tat\norg.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass(DelegatingURLClassLoader.java(Compiled\nCode))\n\tat\norg.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass(DelegatingURLClassLoader.java(Compiled\nCode))\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java(Compiled Code))\n\tat\norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension(PluginDescriptor.java:128)\n\tat\norg.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension(PluginDescriptor.java:165)\n\tat\norg.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:96)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupExtension.newTabGroup(LaunchConfigurationTabGroupExtension.java:86)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationPresentationManager.getTabGroup(LaunchConfigurationPresentationManager.java:202)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.createGroup(LaunchConfigurationDialog.java:574)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.setTabsForConfigType(LaunchConfigurationDialog.java:1289)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.setLaunchConfiguration(LaunchConfigurationDialog.java:1223)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.constructNewConfig(LaunchConfigurationDialog.java:1578)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.handleNewPressed(LaunchConfigurationDialog.java:1561)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog$2.widgetSelected(LaunchConfigurationDialog.java:765)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:85)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.jface.window.Window.runEventLoop(Window.java(Compiled Code))\n\tat org.eclipse.jface.window.Window.open(Window.java:525)\n\tat\norg.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.open(LaunchConfigurationDialog.java:413)\n\tat\norg.eclipse.debug.internal.ui.actions.OpenLaunchConfigurationsAction.run(OpenLaunchConfigurationsAction.java:126)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:590)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:407)\n\tat\norg.eclipse.jface.action.ActionContributionItem.handleWidgetEvent(ActionContributionItem.java:361)\n\tat\norg.eclipse.jface.action.ActionContributionItem.access$0(ActionContributionItem.java:352)\n\tat\norg.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent(ActionContributionItem.java:47)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:819)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:777)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:319)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:190)\n\tat org.eclipse.core.launcher.Main.run(Main.java:549)\n\tat org.eclipse.core.launcher.Main.main(Main.java:390)\n\nWe don\u0027t have to provide a Cadillac solution to this problem immediately,\nbut it should be possible for users to debug JNI projects in Eclipse.",
    "Dave, can you add the additional flags to the process view/dialog?\nI will look at the other things.",
    "What flags do you think we need?",
    "From the above description, the ps command used is:\nps -eo flag,pid,fname\n\nWe are missing only one field, \"flag\".  So we need a flag for the \"flag\" field \n:-)",
    "Added the flag field to be displayed in the processes dialog selection, and \nremoved the requirment from the Attach launch config that the target be only an \nexecutable.  It can be a library, or a source file, since gdb gets all the info \nit needs from the pid.  (Added gdb command \"file /proc/%pid/exe\" for 5.1.1 to \nfigure all this directly from the process being attached to.  Seems that 5.2 \nfigures this out automaticaly, without need for this additional step.)",
    "Closing"
  ],
  "commentCreationDates": [
    "2002-05-13T15:34:38+02:00",
    "2002-05-13T18:49:55+02:00",
    "2002-05-14T16:03:11+02:00",
    "2002-05-16T16:58:45+02:00",
    "2002-05-16T17:22:49+02:00",
    "2003-09-10T15:06:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodException",
      "message": "\u003cinit\u003e",
      "elements": [
        {
          "method": "java.lang.Class.getConstructor0",
          "source": "Native Method"
        },
        {
          "method": "java.lang.Class.getConstructor",
          "source": "Class.java:959"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.internalDoPluginActivation",
          "source": "PluginDescriptor.java:674"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.doPluginActivation",
          "source": "PluginDescriptor.java:184"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.activatePlugin",
          "source": "PluginClassLoader.java:52"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginClassLoader.findClassParentsSelf",
          "source": "PluginClassLoader.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.boot.DelegatingURLClassLoader.loadClass",
          "source": "DelegatingURLClassLoader.java(Compiled Code)"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:128"
        },
        {
          "method": "org.eclipse.core.internal.plugins.PluginDescriptor.createExecutableExtension",
          "source": "PluginDescriptor.java:165"
        },
        {
          "method": "org.eclipse.core.internal.plugins.ConfigurationElement.createExecutableExtension",
          "source": "ConfigurationElement.java:96"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupExtension.newTabGroup",
          "source": "LaunchConfigurationTabGroupExtension.java:86"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationPresentationManager.getTabGroup",
          "source": "LaunchConfigurationPresentationManager.java:202"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.createGroup",
          "source": "LaunchConfigurationDialog.java:574"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.setTabsForConfigType",
          "source": "LaunchConfigurationDialog.java:1289"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.setLaunchConfiguration",
          "source": "LaunchConfigurationDialog.java:1223"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.constructNewConfig",
          "source": "LaunchConfigurationDialog.java:1578"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.handleNewPressed",
          "source": "LaunchConfigurationDialog.java:1561"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog$2.widgetSelected",
          "source": "LaunchConfigurationDialog.java:765"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:85"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.window.Window.runEventLoop",
          "source": "Window.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jface.window.Window.open",
          "source": "Window.java:525"
        },
        {
          "method": "org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationDialog.open",
          "source": "LaunchConfigurationDialog.java:413"
        },
        {
          "method": "org.eclipse.debug.internal.ui.actions.OpenLaunchConfigurationsAction.run",
          "source": "OpenLaunchConfigurationsAction.java:126"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:590"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:407"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetEvent",
          "source": "ActionContributionItem.java:361"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$0",
          "source": "ActionContributionItem.java:352"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$ActionListener.handleEvent",
          "source": "ActionContributionItem.java:47"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:819"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:777"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:319"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:190"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:549"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:390"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "15845",
      "date": "2002-05-13T15:34:38+02:00",
      "product": "CDT",
      "component": "cdt-debug",
      "severity": "major"
    }
  ],
  "groupId": "15845",
  "bugId": "15845",
  "date": "2002-05-13T15:34:38+02:00",
  "product": "CDT",
  "component": "cdt-debug",
  "severity": "major"
}