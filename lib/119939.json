{
  "comments": [
    "Using build 1.0RC2 (though problem has existed well before this build)\n\nAttempting to publish a dynamic web project resulted in the following message in the error log. The referenced file that could not be renamed (tmp38123.class) was present in the plugins metadata directory and could be manually renamed.\n\nA nearly identical problem was reported in bug 116963 and resolved as unreproducible.\n\nSee also bug 119934 related to EAR publishing to WAS 6.\n\nAll publishing to Websphere is blocked. Our only work around is to export a war file and manually install via WAS admin console.\n\nError 2005-12-08 10:22:44.338 Publish failed using Ant publisher\norg.eclipse.core.runtime.CoreException[0]: java.lang.Exception: Error renaming C:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.jst.server.core\\tmp38123.class to C:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.....server.wtpWeb\\org.eclipse.jst.server.websphere.core\\com.....server.wtpWeb\\WEB-INF\\classes\\com\\...\\...\\...\\server\\bean\\XXXXXX.class\n\tat org.eclipse.jst.server.core.PublishUtil.copyFile(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.copyFile(PublishUtil.java:154)\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.core.PublishUtil.smartCopy(PublishUtil.java(Compiled Code))\n\tat org.eclipse.jst.server.generic.core.internal.publishers.AbstractModuleAssembler.copyModule(AbstractModuleAssembler.java:126)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.WarModuleAssembler.assemble(WarModuleAssembler.java:28)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.assembleModule(AntPublisher.java:103)\n\tat org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.publish(AntPublisher.java:90)\n\tat org.eclipse.jst.server.generic.core.internal.GenericServerBehaviour.publishModule(GenericServerBehaviour.java:90)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModule(ServerBehaviourDelegate.java:658)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules(ServerBehaviourDelegate.java:738)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:596)\n\tat org.eclipse.wst.server.core.internal.Server.doPublish(Server.java:765)\n\tat org.eclipse.wst.server.core.internal.Server.publish(Server.java:754)\n\tat org.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:145)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)",
    "I ran WTP in debug mode. The statement throwing the exception is: \nclass: PulishUtil.copyFile(InputStream in, IPath to, long ts)\nstatement: if (!tempFile.renameTo(file))\n\t\tthrow new Exception(NLS.bind(Messages.errorRename, tempFile.toString(), file.toString()));\n\nThe problem seems to be that the target file path in variable file is 265 characters which is \u003e 256. \n\nThe same project publish to Tomcat OK because the path for the same class file is 209 characters.\n\nPublishing to Websphere uses a longer path than publish to Tomcat.\n\nTomcat path uses path that looks something like this:\nC:\\eclipse\\workspaces\\workspace-wtp-eval5\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp4\\webapps....\n\nThe Websphere path is considerable longer and looks something like this:\nC:\\eclipse\\workspaces\\workspace-wtp-eval5\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.ibm.xxxx.xxxx.server.wtpWeb\\org.eclipse.jst.server.websphere.core\\\n\nWe can shorten workspace path name and maybe the project name to get under 256 but it would helpful trim path length contibuted by WTP. For example in the overall path the project name is included twice. \n\n",
    "I trimed my workspace path to get under the 256 character limit issue. The publishing succeeded. The published app still has a problem because the context root that the app was published with used the module deploy name and did not use the value defined property context-root in file .component for this project.",
    "Adding to Hot List and setting priority to P2.\nSinan - please make a fix/defer recommendation to the PMC.\n\nJim, please split out the path length problem to a new bug and indicate it can be defered to 1.0.1.\n\nJim, can the main part also be defered to 1.0.1?",
    "The path length issue has been split out to bug 120146 for 1.0.1. The problem this bug needs to address is the problem with context root reported in comment #2",
    "Jim, you say \"and did not\nuse the value defined property context-root in file .component for this\nproject.\" \n\nHow did that property get set/changed? Hand editing by any chance? \nI think there\u0027s other bugs open to provide a why to change context root\nin R1.0.1, so, I am wondering if this is a \"need to change context root\" \nbug (which could be addressed with the other 1.0.1 bugs related to this area), or if this is a case where we (wizards) actually put in a value, and then do not honor it? \n\n",
    "Naci just posted the following information to wtp-dev:\n\n\"119939 is a more general bug.  It seems web module getContextRooot \nreturns in correct information and the context root value is not \navailable to servers/and generic ant publisher.\n\nWebSphere/WebLogic/JBoss all suffer the same problem.\n\nIt needs the attenteion of Chuck, Tim+Gorkem\"\n\nI am reassigning the Chuch since this sounds like a J2EE project issue.\n",
    "When changing the context-root in .component  file it must start with \u0027/\u0027 otherwise module name is used because of the code in AntPublisher :\n\n\tprivate String guessModuleName(IModule module) {\n\t\tString moduleName \u003d module.getName(); \n\t\tif(\"jst.web\".equals(getModuleTypeId())){ //$NON-NLS-1$\n\t\t\tIWebModule webModule \u003d (IWebModule)getModule()[0].loadAdapter(IWebModule.class,null);\n\t\t\tString contextRoot \u003d webModule.getContextRoot();\n\t\t\tif(contextRoot.charAt(0) \u003d\u003d \u0027/\u0027)\n\t\t\t\tmoduleName \u003d contextRoot.substring(1);\n\t\t}\n\t\treturn moduleName;\n\t}\n",
    "This looks like a simple fix.  We should assign it to Gorkem.",
    "The module name is not always equal to the context root, so we\u0027ve got to be careful here. It is valid to have a web module named \u0027MyWebApp\u0027 but with a context root of \u0027/myapp\u0027.\n\nIf the only problem with the context root is that the AntPublisher ignores it if it doesn\u0027t start with a \u0027/\u0027 then we should fix this; just want to make sure we don\u0027t equate the two and cause other problems.",
    "More from Naci - \n\n\"Sinan says he has found an easy fix to 119939.  It is very localized and \nsafe.  Can we add that to RC4?\"\n\nSounds promising - let\u0027s discuss at 3:00pm today - can you make it? I suggest you have Sinan commit the fix and we\u0027ll decided on releasing it this afternoon.\n\n",
    "While looking at that code snippet, I had a question:\n\n                        String contextRoot \u003d webModule.getContextRoot();\n                        if(contextRoot.charAt(0) \u003d\u003d \u0027/\u0027)\n                                moduleName \u003d contextRoot.substring(1);\n\nIs contextRoot always non-null?\n\nWill this throw an exception if the contextRoot is the empty string? Is that possible? If so, it\u0027s safer to use:\n\nif (contextRoot.startsWith(\"/\")) ...\n\n",
    "fix dropped to HEAD. ",
    "released ",
    "Gorkem, thx for the fix. Just for bookkeeping purposes, this shouldn\u0027t be marked as fixed until the PMC agrees to release it in RC4. Otherwise, it won\u0027t show up on our unresolved query. I\u0027m reopening this till our call today.",
    "All PMC members support it for RC4.",
    "resolving since RC4 is out",
    "This bug is being moved to the \"closed\" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug."
  ],
  "commentCreationDates": [
    "2005-12-08T18:38:09+01:00",
    "2005-12-09T00:32:38+01:00",
    "2005-12-09T01:14:10+01:00",
    "2005-12-09T16:33:32+01:00",
    "2005-12-09T18:31:27+01:00",
    "2005-12-12T05:18:05+01:00",
    "2005-12-12T16:23:46+01:00",
    "2005-12-12T16:28:47+01:00",
    "2005-12-12T16:32:49+01:00",
    "2005-12-12T16:37:40+01:00",
    "2005-12-12T16:44:54+01:00",
    "2005-12-12T16:59:53+01:00",
    "2005-12-12T17:06:29+01:00",
    "2005-12-12T17:14:05+01:00",
    "2005-12-12T17:57:19+01:00",
    "2005-12-12T20:14:17+01:00",
    "2005-12-13T20:40:22+01:00",
    "2006-09-23T03:07:50+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.Exception",
      "message": "Error renaming C:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.jst.server.core\\tmp38123.class to C:\\eclipse\\workspaces\\wtp-eval5\\.metadata\\.plugins\\org.eclipse.core.resources\\.projects\\com.....server.wtpWeb\\org.eclipse.jst.server.websphere.core\\com.....server.wtpWeb\\WEB-INF\\classes\\com\\...\\...\\...\\server\\bean\\XXXXXX.class",
      "elements": [
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.copyFile",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.copyFile",
          "source": "PublishUtil.java:154"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.core.PublishUtil.smartCopy",
          "source": "PublishUtil.java(Compiled Code)"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AbstractModuleAssembler.copyModule",
          "source": "AbstractModuleAssembler.java:126"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.WarModuleAssembler.assemble",
          "source": "WarModuleAssembler.java:28"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.assembleModule",
          "source": "AntPublisher.java:103"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.publishers.AntPublisher.publish",
          "source": "AntPublisher.java:90"
        },
        {
          "method": "org.eclipse.jst.server.generic.core.internal.GenericServerBehaviour.publishModule",
          "source": "GenericServerBehaviour.java:90"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModule",
          "source": "ServerBehaviourDelegate.java:658"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publishModules",
          "source": "ServerBehaviourDelegate.java:738"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish",
          "source": "ServerBehaviourDelegate.java:596"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:765"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:754"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "119939",
      "date": "2005-12-08T18:38:09+01:00",
      "product": "Web Tools",
      "component": "jst.server",
      "severity": "major"
    }
  ],
  "groupId": "119939",
  "bugId": "119939",
  "date": "2005-12-08T18:38:09+01:00",
  "product": "Web Tools",
  "component": "jst.server",
  "severity": "major"
}