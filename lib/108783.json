{
  "comments": [
    "The following code should print:\na\nb\non the standard output stream.\nInstead, we get an error:\nclass file for X.java:\njava.lang.NoSuchMethodError: java.lang.Runnable.iterator()Ljava/util/Iterator;\n\tat X.foo(X.java:7)\n\tat X.main(X.java:17)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n...\n\nSource file:\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.List;\n\npublic class X implements Iterable\u003cString\u003e, Runnable {\n\tpublic \u003cT extends Runnable \u0026 Iterable\u003cString\u003e\u003e void foo(T t) {\n\t\tfor (String s : t)\n\t\t\tSystem.out.println(s);\n\t}\n\tpublic void run() {\t/* */ }\n\tprivate List\u003cString\u003e list \u003d Arrays.asList(new String[] { \"a\", \"b\" });\n\tpublic Iterator\u003cString\u003e iterator() {\n\t\treturn this.list.iterator();\n\t}\n\tpublic static void main(String... args) {\n\t\tX x \u003d new X();\n\t\tx.foo(x);\n\t}\n}\n\n(Prepared test case GenericTypeTest#test810, tested against 3.1 maintenance\nbranch today.)",
    "Created an attachment (id\u003d26827)\nTest case\n\nMoved test case to test812.",
    "The bug comes from the line 183:\nfinal TypeBinding collectionTypeBinding \u003d collection.resolvedType.erasure();\nThis returns the first bound of the type variable.\nThe type variable is:\n\u003cT extends java.lang.Runnable \u0026 Iterable\u003cjava.lang.String\u003e\u003e\n\nWe should return the part that is compatible with java.lang.Iterable.",
    "In this case, the declaring class of the iterator() call should be\njava.util.ArrayList.\n\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.ArrayList;\n\npublic class X {\n\tpublic static \u003cT extends ArrayList\u003cString\u003e\u003e void foo(T t) {\n\t\tfor (String s : t)\n\t\t\tSystem.out.print(s);\n\t}\n\tprivate static ArrayList\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n\tstatic {\n\t\tlist.addAll(Arrays.asList(new String[] { \"a\", \"b\" }));\n\t}\n\tpublic static void main(String... args) {\n\t\tfoo(list);\n\t}\n}",
    "Added disabled regression tests in\norg.eclipse.jdt.core.tests.compiler.regression.ForeachStatementTest.\n_test033 and _test034.\nOnce this is fixed, we should add a comparison of the disassembled code for the\nmethod foo() in order to check the declaring class of the iterator() call.",
    "There is more to it. We should also insert a generic cast to Iterable, and use\nIterable as the declaring class when the erasure isn\u0027t a good match.",
    "Forked a separate bug for cast insertions.",
    "Added ForeachStatementTest#test033-035.\nFixed (only fixing the #iterator() invocation declaring class in descriptor).\n\nOlivier - can you pls enable your tests as well ?",
    "Separate bug for cast insertions is bug 109098",
    "Verified in I20050921-0010 for 3.2M2",
    "Verified for 3.1.1 using M20050923-1430."
  ],
  "commentCreationDates": [
    "2005-09-05T12:25:09+02:00",
    "2005-09-05T12:38:59+02:00",
    "2005-09-06T20:38:57+02:00",
    "2005-09-06T20:44:41+02:00",
    "2005-09-06T21:16:56+02:00",
    "2005-09-08T14:37:20+02:00",
    "2005-09-09T19:19:24+02:00",
    "2005-09-09T19:20:46+02:00",
    "2005-09-09T19:24:59+02:00",
    "2005-09-21T16:48:50+02:00",
    "2005-09-26T17:33:41+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NoSuchMethodError",
      "message": "java.lang.Runnable.iterator()Ljava/util/Iterator;",
      "elements": [
        {
          "method": "X.foo",
          "source": "X.java:7"
        },
        {
          "method": "X.main",
          "source": "X.java:17"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "108783",
      "date": "2005-09-05T12:25:09+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "108783",
  "bugId": "108783",
  "date": "2005-09-05T12:25:09+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}