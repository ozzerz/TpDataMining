{
  "comments": [
    "For some strange reason mysterious error messages appear when running a woven\njar file with jdom-b9.jar in the classpath. When jdom-b9.jar is replaced with \njdom.jar the problems disappear. \n\nSetup: using the ant iajc task to compile the sources works as expected (without\nerror messages)\nRunning the generated jar (as junit tests) causes errors like:\n\nException while initializing nl_uu_tracing_AbstractTrace: java.lang.VerifyError:\n(class: nl/uu/retrieval/XmlInfoDocument, method: StoreNode signature:\n(Lnl/uu/retrieval/IInfoNode;Lnl/uu/retrieval/ITracingInfoWriter;)V) Incompatible\nargument to function\norg.aspectj.lang.NoAspectBoundException: Exception while initializing\nnl_uu_tracing_AbstractTrace: java.lang.VerifyError: (class:\nnl/uu/retrieval/XmlInfoDocument, method: StoreNode signature:\n(Lnl/uu/retrieval/IInfoNode;Lnl/uu/retrieval/ITracingInfoWriter;)V) Incompatible\nargument to function\n\tat nl.uu.tracing.AbstractTrace.aspectOf(AbstractTrace.aj)\n\tat\ncom.puppycrawl.tools.checkstyle.UtilsTest.testLengthExpandedTabs(UtilsTest.java:37)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nCaused by: java.lang.VerifyError: (class: nl/uu/retrieval/XmlInfoDocument,\nmethod: StoreNode signature:\n(Lnl/uu/retrieval/IInfoNode;Lnl/uu/retrieval/ITracingInfoWriter;)V) Incompatible\nargument to function\n\tat nl.uu.tracing.AbstractTrace.createXmlFile(AbstractTrace.aj:241)\n\tat nl.uu.tracing.AbstractTrace.\u003cinit\u003e(AbstractTrace.aj:57)\n\tat nl.uu.tracing.AbstractTrace.ajc$postClinit(AbstractTrace.aj)\n\tat nl.uu.tracing.AbstractTrace.\u003cclinit\u003e(AbstractTrace.aj:51)\n\tat com.puppycrawl.tools.checkstyle.UtilsTest.testLengthExpandedTabs(UtilsTest.java)\n\nthe nl.uu.tracing namespace contains the aspect (AbstractTrace) which is woven\nthrough the checkstyle unit test suite. nl.uu.retrieval contains classes for\nsaving the retrieved information. The exact working is not relevant, but the\nerror message is very confusing.\n\nWork around: remove jdom-b9.jar from the classpath.\n\nThis error occurs in 1.5 M1 as well.",
    "The problem seemed to be caused by version problems between the different jdom\nversions. The nl.uu.retrieval package is compiled with jdom.jar.\n\nThe actual object passed to StoreNode is an extension of a jdom.Element ant\nimplements nl.uu.retrieval.IInfoNode. It seems that the class veriefier expected\na different version (from jdom-b9.jar) then was actually passed (from jdom.jar). \n\nBut the error message is very confusing. Maybe the aspectj compiler can check\nfor these kind of version problems at compile time? That would make it easier to\nfix the problem then such cryptic runtime exceptions.",
    "Just to check I\u0027ve understood the scenario correctly...\n\nwhich version of jdom did you have on the classpath when weaving your\napplication? Sounds like it was jdom.jar? And then at runtime you replaced\njdom.jar with jdom-b9.jar (or at least had jdom-b9.jar ahead of jdom.jar in your\nclasspath)?\n\nThen the problem arises that there is an incompatible class change between the\njdom and jdom-b9 libraries, and this is detected at runtime but with a confusing\nerror message? (I don\u0027t see how we could put out a compile-time warning for a\nlibrary change that will happen at some later point and of which we have no\nknowledge when compiling???)",
    "Yep, you are completly right. It will be almost impossible to provide a nice\nsolution for this problem since you can only detect it at runtime. A possible\nsolution is to include exception handling code into the woven code that catches\nthis exception and gives a better error description. But this would probably\nhave to much overhead.\n\nHowever, it might be useful to include this problem into the documentation or\nFAQ. Then will make it easier for others who run into similar problems to solve\nthe problem. It took me quite some time to find this solution as I couldn\u0027t find\nany docs on it.",
    "a possible doc enhancement once we\u0027ve cleared the decks for 1.5.0..."
  ],
  "commentCreationDates": [
    "2005-03-23T13:20:19+01:00",
    "2005-03-24T13:54:36+01:00",
    "2005-04-06T15:05:42+02:00",
    "2005-04-13T09:39:05+02:00",
    "2005-10-28T12:21:59+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.VerifyError",
      "message": "(class: nl/uu/retrieval/XmlInfoDocument, method: StoreNode signature: (Lnl/uu/retrieval/IInfoNode;Lnl/uu/retrieval/ITracingInfoWriter;)V) Incompatible argument to function",
      "elements": [
        {
          "method": "nl.uu.tracing.AbstractTrace.aspectOf",
          "source": "AbstractTrace.aj"
        },
        {
          "method": "com.puppycrawl.tools.checkstyle.UtilsTest.testLengthExpandedTabs",
          "source": "UtilsTest.java:37"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.VerifyError",
        "message": "(class: nl/uu/retrieval/XmlInfoDocument, method: StoreNode signature: (Lnl/uu/retrieval/IInfoNode;Lnl/uu/retrieval/ITracingInfoWriter;)V) Incompatible argument to function",
        "elements": [
          {
            "method": "nl.uu.tracing.AbstractTrace.createXmlFile",
            "source": "AbstractTrace.aj:241"
          },
          {
            "method": "nl.uu.tracing.AbstractTrace.\u003cinit\u003e",
            "source": "AbstractTrace.aj:57"
          },
          {
            "method": "nl.uu.tracing.AbstractTrace.ajc$postClinit",
            "source": "AbstractTrace.aj"
          },
          {
            "method": "nl.uu.tracing.AbstractTrace.\u003cclinit\u003e",
            "source": "AbstractTrace.aj:51"
          },
          {
            "method": "com.puppycrawl.tools.checkstyle.UtilsTest.testLengthExpandedTabs",
            "source": "UtilsTest.java"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "88842",
      "date": "2005-03-23T13:20:19+01:00",
      "product": "AspectJ",
      "component": "Compiler",
      "severity": "enhancement"
    }
  ],
  "groupId": "88842",
  "bugId": "88842",
  "date": "2005-03-23T13:20:19+01:00",
  "product": "AspectJ",
  "component": "Compiler",
  "severity": "enhancement"
}