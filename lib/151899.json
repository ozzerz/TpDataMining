{
  "comments": [
    "Trac ticket information needs to be stored using RepositoryTaskData in order to implement support for working in offline mode.",
    "Here is a short summary of the things I plan to implement (based on what I found out studying the Bugzilla implementation):\n\n * TracAttributeFactory maps predefined RepositoryTaskAttribute keys to TracTicket keys (each key has a visible name, a hidden and read-only property which is used by AbstractRepositoryTaskEditor)\n * RepositoryTaskData stores attributes by TracTicket keys\n * TracOfflineTaskHandler retrieves a Trac ticket and creates the corresponding RepositoryTaskData object\n * Currently there is no efficient way to implement getChangedSinceLastSync() since Trac does not support queries by time\n * A few minor changes/fixes will be required for the Mylar task ui plug-in\n\nAnything else I need to look out for?",
    "The similarity between task data and the configuration cache (bug# 150680) suggests a single persistence strategy may be in order.",
    "I would like to keep the configuration cache as simple as possible. Using the AttributeContainer classes seems a bit of an overkill. ",
    "Let\u0027s discuss this during tomorrow\u0027s call.\n\nSteffen, the lack of a mechanism for getChangedSinceLastSync() is a problem, and we need to brainstorm a work-around or submit a feature request to Trac.  Without this every task will get a full synch with the repository during each synch, which does not scale.",
    "Created an attachment (id\u003d48554)\nTrac support for IOfflineTaskHandler and RepositoryTaskData\n\n",
    "Created an attachment (id\u003d48555)\nmylar/context/zip\n\n",
    "Patch applied.  Please mark resolved if this completes the task.",
    "Created an attachment (id\u003d48600)\nTest cases and fixes\n\nThis patch enables task context retrieval for Trac.",
    "Created an attachment (id\u003d48601)\nmylar/context/zip\n\n",
    "I have requested an api call for getting a list of changed tickets in the Trac XmlRpcPlugin: http://trac-hacks.org/ticket/648 .",
    "Created an attachment (id\u003d48603)\nTest cases and fixes (fixed exported packages)\n\n",
    "Patch applied.  What\u0027s the path to the mylar.eclipse.org repository that I be using for testing?  Just put your answer to that question straight onto the wiki: http://wiki.eclipse.org/index.php/Mylar_Contributor_Reference#Building_Connectors\n\nFyi I\u0027m seeing this exception in my log now, haven\u0027t investigated yet:\n\norg.eclipse.mylar.internal.trac.core.TracRemoteException: org.apache.xmlrpc.XmlRpcException: \u0027Ticket 20 does not exist.\u0027 while executing \u0027ticket.get()\u0027\n\tat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call(TracXmlRpcClient.java:96)\n\tat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.getTicket(TracXmlRpcClient.java:157)\n\tat org.eclipse.mylar.internal.trac.TracOfflineTaskHandler.downloadTaskData(TracOfflineTaskHandler.java:67)\n\tat org.eclipse.mylar.tasks.ui.SynchronizeTaskJob.run(SynchronizeTaskJob.java:87)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)\nCaused by: org.apache.xmlrpc.XmlRpcException: \u0027Ticket 20 does not exist.\u0027 while executing \u0027ticket.get()\u0027\n\tat org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse(XmlRpcStreamTransport.java:181)\n\tat org.eclipse.mylar.internal.trac.core.TracHttpClientTransportFactory$TracHttpClientTransport.sendRequest(TracHttpClientTransportFactory.java:147)\n\tat org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:53)\n\tat org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:166)\n\tat org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:136)\n\tat org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:125)\n\tat org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call(TracXmlRpcClient.java:88)\n\t... 4 more\n",
    "I\u0027m also seeing this failure in the tests:\n\njunit.framework.AssertionFailedError\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat junit.framework.Assert.assertTrue(Assert.java:20)\n\tat junit.framework.Assert.assertTrue(Assert.java:27)\n\tat org.eclipse.mylar.trac.tests.TracOfflineTaskHandlerTest.testGetChangedSinceLastSyncXmlRpc010(TracOfflineTaskHandlerTest.java:108)\n\n",
    "I deleted that \"ticket 20\" task and the error in comment#12 does not occur anymore.",
    "(In reply to comment #14)\n\u003e I deleted that \"ticket 20\" task and the error in comment#12 does not occur\n\u003e anymore.\n\nI have seen the same error when a query contained a ticket which did not exist anymore (or the ticket was added manually). This should not happen for production repositories as tickets are never deleted. \n\nSome of the test cases actually call ticket.delete() through XML-RPC for cleanup so that may have lead to the stale task in Mylar.\n\n",
    "(In reply to comment #13)\n\u003e I\u0027m also seeing this failure in the tests:\n[...]\n\nCould you run the test cases again? The XmlRpcPlugin on mylar.eclipse.org may have not been updated to the latest version, yet.\n",
    "Counting on tickets not to be deleted from non-testing repositories seems very reasonable.\n\nI still get the failure in comment#13 when running AllTracTests.  Is that test passing for you?",
    "All tests pass when run from my working copy. This could be caused by a date/time conversion error since our machines are running on different time zones. I\u0027ll look into this today.",
    "Created an attachment (id\u003d48733)\nset XML-RPC time zone setting to UTC\n\nThe fix is simpler than I thought. If the test case doesn\u0027t fail anymore this report can be closed.",
    "Created an attachment (id\u003d48734)\nmylar/context/zip\n\n",
    "Patch applied and tests pass."
  ],
  "commentCreationDates": [
    "2006-07-26T21:18:30+02:00",
    "2006-08-01T03:43:26+02:00",
    "2006-08-02T01:50:45+02:00",
    "2006-08-02T02:41:33+02:00",
    "2006-08-02T09:20:17+02:00",
    "2006-08-24T05:29:07+02:00",
    "2006-08-24T05:29:19+02:00",
    "2006-08-24T06:12:55+02:00",
    "2006-08-24T18:31:12+02:00",
    "2006-08-24T18:31:18+02:00",
    "2006-08-24T18:34:00+02:00",
    "2006-08-24T18:53:36+02:00",
    "2006-08-24T19:04:33+02:00",
    "2006-08-24T19:06:09+02:00",
    "2006-08-24T19:13:33+02:00",
    "2006-08-24T19:36:06+02:00",
    "2006-08-24T19:47:56+02:00",
    "2006-08-24T19:56:39+02:00",
    "2006-08-24T20:04:53+02:00",
    "2006-08-25T17:26:26+02:00",
    "2006-08-25T17:26:28+02:00",
    "2006-08-25T20:21:16+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.apache.xmlrpc.XmlRpcException",
      "message": "\u0027Ticket 20 does not exist.\u0027 while executing \u0027ticket.get()\u0027",
      "elements": [
        {
          "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call",
          "source": "TracXmlRpcClient.java:96"
        },
        {
          "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.getTicket",
          "source": "TracXmlRpcClient.java:157"
        },
        {
          "method": "org.eclipse.mylar.internal.trac.TracOfflineTaskHandler.downloadTaskData",
          "source": "TracOfflineTaskHandler.java:67"
        },
        {
          "method": "org.eclipse.mylar.tasks.ui.SynchronizeTaskJob.run",
          "source": "SynchronizeTaskJob.java:87"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "causedBy": {
        "exceptionType": "org.apache.xmlrpc.XmlRpcException",
        "message": "\u0027Ticket 20 does not exist.\u0027 while executing \u0027ticket.get()\u0027",
        "elements": [
          {
            "method": "org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse",
            "source": "XmlRpcStreamTransport.java:181"
          },
          {
            "method": "org.eclipse.mylar.internal.trac.core.TracHttpClientTransportFactory$TracHttpClientTransport.sendRequest",
            "source": "TracHttpClientTransportFactory.java:147"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClientWorker.execute",
            "source": "XmlRpcClientWorker.java:53"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClient.execute",
            "source": "XmlRpcClient.java:166"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClient.execute",
            "source": "XmlRpcClient.java:136"
          },
          {
            "method": "org.apache.xmlrpc.client.XmlRpcClient.execute",
            "source": "XmlRpcClient.java:125"
          },
          {
            "method": "org.eclipse.mylar.internal.trac.core.TracXmlRpcClient.call",
            "source": "TracXmlRpcClient.java:88"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 12,
      "bugId": "151899",
      "date": "2006-08-24T19:04:33+02:00",
      "product": "Mylyn",
      "component": "Trac",
      "severity": "enhancement"
    },
    {
      "exceptionType": "junit.framework.AssertionFailedError",
      "elements": [
        {
          "method": "junit.framework.Assert.fail",
          "source": "Assert.java:47"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:20"
        },
        {
          "method": "junit.framework.Assert.assertTrue",
          "source": "Assert.java:27"
        },
        {
          "method": "org.eclipse.mylar.trac.tests.TracOfflineTaskHandlerTest.testGetChangedSinceLastSyncXmlRpc010",
          "source": "TracOfflineTaskHandlerTest.java:108"
        }
      ],
      "number": 1,
      "commentIndex": 13,
      "bugId": "151899",
      "date": "2006-08-24T19:06:09+02:00",
      "product": "Mylyn",
      "component": "Trac",
      "severity": "enhancement"
    }
  ],
  "groupId": "151899",
  "bugId": "151899",
  "date": "2006-07-26T21:18:30+02:00",
  "product": "Mylyn",
  "component": "Trac",
  "severity": "enhancement"
}