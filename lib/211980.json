{
  "comments": [
    "Build ID: N/A\n\nSteps To Reproduce:\nSorry, but i am using BIRT 2.2.2. as suggested in #211475 and still sometimes get the exception (another one mentioned in 211475 is gone):\n\n****************************************\njava.lang.NullPointerException\n        at\norg.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitCell(ScriptedDesignVisitor.java:613)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitCell(DesignVisitor.java:1077)\n        at org.eclipse.birt.report.model.elements.Cell.apply(Cell.java:81)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123)\n        at\norg.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitRow(ScriptedDesignVisitor.java:603)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitRow(DesignVisitor.java:1101)\n        at\norg.eclipse.birt.report.model.elements.TableRow.apply(TableRow.java:75)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123)\n        at\norg.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitTable(ScriptedDesignVisitor.java:558)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitTable(DesignVisitor.java:1053)\n        at\norg.eclipse.birt.report.model.elements.TableItem.apply(TableItem.java:80)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123)\n        at\norg.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitReportDesign(ScriptedDesignVisitor.java:354)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitReportDesign(DesignVisitor.java:1175)\n        at\norg.eclipse.birt.report.model.elements.ReportDesign.apply(ReportDesign.java:89)\n        at\norg.eclipse.birt.report.model.api.DesignVisitor.apply(DesignVisitor.java:123)\n        at\norg.eclipse.birt.report.engine.api.impl.EngineTask.prepareDesign(EngineTask.java:1197)\n        at\norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:83)\n        at\norg.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:68)\n        at BugTest$ThreadTestUnit.run(BugTest.java:98)\n\n*************************************\n\nThis happens much less often than in BIRT 2.2.1 and also on higher number of concurrent threads. Please use test case code from 211475, change it to spawn 200 threads and make repeatable runs because issue doesn\u0027t reproduce every time.\n\n\nMore information:",
    "Is this a thread safety issue or is this an error condition handling issue?  There should be no static global in engine\u0027s runtask that has not been initialized.  All access to global shared object, if there is any, should be read only during a task execution.",
    "Please run cases and see whether we can reproduce.",
    "Could you attach the design file? Thanks",
    "There will be exception in building slot handle of DesignElementHandle class, if you use the same design element handle instance in multiple thread. ",
    "(In reply to comment #4)\n\u003e There will be exception in building slot handle of DesignElementHandle class,\n\u003e if you use the same design element handle instance in multiple thread. \n\u003e \n\nDoes engine run task make read only access to the Report\u0027s design handle?  What is the reason model is building a slot handle?  Or is it Engine that is building a slot handle in  its IR?  But IR would not be shared among runtask, right?",
    "(In reply to comment #5)\n\u003e \n\u003e Does engine run task make read only access to the Report\u0027s design handle?  What\n\u003e is the reason model is building a slot handle?  Or is it Engine that is\n\u003e building a slot handle in  its IR?  But IR would not be shared among runtask,\n\u003e right?\n\u003e \n\nEngine confirmed that one report design handle can be shared by multiple thread render task. It means that Model API must guarantee read-only safety in multithread. \n\nDesignElementHandle.getSlot() will construct the SlotHandle instance and return it. To construct a SlotHandle simultaneously may result in NPE . ",
    "One NPE has been fixed in the Model codes. However, another NPE raised in the Data codes. Reassign for further investigation.\n\n2007-12-13 12:59:14 org.eclipse.birt.report.data.oda.sampledb.SampledbPlugin start\n\u0026#20449;\u0026#24687;: Sampledb plugin starts up. Current startCount\u003d0\n2007-12-13 12:59:14 org.eclipse.birt.report.data.oda.sampledb.SampledbPlugin init\n\u0026#20449;\u0026#24687;: Creating Sampledb database at location C:\\DOCUME~1\\xhe\\LOCALS~1\\Temp\\/BIRTSampleDB_1197521954437_1b000e7\n2007-12-13 12:59:58 org.eclipse.birt.report.engine.api.impl.RunAndRenderTask doRun\n\u0026#20005;\u0026#37325;: An error happened while running the report. Cause:\njava.lang.NullPointerException\n\tat org.eclipse.birt.data.engine.impl.DataEngineImpl.clearTempFile(DataEngineImpl.java:573)\n\tat org.eclipse.birt.data.engine.impl.DataEngineImpl.shutdown(DataEngineImpl.java:561)\n\tat org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.shutdown(DataRequestSessionImpl.java:342)\n\tat org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.shutdown(AbstractDataEngine.java:280)\n\tat org.eclipse.birt.report.engine.executor.ExecutionContext.closeDataEngine(ExecutionContext.java:723)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:142)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:66)\n\tat BugTest$ThreadTestUnit.run(BugTest.java:92)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)\nException in thread \"pool-1-thread-539\" java.lang.RuntimeException: org.eclipse.birt.report.engine.api.EngineException: Error happened while running the report\n\tat BugTest$ThreadTestUnit.run(BugTest.java:95)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)\nCaused by: org.eclipse.birt.report.engine.api.EngineException: Error happened while running the report\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:153)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:66)\n\tat BugTest$ThreadTestUnit.run(BugTest.java:92)\n\t... 3 more\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.birt.data.engine.impl.DataEngineImpl.clearTempFile(DataEngineImpl.java:573)\n\tat org.eclipse.birt.data.engine.impl.DataEngineImpl.shutdown(DataEngineImpl.java:561)\n\tat org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.shutdown(DataRequestSessionImpl.java:342)\n\tat org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.shutdown(AbstractDataEngine.java:280)\n\tat org.eclipse.birt.report.engine.executor.ExecutionContext.closeDataEngine(ExecutionContext.java:723)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:142)\n\t... 5 more",
    "The exception happen in data engine might rise by our open too many file handles for temp file storage. ",
    "schedule to 2.2.2 since this is an NPE.  please check into both 2.2.2 and 2.3 branch.",
    "(In reply to comment #8)\n\u003e The exception happen in data engine might rise by our open too many file\n\u003e handles for temp file storage. \n\nthe exception is at clearTempFile(), could it be temp file name not unique?\n\nAlso, what are these temp file for in DtE?"
  ],
  "commentCreationDates": [
    "2007-12-05T10:35:13+01:00",
    "2007-12-12T01:49:14+01:00",
    "2007-12-12T03:03:57+01:00",
    "2007-12-12T06:19:04+01:00",
    "2007-12-12T08:59:26+01:00",
    "2007-12-12T18:57:41+01:00",
    "2007-12-13T01:44:22+01:00",
    "2007-12-14T06:20:27+01:00",
    "2007-12-14T07:32:03+01:00",
    "2007-12-14T20:22:24+01:00",
    "2007-12-16T03:46:12+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitCell",
          "source": "ScriptedDesignVisitor.java:613"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitCell",
          "source": "DesignVisitor.java:1077"
        },
        {
          "method": "org.eclipse.birt.report.model.elements.Cell.apply",
          "source": "Cell.java:81"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor.apply",
          "source": "DesignVisitor.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitRow",
          "source": "ScriptedDesignVisitor.java:603"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitRow",
          "source": "DesignVisitor.java:1101"
        },
        {
          "method": "org.eclipse.birt.report.model.elements.TableRow.apply",
          "source": "TableRow.java:75"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor.apply",
          "source": "DesignVisitor.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitTable",
          "source": "ScriptedDesignVisitor.java:558"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitTable",
          "source": "DesignVisitor.java:1053"
        },
        {
          "method": "org.eclipse.birt.report.model.elements.TableItem.apply",
          "source": "TableItem.java:80"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor.apply",
          "source": "DesignVisitor.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.ScriptedDesignVisitor.visitReportDesign",
          "source": "ScriptedDesignVisitor.java:354"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor$Forwarder.visitReportDesign",
          "source": "DesignVisitor.java:1175"
        },
        {
          "method": "org.eclipse.birt.report.model.elements.ReportDesign.apply",
          "source": "ReportDesign.java:89"
        },
        {
          "method": "org.eclipse.birt.report.model.api.DesignVisitor.apply",
          "source": "DesignVisitor.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.EngineTask.prepareDesign",
          "source": "EngineTask.java:1197"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
          "source": "RunAndRenderTask.java:83"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:68"
        },
        {
          "method": "BugTest$ThreadTestUnit.run",
          "source": "BugTest.java:98"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "211980",
      "date": "2007-12-05T10:35:13+01:00",
      "product": "BIRT",
      "component": "Data",
      "severity": "normal"
    },
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.birt.data.engine.impl.DataEngineImpl.clearTempFile",
          "source": "DataEngineImpl.java:573"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.DataEngineImpl.shutdown",
          "source": "DataEngineImpl.java:561"
        },
        {
          "method": "org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.shutdown",
          "source": "DataRequestSessionImpl.java:342"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.shutdown",
          "source": "AbstractDataEngine.java:280"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.closeDataEngine",
          "source": "ExecutionContext.java:723"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
          "source": "RunAndRenderTask.java:142"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:66"
        },
        {
          "method": "BugTest$ThreadTestUnit.run",
          "source": "BugTest.java:92"
        },
        {
          "method": "java.util.concurrent.ThreadPoolExecutor$Worker.runTask",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.concurrent.ThreadPoolExecutor$Worker.run",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "number": 1,
      "commentIndex": 7,
      "bugId": "211980",
      "date": "2007-12-14T06:20:27+01:00",
      "product": "BIRT",
      "component": "Data",
      "severity": "normal"
    },
    {
      "exceptionType": "org.eclipse.birt.report.engine.api.EngineException",
      "message": "Error happened while running the report",
      "elements": [
        {
          "method": "BugTest$ThreadTestUnit.run",
          "source": "BugTest.java:95"
        },
        {
          "method": "java.util.concurrent.ThreadPoolExecutor$Worker.runTask",
          "source": "Unknown Source"
        },
        {
          "method": "java.util.concurrent.ThreadPoolExecutor$Worker.run",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Unknown Source"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.birt.report.engine.api.EngineException",
        "message": "Error happened while running the report",
        "elements": [
          {
            "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
            "source": "RunAndRenderTask.java:153"
          },
          {
            "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
            "source": "RunAndRenderTask.java:66"
          },
          {
            "method": "BugTest$ThreadTestUnit.run",
            "source": "BugTest.java:92"
          }
        ],
        "causedBy": {
          "exceptionType": "java.lang.NullPointerException",
          "elements": [
            {
              "method": "org.eclipse.birt.data.engine.impl.DataEngineImpl.clearTempFile",
              "source": "DataEngineImpl.java:573"
            },
            {
              "method": "org.eclipse.birt.data.engine.impl.DataEngineImpl.shutdown",
              "source": "DataEngineImpl.java:561"
            },
            {
              "method": "org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.shutdown",
              "source": "DataRequestSessionImpl.java:342"
            },
            {
              "method": "org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.shutdown",
              "source": "AbstractDataEngine.java:280"
            },
            {
              "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.closeDataEngine",
              "source": "ExecutionContext.java:723"
            },
            {
              "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun",
              "source": "RunAndRenderTask.java:142"
            }
          ],
          "number": 0,
          "commentIndex": 0
        },
        "number": 0,
        "commentIndex": 0
      },
      "number": 2,
      "commentIndex": 7,
      "bugId": "211980",
      "date": "2007-12-14T06:20:27+01:00",
      "product": "BIRT",
      "component": "Data",
      "severity": "normal"
    }
  ],
  "groupId": "211980",
  "bugId": "211980",
  "date": "2007-12-05T10:35:13+01:00",
  "product": "BIRT",
  "component": "Data",
  "severity": "normal"
}