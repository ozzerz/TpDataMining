{
  "comments": [
    "A client has a situation where they have many dozen diagrams open and are arranging shapes on all them (which can be a long task).  They then close all the diagrams, without saving, and get a NPE in \nTargetingTool.updateTargetUnderMouse().\n\nHere is part of the stack trace:\njava.lang.NullPointerException\n\tat org.eclipse.gef.tools.TargetingTool.updateTargetUnderMouse(Unknown Source)\n\tat org.eclipse.gef.tools.TargetingTool.unlockTargetEditPart(Unknown Source)\n\tat org.eclipse.gef.tools.TargetingTool.deactivate(Unknown Source)\n\tat org.eclipse.gef.tools.SelectionTool.deactivate(Unknown Source)\n\tat org.eclipse.gef.EditDomain.setActiveTool(Unknown Source)\n\tat org.eclipse.gef.ui.parts.GraphicalEditor.dispose(Unknown Source)\n\tat com.ibm.xtools.presentation.internal.ui.parts.DiagramEditor.dispose(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPartReference.dispose(Unknown Source)\n\tat org.eclipse.ui.internal.EditorManager$Editor.dispose(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage$5.run(Unknown Source)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run(Unknown Source)\n\tat org.eclipse.core.runtime.Platform.run(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.disposePart(Unknown Source)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditor(Unknown Source)\n\nLooking at the code, I think this could happen in TargetingTool.updateTargetUnderMouse() because getCurrentViewer() is null.  The javadoc from getCurrentViewer() says that it could return null.  I think we should add a null check on getCurrentViewer() to protect against this.",
    "\u003e java.lang.NullPointerException\n\u003e         at org.eclipse.gef.tools.TargetingTool.updateTargetUnderMouse(Unknown\n\u003e Source)\n\u003e         at org.eclipse.gef.tools.TargetingTool.unlockTargetEditPart(Unknown\n\u003e Source)\n\u003e         at org.eclipse.gef.tools.TargetingTool.deactivate(Unknown Source)\n\nI\u0027m having trouble reading the trace. deactivate() does not call unlockTargetEditPart in TargetingTool. Please provide steps to reproduce.",
    "I couldn\u0027t figure out how unlockTargetEditPart() was called either, but that\u0027s the trace that was given.  The scenario to reproduce involves a client\u0027s application.\n\nIf getCurrentViewer() says it could return null on deactivate, is it not possible that this situation could arise?  Why can\u0027t we just add a null check when calling getCurrentViewer()?",
    "\n\n*** This bug has been marked as a duplicate of 119767 ***"
  ],
  "commentCreationDates": [
    "2006-05-09T17:11:06+02:00",
    "2006-05-09T17:46:55+02:00",
    "2006-05-09T18:04:08+02:00",
    "2006-05-09T20:27:55+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.gef.tools.TargetingTool.updateTargetUnderMouse",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.gef.tools.TargetingTool.unlockTargetEditPart",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.gef.tools.TargetingTool.deactivate",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.gef.tools.SelectionTool.deactivate",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.gef.EditDomain.setActiveTool",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.gef.ui.parts.GraphicalEditor.dispose",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.xtools.presentation.internal.ui.parts.DiagramEditor.dispose",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPartReference.dispose",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$Editor.dispose",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage$5.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.disposePart",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditor",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "140809",
      "duplicateId": "119767",
      "date": "2006-05-09T17:11:06+02:00",
      "product": "GEF",
      "component": "GEF",
      "severity": "normal"
    }
  ],
  "groupId": "119767",
  "bugId": "140809",
  "duplicateId": "119767",
  "date": "2006-05-09T17:11:06+02:00",
  "product": "GEF",
  "component": "GEF",
  "severity": "normal"
}