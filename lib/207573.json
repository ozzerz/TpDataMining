{
  "comments": [
    "Build ID: M20070921-1145\n\nSteps To Reproduce:\n1. Create new (java) project\n2. Create new class in project named Test\n3. Insert code below\npublic class Test {\n    public final \u003cE extends Exception\u003e E throwE (E ex, Object ... args) throws E {\n        Object [] oar \u003d new Object [0];\n        return throwE (oar, ex, args);\n    }\n    public final \u003cE extends Exception\u003e E throwE (Object[] oar, E ex, Object ... args) throws E {\n        throw ex;\n    }\n}\n\n4. Build Project.\n5. Instead of actual compilation errors in the source it shows on error on the first line. Note that this is an condensed piece of code from a source that compiles with SUN JDK 5 compiler, and that did not compile with Eclipse compiler; I ripped almost everything so that only this remained.\n\nMore information:\nStackdump:\nInternal compiler error java.lang.ClassCastException: \n org.eclipse.jdt.internal.compiler.lookup.ArrayBinding at \n org.eclipse.jdt.internal.compiler.lookup.Scope.substitute(Scope.java:202) at \n org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.\u003cinit\u003e(Parameterized\n GenericMethodBinding.java:307) at \n org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createParameterizedGenericMethod(Lo\n okupEnvironment.java:717) at \n org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.inferFromArgumentTy\n pes(ParameterizedGenericMethodBinding.java:175) at \n org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.computeCompatibleMe\n thod(ParameterizedGenericMethodBinding.java:56) at \n org.eclipse.jdt.internal.compiler.lookup.Scope.computeCompatibleMethod(Scope.java:428) at \n org.eclipse.jdt.internal.compiler.lookup.Scope.findMethod(Scope.java:1122) at \n org.eclipse.jdt.internal.compiler.lookup.Scope.getImplicitMethod(Scope.java:1784) at \n org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType(MessageSend.java:416) at \n org.eclipse.jdt.internal.compiler.ast.ReturnStatement.resolve(ReturnStatement.java:216) at \n org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMetho\n dDeclaration.java:429) at \n org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java\n :196) at \n org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaratio\n n.java:400) at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:\n 1085) at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1164) \n at \n org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.\n java:366) at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:623) at \n org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:392) at \n org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:362) \n at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile(BatchImageBuilder.java:173) at \n org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:299) \n at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:59) at \n org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:269) at \n org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:177) at \n org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:624) at \n org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37) at \n org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:166) at \n org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:197) at \n org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:246) at \n org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37) at \n org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:249) at \n org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:214) at \n org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:353) at \n org.eclipse.core.internal.resources.Project.internalBuild(Project.java:494) at \n org.eclipse.core.internal.resources.Project.build(Project.java:75) at \n org.eclipse.ui.actions.BuildAction.invokeOperation(BuildAction.java:194) at \n org.eclipse.ui.actions.WorkspaceAction.execute(WorkspaceAction.java:141) at \n org.eclipse.ui.actions.WorkspaceAction$1.runInWorkspace(WorkspaceAction.java:460) at \n org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38) at \n org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)",
    "Reproduced with HEAD.\nAdded disabled regression test in org.eclipse.jdt.core.tests.compiler.regression.GenericTypeTest#_test1206",
    "Problem comes from an attempt to substitute a poor method candidate incorrectly (E for Object[] inside a ReferenceBinding[] boom!).\n\nThe poor candidate is eliminated later on, hence this is still correct code which is mishandled by the compiler.\n\n",
    "As a workaround (since blocker), you may want to rename one of the 2 methods \u0027throwE\u0027; e.g.\n\npublic class Test {\n    public final \u003cE extends Exception\u003e E throwE2 (E ex, Object ... args) throws\nE {\n        Object [] oar \u003d new Object [0];\n        return throwE (oar, ex, args);\n    }\n    public final \u003cE extends Exception\u003e E throwE (Object[] oar, E ex, Object ...\nargs) throws E {\n        throw ex;\n    }\n}\n\nWorking on a fix.",
    "Created an attachment (id\u003d81570)\nPossible patch\n\nNot convinced this is the best fix, however it is quite safe.\nOther approach would be to simply use TypeBinding[] instead of ReferenceBinding[] for thrown exceptions list... need to see the benefits.",
    "Added GenericTypeTest#test1206-1210",
    "Released for 3.4M4.\nFixed",
    "Fixed",
    "Created an attachment (id\u003d81958)\nPatch for 3.3.x\n\n",
    "Patch also released for 3.3.2.",
    "Fix is trivial, symptoms are bad.",
    "+1 for 3.3.2",
    "Verified for 3.4M4 using build I20071210-1800."
  ],
  "commentCreationDates": [
    "2007-10-26T15:18:50+02:00",
    "2007-10-26T16:23:16+02:00",
    "2007-10-30T12:16:07+01:00",
    "2007-10-30T12:17:30+01:00",
    "2007-10-30T12:24:10+01:00",
    "2007-10-30T17:32:06+01:00",
    "2007-11-02T12:27:27+01:00",
    "2007-11-02T12:28:15+01:00",
    "2007-11-02T15:21:26+01:00",
    "2007-11-02T15:22:54+01:00",
    "2007-11-22T15:34:48+01:00",
    "2007-11-23T14:20:25+01:00",
    "2007-12-11T17:06:55+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.compiler.lookup.ArrayBinding",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.substitute",
          "source": "Scope.java:202"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.\u003cinit\u003e",
          "source": "Parameterized  GenericMethodBinding.java:307"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createParameterizedGenericMethod",
          "source": "Lo  okupEnvironment.java:717"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.inferFromArgumentTypes",
          "source": "ParameterizedGenericMethodBinding.java:175"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.ParameterizedGenericMethodBinding.computeCompatibleMethod",
          "source": "ParameterizedGenericMethodBinding.java:56"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.computeCompatibleMethod",
          "source": "Scope.java:428"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.findMethod",
          "source": "Scope.java:1122"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.Scope.getImplicitMethod",
          "source": "Scope.java:1784"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MessageSend.resolveType",
          "source": "MessageSend.java:416"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.ReturnStatement.resolve",
          "source": "ReturnStatement.java:216"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements",
          "source": "AbstractMetho  dDeclaration.java:429"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements",
          "source": "MethodDeclaration.java  :196"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve",
          "source": "AbstractMethodDeclaratio  n.java:400"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:  1085"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve",
          "source": "TypeDeclaration.java:1164"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve",
          "source": "CompilationUnitDeclaration.  java:366"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.process",
          "source": "Compiler.java:623"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.compile",
          "source": "Compiler.java:392"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:362"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile",
          "source": "BatchImageBuilder.java:173"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile",
          "source": "AbstractImageBuilder.java:299"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build",
          "source": "BatchImageBuilder.java:59"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll",
          "source": "JavaBuilder.java:269"
        },
        {
          "method": "org.eclipse.jdt.internal.core.builder.JavaBuilder.build",
          "source": "JavaBuilder.java:177"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$2.run",
          "source": "BuildManager.java:624"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:166"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:197"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager$1.run",
          "source": "BuildManager.java:246"
        },
        {
          "method": "org.eclipse.core.runtime.SafeRunner.run",
          "source": "SafeRunner.java:37"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:249"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.basicBuild",
          "source": "BuildManager.java:214"
        },
        {
          "method": "org.eclipse.core.internal.events.BuildManager.build",
          "source": "BuildManager.java:353"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.internalBuild",
          "source": "Project.java:494"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.build",
          "source": "Project.java:75"
        },
        {
          "method": "org.eclipse.ui.actions.BuildAction.invokeOperation",
          "source": "BuildAction.java:194"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceAction.execute",
          "source": "WorkspaceAction.java:141"
        },
        {
          "method": "org.eclipse.ui.actions.WorkspaceAction$1.runInWorkspace",
          "source": "WorkspaceAction.java:460"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "207573",
      "date": "2007-10-26T15:18:50+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "blocker"
    }
  ],
  "groupId": "207573",
  "bugId": "207573",
  "date": "2007-10-26T15:18:50+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "blocker"
}