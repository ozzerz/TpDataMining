{
  "comments": [
    "When creating a jar with .class and .java files, WSWB generates an Null pointer \nexception.\n\nSteps to reproduce problem:\n\n1. create a java project named \"bug1\"\n2. extract the attached bug.jar to some temporary directory.\n3. copy the java file Person.java and class files Person.class and \nPerson_Pickler_Vj.class to the project \"bug1\" directory. ?select the bug1 \nproject, and do a refresh from local.\n4. do File/Export/Jar on project bug1, you should be able to get a \nNullPointerException.\np.s. Note that Person_Pickler_Vj.class is IMPORTANT. This class file \ndoes not have corresponding source file.",
    "Created an attachment (id\u003d171)\ncontains 2 .class files and 1 .java file\n",
    "The stack trace I get is:\nLog: Thu Dec 13 15:01:21 EST 2001\n4 org.eclipse.core.resources 368 Resource /P does not exist.\nLog: Thu Dec 13 15:04:45 EST 2001\n4 org.eclipse.jdt.ui 1 Internal Error\njava.lang.reflect.InvocationTargetException: java.lang.NullPointerException\nat java.lang.String.\u003cinit\u003e(String.java:210)\nat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.buildJavaToClassM\nap(JarFileExportOperation.java:391)\nat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.filesOnClasspath(\nJarFileExportOperation.java:316)\nat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.exportElement(Jar\nFileExportOperation.java:210)\nat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.exportSelectedEle\nments(JarFileExportOperation.java:282)\n\tat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.singleRun(JarFile\nExportOperation.java:520)\n\tat \norg.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.run(JarFileExport\nOperation.java:502)\n\tat \norg.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.jav\na:98)\n\nThe problem seems to be that inside JarFileExportOperation::buildJavaToClassMap \nmethod a call to sourceFileName()is done(String javaName\u003d new \nString(cfReader.sourceFileName());). The method sourceFileName can return null. \nSee the API on ClassFileReader:\n/**\n * (c)1998 Object Technology International.\n * (c)1998 International Business Machines Corporation.\n *\n * Answer the source file name attribute. Return null if there is no source file \nattribute for the receiver.\n * \n * @return char[]\n */\npublic char[] sourceFileName() {\n\treturn this.sourceFileName;\n}\n\nAnd the null case is not handled properly. Suggest move to JDTUI.\n",
    "I fixed the bug but most likely the result will not be the expected one i.e. the\n  offending class file will not be packaged.\n\nHow did this file go into the build directory? How generated it?If you have\nclass files which are already there, I suggest to put them into a so-called\nclass folder. This is supported by the JAR file exporter.\nAvailable in builds \u003e 20011213"
  ],
  "commentCreationDates": [
    "2001-12-13T19:16:02+01:00",
    "2001-12-13T19:17:02+01:00",
    "2001-12-13T20:01:39+01:00",
    "2001-12-14T13:23:46+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "java.lang.String.\u003cinit\u003e",
          "source": "String.java:210"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.buildJavaToClassMap",
          "source": "JarFileExportOperation.java:391"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.filesOnClasspath",
          "source": " JarFileExportOperation.java:316"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.exportElement",
          "source": "Jar FileExportOperation.java:210"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.exportSelectedElements",
          "source": "JarFileExportOperation.java:282"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.singleRun",
          "source": "JarFile ExportOperation.java:520"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.jarpackager.JarFileExportOperation.run",
          "source": "JarFileExport Operation.java:502"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext$ModalContextThread.run",
          "source": "ModalContext.jav a:98"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "6903",
      "date": "2001-12-13T20:01:39+01:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "6903",
  "bugId": "6903",
  "date": "2001-12-13T19:16:02+01:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}