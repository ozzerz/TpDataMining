{
  "comments": [
    "Description:\nScriptEvaluationError when preview blank data item \n\nSteps to reproduce:\n1. New a report.\n2. Insert a data item without content\n3. Preview.\n\nExpected result:\nNo errors.\n\nActual result:\nData (id \u003d 8): \n- There are errors evaluating script \"row[\"data item\"]\". \nError.ScriptEvaluationError ( 1 time(s) )\ndetail : org.eclipse.birt.report.engine.api.EngineException: There are errors evaluating script \"row[\"data item\"]\". at org.eclipse.birt.report.engine.executor.ExecutionContext.evaluate(ExecutionContext.java:556) at org.eclipse.birt.report.engine.executor.ExecutionContext.evaluate(ExecutionContext.java:528) at org.eclipse.birt.report.engine.executor.DataItemExecutor.execute(DataItemExecutor.java:89) at org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute(LocalizedReportItemExecutor.java:35) at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:123) at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81) at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:80) at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:194) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute(Unknown Source) at org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(Unknown Source) at org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet(Unknown Source) at org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown Source) at javax.servlet.http.HttpServlet.service(HttpServlet.java:740) at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2422) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke(EclipseErrorReportValve.java:153) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:700) at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:584) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683) at java.lang.Thread.run(Thread.java:534)Caused by: java.lang.IllegalStateException: FAILED ASSERTION at org.mozilla.javascript.Kit.codeBug(Kit.java:425) at org.mozilla.javascript.Context.compileImpl(Context.java:2329) at org.mozilla.javascript.Context.compileString(Context.java:1372) at org.mozilla.javascript.Context.compileString(Context.java:1361) at org.eclipse.birt.core.script.JavascriptEvalUtil.getCompiledScript(JavascriptEvalUtil.java:155) at org.eclipse.birt.core.script.JavascriptEvalUtil.evaluateRawScript(JavascriptEvalUtil.java:94) at org.eclipse.birt.data.engine.expression.ExprEvaluateUtil.doEvaluateRawExpression(ExprEvaluateUtil.java:226) at org.eclipse.birt.data.engine.expression.ExprEvaluateUtil.evaluateRawExpression(ExprEvaluateUtil.java:194) at org.eclipse.birt.data.engine.impl.PreparedDummyQuery$ResultIterator.getValue(PreparedDummyQuery.java:538) at org.eclipse.birt.report.engine.data.dte.DteResultSet.getValue(DteResultSet.java:262) at org.eclipse.birt.report.engine.data.dte.NativeRowObject.get(NativeRowObject.java:90) at org.mozilla.javascript.ScriptableObject.getProperty(ScriptableObject.java:1263) at org.mozilla.javascript.ScriptRuntime.getObjectElem(ScriptRuntime.java:1301) at org.mozilla.javascript.ScriptRuntime.getObjectElem(ScriptRuntime.java:1283) at org.mozilla.javascript.gen.c55._c0(\u003cinline\u003e:1) at org.mozilla.javascript.gen.c55.call(\u003cinline\u003e) at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:304) at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2769) at org.mozilla.javascript.gen.c55.call(\u003cinline\u003e) at org.mozilla.javascript.gen.c55.exec(\u003cinline\u003e) at org.eclipse.birt.core.script.ScriptContext.eval(ScriptContext.java:224) at org.eclipse.birt.report.engine.executor.ExecutionContext.evaluate(ExecutionContext.java:549) ... 50 more",
    "It\u0027s UI\u0027s bug.\nI tried setting data item in three types:\n\n1. Create a data item, set expression to be \"1\". The design will be:\n        \u003cdata id\u003d\"5\"\u003e\n            \u003clist-property name\u003d\"boundDataColumns\"\u003e\n                \u003cstructure\u003e\n                    \u003cproperty name\u003d\"name\"\u003edata item\u003c/property\u003e\n                    \u003cexpression name\u003d\"expression\"\u003e\"1\"\u003c/expression\u003e\n                    \u003cproperty name\u003d\"dataType\"\u003eany\u003c/property\u003e\n                \u003c/structure\u003e\n            \u003c/list-property\u003e\n            \u003cproperty name\u003d\"resultSetColumn\"\u003edata item\u003c/property\u003e\n        \u003c/data\u003e\n\n2. Create a data item, do not set expression and click cancel button. The design will be:\n        \u003cdata id\u003d\"4\"/\u003e\n\n3. Create a data item, do not set expression and click OK button. The design will be:        \n        \u003cdata id\u003d\"6\"\u003e\n            \u003clist-property name\u003d\"boundDataColumns\"\u003e\n                \u003cstructure\u003e\n                    \u003cproperty name\u003d\"name\"\u003edata item\u003c/property\u003e\n                    \u003cproperty name\u003d\"dataType\"\u003eany\u003c/property\u003e\n                \u003c/structure\u003e\n            \u003c/list-property\u003e\n            \u003cproperty name\u003d\"resultSetColumn\"\u003edata item\u003c/property\u003e\n        \u003c/data\u003e\n\nIn these three type data item. Both 1 and 2 are ok. But 3 is wrong. I think UI should check the expression while user click ok. And alert user that the expression should not be null.",
    "If the expression can allow blank or null, i don\u0027t think GUI need extra check.\nEither we accept null(blank) expression, or model need set this property as mandatory.",
    "When the column binding is added into the list, should make sure the expression is not null.",
    "Model just store the datum and do validation. So if user inputs empty or null expression which Engine can\u0027t do right evaluation, model will throw out propertyValueException, reminding user to check the expression.",
    "I think empty data item should be accepted, it\u0027s not an invalid value. From the other side, previous BIRT accepted blank data item without any preview errors. So I think no exception should be reported in this case.",
    "After discussing , Model only store the datum , and can\u0027t do run-time\nevaluation. So need DTE to deal with problem. As my prespective, I think it\u0027s\nright to throw out ScriptEvaluationError  because empty string is really a\ninvalid expression. So please DTE check thig bug. Thanks!\n",
    "Qiangsheng,\nIs possible to fix this, when user creates a data item with no expression, can we just create a data item with no resultset property set.\n\nI manually did this and it seems to work.\n\nThe data item definition in the report design should look something like this \u003cdata id\u003d\"77\"/\u003e. UI does not have to create a corresponding binding column.\n\n",
    "Add check for blank data item,regards",
    "Need gui\u0027s co-op in preventing empty column binding from being created.",
    "Just do it as Rima said in Comment 7.\nFixed.",
    "Verified and close it.",
    "*** Bug 165276 has been marked as a duplicate of this bug. ***"
  ],
  "commentCreationDates": [
    "2006-09-22T04:19:08+02:00",
    "2006-09-22T11:13:14+02:00",
    "2006-09-25T06:03:39+02:00",
    "2006-09-25T07:41:33+02:00",
    "2006-09-25T12:02:32+02:00",
    "2006-09-27T04:05:27+02:00",
    "2006-09-27T04:11:45+02:00",
    "2006-09-30T01:05:02+02:00",
    "2006-10-11T09:19:57+02:00",
    "2006-10-11T12:05:14+02:00",
    "2006-10-13T08:12:22+02:00",
    "2006-10-18T09:16:15+02:00",
    "2006-11-23T11:34:32+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.birt.report.engine.api.EngineException",
      "message": "There are errors evaluating script \"row[\"data item\"]\".",
      "elements": [
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.evaluate",
          "source": "ExecutionContext.java:556"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.evaluate",
          "source": "ExecutionContext.java:528"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.DataItemExecutor.execute",
          "source": "DataItemExecutor.java:89"
        },
        {
          "method": "org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute",
          "source": "LocalizedReportItemExecutor.java:35"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren",
          "source": "HTMLPageLM.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout",
          "source": "HTMLPageLM.java:81"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:80"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:194"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:740"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:853"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:247"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:193"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:256"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:191"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.CertificatesValve.invoke",
          "source": "CertificatesValve.java:246"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContext.invoke",
          "source": "StandardContext.java:2422"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:180"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.ErrorDispatcherValve.invoke",
          "source": "ErrorDispatcherValve.java:171"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke",
          "source": "EclipseErrorReportValve.java:153"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:174"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.coyote.tomcat4.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:199"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:828"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:700"
        },
        {
          "method": "org.apache.tomcat.util.net.TcpWorkerThread.runIt",
          "source": "PoolTcpEndpoint.java:584"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:683"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:534"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "158252",
      "date": "2006-09-22T04:19:08+02:00",
      "product": "BIRT",
      "component": "Report Designer",
      "severity": "major"
    },
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "FAILED ASSERTION",
      "elements": [
        {
          "method": "org.mozilla.javascript.Kit.codeBug",
          "source": "Kit.java:425"
        },
        {
          "method": "org.mozilla.javascript.Context.compileImpl",
          "source": "Context.java:2329"
        },
        {
          "method": "org.mozilla.javascript.Context.compileString",
          "source": "Context.java:1372"
        },
        {
          "method": "org.mozilla.javascript.Context.compileString",
          "source": "Context.java:1361"
        },
        {
          "method": "org.eclipse.birt.core.script.JavascriptEvalUtil.getCompiledScript",
          "source": "JavascriptEvalUtil.java:155"
        },
        {
          "method": "org.eclipse.birt.core.script.JavascriptEvalUtil.evaluateRawScript",
          "source": "JavascriptEvalUtil.java:94"
        },
        {
          "method": "org.eclipse.birt.data.engine.expression.ExprEvaluateUtil.doEvaluateRawExpression",
          "source": "ExprEvaluateUtil.java:226"
        },
        {
          "method": "org.eclipse.birt.data.engine.expression.ExprEvaluateUtil.evaluateRawExpression",
          "source": "ExprEvaluateUtil.java:194"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDummyQuery$ResultIterator.getValue",
          "source": "PreparedDummyQuery.java:538"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.DteResultSet.getValue",
          "source": "DteResultSet.java:262"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.NativeRowObject.get",
          "source": "NativeRowObject.java:90"
        },
        {
          "method": "org.mozilla.javascript.ScriptableObject.getProperty",
          "source": "ScriptableObject.java:1263"
        },
        {
          "method": "org.mozilla.javascript.ScriptRuntime.getObjectElem",
          "source": "ScriptRuntime.java:1301"
        },
        {
          "method": "org.mozilla.javascript.ScriptRuntime.getObjectElem",
          "source": "ScriptRuntime.java:1283"
        },
        {
          "method": "org.mozilla.javascript.gen.c55._c0",
          "source": "\u003cinline\u003e:1"
        },
        {
          "method": "org.mozilla.javascript.gen.c55.call",
          "source": "\u003cinline\u003e"
        },
        {
          "method": "org.mozilla.javascript.ContextFactory.doTopCall",
          "source": "ContextFactory.java:304"
        },
        {
          "method": "org.mozilla.javascript.ScriptRuntime.doTopCall",
          "source": "ScriptRuntime.java:2769"
        },
        {
          "method": "org.mozilla.javascript.gen.c55.call",
          "source": "\u003cinline\u003e"
        },
        {
          "method": "org.mozilla.javascript.gen.c55.exec",
          "source": "\u003cinline\u003e"
        },
        {
          "method": "org.eclipse.birt.core.script.ScriptContext.eval",
          "source": "ScriptContext.java:224"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.evaluate",
          "source": "ExecutionContext.java:549"
        }
      ],
      "number": 1,
      "commentIndex": 0,
      "bugId": "158252",
      "date": "2006-09-22T04:19:08+02:00",
      "product": "BIRT",
      "component": "Report Designer",
      "severity": "major"
    }
  ],
  "groupId": "158252",
  "bugId": "158252",
  "date": "2006-09-22T04:19:08+02:00",
  "product": "BIRT",
  "component": "Report Designer",
  "severity": "major"
}