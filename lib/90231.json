{
  "comments": [
    "Our build is working fine with Eclipse 3.1M5a, but fails with M6.  I\u0027ll attach \nthe error log.",
    "Created an attachment (id\u003d19524)\nError log generated during the build\n",
    "Pratik, did you update to the latest org.eclipse.releng.basebuilder?",
    "Yes, our build process always fetches the latest basebuilder from HEAD.  It \nseems this problem is being caused because some plugins are now jars.",
    "The Visual Editor is having a similar problem in that VE used to build fine on\nEclipse 3.1M5a but fails against M6.",
    "As a test can you export your plugins from within the IDE (File \u003e Export \u003e Plugins (or features))?\n\nSonia, Kim, did you update the basebuilder with M6?",
    "wtp builds using the 3.1M6 releng but cannot package the zips.  Ofcourse,\nanything else that depends on zips also fails.\n\n1) Our (wtp) particular problem is with assembly.xml scripts generated by\npde.build Prior to M6 these contained packaging gather.bin.parts and package\n(exec zip) tasks.  M6 only adds gather.bin.parts and leaves exec zips to an\nadditional package step.  The details of how to do this step is not clear.\n\nWe have changed our releng to a M5 version to start building again.\n\n2) The releng.baseBuilder builder was not in sync with M6 SDK, forexample\npde.build in the HEAD did not have support the new attributes\neclipse.generateScripts task.  Also we have reported a bug which was fixed in M6\nbut not synced in baseBuilder. https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d89191\n\nThese are available with SDK.\n",
    "As an fyi, I have released the 3.1M6 plugins to the \"releng_test\" branch of \norg.eclipse.releng.basebuilder while we test it for the platform builds.  I \nwill annotate this bug report when it is released to HEAD.",
    "I just built GEF. The build.properties from the builder needs to have the\nfollowing line:\n\narchivesFormat \u003d *,*,*-antZip",
    "The EMF build is also failing in the exact same place as indicated below.  We\nare using M6 and the HEAD version of eclipse.releng.  Btw, adding\n\u0027archivesFormat \u003d *,*,*-antZip\u0027 to all our build.properties didn\u0027t fix it.\n\n--- Nested Exception ---\norg.eclipse.core.runtime.CoreException: Unable to find plug-in:\norg.eclipse.emf_2.1.0. Please check the error log for more details.\nat\norg.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.computeElements(FeatureBuildScriptGenerator.java:109)",
    "Adding \"archivesFormat \u003d *,*,*-antZip\" didn\u0027t work for GEF either.",
    "Pascal, I am able to export plug-ins from within the IDE just fine.",
    "Adding \"archivesFormat \u003d *,*,*-antZip\" doesn\u0027t help WTP builds\n\n",
    "Created an attachment (id\u003d19550)\nThe GEF builder I used to build against M6 with M6\n",
    "(In reply to comment #6)\n\u003e 2) The releng.baseBuilder builder was not in sync with M6 SDK, forexample\n\u003e pde.build in the HEAD did not have support the new attributes\n\u003e eclipse.generateScripts task.  \nPascal... what are the new attributes in the eclipse.generateScripts task?\nShould we be concerned about this for building the Visual Editor?\n\n\n\n(In reply to comment #8)\n\u003e I just built GEF. The build.properties from the builder needs to have the\n\u003e following line:\n\u003e \n\u003e archivesFormat \u003d *,*,*-antZip\nPascal... what is this property and it\u0027s use? Also do you mean the\nbuild.properties file for each of the components custom builder? The VE\nreleng.builder doesn\u0027t have a build.properties file.",
    "Created an attachment (id\u003d19554)\nbuild log using releng.basebuilder from branch releng_test (failed)\n\nTried building using M6 and the releng_test branch of releng.basebuilder, and\nas you can see from the build log... it still fails. Build machine is running\nDebian. linux.",
    "We indentified the bug. It is not a pde build bug.\n\nIt comes from a utility task that removes the version number from the end of the\nplugin. For example it changes org.eclipse.swt_3.1.0 to org.eclipse.swt\nThe problem is that when this is done it looses the .jar extension is any.\n\nThis explains why I was not able to reproduce the pb.\nSonia is working on a fix",
    "To faciliate the maintenance of the javadoc classpath in options files in \ndoc.isv plug-ins, a custom Ant task is used to strip version numbers off plug-\nin directories on the base eclipse installation.  This Ant task was \nerroneously removing \".jar\" from jar\u0027d plug-ins.  \n\nThis task has been modified in org.eclipse.releng.basebuilder (HEAD and \nreleng_test branches) so that it only removes the version number from the \nnames of jar\u0027d plug-ins and fragments, ie.  org.eclipse.swt.win32_3.1.0.jar \nwill become org.eclipse.swt.win32.jar.  Plug-in directories will continue to \nhave the _\u003cversion\u003e removed.\n\nPlease try this fix and annotate this report with your findings.",
    "We got a NPE while building the EMF plugins.\n\nBUILD FAILED\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.emf.releng.buil\nd/buildAll.xml:79: The following error occurred while executing this line:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.emf.releng.buil\nd/buildAll.xml:114: The following error occurred while executing this line:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.emf.releng.buil\nd/buildAll.xml:125: The following error occurred while executing this line:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.emf.releng.buil\nd/build.xml:42: The following error occurred while executing this line:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.releng.basebuil\nder/plugins/org.eclipse.pde.build_3.1.0/scripts/build.xml:20: The following \nerror occurred while executing this line:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.releng.basebuil\nder/plugins/org.eclipse.pde.build_3.1.0/scripts/build.xml:39: The following \nerror occurred while executing this line:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.emf.releng.buil\nd/sdk/customTargets.xml:75: The following error occurred while executing this \nline:\n/home/www-data/emf-\nbuild/tools/emf/downloads/drops/2.1.0/N200504051607/org.eclipse.emf.releng.buil\nd/sdk/customTargets.xml:272: java.lang.NullPointerException\n\nLine 272 of customTargets.xml is\n\u003cstripVersions directory\u003d\"${buildDirectory}/plugins\"/\u003e\n\nand striptVersions is defined as follows\n\u003ctaskdef name\u003d\"stripVersions\" \nclassname\u003d\"org.eclipse.releng.VersionNumberStripper\" /\u003e",
    "Looks like a bug in the code ...\n\nhttp://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.basebuilder/plugins/org.eclipse.build.tools/src/org/eclipse/releng/VersionNumberStripper.java?rev\u003d1.2.2.3\u0026content-type\u003dtext/vnd.viewcvs-markup\n\npublic void execute() throws BuildException {\n  directory\u003d\"D:\\\\junk\\\\m6\\\\eclipse\\\\plugins\";\n  setDirectory(directory);\n  stripVersions();\n}\n\nwe don\u0027t have a \"D:\\\\junk\\\\m6\\\\eclipse\\\\plugins\" folder on our Debian box (for\nobvious reasons)... if you comment out (or remove) that line, I can kick a new\nEMF build to test this hypothesis. ;-) Or if you\u0027d like access to our build\nserver to be able to kick EMF builds (as a releng sanity check) please contact\nmyself or Marcelo for details on how to do so (it\u0027s really easy!).",
    "Sorry, dumb mistake on my part.  I\u0027ve removed the line in HEAD.",
    "also fixed in releng_test.",
    "Houston, we have lift-off.",
    "EMF\u0027s latest N build (dated N200504051701) has passed.",
    "Thanks for testing these fixes.  Please reopen if there are any other problems \nbuilding with 3.1M6 in the basebuilder.",
    "No problem, Sonia. Thanks for fixing the code. ;-) \n\nA few builds later, and our JDK tests are working again too.\n\nThe fix can be seen here:\n\nhttp://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK13Tests.xml.diff?r1\u003d1.11\u0026r2\u003d1.10\nhttp://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.xml.diff?r2\u003d1.4\u0026r1\u003d1.5\nhttp://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK50Tests.xml.diff?r1\u003d1.18\u0026r2\u003d1.17\n\nThis looks to be another workaround/fix for the plugins-as-jars issues many\nteams are seeing.\n\nNote that anyone who\u0027s extending or \"borrowing\" functionality from PDE will also\nneed to add this to their build script or else face the wrath of the\nNullPointerException. (It would be great if the Ant task could throw a\nTaskRequiredParameterIsNullException or something like that instead.)\n\nFrom o.e.releng.basebuilds\\plugins\\o.e.pde.build_3.1.0\\scripts\\genericTargets.xml:\n\n\u003ctarget name\u003d\"generateScript\" description\u003d\"Generating build scripts...\"\ndepends\u003d\"init\"\u003e\n\t\u003ceclipse.buildScript \n\t\telements\u003d\"${type}@${id}\" \n\t\tbuildDirectory\u003d\"${buildDirectory}\"\n\t\tconfigInfo\u003d\"${configs}\"\n\t\tbaseLocation\u003d\"${baseLocation}\"\n\t\tbuildingOSGi\u003d\"${buildingOSGi}\"\n\t\tarchivesFormat\u003d\"${archivesFormat}\"\n\t/\u003e\n\nAnd in the build.xml for our FVT/SVT/BVT tests we had:\n\n        \u003ceclipse.buildScript\n            elements\u003d\"${type}@${id}\"\n            buildDirectory\u003d\"${buildDirectory}\"\n            configInfo\u003d\"${configs}\"\n            baseLocation\u003d\"${baseLocation}\"\n            buildingOSGi\u003d\"${buildingOSGi}\"\n            recursiveGeneration\u003d\"true\"\n        /\u003e\n\nSo... I added:\n\n            archivesFormat\u003d\"${archivesFormat}\"\n\nand we\u0027re back in business. Just thought this gotcha might be useful for other\nteams to know about in case they\u0027re using similar build scripts or structures. \n\n\u003c$0.02\u003eAlso, I\u0027d recommend publishing this in the M6 release notes, if it\u0027s not\nalready there.\u003c/$0.02\u003e"
  ],
  "commentCreationDates": [
    "2005-04-04T23:45:15+02:00",
    "2005-04-04T23:48:18+02:00",
    "2005-04-05T01:16:52+02:00",
    "2005-04-05T01:38:59+02:00",
    "2005-04-05T01:40:34+02:00",
    "2005-04-05T03:00:03+02:00",
    "2005-04-05T05:52:37+02:00",
    "2005-04-05T16:56:30+02:00",
    "2005-04-05T17:17:20+02:00",
    "2005-04-05T18:38:56+02:00",
    "2005-04-05T19:03:54+02:00",
    "2005-04-05T19:07:44+02:00",
    "2005-04-05T19:30:30+02:00",
    "2005-04-05T19:49:24+02:00",
    "2005-04-05T20:12:12+02:00",
    "2005-04-05T20:23:12+02:00",
    "2005-04-05T20:32:19+02:00",
    "2005-04-05T21:48:03+02:00",
    "2005-04-05T22:35:26+02:00",
    "2005-04-05T22:54:30+02:00",
    "2005-04-05T22:56:06+02:00",
    "2005-04-05T23:11:06+02:00",
    "2005-04-05T23:46:08+02:00",
    "2005-04-05T23:47:14+02:00",
    "2005-04-05T23:53:50+02:00",
    "2005-04-06T07:07:27+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.core.runtime.CoreException",
      "message": "Unable to find plug-in: org.eclipse.emf_2.1.0. Please check the error log for more details.",
      "elements": [
        {
          "method": "org.eclipse.pde.internal.build.builder.FeatureBuildScriptGenerator.computeElements",
          "source": "FeatureBuildScriptGenerator.java:109"
        }
      ],
      "number": 0,
      "commentIndex": 9,
      "bugId": "90231",
      "date": "2005-04-05T18:38:56+02:00",
      "product": "Platform",
      "component": "Releng",
      "severity": "blocker"
    }
  ],
  "groupId": "90231",
  "bugId": "90231",
  "date": "2005-04-04T23:45:15+02:00",
  "product": "Platform",
  "component": "Releng",
  "severity": "blocker"
}