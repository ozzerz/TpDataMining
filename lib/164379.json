{
  "comments": [
    "Running:  N20061113-0010\n\nI have no step to reproduce this, but I found this in the log.  Not sure if it\u0027s relevant, but the Debug View has \"Show Monitors\" enabled.  The rest of the \"Show something\" options are disabled.\n\njava.lang.ClassCastException: org.eclipse.jdt.internal.debug.core.model.JDIThread incompatible with org.eclipse.debug.core.model.IStackFrame\nat org.eclipse.debug.internal.ui.model.elements.StackFrameContentProvider.getAllChildren(StackFrameContentProvider.java:40)\nat org.eclipse.jdt.internal.debug.ui.variables.JavaStackFrameContentProvider.getAllChildren(JavaStackFrameContentProvider.java:32)\nat org.eclipse.debug.internal.ui.model.elements.StackFrameContentProvider.getChildCount(StackFrameContentProvider.java:28)\nat org.eclipse.debug.internal.ui.model.elements.ElementContentProvider.retrieveChildCount(ElementContentProvider.java:120)\nat org.eclipse.debug.internal.ui.model.elements.ElementContentProvider$2.run(ElementContentProvider.java:57)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Had this with I20061114-1636 when my breakpoint at \nAccumulatingProgressMonitor.beginTask(..) line: 123 was hit.",
    "I understand how this can happen now...\n\nA stack frame gets selected or is updated (stepping), and the varibles view refreshes. To refresh, the \"content provider\" adapter for the viewer input is retrieved, and a job is queued to asynchronously retrieve content (variables) from the stack frame. Before the content job is started, the input to the variables view changes to a Thread (perhaps a thread was selected by the user, or the thread was resumed, etc). When the stack frame content adapter attempts to retrieve content, it gets the \"element\" it is retrieving content for from the \"tree path\" content was requested for (which happends to be the empty tree path for a root element). When we resolve the empty tree path to an element at content retrieval time, the element is viewer input now a thread, and BOOM - class cast exception.",
    "Fixed in StackFrameContentProvider. The fix ensures the element that content is being retrieved for is an IStackFrame, otherwise it cancels the content request.",
    "Please verify, Mike.",
    "verified"
  ],
  "commentCreationDates": [
    "2006-11-13T19:42:56+01:00",
    "2006-11-15T18:03:02+01:00",
    "2006-11-16T22:59:50+01:00",
    "2006-11-16T23:07:15+01:00",
    "2006-11-16T23:07:49+01:00",
    "2006-11-20T16:22:54+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.eclipse.jdt.internal.debug.core.model.JDIThread incompatible with org.eclipse.debug.core.model.IStackFrame",
      "elements": [
        {
          "method": "org.eclipse.debug.internal.ui.model.elements.StackFrameContentProvider.getAllChildren",
          "source": "StackFrameContentProvider.java:40"
        },
        {
          "method": "org.eclipse.jdt.internal.debug.ui.variables.JavaStackFrameContentProvider.getAllChildren",
          "source": "JavaStackFrameContentProvider.java:32"
        },
        {
          "method": "org.eclipse.debug.internal.ui.model.elements.StackFrameContentProvider.getChildCount",
          "source": "StackFrameContentProvider.java:28"
        },
        {
          "method": "org.eclipse.debug.internal.ui.model.elements.ElementContentProvider.retrieveChildCount",
          "source": "ElementContentProvider.java:120"
        },
        {
          "method": "org.eclipse.debug.internal.ui.model.elements.ElementContentProvider$2.run",
          "source": "ElementContentProvider.java:57"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "164379",
      "date": "2006-11-13T19:42:56+01:00",
      "product": "Platform",
      "component": "Debug",
      "severity": "normal"
    }
  ],
  "groupId": "164379",
  "bugId": "164379",
  "date": "2006-11-13T19:42:56+01:00",
  "product": "Platform",
  "component": "Debug",
  "severity": "normal"
}