{
  "comments": [
    "Created an attachment (id\u003d82595)\nscreenshot of Manage Config view listing all installed and active features\n\nWould it be possible to have PDT *NOT* try to build all my PHP projects on workspace startup if I have Project \u003e Build Automatically unchecked? \n\nCurrently, it can take over 60 seconds for Eclipse to start and be usable.\n\nSee attached screenshot for everything I have installed.",
    "Another nice little \"feature\" is the fact that the PHP Builder tries to build even though there are non PHP projects in the workspace.  This causes about a 1 to 2 second freeze when the PHP builders are started when Eclipse starts.\n",
    "This definitely is an issue, as it  locked my system for about 60 seconds, waiting for the PHP Builder job to start...it just sat there doing nothing, and Eclipse was locked in general.   This is a REALLY bad user experience bug, the system shouldn\u0027t be unuseable while a background task is waiting to start.   I only have one small PHP project in my workspace, so it shouldn\u0027t take 60 seconds to validate.\n\n",
    "Here is some log information that seems to go along with this particular bug:\n\norg.osgi.framework.BundleException: State change in progress for bundle \"update@plugins/org.eclipse.php.core_1.0.1.v20071001.jar\" by thread \"Framework Event Dispatcher\".\nat org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1141)\nat org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:258)\nat org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:400)\nat org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:111)\nat org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:417)\nat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:189)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:340)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal(BundleLoader.java:408)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:369)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:357)\nat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\nat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\nCaused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException\n... 14 more\nRoot exception:\norg.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException\nat org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1141)\nat org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:258)\nat org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:400)\nat org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:111)\nat org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:417)\nat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:189)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:340)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal(BundleLoader.java:408)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:369)\nat org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:357)\nat org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\nat org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)\n\nIt seems that there is a problem with one of the bundles...The timeout starts with the FullPHPBuilder, but also includes about 28 other classes as well.  Each one timing out...this takes about a minute and half for all the time outs to occur.\n\nI\u0027ve had this problem with both 1.0, and the version on the PDT update site as well.\n",
    "Created an attachment (id\u003d83265)\nsimilar error w/ PDT 1.0.0.v20070917, Eclipse #.4M3, WTP 2.1M3 (aka 3.0M3)\n\nincludes screenshot, partial log, and full log",
    "Created an attachment (id\u003d83540)\nPatch to not run the builders on Non-PHP Projects\n\nAdds a check before running fullbuilds or incremental builds to make sure that the project has the PHP Nature, otherwise it skips it.\n",
    "Created an attachment (id\u003d83581)\nUpdated Patch to also obey the isBuilding method on the builder\n\nIssue: PHP Builder always executes on all projects, and doesn\u0027t obey the Workspace Build Automatically preferenc setting.  \n\nSolution:\n\nThis patch adds checks to only build on PHP Projects that have the PHP Project Nature, as well, as adds a check to make sure the type of build being requested is allowed by the builders.isBuilding() method.  If it isn\u0027t, the build isn\u0027t done.\n\nThis patch also sets the isConfigurable builder extension to True so that it can respect the Workspace wide setting for \"Build Automatically\".  This doesn\u0027t run the builder if this setting is unchecked.\n\nThe one issue that is still outstanding is the initial launch of the PHP Builder if there are no PHP projects in place, or if the the system wide setting is set to not build automatically.  With the patch it never gets into the code, but the job monitor still shows that a PHP Builder was launched.\n\nIt would be helpful if one of the PDT developers could swing by the #eclipse or #eclipse-dev IRC channel, to give some insight into what is going on, so that this patch can be fully implemented to correct the issue with this bug.\n",
    "We need to overview the suggested patch and commit it after verification",
    "We don\u0027t run build on startup. The process which is marked as \u0027build\u0027 just loads model from the cache. It indeed runs as workspace build job, but only because we should lock furhter builds. It\u0027s similar to what it\u0027s called in JDT as \u0027Initialize Java Tooling\u0027.",
    "Hold on, I think you are closing this without testing the problem here.  Please test the problem before closing it as being invalid.   As it stands right now, my system is unusuable, your build ignores the Automatic Build Check for any PHP project and tries to build anyway.   The initialization item, is separate from the build actual building of a project.\n\n",
    "Whether you\u0027re running a build or not, the fact is a) you\u0027re throwing exceptions and b) locking up the workspace for upwards of a minute whether there\u0027s a PDT project in there or not. And when I uncheck Build Automatically, you still throw these exceptions and lock the workspace on startup.\n\nYou can also choose to relabel the task/job/action/process/whatever so that it says \"initializing PHP tooling\" instead of \"building\", which would certainly be an improvement... but to beat a dead horse for a moment, the problems (both the BundleException on startup and the \"gee, Eclipse worked great before I installed PDT\" usability issue will be there whatever you label it.\n\nReopening as the problem still exists. You can rename the bug if you want to better reflect what you\u0027re doing under the covers, but IMHO it\u0027s still a valid bug. How can it possibly be invalid if at least two people can reliably reproduce it?",
    "(In reply to comment #10)\n\u003e Reopening as the problem still exists. You can rename the bug if you want to\n\u003e better reflect what you\u0027re doing under the covers, but IMHO it\u0027s still a valid\n\u003e bug. How can it possibly be invalid if at least two people can reliably\n\u003e reproduce it?\n\nThis makes sense. The issue will be probably handled upon next major release of PDT.\n\n",
    "changed the PHPWorkspaceModelManager load to run the job only if there are open php projects.",
    "I would just like to add my support in having this bug fixed as soon as possible. I\u0027m having exactly the same experience during eclipse startup after installing the 1.0-R20070917 PDT release - I\u0027ve also tried the latest version 1.0.1.v20071127 which has the same problem - and some other(s) to boot :(\n\nIn the mean time I\u0027m sticking with eclipse 3.2.2 and version: 1.0.0.v20070520 of the plug-in. With this configuration the startup build process still happens, even though automatic building is switched off, but thankfully in the background and the process does not freeze the IDE. \n\nFinally, I think the severity of the bug needs to be increased, as it is causing users (including) myself not use current stable PDT and eclipse versions - it is a show stopper...",
    "(In reply to comment #0)\n\u003e Created an attachment (id\u003d82595) [details]\n\u003e screenshot of Manage Config view listing all installed and active features\n\u003e Would it be possible to have PDT *NOT* try to build all my PHP projects on\n\u003e workspace startup if I have Project \u003e Build Automatically unchecked? \n\u003e Currently, it can take over 60 seconds for Eclipse to start and be usable.\n\u003e See attached screenshot for everything I have installed.\n\ncan you please try disabling Mylyn and see if the problem still exists?\n\nthanks.",
    "I have the same problem regardless if Mylyn is enabled or not.\n"
  ],
  "commentCreationDates": [
    "2007-11-10T03:46:31+01:00",
    "2007-11-14T01:28:56+01:00",
    "2007-11-15T00:41:12+01:00",
    "2007-11-19T01:28:34+01:00",
    "2007-11-19T18:34:32+01:00",
    "2007-11-22T15:37:50+01:00",
    "2007-11-22T21:15:52+01:00",
    "2007-12-01T23:54:31+01:00",
    "2007-12-03T11:27:49+01:00",
    "2007-12-03T13:34:42+01:00",
    "2007-12-03T17:03:41+01:00",
    "2007-12-04T11:45:30+01:00",
    "2007-12-04T15:50:56+01:00",
    "2007-12-09T10:32:50+01:00",
    "2007-12-09T14:01:01+01:00",
    "2007-12-10T00:21:35+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "State change in progress for bundle \"update@plugins/org.eclipse.php.core_1.0.1.v20071001.jar\" by thread \"Framework Event Dispatcher\".",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange",
          "source": "AbstractBundle.java:1141"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
          "source": "AbstractBundle.java:258"
        },
        {
          "method": "org.eclipse.osgi.framework.util.SecureAction.start",
          "source": "SecureAction.java:400"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass",
          "source": "EclipseLazyStarter.java:111"
        },
        {
          "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass",
          "source": "ClasspathManager.java:417"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass",
          "source": "DefaultClassLoader.java:189"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
          "source": "BundleLoader.java:340"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal",
          "source": "BundleLoader.java:408"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:369"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
          "source": "BundleLoader.java:357"
        },
        {
          "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass",
          "source": "DefaultClassLoader.java:83"
        },
        {
          "method": "java.lang.ClassLoader.loadClass",
          "source": "ClassLoader.java:251"
        },
        {
          "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
          "source": "InternalWorkspaceJob.java:38"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:55"
        }
      ],
      "causedBy": {
        "exceptionType": "org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException",
        "elements": [
          {
            "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange",
            "source": "AbstractBundle.java:1141"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.AbstractBundle.start",
            "source": "AbstractBundle.java:258"
          },
          {
            "method": "org.eclipse.osgi.framework.util.SecureAction.start",
            "source": "SecureAction.java:400"
          },
          {
            "method": "org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass",
            "source": "EclipseLazyStarter.java:111"
          },
          {
            "method": "org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass",
            "source": "ClasspathManager.java:417"
          },
          {
            "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass",
            "source": "DefaultClassLoader.java:189"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass",
            "source": "BundleLoader.java:340"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClassInternal",
            "source": "BundleLoader.java:408"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
            "source": "BundleLoader.java:369"
          },
          {
            "method": "org.eclipse.osgi.framework.internal.core.BundleLoader.findClass",
            "source": "BundleLoader.java:357"
          },
          {
            "method": "org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass",
            "source": "DefaultClassLoader.java:83"
          },
          {
            "method": "java.lang.ClassLoader.loadClass",
            "source": "ClassLoader.java:251"
          },
          {
            "method": "org.eclipse.core.internal.resources.InternalWorkspaceJob.run",
            "source": "InternalWorkspaceJob.java:38"
          },
          {
            "method": "org.eclipse.core.internal.jobs.Worker.run",
            "source": "Worker.java:55"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 3,
      "bugId": "209408",
      "date": "2007-11-19T01:28:34+01:00",
      "product": "PDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "209408",
  "bugId": "209408",
  "date": "2007-11-10T03:46:31+01:00",
  "product": "PDT",
  "component": "Core",
  "severity": "normal"
}