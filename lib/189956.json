{
  "comments": [
    "I0529\n\nNote: History view had never been opened prior to these steps (may or may not matter). \n\n1. In the Package Explorer, navigate to a *class file* in a project *not* under version control\n2. Context menu -\u003e Show In -\u003e History\n\nView opens but empty with an NPE (below) in the log.\n\nIn RepositoryProvider.getProvider(IProject), project is null, which isn\u0027t surprising since its not a project under CVS support.\n\n!ENTRY org.eclipse.ui 4 0 2007-05-30 15:40:03.503\n!MESSAGE Unhandled event loop exception\n!STACK 0\njava.lang.NullPointerException\n\tat org.eclipse.team.core.RepositoryProvider.getProvider(RepositoryProvider.java:491)\n\tat org.eclipse.team.internal.ui.history.GenericHistoryView.getPageSourceFor(GenericHistoryView.java:741)\n\tat org.eclipse.team.internal.ui.history.GenericHistoryView.showHistoryPageFor(GenericHistoryView.java:700)\n\tat org.eclipse.team.internal.ui.history.GenericHistoryView.showHistoryFor(GenericHistoryView.java:689)\n\tat org.eclipse.team.internal.ui.history.GenericHistoryView.showHistoryFor(GenericHistoryView.java:911)\n\tat org.eclipse.team.internal.ui.history.GenericHistoryView.show(GenericHistoryView.java:970)\n\tat org.eclipse.ui.internal.ShowInAction.run(ShowInAction.java:74)\n\tat org.eclipse.jface.action.Action.runWithEvent(Action.java:498)\n\tat org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:545)\n\tat org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:490)\n\tat org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:402)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2219)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:153)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:504)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:443)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1169)",
    "How do you navigate to a class file in the Packages Explorer (i.e. I don\u0027t see any and can\u0027t find a way to get them to appear)? What type of project setup are you using (i.e. is your class files in the same directories as the source)?\n\nFrom looking at the code, the only way this NPE could happen is if the selected resource had no project. The only resources with this attribute is the workspace root. I\u0027m not sure why a class file would adapt to the workspace root.",
    "If you have link to editor selected, the package explorer will select a \"class file\" from your plugin dependencies subfolder.\n\nDoing the show in there will generate the NPE.\n\nPW\n",
    "OK, I\u0027ve reproduced this now. The problem is that the ShowInContext provided by JDT uses the JavaModel as the input and the HistoryView doesn\u0027t defend against objects that adapt to IWorkspaceRoot. This is not critical for 3.3 since there would be no history to show anyway.",
    "Quick question: what is the expected behavior of doing the Show In History for the above situation\n- display empty Local History view\n- do nothing",
    "I think all we need to do here is add a check to the GenericHistoryView.getPageSourceFor that return null if resource.getProject() is null. This should leave the history view showing whatever it was showing before.",
    "Created an attachment (id\u003d72000)\nA patch\n\n",
    "Patch released to HEAD (3.4). We\u0027re not branching until after Europa ships at which point will will release this to 3.3.1.",
    "Patch released to 3.3.1.",
    "VERIFIED",
    "VERIFIED in M20070815-0800,  I20070815-1600",
    "Verified.",
    "VERIFIED in M20070822-0800 and M1."
  ],
  "commentCreationDates": [
    "2007-05-30T17:42:09+02:00",
    "2007-05-30T18:07:33+02:00",
    "2007-05-30T18:31:30+02:00",
    "2007-05-30T19:05:13+02:00",
    "2007-06-20T14:44:23+02:00",
    "2007-06-20T18:31:41+02:00",
    "2007-06-21T10:11:39+02:00",
    "2007-06-21T15:45:23+02:00",
    "2007-07-09T17:42:59+02:00",
    "2007-08-16T16:19:53+02:00",
    "2007-08-17T17:02:54+02:00",
    "2007-08-29T12:15:46+02:00",
    "2007-08-29T14:41:23+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.team.core.RepositoryProvider.getProvider",
          "source": "RepositoryProvider.java:491"
        },
        {
          "method": "org.eclipse.team.internal.ui.history.GenericHistoryView.getPageSourceFor",
          "source": "GenericHistoryView.java:741"
        },
        {
          "method": "org.eclipse.team.internal.ui.history.GenericHistoryView.showHistoryPageFor",
          "source": "GenericHistoryView.java:700"
        },
        {
          "method": "org.eclipse.team.internal.ui.history.GenericHistoryView.showHistoryFor",
          "source": "GenericHistoryView.java:689"
        },
        {
          "method": "org.eclipse.team.internal.ui.history.GenericHistoryView.showHistoryFor",
          "source": "GenericHistoryView.java:911"
        },
        {
          "method": "org.eclipse.team.internal.ui.history.GenericHistoryView.show",
          "source": "GenericHistoryView.java:970"
        },
        {
          "method": "org.eclipse.ui.internal.ShowInAction.run",
          "source": "ShowInAction.java:74"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:498"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection",
          "source": "ActionContributionItem.java:545"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem.access$2",
          "source": "ActionContributionItem.java:490"
        },
        {
          "method": "org.eclipse.jface.action.ActionContributionItem$5.handleEvent",
          "source": "ActionContributionItem.java:402"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:938"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3682"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3293"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2389"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2353"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2219"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:466"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:461"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:106"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:153"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:363"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:176"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:504"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:443"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1169"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "189956",
      "date": "2007-05-30T17:42:09+02:00",
      "product": "Platform",
      "component": "Team",
      "severity": "major"
    }
  ],
  "groupId": "189956",
  "bugId": "189956",
  "date": "2007-05-30T17:42:09+02:00",
  "product": "Platform",
  "component": "Team",
  "severity": "major"
}