{
  "comments": [
    "HEAD\n\n- create an AST for org.eclipse.jdt.internal.core.search.matching.MatchLocator\n- resolve the type binding for the anonymous type inside\n    #createAndPattern(SearchPattern, SearchPattern)\n\n\u003d\u003e ITypeBinding#getJavaElement() on that anonymous type returns:\nResolvedSourceField:\norg.eclipse.jdt.internal.core.search.matching.MatchLocator.createAndPattern(...).new\nAndPattern() {...}.current : SearchPattern\n\n\u003d\u003e Expected: the IType for the anonymous class, not an IField inside the type.\n\nConsequently, getJavaElement() on e.g. the variable binding for field \u0027current\u0027\nthrows a java.lang.ClassCastException:\norg/eclipse/jdt/internal/core/ResolvedSourceField incompatible with\norg/eclipse/jdt/core/IType\n\tat\norg.eclipse.jdt.core.dom.VariableBinding.getUnresolvedJavaElement(VariableBinding.java:139)\n\tat\norg.eclipse.jdt.core.dom.VariableBinding.getJavaElement(VariableBinding.java:128)\n\nThis bug is a problem for the Infer Type Arguments refactoring.",
    "Philippe, can you please have a look. The bug is blocking Markus in Infer Type\nArgument fixing...",
    "Reduced the test case to:\npublic class X {\n\tvoid foo() {\n\t\tnew Y(0/*c*/) {\n\t\t\tObject field;\n\t\t};\n\t}\n}\nclass Y {\n\tY(int i) {\n\t}\n}\n\nNote that if you remove /*c*/, you get a ResolvedSourceType for the anonymous.",
    "Changed Parser#consumeAnonymousClassBody() to flush comments (as this is already\ndone for type headers.\nAdded regression test ASTModelBridgeTests#testAnonymous2()",
    "Verified in i20050527-0010"
  ],
  "commentCreationDates": [
    "2005-05-18T13:12:26+02:00",
    "2005-05-18T14:41:20+02:00",
    "2005-05-20T14:04:49+02:00",
    "2005-05-20T14:53:56+02:00",
    "2005-05-27T13:40:22+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org/eclipse/jdt/internal/core/ResolvedSourceField incompatible with org/eclipse/jdt/core/IType",
      "elements": [
        {
          "method": "org.eclipse.jdt.core.dom.VariableBinding.getUnresolvedJavaElement",
          "source": "VariableBinding.java:139"
        },
        {
          "method": "org.eclipse.jdt.core.dom.VariableBinding.getJavaElement",
          "source": "VariableBinding.java:128"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "95727",
      "date": "2005-05-18T13:12:26+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "95727",
  "bugId": "95727",
  "date": "2005-05-18T13:12:26+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}