{
  "comments": [
    "* DTP 1.0 RC1 11/30 build *\n\nWhen connecting to or disconnecting from an Apache Derby connection profile, the following error message is logged:\n\neclipse.buildId\u003dM20060921-0945\njava.version\u003d1.4.2_06\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments:  -os win32 -ws win32 -arch x86 -clean\n\nError\nThu Nov 30 11:47:00 EST 2006\nInvalid thread access\n\norg.eclipse.swt.SWTException: Invalid thread access\nat org.eclipse.swt.SWT.error(SWT.java:3374)\nat org.eclipse.swt.SWT.error(SWT.java:3297)\nat org.eclipse.swt.SWT.error(SWT.java:3268)\nat org.eclipse.swt.widgets.Widget.error(Widget.java:435)\nat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:331)\nat org.eclipse.swt.widgets.Tree.getSelection(Tree.java:2911)\nat org.eclipse.jface.viewers.TreeViewer.getSelection(TreeViewer.java:471)\nat org.eclipse.jface.viewers.TreeViewer.setSelection(TreeViewer.java:686)\nat org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:2221)\nat org.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget(StructuredViewer.java:1621)\nat org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget(AbstractTreeViewer.java:2596)\nat org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1330)\nat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1386)\nat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1345)\nat org.eclipse.datatools.sqltools.result.internal.ui.view.ItemsLimitationTreeViewer.refresh(ResultHistorySection.java:140)\nat org.eclipse.datatools.sqltools.result.internal.ui.view.ResultsView.profileChanged(ResultsView.java:649)\nat org.eclipse.datatools.connectivity.internal.InternalProfileManager.fireProfileChanged(InternalProfileManager.java:644)\nat org.eclipse.datatools.connectivity.internal.InternalProfileManager$1.propertySetChanged(InternalProfileManager.java:63)\nat org.eclipse.datatools.connectivity.internal.ConnectionProfile.firePropertySetChangeEvent(ConnectionProfile.java:453)\nat org.eclipse.datatools.connectivity.internal.ConnectionProfile$ConnectJob.run(ConnectionProfile.java:671)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)",
    "Assigned to Hui Cao.",
    "Assigned to Hui Cao.",
    "Da-fan, can you look into this problem? It seems that when connect/disconnect, there\u0027s no need to refresh our results view. And when we do need to do so, it should be put in UI thread.",
    "OK, we\u0027ve put the refresh code into UI thread. But there\u0027s no way for us to tell whether the profileChanged event is triggered by connect/disconnect or by user modification, so we have to refresh even it\u0027s unnecessary. Rob, do we have to notify IProfileListers during connect/disconnect? I thought that\u0027s the job of IManagedConnectionListener\u0027s.",
    "Verified in DTP 1.0RC1 12/1 build. Closing",
    "(In reply to comment #4)\nThe connection state is also stored as a property on the profile, meaning a property change event is sent out to anybody listening for property changes.  The framework now propagates these events through IProfileListener.  This simplifies the task of adding listeners in certain circumstances.  (It is much easier to add a listener on the profile manager than it is to add a listener to every profile.)\n\nIf you are concerned about the granularity of the events, you should use IPropertySetListener on specific profiles.  This will notify you of any changes to a particular profile and will give you details about those changes.  You can then decide how best to handle the changes.\n\n"
  ],
  "commentCreationDates": [
    "2006-11-30T16:52:29+01:00",
    "2006-11-30T17:57:11+01:00",
    "2006-11-30T17:58:47+01:00",
    "2006-12-01T01:36:40+01:00",
    "2006-12-01T06:12:06+01:00",
    "2006-12-01T17:16:04+01:00",
    "2006-12-01T18:13:54+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Invalid thread access",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3374"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3268"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:435"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:331"
        },
        {
          "method": "org.eclipse.swt.widgets.Tree.getSelection",
          "source": "Tree.java:2911"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.getSelection",
          "source": "TreeViewer.java:471"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.setSelection",
          "source": "TreeViewer.java:686"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget",
          "source": "AbstractTreeViewer.java:2221"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelectionToWidget",
          "source": "StructuredViewer.java:1621"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.setSelectionToWidget",
          "source": "AbstractTreeViewer.java:2596"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:1330"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
          "source": "StructuredViewer.java:1386"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.refresh",
          "source": "StructuredViewer.java:1345"
        },
        {
          "method": "org.eclipse.datatools.sqltools.result.internal.ui.view.ItemsLimitationTreeViewer.refresh",
          "source": "ResultHistorySection.java:140"
        },
        {
          "method": "org.eclipse.datatools.sqltools.result.internal.ui.view.ResultsView.profileChanged",
          "source": "ResultsView.java:649"
        },
        {
          "method": "org.eclipse.datatools.connectivity.internal.InternalProfileManager.fireProfileChanged",
          "source": "InternalProfileManager.java:644"
        },
        {
          "method": "org.eclipse.datatools.connectivity.internal.InternalProfileManager$1.propertySetChanged",
          "source": "InternalProfileManager.java:63"
        },
        {
          "method": "org.eclipse.datatools.connectivity.internal.ConnectionProfile.firePropertySetChangeEvent",
          "source": "ConnectionProfile.java:453"
        },
        {
          "method": "org.eclipse.datatools.connectivity.internal.ConnectionProfile$ConnectJob.run",
          "source": "ConnectionProfile.java:671"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:58"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "166364",
      "date": "2006-11-30T16:52:29+01:00",
      "product": "Data Tools",
      "component": "SQL Editor Framework",
      "severity": "major"
    }
  ],
  "groupId": "166364",
  "bugId": "166364",
  "date": "2006-11-30T16:52:29+01:00",
  "product": "Data Tools",
  "component": "SQL Editor Framework",
  "severity": "major"
}