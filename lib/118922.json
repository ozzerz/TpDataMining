{
  "comments": [
    "Driver:  RC1 12/01 0337\n\n1. Create a Web project targeting Tomcat 5.0.\n2. Go to the project\u0027s Java Build Path, \n\na. Select \"Allow output folders for source folders\"\nb. Click Output folder, click Edit.\nc. Select \"specific output folder\", enter say \"out1\".\n\nIf you then put a servet in the source folder, the class is built \ninto the \"out1\" directory in the workspace.  However, when I tried to run \nthe serverlet, I got the error:\n\nThe requested resource (/tc50a/HelloServlet) is not available.",
    "Tried this on \"RC2-1\" (a build just before RC2) and it worked with no problems. I\u0027m returning as FIXED since there were a couple fixes lately that might have solved this (Servers view didn\u0027t always say when a republish was required; Tomcat is now automatically republishing as well).",
    "The problem with changing source folder is fixed in RC3.  However, there\u0027s similar problem when there\u0027s more than 1 source folder going into different output directory in a Web project, the classes in the new source folder cannot be loaded by the server.  I\u0027m sometimes getting class cannot be loaded or getting publish error.",
    "Please check the exception caused by the failure. This sounds like a duplicate of 120280.\n\n*** This bug has been marked as a duplicate of 120280 ***",
    "Here\u0027s the stack trace in the .log file:\n\n!MESSAGE Could not publish to the server.\n!STACK 0\njava.lang.ArrayIndexOutOfBoundsException\n\tat java.lang.System.arraycopy(Native Method)\n\tat org.eclipse.jst.j2ee.internal.deployables.J2EEFlexProjDeployable.handleJavaPath(J2EEFlexProjDeployable.java:174)\n\tat org.eclipse.wst.web.internal.deployables.ComponentDeployable.getMembers(ComponentDeployable.java:126)\n\tat org.eclipse.jst.j2ee.internal.deployables.J2EEFlexProjDeployable.members(J2EEFlexProjDeployable.java:131)\n\tat org.eclipse.wst.server.core.internal.ServerPublishInfo.getDelta(ServerPublishInfo.java:245)\n\tat org.eclipse.wst.server.core.internal.Server.getPublishedResourceDelta(Server.java:916)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.getPublishedResourceDelta(ServerBehaviourDelegate.java:477)\n\tat org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.getPublishedResourceDelta(TomcatServerBehaviour.java:731)\n\tat org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:541)\n\tat org.eclipse.wst.server.core.internal.Server.doPublish(Server.java:765)\n\tat org.eclipse.wst.server.core.internal.Server.publish(Server.java:754)\n\tat org.eclipse.wst.server.core.internal.PublishServerJob.run(PublishServerJob.java:145)\n\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)\n\nYes.  It does looks like a dup of bug 120280.\n\nI\u0027ll verify once that fix is in.",
    "I tried on the WTP 1.0.1 M200602171228 driver and found that the problem is still there.  If you just have one source directory going into 1 output directory and do \"run on server\".  The server is created and started and the servlet ran OK.  \n\nHowever, if you create another servlet in the same Web project and do \"run on server\", I got \"Requested resource not available\". I checked the resource view and the .metadata directory and the class files all seems to be there OK.  \n\nIf I restart the server, then the second servlet ran OK.  I tried this with more than 1 source and output directory and got the same behaviour.  So the problem is not so much with more than 1 source and output directory but with trying to run a servlet in a Web project that had been added to a started server.  It\u0027s ok if the server is stopped when adding another servlet to \"run on server\".\n\nAfter adding a servlet from Web project \"a\" to the server and running it, I also has \"resource not available\" problem when doing \"Run on server\" on another servlet on Web project \"b\" added to the same server.\n\n ",
    "What was the Server\u0027s state in the Servers view after adding the new servlet? My guess would be that is said \u0027Restart required\u0027. If this is the case, then if you wanted this case to be supported we\u0027d have to add a prompt to restart the server.",
    "Putting in REMIND state for now.",
    "Yes.  The problem is there when the server is already in the started state when the second servlet is added.  The server state does state \"restart\".  If I restart the server manually, then the second servlet works.\n\nI think the user would expect server doing to take care of any restarting of the server when a serlvet is added.  Could you see if this could be supported?",
    "We already have a preference (off by default for usability concerns) to automatically restart the server when it needs to be. I assume what you\u0027re really asking here is that Run on Server would automatically restart the server when necessary to get the servlet into an accessible state?",
    "Yes.  I was assuming that Run on Server would automatically restart the server\nwhen necessary to get the servlet into an accessible state.  I did not realize that the user would have to select the \"Automatically restrat servers when necessary\" checkbox through Server -\u003e Launching preference.\n\nIf you think that\u0027s what the user expects (rather than having server tooling always do it for them), please return the defect as work as design.",
    "Adding a new prompt the first time this happens, allowing the user to restart the server or continue without restarting, as well as a checkbox to remember the decision and a preference (Under Servers \u003e Launching) to reset it.",
    "New restart prompt and preferences released to 2.0 M5 builds.",
    "Verified on WTP 2.0 RC2 driver v200706050057."
  ],
  "commentCreationDates": [
    "2005-12-01T20:12:29+01:00",
    "2005-12-08T04:26:44+01:00",
    "2005-12-12T20:00:30+01:00",
    "2005-12-12T20:02:50+01:00",
    "2005-12-12T20:05:36+01:00",
    "2006-02-17T19:04:40+01:00",
    "2006-02-20T16:41:09+01:00",
    "2006-07-05T18:57:59+02:00",
    "2006-09-22T17:53:21+02:00",
    "2006-09-22T20:04:22+02:00",
    "2006-09-22T20:14:18+02:00",
    "2007-01-04T16:10:03+01:00",
    "2007-01-08T14:52:47+01:00",
    "2007-06-05T21:14:03+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ArrayIndexOutOfBoundsException",
      "elements": [
        {
          "method": "java.lang.System.arraycopy",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.deployables.J2EEFlexProjDeployable.handleJavaPath",
          "source": "J2EEFlexProjDeployable.java:174"
        },
        {
          "method": "org.eclipse.wst.web.internal.deployables.ComponentDeployable.getMembers",
          "source": "ComponentDeployable.java:126"
        },
        {
          "method": "org.eclipse.jst.j2ee.internal.deployables.J2EEFlexProjDeployable.members",
          "source": "J2EEFlexProjDeployable.java:131"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.ServerPublishInfo.getDelta",
          "source": "ServerPublishInfo.java:245"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.getPublishedResourceDelta",
          "source": "Server.java:916"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.getPublishedResourceDelta",
          "source": "ServerBehaviourDelegate.java:477"
        },
        {
          "method": "org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.getPublishedResourceDelta",
          "source": "TomcatServerBehaviour.java:731"
        },
        {
          "method": "org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish",
          "source": "ServerBehaviourDelegate.java:541"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.doPublish",
          "source": "Server.java:765"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.Server.publish",
          "source": "Server.java:754"
        },
        {
          "method": "org.eclipse.wst.server.core.internal.PublishServerJob.run",
          "source": "PublishServerJob.java:145"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:76"
        }
      ],
      "number": 0,
      "commentIndex": 4,
      "bugId": "118922",
      "date": "2005-12-12T20:05:36+01:00",
      "product": "Web Tools",
      "component": "wst.server",
      "severity": "major"
    }
  ],
  "groupId": "118922",
  "bugId": "118922",
  "date": "2005-12-01T20:12:29+01:00",
  "product": "Web Tools",
  "component": "wst.server",
  "severity": "major"
}