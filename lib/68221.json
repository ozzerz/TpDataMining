{
  "comments": [
    "This is a bit convoluted as I\u0027m debugging third hand via email with a client \nwho is using Eclipse 2.1.3, but the code causing the problem is unchanged in \nEclipse 3.0 RC1\n\nUser is getting a failed save when saving in an editor. An \nAssertionFailedException is thrown by \nTextSelectionNavigationLocation.partSaved. actually its the Position \nconstructor that is throwing the exception.\n\nThe code in 2.1.3\n\n/**\n\t * Hook method which is called when the given editor has been saved.\n\t * \n\t * @param part the editor part\n\t */\n\tpublic void partSaved(IEditorPart part) {\n\t\t// http://dev.eclipse.org/bugs/show_bug.cgi?id\u003d25440\n\t\tif (fPosition \u003d\u003d null || fPosition.isDeleted())\n\t\t\tfSavedPosition\u003d null;\n\t\telse\n\t\t\tfSavedPosition\u003d new Position(fPosition.offset, \nfPosition.length);\n\t}\n\nThe code in 3.0 RC1 is not safe from this either (its the same):\n\n\n/**\n\t * Hook method which is called when the given editor has been saved.\n\t * \n\t * @param part the editor part\n\t */\n\tpublic void partSaved(IEditorPart part) {\n\t\t// http://dev.eclipse.org/bugs/show_bug.cgi?id\u003d25440\n\t\tif (fPosition \u003d\u003d null || fPosition.isDeleted())\n\t\t\tfSavedPosition\u003d null;\n\t\telse\n\t\t\tfSavedPosition\u003d new Position(fPosition.offset, \nfPosition.length);\n\t}\n\nThe trace from 2.1.3:\n\n\n!SESSION May 20, 2004 10:49:15.99 ----------------------------------------------\njava.version\u003d1.4.1_01\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\nCommand-line arguments: -os win32 -ws win32 -arch x86 -data c:\\workspace -\ninstall file:C:/eclipse/\n!ENTRY org.eclipse.ui 4 4 May 20, 2004 10:49:15.99\n!MESSAGE Save All Failed\n!ENTRY org.eclipse.ui 2 0 May 20, 2004 10:49:15.109\n!MESSAGE Save All Failed\n!STACK 0\norg.eclipse.jface.text.Assert$AssertionFailedException: Assertion failed: \nat org.eclipse.jface.text.Assert.isTrue(Assert.java:175)\nat org.eclipse.jface.text.Assert.isTrue(Assert.java:160)\nat org.eclipse.jface.text.Position.\u003cinit\u003e(Position.java:55)\nat\norg.eclipse.ui.texteditor.TextSelectionNavigationLocation.partSaved\n(TextSelectionNavigationLocation.\njava:305)\nat org.eclipse.ui.texteditor.AbstractTextEditor.editorSaved\n(AbstractTextEditor.java:4092)\nat\norg.eclipse.ui.texteditor.AbstractTextEditor.performSaveOperation\n(AbstractTextEditor.java:3034)\nat\norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.performSaveOperatio\nn(CompilationUnitEdi\ntor.java:752)\nat\norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.doSave\n(CompilationUnitEditor.java:816)\nat org.eclipse.ui.internal.EditorManager$9.run(EditorManager.java:1029)\nat org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1595)\nat org.eclipse.ui.internal.EditorManager$10.run(EditorManager.java:1039)\nat org.eclipse.ui.internal.EditorManager$8.run(EditorManager.java:960)\nat org.eclipse.jface.operation.ModalContext.runInCurrentThread\n(ModalContext.java:302)\nat org.eclipse.jface.operation.ModalContext.run(ModalContext.java:252)\nat org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:431)\nat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\nat org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:428)\nat org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:1385)\nat org.eclipse.ui.internal.EditorManager.runProgressMonitorOperation\n(EditorManager.java:966)\nat org.eclipse.ui.internal.EditorManager.saveAll(EditorManager.java:1053)\nat org.eclipse.ui.internal.EditorManager.saveAll(EditorManager.java:992)\nat org.eclipse.ui.internal.WorkbenchPage.saveAllEditors(WorkbenchPage.java:2346)\nat org.eclipse.ui.internal.SaveAllAction.run(SaveAllAction.java:101)\nat org.eclipse.jface.action.Action.runWithEvent(Action.java:842)\nat org.eclipse.ui.internal.WWinKeyBindingService.pressed\n(WWinKeyBindingService.java:214)\n...snip.",
    "The issue is not the creation of the Position but how it could happened that \nthe position that is used to create the saved position turns into something \ninvalid. The problem does no longer exist in 3.0\n\n*** This bug has been marked as a duplicate of 25440 ***",
    "Is there anything I can tell my 2.1.3 user to do in order to avoid this error?"
  ],
  "commentCreationDates": [
    "2004-06-22T21:40:57+02:00",
    "2004-06-22T21:55:35+02:00",
    "2004-06-22T22:00:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.jface.text.Assert$AssertionFailedException",
      "message": "Assertion failed:",
      "elements": [
        {
          "method": "org.eclipse.jface.text.Assert.isTrue",
          "source": "Assert.java:175"
        },
        {
          "method": "org.eclipse.jface.text.Assert.isTrue",
          "source": "Assert.java:160"
        },
        {
          "method": "org.eclipse.jface.text.Position.\u003cinit\u003e",
          "source": "Position.java:55"
        },
        {
          "method": "org.eclipse.ui.texteditor.TextSelectionNavigationLocation.partSaved",
          "source": "TextSelectionNavigationLocation. java:305"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.editorSaved",
          "source": "AbstractTextEditor.java:4092"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.performSaveOperation",
          "source": "AbstractTextEditor.java:3034"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.performSaveOperation",
          "source": "CompilationUnitEdi tor.java:752"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.doSave",
          "source": "CompilationUnitEditor.java:816"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$9.run",
          "source": "EditorManager.java:1029"
        },
        {
          "method": "org.eclipse.core.internal.resources.Workspace.run",
          "source": "Workspace.java:1595"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$10.run",
          "source": "EditorManager.java:1039"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$8.run",
          "source": "EditorManager.java:960"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.runInCurrentThread",
          "source": "ModalContext.java:302"
        },
        {
          "method": "org.eclipse.jface.operation.ModalContext.run",
          "source": "ModalContext.java:252"
        },
        {
          "method": "org.eclipse.jface.window.ApplicationWindow$1.run",
          "source": "ApplicationWindow.java:431"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.window.ApplicationWindow.run",
          "source": "ApplicationWindow.java:428"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchWindow.run",
          "source": "WorkbenchWindow.java:1385"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.runProgressMonitorOperation",
          "source": "EditorManager.java:966"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.saveAll",
          "source": "EditorManager.java:1053"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.saveAll",
          "source": "EditorManager.java:992"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.saveAllEditors",
          "source": "WorkbenchPage.java:2346"
        },
        {
          "method": "org.eclipse.ui.internal.SaveAllAction.run",
          "source": "SaveAllAction.java:101"
        },
        {
          "method": "org.eclipse.jface.action.Action.runWithEvent",
          "source": "Action.java:842"
        },
        {
          "method": "org.eclipse.ui.internal.WWinKeyBindingService.pressed",
          "source": "WWinKeyBindingService.java:214"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "68221",
      "duplicateId": "25440",
      "date": "2004-06-22T21:40:57+02:00",
      "product": "Platform",
      "component": "Text",
      "severity": "major"
    }
  ],
  "groupId": "25440",
  "bugId": "68221",
  "duplicateId": "25440",
  "date": "2004-06-22T21:40:57+02:00",
  "product": "Platform",
  "component": "Text",
  "severity": "major"
}