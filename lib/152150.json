{
  "comments": [
    "Driver:  WTP 1.5\n\nWhen going through the Web service wizard the first time in certain driver installation, the user would get the error:\n\nIWAB0234E An internal error occurred. Details: Project facet XXXX has not been defined.\n    java.lang.IllegalArgumentException: Project facet com.ibm.websphere.coexistence.web has not been defined.\n    at org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.getProjectFacet(ProjectFacetsManagerImpl.java:191)\n    at org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.getProjectFacet(ProjectFacetsManager.java:81)\n    at org.eclipse.jst.ws.internal.consumption.ui.wsrt.ServiceRuntimeDescriptor.getRequiredFacetVersions(ServiceRuntimeDescriptor.java:77)\n    at org.eclipse.jst.ws.internal.consumption.ui.wsrt.FacetMatchCache.getTemplatesForServiceRuntime(FacetMatchCache.java:438)\n    at org.eclipse.jst.ws.internal.consumption.ui.wsrt.WebServiceRuntimeExtensionUtils2.getAllServiceProjectTypes(WebServiceRuntimeExtensionUtils2.java:130)\n    at org.eclipse.jst.ws.internal.consumption.ui.preferences.ProjectTopologyDefaults.getServiceTypes(ProjectTopologyDefaults.java:24)\n    at org.eclipse.jst.ws.internal.consumption.ui.preferences.PersistentProjectTopologyContext.load(PersistentProjectTopologyContext.java:35)\n    at org.eclipse.jst.ws.internal.consumption.ui.plugin.WebServiceConsumptionUIPlugin.getProjectTopologyContext(WebServiceConsumptionUIPlugin.java:93)\n    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelectionWidgetDefaultingCommand.defaultClientSideFromServiceSide(ClientRuntimeSelectionWidgetDefaultingCommand.java:1287)\n    at org.eclipse.jst.ws.internal.creation.ui.widgets.runtime.ServerRuntimeSelectionWidgetDefaultingCommand.defaultClientSide(ServerRuntimeSelectionWidgetDefaultingCommand.java:209)\n    at org.eclipse.jst.ws.internal.creation.ui.widgets.runtime.ServerRuntimeSelectionWidgetDefaultingCommand.execute(ServerRuntimeSelectionWidgetDefaultingCommand.java:188)\n    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:413)\n\nThe problem goes away in subsequent Web service wizard invocation until Eclipse is re-started.\n\nWe need to catch the exception when certain plugins in the installation did not define their facet correctly and handle it gracefully.",
    "If I am understanding this correctly this problem can occur when a plugin using the \"org.eclipse.jst.ws.consumption.ui.serviceRuntimes\" extension point defines a \"required-facet-version\" element with an invalid facet attribute.  The facet could be missing or simply invalid. This would only happen after first starting eclipse because after that things have been cached and the plugin.xml is not read in again.\n\nTo prevent this error from being displayed to the user we can add a try/catch block. This will help \"bullet-proof\" the WTP code.  However the root of this problem is some other plugin defining an invalid facet\n",
    "Created an attachment (id\u003d47164)\npatch for org.eclipse.jst.ws.consumption.ui\n\nTry out this patch.\n\nThis patch first checks that a project facet is valid before it tries to get the facet from the ProjectFacetsManager.",
    "Thanks Mark. Reviewed and committed. Will release later.",
    "Released to HEAD and R1_5_maintenance, tag v200608030200.",
    "Verified.",
    "Verified on 0828."
  ],
  "commentCreationDates": [
    "2006-07-28T17:14:05+02:00",
    "2006-08-01T19:10:57+02:00",
    "2006-08-01T19:29:56+02:00",
    "2006-08-02T23:17:00+02:00",
    "2006-08-03T04:02:06+02:00",
    "2006-08-30T22:49:41+02:00",
    "2006-08-30T22:51:55+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalArgumentException",
      "message": "Project facet com.ibm.websphere.coexistence.web has not been defined.",
      "elements": [
        {
          "method": "org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.getProjectFacet",
          "source": "ProjectFacetsManagerImpl.java:191"
        },
        {
          "method": "org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.getProjectFacet",
          "source": "ProjectFacetsManager.java:81"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.wsrt.ServiceRuntimeDescriptor.getRequiredFacetVersions",
          "source": "ServiceRuntimeDescriptor.java:77"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.wsrt.FacetMatchCache.getTemplatesForServiceRuntime",
          "source": "FacetMatchCache.java:438"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.wsrt.WebServiceRuntimeExtensionUtils2.getAllServiceProjectTypes",
          "source": "WebServiceRuntimeExtensionUtils2.java:130"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.preferences.ProjectTopologyDefaults.getServiceTypes",
          "source": "ProjectTopologyDefaults.java:24"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.preferences.PersistentProjectTopologyContext.load",
          "source": "PersistentProjectTopologyContext.java:35"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.plugin.WebServiceConsumptionUIPlugin.getProjectTopologyContext",
          "source": "WebServiceConsumptionUIPlugin.java:93"
        },
        {
          "method": "org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelectionWidgetDefaultingCommand.defaultClientSideFromServiceSide",
          "source": "ClientRuntimeSelectionWidgetDefaultingCommand.java:1287"
        },
        {
          "method": "org.eclipse.jst.ws.internal.creation.ui.widgets.runtime.ServerRuntimeSelectionWidgetDefaultingCommand.defaultClientSide",
          "source": "ServerRuntimeSelectionWidgetDefaultingCommand.java:209"
        },
        {
          "method": "org.eclipse.jst.ws.internal.creation.ui.widgets.runtime.ServerRuntimeSelectionWidgetDefaultingCommand.execute",
          "source": "ServerRuntimeSelectionWidgetDefaultingCommand.java:188"
        },
        {
          "method": "org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand",
          "source": "CommandFragmentEngine.java:413"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "152150",
      "date": "2006-07-28T17:14:05+02:00",
      "product": "Web Tools",
      "component": "jst.ws",
      "severity": "normal"
    }
  ],
  "groupId": "152150",
  "bugId": "152150",
  "date": "2006-07-28T17:14:05+02:00",
  "product": "Web Tools",
  "component": "jst.ws",
  "severity": "normal"
}