{
  "comments": [
    "I got the following log entry in M5 + JDT 244a patch:\n\n\u003clog-entry date\u003d\"Tue May 21 09:35:08 CDT 2002\"\u003e\n  \u003cstatus\n     code\u003d\"2\"\n     severity\u003d\"WARNING\"\n     message\u003d\"Problems occurred when invoking code from plug-in: \norg.eclipse.ui.\"\n     plugin-id\u003d\"org.eclipse.ui\"\u003e\n    \u003cexception\n       message\u003d\"null\"\n       trace\u003d\"\njava.lang.NullPointerException\n\tat org.eclipse.jdt.internal.core.BufferManager.addBuffer\n(BufferManager.java:39)\n\tat org.eclipse.jdt.internal.core.WorkingCopy.openBuffer\n(WorkingCopy.java:319)\n\tat org.eclipse.jdt.internal.core.Openable.getBuffer(Openable.java:182)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.getSource\n(CompilationUnit.java:528)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.resolve\n(CompilationUnitProblemFinder.java:153)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.buildStructure\n(CompilationUnit.java:80)\n\tat org.eclipse.jdt.internal.core.Openable.openWhenClosed\n(Openable.java:383)\n\tat org.eclipse.jdt.internal.core.JavaElement.openHierarchy\n(JavaElement.java:505)\n\tat org.eclipse.jdt.internal.core.JavaElement.getRawInfo\n(JavaElement.java:386)\n\tat org.eclipse.jdt.internal.core.JavaElement.exists\n(JavaElement.java:160)\n\tat org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.exists\n(TypeHierarchy.java:326)\n\tat \norg.eclipse.jdt.internal.corext.util.SuperTypeHierarchyCache.findTypeHierarchyIn\nCache(SuperTypeHierarchyCache.java:88)\n\tat \norg.eclipse.jdt.internal.corext.util.SuperTypeHierarchyCache.getTypeHierarchy\n(SuperTypeHierarchyCache.java:52)\n\tat \norg.eclipse.jdt.internal.ui.viewsupport.OverrideAdornmentProvider.computeAdornme\nntFlags(OverrideAdornmentProvider.java:36)\n\tat org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getImage\n(JavaUILabelProvider.java:82)\n\tat org.eclipse.jface.viewers.DecoratingLabelProvider.getImage\n(DecoratingLabelProvider.java:65)\n\tat org.eclipse.jface.viewers.StructuredViewer.getLabel\n(StructuredViewer.java:1089)\n\tat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:88)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem\n(AbstractTreeViewer.java:352)\n\tat org.eclipse.jface.viewers.StructuredViewer.updateItem\n(StructuredViewer.java:1044)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem\n(AbstractTreeViewer.java:256)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.createChildren\n(AbstractTreeViewer.java:241)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel\n(AbstractTreeViewer.java:764)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage$JavaOutlineViewer.interna\nlExpandToLevel(JavaOutlinePage.java:312)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel\n(AbstractTreeViewer.java:772)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage$JavaOutlineViewer.interna\nlExpandToLevel(JavaOutlinePage.java:312)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$4.run\n(AbstractTreeViewer.java:659)\n\tat org.eclipse.jface.viewers.StructuredViewer.preservingSelection\n(StructuredViewer.java:616)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged\n(AbstractTreeViewer.java:650)\n\tat org.eclipse.jface.viewers.ContentViewer.setInput\n(ContentViewer.java:234)\n\tat org.eclipse.jface.viewers.StructuredViewer.setInput\n(StructuredViewer.java:785)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage.createControl\n(JavaOutlinePage.java:726)\n\tat org.eclipse.ui.views.contentoutline.ContentOutline.doCreatePage\n(ContentOutline.java:105)\n\tat org.eclipse.ui.part.PageBookView.createPage(PageBookView.java:275)\n\tat org.eclipse.ui.part.PageBookView.partActivated(PageBookView.java:516)\n\tat org.eclipse.ui.internal.PartListenerList$1.run\n(PartListenerList.java:37)\n\tat org.eclipse.core.internal.runtime.InternalPlatform.run\n(InternalPlatform.java:838)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:411)\n\tat org.eclipse.ui.internal.PartListenerList.firePartActivated\n(PartListenerList.java:35)\n\tat org.eclipse.ui.internal.WorkbenchPage.firePartActivated\n(WorkbenchPage.java:922)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart\n(WorkbenchPage.java:1887)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate\n(WorkbenchPage.java:335)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1571)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1523)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1515)\n\tat org.eclipse.ui.internal.ReopenEditorMenu.open\n(ReopenEditorMenu.java:196)\n\tat org.eclipse.ui.internal.ReopenEditorMenu$1.widgetSelected\n(ReopenEditorMenu.java:164)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:85)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1412)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1208)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:836)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:819)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:777)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:319)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:190)\n\tat org.eclipse.core.launcher.Main.run(Main.java:549)\n\tat org.eclipse.core.launcher.Main.main(Main.java:390)\n\"\u003e\n    \u003c/exception\u003e\n  \u003c/status\u003e\n\u003c/log-entry\u003e\n\nI think it\u0027s a rare problem, I haven\u0027t been able to replicate it again. I \nhave \"Close editors automatically\" setting checked in preferences, I have a \nhunch this might be related.",
    "the actual NPE happens in JDT core moving there for initial investigation.",
    "In 244a, there was no null check if the buffer factory couldn\u0027t open a buffer. \nProtection got added since then.\n\nMoving to JDT/UI, so as to investigate how its buffer factory for documents can \nanswer nulls.",
    "adam, pls try to reproduce",
    "verified that \nCompilationUnitDocumentProvider.BufferFactory::createBuffer()\nnever answers null\n\npong to jcore to check if it\u0027s ok that\nCompilationUnit::openBuffer\nClassFile::openBuffer\n\nare not protected against the null case\n\nbtw, is it ok that BufferManager can answer null?\n(api on IBufferFactory says the value is always not-null)",
    "We added null checks as protection, but the factory should never answer null \nback. The manager may answer null if the buffer isn\u0027t already cached.\n\nBack to UI for disposal, the original bug was due to a defect in its buffer \nfactory, since working copies are using document adapter buffers.",
    "closing"
  ],
  "commentCreationDates": [
    "2002-05-21T16:35:21+02:00",
    "2002-05-25T11:57:33+02:00",
    "2002-05-25T14:39:57+02:00",
    "2002-05-31T15:34:24+02:00",
    "2002-05-31T18:00:31+02:00",
    "2002-05-31T22:55:40+02:00",
    "2002-06-09T01:03:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.core.BufferManager.addBuffer",
          "source": "BufferManager.java:39"
        },
        {
          "method": "org.eclipse.jdt.internal.core.WorkingCopy.openBuffer",
          "source": "WorkingCopy.java:319"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.getBuffer",
          "source": "Openable.java:182"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.getSource",
          "source": "CompilationUnit.java:528"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.resolve",
          "source": "CompilationUnitProblemFinder.java:153"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.buildStructure",
          "source": "CompilationUnit.java:80"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.openWhenClosed",
          "source": "Openable.java:383"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.openHierarchy",
          "source": "JavaElement.java:505"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getRawInfo",
          "source": "JavaElement.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.exists",
          "source": "JavaElement.java:160"
        },
        {
          "method": "org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.exists",
          "source": "TypeHierarchy.java:326"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.SuperTypeHierarchyCache.findTypeHierarchyInCache",
          "source": "SuperTypeHierarchyCache.java:88"
        },
        {
          "method": "org.eclipse.jdt.internal.corext.util.SuperTypeHierarchyCache.getTypeHierarchy",
          "source": "SuperTypeHierarchyCache.java:52"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.OverrideAdornmentProvider.computeAdornmentFlags",
          "source": "OverrideAdornmentProvider.java:36"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getImage",
          "source": "JavaUILabelProvider.java:82"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.getImage",
          "source": "DecoratingLabelProvider.java:65"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.getLabel",
          "source": "StructuredViewer.java:1089"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:88"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:352"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1044"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:256"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:241"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractTreeViewer.java:764"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage$JavaOutlineViewer.internalExpandToLevel",
          "source": "JavaOutlinePage.java:312"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractTreeViewer.java:772"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage$JavaOutlineViewer.internalExpandToLevel",
          "source": "JavaOutlinePage.java:312"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$4.run",
          "source": "AbstractTreeViewer.java:659"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:616"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged",
          "source": "AbstractTreeViewer.java:650"
        },
        {
          "method": "org.eclipse.jface.viewers.ContentViewer.setInput",
          "source": "ContentViewer.java:234"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setInput",
          "source": "StructuredViewer.java:785"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage.createControl",
          "source": "JavaOutlinePage.java:726"
        },
        {
          "method": "org.eclipse.ui.views.contentoutline.ContentOutline.doCreatePage",
          "source": "ContentOutline.java:105"
        },
        {
          "method": "org.eclipse.ui.part.PageBookView.createPage",
          "source": "PageBookView.java:275"
        },
        {
          "method": "org.eclipse.ui.part.PageBookView.partActivated",
          "source": "PageBookView.java:516"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList$1.run",
          "source": "PartListenerList.java:37"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:838"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:411"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList.firePartActivated",
          "source": "PartListenerList.java:35"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.firePartActivated",
          "source": "WorkbenchPage.java:922"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:1887"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:335"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1571"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1523"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1515"
        },
        {
          "method": "org.eclipse.ui.internal.ReopenEditorMenu.open",
          "source": "ReopenEditorMenu.java:196"
        },
        {
          "method": "org.eclipse.ui.internal.ReopenEditorMenu$1.widgetSelected",
          "source": "ReopenEditorMenu.java:164"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:85"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1412"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1208"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:836"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:819"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:777"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:319"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:190"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:549"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:390"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "16563",
      "date": "2002-05-21T16:35:21+02:00",
      "product": "JDT",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "16563",
  "bugId": "16563",
  "date": "2002-05-21T16:35:21+02:00",
  "product": "JDT",
  "component": "UI",
  "severity": "normal"
}