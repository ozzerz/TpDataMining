{
  "comments": [
    "package com.ibm.wpstest.aspectj;\npublic aspect A {\n\tpointcut tracedPrint(String s): call(void java.io.PrintStream.println(*)) \u0026\u0026\nargs(s) \u0026\u0026 !within(A);\n\t\n\tbefore(String s): tracedPrint(s) {\n\t\tSystem.out.println(\"got you: \" + s + \" ;)\");\n\t}\t\n\t\n\tafter(String s): tracedPrint(s) {\n\t\tSystem.out.println(\"hehe, finished: \" + s + \" :(\");\n\t}\n}\n\n----\n\npackage com.ibm.wpstest.aspectj;\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tSystem.out.println(\"start\");\n\t\tSystem.out.println(\"end\");\n\t}\n}\n\n---\n\nWithin void main(String) it shows only one joinpoint in the cross references\nview. Jumping to the advice and back several times brings up an error, which\nblocks you from editing the source code further.\n\n\nKind Regards\nMartin Theiss",
    "Martin, please could you include the error message - it should be in your\nworkspace/.metadata/.log file. Thanks.",
    "this is the error log provided by eclipse:\n\n---\n!SESSION 2005-01-18 13:00:27.478 -----------------------------------------------\neclipse.buildId\u003dI20041216-2000\njava.version\u003d1.5.0_01\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_DE\nCommand-line arguments:  -os win32 -ws win32 -arch x86\n\n!ENTRY org.eclipse.core.runtime 4 2 2005-01-18 13:00:27.478\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.core.runtime\".\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getText(JavaUILabelProvider.java:153)\n\tat\norg.eclipse.jface.viewers.DecoratingLabelProvider.getText(DecoratingLabelProvider.java:118)\n\tat\norg.eclipse.contribution.xref.internal.ui.providers.XReferenceLabelProvider.getText(XReferenceLabelProvider.java:39)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.buildLabel(StructuredViewer.java:1721)\n\tat org.eclipse.jface.viewers.TreeViewer.doUpdateItem(TreeViewer.java:107)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:86)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:490)\n\tat\norg.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:352)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:1646)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:404)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:383)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:363)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractTreeViewer.java:968)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractTreeViewer.java:977)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel(AbstractTreeViewer.java:977)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$5.run(AbstractTreeViewer.java:835)\n\tat\norg.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1109)\n\tat\norg.eclipse.jface.viewers.AbstractTreeViewer.inputChanged(AbstractTreeViewer.java:824)\n\tat org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:248)\n\tat org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1314)\n\tat\norg.eclipse.contribution.xref.ui.views.XReferenceView.selectionChanged(XReferenceView.java:144)\n\tat\norg.eclipse.ui.internal.AbstractSelectionService$3.run(AbstractSelectionService.java:160)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat\norg.eclipse.ui.internal.AbstractSelectionService.fireSelection(AbstractSelectionService.java:158)\n\tat\norg.eclipse.ui.internal.AbstractSelectionService.partActivated(AbstractSelectionService.java:255)\n\tat\norg.eclipse.ui.internal.WWinPartService.firePartActivated(WWinPartService.java:210)\n\tat org.eclipse.ui.internal.WWinPartService.access$0(WWinPartService.java:206)\n\tat org.eclipse.ui.internal.WWinPartService$1.partActivated(WWinPartService.java:36)\n\tat org.eclipse.ui.internal.PartListenerList2$1.run(PartListenerList2.java:48)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:747)\n\tat\norg.eclipse.ui.internal.PartListenerList2.firePartActivated(PartListenerList2.java:46)\n\tat org.eclipse.ui.internal.WorkbenchPage.firePartActivated(WorkbenchPage.java:1399)\n\tat org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:2716)\n\tat org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:471)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1018)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:962)\n\tat org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:117)\n\tat org.eclipse.ui.internal.PartStack.close(PartStack.java:442)\n\tat org.eclipse.ui.internal.EditorStack.close(EditorStack.java:208)\n\tat org.eclipse.ui.internal.PartStack$1.close(PartStack.java:75)\n\tat\norg.eclipse.ui.internal.presentations.newapi.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:71)\n\tat\norg.eclipse.ui.internal.presentations.newapi.AbstractTabFolder.fireEvent(AbstractTabFolder.java:263)\n\tat\norg.eclipse.ui.internal.presentations.newapi.AbstractTabFolder.fireEvent(AbstractTabFolder.java:272)\n\tat\norg.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)\n\tat\norg.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:64)\n\tat\norg.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:546)\n\tat org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:190)\n\tat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2080)\n\tat org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:291)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:833)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2803)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1569)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1540)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:285)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:220)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:185)\n\tat org.eclipse.core.launcher.Main.run(Main.java:710)\n\tat org.eclipse.core.launcher.Main.main(Main.java:694)\n",
    "Hi Martin,\n\nAs yet I have been unable to recreate the crash you\u0027re seeing. Are you able to \nrecreate this every time? \n\nI am, however, able to recreate the fact that only one cross reference is seen \nfor the main method - when the cross reference view is first brought up then \nthre are two, but as soon as you start clicking anywhere, one of them \ndisappears. I\u0027m looking into this now.\n\nThanks, Helen",
    "When we create our own version of the structure model (in AJProjectModel) and \nprocess the relationships, we have a workaround which says \"if this already \nexists, then don\u0027t add it to the list\". This was a workaround for AJ bug \n80916. This bug is now fixed so we should no longer require this workaround.\n\nRemoving this, now means that the problem of only seeing the one entry (since \nour code was seeing the relationships as the same thing, and therefore only \nadding it once) is no longer there. However, now we get duplicate entries (two \nfor the before advice and two for the after advice) for each of the \"advised \nby\" entries when you click on the main method. I\u0027ve also seen the crash occur \nunder these circumstances. \n\nThe duplicate entries may be a problem with the underlying structure model \nwhich we get from AspectJ. I still need to investigate the crash.\n\nThanks, Helen",
    "The relationship map is correct - it\u0027s just that since we\u0027re unable to tell \nthe difference between the two entries (lines 17 and 18 in the Main class - \nthe two calls to sysout) (we currently don\u0027t record any difference between \nthese) then we\u0027re returning all the entries for each one. Hence each one is \nsaid to be advised by 4 places. Obviously, the fix requires recording more \ninformation in our AJDT version of the map so we can tell the difference.\n\nThanks, Helen",
    "The problem was that AJCodeElement extends LocalVariable and LocalVariable\noverwrites the hashCode() and equals() methods. The bug was that we had, what we\nconsidered to be two different AJCodeElements (same parent, same name but\ndifferent line numbers) were actually being considered equal and having equal\nhashCodes(). The fix was to overwrite the hashCode() and equals() methods in\nAJCodeElement to include the line number. This fix is in and we\u0027re just waiting\nfor a build. I believe that the crash possibly has to do with this (I\u0027ve done\nsome testing since this fix and am unable to reproduce the crash).\n\nThe final thing which I\u0027m attaching to this bug is that the ordering of what is\ndisplayed is slightly unintuitive. In the case described in this bug, the two\ncalls to sysout in the main method of Main are on say, line 18 and 19. However,\nthe one corresponding to line 19 appears in the Cross Reference view above the\none corresponding to line 18. I\u0027ve therefore written an AJComparator to use to\ngive a more logical order to the view. The tests for this are being finalized\nand will be checked in shortly.\n\nThanks, Helen",
    "The final fix is in, just waiting for the build machine to be back on line and\nreport a clean build before I close off this bug. \n\nThe fix was to order the children in the getExtraChildren(..) method in\nAJXReferenceProvider.",
    "Closing this bug as fixed:\n\nBUILD COMPLETE -  build.169\nDate of build: 01/31/2005 16:50:53\nTime to build: 96 minutes 20 seconds\nLast changed: 01/31/2005 16:11:14\n\nA development build containing this fix is also now available from the AJDT dev\nupdate site (follow the instructions from the AJDT download page for how to get\nhold of this)"
  ],
  "commentCreationDates": [
    "2005-01-18T12:07:24+01:00",
    "2005-01-18T12:42:04+01:00",
    "2005-01-18T13:57:40+01:00",
    "2005-01-20T12:54:22+01:00",
    "2005-01-20T13:57:50+01:00",
    "2005-01-20T16:35:13+01:00",
    "2005-01-26T13:42:49+01:00",
    "2005-01-31T14:26:47+01:00",
    "2005-02-02T17:13:48+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.JavaUILabelProvider.getText",
          "source": "JavaUILabelProvider.java:153"
        },
        {
          "method": "org.eclipse.jface.viewers.DecoratingLabelProvider.getText",
          "source": "DecoratingLabelProvider.java:118"
        },
        {
          "method": "org.eclipse.contribution.xref.internal.ui.providers.XReferenceLabelProvider.getText",
          "source": "XReferenceLabelProvider.java:39"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.buildLabel",
          "source": "StructuredViewer.java:1721"
        },
        {
          "method": "org.eclipse.jface.viewers.TreeViewer.doUpdateItem",
          "source": "TreeViewer.java:107"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run",
          "source": "AbstractTreeViewer.java:86"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem",
          "source": "AbstractTreeViewer.java:490"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run",
          "source": "StructuredViewer.java:352"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateItem",
          "source": "StructuredViewer.java:1646"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem",
          "source": "AbstractTreeViewer.java:404"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.run",
          "source": "AbstractTreeViewer.java:383"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:69"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.createChildren",
          "source": "AbstractTreeViewer.java:363"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractTreeViewer.java:968"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractTreeViewer.java:977"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.internalExpandToLevel",
          "source": "AbstractTreeViewer.java:977"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$5.run",
          "source": "AbstractTreeViewer.java:835"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.preservingSelection",
          "source": "StructuredViewer.java:1109"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged",
          "source": "AbstractTreeViewer.java:824"
        },
        {
          "method": "org.eclipse.jface.viewers.ContentViewer.setInput",
          "source": "ContentViewer.java:248"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setInput",
          "source": "StructuredViewer.java:1314"
        },
        {
          "method": "org.eclipse.contribution.xref.ui.views.XReferenceView.selectionChanged",
          "source": "XReferenceView.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService$3.run",
          "source": "AbstractSelectionService.java:160"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.fireSelection",
          "source": "AbstractSelectionService.java:158"
        },
        {
          "method": "org.eclipse.ui.internal.AbstractSelectionService.partActivated",
          "source": "AbstractSelectionService.java:255"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPartService.firePartActivated",
          "source": "WWinPartService.java:210"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPartService.access$0",
          "source": "WWinPartService.java:206"
        },
        {
          "method": "org.eclipse.ui.internal.WWinPartService$1.partActivated",
          "source": "WWinPartService.java:36"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList2$1.run",
          "source": "PartListenerList2.java:48"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:747"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList2.firePartActivated",
          "source": "PartListenerList2.java:46"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.firePartActivated",
          "source": "WorkbenchPage.java:1399"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.setActivePart",
          "source": "WorkbenchPage.java:2716"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.activate",
          "source": "WorkbenchPage.java:471"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditor",
          "source": "WorkbenchPage.java:1018"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditor",
          "source": "WorkbenchPage.java:962"
        },
        {
          "method": "org.eclipse.ui.internal.EditorPane.doHide",
          "source": "EditorPane.java:117"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.close",
          "source": "PartStack.java:442"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.close",
          "source": "EditorStack.java:208"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack$1.close",
          "source": "PartStack.java:75"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.newapi.TabbedStackPresentation$1.handleEvent",
          "source": "TabbedStackPresentation.java:71"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.newapi.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:263"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.newapi.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:272"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1",
          "source": "DefaultTabFolder.java:1"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed",
          "source": "DefaultTabFolder.java:64"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners",
          "source": "PaneFolder.java:546"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder$3.close",
          "source": "PaneFolder.java:190"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder.onMouse",
          "source": "CTabFolder.java:2080"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder$1.handleEvent",
          "source": "CTabFolder.java:291"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:82"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:833"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:2803"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2448"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1569"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1540"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:285"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:144"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:220"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:273"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:129"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:185"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:710"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:694"
        }
      ],
      "number": 0,
      "commentIndex": 2,
      "bugId": "83082",
      "date": "2005-01-18T13:57:40+01:00",
      "product": "AJDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "83082",
  "bugId": "83082",
  "date": "2005-01-18T12:07:24+01:00",
  "product": "AJDT",
  "component": "Core",
  "severity": "major"
}