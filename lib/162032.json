{
  "comments": [
    "Currently I\u0027m coding on Salesforce ODA driver which invokes web service in order to retrieve data from Salesforce CRM.\n\nNow the scratch could successfully preview data in DataSet Wizard page, however the same goes to Web viewer result of ClassCastException occurs when running the report.\n\nThe partial of trace logs are as follow (Kindly get the complete trace logs after trying out the reproducible scenario)\n\n- Factory org.apache.axis.configuration.EngineConfigurationFactoryServlet Ignored: missing required method: public static EngineConfigurationFactory newFactory(Object).\n- Factory org.apache.axis.configuration.EngineConfigurationFactoryDefault Ignored: missing required method: public static EngineConfigurationFactory newFactory(Object).\nAxisFault\n faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException\n faultSubcode: \n faultString: java.lang.ClassCastException: org.apache.axis.transport.http.HTTPSender\n faultActor: \n faultNode: \n faultDetail: \n\t{http://xml.apache.org/axis/}stackTrace:java.lang.ClassCastException: org.apache.axis.transport.http.HTTPSender\n\tat org.apache.axis.deployment.wsdd.WSDDTargetedChain.makeNewInstance(WSDDTargetedChain.java:157)\n\tat org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)\n\tat org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)\n\tat org.apache.axis.deployment.wsdd.WSDDDeployment.getTransport(WSDDDeployment.java:410)\n\tat org.apache.axis.configuration.FileProvider.getTransport(FileProvider.java:257)\n\tat org.apache.axis.AxisEngine.getTransport(AxisEngine.java:332)\n\tat org.apache.axis.client.AxisClient.invoke(AxisClient.java:163)\n\tat org.apache.axis.client.Call.invokeEngine(Call.java:2784)\n\tat org.apache.axis.client.Call.invoke(Call.java:2767)\n\tat org.apache.axis.client.Call.invoke(Call.java:2443)\n\tat org.apache.axis.client.Call.invoke(Call.java:2366)\n\tat org.apache.axis.client.Call.invoke(Call.java:1812)\n\tat com.sforce.soap.partner.SoapBindingStub.login(SoapBindingStub.java:1388)\n\tat org.eclipse.birt.report.data.oda.salesforce.Connection.open(Connection.java:106)\n\tat org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open(OdaConnection.java:235)\n\tat org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:140)\n\tat org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:130)\n\tat org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:117)\n\tat org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource(DataSourceRuntime.java:206)\n\tat org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource(QueryExecutor.java:247)\n\tat org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution(QueryExecutor.java:201)\n\tat org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare(PreparedQuery.java:397)\n\tat org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:147)\n\tat org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute(PreparedOdaDSQuery.java:135)\n\tat org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:127)\n\tat org.eclipse.birt.report.engine.data.dte.DteDataEngine.doExecuteQuery(DteDataEngine.java:114)\n\tat org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.execute(AbstractDataEngine.java:208)\n\tat org.eclipse.birt.report.engine.executor.ExecutionContext.executeQuery(ExecutionContext.java:1640)\n\tat org.eclipse.birt.report.engine.executor.QueryItemExecutor.executeQuery(QueryItemExecutor.java:62)\n\tat org.eclipse.birt.report.engine.executor.TableItemExecutor.execute(TableItemExecutor.java:74)\n\tat org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute(LocalizedReportItemExecutor.java:35)\n\tat org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren(HTMLPageLM.java:123)\n\tat org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:81)\n\tat org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:80)\n\tat org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:194)\n\tat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport(Unknown Source)\n\tat org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute(Unknown Source)\n\tat org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute(Unknown Source)\n\tat org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source)\n\tat org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(Unknown Source)\n\tat org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet(Unknown Source)\n\tat org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2422)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke(EclipseErrorReportValve.java:153)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:700)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:584)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\n\tat java.lang.Thread.run(Thread.java:595)\n\n\t{http://xml.apache.org/axis/}hostname:Danielwoo\n\n\n\nFurther analysis has been carried out and found that Class loader issue may be the major contributor to this problem, since Salesforce ODA Driver need to dependent on external org.apache.axis plugin, however another set of axis jar files exists in Viewer plugin at the location of org.eclipse.birt.report.viewer_2.1.1.v20060926-0959\\birt\\WEB-INF\\lib.\n\nReproduce steps:\n\n1.\tFirst register a login account at Salesforce website, https://www.salesforce.com/us/signup/signup_1ab.jsp?CampaignId\u003d7013000000038P6.\n2.\tCheck out Salesforce ODA driver from our shanghai(192.168.218.40) CVS at Repository path /cvsrepo/app.\n3.\tPlace the necessary third party plugins from CVS into your eclipse.\n4.\tBuild the codes and run it in a runtime workbench.\n5.\tCreate a birt report design.\n6.\tCreat a datasource using ?Salesforce ODA Data Source? with the account you registered previously.\n7.\tBuild a Data Set base on the Salesforce Data Source, and you could either put following content in the query: SELECT Account.Name, Account.Type from Account or select the corresponding field from Table and Field List, and then preview the query result which will lead you to a successful result.\n8.\tHowever when click on View Report in Web Browser, ClassCastException would occurs.\n\n\nCurrently this issue blocks us from taking any further step in our Salesforce project since we couldn?t view and deploy any report.Any solution, workaround or hint is most welcome and highly appreciated",
    "The libs in WEB-INF/lib are necessary; otherwise sevlet will not correctly work.\nAt the same time, some logic about the webAppClassLoader and Eclipse OSGI bundle can not be managed by custom source codes. Therefore, to avoid the conflicts, we might do some wrapper or rename for those classes in your oda driver projects to make a unique class name.",
    "In deploy, i think we can remove jars from the axis plugin, but this will disable the data preview.\n\nTo resolve this problem, i think we need use OSGi servlet bridge plugin and move all the servlet codes into OSGi plugin.",
    "The day before yesterday Sue and I figured out a way to conquer this class loader issue by checking out Axis source codes and refactoring it from org.apache.axis to org.apache.sfaxis, after we reloaded to our app and it works perfectly without any ClassCastException occurs.\n\nAlthough this approach is not one time purchasing the same issue may occur again in the future, it provides us with ideal way to handle the issue within minimum side-effect to others for now. Hence please consider this issue as resolved and appreciate so much for your attention and time on it. \n\nIn order to solve the issue in one time purchasing, I think Engine team and Model team should take Yan\u0027s comment into consideration, and I\u0027m interested in learning details. Thanks!"
  ],
  "commentCreationDates": [
    "2006-10-24T04:50:16+02:00",
    "2006-10-26T04:04:50+02:00",
    "2006-10-26T18:27:37+02:00",
    "2006-10-27T03:28:46+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "org.apache.axis.transport.http.HTTPSender",
      "elements": [
        {
          "method": "org.apache.axis.deployment.wsdd.WSDDTargetedChain.makeNewInstance",
          "source": "WSDDTargetedChain.java:157"
        },
        {
          "method": "org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance",
          "source": "WSDDDeployableItem.java:274"
        },
        {
          "method": "org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance",
          "source": "WSDDDeployableItem.java:260"
        },
        {
          "method": "org.apache.axis.deployment.wsdd.WSDDDeployment.getTransport",
          "source": "WSDDDeployment.java:410"
        },
        {
          "method": "org.apache.axis.configuration.FileProvider.getTransport",
          "source": "FileProvider.java:257"
        },
        {
          "method": "org.apache.axis.AxisEngine.getTransport",
          "source": "AxisEngine.java:332"
        },
        {
          "method": "org.apache.axis.client.AxisClient.invoke",
          "source": "AxisClient.java:163"
        },
        {
          "method": "org.apache.axis.client.Call.invokeEngine",
          "source": "Call.java:2784"
        },
        {
          "method": "org.apache.axis.client.Call.invoke",
          "source": "Call.java:2767"
        },
        {
          "method": "org.apache.axis.client.Call.invoke",
          "source": "Call.java:2443"
        },
        {
          "method": "org.apache.axis.client.Call.invoke",
          "source": "Call.java:2366"
        },
        {
          "method": "org.apache.axis.client.Call.invoke",
          "source": "Call.java:1812"
        },
        {
          "method": "com.sforce.soap.partner.SoapBindingStub.login",
          "source": "SoapBindingStub.java:1388"
        },
        {
          "method": "org.eclipse.birt.report.data.oda.salesforce.Connection.open",
          "source": "Connection.java:106"
        },
        {
          "method": "org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open",
          "source": "OdaConnection.java:235"
        },
        {
          "method": "org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection",
          "source": "ConnectionManager.java:140"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.newConnection",
          "source": "DataSource.java:130"
        },
        {
          "method": "org.eclipse.birt.data.engine.executor.DataSource.open",
          "source": "DataSource.java:117"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource",
          "source": "DataSourceRuntime.java:206"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource",
          "source": "QueryExecutor.java:247"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution",
          "source": "QueryExecutor.java:201"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare",
          "source": "PreparedQuery.java:397"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute",
          "source": "PreparedDataSourceQuery.java:147"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute",
          "source": "PreparedOdaDSQuery.java:135"
        },
        {
          "method": "org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute",
          "source": "PreparedDataSourceQuery.java:127"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.DteDataEngine.doExecuteQuery",
          "source": "DteDataEngine.java:114"
        },
        {
          "method": "org.eclipse.birt.report.engine.data.dte.AbstractDataEngine.execute",
          "source": "AbstractDataEngine.java:208"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.ExecutionContext.executeQuery",
          "source": "ExecutionContext.java:1640"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.QueryItemExecutor.executeQuery",
          "source": "QueryItemExecutor.java:62"
        },
        {
          "method": "org.eclipse.birt.report.engine.executor.TableItemExecutor.execute",
          "source": "TableItemExecutor.java:74"
        },
        {
          "method": "org.eclipse.birt.report.engine.internal.executor.l18n.LocalizedReportItemExecutor.execute",
          "source": "LocalizedReportItemExecutor.java:35"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layoutChildren",
          "source": "HTMLPageLM.java:123"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout",
          "source": "HTMLPageLM.java:81"
        },
        {
          "method": "org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout",
          "source": "HTMLReportLayoutEngine.java:80"
        },
        {
          "method": "org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run",
          "source": "RunAndRenderTask.java:194"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.BirtViewerReportService.runAndRenderReport",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.BirtRunAndRenderActionHandler.__execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.service.actionhandler.AbstractBaseActionHandler.execute",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BirtEngineServlet.__doGet",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.birt.report.servlet.BaseReportEngineServlet.doGet",
          "source": "Unknown Source"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:740"
        },
        {
          "method": "org.apache.axis.transport.http.AxisServletBase.service",
          "source": "AxisServletBase.java:327"
        },
        {
          "method": "javax.servlet.http.HttpServlet.service",
          "source": "HttpServlet.java:853"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.internalDoFilter",
          "source": "ApplicationFilterChain.java:247"
        },
        {
          "method": "org.apache.catalina.core.ApplicationFilterChain.doFilter",
          "source": "ApplicationFilterChain.java:193"
        },
        {
          "method": "org.apache.catalina.core.StandardWrapperValve.invoke",
          "source": "StandardWrapperValve.java:256"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContextValve.invoke",
          "source": "StandardContextValve.java:191"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.CertificatesValve.invoke",
          "source": "CertificatesValve.java:246"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardContext.invoke",
          "source": "StandardContext.java:2422"
        },
        {
          "method": "org.apache.catalina.core.StandardHostValve.invoke",
          "source": "StandardHostValve.java:180"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.valves.ErrorDispatcherValve.invoke",
          "source": "ErrorDispatcherValve.java:171"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke",
          "source": "EclipseErrorReportValve.java:153"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:641"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.catalina.core.StandardEngineValve.invoke",
          "source": "StandardEngineValve.java:174"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext",
          "source": "StandardPipeline.java:643"
        },
        {
          "method": "org.apache.catalina.core.StandardPipeline.invoke",
          "source": "StandardPipeline.java:480"
        },
        {
          "method": "org.apache.catalina.core.ContainerBase.invoke",
          "source": "ContainerBase.java:995"
        },
        {
          "method": "org.apache.coyote.tomcat4.CoyoteAdapter.service",
          "source": "CoyoteAdapter.java:199"
        },
        {
          "method": "org.apache.coyote.http11.Http11Processor.process",
          "source": "Http11Processor.java:828"
        },
        {
          "method": "org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection",
          "source": "Http11Protocol.java:700"
        },
        {
          "method": "org.apache.tomcat.util.net.TcpWorkerThread.runIt",
          "source": "PoolTcpEndpoint.java:584"
        },
        {
          "method": "org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run",
          "source": "ThreadPool.java:683"
        },
        {
          "method": "java.lang.Thread.run",
          "source": "Thread.java:595"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "162032",
      "date": "2006-10-24T04:50:16+02:00",
      "product": "BIRT",
      "component": "Report Viewer",
      "severity": "blocker"
    }
  ],
  "groupId": "162032",
  "bugId": "162032",
  "date": "2006-10-24T04:50:16+02:00",
  "product": "BIRT",
  "component": "Report Viewer",
  "severity": "blocker"
}