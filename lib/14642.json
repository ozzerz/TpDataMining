{
  "comments": [
    "Sometimes, when attempting to open a source file via the packages view or via \nthe step into option while debugging, an internal error occurs. Eclipse \nconsistently gives the error when attempting to open that file. Other files \nopen normally. I\u0027m using build 20020416 (M5) with JDK 1.3:\n\n  java version \"1.3.1_01\"\n  Java(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_01)\n  Java HotSpot(TM) Client VM (build 1.3.1_01, mixed mode)\n\nThe stack trace from Eclipse:\njava.lang.StringIndexOutOfBoundsException: String index out of range: 21\n\tat java.lang.String.charAt(String.java:516)\n\tat org.eclipse.jdt.internal.core.ClassFile.getType(ClassFile.java:290)\n\tat org.eclipse.jdt.internal.core.NameLookup.seekTypesInBinaryPackage\n(NameLookup.java:593)\n\tat org.eclipse.jdt.internal.core.NameLookup.seekTypes\n(NameLookup.java:546)\n\tat org.eclipse.jdt.internal.core.NameLookup.findType\n(NameLookup.java:431)\n\tat org.eclipse.jdt.internal.core.NameLookup.findType\n(NameLookup.java:359)\n\tat org.eclipse.jdt.internal.core.SearchableEnvironment.find\n(SearchableEnvironment.java:49)\n\tat org.eclipse.jdt.internal.core.SearchableEnvironment.findType\n(SearchableEnvironment.java:128)\n\tat org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType\n(LookupEnvironment.java:85)\n\tat \norg.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage\n(PackageBinding.java:166)\n\tat \norg.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findOnDemandImport\n(CompilationUnitScope.java:272)\n\tat \norg.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findSingleTypeImpo\nrt(CompilationUnitScope.java:327)\n\tat \norg.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInImports\n(CompilationUnitScope.java:222)\n\tat \norg.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInTypes\n(CompilationUnitScope.java:258)\n\tat org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:559)\n\tat org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.resolve\n(CompilationUnitProblemFinder.java:151)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.buildStructure\n(CompilationUnit.java:80)\n\tat org.eclipse.jdt.internal.core.Openable.openWhenClosed\n(Openable.java:394)\n\tat org.eclipse.jdt.internal.core.WorkingCopy.openWhenClosed\n(WorkingCopy.java:319)\n\tat org.eclipse.jdt.internal.core.Openable.open(Openable.java:330)\n\tat org.eclipse.jdt.internal.core.WorkingCopy.open(WorkingCopy.java:281)\n\tat org.eclipse.jdt.internal.core.CompilationUnit.getWorkingCopy\n(CompilationUnit.java:574)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitDocumentProvider.createEle\nmentInfo(CompilationUnitDocumentProvider.java:428)\n\tat org.eclipse.ui.texteditor.AbstractDocumentProvider.connect\n(AbstractDocumentProvider.java:247)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.doSetInput\n(AbstractTextEditor.java:1503)\n\tat org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.doSetInput\n(JavaEditor.java:479)\n\tat \norg.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.doSetInput\n(CompilationUnitEditor.java:932)\n\tat org.eclipse.ui.texteditor.AbstractTextEditor.init\n(AbstractTextEditor.java:1146)\n\tat org.eclipse.ui.internal.EditorManager.createSite\n(EditorManager.java:485)\n\tat org.eclipse.ui.internal.EditorManager.access$1\n(EditorManager.java:483)\n\tat org.eclipse.ui.internal.EditorManager$2.run(EditorManager.java:467)\n\tat org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:56)\n\tat org.eclipse.ui.internal.EditorManager.openInternalEditor\n(EditorManager.java:460)\n\tat org.eclipse.ui.internal.EditorManager.openInternalEditor\n(EditorManager.java:529)\n\tat org.eclipse.ui.internal.EditorManager.openEditor\n(EditorManager.java:361)\n\tat org.eclipse.ui.internal.EditorManager.openEditor\n(EditorManager.java:264)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1559)\n\tat org.eclipse.ui.internal.WorkbenchPage.openEditor\n(WorkbenchPage.java:1523)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor\n(EditorUtility.java:130)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor\n(EditorUtility.java:102)\n\tat org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor\n(EditorUtility.java:89)\n\tat org.eclipse.jdt.internal.ui.packageview.OpenResourceAction.run\n(OpenResourceAction.java:51)\n\tat \norg.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.handleDoubleClick\n(PackageExplorerPart.java:736)\n\tat org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.access$1\n(PackageExplorerPart.java:731)\n\tat \norg.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.doubleClick\n(PackageExplorerPart.java:358)\n\tat org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick\n(StructuredViewer.java:286)\n\tat org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect\n(StructuredViewer.java:444)\n\tat org.eclipse.jface.viewers.AbstractTreeViewer$1.widgetDefaultSelected\n(AbstractTreeViewer.java:627)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent\n(TypedListener.java:92)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:75)\n\tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:637)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:1412)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1208)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:836)\n\tat org.eclipse.ui.internal.Workbench.run(Workbench.java:819)\n\tat org.eclipse.core.internal.boot.InternalBootLoader.run\n(InternalBootLoader.java:777)\n\tat org.eclipse.core.boot.BootLoader.run(BootLoader.java:319)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:190)\n\tat org.eclipse.core.launcher.Main.run(Main.java:549)\n\tat org.eclipse.core.launcher.Main.main(Main.java:390)",
    "Could you please provide a test case? A file that failed all the time. I need to be able to reproduce \nit, if you want us to fix it.\nThanks for the report.",
    "I can\u0027t give you a file that makes it fail I\u0027m afraid as it\u0027s proprietry code. \nBut it is conststently failing on the same file, so it\u0027s not happening at \nrandom.\n\nWhat I have noticed is that if I removed all the import statements from the \nfile, then Eclipse would load it. Then, as I added each import statement using \nthe \u0027Add Import\u0027 feature, then every now and then it would give the exception. \nThe same would happen if I used the \u0027Organise Imports\u0027 feature.\n\nI hope that helps. ",
    "Could you please tell me if you use names containing \u0027$\u0027? Could you double-check if you can \nreproduce the problem by using the same imports in another class? If yes, then could you please \ngive me the corresponding imports? We need to isolate a test case. Without it, it is almost \nimpossible to reproduce the problem, and therefore to fix it.\nThanks for your help.",
    "In the classes that I\u0027ve tried to load there are no $ characters in any names. \nBut, we do have some classes that end with a $ character that are in Jar files \nin the classpath for the project. So I guess it could be that these are causing \nit problems what with the compiler using $ for enclosed class names. I\u0027ve tried \nthose import statememnts in a new class and that class fails to load now too. \nBut none of those imports contain a $.\n\nI\u0027ve noticed that Eclipse had problems in the package view showing the package \noutline if the package has these classes that end in $ in it.\n\nI\u0027ve tried to create a new project containing classes that end in $ and Eclipse \nis OK with that (if the classes are written outside of Eclipse first); they \nload in fine.",
    "Ok, I think I can understand what is going on. I will try to build a test case \nthat fails in the same way. My guess is that as soon as you have a class name \nending with a \u0027$\u0027 in a jar file in your classpath, Eclipse fails with the same \nexception. Is it possible to get your jar or is it proprietary code?\n",
    "Yes, that seems to be what\u0027s happening. The Jar file is, I\u0027m afraid, \nproprietry. When expanding a package in it in the packages view the display \nlooks like:\n + [+] package.name\n    +-[#] ClassNameOne\n    +-[#] ClassNameTwo\n    |-\n\nThere should be lots more classes under ClassNameTwo.",
    "I reproduced the problem and it comes from the fact that the \u0027$\u0027 sign is not expected to be at the end \nof the class name. Creating a jar containing such a class blew up Eclipse when I tried to create a \nclass extending this class after adding the jar in the classpath of the project.\nThanks for your \nhelp. It should not be long to fix the problem.",
    "Regression tests added.\nFixed and released in HEAD.",
    "Fixed."
  ],
  "commentCreationDates": [
    "2002-04-25T18:43:27+02:00",
    "2002-04-25T19:50:13+02:00",
    "2002-04-26T12:22:02+02:00",
    "2002-04-26T16:27:45+02:00",
    "2002-04-26T16:55:28+02:00",
    "2002-04-26T17:02:22+02:00",
    "2002-04-26T17:10:38+02:00",
    "2002-04-26T17:14:49+02:00",
    "2002-04-26T20:31:11+02:00",
    "2002-04-26T20:31:20+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.StringIndexOutOfBoundsException",
      "message": "String index out of range: 21",
      "elements": [
        {
          "method": "java.lang.String.charAt",
          "source": "String.java:516"
        },
        {
          "method": "org.eclipse.jdt.internal.core.ClassFile.getType",
          "source": "ClassFile.java:290"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.seekTypesInBinaryPackage",
          "source": "NameLookup.java:593"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.seekTypes",
          "source": "NameLookup.java:546"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.findType",
          "source": "NameLookup.java:431"
        },
        {
          "method": "org.eclipse.jdt.internal.core.NameLookup.findType",
          "source": "NameLookup.java:359"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.find",
          "source": "SearchableEnvironment.java:49"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.findType",
          "source": "SearchableEnvironment.java:128"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType",
          "source": "LookupEnvironment.java:85"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage",
          "source": "PackageBinding.java:166"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findOnDemandImport",
          "source": "CompilationUnitScope.java:272"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.findSingleTypeImport",
          "source": "CompilationUnitScope.java:327"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInImports",
          "source": "CompilationUnitScope.java:222"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.faultInTypes",
          "source": "CompilationUnitScope.java:258"
        },
        {
          "method": "org.eclipse.jdt.internal.compiler.Compiler.resolve",
          "source": "Compiler.java:559"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.resolve",
          "source": "CompilationUnitProblemFinder.java:151"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.buildStructure",
          "source": "CompilationUnit.java:80"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.openWhenClosed",
          "source": "Openable.java:394"
        },
        {
          "method": "org.eclipse.jdt.internal.core.WorkingCopy.openWhenClosed",
          "source": "WorkingCopy.java:319"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.open",
          "source": "Openable.java:330"
        },
        {
          "method": "org.eclipse.jdt.internal.core.WorkingCopy.open",
          "source": "WorkingCopy.java:281"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CompilationUnit.getWorkingCopy",
          "source": "CompilationUnit.java:574"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitDocumentProvider.createElementInfo",
          "source": "CompilationUnitDocumentProvider.java:428"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractDocumentProvider.connect",
          "source": "AbstractDocumentProvider.java:247"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.doSetInput",
          "source": "AbstractTextEditor.java:1503"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.doSetInput",
          "source": "JavaEditor.java:479"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.doSetInput",
          "source": "CompilationUnitEditor.java:932"
        },
        {
          "method": "org.eclipse.ui.texteditor.AbstractTextEditor.init",
          "source": "AbstractTextEditor.java:1146"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.createSite",
          "source": "EditorManager.java:485"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.access$1",
          "source": "EditorManager.java:483"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager$2.run",
          "source": "EditorManager.java:467"
        },
        {
          "method": "org.eclipse.swt.custom.BusyIndicator.showWhile",
          "source": "BusyIndicator.java:56"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openInternalEditor",
          "source": "EditorManager.java:460"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openInternalEditor",
          "source": "EditorManager.java:529"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditor",
          "source": "EditorManager.java:361"
        },
        {
          "method": "org.eclipse.ui.internal.EditorManager.openEditor",
          "source": "EditorManager.java:264"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1559"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.openEditor",
          "source": "WorkbenchPage.java:1523"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:130"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:102"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor",
          "source": "EditorUtility.java:89"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.OpenResourceAction.run",
          "source": "OpenResourceAction.java:51"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.handleDoubleClick",
          "source": "PackageExplorerPart.java:736"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.access$1",
          "source": "PackageExplorerPart.java:731"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.doubleClick",
          "source": "PackageExplorerPart.java:358"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick",
          "source": "StructuredViewer.java:286"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect",
          "source": "StructuredViewer.java:444"
        },
        {
          "method": "org.eclipse.jface.viewers.AbstractTreeViewer$1.widgetDefaultSelected",
          "source": "AbstractTreeViewer.java:627"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:92"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:75"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.notifyListeners",
          "source": "Widget.java:637"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:1412"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:1208"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:836"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.run",
          "source": "Workbench.java:819"
        },
        {
          "method": "org.eclipse.core.internal.boot.InternalBootLoader.run",
          "source": "InternalBootLoader.java:777"
        },
        {
          "method": "org.eclipse.core.boot.BootLoader.run",
          "source": "BootLoader.java:319"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:190"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:549"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:390"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "14642",
      "date": "2002-04-25T18:43:27+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "major"
    }
  ],
  "groupId": "14642",
  "bugId": "14642",
  "date": "2002-04-25T18:43:27+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "major"
}