{
  "comments": [
    "N20050518_0010\n\nWhen starting some of my workspace I get the following NPE in \n\njava.lang.NullPointerException\nat\norg.eclipse.osgi.internal.resolver.StateHelperImpl.isSystemExport(StateHelperImpl.java:190)\nat\norg.eclipse.osgi.internal.resolver.StateHelperImpl.getPackages(StateHelperImpl.java:176)\nat\norg.eclipse.osgi.internal.resolver.StateHelperImpl.getVisiblePackages(StateHelperImpl.java:165)\nat\norg.eclipse.pde.internal.core.RequiredPluginsClasspathContainer.retrieveVisiblePackagesFromState(RequiredPluginsClasspathContainer.java:168)\nat\norg.eclipse.pde.internal.core.RequiredPluginsClasspathContainer.computePluginEntries(RequiredPluginsClasspathContainer.java:118)\nat\norg.eclipse.pde.internal.core.RequiredPluginsClasspathContainer.getClasspathEntries(RequiredPluginsClasspathContainer.java:99)\nat\norg.eclipse.jdt.internal.core.JavaModelManager.containerPutIfInitializingWithSameEntries(JavaModelManager.java:294)\nat org.eclipse.jdt.core.JavaCore.setClasspathContainer(JavaCore.java:3754)\nat\norg.eclipse.pde.internal.core.ModelEntry.updateClasspathContainer(ModelEntry.java:110)\nat\norg.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize(RequiredPluginsInitializer.java:40)\nat\norg.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:1543)\nat\norg.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:1018)\nat org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1316)\nat\norg.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:2048)\nat\norg.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1956)\nat org.eclipse.jdt.internal.core.JavaProject.buildStructure(JavaProject.java:341)\nat org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:233)\nat org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:488)\nat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:232)\nat org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:218)\nat\norg.eclipse.jdt.internal.core.JavaProject.getJavaProjectElementInfo(JavaProject.java:1522)\nat org.eclipse.jdt.internal.core.JavaProject.newNameLookup(JavaProject.java:2407)\nat\norg.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e(SearchableEnvironment.java:60)\nat\norg.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e(SearchableEnvironment.java:74)\nat\norg.eclipse.jdt.internal.core.CancelableNameEnvironment.\u003cinit\u003e(CancelableNameEnvironment.java:26)\nat\norg.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:491)\nat org.eclipse.jdt.core.dom.ASTParser.internalCreateAST(ASTParser.java:761)\nat org.eclipse.jdt.core.dom.ASTParser.createAST(ASTParser.java:570)\nat\norg.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST(ASTProvider.java:556)\nat org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST(ASTProvider.java:487)\nat\norg.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:165)\nat\norg.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$3.run(SelectionListenerWithASTManager.java:142)\nat org.eclipse.core.internal.jobs.Worker.run(Worker.java:67)\n\nSaw it from various locations (not only from ASTProvider in a Job).",
    "Actually, Dirk Baeumer filed the bug.",
    "cc\u0027ing Wassim incase PDE has open bugs that are dups of this one.",
    "Jeff, please approve a fix for this in RC1.  We should check for a null value \non the systemExports (simple to fix)",
    "Tom, the same should be done for getSystemPackages. We never return null where\narrays are expected in the State API. Some clients are prepared to handle that,\nbut they should not have to.",
    "I agree with Rafael comment 4.  The proper fix is to check for null in \ngetSystemExports.",
    "dirk, did you have a 3.0 osgi plugin in your workspace or your target platform \nat the time?",
    "In my scenario, I had a workspace targetting 3.0.1 and Core test plug-ins from\nthe perf_301 branch. I then replaced those plug-ins with the contents from the\nperf_30 branch, and changed the target platform to be 3.0, but don\u0027t remember in\nwhat order. It failed when reloading the target platform, or applying the\nchanges, not sure, but before the preferences dialog could be closed.",
    "should fix for RC1",
    "Fix released to HEAD."
  ],
  "commentCreationDates": [
    "2005-05-18T18:28:03+02:00",
    "2005-05-18T18:28:55+02:00",
    "2005-05-18T19:13:44+02:00",
    "2005-05-18T19:18:58+02:00",
    "2005-05-18T19:20:53+02:00",
    "2005-05-18T19:38:39+02:00",
    "2005-05-18T19:54:28+02:00",
    "2005-05-18T20:13:38+02:00",
    "2005-05-18T20:55:28+02:00",
    "2005-05-18T21:11:51+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.osgi.internal.resolver.StateHelperImpl.isSystemExport",
          "source": "StateHelperImpl.java:190"
        },
        {
          "method": "org.eclipse.osgi.internal.resolver.StateHelperImpl.getPackages",
          "source": "StateHelperImpl.java:176"
        },
        {
          "method": "org.eclipse.osgi.internal.resolver.StateHelperImpl.getVisiblePackages",
          "source": "StateHelperImpl.java:165"
        },
        {
          "method": "org.eclipse.pde.internal.core.RequiredPluginsClasspathContainer.retrieveVisiblePackagesFromState",
          "source": "RequiredPluginsClasspathContainer.java:168"
        },
        {
          "method": "org.eclipse.pde.internal.core.RequiredPluginsClasspathContainer.computePluginEntries",
          "source": "RequiredPluginsClasspathContainer.java:118"
        },
        {
          "method": "org.eclipse.pde.internal.core.RequiredPluginsClasspathContainer.getClasspathEntries",
          "source": "RequiredPluginsClasspathContainer.java:99"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.containerPutIfInitializingWithSameEntries",
          "source": "JavaModelManager.java:294"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.setClasspathContainer",
          "source": "JavaCore.java:3754"
        },
        {
          "method": "org.eclipse.pde.internal.core.ModelEntry.updateClasspathContainer",
          "source": "ModelEntry.java:110"
        },
        {
          "method": "org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize",
          "source": "RequiredPluginsInitializer.java:40"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer",
          "source": "JavaModelManager.java:1543"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer",
          "source": "JavaModelManager.java:1018"
        },
        {
          "method": "org.eclipse.jdt.core.JavaCore.getClasspathContainer",
          "source": "JavaCore.java:1316"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:2048"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath",
          "source": "JavaProject.java:1956"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.buildStructure",
          "source": "JavaProject.java:341"
        },
        {
          "method": "org.eclipse.jdt.internal.core.Openable.generateInfos",
          "source": "Openable.java:233"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.openWhenClosed",
          "source": "JavaElement.java:488"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getElementInfo",
          "source": "JavaElement.java:232"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaElement.getElementInfo",
          "source": "JavaElement.java:218"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.getJavaProjectElementInfo",
          "source": "JavaProject.java:1522"
        },
        {
          "method": "org.eclipse.jdt.internal.core.JavaProject.newNameLookup",
          "source": "JavaProject.java:2407"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e",
          "source": "SearchableEnvironment.java:60"
        },
        {
          "method": "org.eclipse.jdt.internal.core.SearchableEnvironment.\u003cinit\u003e",
          "source": "SearchableEnvironment.java:74"
        },
        {
          "method": "org.eclipse.jdt.internal.core.CancelableNameEnvironment.\u003cinit\u003e",
          "source": "CancelableNameEnvironment.java:26"
        },
        {
          "method": "org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve",
          "source": "CompilationUnitResolver.java:491"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.internalCreateAST",
          "source": "ASTParser.java:761"
        },
        {
          "method": "org.eclipse.jdt.core.dom.ASTParser.createAST",
          "source": "ASTParser.java:570"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.createAST",
          "source": "ASTProvider.java:556"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST",
          "source": "ASTProvider.java:487"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform",
          "source": "SelectionListenerWithASTManager.java:165"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$3.run",
          "source": "SelectionListenerWithASTManager.java:142"
        },
        {
          "method": "org.eclipse.core.internal.jobs.Worker.run",
          "source": "Worker.java:67"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "95795",
      "date": "2005-05-18T18:28:03+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "major"
    }
  ],
  "groupId": "95795",
  "bugId": "95795",
  "date": "2005-05-18T18:28:03+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "major"
}