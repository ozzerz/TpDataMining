{
  "comments": [
    "I20040510 0800\n1. start with clean configuration\n2. double click eclipse.exe, accept workspace location, do not exit\n3. double click eclipse.exe again\nEclipse exits without even asking for a workspace and writes 1084306779565.log \nin the configuration directory with the following content:\n\n!SESSION May 11, 2004 16:19:40.256 --------------------------------------------\n-\neclipse.buildId\u003dI200405110800\njava.version\u003d1.4.2_03\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003den_US\n!ENTRY org.eclipse.osgi May 11, 2004 16:19:40.256\n!MESSAGE Application error\n!STACK 1\njava.lang.RuntimeException: Application \"org.eclipse.ui.ide.workbench\" could \nnot be found in the registry.\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run\n(PlatformActivator.java:289)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:249)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run\n(EclipseStarter.java:126)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:269)\n\tat org.eclipse.core.launcher.Main.run(Main.java:722)\n\tat org.eclipse.core.launcher.Main.main(Main.java:706)\n\nNote the problem does not occur after exiting eclipse that was launched first, \nmore than one instance can run concurently.\n\nThis bug is causing Infocenter, Stan-alone Help, and Update Site Mirroring \njunit tests to fail when run using rel-eng testing framework.  Infocenter, \nStan-alone Help, and Update Site Mirroring launch Eclipse instance and they \nhave the problem since first instance running all junit tests is still up.\n\nWe have debug update configurator, and the problem does not seem to be there.  \nWhen running stand-alone help with debugging enabled for update configurator I \ngot following output:\n\nInstall location:\n    file:/d:/eclipse-testing/test-eclipse/eclipse/\nConfiguration file:\n    file:/d:/eclipse-testing/test-eclipse/eclipse/configuration/config.ini \nloaded\nConfiguration location:\n    file:/d:/eclipse-testing/test-eclipse/eclipse/configuration/\nConfiguration file:\n    file:/d:/eclipse-testing/test-eclipse/eclipse/configuration/config.ini \nloaded\nFramework located:\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/\nLoading framework classpath from:\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/eclipse.properties\nFramework classpath:\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/core.jar\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/console.jar\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/osgi.jar\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/resolver.jar\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/defaultAdaptor.jar\n    file:/d:/eclipse-testing/test-\neclipse/eclipse/plugins/org.eclipse.osgi_3.0.0/eclipseAdaptor.jar\nDebug options:\n    file:/D:/eclipse-testing/test-eclipse/eclipse/.options loaded\nTime to load bundles: 100\nPlatformConfig: Start parsing Configuration:file:/d:/eclipse-testing/test-\neclipse/eclipse/configuration/org.eclipse.update/platform.xml\nPlatformConfig: Start Element: uri: local Name:config qName:config\nPlatformConfig: End Processing Config Tag: date:1084303234538\nPlatformConfig: Start Element: uri: local Name:site qName:site\nPlatformConfig: End process config site url:platform:/base/ policy:USER-\nEXCLUDE updatable:true\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: Start Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:feature qName:feature\nPlatformConfig: End Element: uri: local Name:site qName:site\nPlatformConfig: End Element: uri: local Name:config qName:config\nPlatformConfig: Using configuration file:/d:/eclipse-testing/test-\neclipse/eclipse/configuration/org.eclipse.update/platform.xml\nPlatformConfig: Creating configuration file:/d:/eclipse-testing/test-\neclipse/eclipse/configuration/org.eclipse.update/platform.xml\nPlatformConfig: No links detected in file:/d:/eclipse-testing/test-\neclipse/eclipse/links/\nPlatformConfig: file:/d:/eclipse-testing/test-eclipse/eclipse/ feature stamp: \n1084297012962 in 0ms\nPlatformConfig: file:/d:/eclipse-testing/test-eclipse/eclipse/ located  117 \nplugin(s)\nPlatformConfig: file:/d:/eclipse-testing/test-eclipse/eclipse/ plugin stamp: \n1084302092806 in 180ms\nPlatformConfig: Same last time stamp *****\nTime spent in registry parsing: null\nTime spent in package admin resolve: null\nTime spent resolving the dependency system: null\n\nThe last three lines are normally (when things work) not there.",
    "Increasing the severity...",
    "yes.  I saw this last night with i05111600.  There are some issues in that we \ndo not write things out until we exit.  If you run and exit once then \neverything is happy.  If not there is some sort of problem that manifests \nitself as the application not being found.",
    "Correct.  If I run and exit once then it works.\nThe problem is the work-around can only be applied when I launch Eclipse \nmanually.  I do not have control over automated test framework, or how people \nuse infocenter or stand-alone help.\n\nI think if you have not written anyting out before exiting things would work.  \nIt looks more like what you write is unsafe, i.e. it exists period when thing \nare in inconsistent, inrecoverable state (part of state written).  More likely \nthere is some kind of unnecessary file locking.",
    "The problem is caused by the fact that although the OSGi framework does not save\nits state until shutdown, the update configurator saves it right away. The\nsecond startup fails because update configurator figures out there is nothing to\ninstall (ConfigurationActivator.canRunWithCachedData() returns true).",
    "For a different reason (fixing the bug for running with -clean), today\u0027s build \nshould work fine, as the update configurator is checking framework timestamp.\nHowver, you need to fix saving of osgi stuff earlier, because we will end up \nwith performance problems if we don\u0027t run with cached data on subsequent \ninvocations.",
    "Confirmed it works fine with i200405130010. Dorian, your concerns with\nperformance are valid only for this specific scenario (launching multiple\ninstances of Eclipse  without having ever had shutdown at least once). We save\nduring shutdown only exactly because of performance concerns for the normal\nscenarios.\n",
    "I don\u0027t know what normal scenario\u0027s are anymore,\nso I leave this up to you :-)",
    "Plugins whose cache depend on the current configuration should use the Platform\nstate timestamp as a reference (as Update is doing). No further action from Core\nwas needed."
  ],
  "commentCreationDates": [
    "2004-05-11T22:40:38+02:00",
    "2004-05-12T22:45:33+02:00",
    "2004-05-12T23:10:54+02:00",
    "2004-05-12T23:22:45+02:00",
    "2004-05-13T21:19:59+02:00",
    "2004-05-13T21:45:12+02:00",
    "2004-05-13T21:53:39+02:00",
    "2004-05-13T22:16:16+02:00",
    "2004-05-18T17:44:02+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.RuntimeException",
      "message": "Application \"org.eclipse.ui.ide.workbench\" could  not be found in the registry.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:289"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:249"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:126"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:324"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:269"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:722"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:706"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "61803",
      "date": "2004-05-11T22:40:38+02:00",
      "product": "Equinox",
      "component": "Incubator",
      "severity": "major"
    }
  ],
  "groupId": "61803",
  "bugId": "61803",
  "date": "2004-05-11T22:40:38+02:00",
  "product": "Equinox",
  "component": "Incubator",
  "severity": "major"
}