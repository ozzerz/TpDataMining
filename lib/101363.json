{
  "comments": [
    "To repro:\n1.  create a new or open an existing JSP file in the JSP editor (I\u0027ll call the\nfile bob.jsp)\n2.  Right click on the file and select Refactor | Rename\n3.  Rename the file bob.jsp.old\n4.  Close the editor\n\nResults:  You get a message stating an error has occurred and to see log for\nmore details.  The log contains this stack:\n\n!ENTRY org.eclipse.ui.workbench 4 2 2005-06-22 14:18:52.689\n!MESSAGE Problems occurred when invoking code from plug-in:\n\"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NullPointerException\n\tat\norg.eclipse.wst.html.ui.internal.contentoutline.HTMLNodeActionManager.updateCase(HTMLNodeActionManager.java:98)\n\tat\norg.eclipse.wst.html.ui.internal.contentoutline.HTMLNodeActionManager.\u003cinit\u003e(HTMLNodeActionManager.java:38)\n\tat\norg.eclipse.wst.html.ui.internal.views.contentoutline.HTMLContentOutlineConfiguration.createNodeActionManager(HTMLContentOutlineConfiguration.java:30)\n\tat\norg.eclipse.wst.xml.ui.internal.views.contentoutline.XMLContentOutlineConfiguration$ActionManagerMenuListener.\u003cinit\u003e(XMLContentOutlineConfiguration.java:54)\n\tat\norg.eclipse.wst.xml.ui.internal.views.contentoutline.XMLContentOutlineConfiguration.getMenuListener(XMLContentOutlineConfiguration.java:111)\n\tat\norg.eclipse.wst.sse.ui.internal.contentoutline.StructuredTextEditorContentOutlinePage.setConfiguration(StructuredTextEditorContentOutlinePage.java:372)\n\tat\norg.eclipse.wst.sse.ui.internal.contentoutline.StructuredTextEditorContentOutlinePage.dispose(StructuredTextEditorContentOutlinePage.java:234)\n\tat\norg.eclipse.ui.views.contentoutline.ContentOutline.doDestroyPage(ContentOutline.java:145)\n\tat org.eclipse.ui.part.PageBookView.removePage(PageBookView.java:718)\n\tat org.eclipse.ui.part.PageBookView.partClosed(PageBookView.java:644)\n\tat org.eclipse.ui.internal.PartListenerList$3.run(PartListenerList.java:102)\n\tat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)\n\tat org.eclipse.core.runtime.Platform.run(Platform.java:783)\n\tat org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:58)\n\tat\norg.eclipse.ui.internal.PartListenerList.firePartClosed(PartListenerList.java:100)\n\tat org.eclipse.ui.internal.PartService.firePartClosed(PartService.java:100)\n\tat\norg.eclipse.ui.internal.WorkbenchPagePartList.firePartClosed(WorkbenchPagePartList.java:38)\n\tat org.eclipse.ui.internal.PartList.partClosed(PartList.java:212)\n\tat org.eclipse.ui.internal.PartList.removePart(PartList.java:147)\n\tat org.eclipse.ui.internal.WorkbenchPage.disposePart(WorkbenchPage.java:1427)\n\tat\norg.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents(WorkbenchPage.java:1255)\n\tat org.eclipse.ui.internal.WorkbenchPage.deferUpdates(WorkbenchPage.java:1239)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1213)\n\tat org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1268)\n\tat org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:54)\n\tat org.eclipse.ui.internal.PartStack.close(PartStack.java:495)\n\tat org.eclipse.ui.internal.EditorStack.close(EditorStack.java:197)\n\tat org.eclipse.ui.internal.PartStack$1.close(PartStack.java:102)\n\tat\norg.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)\n\tat\norg.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)\n\tat\norg.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)\n\tat\norg.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)\n\tat\norg.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)\n\tat\norg.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:563)\n\tat org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:190)\n\tat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2075)\n\tat org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:292)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:844)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3070)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2703)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\n\tat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)",
    "Thanks ... gee, I sure hate seeing that \"updateCase\" during a close?!\n\nWe\u0027ll definitely fix quick to \"fail\" gracefully, but not sure we can \nsucceed perfectly without some more work. \n\nI assume you have not defined \u0027old\u0027 to be in the category of \nJSP ContentTypes? (I think that\u0027s the contentType switch is \nthe main problem here, and this case its probably fine to assume \"plain text\"\n... while closing, but if you have a JSP file you want to save as HTML ... not sure \nwe\u0027d handle that too much better. \n\n",
    "Yeah, \u0027old\u0027 is basically just any undefined extension.  Hadn\u0027t tried jsp to\nhtml...or xhtml to xml or the like.  Ideally, we\u0027d close the file and reopen it\nin the new editor.  Midbar might be to show a warning informing the user the\nfile has to be closed and that they have to reopen it.  Lowbar, as you said, is\njust get rid of the error.\n\nI tried the same sort of thing on xml and wsdl and they appear to handle it more\ngracefully but NPEs get thrown in the log (haven\u0027t logged that bug yet)",
    "I think I\u0027ve caught most the cases where \"something bad happens\". \n\nWhich is the low bar in comment 2 :)\n\nWe should be able to \"change types\" and re-configure and keep right on going, \nfor most things, for the source page, at least. (without having to \"open and\nclose editor\"). \n\nThis seems to work fine for JSP to HTML, and vice versa. But will need more\ntesting. But, going from \"out\" to \"jsp\" doesn\u0027t currently work. If/when someone\nopens a feature request, we\u0027ll look at that too. \n\nPlus, doesn\u0027t really address case of multipage editors where the non-source\npages depend on the type of file ... sounds like a plan item. \n\nCode released for 6/28 I-build. \n",
    "Confirmed fixed (tested on latest I20050712 build).\nTested:\n--repro steps for a JSP, XML, WSLD\n--changing extensions from .jsp to .wsdl, .foo, .xml, etc; Still had some less\nthan ideal behavior with WSDL, particularly, but no crashes.  Will log other\nissues separately.",
    "moving verified bugs to closed."
  ],
  "commentCreationDates": [
    "2005-06-22T23:19:41+02:00",
    "2005-06-23T00:10:14+02:00",
    "2005-06-23T00:33:22+02:00",
    "2005-06-27T18:30:15+02:00",
    "2005-07-12T22:38:09+02:00",
    "2005-07-21T05:14:14+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.wst.html.ui.internal.contentoutline.HTMLNodeActionManager.updateCase",
          "source": "HTMLNodeActionManager.java:98"
        },
        {
          "method": "org.eclipse.wst.html.ui.internal.contentoutline.HTMLNodeActionManager.\u003cinit\u003e",
          "source": "HTMLNodeActionManager.java:38"
        },
        {
          "method": "org.eclipse.wst.html.ui.internal.views.contentoutline.HTMLContentOutlineConfiguration.createNodeActionManager",
          "source": "HTMLContentOutlineConfiguration.java:30"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.views.contentoutline.XMLContentOutlineConfiguration$ActionManagerMenuListener.\u003cinit\u003e",
          "source": "XMLContentOutlineConfiguration.java:54"
        },
        {
          "method": "org.eclipse.wst.xml.ui.internal.views.contentoutline.XMLContentOutlineConfiguration.getMenuListener",
          "source": "XMLContentOutlineConfiguration.java:111"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.contentoutline.StructuredTextEditorContentOutlinePage.setConfiguration",
          "source": "StructuredTextEditorContentOutlinePage.java:372"
        },
        {
          "method": "org.eclipse.wst.sse.ui.internal.contentoutline.StructuredTextEditorContentOutlinePage.dispose",
          "source": "StructuredTextEditorContentOutlinePage.java:234"
        },
        {
          "method": "org.eclipse.ui.views.contentoutline.ContentOutline.doDestroyPage",
          "source": "ContentOutline.java:145"
        },
        {
          "method": "org.eclipse.ui.part.PageBookView.removePage",
          "source": "PageBookView.java:718"
        },
        {
          "method": "org.eclipse.ui.part.PageBookView.partClosed",
          "source": "PageBookView.java:644"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList$3.run",
          "source": "PartListenerList.java:102"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1044"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:783"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList.fireEvent",
          "source": "PartListenerList.java:58"
        },
        {
          "method": "org.eclipse.ui.internal.PartListenerList.firePartClosed",
          "source": "PartListenerList.java:100"
        },
        {
          "method": "org.eclipse.ui.internal.PartService.firePartClosed",
          "source": "PartService.java:100"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPagePartList.firePartClosed",
          "source": "WorkbenchPagePartList.java:38"
        },
        {
          "method": "org.eclipse.ui.internal.PartList.partClosed",
          "source": "PartList.java:212"
        },
        {
          "method": "org.eclipse.ui.internal.PartList.removePart",
          "source": "PartList.java:147"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.disposePart",
          "source": "WorkbenchPage.java:1427"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents",
          "source": "WorkbenchPage.java:1255"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.deferUpdates",
          "source": "WorkbenchPage.java:1239"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditors",
          "source": "WorkbenchPage.java:1213"
        },
        {
          "method": "org.eclipse.ui.internal.WorkbenchPage.closeEditor",
          "source": "WorkbenchPage.java:1268"
        },
        {
          "method": "org.eclipse.ui.internal.EditorPane.doHide",
          "source": "EditorPane.java:54"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack.close",
          "source": "PartStack.java:495"
        },
        {
          "method": "org.eclipse.ui.internal.EditorStack.close",
          "source": "EditorStack.java:197"
        },
        {
          "method": "org.eclipse.ui.internal.PartStack$1.close",
          "source": "PartStack.java:102"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent",
          "source": "TabbedStackPresentation.java:81"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:267"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent",
          "source": "AbstractTabFolder.java:276"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1",
          "source": "DefaultTabFolder.java:1"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed",
          "source": "DefaultTabFolder.java:67"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners",
          "source": "PaneFolder.java:563"
        },
        {
          "method": "org.eclipse.ui.internal.presentations.PaneFolder$3.close",
          "source": "PaneFolder.java:190"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder.onMouse",
          "source": "CTabFolder.java:2075"
        },
        {
          "method": "org.eclipse.swt.custom.CTabFolder$1.handleEvent",
          "source": "CTabFolder.java:292"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:844"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runDeferredEvents",
          "source": "Display.java:3070"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2703"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1699"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1663"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:367"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "101363",
      "date": "2005-06-22T23:19:41+02:00",
      "product": "Web Tools",
      "component": "wst.html",
      "severity": "normal"
    }
  ],
  "groupId": "101363",
  "bugId": "101363",
  "date": "2005-06-22T23:19:41+02:00",
  "product": "Web Tools",
  "component": "wst.html",
  "severity": "normal"
}