{
  "comments": [
    "3.3 M5\n\nGot a job error dialog \"Failed to execute runnable\" during \"Update decorations\" (or something similar) and a corresponding log entry.\nNot sure of the exact steps to reproduce this.\n\n!ENTRY org.eclipse.ui 4 0 2007-02-26 17:01:25.218\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.util.ConcurrentModificationException)\n\tat org.eclipse.swt.SWT.error(SWT.java:3478)\n\tat org.eclipse.swt.SWT.error(SWT.java:3401)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3467)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3107)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2264)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2228)\n\tat org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2103)\n\tat org.eclipse.ui.internal.Workbench$4.run(Workbench.java:457)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:452)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:146)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1124)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1099)\nCaused by: java.util.ConcurrentModificationException\n\tat java.util.HashMap$HashIterator.nextEntry(HashMap.java:842)\n\tat java.util.HashMap$KeyIterator.next(HashMap.java:878)\n\tat java.util.AbstractCollection.toArray(AbstractCollection.java:191)\n\tat org.eclipse.ui.internal.decorators.DecorationScheduler$3.setUpUpdates(DecorationScheduler.java:544)\n\tat org.eclipse.ui.internal.decorators.DecorationScheduler$3.runInUIThread(DecorationScheduler.java:494)\n\tat org.eclipse.ui.progress.UIJob$1.run(UIJob.java:94)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 23 more",
    "Looks like pendingUpdate is accessed by both the update job and the decoration job with no synchronization.  Could just wrap it in Collections.synchronizedMap, but the following must also be done atomically in setUpUpdates():\nObject[] elements \u003d pendingUpdate.toArray(new Object[pendingUpdate.size()]);\npendingUpdate.clear();\n\n",
    "*** Bug 175778 has been marked as a duplicate of this bug. ***",
    "Fixed with a synchronized key in the two offending areas. Thanks for the analysis Nick.",
    "This bug marked a change to FilteredItemsSelectionDialog that caused FilteredResourcesSelectionDialog to stop compiling ... changing a protected class to private.\n\nI\u0027ve re-opened the bug but it could just be that was a small change that slipped in with the bug, and that it can be resolved again.\n\nPW",
    "That was my fault for releasing and unrelated changed.",
    "Verified in I20070320-0010 by code inspection",
    "*** Bug 203851 has been marked as a duplicate of this bug. ***",
    "Reopening - Boris has seen this in 3.4. See Bug 203851",
    "Created an attachment (id\u003d78685)\nPatch\n\nThe initial fix missed one case.",
    "Patch released for build \u003e20071011",
    "Verified in I20071029-0100"
  ],
  "commentCreationDates": [
    "2007-02-26T22:08:10+01:00",
    "2007-02-26T22:14:01+01:00",
    "2007-02-28T21:14:19+01:00",
    "2007-03-12T21:02:21+01:00",
    "2007-03-13T00:14:21+01:00",
    "2007-03-13T13:57:45+01:00",
    "2007-03-20T15:45:39+01:00",
    "2007-09-18T20:25:28+02:00",
    "2007-09-18T20:26:17+02:00",
    "2007-09-18T22:13:24+02:00",
    "2007-10-11T21:15:33+02:00",
    "2007-10-29T19:19:01+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Failed to execute runnable (java.util.ConcurrentModificationException)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3478"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3401"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3467"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:3107"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:2264"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:2228"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.access$4",
          "source": "Workbench.java:2103"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench$4.run",
          "source": "Workbench.java:457"
        },
        {
          "method": "org.eclipse.core.databinding.observable.Realm.runWithDefault",
          "source": "Realm.java:289"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:452"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.application.IDEApplication.start",
          "source": "IDEApplication.java:101"
        },
        {
          "method": "org.eclipse.equinox.internal.app.EclipseAppHandle.run",
          "source": "EclipseAppHandle.java:146"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:106"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:76"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:354"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:169"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:64"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:43"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:615"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.invokeFramework",
          "source": "Main.java:476"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.basicRun",
          "source": "Main.java:416"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.run",
          "source": "Main.java:1124"
        },
        {
          "method": "org.eclipse.equinox.launcher.Main.main",
          "source": "Main.java:1099"
        }
      ],
      "causedBy": {
        "exceptionType": "java.util.ConcurrentModificationException",
        "elements": [
          {
            "method": "java.util.HashMap$HashIterator.nextEntry",
            "source": "HashMap.java:842"
          },
          {
            "method": "java.util.HashMap$KeyIterator.next",
            "source": "HashMap.java:878"
          },
          {
            "method": "java.util.AbstractCollection.toArray",
            "source": "AbstractCollection.java:191"
          },
          {
            "method": "org.eclipse.ui.internal.decorators.DecorationScheduler$3.setUpUpdates",
            "source": "DecorationScheduler.java:544"
          },
          {
            "method": "org.eclipse.ui.internal.decorators.DecorationScheduler$3.runInUIThread",
            "source": "DecorationScheduler.java:494"
          },
          {
            "method": "org.eclipse.ui.progress.UIJob$1.run",
            "source": "UIJob.java:94"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "175606",
      "date": "2007-02-26T22:08:10+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "major"
    }
  ],
  "groupId": "175606",
  "bugId": "175606",
  "date": "2007-02-26T22:08:10+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "major"
}