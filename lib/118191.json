{
  "comments": [
    "After exporting my rcp-product for the first time I get the following stack-trace:\n\n!SESSION 2005-11-28 07:59:14.821 -----------------------------------------------\neclipse.buildId\u003dunknown\njava.version\u003d1.5.0_05\njava.vendor\u003dSun Microsystems Inc.\nBootLoader constants: OS\u003dwin32, ARCH\u003dx86, WS\u003dwin32, NL\u003dde_AT\nCommand-line arguments:  -os win32 -ws win32 -arch x86\n\n!ENTRY org.eclipse.update.configurator 2005-11-28 07:59:16.734\n!MESSAGE Unable to find feature.xml in directory: e:\\Semester_5\\Rich_Client\\Code\\org.eclipse.encian.export\\eNcian-Tools\\features\\eNcian_1.0.0.jar\n\n!ENTRY org.eclipse.osgi 2005-11-28 07:59:36.192\n!MESSAGE Application error\n!STACK 1\njava.lang.NullPointerException\n\tat org.eclipse.jface.action.StatusLine.handleDispose(StatusLine.java:353)\n\tat org.eclipse.jface.action.StatusLine$1.widgetDisposed(StatusLine.java:232)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:101)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)\n\tat org.eclipse.swt.widgets.Widget.releaseWidget(Widget.java:755)\n\tat org.eclipse.swt.widgets.Control.releaseWidget(Control.java:1574)\n\tat org.eclipse.swt.widgets.Scrollable.releaseWidget(Scrollable.java:195)\n\tat org.eclipse.swt.widgets.Composite.releaseWidget(Composite.java:594)\n\tat org.eclipse.swt.widgets.Widget.releaseResources(Widget.java:720)\n\tat org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:588)\n\tat org.eclipse.swt.widgets.Composite.releaseWidget(Composite.java:593)\n\tat org.eclipse.swt.widgets.Canvas.releaseWidget(Canvas.java:117)\n\tat org.eclipse.swt.widgets.Decorations.releaseWidget(Decorations.java:782)\n\tat org.eclipse.swt.widgets.Shell.releaseWidget(Shell.java:868)\n\tat org.eclipse.swt.widgets.Widget.dispose(Widget.java:382)\n\tat org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:441)\n\tat org.eclipse.swt.widgets.Shell.dispose(Shell.java:499)\n\tat org.eclipse.swt.widgets.Display.release(Display.java:2761)\n\tat org.eclipse.swt.graphics.Device.dispose(Device.java:261)\n\tat org.eclipse.encian.EncianApplication.run(EncianApplication.java:85)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:278)\n\tat org.eclipse.core.launcher.Main.run(Main.java:973)\n\tat org.eclipse.core.launcher.Main.main(Main.java:948)\n\nThe line at org.eclipse.encian.EncianApplication.run(EncianApplication.java:85) calls the super.dispose-method in the finally block of the application\u0027s initialization.\nThis occurs only the first time I start the product. The second time everything works fine. What\u0027s wrong here?",
    "I suspect a user error in the implementation of the application.\n\nMoving to platform/ui as this is not a PDE issue.",
    "(In reply to comment #1)\n\u003e I suspect a user error in the implementation of the application.\n\nI\u0027m not sure. There was a similar issue reported in bug 60893 that has been fixed. Thus, this could also be a regression. From what he posted in the newsgroup the implementation looks pretty straight forward.\n\ntry {\n int returnCode \u003d PlatformUI.createAndRunWorkbench(\n     display, new ApplicationWorkbenchAdvisor());\n if (returnCode \u003d\u003d PlatformUI.RETURN_RESTART) {\n   return IPlatformRunnable.EXIT_RESTART;\n }\n return IPlatformRunnable.EXIT_OK;\n} finally {\n display.dispose();\n}\n\nFor me it looks like StatusLine#handleDispose is in a stale state or missing a null check. I\u0027m not sure if whether the state or null is allowed there.",
    "Strange, the windows should have already been closed before the workbench returns control to the app, before it does the Display.dispose().\nIt looks as if the StatusLine control is getting the dispose event twice.\nI\u0027ll change StatusLine.handleDispose to include null checks on its sub-controls, but this should not really be necessary, and this may end up hiding a deeper SWT bug.\n",
    "Steve: StatusLine is a subclass of Control.  In its constructor, it hooks a dispose listener on itself to call handleDispose, and creates some child controls as well as a Cursor.\nIn handleDispose it disposes the Cursor and one of the child controls, and nulls both these fields.  I guess the latter is not needed, but it\u0027s actually failing on the earlier dispose of the Cursor.  The cursor field will only be null if handleDispose() already got called, or if the constructor failed in the first place (doubtful).\n\n",
    "Fixed.",
    "Nick, is the event being sent twice or is it an ordering issue?",
    "It looks like the event is getting sent twice.  StatusLine.handleDispose() is only called from the dispose listener, and nobody else nulls those fields.",
    "Verified in I20051213-0010.\n"
  ],
  "commentCreationDates": [
    "2005-11-28T07:05:31+01:00",
    "2005-11-28T07:12:36+01:00",
    "2005-11-29T12:14:57+01:00",
    "2005-11-29T18:06:46+01:00",
    "2005-11-29T18:12:27+01:00",
    "2005-11-29T18:17:38+01:00",
    "2005-11-29T22:31:35+01:00",
    "2005-11-30T13:39:59+01:00",
    "2005-12-13T18:32:56+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.NullPointerException",
      "elements": [
        {
          "method": "org.eclipse.jface.action.StatusLine.handleDispose",
          "source": "StatusLine.java:353"
        },
        {
          "method": "org.eclipse.jface.action.StatusLine$1.widgetDisposed",
          "source": "StatusLine.java:232"
        },
        {
          "method": "org.eclipse.swt.widgets.TypedListener.handleEvent",
          "source": "TypedListener.java:101"
        },
        {
          "method": "org.eclipse.swt.widgets.EventTable.sendEvent",
          "source": "EventTable.java:66"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:843"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:867"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.sendEvent",
          "source": "Widget.java:848"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.releaseWidget",
          "source": "Widget.java:755"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.releaseWidget",
          "source": "Control.java:1574"
        },
        {
          "method": "org.eclipse.swt.widgets.Scrollable.releaseWidget",
          "source": "Scrollable.java:195"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseWidget",
          "source": "Composite.java:594"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.releaseResources",
          "source": "Widget.java:720"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseChildren",
          "source": "Composite.java:588"
        },
        {
          "method": "org.eclipse.swt.widgets.Composite.releaseWidget",
          "source": "Composite.java:593"
        },
        {
          "method": "org.eclipse.swt.widgets.Canvas.releaseWidget",
          "source": "Canvas.java:117"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.releaseWidget",
          "source": "Decorations.java:782"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.releaseWidget",
          "source": "Shell.java:868"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.dispose",
          "source": "Widget.java:382"
        },
        {
          "method": "org.eclipse.swt.widgets.Decorations.dispose",
          "source": "Decorations.java:441"
        },
        {
          "method": "org.eclipse.swt.widgets.Shell.dispose",
          "source": "Shell.java:499"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.release",
          "source": "Display.java:2761"
        },
        {
          "method": "org.eclipse.swt.graphics.Device.dispose",
          "source": "Device.java:261"
        },
        {
          "method": "org.eclipse.encian.EncianApplication.run",
          "source": "EncianApplication.java:85"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:226"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:376"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:163"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:334"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:278"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:973"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:948"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "118191",
      "date": "2005-11-28T07:05:31+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "118191",
  "bugId": "118191",
  "date": "2005-11-28T07:05:31+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}