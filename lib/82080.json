{
  "comments": [
    "Add and remove a control dynamically from a composite which is laid out using\nTableWrapLayout, while removing the control it throws an SWTException as shown below\n\norg.eclipse.swt.SWTException: Widget is disposed\n\tat org.eclipse.swt.SWT.error(SWT.java:2697)\n\tat org.eclipse.swt.SWT.error(SWT.java:2622)\n\tat org.eclipse.swt.SWT.error(SWT.java:2593)\n\tat org.eclipse.swt.widgets.Widget.error(Widget.java:385)\n\tat org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:287)\n\tat org.eclipse.swt.widgets.Control.getSize(Control.java:976)\n\tat org.eclipse.ui.forms.widgets.SizeCache.flush(SizeCache.java:160)\n\tat org.eclipse.ui.forms.widgets.SizeCache.flush(SizeCache.java:141)\n\tat org.eclipse.ui.forms.widgets.LayoutCache.flush(LayoutCache.java:117)\n\tat\norg.eclipse.ui.forms.widgets.TableWrapLayout.computeMinimumWidth(TableWrapLayout.java:121)\n\tat\norg.eclipse.ui.internal.forms.widgets.FormUtil.computeMinimumWidth(FormUtil.java:347)\n\tat\norg.eclipse.ui.forms.widgets.ExpandableComposite$ExpandableLayout.computeMinimumWidth(ExpandableComposite.java:338)\n\tat org.eclipse.ui.forms.widgets.SizeCache.computeMinimumWidth(SizeCache.java:415)\n\tat\norg.eclipse.ui.forms.widgets.TableWrapLayout.calculateMinimumColumnWidths(TableWrapLayout.java:716)\n\tat\norg.eclipse.ui.forms.widgets.TableWrapLayout.internalGetMinimumWidth(TableWrapLayout.java:659)\n\tat\norg.eclipse.ui.forms.widgets.TableWrapLayout.computeMinimumWidth(TableWrapLayout.java:142)\n\tat org.eclipse.ui.forms.widgets.SizeCache.computeMinimumWidth(SizeCache.java:415)\n\tat org.eclipse.ui.forms.widgets.SizeCache.computeSize(SizeCache.java:188)\n\tat org.eclipse.ui.forms.widgets.Form$FormLayout.computeSize(Form.java:120)\n\tat org.eclipse.ui.forms.widgets.Form$FormLayout.computeMinimumWidth(Form.java:71)\n\tat org.eclipse.ui.forms.widgets.SizeCache.computeMinimumWidth(SizeCache.java:415)\n\tat org.eclipse.ui.forms.widgets.SizeCache.computeSize(SizeCache.java:188)\n\tat\norg.eclipse.ui.forms.widgets.SharedScrolledComposite.reflow(SharedScrolledComposite.java:155)\n\tat org.eclipse.ui.forms.widgets.ScrolledForm.reflow(ScrolledForm.java:156)",
    "Did you call \u0027reflow\u0027 with \u0027true\u0027 or \u0027false\u0027? Since you are adding and \nremoving children, you should call \u0027true\u0027 to flush data structures.",
    "I am calling reflow(true) after removing the control.\n\nHere is the test case for the bug.\n\npublic class LayoutBug {\n\n\tpublic static void main(String[] args) {\n\t\tDisplay display \u003d new Display();\n\t\tfinal Shell shell \u003d new Shell(display);\n\t\tshell.setLayout(new FillLayout());\n\n\t\tfinal FormToolkit toolkit \u003d new FormToolkit(shell.getDisplay());\n\t\tfinal ScrolledForm form \u003d toolkit.createScrolledForm(shell);\n\t\tTableWrapLayout layout \u003d new TableWrapLayout();\n\t\tlayout.numColumns \u003d 1;\n\t\tlayout.leftMargin \u003d 10;\n\t\tlayout.rightMargin \u003d 10;\n\t\tlayout.bottomMargin \u003d 10;\n\t\tlayout.topMargin \u003d 10;\n\t\tform.getBody().setLayout(layout);\n\t\tform.setText(\"LayoutBug form\");\n\t\t\n\t\tSection sec1 \u003d toolkit.createSection(form.getBody(), Section.TWISTIE |\nSection.EXPANDED);\n\t\tsec1.setText(\"Section1\");\n        TableWrapData td \u003d new TableWrapData(TableWrapData.FILL_GRAB);\n        sec1.setLayoutData(td);\n        Composite sectionClient \u003d toolkit.createComposite(sec1);\n        sec1.setClient(sectionClient);\n        sectionClient.setLayout(new RowLayout());\n        \n        final List children \u003d new ArrayList();\n        \n        Button add \u003d toolkit.createButton(sectionClient, \"Add\", SWT.NONE);\n        add.addSelectionListener(new SelectionListener()\n        \t\t{\n\n\t\t\t\t\tpublic void widgetSelected(SelectionEvent e) {\n\t\t\t\t\t\tSection sec \u003d toolkit.createSection(form.getBody(), Section.TWISTIE |\nSection.EXPANDED);\n\t\t\t\t\t\tsec.setText(\"Child Section\");\n\t\t\t\t\t\tchildren.add(sec);\n\t\t\t\t\t\tform.reflow(true);\n\t\t\t\t\t}\n\n\t\t\t\t\tpublic void widgetDefaultSelected(SelectionEvent e) {\n\t\t\t\t\t}\n        \t\n        \t\t});\n        Button delete \u003d toolkit.createButton(sectionClient, \"Delete\", SWT.NONE);\n        delete.addSelectionListener(new SelectionListener()\n        \t\t{\n\n\t\t\t\t\tpublic void widgetSelected(SelectionEvent e) {\n\t\t\t\t\t\tif(children.size() \u003e 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t((Section)children.get(0)).dispose();\n\t\t\t\t\t\t\tform.reflow(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tpublic void widgetDefaultSelected(SelectionEvent e) {\n\t\t\t\t\t}\n        \t\n        \t\t});\n        \n\t\tshell.setSize(800, 600);\n\t\tshell.open();\n\t\twhile (!shell.isDisposed()) {\n\t\t\tif (!display.readAndDispatch())\n\t\t\t\tdisplay.sleep();\n\t\t}\n\t\tdisplay.dispose();\n\t}\n}",
    "I\u0027m seeing the same behavior when trying to layout after a control is disposed. \nAttempt is made to determine the size of a disposed control during a layout \nflush.",
    "Correct. Fixed in HEAD."
  ],
  "commentCreationDates": [
    "2005-01-03T10:18:05+01:00",
    "2005-01-04T19:08:29+01:00",
    "2005-01-05T08:46:30+01:00",
    "2005-01-12T19:38:14+01:00",
    "2005-01-26T12:39:53+01:00"
  ],
  "traces": [
    {
      "exceptionType": "org.eclipse.swt.SWTException",
      "message": "Widget is disposed",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2697"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2622"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:2593"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.error",
          "source": "Widget.java:385"
        },
        {
          "method": "org.eclipse.swt.widgets.Widget.checkWidget",
          "source": "Widget.java:287"
        },
        {
          "method": "org.eclipse.swt.widgets.Control.getSize",
          "source": "Control.java:976"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.flush",
          "source": "SizeCache.java:160"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.flush",
          "source": "SizeCache.java:141"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.LayoutCache.flush",
          "source": "LayoutCache.java:117"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.computeMinimumWidth",
          "source": "TableWrapLayout.java:121"
        },
        {
          "method": "org.eclipse.ui.internal.forms.widgets.FormUtil.computeMinimumWidth",
          "source": "FormUtil.java:347"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.ExpandableComposite$ExpandableLayout.computeMinimumWidth",
          "source": "ExpandableComposite.java:338"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.computeMinimumWidth",
          "source": "SizeCache.java:415"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.calculateMinimumColumnWidths",
          "source": "TableWrapLayout.java:716"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.internalGetMinimumWidth",
          "source": "TableWrapLayout.java:659"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.TableWrapLayout.computeMinimumWidth",
          "source": "TableWrapLayout.java:142"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.computeMinimumWidth",
          "source": "SizeCache.java:415"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.computeSize",
          "source": "SizeCache.java:188"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.Form$FormLayout.computeSize",
          "source": "Form.java:120"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.Form$FormLayout.computeMinimumWidth",
          "source": "Form.java:71"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.computeMinimumWidth",
          "source": "SizeCache.java:415"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SizeCache.computeSize",
          "source": "SizeCache.java:188"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.SharedScrolledComposite.reflow",
          "source": "SharedScrolledComposite.java:155"
        },
        {
          "method": "org.eclipse.ui.forms.widgets.ScrolledForm.reflow",
          "source": "ScrolledForm.java:156"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "82080",
      "date": "2005-01-03T10:18:05+01:00",
      "product": "Platform",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "82080",
  "bugId": "82080",
  "date": "2005-01-03T10:18:05+01:00",
  "product": "Platform",
  "component": "UI",
  "severity": "normal"
}