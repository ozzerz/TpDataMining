{
  "comments": [
    "Build ID: Eclipse 3.x\n\nSteps To Reproduce:\n\nThe bootstrap code (EclipseStarter) first tries to install all the bootstrap bundles specified on the osgi.bundles list and osgi.framework.extensions list.  If any BundleExceptions occur then we log the exception as an error because we assume there is a configuration error.  The initial launch works fine because at that point the framework has no bundles so there is no chance of colliding with an already installed bundle\nEclipse update (provisioning) then proceeds to install the rest of the bundles.  It has some hacky code to make sure it does not log errors if it attempts to install bundles which are already installed by the bootstrap code.  So we do not see errors here when/if update tries to install bundles from the osgi.bundles list.\nYou the provision JVM 2.0 which includes the com.ibm.cds framework extension.  Update goes ahead and installs com.ibm.cds into the instance and updates the configuration property osgi.framework.extensions to use com.ibm.cds.\nUpon restart the bootstrap code (EclipseStarter) determines that com.ibm.cds should be installed instead of com.ibm.jxesupport as a bootstrap bundle.  It succeeds in uninstalling com.ibm.jxesupport but fails to install com.ibm.cds because it is already installed by provisioning and an error is logged.\nProvisioning notices that com.ibm.jxesupport is not installed and proceeds to install it.  Now both com.ibm.cds and com.ibm.jxesupport are both installed by provisioning.\nEvery time you restart the bootstrap code thinks there is a configuration error because it cannot install all the bootstrap bundles it thinks it should.  In this case com.ibm.cds.\nRevert back to JVM 1.0.  This causes osgi.framework.extensions to be set back to com.ibm.jxesupport.  Now the bootstrap code reports an error about not being able to install com.ibm.jxesupport.\n\nSome more smarts could be added to EclipseStarter to determine if the BundleException occurred because of an already installed bundle.\n\nYou can also reproduce this by adding bundles to the osgi.bundles list which were previously installed by update.\n\nExample stack trace:\n2007/10/18 12:11:59.355 SEVERE Error installing bundle: reference:file:plugins/c\nom.ibm.jxesupport_2.0.5.200710090902.jar/ ::class.method\u003dunknown ::thread\u003dmain :\n:loggername\u003dorg.eclipse.osgi\n\n        org.osgi.framework.BundleException: Bundle \"com.ibm.jxesupport\" version\n\"2.0.5.200710090902\" has already been installed from: update@plugins/com.ibm.jxe\nsupport_2.0.5.200710090902.jar\n        at org.eclipse.osgi.framework.internal.core.Framework.createAndVerifyBun\ndle(Framework.java:566)\n        at org.eclipse.osgi.framework.internal.core.Framework.installWorkerPrivi\nleged(Framework.java:833)\n        at org.eclipse.osgi.framework.internal.core.Framework$2.run(Framework.ja\nva:748)\n        at java.security.AccessController.doPrivileged(Unknown Source)\n        at org.eclipse.osgi.framework.internal.core.Framework.installWorker(Fram\nework.java:799)\n        at org.eclipse.osgi.framework.internal.core.Framework.installBundle(Fram\nework.java:743)\n        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.installBun\ndle(BundleContextImpl.java:221)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.installBundles(Eclips\neStarter.java:1073)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.loadBasicBundles(Ecli\npseStarter.java:649)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarte\nr.java:305)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja\nva:173)\n        at java.lang.reflect.AccessibleObject.invokeL(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n        at org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n        at org.eclipse.core.launcher.Main.run(Main.java:977)\n        at com.ibm.rcp.core.internal.launcher.Main.startLaunch(Main.java:895)\n        at com.ibm.rcp.core.internal.launcher.Main.main(Main.java:1319)\n        at java.lang.reflect.AccessibleObject.invokeV(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at com.ibm.oti.vm.JarRunner.main(Unknown Source)\n\n\nMore information:",
    "OSGi is considering adding error codes to BundleException which would really help us here to determine why the install operation failed.  For now EclipseStarter could use some internal framework smarts to figure out why the install failed.",
    "Created an attachment (id\u003d80712)\npossible fix\n\n",
    "Fixed for 3.4 M3."
  ],
  "commentCreationDates": [
    "2007-10-18T21:14:37+02:00",
    "2007-10-18T21:33:56+02:00",
    "2007-10-18T23:47:13+02:00",
    "2007-10-22T23:34:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "org.osgi.framework.BundleException",
      "message": "Bundle \"com.ibm.jxesupport\" version \"2.0.5.200710090902\" has already been installed from: update@plugins/com.ibm.jxe support_2.0.5.200710090902.jar",
      "elements": [
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.createAndVerifyBundle",
          "source": "Framework.java:566"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.installWorkerPrivileged",
          "source": "Framework.java:833"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework$2.run",
          "source": "Framework.ja va:748"
        },
        {
          "method": "java.security.AccessController.doPrivileged",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.installWorker",
          "source": "Fram ework.java:799"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.Framework.installBundle",
          "source": "Fram ework.java:743"
        },
        {
          "method": "org.eclipse.osgi.framework.internal.core.BundleContextImpl.installBundle",
          "source": "BundleContextImpl.java:221"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.installBundles",
          "source": "Eclips eStarter.java:1073"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.loadBasicBundles",
          "source": "Ecli pseStarter.java:649"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.startup",
          "source": "EclipseStarte r.java:305"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.ja va:173"
        },
        {
          "method": "java.lang.reflect.AccessibleObject.invokeL",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "com.ibm.rcp.core.internal.launcher.Main.startLaunch",
          "source": "Main.java:895"
        },
        {
          "method": "com.ibm.rcp.core.internal.launcher.Main.main",
          "source": "Main.java:1319"
        },
        {
          "method": "java.lang.reflect.AccessibleObject.invokeV",
          "source": "Unknown Source"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Unknown Source"
        },
        {
          "method": "com.ibm.oti.vm.JarRunner.main",
          "source": "Unknown Source"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "206813",
      "date": "2007-10-18T21:14:37+02:00",
      "product": "Equinox",
      "component": "Framework",
      "severity": "normal"
    }
  ],
  "groupId": "206813",
  "bugId": "206813",
  "date": "2007-10-18T21:14:37+02:00",
  "product": "Equinox",
  "component": "Framework",
  "severity": "normal"
}