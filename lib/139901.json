{
  "comments": [
    "3.2 RC2\n\nSee bug for 139121 details.\n\nIn JFace Text we used to call Platform.getWS():\n\n \tpublic String getWS() {\n\t\treturn getBundleContext().getProperty(PROP_WS);\n\t}\n\nThis causes an NPE when not running as plug-in.\nSee also bug 117753 for a similar issue.",
    "Here\u0027s an example log:\n\njava.lang.ExceptionInInitializerError\n\tat org.eclipse.jface.text.tests.rules.FastPartitionerTest.createPartitioner(FastPartitionerTest.java:58)\n\tat org.eclipse.jface.text.tests.rules.FastPartitionerTest.setUp(FastPartitionerTest.java:52)\n\tat junit.framework.TestCase.runBare(TestCase.java:125)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:124)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:457)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:670)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\nCaused by: java.lang.NullPointerException\n\tat org.eclipse.core.internal.runtime.InternalPlatform.getWS(InternalPlatform.java:745)\n\tat org.eclipse.core.runtime.Platform.getWS(Platform.java:1148)\n\tat org.eclipse.jface.text.rules.FastPartitioner.\u003cclinit\u003e(FastPartitioner.java:99)\n\t... 19 more\n\n",
    "Yup.  there is actually a related bug in the registry (bug 140005) where you have to set the system properties explicitly.  in this case we are appealing to an OSGi construct to get the property values.  I don\u0027t think that we can fix this for 3.2 without risk.  you can work around this by accessing the osgi.ws system property.  Will that work for you?",
    "We already worked around it by using SWT.getPlatform(), see bug 139121."
  ],
  "commentCreationDates": [
    "2006-05-03T11:43:53+02:00",
    "2006-05-03T11:47:42+02:00",
    "2006-05-04T03:55:36+02:00",
    "2006-05-04T08:42:14+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ExceptionInInitializerError",
      "elements": [
        {
          "method": "org.eclipse.jface.text.tests.rules.FastPartitionerTest.createPartitioner",
          "source": "FastPartitionerTest.java:58"
        },
        {
          "method": "org.eclipse.jface.text.tests.rules.FastPartitionerTest.setUp",
          "source": "FastPartitionerTest.java:52"
        },
        {
          "method": "junit.framework.TestCase.runBare",
          "source": "TestCase.java:125"
        },
        {
          "method": "junit.framework.TestResult$1.protect",
          "source": "TestResult.java:106"
        },
        {
          "method": "junit.framework.TestResult.runProtected",
          "source": "TestResult.java:124"
        },
        {
          "method": "junit.framework.TestResult.run",
          "source": "TestResult.java:109"
        },
        {
          "method": "junit.framework.TestCase.run",
          "source": "TestCase.java:118"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "junit.framework.TestSuite.runTest",
          "source": "TestSuite.java:208"
        },
        {
          "method": "junit.framework.TestSuite.run",
          "source": "TestSuite.java:203"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run",
          "source": "JUnit3TestReference.java:124"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.TestExecution.run",
          "source": "TestExecution.java:38"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:457"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests",
          "source": "RemoteTestRunner.java:670"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run",
          "source": "RemoteTestRunner.java:386"
        },
        {
          "method": "org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main",
          "source": "RemoteTestRunner.java:196"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.NullPointerException",
        "elements": [
          {
            "method": "org.eclipse.core.internal.runtime.InternalPlatform.getWS",
            "source": "InternalPlatform.java:745"
          },
          {
            "method": "org.eclipse.core.runtime.Platform.getWS",
            "source": "Platform.java:1148"
          },
          {
            "method": "org.eclipse.jface.text.rules.FastPartitioner.\u003cclinit\u003e",
            "source": "FastPartitioner.java:99"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 1,
      "bugId": "139901",
      "date": "2006-05-03T11:47:42+02:00",
      "product": "Platform",
      "component": "Runtime",
      "severity": "normal"
    }
  ],
  "groupId": "139901",
  "bugId": "139901",
  "date": "2006-05-03T11:43:53+02:00",
  "product": "Platform",
  "component": "Runtime",
  "severity": "normal"
}