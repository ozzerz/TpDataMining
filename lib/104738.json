{
  "comments": [
    "In case a member type is within a local class, it should not get an enclosing\nmethod attribute.\n\npublic class Test {\npublic static void main(String[] args) throws Exception  {\n\tclass MyLocal$A {\n\t\tclass Member {\n\t\t}\n\t};\n\tSystem.out.println(MyLocal$A.Member.class.getEnclosingMethod());\n\tSystem.out.println(MyLocal$A.Member.class.getEnclosingConstructor());\n}\n}\n\nAt runtime we get:\nException in thread \"main\" java.lang.InternalError: Enclosing method not found\n        at java.lang.Class.getEnclosingMethod(Class.java:916)\n        at X.main(X.java:7)\n\nWe should check for isNestedType() \u0026\u0026 !isMemberType() to find out if we should\nadd an enclosing method attribute instead of checking isAnonymous() ||\nisLocalType().",
    "Philippe,\n\nI think this should be a candidate for 3.1.1. The fix is trivial and without it\nwe can blow up at runtime.",
    "Created an attachment (id\u003d25162)\nProposed fix\n",
    "+1",
    "Fixed and released in HEAD.\nRegression test added in\norg.eclipse.jdt.core.tests.compiler.regression.EnclosingMethodAttributeTest.test001",
    "Created an attachment (id\u003d25243)\nRegression test\n",
    "New regression test\norg.eclipse.jdt.core.tests.compiler.regression.EnclosingMethodAttributeTest.test002",
    "Backported to 3.1 maintenance stream.",
    "Verified with 3.2 M1",
    "Verified for 3.2 M2 with build I20050920-0010.",
    "Verified using M20050923-1430 for 3.1.1"
  ],
  "commentCreationDates": [
    "2005-07-21T23:31:00+02:00",
    "2005-07-21T23:33:00+02:00",
    "2005-07-21T23:39:22+02:00",
    "2005-07-22T15:52:09+02:00",
    "2005-07-25T16:42:13+02:00",
    "2005-07-25T16:46:10+02:00",
    "2005-07-25T16:51:52+02:00",
    "2005-07-25T17:10:03+02:00",
    "2005-08-11T16:24:49+02:00",
    "2005-09-21T15:11:54+02:00",
    "2005-09-26T18:36:06+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.InternalError",
      "message": "Enclosing method not found",
      "elements": [
        {
          "method": "java.lang.Class.getEnclosingMethod",
          "source": "Class.java:916"
        },
        {
          "method": "X.main",
          "source": "X.java:7"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "104738",
      "date": "2005-07-21T23:31:00+02:00",
      "product": "JDT",
      "component": "Core",
      "severity": "normal"
    }
  ],
  "groupId": "104738",
  "bugId": "104738",
  "date": "2005-07-21T23:31:00+02:00",
  "product": "JDT",
  "component": "Core",
  "severity": "normal"
}