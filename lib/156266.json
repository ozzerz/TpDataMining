{
  "comments": [
    "When using a layout filter that filters everything, filterUnwantedObjects() returns Object[] unfilteredObjects  , which is of length 0 and cannot be casted to a LayoutEntity []  object. The code in the setupLayout method in AbstractLayoutAlgorithm does not check for such legal return values which causes the ClassCastException. see below:\n\n entitiesToLayout \u003d (LayoutEntity []) filterUnwantedObjects(entitiesToLayout);\n relationshipsToConsider \u003d (LayoutRelationship []) filterUnwantedObjects(relationshipsToConsider);\n\nadding a check for such a return value would be easy, but I don\u0027t know what should happen in the case that there is nothing to be layout because everything is filtered out. \n\n\n\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.ClassCastException: [Ljava.lang.Object;)\n\tat org.eclipse.swt.SWT.error(SWT.java:3374)\n\tat org.eclipse.swt.SWT.error(SWT.java:3297)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:126)\n\tat org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3168)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2870)\n\tat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)\n\tat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)\n\tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)\n\tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n\tat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)\n\tat org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:104)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)\n\tat org.eclipse.core.launcher.Main.basicRun(Main.java:280)\n\tat org.eclipse.core.launcher.Main.run(Main.java:977)\n\tat org.eclipse.core.launcher.Main.main(Main.java:952)\nCaused by: java.lang.ClassCastException: [Ljava.lang.Object;\n\tat org.eclipse.mylar.zest.layouts.algorithms.AbstractLayoutAlgorithm.setupLayout(AbstractLayoutAlgorithm.java:408)\n\tat org.eclipse.mylar.zest.layouts.algorithms.AbstractLayoutAlgorithm.applyLayout(AbstractLayoutAlgorithm.java:495)\n\tat org.eclipse.mylar.zest.core.internal.graphviewer.StaticGraphViewerImpl.applyLayoutInternal(StaticGraphViewerImpl.java:269)\n\tat org.eclipse.mylar.zest.core.internal.graphviewer.StaticGraphViewerImpl.access$0(StaticGraphViewerImpl.java:242)\n\tat org.eclipse.mylar.zest.core.internal.graphviewer.StaticGraphViewerImpl$2.run(StaticGraphViewerImpl.java:235)\n\tat org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n\tat org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)\n\t... 20 more",
    "We could possibly use java reflection to guarantee that the array returned is of the same type as the array passed in (in the same way that classes like ArrayList do it).",
    "that would be an option. But why is it not possible to cast an Object[] objects that contains GraphModelNode to a LayoutEntity[] entities ??\n\nI\u0027ve changed the code to:\n\nObject[] objects \u003d filterUnwantedObjects(entitiesToLayout);\n\t\tif (objects instanceof LayoutEntity[]) {\n\t\t\tentitiesToLayout \u003d (LayoutEntity[]) objects;\n\t\t} else {\n\t\t\tSystem.out.println(\"class cast does not work\");\n\t\t}\n\nand the objects  contains three GraphModelNode but I am still getting this classCastException. Why?",
    "It is because filterUnwantedObjects() creates an Object[] array, not a GraphModelNode array. Even though each element is a GraphModelNode, that doesn\u0027t mean that the array will be a GraphModelNode array. I think that the right solution is to use reflection in the method in question. Unfortunately, there is only one committer on this project and he is away. I\u0027ll make a quick patch for you, though. Hopefully we\u0027ll get it in soon.",
    "Created an attachment (id\u003d49446)\nPatch for creating array of the correct type.\n\nTry this patch. It uses java reflection to create an array of the correct type. Let me know if this works for you.",
    "Patch works fine! Thanks for the very quick response Del.",
    "closed"
  ],
  "commentCreationDates": [
    "2006-09-05T23:12:35+02:00",
    "2006-09-05T23:59:34+02:00",
    "2006-09-06T00:10:44+02:00",
    "2006-09-06T00:20:32+02:00",
    "2006-09-06T00:28:42+02:00",
    "2006-09-06T00:46:27+02:00",
    "2006-09-07T23:01:40+02:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.ClassCastException",
      "message": "[Ljava.lang.Object;)",
      "elements": [
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3374"
        },
        {
          "method": "org.eclipse.swt.SWT.error",
          "source": "SWT.java:3297"
        },
        {
          "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
          "source": "Synchronizer.java:126"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runAsyncMessages",
          "source": "Display.java:3168"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2870"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1914"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1878"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:419"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:149"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:95"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:78"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication",
          "source": "EclipseAppLauncher.java:104"
        },
        {
          "method": "org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start",
          "source": "EclipseAppLauncher.java:74"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:401"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:177"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:336"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:280"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "causedBy": {
        "exceptionType": "java.lang.ClassCastException",
        "message": "[Ljava.lang.Object;",
        "elements": [
          {
            "method": "org.eclipse.mylar.zest.layouts.algorithms.AbstractLayoutAlgorithm.setupLayout",
            "source": "AbstractLayoutAlgorithm.java:408"
          },
          {
            "method": "org.eclipse.mylar.zest.layouts.algorithms.AbstractLayoutAlgorithm.applyLayout",
            "source": "AbstractLayoutAlgorithm.java:495"
          },
          {
            "method": "org.eclipse.mylar.zest.core.internal.graphviewer.StaticGraphViewerImpl.applyLayoutInternal",
            "source": "StaticGraphViewerImpl.java:269"
          },
          {
            "method": "org.eclipse.mylar.zest.core.internal.graphviewer.StaticGraphViewerImpl.access$0",
            "source": "StaticGraphViewerImpl.java:242"
          },
          {
            "method": "org.eclipse.mylar.zest.core.internal.graphviewer.StaticGraphViewerImpl$2.run",
            "source": "StaticGraphViewerImpl.java:235"
          },
          {
            "method": "org.eclipse.swt.widgets.RunnableLock.run",
            "source": "RunnableLock.java:35"
          },
          {
            "method": "org.eclipse.swt.widgets.Synchronizer.runAsyncMessages",
            "source": "Synchronizer.java:123"
          }
        ],
        "number": 0,
        "commentIndex": 0
      },
      "number": 0,
      "commentIndex": 0,
      "bugId": "156266",
      "date": "2006-09-05T23:12:35+02:00",
      "product": "Mylyn",
      "component": "Zest",
      "severity": "normal"
    }
  ],
  "groupId": "156266",
  "bugId": "156266",
  "date": "2006-09-05T23:12:35+02:00",
  "product": "Mylyn",
  "component": "Zest",
  "severity": "normal"
}