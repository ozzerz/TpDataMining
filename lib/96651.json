{
  "comments": [
    "3.1M7\nthis happened during debugging, in the runtime workbench (the debugee)\n\nsuddenly I got a sequence of error dialog and I had to kill the workbench\nthe error was\n(no idea how to reproduce).\n\nwhatever caused it, maybe it should not show a sequence of dialogs. one is ok,\nand then just log.\n\njava.lang.IllegalStateException: Trouble reading from the registry cache file.\nat org.eclipse.core.internal.registry.TableReader.openInputFile(TableReader.java:89)\nat org.eclipse.core.internal.registry.TableReader.\u003cinit\u003e(TableReader.java:79)\nat\norg.eclipse.core.internal.registry.RegistryObjectManager.load(RegistryObjectManager.java:304)\nat\norg.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject(RegistryObjectManager.java:186)\nat\norg.eclipse.core.internal.registry.RegistryObjectManager.getObject(RegistryObjectManager.java:178)\nat\norg.eclipse.core.internal.registry.ExtensionPointHandle.getExtensionPoint(ExtensionPointHandle.java:88)\nat\norg.eclipse.core.internal.registry.ExtensionPointHandle.getExtension(ExtensionPointHandle.java:45)\nat\norg.eclipse.core.internal.registry.ExtensionRegistry.getExtension(ExtensionRegistry.java:363)\nat\norg.eclipse.core.internal.resources.NatureManager.createNature(NatureManager.java:208)\nat org.eclipse.core.internal.resources.Project.getNature(Project.java:367)\nat org.eclipse.jdt.internal.ui.actions.ActionUtil.isOnBuildPath(ActionUtil.java:91)\nat org.eclipse.jdt.ui.actions.FindAction.canOperateOn(FindAction.java:105)\nat org.eclipse.jdt.ui.actions.FindAction.canOperateOn(FindAction.java:101)\nat org.eclipse.jdt.ui.actions.FindAction.selectionChanged(FindAction.java:257)\nat\norg.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged(SelectionDispatchAction.java:210)\nat\norg.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged(SelectionDispatchAction.java:205)\nat org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:162)\nat\norg.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1029)\nat org.eclipse.core.runtime.Platform.run(Platform.java:775)\nat org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)\nat org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)\nat org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:160)\nat\norg.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1784)\nat\norg.eclipse.jface.viewers.StructuredViewer.setSelection(StructuredViewer.java:1452)\nat\norg.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage.select(JavaOutlinePage.java:1194)\nat\norg.eclipse.jdt.internal.ui.javaeditor.JavaEditor.synchronizeOutlinePage(JavaEditor.java:1808)\nat\norg.eclipse.jdt.internal.ui.javaeditor.JavaEditor.synchronizeOutlinePage(JavaEditor.java:1795)\nat\norg.eclipse.jdt.internal.ui.javaeditor.JavaEditor.selectionChanged(JavaEditor.java:1895)\nat\norg.eclipse.jdt.internal.ui.javaeditor.JavaEditor$EditorSelectionChangedListener.selectionChanged(JavaEditor.java:294)\nat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2295)\nat org.eclipse.jface.text.TextViewer.firePostSelectionChanged(TextViewer.java:2248)\nat org.eclipse.jface.text.TextViewer$4.run(TextViewer.java:2227)\nat org.eclipse.swt.widgets.Display.runTimer(Display.java:2963)\nat org.eclipse.swt.widgets.Display.messageProc(Display.java:2303)\nat org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)\nat org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1650)\nat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2552)\nat org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1601)\nat org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1565)\nat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:315)\nat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)\nat org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)\nat\norg.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:230)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:371)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:160)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.eclipse.core.launcher.Main.invokeFramework(Main.java:330)\nat org.eclipse.core.launcher.Main.basicRun(Main.java:274)\nat org.eclipse.core.launcher.Main.run(Main.java:977)\nat org.eclipse.core.launcher.Main.main(Main.java:952)",
    "I\u0027ve been able to reproduce the error and but it does not indicate a bug in the\nruntime itself. Rather the problem comes from PDE deleting invalid cache files\nwhile runtime is still using those. Note here that I\u0027m not blaming pde ui, since\nit is in its mandate to clean-up the configuration area when its get out of sync\nwith the content of the workspace.\n\nBecause it is critical for the runtime to have pde cleaning up the config area,\none solution could be for pde to notice that there is an instance running and\nput up a warning to say that problems may occur.\n\nHere is how to reproduce:\n- start a self hosting session making sure that the configuration is not deleted\non startup. Shutdown, then start again. Keep the session up and running. At this\npoint we are sure that there is a configuration area and some cache files. \n- modify the plugin.properties of any plugin\n- put a breakpoint in the code from Main or EclipseStarter\n- run the same launch configuration than used in the first step, wait \u0027til the\nbreakpoint is being hit.\n- go back to the first instance, try to open a new view, you will notice the error.",
    "By the time the runtime detects that the workspace is in use, the damage is \nalready done and PDE has deleted some files.\n\nTherefore, prior to doing anything in the launch operation, we look for \nthe .lock file in the workspace for that launch.  If it\u0027s there, we abort the \nlaunch with an appropriate error message.",
    "Reopening.\n\nThe litmus test of a .lock file is not sufficient.  Sometimes, that file \nremains there even if the workspace is not in use.\n\nPascal, what is the sure way to determine if the workspace is in use?",
    "Checking the .lock of the workspace won\u0027t do you any good, since the files we\ndon\u0027t want to delete are in the config area, which has its own lock mechanism.\n\nTo see if an instance is running, the only litmus test is to see if one of the\nfile matching \".tmp[0-9]+.instance\" can *not* be deleted from the following\nsubfolder in the config area, or if there is no file matching this pattern.\n",
    "If this can\u0027t be fixed, I think it should be put in a readme. don\u0027t you think?",
    "The more serious problem here is that if you launch with the \u0027clear workspace\u0027 \noption selected, and the workspace is in use, then PDE starts deleting as much \nas stuff as it can before the runtime starts and tells you that the workspace \nis in use.",
    "*** Bug 131171 has been marked as a duplicate of this bug. ***",
    "ya, dupe solved in 3.4M2!\n\n*** This bug has been marked as a duplicate of bug 172374 ***"
  ],
  "commentCreationDates": [
    "2005-05-25T19:24:26+02:00",
    "2005-05-25T20:30:40+02:00",
    "2005-06-05T22:50:01+02:00",
    "2005-06-06T05:51:53+02:00",
    "2005-06-06T15:25:00+02:00",
    "2005-06-09T20:04:32+02:00",
    "2005-06-09T21:03:22+02:00",
    "2006-03-10T20:41:31+01:00",
    "2007-11-12T02:29:26+01:00"
  ],
  "traces": [
    {
      "exceptionType": "java.lang.IllegalStateException",
      "message": "Trouble reading from the registry cache file.",
      "elements": [
        {
          "method": "org.eclipse.core.internal.registry.TableReader.openInputFile",
          "source": "TableReader.java:89"
        },
        {
          "method": "org.eclipse.core.internal.registry.TableReader.\u003cinit\u003e",
          "source": "TableReader.java:79"
        },
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.load",
          "source": "RegistryObjectManager.java:304"
        },
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.basicGetObject",
          "source": "RegistryObjectManager.java:186"
        },
        {
          "method": "org.eclipse.core.internal.registry.RegistryObjectManager.getObject",
          "source": "RegistryObjectManager.java:178"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionPointHandle.getExtensionPoint",
          "source": "ExtensionPointHandle.java:88"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionPointHandle.getExtension",
          "source": "ExtensionPointHandle.java:45"
        },
        {
          "method": "org.eclipse.core.internal.registry.ExtensionRegistry.getExtension",
          "source": "ExtensionRegistry.java:363"
        },
        {
          "method": "org.eclipse.core.internal.resources.NatureManager.createNature",
          "source": "NatureManager.java:208"
        },
        {
          "method": "org.eclipse.core.internal.resources.Project.getNature",
          "source": "Project.java:367"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.actions.ActionUtil.isOnBuildPath",
          "source": "ActionUtil.java:91"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.FindAction.canOperateOn",
          "source": "FindAction.java:105"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.FindAction.canOperateOn",
          "source": "FindAction.java:101"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.FindAction.selectionChanged",
          "source": "FindAction.java:257"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged",
          "source": "SelectionDispatchAction.java:210"
        },
        {
          "method": "org.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged",
          "source": "SelectionDispatchAction.java:205"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer$2.run",
          "source": "Viewer.java:162"
        },
        {
          "method": "org.eclipse.core.internal.runtime.InternalPlatform.run",
          "source": "InternalPlatform.java:1029"
        },
        {
          "method": "org.eclipse.core.runtime.Platform.run",
          "source": "Platform.java:775"
        },
        {
          "method": "org.eclipse.ui.internal.JFaceUtil$1.run",
          "source": "JFaceUtil.java:44"
        },
        {
          "method": "org.eclipse.jface.util.SafeRunnable.run",
          "source": "SafeRunnable.java:148"
        },
        {
          "method": "org.eclipse.jface.viewers.Viewer.fireSelectionChanged",
          "source": "Viewer.java:160"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.updateSelection",
          "source": "StructuredViewer.java:1784"
        },
        {
          "method": "org.eclipse.jface.viewers.StructuredViewer.setSelection",
          "source": "StructuredViewer.java:1452"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaOutlinePage.select",
          "source": "JavaOutlinePage.java:1194"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.synchronizeOutlinePage",
          "source": "JavaEditor.java:1808"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.synchronizeOutlinePage",
          "source": "JavaEditor.java:1795"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.selectionChanged",
          "source": "JavaEditor.java:1895"
        },
        {
          "method": "org.eclipse.jdt.internal.ui.javaeditor.JavaEditor$EditorSelectionChangedListener.selectionChanged",
          "source": "JavaEditor.java:294"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2295"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer.firePostSelectionChanged",
          "source": "TextViewer.java:2248"
        },
        {
          "method": "org.eclipse.jface.text.TextViewer$4.run",
          "source": "TextViewer.java:2227"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.runTimer",
          "source": "Display.java:2963"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.messageProc",
          "source": "Display.java:2303"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessageW",
          "source": "Native Method"
        },
        {
          "method": "org.eclipse.swt.internal.win32.OS.DispatchMessage",
          "source": "OS.java:1650"
        },
        {
          "method": "org.eclipse.swt.widgets.Display.readAndDispatch",
          "source": "Display.java:2552"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runEventLoop",
          "source": "Workbench.java:1601"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.runUI",
          "source": "Workbench.java:1565"
        },
        {
          "method": "org.eclipse.ui.internal.Workbench.createAndRunWorkbench",
          "source": "Workbench.java:315"
        },
        {
          "method": "org.eclipse.ui.PlatformUI.createAndRunWorkbench",
          "source": "PlatformUI.java:143"
        },
        {
          "method": "org.eclipse.ui.internal.ide.IDEApplication.run",
          "source": "IDEApplication.java:103"
        },
        {
          "method": "org.eclipse.core.internal.runtime.PlatformActivator$1.run",
          "source": "PlatformActivator.java:230"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:371"
        },
        {
          "method": "org.eclipse.core.runtime.adaptor.EclipseStarter.run",
          "source": "EclipseStarter.java:160"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke0",
          "source": "Native Method"
        },
        {
          "method": "sun.reflect.NativeMethodAccessorImpl.invoke",
          "source": "NativeMethodAccessorImpl.java:39"
        },
        {
          "method": "sun.reflect.DelegatingMethodAccessorImpl.invoke",
          "source": "DelegatingMethodAccessorImpl.java:25"
        },
        {
          "method": "java.lang.reflect.Method.invoke",
          "source": "Method.java:585"
        },
        {
          "method": "org.eclipse.core.launcher.Main.invokeFramework",
          "source": "Main.java:330"
        },
        {
          "method": "org.eclipse.core.launcher.Main.basicRun",
          "source": "Main.java:274"
        },
        {
          "method": "org.eclipse.core.launcher.Main.run",
          "source": "Main.java:977"
        },
        {
          "method": "org.eclipse.core.launcher.Main.main",
          "source": "Main.java:952"
        }
      ],
      "number": 0,
      "commentIndex": 0,
      "bugId": "96651",
      "duplicateId": "172374",
      "date": "2005-05-25T19:24:26+02:00",
      "product": "PDE",
      "component": "UI",
      "severity": "normal"
    }
  ],
  "groupId": "172374",
  "bugId": "96651",
  "duplicateId": "172374",
  "date": "2005-05-25T19:24:26+02:00",
  "product": "PDE",
  "component": "UI",
  "severity": "normal"
}